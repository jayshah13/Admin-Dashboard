{"ast":null,"code":"/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { createElement, isNullOrUndefined, addClass, remove, EventHandler, extend, append } from '@syncfusion/ej2-base';\nimport { cldrData, removeClass, getValue, getDefaultDateObject, closest, SanitizeHtmlHelper } from '@syncfusion/ej2-base';\nimport { Query, Deferred } from '@syncfusion/ej2-data';\nimport { CheckBox, Button } from '@syncfusion/ej2-buttons';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { DropDownList, MultiSelect } from '@syncfusion/ej2-dropdowns';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { DateTimePicker } from '@syncfusion/ej2-calendars';\nimport { FieldValidator } from './form-validator';\nimport { RecurrenceEditor } from '../../recurrence-editor/recurrence-editor';\nimport * as cls from '../base/css-constant';\nimport * as event from '../base/constant';\nimport * as util from '../base/util';\nvar EVENT_FIELD = 'e-field';\nvar REPEAT_CONTAINER_CLASS = 'e-recurrence-container';\nvar REPEAT_BUTTON_ICON_CLASS = 'e-recurrence-edit';\nvar REPEAT_BUTTON_CLASS = 'e-recurrence-edit-button';\nvar REPEAT_DIALOG_CLASS = 'e-recurrence-dialog';\nvar HIDE_STYLE_CLASS = 'e-hide';\n/**\n * Event editor window\n */\n\nvar EventWindow =\n/** @class */\nfunction () {\n  function EventWindow(parent) {\n    this.parent = parent;\n    this.l10n = this.parent.localeObj;\n    this.fields = this.parent.eventFields;\n    this.eventWindowTime = {\n      startTime: new Date(),\n      endTime: new Date()\n    };\n    this.renderEventWindow();\n  }\n\n  EventWindow.prototype.renderEventWindow = function () {\n    this.element = createElement('div', {\n      id: this.parent.element.id + '_dialog_wrapper'\n    });\n    this.parent.element.appendChild(this.element);\n    var dialogModel = {\n      animationSettings: {\n        effect: 'Zoom'\n      },\n      content: this.getEventWindowContent(),\n      cssClass: cls.EVENT_WINDOW_DIALOG_CLASS,\n      enableRtl: this.parent.enableRtl,\n      height: this.parent.isAdaptive ? '100%' : 'auto',\n      minHeight: '300px',\n      isModal: true,\n      showCloseIcon: this.parent.isAdaptive ? false : true,\n      target: document.body,\n      visible: false,\n      width: '500px',\n      beforeOpen: this.onBeforeOpen.bind(this),\n      beforeClose: this.onBeforeClose.bind(this)\n    };\n\n    if (this.parent.isAdaptive) {\n      dialogModel.cssClass = cls.EVENT_WINDOW_DIALOG_CLASS + ' ' + cls.DEVICE_CLASS;\n      dialogModel.header = '<div class=\"e-title-header\"><div class=\"e-back-icon e-icons\"></div><div class=\"e-title-text\">' + this.l10n.getConstant('newEvent') + '</div><div class=\"e-save-icon e-icons\"></div></div>';\n    } else {\n      dialogModel.buttons = [{\n        buttonModel: {\n          content: this.l10n.getConstant('deleteButton'),\n          cssClass: cls.DELETE_EVENT_CLASS,\n          disabled: !this.parent.eventSettings.allowDeleting || this.parent.readonly\n        },\n        click: this.eventDelete.bind(this)\n      }, {\n        buttonModel: {\n          content: this.l10n.getConstant('saveButton'),\n          cssClass: 'e-primary ' + cls.EVENT_WINDOW_SAVE_BUTTON_CLASS,\n          isPrimary: true,\n          disabled: !this.parent.eventSettings.allowAdding || this.parent.readonly\n        },\n        click: this.eventSave.bind(this)\n      }, {\n        buttonModel: {\n          cssClass: cls.EVENT_WINDOW_CANCEL_BUTTON_CLASS,\n          content: this.l10n.getConstant('cancelButton')\n        },\n        click: this.dialogClose.bind(this)\n      }];\n      dialogModel.header = '<div class=\"e-title-text\">' + this.l10n.getConstant('newEvent') + '</div>';\n    }\n\n    this.dialogObject = new Dialog(dialogModel, this.element);\n\n    if (this.dialogObject.element.querySelector('.e-dlg-closeicon-btn')) {\n      this.dialogObject.element.querySelector('.e-dlg-closeicon-btn').setAttribute('title', this.l10n.getConstant('close'));\n    }\n\n    addClass([this.element.parentElement], cls.EVENT_WINDOW_DIALOG_CLASS + '-container');\n\n    if (this.parent.isAdaptive) {\n      EventHandler.add(this.element.querySelector('.' + cls.EVENT_WINDOW_BACK_ICON_CLASS), 'click', this.dialogClose, this);\n      EventHandler.add(this.element.querySelector('.' + cls.EVENT_WINDOW_SAVE_ICON_CLASS), 'click', this.eventSave, this);\n    }\n\n    EventHandler.add(this.dialogObject.element, 'keydown', this.preventEventSave, this);\n    this.applyFormValidation();\n  };\n\n  EventWindow.prototype.refresh = function () {\n    this.destroy(true);\n    this.renderEventWindow();\n  };\n\n  EventWindow.prototype.refreshRecurrenceEditor = function () {\n    if (this.recurrenceEditor) {\n      var recurrenceEditor = this.recurrenceEditor.element;\n      this.recurrenceEditor.destroy();\n      this.createRecurrenceEditor(recurrenceEditor);\n    }\n  };\n\n  EventWindow.prototype.setRecurrenceEditor = function (recurrenceEditor) {\n    if (this.parent.editorTemplate) {\n      this.recurrenceEditor = recurrenceEditor;\n    }\n  };\n\n  EventWindow.prototype.openEditor = function (data, type, isEventData, repeatType) {\n    this.parent.currentAction = type;\n    this.parent.removeNewEventElement();\n\n    if (this.parent.quickPopup) {\n      this.parent.quickPopup.quickPopupHide(true);\n    }\n\n    this.parent.inlineModule.removeInlineAppointmentElement();\n\n    if (type === 'Add') {\n      var eventObj = {};\n      this.cellClickAction = !isEventData;\n      this.parent.activeCellsData = data;\n      var event_1 = data;\n\n      if (this.cellClickAction) {\n        this.convertToEventData(event_1, eventObj);\n      } else {\n        this.parent.activeCellsData = {\n          startTime: event_1.startTime || event_1[this.fields.startTime],\n          endTime: event_1.endTime || event_1[this.fields.endTime],\n          isAllDay: event_1.isAllDay || event_1[this.fields.isAllDay],\n          element: event_1.element,\n          groupIndex: event_1.groupIndex\n        };\n        eventObj = event_1;\n      }\n\n      data = eventObj;\n    }\n\n    if (!isNullOrUndefined(this.parent.editorTemplate)) {\n      this.renderFormElements(this.element.querySelector('.e-schedule-form'), data);\n    }\n\n    if (!this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n      removeClass([this.dialogObject.element.querySelector('.e-recurrenceeditor')], cls.DISABLE_CLASS);\n    }\n\n    if (this.recurrenceEditor) {\n      this.recurrenceEditor.firstDayOfWeek = this.parent.activeViewOptions.firstDayOfWeek;\n    }\n\n    switch (type) {\n      case 'Add':\n        this.onCellDetailsUpdate(data, repeatType);\n        break;\n\n      case 'Save':\n      case 'EditOccurrence':\n      case 'EditSeries':\n      case 'EditFollowingEvents':\n        if (type === 'EditOccurrence' && !this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n          addClass([this.dialogObject.element.querySelector('.e-recurrenceeditor')], cls.DISABLE_CLASS);\n        }\n\n        this.cellClickAction = false;\n        this.onEventDetailsUpdate(data);\n        break;\n    }\n  };\n\n  EventWindow.prototype.setDialogContent = function () {\n    this.dialogObject.content = this.getEventWindowContent();\n    this.dialogObject.dataBind();\n  };\n\n  EventWindow.prototype.preventEventSave = function (e) {\n    if (this.parent && !this.parent.allowKeyboardInteraction && e.code === 'Enter') {\n      this.isEnterKey = true;\n    }\n  };\n\n  EventWindow.prototype.onBeforeOpen = function (args) {\n    var _this = this;\n\n    var eventProp = {\n      type: 'Editor',\n      data: this.eventData,\n      cancel: false,\n      element: this.element,\n      target: this.cellClickAction ? this.parent.activeCellsData.element : this.parent.activeEventData.element\n    };\n\n    if (this.cellClickAction) {\n      eventProp.duration = this.getSlotDuration();\n    }\n\n    var saveObj = this.getInstance(cls.EVENT_WINDOW_SAVE_BUTTON_CLASS);\n\n    if (saveObj) {\n      saveObj.disabled = !(this.cellClickAction ? this.parent.eventSettings.allowAdding : this.parent.eventSettings.allowEditing);\n      saveObj.dataBind();\n    }\n\n    var deleteObj = this.getInstance(cls.DELETE_EVENT_CLASS);\n\n    if (deleteObj) {\n      deleteObj.disabled = !this.parent.eventSettings.allowDeleting;\n      deleteObj.dataBind();\n    }\n\n    var callBackPromise = new Deferred();\n    this.parent.trigger(event.popupOpen, eventProp, function (popupArgs) {\n      args.cancel = popupArgs.cancel;\n      _this.duration = _this.cellClickAction ? popupArgs.duration : null;\n\n      _this.refreshDateTimePicker(_this.duration);\n\n      if (_this.cellClickAction && popupArgs.duration !== _this.getSlotDuration() && isNullOrUndefined(_this.parent.editorTemplate)) {\n        var startObj = _this.getInstance(cls.EVENT_WINDOW_START_CLASS);\n\n        var endObj = _this.getInstance(cls.EVENT_WINDOW_END_CLASS);\n\n        endObj.value = new Date(startObj.value.getTime() + util.MS_PER_MINUTE * popupArgs.duration);\n        endObj.dataBind();\n      }\n\n      if (_this.parent.editorTemplate && _this.element.querySelector('.e-recurrenceeditor') && !_this.recurrenceEditor) {\n        _this.recurrenceEditor = _this.getInstance('e-recurrenceeditor');\n      }\n\n      callBackPromise.resolve(args);\n    });\n    return callBackPromise;\n  };\n\n  EventWindow.prototype.onBeforeClose = function (args) {\n    var _this = this;\n\n    if (args.isInteracted) {\n      this.isCrudAction = false;\n    }\n\n    var eventProp = {\n      type: 'Editor',\n      event: args.event || this.dialogEvent,\n      data: this.eventCrudData,\n      cancel: false,\n      element: this.element,\n      target: this.cellClickAction ? this.parent.activeCellsData.element : this.parent.activeEventData.element\n    };\n    var callBackPromise = new Deferred();\n    this.parent.trigger(event.popupClose, eventProp, function (popupArgs) {\n      args.cancel = popupArgs.cancel;\n\n      if (!popupArgs.cancel) {\n        if (_this.isCrudAction) {\n          args.cancel = _this.processCrudActions(popupArgs.data);\n          _this.isCrudAction = args.cancel;\n        }\n\n        if (!_this.isCrudAction) {\n          _this.resetForm();\n\n          _this.parent.eventBase.focusElement(true);\n\n          _this.eventCrudData = null;\n        }\n      }\n\n      callBackPromise.resolve(args);\n    });\n    return callBackPromise;\n  };\n\n  EventWindow.prototype.getEventWindowContent = function () {\n    var container = createElement('div', {\n      className: cls.FORM_CONTAINER_CLASS\n    });\n    var form = createElement('form', {\n      id: this.parent.element.id + 'EditForm',\n      className: cls.FORM_CLASS,\n      attrs: {\n        onsubmit: 'return false;'\n      }\n    });\n    this.renderFormElements(form);\n    container.appendChild(form);\n    return container;\n  };\n\n  EventWindow.prototype.renderFormElements = function (form, args) {\n    if (!isNullOrUndefined(this.parent.editorTemplate)) {\n      if (args) {\n        if (this.recurrenceEditor) {\n          this.recurrenceEditor.destroy();\n          this.recurrenceEditor = null;\n        }\n\n        this.destroyComponents();\n        var formElements = [].slice.call(form.children);\n\n        for (var _i = 0, formElements_1 = formElements; _i < formElements_1.length; _i++) {\n          var element = formElements_1[_i];\n          remove(element);\n        }\n      }\n\n      var templateId = this.parent.element.id + '_editorTemplate';\n      var tempEle = [].slice.call(this.parent.getEditorTemplate()(args || {}, this.parent, 'editorTemplate', templateId, false));\n      append(tempEle, form);\n      this.parent.renderTemplates();\n    } else {\n      form.appendChild(this.getDefaultEventWindowContent());\n    }\n  };\n\n  EventWindow.prototype.getDefaultEventWindowContent = function () {\n    var parentDiv = this.createDivElement(cls.EVENT_WINDOW_DIALOG_PARENT_CLASS);\n    var titleLocationDiv = this.createDivElement(cls.EVENT_WINDOW_TITLE_LOCATION_DIV_CLASS);\n    parentDiv.appendChild(titleLocationDiv);\n    titleLocationDiv.appendChild(this.renderTextBox(cls.SUBJECT_CLASS));\n    titleLocationDiv.querySelector('.' + cls.SUBJECT_CLASS).setAttribute('title', this.parent.editorTitles.subject);\n    titleLocationDiv.appendChild(this.renderTextBox(cls.LOCATION_CLASS));\n    titleLocationDiv.querySelector('.' + cls.LOCATION_CLASS).setAttribute('title', this.parent.editorTitles.location);\n    var startEndDateTimeDiv = this.createDivElement(cls.EVENT_WINDOW_START_END_DIV_CLASS);\n    parentDiv.appendChild(startEndDateTimeDiv);\n    startEndDateTimeDiv.appendChild(this.renderDateTimePicker(cls.EVENT_WINDOW_START_CLASS, this.onTimeChange.bind(this)));\n    startEndDateTimeDiv.querySelector('.' + cls.EVENT_WINDOW_START_CLASS).setAttribute('title', this.parent.editorTitles.startTime);\n    startEndDateTimeDiv.appendChild(this.renderDateTimePicker(cls.EVENT_WINDOW_END_CLASS));\n    startEndDateTimeDiv.querySelector('.' + cls.EVENT_WINDOW_END_CLASS).setAttribute('title', this.parent.editorTitles.endTime);\n    var allDayTimezoneDiv = this.createDivElement(cls.EVENT_WINDOW_ALLDAY_TZ_DIV_CLASS);\n    parentDiv.appendChild(allDayTimezoneDiv);\n    allDayTimezoneDiv.appendChild(this.renderCheckBox(cls.EVENT_WINDOW_ALL_DAY_CLASS));\n    allDayTimezoneDiv.appendChild(this.renderCheckBox(cls.TIME_ZONE_CLASS));\n    var timezoneParentDiv = this.createDivElement(cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS);\n    parentDiv.appendChild(timezoneParentDiv);\n    timezoneParentDiv.appendChild(this.renderDropDown(cls.EVENT_WINDOW_START_TZ_CLASS));\n    timezoneParentDiv.appendChild(this.renderDropDown(cls.EVENT_WINDOW_END_TZ_CLASS));\n    var repeatParentDiv = this.createDivElement(cls.EVENT_WINDOW_REPEAT_DIV_CLASS);\n    parentDiv.appendChild(repeatParentDiv);\n    var repeatDiv = this.renderCheckBox(cls.EVENT_WINDOW_REPEAT_CLASS);\n    var repeatEditContainer = createElement('span', {\n      className: REPEAT_CONTAINER_CLASS\n    });\n    var button = createElement('button', {\n      className: REPEAT_BUTTON_CLASS,\n      attrs: {\n        type: 'button',\n        'title': this.l10n.getConstant('editRecurrence')\n      }\n    });\n    this.buttonObj = new Button({\n      iconCss: REPEAT_BUTTON_ICON_CLASS + ' e-icons',\n      cssClass: 'e-medium ' + this.parent.cssClass\n    });\n    repeatEditContainer.appendChild(button);\n    this.buttonObj.appendTo(button);\n    repeatDiv.appendChild(repeatEditContainer);\n    repeatParentDiv.appendChild(repeatDiv);\n\n    if (this.parent.isAdaptive) {\n      EventHandler.add(button, 'click', this.loadRecurrenceEditor, this);\n    } else {\n      this.createRecurrenceEditor(parentDiv);\n    }\n\n    if (this.parent.resourceCollection.length > 0) {\n      var resourceParentDiv = this.createDivElement(cls.EVENT_WINDOW_RESOURCES_DIV_CLASS);\n\n      for (var _i = 0, _a = this.parent.resourceBase.resourceCollection; _i < _a.length; _i++) {\n        var resource = _a[_i];\n        resourceParentDiv.appendChild(this.renderResourceDetails(resource));\n      }\n\n      parentDiv.appendChild(resourceParentDiv);\n    }\n\n    var description = this.createDivElement(cls.DESCRIPTION_CLASS + '-row');\n    description.appendChild(this.renderTextBox(cls.DESCRIPTION_CLASS));\n    description.querySelector('.' + cls.DESCRIPTION_CLASS).setAttribute('title', this.parent.editorTitles.description);\n    parentDiv.appendChild(description);\n    var submit = createElement('button', {\n      attrs: {\n        type: 'hidden',\n        title: 'submit',\n        style: 'display:none'\n      }\n    });\n    parentDiv.appendChild(submit);\n    return parentDiv;\n  };\n\n  EventWindow.prototype.createRecurrenceEditor = function (parentDiv) {\n    var recurrenceEditor = this.createDivElement();\n    parentDiv.appendChild(recurrenceEditor);\n    this.recurrenceEditor = this.renderRecurrenceEditor();\n    this.recurrenceEditor.appendTo(recurrenceEditor);\n    this.updateMinMaxDateToEditor();\n  };\n\n  EventWindow.prototype.createDivElement = function (className) {\n    return createElement('div', {\n      className: className\n    });\n  };\n\n  EventWindow.prototype.createInputElement = function (className, fieldName, type) {\n    return createElement(type || 'input', {\n      className: className,\n      attrs: {\n        type: 'text',\n        name: fieldName,\n        value: '',\n        id: fieldName,\n        title: this.l10n.getConstant(fieldName.charAt(0).toLowerCase() + fieldName.slice(1)) === '' ? fieldName : this.l10n.getConstant(fieldName.charAt(0).toLowerCase() + fieldName.slice(1))\n      }\n    });\n  };\n\n  EventWindow.prototype.getSlotDuration = function () {\n    return this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\n  };\n\n  EventWindow.prototype.renderDateTimePicker = function (value, changeEvent) {\n    var dateTimeDiv = this.createDivElement(value + '-container');\n    var fieldName = this.getFieldName(value);\n    var dateTimeInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName);\n    dateTimeDiv.appendChild(dateTimeInput);\n    var dateTimePicker = new DateTimePicker({\n      change: changeEvent,\n      firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,\n      calendarMode: this.parent.calendarMode,\n      min: this.parent.minDate,\n      max: new Date(new Date(+this.parent.maxDate).setHours(23, 59, 59)),\n      cssClass: this.parent.cssClass,\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale,\n      floatLabelType: 'Always',\n      timeFormat: this.parent.activeViewOptions.timeFormat,\n      format: (isNullOrUndefined(this.parent.dateFormat) ? this.getFormat('dateFormats') : this.parent.dateFormat) + ' ' + this.parent.activeViewOptions.timeFormat,\n      placeholder: this.getFieldLabel(value),\n      step: this.getSlotDuration(),\n      width: '100%'\n    });\n    dateTimePicker.appendTo(dateTimeInput);\n    return dateTimeDiv;\n  };\n\n  EventWindow.prototype.refreshDateTimePicker = function (duration) {\n    var elementSelector = '.' + cls.EVENT_WINDOW_START_CLASS + ',.' + cls.EVENT_WINDOW_END_CLASS;\n    var startEndElement = [].slice.call(this.element.querySelectorAll(elementSelector));\n\n    for (var _i = 0, startEndElement_1 = startEndElement; _i < startEndElement_1.length; _i++) {\n      var element = startEndElement_1[_i];\n      var instance = element.ej2_instances[0];\n      instance.firstDayOfWeek = this.parent.activeViewOptions.firstDayOfWeek;\n      instance.timeFormat = this.parent.activeViewOptions.timeFormat;\n      instance.step = duration || this.getSlotDuration();\n      instance.dataBind();\n    }\n  };\n\n  EventWindow.prototype.onTimeChange = function () {\n    var startObj = this.getInstance(cls.EVENT_WINDOW_START_CLASS);\n\n    if (startObj.element.parentElement.classList.contains('e-input-focus')) {\n      var endObj = this.getInstance(cls.EVENT_WINDOW_END_CLASS);\n      var duration = 0;\n\n      if (this.cellClickAction) {\n        duration = util.MS_PER_MINUTE * this.duration;\n        this.eventWindowTime.startTime = startObj.value;\n      } else {\n        duration = this.eventData[this.fields.endTime].getTime() - this.eventData[this.fields.startTime].getTime();\n      }\n\n      var endDate = isNullOrUndefined(startObj.value) ? null : new Date(startObj.value.getTime() + duration);\n\n      if (this.cellClickAction) {\n        this.eventWindowTime.endTime = endDate;\n      }\n\n      endObj.value = endDate;\n      endObj.dataBind();\n    }\n\n    if (this.recurrenceEditor) {\n      this.recurrenceEditor.updateRuleUntilDate(this.eventWindowTime.startTime);\n    }\n  };\n\n  EventWindow.prototype.renderResourceDetails = function (resourceData) {\n    var fieldName = resourceData.field;\n    var value = 'e-' + fieldName;\n    var labelValue = resourceData.title;\n    var resourceDiv = this.createDivElement(value + '-container' + ' ' + 'e-resources');\n    var resourceInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName);\n    resourceDiv.appendChild(resourceInput);\n    var resourceTemplate = '<div class=\"e-resource-template\"><div class=\"e-resource-color\" style=\"background-color:${' + resourceData.colorField + '}\"></div><div class=\"e-resource-text\">${' + resourceData.textField + '}</div></div>';\n\n    if (resourceData.allowMultiple) {\n      var listObj = new MultiSelect({\n        cssClass: this.parent.cssClass || '',\n        dataSource: resourceData.dataSource,\n        change: this.onMultiselectResourceChange.bind(this),\n        itemTemplate: resourceTemplate,\n        fields: {\n          text: resourceData.textField,\n          value: resourceData.idField\n        },\n        htmlAttributes: {\n          'title': labelValue,\n          'name': fieldName\n        },\n        floatLabelType: 'Always',\n        placeholder: labelValue,\n        popupHeight: '230px',\n        popupWidth: '447px',\n        mode: 'Box'\n      });\n      listObj.appendTo(resourceInput);\n    } else {\n      var dropDownList = new DropDownList({\n        cssClass: this.parent.cssClass || '',\n        change: this.onDropdownResourceChange.bind(this),\n        dataSource: resourceData.dataSource,\n        enableRtl: this.parent.enableRtl,\n        fields: {\n          text: resourceData.textField,\n          value: resourceData.idField\n        },\n        htmlAttributes: {\n          'title': labelValue,\n          'name': fieldName\n        },\n        floatLabelType: 'Always',\n        placeholder: labelValue,\n        popupHeight: '230px',\n        popupWidth: '447px',\n        itemTemplate: resourceTemplate\n      });\n      dropDownList.appendTo(resourceInput);\n    }\n\n    return resourceDiv;\n  };\n\n  EventWindow.prototype.renderDropDown = function (value) {\n    var _this = this;\n\n    var fieldName = this.getFieldName(value);\n    var timezoneDiv = this.createDivElement(value + '-container');\n    var timezoneInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName);\n    timezoneDiv.appendChild(timezoneInput);\n    var dropDownList = new DropDownList({\n      allowFiltering: true,\n      change: this.onTimezoneChange.bind(this),\n      cssClass: this.parent.cssClass || '',\n      dataSource: this.parent.timezoneDataSource,\n      enableRtl: this.parent.enableRtl,\n      fields: {\n        text: 'Text',\n        value: 'Value'\n      },\n      filterBarPlaceholder: this.parent.localeObj.getConstant('searchTimezone'),\n      noRecordsTemplate: this.parent.localeObj.getConstant('noRecords'),\n      filtering: function (e) {\n        var query = new Query();\n        query = e.text !== '' ? query.where('Text', 'contains', e.text, true) : query;\n        e.updateData(_this.parent.timezoneDataSource, query);\n      },\n      htmlAttributes: {\n        'title': this.getFieldLabel(value),\n        'name': fieldName\n      },\n      floatLabelType: 'Always',\n      placeholder: this.getFieldLabel(value),\n      popupHeight: '230px'\n    });\n    dropDownList.appendTo(timezoneInput);\n    return timezoneDiv;\n  };\n\n  EventWindow.prototype.onMultiselectResourceChange = function (args) {\n    if (!args.value || !this.parent.activeViewOptions.group.byGroupID || this.parent.resourceCollection.length <= 1) {\n      return;\n    }\n\n    var resourceCollection = this.parent.resourceBase.resourceCollection;\n    var fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\n\n    for (var i = 0; i < resourceCollection.length; i++) {\n      if (resourceCollection[i].field === fieldName && i < resourceCollection.length - 1) {\n        var resObject = this.createInstance(i);\n        var datasource = [];\n\n        var _loop_1 = function (j) {\n          var resourceModel = resourceCollection[i + 1]; // eslint-disable-next-line max-len\n\n          var filter = resourceModel.dataSource.filter(function (data) {\n            return data[resourceModel.groupIDField] === args.value[j];\n          })[0];\n          var groupId = filter[resourceCollection[i + 1].groupIDField];\n          var filterRes = this_1.filterDatasource(i, groupId);\n          datasource = datasource.concat(filterRes);\n        };\n\n        var this_1 = this;\n\n        for (var j = 0; j < args.value.length; j++) {\n          _loop_1(j);\n        }\n\n        resObject.dataSource = datasource;\n        resObject.dataBind();\n      }\n    }\n  };\n\n  EventWindow.prototype.createInstance = function (index) {\n    var resourceData = this.parent.resourceBase.resourceCollection[index + 1];\n    var resObject = this.element.querySelector('.e-' + resourceData.field).ej2_instances[0];\n    return resObject;\n  };\n\n  EventWindow.prototype.onDropdownResourceChange = function (args) {\n    if (!args.value || this.parent.resourceCollection.length <= 1 || !this.parent.activeViewOptions.group.byGroupID) {\n      return;\n    }\n\n    var fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\n    var resourceCollection = this.parent.resourceBase.resourceCollection;\n\n    for (var i = 0; i < resourceCollection.length; i++) {\n      if (i < resourceCollection.length - 1 && resourceCollection[i].field === fieldName) {\n        var resObj = this.createInstance(i);\n        var groupId = args.itemData[resourceCollection[i].idField];\n        resObj.dataSource = this.filterDatasource(i, groupId);\n        resObj.dataBind();\n        var resValue = resObj.dataSource[0][resourceCollection[i + 1].idField];\n        resObj.value = resourceCollection[i + 1].allowMultiple ? [resValue] : resValue;\n        resObj.dataBind();\n      }\n    }\n  };\n\n  EventWindow.prototype.filterDatasource = function (index, groupId) {\n    var resourceData = this.parent.resourceBase.resourceCollection[index + 1];\n    return resourceData.dataSource.filter(function (data) {\n      return data[resourceData.groupIDField] === groupId;\n    });\n  };\n\n  EventWindow.prototype.onTimezoneChange = function (args) {\n    var fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\n\n    if (fieldName === this.parent.eventFields.startTimezone) {\n      var startTimezoneObj = this.getInstance(cls.EVENT_WINDOW_START_TZ_CLASS);\n      var endTimezoneObj = this.getInstance(cls.EVENT_WINDOW_END_TZ_CLASS);\n      endTimezoneObj.value = startTimezoneObj.value;\n      endTimezoneObj.dataBind();\n    }\n  };\n\n  EventWindow.prototype.renderCheckBox = function (value) {\n    var checkBoxDiv = this.createDivElement(value + '-container');\n    var fieldName = this.getFieldName(value);\n    var checkBoxInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName);\n    checkBoxDiv.appendChild(checkBoxInput);\n    var checkBox = new CheckBox({\n      change: this.onChange.bind(this),\n      cssClass: value + ' ' + this.parent.cssClass,\n      enableRtl: this.parent.enableRtl,\n      label: this.getFieldLabel(value)\n    });\n    checkBox.appendTo(checkBoxInput);\n    checkBoxInput.setAttribute('name', fieldName);\n\n    if (fieldName === 'Repeat') {\n      this.repeatStatus = checkBox;\n    }\n\n    return checkBoxDiv;\n  };\n\n  EventWindow.prototype.renderTextBox = function (value) {\n    var textBoxDiv = this.createDivElement(value + '-container');\n    var fieldName = this.getFieldName(value);\n    var elementType = value === cls.DESCRIPTION_CLASS ? 'textarea' : 'input';\n    var textBoxInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName, elementType);\n    textBoxDiv.appendChild(textBoxInput);\n    Input.createInput({\n      element: textBoxInput,\n      floatLabelType: 'Always',\n      properties: {\n        enableRtl: this.parent.enableRtl,\n        placeholder: this.getFieldLabel(value)\n      }\n    });\n    return textBoxDiv;\n  };\n\n  EventWindow.prototype.getFieldName = function (name) {\n    var fieldName = '';\n\n    switch (name) {\n      case cls.SUBJECT_CLASS:\n        fieldName = this.fields.subject;\n        break;\n\n      case cls.LOCATION_CLASS:\n        fieldName = this.fields.location;\n        break;\n\n      case cls.EVENT_WINDOW_START_CLASS:\n        fieldName = this.fields.startTime;\n        break;\n\n      case cls.EVENT_WINDOW_END_CLASS:\n        fieldName = this.fields.endTime;\n        break;\n\n      case cls.DESCRIPTION_CLASS:\n        fieldName = this.fields.description;\n        break;\n\n      case cls.EVENT_WINDOW_ALL_DAY_CLASS:\n        fieldName = this.fields.isAllDay;\n        break;\n\n      case cls.EVENT_WINDOW_START_TZ_CLASS:\n        fieldName = this.fields.startTimezone;\n        break;\n\n      case cls.EVENT_WINDOW_END_TZ_CLASS:\n        fieldName = this.fields.endTimezone;\n        break;\n\n      case cls.TIME_ZONE_CLASS:\n        fieldName = 'Timezone';\n        break;\n\n      case cls.EVENT_WINDOW_REPEAT_CLASS:\n        fieldName = 'Repeat';\n        break;\n    }\n\n    return fieldName;\n  };\n\n  EventWindow.prototype.getFieldLabel = function (fieldName) {\n    var labelText = '';\n\n    switch (fieldName) {\n      case cls.SUBJECT_CLASS:\n        labelText = this.parent.editorTitles.subject;\n        break;\n\n      case cls.LOCATION_CLASS:\n        labelText = this.parent.editorTitles.location;\n        break;\n\n      case cls.DESCRIPTION_CLASS:\n        labelText = this.parent.editorTitles.description;\n        break;\n\n      case cls.EVENT_WINDOW_START_CLASS:\n        labelText = this.parent.editorTitles.startTime;\n        break;\n\n      case cls.EVENT_WINDOW_END_CLASS:\n        labelText = this.parent.editorTitles.endTime;\n        break;\n\n      case cls.EVENT_WINDOW_START_TZ_CLASS:\n        labelText = this.parent.editorTitles.startTimezone;\n        break;\n\n      case cls.EVENT_WINDOW_END_TZ_CLASS:\n        labelText = this.parent.editorTitles.endTimezone;\n        break;\n\n      case cls.EVENT_WINDOW_REPEAT_CLASS:\n        labelText = this.parent.editorTitles.recurrenceRule;\n        break;\n\n      case cls.EVENT_WINDOW_ALL_DAY_CLASS:\n        labelText = this.parent.editorTitles.isAllDay;\n        break;\n\n      case cls.TIME_ZONE_CLASS:\n        labelText = this.l10n.getConstant('timezone');\n        break;\n    }\n\n    return labelText;\n  };\n\n  EventWindow.prototype.onChange = function (args) {\n    var target = args.event.currentTarget.querySelector('input');\n\n    if (target.classList.contains(cls.EVENT_WINDOW_ALL_DAY_CLASS)) {\n      this.onAllDayChange(args.checked);\n    } else if (target.classList.contains(cls.TIME_ZONE_CLASS)) {\n      this.timezoneChangeStyle(args.checked);\n    } else if (target.classList.contains(cls.EVENT_WINDOW_REPEAT_CLASS)) {\n      this.onRepeatChange(args.checked);\n    }\n  };\n\n  EventWindow.prototype.renderRepeatDialog = function () {\n    var element = createElement('div');\n    this.repeatDialogObject = new Dialog({\n      header: this.l10n.getConstant('recurrence'),\n      visible: false,\n      content: '<div class=\"e-rec-editor\"></div>',\n      closeOnEscape: true,\n      width: '90%',\n      buttons: [{\n        click: this.repeatSaveDialog.bind(this),\n        buttonModel: {\n          content: this.l10n.getConstant('save'),\n          cssClass: 'e-save',\n          isPrimary: true\n        }\n      }, {\n        click: this.repeatCancelDialog.bind(this),\n        buttonModel: {\n          cssClass: 'e-cancel',\n          content: this.l10n.getConstant('cancel')\n        }\n      }],\n      target: this.element,\n      animationSettings: {\n        effect: 'Zoom'\n      },\n      enableRtl: this.parent.enableRtl,\n      isModal: true,\n      cssClass: REPEAT_DIALOG_CLASS,\n      open: this.repeatOpenDialog.bind(this)\n    });\n    this.element.appendChild(element);\n    this.repeatDialogObject.appendTo(element);\n    this.createRecurrenceEditor(this.repeatDialogObject.element.querySelector('.e-rec-editor'));\n  };\n\n  EventWindow.prototype.loadRecurrenceEditor = function () {\n    this.repeatDialogObject.show();\n\n    if (this.recurrenceEditor && this.repeatRule) {\n      this.recurrenceEditor.setRecurrenceRule(this.repeatRule);\n    }\n  };\n\n  EventWindow.prototype.onRepeatChange = function (state) {\n    if (state) {\n      if (!this.repeatDialogObject) {\n        this.renderRepeatDialog();\n      }\n\n      this.recurrenceEditor.setProperties({\n        startDate: this.repeatStartDate,\n        selectedType: 0\n      });\n      this.loadRecurrenceEditor();\n    } else {\n      if (this.repeatDialogObject) {\n        this.repeatDialogObject.hide();\n      }\n\n      this.repeatRule = '';\n\n      if (this.recurrenceEditor) {\n        this.recurrenceEditor.setRecurrenceRule(this.repeatRule);\n        this.updateRepeatLabel(this.repeatRule);\n      }\n\n      var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n      addClass([element], HIDE_STYLE_CLASS);\n    }\n  };\n\n  EventWindow.prototype.repeatSaveDialog = function () {\n    this.repeatRule = this.recurrenceEditor.getRecurrenceRule();\n    var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n\n    if (this.recurrenceEditor.getRecurrenceRule()) {\n      removeClass([element], HIDE_STYLE_CLASS);\n    } else {\n      addClass([element], HIDE_STYLE_CLASS);\n      this.repeatStatus.setProperties({\n        checked: false\n      });\n    }\n\n    this.updateRepeatLabel(this.repeatRule);\n    this.closeRepeatDialog();\n  };\n\n  EventWindow.prototype.closeRepeatDialog = function () {\n    this.repeatDialogObject.hide();\n  };\n\n  EventWindow.prototype.repeatCancelDialog = function () {\n    this.closeRepeatDialog();\n\n    if (this.recurrenceEditor) {\n      this.recurrenceEditor.setRecurrenceRule(this.repeatTempRule);\n    }\n\n    if (!this.repeatTempRule) {\n      this.repeatStatus.setProperties({\n        checked: false\n      });\n    }\n  };\n\n  EventWindow.prototype.repeatOpenDialog = function () {\n    this.repeatTempRule = this.recurrenceEditor.getRecurrenceRule();\n  };\n\n  EventWindow.prototype.onCellDetailsUpdate = function (eventObj, repeatType) {\n    if (!this.parent.eventSettings.allowAdding) {\n      return;\n    }\n\n    this.element.querySelector('.' + cls.FORM_CLASS).removeAttribute('data-id');\n    this.element.querySelector('.' + cls.EVENT_WINDOW_TITLE_TEXT_CLASS).innerHTML = this.l10n.getConstant('newEvent');\n    eventObj.Timezone = false;\n    this.repeatStartDate = eventObj[this.fields.startTime];\n    this.repeatRule = '';\n\n    if (!isNullOrUndefined(this.parent.eventSettings.fields.subject.default)) {\n      eventObj[this.fields.subject] = this.parent.eventSettings.fields.subject.default;\n    }\n\n    if (!isNullOrUndefined(this.parent.eventSettings.fields.location.default)) {\n      eventObj[this.fields.location] = this.parent.eventSettings.fields.location.default;\n    }\n\n    if (!isNullOrUndefined(this.parent.eventSettings.fields.description.default)) {\n      eventObj[this.fields.description] = this.parent.eventSettings.fields.description.default;\n    }\n\n    this.showDetails(eventObj);\n\n    if (eventObj[this.fields.recurrenceRule] && this.recurrenceEditor) {\n      this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);\n      this.repeatRule = eventObj[this.fields.recurrenceRule];\n    }\n\n    var deleteButton = this.element.querySelector('.' + cls.DELETE_EVENT_CLASS);\n\n    if (deleteButton) {\n      addClass([deleteButton], cls.DISABLE_CLASS);\n    }\n\n    if (this.recurrenceEditor) {\n      this.recurrenceEditor.setProperties({\n        startDate: eventObj[this.fields.startTime],\n        selectedType: !isNullOrUndefined(repeatType) ? repeatType : !isNullOrUndefined(eventObj[this.fields.recurrenceRule]) ? this.recurrenceEditor.selectedType : 0\n      });\n    }\n\n    if (this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n      var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n      addClass([element], HIDE_STYLE_CLASS);\n      this.updateRepeatLabel(this.repeatRule);\n    } else {\n      var saveButton = this.element.querySelector('.' + cls.EVENT_WINDOW_SAVE_BUTTON_CLASS);\n      this.disableButton(saveButton, false);\n    }\n\n    this.dialogObject.show();\n  };\n\n  EventWindow.prototype.convertToEventData = function (cellsData, eventObj) {\n    if (cellsData.subject) {\n      eventObj[this.fields.subject] = cellsData.subject;\n    }\n\n    eventObj[this.fields.startTime] = cellsData.startTime;\n    eventObj[this.fields.endTime] = cellsData.endTime;\n    eventObj[this.fields.isAllDay] = cellsData.isAllDay;\n\n    if (cellsData.RecurrenceRule) {\n      eventObj[this.fields.recurrenceRule] = cellsData.RecurrenceRule;\n    }\n\n    if (this.parent.resourceCollection.length > 0 || this.parent.activeViewOptions.group.resources.length > 0) {\n      this.parent.resourceBase.setResourceValues(eventObj);\n    }\n  };\n\n  EventWindow.prototype.applyFormValidation = function () {\n    var getValidationRule = function (rules) {\n      return rules && Object.keys(rules).length > 0 ? rules : undefined;\n    };\n\n    var form = this.element.querySelector('.' + cls.FORM_CLASS);\n    var rules = {};\n    rules[this.parent.eventSettings.fields.subject.name] = getValidationRule(this.parent.eventSettings.fields.subject.validation);\n    rules[this.parent.eventSettings.fields.location.name] = getValidationRule(this.parent.eventSettings.fields.location.validation);\n    rules[this.parent.eventSettings.fields.startTime.name] = getValidationRule(this.parent.eventSettings.fields.startTime.validation);\n    rules[this.parent.eventSettings.fields.endTime.name] = getValidationRule(this.parent.eventSettings.fields.endTime.validation);\n    rules[this.parent.eventSettings.fields.description.name] = getValidationRule(this.parent.eventSettings.fields.description.validation);\n    this.fieldValidator = new FieldValidator();\n    this.fieldValidator.renderFormValidator(form, rules, this.element, this.parent.locale);\n  };\n\n  EventWindow.prototype.showDetails = function (eventData) {\n    var eventObj = extend({}, eventData, null, true);\n\n    if (eventObj[this.fields.endTime].getHours() === 0 && eventObj[this.fields.endTime].getMinutes() === 0) {\n      this.trimAllDay(eventObj);\n    }\n\n    this.eventData = eventObj;\n    var formElements = this.getFormElements(cls.EVENT_WINDOW_DIALOG_CLASS);\n    var keyNames = Object.keys(eventObj);\n\n    for (var _i = 0, formElements_2 = formElements; _i < formElements_2.length; _i++) {\n      var curElement = formElements_2[_i];\n      var columnName = curElement.name || this.getColumnName(curElement);\n\n      if (!isNullOrUndefined(columnName) && columnName !== '') {\n        if (keyNames.indexOf(columnName) !== -1) {\n          this.setValueToElement(curElement, eventObj[columnName]);\n        } else {\n          this.setDefaultValueToElement(curElement);\n        }\n      }\n    }\n\n    if (isNullOrUndefined(this.parent.editorTemplate)) {\n      this.onAllDayChange(eventObj[this.fields.isAllDay]);\n      var timezoneObj = this.getInstance(cls.TIME_ZONE_CLASS + '.' + EVENT_FIELD);\n\n      if (!(isNullOrUndefined(eventObj[this.fields.startTimezone]) && isNullOrUndefined(eventObj[this.fields.endTimezone]))) {\n        timezoneObj.checked = true;\n        timezoneObj.dataBind();\n      }\n\n      this.timezoneChangeStyle(timezoneObj.checked);\n      delete eventObj.Timezone;\n    }\n  };\n\n  EventWindow.prototype.getColumnName = function (element) {\n    var attrName = element.getAttribute('data-name') || '';\n\n    if (attrName === '') {\n      var isDropDowns = false;\n      var fieldSelector = '';\n\n      if (element.classList.contains('e-dropdownlist')) {\n        fieldSelector = 'e-ddl';\n        isDropDowns = true;\n      } else if (element.classList.contains('e-multiselect')) {\n        fieldSelector = 'e-multiselect';\n        isDropDowns = true;\n      } else if (element.classList.contains('e-datetimepicker')) {\n        fieldSelector = 'e-datetimepicker';\n      } else if (element.classList.contains('e-datepicker')) {\n        fieldSelector = 'e-datepicker';\n      } else if (element.classList.contains('e-checkbox')) {\n        fieldSelector = 'e-checkbox';\n      }\n\n      var classSelector = isDropDowns ? \".\" + fieldSelector + \":not(.e-control)\" : \".\" + fieldSelector;\n      var control = closest(element, classSelector) || element.querySelector(\".\" + fieldSelector);\n\n      if (control) {\n        var attrEle = control.querySelector('[name]');\n\n        if (attrEle) {\n          attrName = attrEle.name;\n        }\n      }\n    }\n\n    return attrName;\n  };\n\n  EventWindow.prototype.onAllDayChange = function (allDayStatus) {\n    var startObj = this.getInstance(cls.EVENT_WINDOW_START_CLASS);\n    var endObj = this.getInstance(cls.EVENT_WINDOW_END_CLASS);\n    var timezoneDiv = this.element.querySelector('.e-time-zone-container');\n    var format;\n\n    if (allDayStatus) {\n      format = isNullOrUndefined(this.parent.dateFormat) ? this.getFormat('dateFormats') : this.parent.dateFormat;\n      addClass(this.element.querySelectorAll('.e-time-icon'), cls.EVENT_WINDOW_ICON_DISABLE_CLASS);\n      addClass([timezoneDiv], cls.DISABLE_CLASS);\n\n      if (this.element.querySelector('.' + cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS)) {\n        removeClass([this.element.querySelector('.' + cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS)], cls.ENABLE_CLASS);\n      }\n\n      startObj.format = endObj.format = format;\n    } else {\n      format = isNullOrUndefined(this.parent.dateFormat) ? this.getFormat('dateFormats') + ' ' + this.parent.activeViewOptions.timeFormat : this.parent.dateFormat + ' ' + this.parent.activeViewOptions.timeFormat;\n      removeClass(this.element.querySelectorAll('.e-time-icon'), cls.EVENT_WINDOW_ICON_DISABLE_CLASS);\n      removeClass([timezoneDiv], cls.DISABLE_CLASS);\n\n      if (this.element.querySelector('.e-checkbox-wrapper .e-time-zone').checked) {\n        addClass([this.element.querySelector('.' + cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS)], cls.ENABLE_CLASS);\n      }\n\n      startObj.format = endObj.format = format;\n    }\n\n    if (this.cellClickAction) {\n      this.updateDateTime(allDayStatus, startObj, endObj);\n    }\n\n    startObj.dataBind();\n    endObj.dataBind();\n\n    if (!isNullOrUndefined(this.recurrenceEditor)) {\n      this.recurrenceEditor.updateRuleUntilDate(startObj.value);\n    }\n  };\n\n  EventWindow.prototype.updateDateTime = function (allDayStatus, startObj, endObj) {\n    var startDate;\n    var endDate;\n\n    if (allDayStatus) {\n      startDate = util.resetTime(new Date(this.eventWindowTime.startTime.getTime()));\n\n      if (this.parent.activeCellsData.isAllDay) {\n        var temp = util.addDays(new Date(this.eventWindowTime.endTime.getTime()), -1).getTime();\n        endDate = +this.eventWindowTime.startTime > temp ? this.eventWindowTime.endTime : new Date(temp);\n      } else {\n        endDate = util.resetTime(new Date(this.eventWindowTime.endTime.getTime()));\n      }\n    } else {\n      var start = this.parent.activeCellsData.startTime;\n      startDate = new Date(this.eventWindowTime.startTime.getTime());\n      startDate.setHours(start.getHours(), start.getMinutes(), start.getSeconds());\n\n      if (this.parent.activeCellsData.isAllDay) {\n        var startHour = this.parent.getStartEndTime(this.parent.workHours.start);\n        startDate.setHours(startHour.getHours(), startHour.getMinutes(), startHour.getSeconds());\n        endDate = new Date(startDate.getTime());\n        endDate.setMilliseconds(util.MS_PER_MINUTE * this.getSlotDuration());\n      } else {\n        endDate = new Date(startDate.getTime());\n        endDate.setMilliseconds(this.parent.activeCellsData.endTime.getTime() - this.parent.activeCellsData.startTime.getTime());\n      }\n    }\n\n    this.eventWindowTime = {\n      startTime: new Date(startDate.getTime()),\n      endTime: new Date(endDate.getTime())\n    };\n    startObj.value = startDate;\n    endObj.value = endDate;\n    startObj.dataBind();\n    endObj.dataBind();\n  };\n\n  EventWindow.prototype.getFormat = function (formatType) {\n    var format;\n\n    if (this.parent.locale === 'en' || this.parent.locale === 'en-US') {\n      format = getValue(formatType + '.short', getDefaultDateObject(this.parent.getCalendarMode()));\n    } else {\n      format = getValue(\"main.\" + this.parent.locale + \".dates.calendars.\" + this.parent.getCalendarMode() + \".\" + formatType + \".short\", cldrData);\n    }\n\n    return format;\n  };\n\n  EventWindow.prototype.onEventDetailsUpdate = function (eventObj) {\n    if (!this.parent.eventSettings.allowEditing) {\n      return;\n    }\n\n    if (!this.parent.isAdaptive) {\n      removeClass([this.element.querySelector('.' + cls.DELETE_EVENT_CLASS)], cls.DISABLE_CLASS);\n    }\n\n    this.element.querySelector('.' + cls.EVENT_WINDOW_TITLE_TEXT_CLASS).innerHTML = this.l10n.getConstant('editEvent');\n    this.element.querySelector('.' + cls.FORM_CLASS).setAttribute('data-id', eventObj[this.fields.id].toString());\n\n    if (isNullOrUndefined(this.parent.editorTemplate)) {\n      eventObj = extend({}, eventObj, null, true);\n      var timezoneObj = this.getInstance(cls.TIME_ZONE_CLASS + '.' + EVENT_FIELD);\n      var timezoneValue = void 0;\n\n      if (eventObj[this.fields.startTimezone] || eventObj[this.fields.endTimezone]) {\n        timezoneValue = true;\n        this.parent.eventBase.timezoneConvert(eventObj);\n      } else {\n        timezoneValue = false;\n      }\n\n      eventObj.Timezone = timezoneValue;\n      timezoneObj.checked = timezoneValue;\n      timezoneObj.dataBind();\n    }\n\n    this.showDetails(eventObj);\n\n    if (eventObj[this.fields.recurrenceRule] && this.recurrenceEditor) {\n      this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);\n    } else if (!this.parent.isAdaptive && this.recurrenceEditor) {\n      this.recurrenceEditor.setProperties({\n        startDate: eventObj[this.fields.startTime]\n      });\n      this.recurrenceEditor.setRecurrenceRule('');\n    }\n\n    this.repeatStartDate = eventObj[this.fields.startTime];\n    this.repeatRule = '';\n\n    if (eventObj[this.fields.recurrenceRule]) {\n      if (this.recurrenceEditor) {\n        this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);\n      }\n\n      this.repeatRule = eventObj[this.fields.recurrenceRule];\n    }\n\n    if (this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n      var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n\n      if (eventObj[this.fields.recurrenceRule]) {\n        removeClass([element], HIDE_STYLE_CLASS);\n        this.repeatStatus.setProperties({\n          checked: true\n        });\n      } else {\n        addClass([element], HIDE_STYLE_CLASS);\n        this.repeatStatus.setProperties({\n          checked: false\n        });\n      }\n\n      this.updateRepeatLabel(this.repeatRule);\n    }\n\n    var isDisable = this.parent.readonly || eventObj[this.fields.isReadonly];\n\n    if (!this.parent.isAdaptive) {\n      var saveButton = this.element.querySelector('.' + cls.EVENT_WINDOW_SAVE_BUTTON_CLASS);\n      var deleteButton = this.element.querySelector('.' + cls.DELETE_EVENT_CLASS);\n      this.disableButton(saveButton, isDisable);\n      this.disableButton(deleteButton, isDisable);\n    } else {\n      var saveIcon = this.element.querySelector('.' + cls.EVENT_WINDOW_SAVE_ICON_CLASS);\n\n      if (saveIcon) {\n        if (isDisable) {\n          addClass([saveIcon], cls.ICON_DISABLE_CLASS);\n        } else {\n          removeClass([saveIcon], cls.ICON_DISABLE_CLASS);\n        }\n      }\n    }\n\n    this.dialogObject.show();\n  };\n\n  EventWindow.prototype.disableButton = function (element, value) {\n    if (element) {\n      element.ej2_instances[0].disabled = value;\n    }\n  };\n\n  EventWindow.prototype.renderRecurrenceEditor = function () {\n    return new RecurrenceEditor({\n      calendarMode: this.parent.calendarMode,\n      cssClass: this.parent.cssClass,\n      dateFormat: this.parent.dateFormat,\n      enableRtl: this.parent.enableRtl,\n      firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,\n      locale: this.parent.locale\n    });\n  };\n\n  EventWindow.prototype.updateMinMaxDateToEditor = function () {\n    var startDate = this.element.querySelector('.e-start');\n    var endDate = this.element.querySelector('.e-end');\n\n    if (startDate && endDate) {\n      var startObj = startDate.ej2_instances[0];\n      var endObj = endDate.ej2_instances[0];\n      startObj.min = this.parent.minDate;\n      startObj.max = this.parent.maxDate;\n      endObj.min = this.parent.minDate;\n      endObj.max = this.parent.maxDate;\n      startObj.dataBind();\n      endObj.dataBind();\n    }\n\n    if (this.recurrenceEditor) {\n      var untilDate = this.recurrenceEditor.element.querySelector('.e-until-date');\n\n      if (untilDate) {\n        var untilObj = untilDate.ej2_instances[0];\n        untilObj.min = this.parent.minDate;\n        untilObj.max = this.parent.maxDate;\n        untilObj.dataBind();\n      }\n    }\n  };\n\n  EventWindow.prototype.updateRepeatLabel = function (repeatRule) {\n    if (this.parent.isAdaptive && !this.repeatDialogObject) {\n      this.renderRepeatDialog();\n    }\n\n    var data = repeatRule ? this.l10n.getConstant('repeats') + ' ' + this.recurrenceEditor.getRuleSummary(repeatRule) : this.l10n.getConstant('repeat');\n    this.repeatStatus.setProperties({\n      label: data\n    });\n  };\n\n  EventWindow.prototype.dialogClose = function (event) {\n    if (this.isEnterKey) {\n      this.isEnterKey = false;\n      return;\n    }\n\n    this.dialogEvent = event;\n    this.isCrudAction = false;\n    this.parent.activeEventData = {\n      event: undefined,\n      element: undefined\n    };\n    this.parent.currentAction = null;\n    this.dialogObject.hide();\n  };\n\n  EventWindow.prototype.resetForm = function () {\n    this.fieldValidator.destroyToolTip();\n    this.resetFormFields();\n\n    if (!this.parent.isAdaptive && this.recurrenceEditor && !this.recurrenceEditor.isDestroyed) {\n      this.recurrenceEditor.resetFields();\n    }\n  };\n\n  EventWindow.prototype.timezoneChangeStyle = function (value) {\n    var timezoneDiv = this.element.querySelector('.' + cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS);\n    var localTimezoneName = this.parent.tzModule.getLocalTimezoneName();\n\n    if (value) {\n      addClass([timezoneDiv], cls.ENABLE_CLASS);\n      var startTimezoneObj = this.getInstance(cls.EVENT_WINDOW_START_TZ_CLASS);\n      var endTimezoneObj = this.getInstance(cls.EVENT_WINDOW_END_TZ_CLASS);\n      var timezone = startTimezoneObj.dataSource;\n\n      if (!startTimezoneObj.value || !this.parent.timezone) {\n        var found = timezone.some(function (tz) {\n          return tz.Value === localTimezoneName;\n        });\n\n        if (!found) {\n          timezone.push({\n            Value: localTimezoneName,\n            Text: localTimezoneName\n          });\n          startTimezoneObj.dataSource = timezone;\n          endTimezoneObj.dataSource = timezone;\n          startTimezoneObj.dataBind();\n          endTimezoneObj.dataBind();\n        }\n      }\n\n      startTimezoneObj.value = startTimezoneObj.value || this.parent.timezone || localTimezoneName;\n      endTimezoneObj.value = endTimezoneObj.value || this.parent.timezone || localTimezoneName;\n      startTimezoneObj.dataBind();\n      endTimezoneObj.dataBind();\n    } else {\n      removeClass([timezoneDiv], cls.ENABLE_CLASS);\n    }\n  };\n\n  EventWindow.prototype.resetFormFields = function () {\n    var formElement = this.getFormElements(cls.EVENT_WINDOW_DIALOG_CLASS);\n\n    for (var _i = 0, formElement_1 = formElement; _i < formElement_1.length; _i++) {\n      var currentElement = formElement_1[_i];\n      var columnName = currentElement.name || this.getColumnName(currentElement);\n\n      if (!isNullOrUndefined(columnName) && columnName !== '') {\n        this.setDefaultValueToElement(currentElement);\n      }\n    }\n  };\n\n  EventWindow.prototype.eventSave = function (event, alert) {\n    if (this.isEnterKey) {\n      this.isEnterKey = false;\n      return;\n    }\n\n    var formElement = this.element.querySelector('.' + cls.FORM_CLASS);\n\n    if (formElement && formElement.classList.contains('e-formvalidator') && !formElement.ej2_instances[0].validate()) {\n      return;\n    }\n\n    var dataCollection = this.getEventDataFromEditor();\n\n    if (this.processEventValidation(dataCollection.tempData, alert)) {\n      return;\n    }\n\n    this.eventCrudData = dataCollection.eventData;\n    this.dialogEvent = event;\n    this.isCrudAction = true;\n    this.dialogObject.hide();\n  };\n\n  EventWindow.prototype.getEventDataFromEditor = function () {\n    var eventObj = extend({}, this.getObjectFromFormData(cls.EVENT_WINDOW_DIALOG_CLASS));\n\n    if (!eventObj.Timezone) {\n      eventObj[this.fields.startTimezone] = null;\n      eventObj[this.fields.endTimezone] = null;\n    }\n\n    delete eventObj.Timezone;\n    delete eventObj.Repeat;\n    this.setDefaultValueToObject(eventObj);\n    eventObj[this.fields.recurrenceRule] = this.recurrenceEditor ? this.recurrenceEditor.getRecurrenceRule() || null : undefined;\n    var tempObj = extend({}, eventObj, null, true);\n\n    if (eventObj[this.fields.isAllDay]) {\n      eventObj[this.fields.startTime] = isNullOrUndefined(eventObj[this.fields.startTime]) ? null : util.resetTime(new Date(eventObj[this.fields.startTime].getTime()));\n      eventObj[this.fields.endTime] = isNullOrUndefined(eventObj[this.fields.endTime]) ? null : util.addDays(util.resetTime(new Date(eventObj[this.fields.endTime].getTime())), 1);\n    }\n\n    return {\n      eventData: eventObj,\n      tempData: tempObj\n    };\n  };\n\n  EventWindow.prototype.processEventValidation = function (eventObj, alert) {\n    var alertType;\n\n    if (isNullOrUndefined(this.parent.editorTemplate)) {\n      if (!eventObj[this.fields.startTime] || !eventObj[this.fields.endTime]) {\n        this.parent.quickPopup.openValidationError('invalidDateError');\n        return true;\n      }\n\n      if (eventObj[this.fields.startTime] > eventObj[this.fields.endTime]) {\n        this.parent.quickPopup.openValidationError('startEndError');\n        return true;\n      }\n    }\n\n    if (this.recurrenceEditor && this.recurrenceEditor.value && this.recurrenceEditor.value !== '') {\n      alertType = this.recurrenceValidation(eventObj[this.fields.startTime], eventObj[this.fields.endTime], alert);\n      var isShowAlert = true;\n\n      if (alertType === 'seriesChangeAlert' && this.parent.uiStateValues.isIgnoreOccurrence) {\n        isShowAlert = false;\n      }\n\n      if (!isNullOrUndefined(alertType) && isShowAlert && (!this.parent.enableRecurrenceValidation && alertType === 'wrongPattern' || this.parent.enableRecurrenceValidation)) {\n        this.parent.quickPopup.openRecurrenceValidationAlert(alertType);\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  EventWindow.prototype.processCrudActions = function (eventObj) {\n    var _this = this;\n\n    this.parent.uiStateValues.isBlock = false;\n    var resourceData = this.getResourceData(eventObj);\n    var isResourceEventExpand = (this.parent.activeViewOptions.group.resources.length > 0 || this.parent.resourceCollection.length > 0) && !this.parent.activeViewOptions.group.allowGroupEdit && !isNullOrUndefined(resourceData);\n    var eventId = this.getEventIdFromForm();\n\n    if (!isNullOrUndefined(eventId)) {\n      var eveId_1 = this.parent.eventBase.getEventIDType() === 'string' ? eventId : parseInt(eventId, 10);\n      var editedData = this.parent.eventsData.filter(function (data) {\n        return data[_this.fields.id] === eveId_1;\n      })[0];\n\n      if (isNullOrUndefined(editedData)) {\n        editedData = this.parent.blockData.filter(function (data) {\n          return data[_this.fields.id] === eveId_1;\n        })[0];\n      }\n\n      eventObj = extend({}, editedData, eventObj);\n\n      if (eventObj[this.fields.isReadonly]) {\n        return false;\n      }\n\n      var currentAction = void 0;\n\n      if (!isNullOrUndefined(editedData[this.fields.recurrenceRule])) {\n        currentAction = this.parent.currentAction;\n        eventObj.Guid = this.parent.activeEventData.event.Guid;\n\n        if (this.parent.currentAction === 'EditOccurrence') {\n          if (!eventObj[this.fields.recurrenceID]) {\n            eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();\n            eventObj.Guid = this.parent.activeEventData.event.Guid;\n          } else {\n            eveId_1 = eventObj[this.fields.recurrenceID];\n            currentAction = null;\n          }\n\n          if (this.parent.enableRecurrenceValidation && this.editOccurrenceValidation(eveId_1, eventObj)) {\n            return true;\n          }\n        }\n\n        if (this.parent.currentAction === 'EditSeries' || eventObj[this.fields.id] !== editedData[this.fields.id]) {\n          eventObj[this.fields.recurrenceID] = editedData[this.fields.id];\n        } else if (this.parent.currentAction === 'EditFollowingEvents') {\n          eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();\n          eventObj[this.fields.followingID] = editedData[this.fields.id];\n        }\n      }\n\n      if (isResourceEventExpand) {\n        this.resourceSaveEvent(eventObj, 'Save', currentAction);\n      } else {\n        this.parent.saveEvent(eventObj, currentAction);\n      }\n    } else {\n      this.parent.currentAction = 'Add';\n\n      if (isResourceEventExpand) {\n        this.resourceSaveEvent(eventObj, this.parent.currentAction);\n      } else {\n        eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();\n        this.parent.addEvent(eventObj);\n      }\n    }\n\n    return this.parent.uiStateValues.isBlock;\n  };\n\n  EventWindow.prototype.getResourceData = function (eventObj) {\n    var resourceData = null;\n\n    if (!isNullOrUndefined(this.parent.resourceBase) && !isNullOrUndefined(this.parent.resourceBase.resourceCollection) && this.parent.resourceBase.resourceCollection.length > 0) {\n      var lastResourceData = this.parent.resourceBase.resourceCollection.slice(-1)[0];\n      resourceData = eventObj[lastResourceData.field];\n    }\n\n    return resourceData;\n  };\n\n  EventWindow.prototype.getObjectFromFormData = function (className) {\n    var formElement = this.getFormElements(className);\n    var eventObj = {};\n\n    for (var _i = 0, formElement_2 = formElement; _i < formElement_2.length; _i++) {\n      var currentElement = formElement_2[_i];\n      var columnName = currentElement.name || this.getColumnName(currentElement);\n\n      if (!isNullOrUndefined(columnName) && columnName !== '') {\n        eventObj[columnName] = this.getValueFromElement(currentElement);\n      }\n    }\n\n    return eventObj;\n  };\n\n  EventWindow.prototype.setDefaultValueToObject = function (eventObj) {\n    if (!isNullOrUndefined(eventObj[this.fields.subject])) {\n      eventObj[this.fields.subject] = eventObj[this.fields.subject] || this.parent.eventSettings.fields.subject.default || this.l10n.getConstant('addTitle');\n    }\n\n    if (!isNullOrUndefined(eventObj[this.fields.location])) {\n      eventObj[this.fields.location] = eventObj[this.fields.location] || this.parent.eventSettings.fields.location.default;\n    }\n\n    if (!isNullOrUndefined(eventObj[this.fields.description])) {\n      eventObj[this.fields.description] = eventObj[this.fields.description] || this.parent.eventSettings.fields.description.default;\n    }\n  };\n\n  EventWindow.prototype.recurrenceValidation = function (startDate, endDate, alert) {\n    var alertMessage;\n    var recEditor = this.recurrenceEditor;\n    var interval = this.getInstance('e-repeat-interval.e-numerictextbox').value;\n\n    if (alert !== this.l10n.getConstant('ok')) {\n      var activeEvent = this.parent.activeEventData.event;\n      var excludedEvents = [];\n\n      if ((this.parent.currentAction === 'EditSeries' || this.parent.currentAction === 'EditFollowingEvents') && !isNullOrUndefined(activeEvent)) {\n        var eventStartTime = activeEvent[this.parent.eventFields.startTime];\n        var seriesEvents = this.parent.eventBase.getSeriesEvents(this.eventData, eventStartTime);\n\n        if (seriesEvents.length > 0) {\n          excludedEvents = this.parent.eventBase.getEditedOccurrences(seriesEvents, eventStartTime);\n        } else {\n          var event_2 = this.parent.eventBase.getEventById(activeEvent[this.parent.eventFields.id]);\n          excludedEvents = this.parent.eventBase.getEditedOccurrences([event_2], eventStartTime);\n        }\n\n        if (this.parent.currentAction === 'EditSeries' && !isNullOrUndefined(this.eventData[this.parent.eventFields.recurrenceException])) {\n          excludedEvents.push(this.eventData);\n        }\n      }\n\n      if (excludedEvents.length > 0) {\n        alertMessage = 'seriesChangeAlert';\n      }\n\n      if (this.getInstance('e-end-on-left .e-ddl .e-dropdownlist').value === 'until' && this.getInstance('e-end-on-date .e-datepicker').value < startDate) {\n        alertMessage = 'wrongPattern';\n      }\n\n      if (isNullOrUndefined(alertMessage)) {\n        var types = recEditor.value.split(';')[1].split('=')[1].split(',');\n        var obj = {\n          'SU': 0,\n          'MO': 1,\n          'TU': 2,\n          'WE': 3,\n          'TH': 4,\n          'FR': 5,\n          'SA': 6\n        };\n        var temp = [];\n        var tempDiff = [];\n        var tempValue = void 0;\n\n        switch (recEditor.value.split(';')[0].split('=')[1]) {\n          case 'DAILY':\n            if ((endDate.getTime() - startDate.getTime()) / (1000 * 3600) > interval * 24) {\n              alertMessage = 'createError';\n            }\n\n            break;\n\n          case 'WEEKLY':\n            types = recEditor.value.split(';')[1].split('=')[1].split(',');\n\n            for (var index = 0; index < types.length * (interval + 1); index++) {\n              temp[index] = types.length > index ? obj[types[index]] : temp[index - types.length] + 7 * interval;\n            }\n\n            tempValue = temp.sort(function (a, b) {\n              return a - b;\n            });\n\n            for (var index = 1; index < tempValue.length; index++) {\n              tempDiff.push(tempValue[index] - tempValue[index - 1]);\n            }\n\n            if ((endDate.getTime() - startDate.getTime()) / (1000 * 3600) >= Math.min.apply(Math, tempDiff) * 24 || isNullOrUndefined(interval)) {\n              alertMessage = 'createError';\n            }\n\n            break;\n\n          case 'MONTHLY':\n            if (endDate.getTime() >= new Date(+startDate).setMonth(startDate.getMonth() + interval)) {\n              alertMessage = 'createError';\n            }\n\n            break;\n\n          case 'YEARLY':\n            if (endDate.getTime() >= new Date(+startDate).setFullYear(startDate.getFullYear() + interval)) {\n              alertMessage = 'createError';\n            }\n\n            break;\n        }\n      }\n    } else {\n      if (endDate.getTime() >= new Date(+startDate).setMonth(startDate.getMonth() + interval)) {\n        alertMessage = 'createError';\n      }\n\n      if (isNullOrUndefined(alertMessage)) {\n        this.parent.quickPopup.quickDialog.hide();\n      }\n    }\n\n    if (isNullOrUndefined(interval)) {\n      alertMessage = 'createError';\n    }\n\n    return alertMessage;\n  };\n\n  EventWindow.prototype.getRecurrenceIndex = function (recColl, event) {\n    var recIndex;\n\n    for (var index = 0; index < recColl.length; index++) {\n      if (event[this.fields.startTime].valueOf() === recColl[index][this.fields.startTime].valueOf()) {\n        recIndex = index;\n        break;\n      }\n    }\n\n    return recIndex;\n  };\n\n  EventWindow.prototype.trimAllDay = function (data) {\n    if (data[this.fields.isAllDay]) {\n      var temp = util.addDays(new Date(+data[this.fields.endTime]), -1).getTime();\n      data[this.fields.endTime] = +data[this.fields.startTime] > temp ? data[this.fields.endTime] : new Date(temp);\n    }\n  };\n\n  EventWindow.prototype.editOccurrenceValidation = function (eventId, currentData, editData) {\n    var _this = this;\n\n    if (editData === void 0) {\n      editData = this.eventData;\n    }\n\n    var recurColl = this.parent.getOccurrencesByID(eventId);\n    var excludedDatas = this.parent.eventsData.filter(function (data) {\n      return data[_this.fields.recurrenceID] === eventId;\n    });\n    excludedDatas.map(function (data) {\n      return recurColl.push(extend({}, data));\n    });\n    currentData = extend({}, currentData);\n    this.trimAllDay(currentData);\n\n    for (var _i = 0, recurColl_1 = recurColl; _i < recurColl_1.length; _i++) {\n      var data = recurColl_1[_i];\n      this.trimAllDay(data);\n    }\n\n    this.parent.eventBase.sortByTime(recurColl);\n    var index = this.getRecurrenceIndex(recurColl, editData);\n\n    if (isNullOrUndefined(index)) {\n      return false;\n    }\n\n    if (index === 0) {\n      if (!isNullOrUndefined(recurColl[index + 1])) {\n        if (!(util.resetTime(new Date(+recurColl[index + 1][this.fields.startTime])).getTime() > util.resetTime(new Date(+currentData[this.fields.endTime])).getTime()) && util.resetTime(new Date(+recurColl[recurColl.length - 1][this.fields.endTime])).getTime() >= util.resetTime(new Date(+currentData[this.fields.startTime])).getTime()) {\n          this.parent.quickPopup.openRecurrenceValidationAlert('sameDayAlert');\n          return true;\n        } else if (util.resetTime(new Date(+recurColl[recurColl.length - 1][this.fields.endTime])).getTime() < util.resetTime(new Date(+currentData[this.fields.startTime])).getTime()) {\n          this.parent.quickPopup.openRecurrenceValidationAlert('occurrenceAlert');\n          return true;\n        }\n      }\n\n      return false;\n    } else {\n      if (index === recurColl.length - 1) {\n        if (!(util.resetTime(new Date(+recurColl[index - 1][this.fields.endTime])).getTime() < util.resetTime(new Date(+currentData[this.fields.startTime])).getTime()) && util.resetTime(new Date(+recurColl[recurColl.length - 1 - index][this.fields.startTime])).getTime() <= util.resetTime(new Date(+currentData[this.fields.endTime])).getTime()) {\n          this.parent.quickPopup.openRecurrenceValidationAlert('sameDayAlert');\n          return true;\n        } else if (util.resetTime(new Date(+recurColl[recurColl.length - 1 - index][this.fields.endTime])).getTime() > util.resetTime(new Date(+currentData[this.fields.startTime])).getTime()) {\n          this.parent.quickPopup.openRecurrenceValidationAlert('occurrenceAlert');\n          return true;\n        }\n      } else if (!((util.resetTime(new Date(+recurColl[index - 1][this.fields.endTime])).getTime() < util.resetTime(new Date(+currentData[this.fields.startTime])).getTime() || util.resetTime(new Date(+recurColl[0][this.fields.startTime])).getTime() > util.resetTime(new Date(+currentData[this.fields.startTime])).getTime()) && (util.resetTime(new Date(+recurColl[index + 1][this.fields.startTime])).getTime() > util.resetTime(new Date(+currentData[this.fields.endTime])).getTime() || util.resetTime(new Date(+recurColl[recurColl.length - 1][this.fields.endTime])).getTime() < util.resetTime(new Date(+currentData[this.fields.startTime])).getTime()))) {\n        this.parent.quickPopup.openRecurrenceValidationAlert('sameDayAlert');\n        return true;\n      } else if (util.resetTime(new Date(+recurColl[index + 1][this.fields.endTime])).getTime() < util.resetTime(new Date(+currentData[this.fields.startTime])).getTime() || util.resetTime(new Date(+recurColl[index - 1][this.fields.startTime])).getTime() > util.resetTime(new Date(+currentData[this.fields.endTime])).getTime()) {\n        this.parent.quickPopup.openRecurrenceValidationAlert('occurrenceAlert');\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  EventWindow.prototype.resourceSaveEvent = function (eventObj, action, currentAction) {\n    var _this = this;\n\n    var lastResourceData = this.parent.resourceBase.resourceCollection.slice(-1)[0];\n    var resourceData = eventObj[lastResourceData.field];\n    resourceData = resourceData instanceof Array ? resourceData : [resourceData];\n    var lastLevel = this.parent.resourceBase.lastResourceLevel;\n    var eventList = [];\n\n    var _loop_2 = function (i) {\n      var events = extend({}, eventObj, null, true);\n      events[this_2.fields.id] = this_2.parent.eventBase.getEventMaxID();\n      var temp = [];\n\n      var addValues = function () {\n        if (action === 'Save' && i === resourceData.length - 1) {\n          if (temp.length > 0) {\n            temp[0][_this.fields.id] = eventObj[_this.fields.id];\n\n            for (var k = 1; k < temp.length; k++) {\n              temp[k][_this.fields.id] = _this.parent.eventBase.getEventMaxID(i);\n              eventList.push(temp[k]);\n\n              _this.parent.saveEvent(temp[0], currentAction);\n            }\n          } else {\n            events[_this.fields.id] = eventObj[_this.fields.id];\n\n            _this.parent.saveEvent(events, currentAction);\n          }\n        } else {\n          if (temp.length > 0) {\n            for (var j = 0; j < temp.length; j++) {\n              temp[j][_this.fields.id] = _this.parent.eventBase.getEventMaxID(j);\n              eventList.push(temp[j]);\n            }\n          } else {\n            events[_this.fields.id] = _this.parent.eventBase.getEventMaxID(i);\n            eventList.push(events);\n          }\n        }\n      };\n\n      if (this_2.parent.activeViewOptions.group.byGroupID && !isNullOrUndefined(lastLevel)) {\n        var lastResource = lastResourceData.dataSource;\n        var resCol = this_2.parent.resourceCollection;\n        var index = void 0;\n\n        if (resCol.length > 1) {\n          index = util.findIndexInData(lastResource, lastResourceData.idField, resourceData[i], events, resCol);\n        } else {\n          index = util.findIndexInData(lastResource, lastResourceData.idField, resourceData[i]);\n        }\n\n        if (index < 0) {\n          return {\n            value: void 0\n          };\n        }\n\n        var groupId_1 = lastResource[index][lastResourceData.groupIDField];\n        var filter = lastLevel.filter(function (obj) {\n          return obj.resourceData[lastResourceData.idField] === resourceData[i];\n        }).filter(function (obj) {\n          return obj.resourceData[lastResourceData.groupIDField] === groupId_1;\n        })[0];\n        var groupOrder = filter.groupOrder;\n\n        for (var index_1 = 0; index_1 < this_2.parent.resourceBase.resourceCollection.length; index_1++) {\n          var field = this_2.parent.resourceBase.resourceCollection[index_1].field;\n          events[field] = groupOrder[index_1] instanceof Array ? groupOrder[index_1][0] : groupOrder[index_1];\n        }\n\n        addValues();\n      } else {\n        for (var index = 0; index < this_2.parent.resourceBase.resourceCollection.length - 1; index++) {\n          var field = this_2.parent.resourceBase.resourceCollection[index].field;\n\n          if (events[field] instanceof Array && events[field].length > 1) {\n            for (var k = 0; k < events[field].length; k++) {\n              var event_3 = extend({}, events, null, true);\n              event_3[field] = eventObj[field][k];\n              event_3[lastResourceData.field] = resourceData[i];\n              temp.push(event_3);\n            }\n          } else {\n            if (temp.length === 0) {\n              events[field] = eventObj[field] instanceof Array ? eventObj[field][0] : eventObj[field];\n              events[lastResourceData.field] = resourceData[i];\n            } else {\n              for (var l = 0; l < temp.length; l++) {\n                temp[l][field] = eventObj[field] instanceof Array ? eventObj[field][0] : eventObj[field];\n              }\n            }\n          }\n        }\n\n        events[lastResourceData.field] = resourceData[i];\n        addValues();\n      }\n    };\n\n    var this_2 = this;\n\n    for (var i = 0; i < resourceData.length; i++) {\n      var state_1 = _loop_2(i);\n\n      if (typeof state_1 === \"object\") return state_1.value;\n    }\n\n    if (eventList.length > 0) {\n      for (var _i = 0, eventList_1 = eventList; _i < eventList_1.length; _i++) {\n        var event_4 = eventList_1[_i];\n        event_4[this.fields.recurrenceException] = null;\n        event_4[this.fields.recurrenceID] = null;\n      }\n\n      this.parent.addEvent(eventList);\n    }\n  };\n\n  EventWindow.prototype.getEventIdFromForm = function () {\n    return this.element.querySelector('.' + cls.FORM_CLASS).getAttribute('data-id');\n  };\n\n  EventWindow.prototype.getFormElements = function (className) {\n    var elements = [];\n\n    if (className === cls.EVENT_WINDOW_DIALOG_CLASS) {\n      elements = [].slice.call(this.element.querySelectorAll('.' + EVENT_FIELD));\n    } else {\n      elements = [].slice.call(this.parent.element.querySelectorAll('.' + className + ' .' + EVENT_FIELD));\n    }\n\n    return elements;\n  };\n\n  EventWindow.prototype.getValueFromElement = function (element) {\n    var value;\n\n    if (element.classList.contains('e-datepicker')) {\n      value = element.ej2_instances[0].value;\n    } else if (element.classList.contains('e-datetimepicker')) {\n      value = element.ej2_instances[0].value;\n    } else if (element.classList.contains('e-dropdownlist')) {\n      value = element.ej2_instances[0].value;\n    } else if (element.classList.contains('e-multiselect')) {\n      value = element.ej2_instances[0].value;\n    } else if (element.classList.contains('e-checkbox')) {\n      value = element.ej2_instances[0].checked;\n    } else {\n      if (element.type === 'checkbox') {\n        value = element.checked;\n      } else {\n        value = SanitizeHtmlHelper.sanitize(element.value);\n      }\n    }\n\n    return value;\n  };\n\n  EventWindow.prototype.setValueToElement = function (element, value) {\n    if (element.classList.contains('e-datepicker')) {\n      var instance = element.ej2_instances[0];\n      instance.value = value;\n      instance.dataBind();\n    } else if (element.classList.contains('e-datetimepicker')) {\n      var instance = element.ej2_instances[0];\n\n      if (instance.element.classList.contains(cls.EVENT_WINDOW_START_CLASS)) {\n        this.eventWindowTime.startTime = new Date('' + value);\n      } else {\n        this.eventWindowTime.endTime = new Date('' + value);\n      }\n\n      instance.value = value;\n      instance.dataBind();\n    } else if (element.classList.contains('e-dropdownlist')) {\n      var instance = element.ej2_instances[0];\n      instance.value = value;\n      instance.dataBind();\n    } else if (element.classList.contains('e-multiselect')) {\n      var instance = element.ej2_instances[0];\n      instance.value = [];\n      instance.value = value instanceof Array ? value : [value];\n      instance.dataBind();\n    } else if (element.classList.contains('e-checkbox')) {\n      var instance = element.ej2_instances[0];\n      instance.checked = value;\n      instance.dataBind();\n    } else {\n      if (element.type !== 'checkbox') {\n        element.value = value || '';\n      } else {\n        element.checked = value;\n      }\n    }\n  };\n\n  EventWindow.prototype.setDefaultValueToElement = function (element) {\n    if (element.classList.contains('e-datepicker')) {\n      var instance = element.ej2_instances[0];\n      instance.value = this.parent.getCurrentTime();\n      instance.dataBind();\n    } else if (element.classList.contains('e-datetimepicker')) {\n      var instance = element.ej2_instances[0];\n      var dateValue = this.parent.getCurrentTime();\n      this.eventWindowTime = {\n        startTime: dateValue,\n        endTime: dateValue\n      };\n      instance.value = dateValue;\n      instance.dataBind();\n    } else if (element.classList.contains('e-dropdownlist')) {\n      var instance = element.ej2_instances[0];\n      instance.value = null;\n      instance.dataBind();\n    } else if (element.classList.contains('e-multiselect')) {\n      var instance = element.ej2_instances[0];\n      instance.value = [];\n      instance.dataBind();\n    } else if (element.classList.contains('e-checkbox')) {\n      var instance = element.ej2_instances[0];\n      instance.checked = false;\n      instance.dataBind();\n    } else {\n      if (element.type === 'checkbox') {\n        element.checked = false;\n      } else {\n        element.value = '';\n      }\n    }\n  };\n\n  EventWindow.prototype.getInstance = function (className) {\n    var element = this.element.querySelector('.' + className);\n    return element ? element.ej2_instances[0] : null;\n  };\n\n  EventWindow.prototype.eventDelete = function (event) {\n    if (this.isEnterKey) {\n      this.isEnterKey = false;\n      return;\n    }\n\n    switch (this.parent.currentAction) {\n      case 'EditOccurrence':\n        if (!isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])) {\n          this.parent.currentAction = 'DeleteOccurrence';\n        } else {\n          this.parent.currentAction = 'Delete';\n        }\n\n        break;\n\n      case 'EditSeries':\n        this.parent.currentAction = 'DeleteSeries';\n        break;\n\n      case 'Save':\n        this.parent.currentAction = 'Delete';\n        break;\n\n      case 'EditFollowingEvents':\n        if (!isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])) {\n          this.parent.currentAction = 'DeleteFollowingEvents';\n        }\n\n        break;\n    }\n\n    this.dialogEvent = event;\n    this.isCrudAction = false;\n    this.dialogObject.hide();\n    this.parent.quickPopup.openDeleteAlert();\n  };\n\n  EventWindow.prototype.getRecurrenceEditorInstance = function () {\n    if (this.parent.isAdaptive && !this.repeatDialogObject) {\n      this.renderRepeatDialog();\n    }\n\n    return this.recurrenceEditor;\n  };\n\n  EventWindow.prototype.destroyComponents = function () {\n    var formElements = this.getFormElements(cls.EVENT_WINDOW_DIALOG_CLASS);\n\n    for (var _i = 0, formElements_3 = formElements; _i < formElements_3.length; _i++) {\n      var element = formElements_3[_i];\n      var instance = void 0;\n\n      if (element.classList.contains('e-datetimepicker')) {\n        instance = element.ej2_instances;\n      } else if (element.classList.contains('e-datepicker')) {\n        instance = element.ej2_instances;\n      } else if (element.classList.contains('e-checkbox')) {\n        instance = element.ej2_instances;\n      } else if (element.classList.contains('e-dropdownlist')) {\n        instance = element.ej2_instances;\n      } else if (element.classList.contains('e-multiselect')) {\n        instance = element.ej2_instances;\n      }\n\n      if (instance && instance[0]) {\n        instance[0].destroy();\n      }\n    }\n\n    if (this.buttonObj) {\n      this.buttonObj.destroy();\n    }\n  };\n\n  EventWindow.prototype.destroy = function (isIgnore) {\n    if (this.parent && !this.parent.isDestroyed) {\n      this.parent.resetTemplates(['editorTemplate']);\n    }\n\n    this.destroyComponents();\n\n    if (this.recurrenceEditor) {\n      this.recurrenceEditor.destroy();\n      this.recurrenceEditor = null;\n    }\n\n    if (this.fieldValidator) {\n      this.fieldValidator.destroy();\n      this.fieldValidator = null;\n    }\n\n    if (this.repeatDialogObject) {\n      this.repeatDialogObject.destroy();\n      this.repeatDialogObject = null;\n    }\n\n    if (this.dialogObject) {\n      if (this.dialogObject.element) {\n        EventHandler.remove(this.dialogObject.element, 'keydown', this.preventEventSave);\n      }\n\n      this.dialogObject.destroy();\n      this.dialogObject = null;\n    }\n\n    if (this.element) {\n      remove(this.element);\n      this.element = null;\n    }\n\n    if (!isIgnore) {\n      this.l10n = null;\n      this.parent = null;\n      this.fields = null;\n      this.buttonObj = null;\n      this.repeatStatus = null;\n      this.eventWindowTime = null;\n    }\n  };\n\n  return EventWindow;\n}();\n\nexport { EventWindow };","map":{"version":3,"names":["createElement","isNullOrUndefined","addClass","remove","EventHandler","extend","append","cldrData","removeClass","getValue","getDefaultDateObject","closest","SanitizeHtmlHelper","Query","Deferred","CheckBox","Button","Dialog","DropDownList","MultiSelect","Input","DateTimePicker","FieldValidator","RecurrenceEditor","cls","event","util","EVENT_FIELD","REPEAT_CONTAINER_CLASS","REPEAT_BUTTON_ICON_CLASS","REPEAT_BUTTON_CLASS","REPEAT_DIALOG_CLASS","HIDE_STYLE_CLASS","EventWindow","parent","l10n","localeObj","fields","eventFields","eventWindowTime","startTime","Date","endTime","renderEventWindow","prototype","element","id","appendChild","dialogModel","animationSettings","effect","content","getEventWindowContent","cssClass","EVENT_WINDOW_DIALOG_CLASS","enableRtl","height","isAdaptive","minHeight","isModal","showCloseIcon","target","document","body","visible","width","beforeOpen","onBeforeOpen","bind","beforeClose","onBeforeClose","DEVICE_CLASS","header","getConstant","buttons","buttonModel","DELETE_EVENT_CLASS","disabled","eventSettings","allowDeleting","readonly","click","eventDelete","EVENT_WINDOW_SAVE_BUTTON_CLASS","isPrimary","allowAdding","eventSave","EVENT_WINDOW_CANCEL_BUTTON_CLASS","dialogClose","dialogObject","querySelector","setAttribute","parentElement","add","EVENT_WINDOW_BACK_ICON_CLASS","EVENT_WINDOW_SAVE_ICON_CLASS","preventEventSave","applyFormValidation","refresh","destroy","refreshRecurrenceEditor","recurrenceEditor","createRecurrenceEditor","setRecurrenceEditor","editorTemplate","openEditor","data","type","isEventData","repeatType","currentAction","removeNewEventElement","quickPopup","quickPopupHide","inlineModule","removeInlineAppointmentElement","eventObj","cellClickAction","activeCellsData","event_1","convertToEventData","isAllDay","groupIndex","renderFormElements","DISABLE_CLASS","firstDayOfWeek","activeViewOptions","onCellDetailsUpdate","onEventDetailsUpdate","setDialogContent","dataBind","e","allowKeyboardInteraction","code","isEnterKey","args","_this","eventProp","eventData","cancel","activeEventData","duration","getSlotDuration","saveObj","getInstance","allowEditing","deleteObj","callBackPromise","trigger","popupOpen","popupArgs","refreshDateTimePicker","startObj","EVENT_WINDOW_START_CLASS","endObj","EVENT_WINDOW_END_CLASS","value","getTime","MS_PER_MINUTE","resolve","isInteracted","isCrudAction","dialogEvent","eventCrudData","popupClose","processCrudActions","resetForm","eventBase","focusElement","container","className","FORM_CONTAINER_CLASS","form","FORM_CLASS","attrs","onsubmit","destroyComponents","formElements","slice","call","children","_i","formElements_1","length","templateId","tempEle","getEditorTemplate","renderTemplates","getDefaultEventWindowContent","parentDiv","createDivElement","EVENT_WINDOW_DIALOG_PARENT_CLASS","titleLocationDiv","EVENT_WINDOW_TITLE_LOCATION_DIV_CLASS","renderTextBox","SUBJECT_CLASS","editorTitles","subject","LOCATION_CLASS","location","startEndDateTimeDiv","EVENT_WINDOW_START_END_DIV_CLASS","renderDateTimePicker","onTimeChange","allDayTimezoneDiv","EVENT_WINDOW_ALLDAY_TZ_DIV_CLASS","renderCheckBox","EVENT_WINDOW_ALL_DAY_CLASS","TIME_ZONE_CLASS","timezoneParentDiv","EVENT_WINDOW_TIME_ZONE_DIV_CLASS","renderDropDown","EVENT_WINDOW_START_TZ_CLASS","EVENT_WINDOW_END_TZ_CLASS","repeatParentDiv","EVENT_WINDOW_REPEAT_DIV_CLASS","repeatDiv","EVENT_WINDOW_REPEAT_CLASS","repeatEditContainer","button","buttonObj","iconCss","appendTo","loadRecurrenceEditor","resourceCollection","resourceParentDiv","EVENT_WINDOW_RESOURCES_DIV_CLASS","_a","resourceBase","resource","renderResourceDetails","description","DESCRIPTION_CLASS","submit","title","style","renderRecurrenceEditor","updateMinMaxDateToEditor","createInputElement","fieldName","name","charAt","toLowerCase","timeScale","interval","slotCount","changeEvent","dateTimeDiv","getFieldName","dateTimeInput","dateTimePicker","change","calendarMode","min","minDate","max","maxDate","setHours","locale","floatLabelType","timeFormat","format","dateFormat","getFormat","placeholder","getFieldLabel","step","elementSelector","startEndElement","querySelectorAll","startEndElement_1","instance","ej2_instances","classList","contains","endDate","updateRuleUntilDate","resourceData","field","labelValue","resourceDiv","resourceInput","resourceTemplate","colorField","textField","allowMultiple","listObj","dataSource","onMultiselectResourceChange","itemTemplate","text","idField","htmlAttributes","popupHeight","popupWidth","mode","dropDownList","onDropdownResourceChange","timezoneDiv","timezoneInput","allowFiltering","onTimezoneChange","timezoneDataSource","filterBarPlaceholder","noRecordsTemplate","filtering","query","where","updateData","group","byGroupID","getAttribute","getColumnName","i","resObject","createInstance","datasource","_loop_1","j","resourceModel","filter","groupIDField","groupId","filterRes","this_1","filterDatasource","concat","index","resObj","itemData","resValue","startTimezone","startTimezoneObj","endTimezoneObj","checkBoxDiv","checkBoxInput","checkBox","onChange","label","repeatStatus","textBoxDiv","elementType","textBoxInput","createInput","properties","endTimezone","labelText","recurrenceRule","currentTarget","onAllDayChange","checked","timezoneChangeStyle","onRepeatChange","renderRepeatDialog","repeatDialogObject","closeOnEscape","repeatSaveDialog","repeatCancelDialog","open","repeatOpenDialog","show","repeatRule","setRecurrenceRule","state","setProperties","startDate","repeatStartDate","selectedType","hide","updateRepeatLabel","getRecurrenceRule","closeRepeatDialog","repeatTempRule","removeAttribute","EVENT_WINDOW_TITLE_TEXT_CLASS","innerHTML","Timezone","default","showDetails","deleteButton","saveButton","disableButton","cellsData","RecurrenceRule","resources","setResourceValues","getValidationRule","rules","Object","keys","undefined","validation","fieldValidator","renderFormValidator","getHours","getMinutes","trimAllDay","getFormElements","keyNames","formElements_2","curElement","columnName","indexOf","setValueToElement","setDefaultValueToElement","timezoneObj","attrName","isDropDowns","fieldSelector","classSelector","control","attrEle","allDayStatus","EVENT_WINDOW_ICON_DISABLE_CLASS","ENABLE_CLASS","updateDateTime","resetTime","temp","addDays","start","getSeconds","startHour","getStartEndTime","workHours","setMilliseconds","formatType","getCalendarMode","toString","timezoneValue","timezoneConvert","isDisable","isReadonly","saveIcon","ICON_DISABLE_CLASS","untilDate","untilObj","getRuleSummary","destroyToolTip","resetFormFields","isDestroyed","resetFields","localTimezoneName","tzModule","getLocalTimezoneName","timezone","found","some","tz","Value","push","Text","formElement","formElement_1","currentElement","alert","validate","dataCollection","getEventDataFromEditor","processEventValidation","tempData","getObjectFromFormData","Repeat","setDefaultValueToObject","tempObj","alertType","openValidationError","recurrenceValidation","isShowAlert","uiStateValues","isIgnoreOccurrence","enableRecurrenceValidation","openRecurrenceValidationAlert","isBlock","getResourceData","isResourceEventExpand","allowGroupEdit","eventId","getEventIdFromForm","eveId_1","getEventIDType","parseInt","editedData","eventsData","blockData","Guid","recurrenceID","getEventMaxID","editOccurrenceValidation","followingID","resourceSaveEvent","saveEvent","addEvent","lastResourceData","formElement_2","getValueFromElement","alertMessage","recEditor","activeEvent","excludedEvents","eventStartTime","seriesEvents","getSeriesEvents","getEditedOccurrences","event_2","getEventById","recurrenceException","types","split","obj","tempDiff","tempValue","sort","a","b","Math","apply","setMonth","getMonth","setFullYear","getFullYear","quickDialog","getRecurrenceIndex","recColl","recIndex","valueOf","currentData","editData","recurColl","getOccurrencesByID","excludedDatas","map","recurColl_1","sortByTime","action","Array","lastLevel","lastResourceLevel","eventList","_loop_2","events","this_2","addValues","k","lastResource","resCol","findIndexInData","groupId_1","groupOrder","index_1","event_3","l","state_1","eventList_1","event_4","elements","sanitize","getCurrentTime","dateValue","openDeleteAlert","getRecurrenceEditorInstance","formElements_3","isIgnore","resetTemplates"],"sources":["C:/Users/shahj/OneDrive/Documents/GitHub/Multifunctional-React-Dashboard/node_modules/@syncfusion/ej2-schedule/src/schedule/popups/event-window.js"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { createElement, isNullOrUndefined, addClass, remove, EventHandler, extend, append } from '@syncfusion/ej2-base';\nimport { cldrData, removeClass, getValue, getDefaultDateObject, closest, SanitizeHtmlHelper } from '@syncfusion/ej2-base';\nimport { Query, Deferred } from '@syncfusion/ej2-data';\nimport { CheckBox, Button } from '@syncfusion/ej2-buttons';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { DropDownList, MultiSelect } from '@syncfusion/ej2-dropdowns';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { DateTimePicker } from '@syncfusion/ej2-calendars';\nimport { FieldValidator } from './form-validator';\nimport { RecurrenceEditor } from '../../recurrence-editor/recurrence-editor';\nimport * as cls from '../base/css-constant';\nimport * as event from '../base/constant';\nimport * as util from '../base/util';\nvar EVENT_FIELD = 'e-field';\nvar REPEAT_CONTAINER_CLASS = 'e-recurrence-container';\nvar REPEAT_BUTTON_ICON_CLASS = 'e-recurrence-edit';\nvar REPEAT_BUTTON_CLASS = 'e-recurrence-edit-button';\nvar REPEAT_DIALOG_CLASS = 'e-recurrence-dialog';\nvar HIDE_STYLE_CLASS = 'e-hide';\n/**\n * Event editor window\n */\nvar EventWindow = /** @class */ (function () {\n    function EventWindow(parent) {\n        this.parent = parent;\n        this.l10n = this.parent.localeObj;\n        this.fields = this.parent.eventFields;\n        this.eventWindowTime = { startTime: new Date(), endTime: new Date() };\n        this.renderEventWindow();\n    }\n    EventWindow.prototype.renderEventWindow = function () {\n        this.element = createElement('div', { id: this.parent.element.id + '_dialog_wrapper' });\n        this.parent.element.appendChild(this.element);\n        var dialogModel = {\n            animationSettings: { effect: 'Zoom' },\n            content: this.getEventWindowContent(),\n            cssClass: cls.EVENT_WINDOW_DIALOG_CLASS,\n            enableRtl: this.parent.enableRtl,\n            height: this.parent.isAdaptive ? '100%' : 'auto',\n            minHeight: '300px',\n            isModal: true,\n            showCloseIcon: this.parent.isAdaptive ? false : true,\n            target: document.body,\n            visible: false,\n            width: '500px',\n            beforeOpen: this.onBeforeOpen.bind(this),\n            beforeClose: this.onBeforeClose.bind(this)\n        };\n        if (this.parent.isAdaptive) {\n            dialogModel.cssClass = cls.EVENT_WINDOW_DIALOG_CLASS + ' ' + cls.DEVICE_CLASS;\n            dialogModel.header = '<div class=\"e-title-header\"><div class=\"e-back-icon e-icons\"></div><div class=\"e-title-text\">' +\n                this.l10n.getConstant('newEvent') + '</div><div class=\"e-save-icon e-icons\"></div></div>';\n        }\n        else {\n            dialogModel.buttons = [{\n                    buttonModel: {\n                        content: this.l10n.getConstant('deleteButton'), cssClass: cls.DELETE_EVENT_CLASS,\n                        disabled: !this.parent.eventSettings.allowDeleting || this.parent.readonly\n                    },\n                    click: this.eventDelete.bind(this)\n                }, {\n                    buttonModel: {\n                        content: this.l10n.getConstant('saveButton'), cssClass: 'e-primary ' + cls.EVENT_WINDOW_SAVE_BUTTON_CLASS,\n                        isPrimary: true, disabled: !this.parent.eventSettings.allowAdding || this.parent.readonly\n                    },\n                    click: this.eventSave.bind(this)\n                }, {\n                    buttonModel: { cssClass: cls.EVENT_WINDOW_CANCEL_BUTTON_CLASS, content: this.l10n.getConstant('cancelButton') },\n                    click: this.dialogClose.bind(this)\n                }];\n            dialogModel.header = '<div class=\"e-title-text\">' + this.l10n.getConstant('newEvent') + '</div>';\n        }\n        this.dialogObject = new Dialog(dialogModel, this.element);\n        if (this.dialogObject.element.querySelector('.e-dlg-closeicon-btn')) {\n            this.dialogObject.element.querySelector('.e-dlg-closeicon-btn').setAttribute('title', this.l10n.getConstant('close'));\n        }\n        addClass([this.element.parentElement], cls.EVENT_WINDOW_DIALOG_CLASS + '-container');\n        if (this.parent.isAdaptive) {\n            EventHandler.add(this.element.querySelector('.' + cls.EVENT_WINDOW_BACK_ICON_CLASS), 'click', this.dialogClose, this);\n            EventHandler.add(this.element.querySelector('.' + cls.EVENT_WINDOW_SAVE_ICON_CLASS), 'click', this.eventSave, this);\n        }\n        EventHandler.add(this.dialogObject.element, 'keydown', this.preventEventSave, this);\n        this.applyFormValidation();\n    };\n    EventWindow.prototype.refresh = function () {\n        this.destroy(true);\n        this.renderEventWindow();\n    };\n    EventWindow.prototype.refreshRecurrenceEditor = function () {\n        if (this.recurrenceEditor) {\n            var recurrenceEditor = this.recurrenceEditor.element;\n            this.recurrenceEditor.destroy();\n            this.createRecurrenceEditor(recurrenceEditor);\n        }\n    };\n    EventWindow.prototype.setRecurrenceEditor = function (recurrenceEditor) {\n        if (this.parent.editorTemplate) {\n            this.recurrenceEditor = recurrenceEditor;\n        }\n    };\n    EventWindow.prototype.openEditor = function (data, type, isEventData, repeatType) {\n        this.parent.currentAction = type;\n        this.parent.removeNewEventElement();\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide(true);\n        }\n        this.parent.inlineModule.removeInlineAppointmentElement();\n        if (type === 'Add') {\n            var eventObj = {};\n            this.cellClickAction = !isEventData;\n            this.parent.activeCellsData = data;\n            var event_1 = data;\n            if (this.cellClickAction) {\n                this.convertToEventData(event_1, eventObj);\n            }\n            else {\n                this.parent.activeCellsData = {\n                    startTime: (event_1.startTime || event_1[this.fields.startTime]),\n                    endTime: (event_1.endTime || event_1[this.fields.endTime]),\n                    isAllDay: (event_1.isAllDay || event_1[this.fields.isAllDay]),\n                    element: event_1.element,\n                    groupIndex: event_1.groupIndex\n                };\n                eventObj = event_1;\n            }\n            data = eventObj;\n        }\n        if (!isNullOrUndefined(this.parent.editorTemplate)) {\n            this.renderFormElements(this.element.querySelector('.e-schedule-form'), data);\n        }\n        if (!this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n            removeClass([this.dialogObject.element.querySelector('.e-recurrenceeditor')], cls.DISABLE_CLASS);\n        }\n        if (this.recurrenceEditor) {\n            this.recurrenceEditor.firstDayOfWeek = this.parent.activeViewOptions.firstDayOfWeek;\n        }\n        switch (type) {\n            case 'Add':\n                this.onCellDetailsUpdate(data, repeatType);\n                break;\n            case 'Save':\n            case 'EditOccurrence':\n            case 'EditSeries':\n            case 'EditFollowingEvents':\n                if (type === 'EditOccurrence' && !this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n                    addClass([this.dialogObject.element.querySelector('.e-recurrenceeditor')], cls.DISABLE_CLASS);\n                }\n                this.cellClickAction = false;\n                this.onEventDetailsUpdate(data);\n                break;\n        }\n    };\n    EventWindow.prototype.setDialogContent = function () {\n        this.dialogObject.content = this.getEventWindowContent();\n        this.dialogObject.dataBind();\n    };\n    EventWindow.prototype.preventEventSave = function (e) {\n        if (this.parent && !this.parent.allowKeyboardInteraction && e.code === 'Enter') {\n            this.isEnterKey = true;\n        }\n    };\n    EventWindow.prototype.onBeforeOpen = function (args) {\n        var _this = this;\n        var eventProp = {\n            type: 'Editor',\n            data: this.eventData,\n            cancel: false,\n            element: this.element,\n            target: (this.cellClickAction ? this.parent.activeCellsData.element : this.parent.activeEventData.element)\n        };\n        if (this.cellClickAction) {\n            eventProp.duration = this.getSlotDuration();\n        }\n        var saveObj = this.getInstance(cls.EVENT_WINDOW_SAVE_BUTTON_CLASS);\n        if (saveObj) {\n            saveObj.disabled = !(this.cellClickAction ? this.parent.eventSettings.allowAdding : this.parent.eventSettings.allowEditing);\n            saveObj.dataBind();\n        }\n        var deleteObj = this.getInstance(cls.DELETE_EVENT_CLASS);\n        if (deleteObj) {\n            deleteObj.disabled = !this.parent.eventSettings.allowDeleting;\n            deleteObj.dataBind();\n        }\n        var callBackPromise = new Deferred();\n        this.parent.trigger(event.popupOpen, eventProp, function (popupArgs) {\n            args.cancel = popupArgs.cancel;\n            _this.duration = _this.cellClickAction ? popupArgs.duration : null;\n            _this.refreshDateTimePicker(_this.duration);\n            if (_this.cellClickAction && popupArgs.duration !== _this.getSlotDuration() && isNullOrUndefined(_this.parent.editorTemplate)) {\n                var startObj = _this.getInstance(cls.EVENT_WINDOW_START_CLASS);\n                var endObj = _this.getInstance(cls.EVENT_WINDOW_END_CLASS);\n                endObj.value = new Date(startObj.value.getTime() + (util.MS_PER_MINUTE * popupArgs.duration));\n                endObj.dataBind();\n            }\n            if (_this.parent.editorTemplate && _this.element.querySelector('.e-recurrenceeditor') && !_this.recurrenceEditor) {\n                _this.recurrenceEditor = _this.getInstance('e-recurrenceeditor');\n            }\n            callBackPromise.resolve(args);\n        });\n        return callBackPromise;\n    };\n    EventWindow.prototype.onBeforeClose = function (args) {\n        var _this = this;\n        if (args.isInteracted) {\n            this.isCrudAction = false;\n        }\n        var eventProp = {\n            type: 'Editor',\n            event: args.event || this.dialogEvent,\n            data: this.eventCrudData,\n            cancel: false,\n            element: this.element,\n            target: (this.cellClickAction ? this.parent.activeCellsData.element : this.parent.activeEventData.element)\n        };\n        var callBackPromise = new Deferred();\n        this.parent.trigger(event.popupClose, eventProp, function (popupArgs) {\n            args.cancel = popupArgs.cancel;\n            if (!popupArgs.cancel) {\n                if (_this.isCrudAction) {\n                    args.cancel = _this.processCrudActions(popupArgs.data);\n                    _this.isCrudAction = args.cancel;\n                }\n                if (!_this.isCrudAction) {\n                    _this.resetForm();\n                    _this.parent.eventBase.focusElement(true);\n                    _this.eventCrudData = null;\n                }\n            }\n            callBackPromise.resolve(args);\n        });\n        return callBackPromise;\n    };\n    EventWindow.prototype.getEventWindowContent = function () {\n        var container = createElement('div', { className: cls.FORM_CONTAINER_CLASS });\n        var form = createElement('form', {\n            id: this.parent.element.id + 'EditForm',\n            className: cls.FORM_CLASS,\n            attrs: { onsubmit: 'return false;' }\n        });\n        this.renderFormElements(form);\n        container.appendChild(form);\n        return container;\n    };\n    EventWindow.prototype.renderFormElements = function (form, args) {\n        if (!isNullOrUndefined(this.parent.editorTemplate)) {\n            if (args) {\n                if (this.recurrenceEditor) {\n                    this.recurrenceEditor.destroy();\n                    this.recurrenceEditor = null;\n                }\n                this.destroyComponents();\n                var formElements = [].slice.call(form.children);\n                for (var _i = 0, formElements_1 = formElements; _i < formElements_1.length; _i++) {\n                    var element = formElements_1[_i];\n                    remove(element);\n                }\n            }\n            var templateId = this.parent.element.id + '_editorTemplate';\n            var tempEle = [].slice.call(this.parent.getEditorTemplate()(args || {}, this.parent, 'editorTemplate', templateId, false));\n            append(tempEle, form);\n            this.parent.renderTemplates();\n        }\n        else {\n            form.appendChild(this.getDefaultEventWindowContent());\n        }\n    };\n    EventWindow.prototype.getDefaultEventWindowContent = function () {\n        var parentDiv = this.createDivElement(cls.EVENT_WINDOW_DIALOG_PARENT_CLASS);\n        var titleLocationDiv = this.createDivElement(cls.EVENT_WINDOW_TITLE_LOCATION_DIV_CLASS);\n        parentDiv.appendChild(titleLocationDiv);\n        titleLocationDiv.appendChild(this.renderTextBox(cls.SUBJECT_CLASS));\n        titleLocationDiv.querySelector('.' + cls.SUBJECT_CLASS).setAttribute('title', this.parent.editorTitles.subject);\n        titleLocationDiv.appendChild(this.renderTextBox(cls.LOCATION_CLASS));\n        titleLocationDiv.querySelector('.' + cls.LOCATION_CLASS).setAttribute('title', this.parent.editorTitles.location);\n        var startEndDateTimeDiv = this.createDivElement(cls.EVENT_WINDOW_START_END_DIV_CLASS);\n        parentDiv.appendChild(startEndDateTimeDiv);\n        startEndDateTimeDiv.appendChild(this.renderDateTimePicker(cls.EVENT_WINDOW_START_CLASS, this.onTimeChange.bind(this)));\n        startEndDateTimeDiv.querySelector('.' + cls.EVENT_WINDOW_START_CLASS).setAttribute('title', this.parent.editorTitles.startTime);\n        startEndDateTimeDiv.appendChild(this.renderDateTimePicker(cls.EVENT_WINDOW_END_CLASS));\n        startEndDateTimeDiv.querySelector('.' + cls.EVENT_WINDOW_END_CLASS).setAttribute('title', this.parent.editorTitles.endTime);\n        var allDayTimezoneDiv = this.createDivElement(cls.EVENT_WINDOW_ALLDAY_TZ_DIV_CLASS);\n        parentDiv.appendChild(allDayTimezoneDiv);\n        allDayTimezoneDiv.appendChild(this.renderCheckBox(cls.EVENT_WINDOW_ALL_DAY_CLASS));\n        allDayTimezoneDiv.appendChild(this.renderCheckBox(cls.TIME_ZONE_CLASS));\n        var timezoneParentDiv = this.createDivElement(cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS);\n        parentDiv.appendChild(timezoneParentDiv);\n        timezoneParentDiv.appendChild(this.renderDropDown(cls.EVENT_WINDOW_START_TZ_CLASS));\n        timezoneParentDiv.appendChild(this.renderDropDown(cls.EVENT_WINDOW_END_TZ_CLASS));\n        var repeatParentDiv = this.createDivElement(cls.EVENT_WINDOW_REPEAT_DIV_CLASS);\n        parentDiv.appendChild(repeatParentDiv);\n        var repeatDiv = this.renderCheckBox(cls.EVENT_WINDOW_REPEAT_CLASS);\n        var repeatEditContainer = createElement('span', { className: REPEAT_CONTAINER_CLASS });\n        var button = createElement('button', {\n            className: REPEAT_BUTTON_CLASS,\n            attrs: { type: 'button', 'title': this.l10n.getConstant('editRecurrence') }\n        });\n        this.buttonObj = new Button({ iconCss: REPEAT_BUTTON_ICON_CLASS + ' e-icons', cssClass: 'e-medium ' + this.parent.cssClass });\n        repeatEditContainer.appendChild(button);\n        this.buttonObj.appendTo(button);\n        repeatDiv.appendChild(repeatEditContainer);\n        repeatParentDiv.appendChild(repeatDiv);\n        if (this.parent.isAdaptive) {\n            EventHandler.add(button, 'click', this.loadRecurrenceEditor, this);\n        }\n        else {\n            this.createRecurrenceEditor(parentDiv);\n        }\n        if (this.parent.resourceCollection.length > 0) {\n            var resourceParentDiv = this.createDivElement(cls.EVENT_WINDOW_RESOURCES_DIV_CLASS);\n            for (var _i = 0, _a = this.parent.resourceBase.resourceCollection; _i < _a.length; _i++) {\n                var resource = _a[_i];\n                resourceParentDiv.appendChild(this.renderResourceDetails(resource));\n            }\n            parentDiv.appendChild(resourceParentDiv);\n        }\n        var description = this.createDivElement(cls.DESCRIPTION_CLASS + '-row');\n        description.appendChild(this.renderTextBox(cls.DESCRIPTION_CLASS));\n        description.querySelector('.' + cls.DESCRIPTION_CLASS).setAttribute('title', this.parent.editorTitles.description);\n        parentDiv.appendChild(description);\n        var submit = createElement('button', { attrs: { type: 'hidden', title: 'submit', style: 'display:none' } });\n        parentDiv.appendChild(submit);\n        return parentDiv;\n    };\n    EventWindow.prototype.createRecurrenceEditor = function (parentDiv) {\n        var recurrenceEditor = this.createDivElement();\n        parentDiv.appendChild(recurrenceEditor);\n        this.recurrenceEditor = this.renderRecurrenceEditor();\n        this.recurrenceEditor.appendTo(recurrenceEditor);\n        this.updateMinMaxDateToEditor();\n    };\n    EventWindow.prototype.createDivElement = function (className) {\n        return createElement('div', { className: className });\n    };\n    EventWindow.prototype.createInputElement = function (className, fieldName, type) {\n        return createElement(type || 'input', {\n            className: className, attrs: {\n                type: 'text', name: fieldName, value: '', id: fieldName,\n                title: ((this.l10n.getConstant(fieldName.charAt(0).toLowerCase() + fieldName.slice(1))) === '') ?\n                    fieldName : this.l10n.getConstant(fieldName.charAt(0).toLowerCase() + fieldName.slice(1))\n            }\n        });\n    };\n    EventWindow.prototype.getSlotDuration = function () {\n        return this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\n    };\n    EventWindow.prototype.renderDateTimePicker = function (value, changeEvent) {\n        var dateTimeDiv = this.createDivElement(value + '-container');\n        var fieldName = this.getFieldName(value);\n        var dateTimeInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName);\n        dateTimeDiv.appendChild(dateTimeInput);\n        var dateTimePicker = new DateTimePicker({\n            change: changeEvent,\n            firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,\n            calendarMode: this.parent.calendarMode,\n            min: this.parent.minDate,\n            max: new Date(new Date(+this.parent.maxDate).setHours(23, 59, 59)),\n            cssClass: this.parent.cssClass,\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            floatLabelType: 'Always',\n            timeFormat: this.parent.activeViewOptions.timeFormat,\n            format: (isNullOrUndefined(this.parent.dateFormat) ?\n                this.getFormat('dateFormats') : this.parent.dateFormat) + ' ' + this.parent.activeViewOptions.timeFormat,\n            placeholder: this.getFieldLabel(value),\n            step: this.getSlotDuration(),\n            width: '100%'\n        });\n        dateTimePicker.appendTo(dateTimeInput);\n        return dateTimeDiv;\n    };\n    EventWindow.prototype.refreshDateTimePicker = function (duration) {\n        var elementSelector = '.' + cls.EVENT_WINDOW_START_CLASS + ',.' + cls.EVENT_WINDOW_END_CLASS;\n        var startEndElement = [].slice.call(this.element.querySelectorAll(elementSelector));\n        for (var _i = 0, startEndElement_1 = startEndElement; _i < startEndElement_1.length; _i++) {\n            var element = startEndElement_1[_i];\n            var instance = element.ej2_instances[0];\n            instance.firstDayOfWeek = this.parent.activeViewOptions.firstDayOfWeek;\n            instance.timeFormat = this.parent.activeViewOptions.timeFormat;\n            instance.step = duration || this.getSlotDuration();\n            instance.dataBind();\n        }\n    };\n    EventWindow.prototype.onTimeChange = function () {\n        var startObj = this.getInstance(cls.EVENT_WINDOW_START_CLASS);\n        if (startObj.element.parentElement.classList.contains('e-input-focus')) {\n            var endObj = this.getInstance(cls.EVENT_WINDOW_END_CLASS);\n            var duration = 0;\n            if (this.cellClickAction) {\n                duration = util.MS_PER_MINUTE * this.duration;\n                this.eventWindowTime.startTime = startObj.value;\n            }\n            else {\n                duration = this.eventData[this.fields.endTime].getTime() - this.eventData[this.fields.startTime].getTime();\n            }\n            var endDate = (isNullOrUndefined(startObj.value)) ? null : new Date(startObj.value.getTime() + duration);\n            if (this.cellClickAction) {\n                this.eventWindowTime.endTime = endDate;\n            }\n            endObj.value = endDate;\n            endObj.dataBind();\n        }\n        if (this.recurrenceEditor) {\n            this.recurrenceEditor.updateRuleUntilDate(this.eventWindowTime.startTime);\n        }\n    };\n    EventWindow.prototype.renderResourceDetails = function (resourceData) {\n        var fieldName = resourceData.field;\n        var value = 'e-' + fieldName;\n        var labelValue = resourceData.title;\n        var resourceDiv = this.createDivElement(value + '-container' + ' ' + 'e-resources');\n        var resourceInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName);\n        resourceDiv.appendChild(resourceInput);\n        var resourceTemplate = '<div class=\"e-resource-template\"><div class=\"e-resource-color\" style=\"background-color:${' +\n            resourceData.colorField + '}\"></div><div class=\"e-resource-text\">${' + resourceData.textField + '}</div></div>';\n        if (resourceData.allowMultiple) {\n            var listObj = new MultiSelect({\n                cssClass: this.parent.cssClass || '',\n                dataSource: resourceData.dataSource,\n                change: this.onMultiselectResourceChange.bind(this),\n                itemTemplate: resourceTemplate,\n                fields: {\n                    text: resourceData.textField,\n                    value: resourceData.idField\n                },\n                htmlAttributes: { 'title': labelValue, 'name': fieldName },\n                floatLabelType: 'Always',\n                placeholder: labelValue,\n                popupHeight: '230px',\n                popupWidth: '447px',\n                mode: 'Box'\n            });\n            listObj.appendTo(resourceInput);\n        }\n        else {\n            var dropDownList = new DropDownList({\n                cssClass: this.parent.cssClass || '',\n                change: this.onDropdownResourceChange.bind(this),\n                dataSource: resourceData.dataSource,\n                enableRtl: this.parent.enableRtl,\n                fields: {\n                    text: resourceData.textField,\n                    value: resourceData.idField\n                },\n                htmlAttributes: { 'title': labelValue, 'name': fieldName },\n                floatLabelType: 'Always',\n                placeholder: labelValue,\n                popupHeight: '230px',\n                popupWidth: '447px',\n                itemTemplate: resourceTemplate\n            });\n            dropDownList.appendTo(resourceInput);\n        }\n        return resourceDiv;\n    };\n    EventWindow.prototype.renderDropDown = function (value) {\n        var _this = this;\n        var fieldName = this.getFieldName(value);\n        var timezoneDiv = this.createDivElement(value + '-container');\n        var timezoneInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName);\n        timezoneDiv.appendChild(timezoneInput);\n        var dropDownList = new DropDownList({\n            allowFiltering: true,\n            change: this.onTimezoneChange.bind(this),\n            cssClass: this.parent.cssClass || '',\n            dataSource: this.parent.timezoneDataSource,\n            enableRtl: this.parent.enableRtl,\n            fields: { text: 'Text', value: 'Value' },\n            filterBarPlaceholder: this.parent.localeObj.getConstant('searchTimezone'),\n            noRecordsTemplate: this.parent.localeObj.getConstant('noRecords'),\n            filtering: function (e) {\n                var query = new Query();\n                query = (e.text !== '') ? query.where('Text', 'contains', e.text, true) : query;\n                e.updateData(_this.parent.timezoneDataSource, query);\n            },\n            htmlAttributes: { 'title': this.getFieldLabel(value), 'name': fieldName },\n            floatLabelType: 'Always',\n            placeholder: this.getFieldLabel(value),\n            popupHeight: '230px'\n        });\n        dropDownList.appendTo(timezoneInput);\n        return timezoneDiv;\n    };\n    EventWindow.prototype.onMultiselectResourceChange = function (args) {\n        if (!args.value || !this.parent.activeViewOptions.group.byGroupID || this.parent.resourceCollection.length <= 1) {\n            return;\n        }\n        var resourceCollection = this.parent.resourceBase.resourceCollection;\n        var fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\n        for (var i = 0; i < resourceCollection.length; i++) {\n            if (resourceCollection[i].field === fieldName && i < resourceCollection.length - 1) {\n                var resObject = this.createInstance(i);\n                var datasource = [];\n                var _loop_1 = function (j) {\n                    var resourceModel = resourceCollection[i + 1];\n                    // eslint-disable-next-line max-len\n                    var filter = resourceModel.dataSource.filter(function (data) {\n                        return data[resourceModel.groupIDField] === args.value[j];\n                    })[0];\n                    var groupId = filter[resourceCollection[i + 1].groupIDField];\n                    var filterRes = this_1.filterDatasource(i, groupId);\n                    datasource = datasource.concat(filterRes);\n                };\n                var this_1 = this;\n                for (var j = 0; j < args.value.length; j++) {\n                    _loop_1(j);\n                }\n                resObject.dataSource = datasource;\n                resObject.dataBind();\n            }\n        }\n    };\n    EventWindow.prototype.createInstance = function (index) {\n        var resourceData = this.parent.resourceBase.resourceCollection[index + 1];\n        var resObject = this.element.querySelector('.e-' + resourceData.field).\n            ej2_instances[0];\n        return resObject;\n    };\n    EventWindow.prototype.onDropdownResourceChange = function (args) {\n        if (!args.value || this.parent.resourceCollection.length <= 1 || !this.parent.activeViewOptions.group.byGroupID) {\n            return;\n        }\n        var fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\n        var resourceCollection = this.parent.resourceBase.resourceCollection;\n        for (var i = 0; i < resourceCollection.length; i++) {\n            if ((i < resourceCollection.length - 1) && resourceCollection[i].field === fieldName) {\n                var resObj = this.createInstance(i);\n                var groupId = args.itemData[resourceCollection[i].idField];\n                resObj.dataSource = this.filterDatasource(i, groupId);\n                resObj.dataBind();\n                var resValue = resObj.dataSource[0][resourceCollection[i + 1].idField];\n                resObj.value = (resourceCollection[i + 1].allowMultiple) ? [resValue] : resValue;\n                resObj.dataBind();\n            }\n        }\n    };\n    EventWindow.prototype.filterDatasource = function (index, groupId) {\n        var resourceData = this.parent.resourceBase.resourceCollection[index + 1];\n        return resourceData.dataSource.filter(function (data) {\n            return data[resourceData.groupIDField] === groupId;\n        });\n    };\n    EventWindow.prototype.onTimezoneChange = function (args) {\n        var fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\n        if (fieldName === this.parent.eventFields.startTimezone) {\n            var startTimezoneObj = this.getInstance(cls.EVENT_WINDOW_START_TZ_CLASS);\n            var endTimezoneObj = this.getInstance(cls.EVENT_WINDOW_END_TZ_CLASS);\n            endTimezoneObj.value = startTimezoneObj.value;\n            endTimezoneObj.dataBind();\n        }\n    };\n    EventWindow.prototype.renderCheckBox = function (value) {\n        var checkBoxDiv = this.createDivElement(value + '-container');\n        var fieldName = this.getFieldName(value);\n        var checkBoxInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName);\n        checkBoxDiv.appendChild(checkBoxInput);\n        var checkBox = new CheckBox({\n            change: this.onChange.bind(this),\n            cssClass: value + ' ' + this.parent.cssClass,\n            enableRtl: this.parent.enableRtl,\n            label: this.getFieldLabel(value)\n        });\n        checkBox.appendTo(checkBoxInput);\n        checkBoxInput.setAttribute('name', fieldName);\n        if (fieldName === 'Repeat') {\n            this.repeatStatus = checkBox;\n        }\n        return checkBoxDiv;\n    };\n    EventWindow.prototype.renderTextBox = function (value) {\n        var textBoxDiv = this.createDivElement(value + '-container');\n        var fieldName = this.getFieldName(value);\n        var elementType = (value === cls.DESCRIPTION_CLASS) ? 'textarea' : 'input';\n        var textBoxInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName, elementType);\n        textBoxDiv.appendChild(textBoxInput);\n        Input.createInput({\n            element: textBoxInput,\n            floatLabelType: 'Always',\n            properties: {\n                enableRtl: this.parent.enableRtl,\n                placeholder: this.getFieldLabel(value)\n            }\n        });\n        return textBoxDiv;\n    };\n    EventWindow.prototype.getFieldName = function (name) {\n        var fieldName = '';\n        switch (name) {\n            case cls.SUBJECT_CLASS:\n                fieldName = this.fields.subject;\n                break;\n            case cls.LOCATION_CLASS:\n                fieldName = this.fields.location;\n                break;\n            case cls.EVENT_WINDOW_START_CLASS:\n                fieldName = this.fields.startTime;\n                break;\n            case cls.EVENT_WINDOW_END_CLASS:\n                fieldName = this.fields.endTime;\n                break;\n            case cls.DESCRIPTION_CLASS:\n                fieldName = this.fields.description;\n                break;\n            case cls.EVENT_WINDOW_ALL_DAY_CLASS:\n                fieldName = this.fields.isAllDay;\n                break;\n            case cls.EVENT_WINDOW_START_TZ_CLASS:\n                fieldName = this.fields.startTimezone;\n                break;\n            case cls.EVENT_WINDOW_END_TZ_CLASS:\n                fieldName = this.fields.endTimezone;\n                break;\n            case cls.TIME_ZONE_CLASS:\n                fieldName = 'Timezone';\n                break;\n            case cls.EVENT_WINDOW_REPEAT_CLASS:\n                fieldName = 'Repeat';\n                break;\n        }\n        return fieldName;\n    };\n    EventWindow.prototype.getFieldLabel = function (fieldName) {\n        var labelText = '';\n        switch (fieldName) {\n            case cls.SUBJECT_CLASS:\n                labelText = this.parent.editorTitles.subject;\n                break;\n            case cls.LOCATION_CLASS:\n                labelText = this.parent.editorTitles.location;\n                break;\n            case cls.DESCRIPTION_CLASS:\n                labelText = this.parent.editorTitles.description;\n                break;\n            case cls.EVENT_WINDOW_START_CLASS:\n                labelText = this.parent.editorTitles.startTime;\n                break;\n            case cls.EVENT_WINDOW_END_CLASS:\n                labelText = this.parent.editorTitles.endTime;\n                break;\n            case cls.EVENT_WINDOW_START_TZ_CLASS:\n                labelText = this.parent.editorTitles.startTimezone;\n                break;\n            case cls.EVENT_WINDOW_END_TZ_CLASS:\n                labelText = this.parent.editorTitles.endTimezone;\n                break;\n            case cls.EVENT_WINDOW_REPEAT_CLASS:\n                labelText = this.parent.editorTitles.recurrenceRule;\n                break;\n            case cls.EVENT_WINDOW_ALL_DAY_CLASS:\n                labelText = this.parent.editorTitles.isAllDay;\n                break;\n            case cls.TIME_ZONE_CLASS:\n                labelText = this.l10n.getConstant('timezone');\n                break;\n        }\n        return labelText;\n    };\n    EventWindow.prototype.onChange = function (args) {\n        var target = args.event.currentTarget.querySelector('input');\n        if (target.classList.contains(cls.EVENT_WINDOW_ALL_DAY_CLASS)) {\n            this.onAllDayChange(args.checked);\n        }\n        else if (target.classList.contains(cls.TIME_ZONE_CLASS)) {\n            this.timezoneChangeStyle(args.checked);\n        }\n        else if (target.classList.contains(cls.EVENT_WINDOW_REPEAT_CLASS)) {\n            this.onRepeatChange(args.checked);\n        }\n    };\n    EventWindow.prototype.renderRepeatDialog = function () {\n        var element = createElement('div');\n        this.repeatDialogObject = new Dialog({\n            header: this.l10n.getConstant('recurrence'),\n            visible: false,\n            content: '<div class=\"e-rec-editor\"></div>',\n            closeOnEscape: true,\n            width: '90%',\n            buttons: [{\n                    click: this.repeatSaveDialog.bind(this),\n                    buttonModel: { content: this.l10n.getConstant('save'), cssClass: 'e-save', isPrimary: true }\n                },\n                { click: this.repeatCancelDialog.bind(this), buttonModel: { cssClass: 'e-cancel', content: this.l10n.getConstant('cancel') } }],\n            target: this.element,\n            animationSettings: { effect: 'Zoom' },\n            enableRtl: this.parent.enableRtl,\n            isModal: true,\n            cssClass: REPEAT_DIALOG_CLASS,\n            open: this.repeatOpenDialog.bind(this)\n        });\n        this.element.appendChild(element);\n        this.repeatDialogObject.appendTo(element);\n        this.createRecurrenceEditor(this.repeatDialogObject.element.querySelector('.e-rec-editor'));\n    };\n    EventWindow.prototype.loadRecurrenceEditor = function () {\n        this.repeatDialogObject.show();\n        if (this.recurrenceEditor && this.repeatRule) {\n            this.recurrenceEditor.setRecurrenceRule(this.repeatRule);\n        }\n    };\n    EventWindow.prototype.onRepeatChange = function (state) {\n        if (state) {\n            if (!this.repeatDialogObject) {\n                this.renderRepeatDialog();\n            }\n            this.recurrenceEditor.setProperties({ startDate: this.repeatStartDate, selectedType: 0 });\n            this.loadRecurrenceEditor();\n        }\n        else {\n            if (this.repeatDialogObject) {\n                this.repeatDialogObject.hide();\n            }\n            this.repeatRule = '';\n            if (this.recurrenceEditor) {\n                this.recurrenceEditor.setRecurrenceRule(this.repeatRule);\n                this.updateRepeatLabel(this.repeatRule);\n            }\n            var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n            addClass([element], HIDE_STYLE_CLASS);\n        }\n    };\n    EventWindow.prototype.repeatSaveDialog = function () {\n        this.repeatRule = this.recurrenceEditor.getRecurrenceRule();\n        var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n        if (this.recurrenceEditor.getRecurrenceRule()) {\n            removeClass([element], HIDE_STYLE_CLASS);\n        }\n        else {\n            addClass([element], HIDE_STYLE_CLASS);\n            this.repeatStatus.setProperties({ checked: false });\n        }\n        this.updateRepeatLabel(this.repeatRule);\n        this.closeRepeatDialog();\n    };\n    EventWindow.prototype.closeRepeatDialog = function () {\n        this.repeatDialogObject.hide();\n    };\n    EventWindow.prototype.repeatCancelDialog = function () {\n        this.closeRepeatDialog();\n        if (this.recurrenceEditor) {\n            this.recurrenceEditor.setRecurrenceRule(this.repeatTempRule);\n        }\n        if (!this.repeatTempRule) {\n            this.repeatStatus.setProperties({ checked: false });\n        }\n    };\n    EventWindow.prototype.repeatOpenDialog = function () {\n        this.repeatTempRule = this.recurrenceEditor.getRecurrenceRule();\n    };\n    EventWindow.prototype.onCellDetailsUpdate = function (eventObj, repeatType) {\n        if (!this.parent.eventSettings.allowAdding) {\n            return;\n        }\n        this.element.querySelector('.' + cls.FORM_CLASS).removeAttribute('data-id');\n        this.element.querySelector('.' + cls.EVENT_WINDOW_TITLE_TEXT_CLASS).innerHTML = this.l10n.getConstant('newEvent');\n        eventObj.Timezone = false;\n        this.repeatStartDate = eventObj[this.fields.startTime];\n        this.repeatRule = '';\n        if (!isNullOrUndefined(this.parent.eventSettings.fields.subject.default)) {\n            eventObj[this.fields.subject] = this.parent.eventSettings.fields.subject.default;\n        }\n        if (!isNullOrUndefined(this.parent.eventSettings.fields.location.default)) {\n            eventObj[this.fields.location] = this.parent.eventSettings.fields.location.default;\n        }\n        if (!isNullOrUndefined(this.parent.eventSettings.fields.description.default)) {\n            eventObj[this.fields.description] = this.parent.eventSettings.fields.description.default;\n        }\n        this.showDetails(eventObj);\n        if (eventObj[this.fields.recurrenceRule] && this.recurrenceEditor) {\n            this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);\n            this.repeatRule = eventObj[this.fields.recurrenceRule];\n        }\n        var deleteButton = this.element.querySelector('.' + cls.DELETE_EVENT_CLASS);\n        if (deleteButton) {\n            addClass([deleteButton], cls.DISABLE_CLASS);\n        }\n        if (this.recurrenceEditor) {\n            this.recurrenceEditor.setProperties({\n                startDate: eventObj[this.fields.startTime],\n                selectedType: !isNullOrUndefined(repeatType) ? repeatType : !isNullOrUndefined(eventObj[this.fields.recurrenceRule]) ?\n                    this.recurrenceEditor.selectedType : 0\n            });\n        }\n        if (this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n            var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n            addClass([element], HIDE_STYLE_CLASS);\n            this.updateRepeatLabel(this.repeatRule);\n        }\n        else {\n            var saveButton = this.element.querySelector('.' + cls.EVENT_WINDOW_SAVE_BUTTON_CLASS);\n            this.disableButton(saveButton, false);\n        }\n        this.dialogObject.show();\n    };\n    EventWindow.prototype.convertToEventData = function (cellsData, eventObj) {\n        if (cellsData.subject) {\n            eventObj[this.fields.subject] = cellsData.subject;\n        }\n        eventObj[this.fields.startTime] = cellsData.startTime;\n        eventObj[this.fields.endTime] = cellsData.endTime;\n        eventObj[this.fields.isAllDay] = cellsData.isAllDay;\n        if (cellsData.RecurrenceRule) {\n            eventObj[this.fields.recurrenceRule] = cellsData.RecurrenceRule;\n        }\n        if (this.parent.resourceCollection.length > 0 || this.parent.activeViewOptions.group.resources.length > 0) {\n            this.parent.resourceBase.setResourceValues(eventObj);\n        }\n    };\n    EventWindow.prototype.applyFormValidation = function () {\n        var getValidationRule = function (rules) {\n            return (rules && Object.keys(rules).length > 0) ? rules : undefined;\n        };\n        var form = this.element.querySelector('.' + cls.FORM_CLASS);\n        var rules = {};\n        rules[this.parent.eventSettings.fields.subject.name] = getValidationRule(this.parent.eventSettings.fields.subject.validation);\n        rules[this.parent.eventSettings.fields.location.name] = getValidationRule(this.parent.eventSettings.fields.location.validation);\n        rules[this.parent.eventSettings.fields.startTime.name] = getValidationRule(this.parent.eventSettings.fields.startTime.validation);\n        rules[this.parent.eventSettings.fields.endTime.name] = getValidationRule(this.parent.eventSettings.fields.endTime.validation);\n        rules[this.parent.eventSettings.fields.description.name] =\n            getValidationRule(this.parent.eventSettings.fields.description.validation);\n        this.fieldValidator = new FieldValidator();\n        this.fieldValidator.renderFormValidator(form, rules, this.element, this.parent.locale);\n    };\n    EventWindow.prototype.showDetails = function (eventData) {\n        var eventObj = extend({}, eventData, null, true);\n        if (eventObj[this.fields.endTime].getHours() === 0 && eventObj[this.fields.endTime].getMinutes() === 0) {\n            this.trimAllDay(eventObj);\n        }\n        this.eventData = eventObj;\n        var formElements = this.getFormElements(cls.EVENT_WINDOW_DIALOG_CLASS);\n        var keyNames = Object.keys(eventObj);\n        for (var _i = 0, formElements_2 = formElements; _i < formElements_2.length; _i++) {\n            var curElement = formElements_2[_i];\n            var columnName = curElement.name || this.getColumnName(curElement);\n            if (!isNullOrUndefined(columnName) && columnName !== '') {\n                if (keyNames.indexOf(columnName) !== -1) {\n                    this.setValueToElement(curElement, eventObj[columnName]);\n                }\n                else {\n                    this.setDefaultValueToElement(curElement);\n                }\n            }\n        }\n        if (isNullOrUndefined(this.parent.editorTemplate)) {\n            this.onAllDayChange(eventObj[this.fields.isAllDay]);\n            var timezoneObj = this.getInstance(cls.TIME_ZONE_CLASS + '.' + EVENT_FIELD);\n            if (!(isNullOrUndefined(eventObj[this.fields.startTimezone]) && isNullOrUndefined(eventObj[this.fields.endTimezone]))) {\n                timezoneObj.checked = true;\n                timezoneObj.dataBind();\n            }\n            this.timezoneChangeStyle(timezoneObj.checked);\n            delete eventObj.Timezone;\n        }\n    };\n    EventWindow.prototype.getColumnName = function (element) {\n        var attrName = element.getAttribute('data-name') || '';\n        if (attrName === '') {\n            var isDropDowns = false;\n            var fieldSelector = '';\n            if (element.classList.contains('e-dropdownlist')) {\n                fieldSelector = 'e-ddl';\n                isDropDowns = true;\n            }\n            else if (element.classList.contains('e-multiselect')) {\n                fieldSelector = 'e-multiselect';\n                isDropDowns = true;\n            }\n            else if (element.classList.contains('e-datetimepicker')) {\n                fieldSelector = 'e-datetimepicker';\n            }\n            else if (element.classList.contains('e-datepicker')) {\n                fieldSelector = 'e-datepicker';\n            }\n            else if (element.classList.contains('e-checkbox')) {\n                fieldSelector = 'e-checkbox';\n            }\n            var classSelector = isDropDowns ? \".\" + fieldSelector + \":not(.e-control)\" : \".\" + fieldSelector;\n            var control = closest(element, classSelector) || element.querySelector(\".\" + fieldSelector);\n            if (control) {\n                var attrEle = control.querySelector('[name]');\n                if (attrEle) {\n                    attrName = attrEle.name;\n                }\n            }\n        }\n        return attrName;\n    };\n    EventWindow.prototype.onAllDayChange = function (allDayStatus) {\n        var startObj = this.getInstance(cls.EVENT_WINDOW_START_CLASS);\n        var endObj = this.getInstance(cls.EVENT_WINDOW_END_CLASS);\n        var timezoneDiv = this.element.querySelector('.e-time-zone-container');\n        var format;\n        if (allDayStatus) {\n            format = (isNullOrUndefined(this.parent.dateFormat)) ? this.getFormat('dateFormats') : this.parent.dateFormat;\n            addClass(this.element.querySelectorAll('.e-time-icon'), cls.EVENT_WINDOW_ICON_DISABLE_CLASS);\n            addClass([timezoneDiv], cls.DISABLE_CLASS);\n            if (this.element.querySelector('.' + cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS)) {\n                removeClass([this.element.querySelector('.' + cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS)], cls.ENABLE_CLASS);\n            }\n            startObj.format = endObj.format = format;\n        }\n        else {\n            format = (isNullOrUndefined(this.parent.dateFormat)) ? this.getFormat('dateFormats') + ' ' +\n                this.parent.activeViewOptions.timeFormat : this.parent.dateFormat + ' ' + this.parent.activeViewOptions.timeFormat;\n            removeClass(this.element.querySelectorAll('.e-time-icon'), cls.EVENT_WINDOW_ICON_DISABLE_CLASS);\n            removeClass([timezoneDiv], cls.DISABLE_CLASS);\n            if (this.element.querySelector('.e-checkbox-wrapper .e-time-zone').checked) {\n                addClass([this.element.querySelector('.' + cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS)], cls.ENABLE_CLASS);\n            }\n            startObj.format = endObj.format = format;\n        }\n        if (this.cellClickAction) {\n            this.updateDateTime(allDayStatus, startObj, endObj);\n        }\n        startObj.dataBind();\n        endObj.dataBind();\n        if (!isNullOrUndefined(this.recurrenceEditor)) {\n            this.recurrenceEditor.updateRuleUntilDate(startObj.value);\n        }\n    };\n    EventWindow.prototype.updateDateTime = function (allDayStatus, startObj, endObj) {\n        var startDate;\n        var endDate;\n        if (allDayStatus) {\n            startDate = util.resetTime(new Date(this.eventWindowTime.startTime.getTime()));\n            if (this.parent.activeCellsData.isAllDay) {\n                var temp = util.addDays(new Date(this.eventWindowTime.endTime.getTime()), -1).getTime();\n                endDate = (+this.eventWindowTime.startTime > temp) ? this.eventWindowTime.endTime : new Date(temp);\n            }\n            else {\n                endDate = util.resetTime(new Date(this.eventWindowTime.endTime.getTime()));\n            }\n        }\n        else {\n            var start = this.parent.activeCellsData.startTime;\n            startDate = new Date(this.eventWindowTime.startTime.getTime());\n            startDate.setHours(start.getHours(), start.getMinutes(), start.getSeconds());\n            if (this.parent.activeCellsData.isAllDay) {\n                var startHour = this.parent.getStartEndTime(this.parent.workHours.start);\n                startDate.setHours(startHour.getHours(), startHour.getMinutes(), startHour.getSeconds());\n                endDate = new Date(startDate.getTime());\n                endDate.setMilliseconds(util.MS_PER_MINUTE * this.getSlotDuration());\n            }\n            else {\n                endDate = new Date(startDate.getTime());\n                endDate.setMilliseconds(this.parent.activeCellsData.endTime.getTime() - this.parent.activeCellsData.startTime.getTime());\n            }\n        }\n        this.eventWindowTime = { startTime: new Date(startDate.getTime()), endTime: new Date(endDate.getTime()) };\n        startObj.value = startDate;\n        endObj.value = endDate;\n        startObj.dataBind();\n        endObj.dataBind();\n    };\n    EventWindow.prototype.getFormat = function (formatType) {\n        var format;\n        if (this.parent.locale === 'en' || this.parent.locale === 'en-US') {\n            format = getValue(formatType + '.short', getDefaultDateObject(this.parent.getCalendarMode()));\n        }\n        else {\n            format = getValue(\"main.\" + this.parent.locale + \".dates.calendars.\" + this.parent.getCalendarMode() + \".\" + formatType + \".short\", cldrData);\n        }\n        return format;\n    };\n    EventWindow.prototype.onEventDetailsUpdate = function (eventObj) {\n        if (!this.parent.eventSettings.allowEditing) {\n            return;\n        }\n        if (!this.parent.isAdaptive) {\n            removeClass([this.element.querySelector('.' + cls.DELETE_EVENT_CLASS)], cls.DISABLE_CLASS);\n        }\n        this.element.querySelector('.' + cls.EVENT_WINDOW_TITLE_TEXT_CLASS).innerHTML = this.l10n.getConstant('editEvent');\n        this.element.querySelector('.' + cls.FORM_CLASS).setAttribute('data-id', eventObj[this.fields.id].toString());\n        if (isNullOrUndefined(this.parent.editorTemplate)) {\n            eventObj = extend({}, eventObj, null, true);\n            var timezoneObj = this.getInstance(cls.TIME_ZONE_CLASS + '.' + EVENT_FIELD);\n            var timezoneValue = void 0;\n            if (eventObj[this.fields.startTimezone] || eventObj[this.fields.endTimezone]) {\n                timezoneValue = true;\n                this.parent.eventBase.timezoneConvert(eventObj);\n            }\n            else {\n                timezoneValue = false;\n            }\n            eventObj.Timezone = timezoneValue;\n            timezoneObj.checked = timezoneValue;\n            timezoneObj.dataBind();\n        }\n        this.showDetails(eventObj);\n        if (eventObj[this.fields.recurrenceRule] && this.recurrenceEditor) {\n            this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);\n        }\n        else if (!this.parent.isAdaptive && this.recurrenceEditor) {\n            this.recurrenceEditor.setProperties({ startDate: eventObj[this.fields.startTime] });\n            this.recurrenceEditor.setRecurrenceRule('');\n        }\n        this.repeatStartDate = eventObj[this.fields.startTime];\n        this.repeatRule = '';\n        if (eventObj[this.fields.recurrenceRule]) {\n            if (this.recurrenceEditor) {\n                this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);\n            }\n            this.repeatRule = eventObj[this.fields.recurrenceRule];\n        }\n        if (this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n            var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n            if (eventObj[this.fields.recurrenceRule]) {\n                removeClass([element], HIDE_STYLE_CLASS);\n                this.repeatStatus.setProperties({ checked: true });\n            }\n            else {\n                addClass([element], HIDE_STYLE_CLASS);\n                this.repeatStatus.setProperties({ checked: false });\n            }\n            this.updateRepeatLabel(this.repeatRule);\n        }\n        var isDisable = (this.parent.readonly || eventObj[this.fields.isReadonly]);\n        if (!this.parent.isAdaptive) {\n            var saveButton = this.element.querySelector('.' + cls.EVENT_WINDOW_SAVE_BUTTON_CLASS);\n            var deleteButton = this.element.querySelector('.' + cls.DELETE_EVENT_CLASS);\n            this.disableButton(saveButton, isDisable);\n            this.disableButton(deleteButton, isDisable);\n        }\n        else {\n            var saveIcon = this.element.querySelector('.' + cls.EVENT_WINDOW_SAVE_ICON_CLASS);\n            if (saveIcon) {\n                if (isDisable) {\n                    addClass([saveIcon], cls.ICON_DISABLE_CLASS);\n                }\n                else {\n                    removeClass([saveIcon], cls.ICON_DISABLE_CLASS);\n                }\n            }\n        }\n        this.dialogObject.show();\n    };\n    EventWindow.prototype.disableButton = function (element, value) {\n        if (element) {\n            element.ej2_instances[0].disabled = value;\n        }\n    };\n    EventWindow.prototype.renderRecurrenceEditor = function () {\n        return new RecurrenceEditor({\n            calendarMode: this.parent.calendarMode,\n            cssClass: this.parent.cssClass,\n            dateFormat: this.parent.dateFormat,\n            enableRtl: this.parent.enableRtl,\n            firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,\n            locale: this.parent.locale\n        });\n    };\n    EventWindow.prototype.updateMinMaxDateToEditor = function () {\n        var startDate = this.element.querySelector('.e-start');\n        var endDate = this.element.querySelector('.e-end');\n        if (startDate && endDate) {\n            var startObj = startDate.ej2_instances[0];\n            var endObj = endDate.ej2_instances[0];\n            startObj.min = this.parent.minDate;\n            startObj.max = this.parent.maxDate;\n            endObj.min = this.parent.minDate;\n            endObj.max = this.parent.maxDate;\n            startObj.dataBind();\n            endObj.dataBind();\n        }\n        if (this.recurrenceEditor) {\n            var untilDate = this.recurrenceEditor.element.querySelector('.e-until-date');\n            if (untilDate) {\n                var untilObj = untilDate.ej2_instances[0];\n                untilObj.min = this.parent.minDate;\n                untilObj.max = this.parent.maxDate;\n                untilObj.dataBind();\n            }\n        }\n    };\n    EventWindow.prototype.updateRepeatLabel = function (repeatRule) {\n        if (this.parent.isAdaptive && !this.repeatDialogObject) {\n            this.renderRepeatDialog();\n        }\n        var data = repeatRule ?\n            (this.l10n.getConstant('repeats') + ' ' + this.recurrenceEditor.getRuleSummary(repeatRule)) : this.l10n.getConstant('repeat');\n        this.repeatStatus.setProperties({ label: data });\n    };\n    EventWindow.prototype.dialogClose = function (event) {\n        if (this.isEnterKey) {\n            this.isEnterKey = false;\n            return;\n        }\n        this.dialogEvent = event;\n        this.isCrudAction = false;\n        this.parent.activeEventData = { event: undefined, element: undefined };\n        this.parent.currentAction = null;\n        this.dialogObject.hide();\n    };\n    EventWindow.prototype.resetForm = function () {\n        this.fieldValidator.destroyToolTip();\n        this.resetFormFields();\n        if (!this.parent.isAdaptive && this.recurrenceEditor && !this.recurrenceEditor.isDestroyed) {\n            this.recurrenceEditor.resetFields();\n        }\n    };\n    EventWindow.prototype.timezoneChangeStyle = function (value) {\n        var timezoneDiv = this.element.querySelector('.' + cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS);\n        var localTimezoneName = this.parent.tzModule.getLocalTimezoneName();\n        if (value) {\n            addClass([timezoneDiv], cls.ENABLE_CLASS);\n            var startTimezoneObj = this.getInstance(cls.EVENT_WINDOW_START_TZ_CLASS);\n            var endTimezoneObj = this.getInstance(cls.EVENT_WINDOW_END_TZ_CLASS);\n            var timezone = startTimezoneObj.dataSource;\n            if (!startTimezoneObj.value || !this.parent.timezone) {\n                var found = timezone.some(function (tz) { return tz.Value === localTimezoneName; });\n                if (!found) {\n                    timezone.push({ Value: localTimezoneName, Text: localTimezoneName });\n                    startTimezoneObj.dataSource = timezone;\n                    endTimezoneObj.dataSource = timezone;\n                    startTimezoneObj.dataBind();\n                    endTimezoneObj.dataBind();\n                }\n            }\n            startTimezoneObj.value = startTimezoneObj.value || this.parent.timezone || localTimezoneName;\n            endTimezoneObj.value = endTimezoneObj.value || this.parent.timezone || localTimezoneName;\n            startTimezoneObj.dataBind();\n            endTimezoneObj.dataBind();\n        }\n        else {\n            removeClass([timezoneDiv], cls.ENABLE_CLASS);\n        }\n    };\n    EventWindow.prototype.resetFormFields = function () {\n        var formElement = this.getFormElements(cls.EVENT_WINDOW_DIALOG_CLASS);\n        for (var _i = 0, formElement_1 = formElement; _i < formElement_1.length; _i++) {\n            var currentElement = formElement_1[_i];\n            var columnName = currentElement.name || this.getColumnName(currentElement);\n            if (!isNullOrUndefined(columnName) && columnName !== '') {\n                this.setDefaultValueToElement(currentElement);\n            }\n        }\n    };\n    EventWindow.prototype.eventSave = function (event, alert) {\n        if (this.isEnterKey) {\n            this.isEnterKey = false;\n            return;\n        }\n        var formElement = this.element.querySelector('.' + cls.FORM_CLASS);\n        if (formElement && formElement.classList.contains('e-formvalidator') &&\n            !formElement.ej2_instances[0].validate()) {\n            return;\n        }\n        var dataCollection = this.getEventDataFromEditor();\n        if (this.processEventValidation(dataCollection.tempData, alert)) {\n            return;\n        }\n        this.eventCrudData = dataCollection.eventData;\n        this.dialogEvent = event;\n        this.isCrudAction = true;\n        this.dialogObject.hide();\n    };\n    EventWindow.prototype.getEventDataFromEditor = function () {\n        var eventObj = extend({}, this.getObjectFromFormData(cls.EVENT_WINDOW_DIALOG_CLASS));\n        if (!eventObj.Timezone) {\n            eventObj[this.fields.startTimezone] = null;\n            eventObj[this.fields.endTimezone] = null;\n        }\n        delete eventObj.Timezone;\n        delete eventObj.Repeat;\n        this.setDefaultValueToObject(eventObj);\n        eventObj[this.fields.recurrenceRule] = this.recurrenceEditor ? this.recurrenceEditor.getRecurrenceRule() || null : undefined;\n        var tempObj = extend({}, eventObj, null, true);\n        if (eventObj[this.fields.isAllDay]) {\n            eventObj[this.fields.startTime] = (isNullOrUndefined(eventObj[this.fields.startTime])) ? null\n                : util.resetTime(new Date(eventObj[this.fields.startTime].getTime()));\n            eventObj[this.fields.endTime] = (isNullOrUndefined(eventObj[this.fields.endTime])) ? null\n                : util.addDays(util.resetTime(new Date(eventObj[this.fields.endTime].getTime())), 1);\n        }\n        return { eventData: eventObj, tempData: tempObj };\n    };\n    EventWindow.prototype.processEventValidation = function (eventObj, alert) {\n        var alertType;\n        if (isNullOrUndefined(this.parent.editorTemplate)) {\n            if (!eventObj[this.fields.startTime] || !eventObj[this.fields.endTime]) {\n                this.parent.quickPopup.openValidationError('invalidDateError');\n                return true;\n            }\n            if (eventObj[this.fields.startTime] > eventObj[this.fields.endTime]) {\n                this.parent.quickPopup.openValidationError('startEndError');\n                return true;\n            }\n        }\n        if (this.recurrenceEditor && this.recurrenceEditor.value && this.recurrenceEditor.value !== '') {\n            alertType = this.recurrenceValidation(eventObj[this.fields.startTime], eventObj[this.fields.endTime], alert);\n            var isShowAlert = true;\n            if (alertType === 'seriesChangeAlert' && this.parent.uiStateValues.isIgnoreOccurrence) {\n                isShowAlert = false;\n            }\n            if (!isNullOrUndefined(alertType) && isShowAlert\n                && ((!this.parent.enableRecurrenceValidation && alertType === 'wrongPattern') || this.parent.enableRecurrenceValidation)) {\n                this.parent.quickPopup.openRecurrenceValidationAlert(alertType);\n                return true;\n            }\n        }\n        return false;\n    };\n    EventWindow.prototype.processCrudActions = function (eventObj) {\n        var _this = this;\n        this.parent.uiStateValues.isBlock = false;\n        var resourceData = this.getResourceData(eventObj);\n        var isResourceEventExpand = (this.parent.activeViewOptions.group.resources.length > 0 ||\n            this.parent.resourceCollection.length > 0) && !this.parent.activeViewOptions.group.allowGroupEdit\n            && !isNullOrUndefined(resourceData);\n        var eventId = this.getEventIdFromForm();\n        if (!isNullOrUndefined(eventId)) {\n            var eveId_1 = this.parent.eventBase.getEventIDType() === 'string' ? eventId : parseInt(eventId, 10);\n            var editedData = this.parent.eventsData.filter(function (data) {\n                return data[_this.fields.id] === eveId_1;\n            })[0];\n            if (isNullOrUndefined(editedData)) {\n                editedData = this.parent.blockData.filter(function (data) {\n                    return data[_this.fields.id] === eveId_1;\n                })[0];\n            }\n            eventObj = extend({}, editedData, eventObj);\n            if (eventObj[this.fields.isReadonly]) {\n                return false;\n            }\n            var currentAction = void 0;\n            if (!isNullOrUndefined(editedData[this.fields.recurrenceRule])) {\n                currentAction = this.parent.currentAction;\n                eventObj.Guid = this.parent.activeEventData.event.Guid;\n                if (this.parent.currentAction === 'EditOccurrence') {\n                    if (!eventObj[this.fields.recurrenceID]) {\n                        eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();\n                        eventObj.Guid = this.parent.activeEventData.event.Guid;\n                    }\n                    else {\n                        eveId_1 = eventObj[this.fields.recurrenceID];\n                        currentAction = null;\n                    }\n                    if (this.parent.enableRecurrenceValidation && this.editOccurrenceValidation(eveId_1, eventObj)) {\n                        return true;\n                    }\n                }\n                if (this.parent.currentAction === 'EditSeries' || eventObj[this.fields.id] !== editedData[this.fields.id]) {\n                    eventObj[this.fields.recurrenceID] = editedData[this.fields.id];\n                }\n                else if (this.parent.currentAction === 'EditFollowingEvents') {\n                    eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();\n                    eventObj[this.fields.followingID] = editedData[this.fields.id];\n                }\n            }\n            if (isResourceEventExpand) {\n                this.resourceSaveEvent(eventObj, 'Save', currentAction);\n            }\n            else {\n                this.parent.saveEvent(eventObj, currentAction);\n            }\n        }\n        else {\n            this.parent.currentAction = 'Add';\n            if (isResourceEventExpand) {\n                this.resourceSaveEvent(eventObj, this.parent.currentAction);\n            }\n            else {\n                eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();\n                this.parent.addEvent(eventObj);\n            }\n        }\n        return this.parent.uiStateValues.isBlock;\n    };\n    EventWindow.prototype.getResourceData = function (eventObj) {\n        var resourceData = null;\n        if (!isNullOrUndefined(this.parent.resourceBase) && !isNullOrUndefined(this.parent.resourceBase.resourceCollection)\n            && this.parent.resourceBase.resourceCollection.length > 0) {\n            var lastResourceData = this.parent.resourceBase.resourceCollection.slice(-1)[0];\n            resourceData = eventObj[lastResourceData.field];\n        }\n        return resourceData;\n    };\n    EventWindow.prototype.getObjectFromFormData = function (className) {\n        var formElement = this.getFormElements(className);\n        var eventObj = {};\n        for (var _i = 0, formElement_2 = formElement; _i < formElement_2.length; _i++) {\n            var currentElement = formElement_2[_i];\n            var columnName = currentElement.name || this.getColumnName(currentElement);\n            if (!isNullOrUndefined(columnName) && columnName !== '') {\n                eventObj[columnName] = this.getValueFromElement(currentElement);\n            }\n        }\n        return eventObj;\n    };\n    EventWindow.prototype.setDefaultValueToObject = function (eventObj) {\n        if (!isNullOrUndefined(eventObj[this.fields.subject])) {\n            eventObj[this.fields.subject] = eventObj[this.fields.subject] || this.parent.eventSettings.fields.subject.default\n                || this.l10n.getConstant('addTitle');\n        }\n        if (!isNullOrUndefined(eventObj[this.fields.location])) {\n            eventObj[this.fields.location] = eventObj[this.fields.location] || this.parent.eventSettings.fields.location.default;\n        }\n        if (!isNullOrUndefined(eventObj[this.fields.description])) {\n            eventObj[this.fields.description] = eventObj[this.fields.description] || this.parent.eventSettings.fields.description.default;\n        }\n    };\n    EventWindow.prototype.recurrenceValidation = function (startDate, endDate, alert) {\n        var alertMessage;\n        var recEditor = this.recurrenceEditor;\n        var interval = this.getInstance('e-repeat-interval.e-numerictextbox').value;\n        if (alert !== this.l10n.getConstant('ok')) {\n            var activeEvent = this.parent.activeEventData.event;\n            var excludedEvents = [];\n            if ((this.parent.currentAction === 'EditSeries' || this.parent.currentAction === 'EditFollowingEvents')\n                && !isNullOrUndefined(activeEvent)) {\n                var eventStartTime = activeEvent[this.parent.eventFields.startTime];\n                var seriesEvents = this.parent.eventBase.getSeriesEvents(this.eventData, eventStartTime);\n                if (seriesEvents.length > 0) {\n                    excludedEvents = this.parent.eventBase.getEditedOccurrences(seriesEvents, eventStartTime);\n                }\n                else {\n                    var event_2 = this.parent.eventBase.getEventById(activeEvent[this.parent.eventFields.id]);\n                    excludedEvents = this.parent.eventBase.getEditedOccurrences([event_2], eventStartTime);\n                }\n                if (this.parent.currentAction === 'EditSeries'\n                    && !isNullOrUndefined(this.eventData[this.parent.eventFields.recurrenceException])) {\n                    excludedEvents.push(this.eventData);\n                }\n            }\n            if (excludedEvents.length > 0) {\n                alertMessage = 'seriesChangeAlert';\n            }\n            if (this.getInstance('e-end-on-left .e-ddl .e-dropdownlist').value === 'until' &&\n                this.getInstance('e-end-on-date .e-datepicker').value < startDate) {\n                alertMessage = 'wrongPattern';\n            }\n            if (isNullOrUndefined(alertMessage)) {\n                var types = recEditor.value.split(';')[1].split('=')[1].split(',');\n                var obj = { 'SU': 0, 'MO': 1, 'TU': 2, 'WE': 3, 'TH': 4, 'FR': 5, 'SA': 6 };\n                var temp = [];\n                var tempDiff = [];\n                var tempValue = void 0;\n                switch (recEditor.value.split(';')[0].split('=')[1]) {\n                    case 'DAILY':\n                        if ((((endDate.getTime() - startDate.getTime()) / (1000 * 3600)) > (interval * 24))) {\n                            alertMessage = 'createError';\n                        }\n                        break;\n                    case 'WEEKLY':\n                        types = recEditor.value.split(';')[1].split('=')[1].split(',');\n                        for (var index = 0; index < types.length * (interval + 1); index++) {\n                            temp[index] = (types.length > index) ? obj[types[index]] : temp[index - types.length] + (7 * interval);\n                        }\n                        tempValue = temp.sort(function (a, b) { return a - b; });\n                        for (var index = 1; index < tempValue.length; index++) {\n                            tempDiff.push(tempValue[index] - tempValue[index - 1]);\n                        }\n                        if ((((endDate.getTime() - startDate.getTime()) / (1000 * 3600)) >= Math.min.apply(Math, tempDiff) * 24)\n                            || isNullOrUndefined(interval)) {\n                            alertMessage = 'createError';\n                        }\n                        break;\n                    case 'MONTHLY':\n                        if (endDate.getTime() >= new Date(+startDate).setMonth(startDate.getMonth() + interval)) {\n                            alertMessage = 'createError';\n                        }\n                        break;\n                    case 'YEARLY':\n                        if (endDate.getTime() >= new Date(+startDate).setFullYear(startDate.getFullYear() + interval)) {\n                            alertMessage = 'createError';\n                        }\n                        break;\n                }\n            }\n        }\n        else {\n            if (endDate.getTime() >= new Date(+startDate).setMonth(startDate.getMonth() + interval)) {\n                alertMessage = 'createError';\n            }\n            if (isNullOrUndefined(alertMessage)) {\n                this.parent.quickPopup.quickDialog.hide();\n            }\n        }\n        if (isNullOrUndefined(interval)) {\n            alertMessage = 'createError';\n        }\n        return alertMessage;\n    };\n    EventWindow.prototype.getRecurrenceIndex = function (recColl, event) {\n        var recIndex;\n        for (var index = 0; index < recColl.length; index++) {\n            if (event[this.fields.startTime].valueOf() === recColl[index][this.fields.startTime].valueOf()) {\n                recIndex = index;\n                break;\n            }\n        }\n        return recIndex;\n    };\n    EventWindow.prototype.trimAllDay = function (data) {\n        if (data[this.fields.isAllDay]) {\n            var temp = util.addDays(new Date(+data[this.fields.endTime]), -1).getTime();\n            data[this.fields.endTime] = (+data[this.fields.startTime] > temp) ? data[this.fields.endTime] : new Date(temp);\n        }\n    };\n    EventWindow.prototype.editOccurrenceValidation = function (eventId, currentData, editData) {\n        var _this = this;\n        if (editData === void 0) {\n            editData = this.eventData;\n        }\n        var recurColl = this.parent.getOccurrencesByID(eventId);\n        var excludedDatas = this.parent.eventsData.filter(function (data) {\n            return data[_this.fields.recurrenceID] === eventId;\n        });\n        excludedDatas.map(function (data) { return recurColl.push(extend({}, data)); });\n        currentData = extend({}, currentData);\n        this.trimAllDay(currentData);\n        for (var _i = 0, recurColl_1 = recurColl; _i < recurColl_1.length; _i++) {\n            var data = recurColl_1[_i];\n            this.trimAllDay(data);\n        }\n        this.parent.eventBase.sortByTime(recurColl);\n        var index = this.getRecurrenceIndex(recurColl, editData);\n        if (isNullOrUndefined(index)) {\n            return false;\n        }\n        if (index === 0) {\n            if (!isNullOrUndefined(recurColl[index + 1])) {\n                if (!(util.resetTime(new Date(+recurColl[index + 1][this.fields.startTime])).getTime() >\n                    util.resetTime(new Date(+currentData[this.fields.endTime])).getTime()) &&\n                    (util.resetTime(new Date(+recurColl[recurColl.length - 1][this.fields.endTime])).getTime() >=\n                        util.resetTime(new Date(+currentData[this.fields.startTime])).getTime())) {\n                    this.parent.quickPopup.openRecurrenceValidationAlert('sameDayAlert');\n                    return true;\n                }\n                else if (util.resetTime(new Date(+recurColl[recurColl.length - 1][this.fields.endTime])).getTime() <\n                    util.resetTime(new Date(+currentData[this.fields.startTime])).getTime()) {\n                    this.parent.quickPopup.openRecurrenceValidationAlert('occurrenceAlert');\n                    return true;\n                }\n            }\n            return false;\n        }\n        else {\n            if (index === recurColl.length - 1) {\n                if (!(util.resetTime(new Date(+recurColl[index - 1][this.fields.endTime])).getTime() <\n                    util.resetTime(new Date(+currentData[this.fields.startTime])).getTime()) &&\n                    (util.resetTime(new Date(+recurColl[(recurColl.length - 1) - index][this.fields.startTime])).getTime() <=\n                        util.resetTime(new Date(+currentData[this.fields.endTime])).getTime())) {\n                    this.parent.quickPopup.openRecurrenceValidationAlert('sameDayAlert');\n                    return true;\n                }\n                else if (util.resetTime(new Date(+recurColl[(recurColl.length - 1) - index][this.fields.endTime])).getTime() >\n                    util.resetTime(new Date(+currentData[this.fields.startTime])).getTime()) {\n                    this.parent.quickPopup.openRecurrenceValidationAlert('occurrenceAlert');\n                    return true;\n                }\n            }\n            else if (!(((util.resetTime(new Date(+recurColl[index - 1][this.fields.endTime])).getTime() <\n                util.resetTime(new Date(+currentData[this.fields.startTime])).getTime()) ||\n                (util.resetTime(new Date(+recurColl[0][this.fields.startTime])).getTime() >\n                    util.resetTime(new Date(+currentData[this.fields.startTime])).getTime())) &&\n                ((util.resetTime(new Date(+recurColl[index + 1][this.fields.startTime])).getTime() >\n                    util.resetTime(new Date(+currentData[this.fields.endTime])).getTime()) ||\n                    (util.resetTime(new Date(+recurColl[recurColl.length - 1][this.fields.endTime])).getTime() <\n                        util.resetTime(new Date(+currentData[this.fields.startTime])).getTime())))) {\n                this.parent.quickPopup.openRecurrenceValidationAlert('sameDayAlert');\n                return true;\n            }\n            else if ((util.resetTime(new Date(+recurColl[index + 1][this.fields.endTime])).getTime() <\n                util.resetTime(new Date(+currentData[this.fields.startTime])).getTime()) ||\n                (util.resetTime(new Date(+recurColl[index - 1][this.fields.startTime])).getTime() >\n                    util.resetTime(new Date(+currentData[this.fields.endTime])).getTime())) {\n                this.parent.quickPopup.openRecurrenceValidationAlert('occurrenceAlert');\n                return true;\n            }\n        }\n        return false;\n    };\n    EventWindow.prototype.resourceSaveEvent = function (eventObj, action, currentAction) {\n        var _this = this;\n        var lastResourceData = this.parent.resourceBase.resourceCollection.slice(-1)[0];\n        var resourceData = eventObj[lastResourceData.field];\n        resourceData = (resourceData instanceof Array) ? resourceData : [resourceData];\n        var lastLevel = this.parent.resourceBase.lastResourceLevel;\n        var eventList = [];\n        var _loop_2 = function (i) {\n            var events = extend({}, eventObj, null, true);\n            events[this_2.fields.id] = this_2.parent.eventBase.getEventMaxID();\n            var temp = [];\n            var addValues = function () {\n                if (action === 'Save' && i === resourceData.length - 1) {\n                    if (temp.length > 0) {\n                        temp[0][_this.fields.id] = eventObj[_this.fields.id];\n                        for (var k = 1; k < temp.length; k++) {\n                            temp[k][_this.fields.id] = _this.parent.eventBase.getEventMaxID(i);\n                            eventList.push(temp[k]);\n                            _this.parent.saveEvent(temp[0], currentAction);\n                        }\n                    }\n                    else {\n                        events[_this.fields.id] = eventObj[_this.fields.id];\n                        _this.parent.saveEvent(events, currentAction);\n                    }\n                }\n                else {\n                    if (temp.length > 0) {\n                        for (var j = 0; j < temp.length; j++) {\n                            temp[j][_this.fields.id] = _this.parent.eventBase.getEventMaxID(j);\n                            eventList.push(temp[j]);\n                        }\n                    }\n                    else {\n                        events[_this.fields.id] = _this.parent.eventBase.getEventMaxID(i);\n                        eventList.push(events);\n                    }\n                }\n            };\n            if (this_2.parent.activeViewOptions.group.byGroupID && (!isNullOrUndefined(lastLevel))) {\n                var lastResource = lastResourceData.dataSource;\n                var resCol = this_2.parent.resourceCollection;\n                var index = void 0;\n                if (resCol.length > 1) {\n                    index = util.findIndexInData(lastResource, lastResourceData.idField, resourceData[i], events, resCol);\n                }\n                else {\n                    index = util.findIndexInData(lastResource, lastResourceData.idField, resourceData[i]);\n                }\n                if (index < 0) {\n                    return { value: void 0 };\n                }\n                var groupId_1 = lastResource[index][lastResourceData.groupIDField];\n                var filter = lastLevel.filter(function (obj) { return obj.resourceData[lastResourceData.idField] === resourceData[i]; }).\n                    filter(function (obj) { return obj.resourceData[lastResourceData.groupIDField] === groupId_1; })[0];\n                var groupOrder = filter.groupOrder;\n                for (var index_1 = 0; index_1 < this_2.parent.resourceBase.resourceCollection.length; index_1++) {\n                    var field = this_2.parent.resourceBase.resourceCollection[index_1].field;\n                    events[field] = (groupOrder[index_1] instanceof Array) ? groupOrder[index_1][0] : groupOrder[index_1];\n                }\n                addValues();\n            }\n            else {\n                for (var index = 0; index < this_2.parent.resourceBase.resourceCollection.length - 1; index++) {\n                    var field = this_2.parent.resourceBase.resourceCollection[index].field;\n                    if (events[field] instanceof Array && events[field].length > 1) {\n                        for (var k = 0; k < events[field].length; k++) {\n                            var event_3 = extend({}, events, null, true);\n                            event_3[field] = eventObj[field][k];\n                            event_3[lastResourceData.field] = resourceData[i];\n                            temp.push(event_3);\n                        }\n                    }\n                    else {\n                        if (temp.length === 0) {\n                            events[field] = (eventObj[field] instanceof Array) ?\n                                eventObj[field][0] : eventObj[field];\n                            events[lastResourceData.field] = resourceData[i];\n                        }\n                        else {\n                            for (var l = 0; l < temp.length; l++) {\n                                temp[l][field] = (eventObj[field] instanceof Array) ?\n                                    eventObj[field][0] : eventObj[field];\n                            }\n                        }\n                    }\n                }\n                events[lastResourceData.field] = resourceData[i];\n                addValues();\n            }\n        };\n        var this_2 = this;\n        for (var i = 0; i < resourceData.length; i++) {\n            var state_1 = _loop_2(i);\n            if (typeof state_1 === \"object\")\n                return state_1.value;\n        }\n        if (eventList.length > 0) {\n            for (var _i = 0, eventList_1 = eventList; _i < eventList_1.length; _i++) {\n                var event_4 = eventList_1[_i];\n                event_4[this.fields.recurrenceException] = null;\n                event_4[this.fields.recurrenceID] = null;\n            }\n            this.parent.addEvent(eventList);\n        }\n    };\n    EventWindow.prototype.getEventIdFromForm = function () {\n        return this.element.querySelector('.' + cls.FORM_CLASS).getAttribute('data-id');\n    };\n    EventWindow.prototype.getFormElements = function (className) {\n        var elements = [];\n        if (className === cls.EVENT_WINDOW_DIALOG_CLASS) {\n            elements = [].slice.call(this.element.querySelectorAll('.' + EVENT_FIELD));\n        }\n        else {\n            elements = [].slice.call(this.parent.element.querySelectorAll('.' + className + ' .' + EVENT_FIELD));\n        }\n        return elements;\n    };\n    EventWindow.prototype.getValueFromElement = function (element) {\n        var value;\n        if (element.classList.contains('e-datepicker')) {\n            value = element.ej2_instances[0].value;\n        }\n        else if (element.classList.contains('e-datetimepicker')) {\n            value = element.ej2_instances[0].value;\n        }\n        else if (element.classList.contains('e-dropdownlist')) {\n            value = element.ej2_instances[0].value;\n        }\n        else if (element.classList.contains('e-multiselect')) {\n            value = element.ej2_instances[0].value;\n        }\n        else if (element.classList.contains('e-checkbox')) {\n            value = element.ej2_instances[0].checked;\n        }\n        else {\n            if (element.type === 'checkbox') {\n                value = element.checked;\n            }\n            else {\n                value = SanitizeHtmlHelper.sanitize(element.value);\n            }\n        }\n        return value;\n    };\n    EventWindow.prototype.setValueToElement = function (element, value) {\n        if (element.classList.contains('e-datepicker')) {\n            var instance = element.ej2_instances[0];\n            instance.value = value;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-datetimepicker')) {\n            var instance = element.ej2_instances[0];\n            if (instance.element.classList.contains(cls.EVENT_WINDOW_START_CLASS)) {\n                this.eventWindowTime.startTime = new Date('' + value);\n            }\n            else {\n                this.eventWindowTime.endTime = new Date('' + value);\n            }\n            instance.value = value;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-dropdownlist')) {\n            var instance = element.ej2_instances[0];\n            instance.value = value;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-multiselect')) {\n            var instance = element.ej2_instances[0];\n            instance.value = [];\n            instance.value = ((value instanceof Array) ? value : [value]);\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-checkbox')) {\n            var instance = element.ej2_instances[0];\n            instance.checked = value;\n            instance.dataBind();\n        }\n        else {\n            if (element.type !== 'checkbox') {\n                element.value = value || '';\n            }\n            else {\n                element.checked = value;\n            }\n        }\n    };\n    EventWindow.prototype.setDefaultValueToElement = function (element) {\n        if (element.classList.contains('e-datepicker')) {\n            var instance = element.ej2_instances[0];\n            instance.value = this.parent.getCurrentTime();\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-datetimepicker')) {\n            var instance = element.ej2_instances[0];\n            var dateValue = this.parent.getCurrentTime();\n            this.eventWindowTime = { startTime: dateValue, endTime: dateValue };\n            instance.value = dateValue;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-dropdownlist')) {\n            var instance = element.ej2_instances[0];\n            instance.value = null;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-multiselect')) {\n            var instance = element.ej2_instances[0];\n            instance.value = [];\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-checkbox')) {\n            var instance = element.ej2_instances[0];\n            instance.checked = false;\n            instance.dataBind();\n        }\n        else {\n            if (element.type === 'checkbox') {\n                element.checked = false;\n            }\n            else {\n                element.value = '';\n            }\n        }\n    };\n    EventWindow.prototype.getInstance = function (className) {\n        var element = this.element.querySelector('.' + className);\n        return element ? element.ej2_instances[0] : null;\n    };\n    EventWindow.prototype.eventDelete = function (event) {\n        if (this.isEnterKey) {\n            this.isEnterKey = false;\n            return;\n        }\n        switch (this.parent.currentAction) {\n            case 'EditOccurrence':\n                if (!isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])) {\n                    this.parent.currentAction = 'DeleteOccurrence';\n                }\n                else {\n                    this.parent.currentAction = 'Delete';\n                }\n                break;\n            case 'EditSeries':\n                this.parent.currentAction = 'DeleteSeries';\n                break;\n            case 'Save':\n                this.parent.currentAction = 'Delete';\n                break;\n            case 'EditFollowingEvents':\n                if (!isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])) {\n                    this.parent.currentAction = 'DeleteFollowingEvents';\n                }\n                break;\n        }\n        this.dialogEvent = event;\n        this.isCrudAction = false;\n        this.dialogObject.hide();\n        this.parent.quickPopup.openDeleteAlert();\n    };\n    EventWindow.prototype.getRecurrenceEditorInstance = function () {\n        if (this.parent.isAdaptive && !this.repeatDialogObject) {\n            this.renderRepeatDialog();\n        }\n        return this.recurrenceEditor;\n    };\n    EventWindow.prototype.destroyComponents = function () {\n        var formElements = this.getFormElements(cls.EVENT_WINDOW_DIALOG_CLASS);\n        for (var _i = 0, formElements_3 = formElements; _i < formElements_3.length; _i++) {\n            var element = formElements_3[_i];\n            var instance = void 0;\n            if (element.classList.contains('e-datetimepicker')) {\n                instance = element.ej2_instances;\n            }\n            else if (element.classList.contains('e-datepicker')) {\n                instance = element.ej2_instances;\n            }\n            else if (element.classList.contains('e-checkbox')) {\n                instance = element.ej2_instances;\n            }\n            else if (element.classList.contains('e-dropdownlist')) {\n                instance = element.ej2_instances;\n            }\n            else if (element.classList.contains('e-multiselect')) {\n                instance = element.ej2_instances;\n            }\n            if (instance && instance[0]) {\n                instance[0].destroy();\n            }\n        }\n        if (this.buttonObj) {\n            this.buttonObj.destroy();\n        }\n    };\n    EventWindow.prototype.destroy = function (isIgnore) {\n        if (this.parent && !this.parent.isDestroyed) {\n            this.parent.resetTemplates(['editorTemplate']);\n        }\n        this.destroyComponents();\n        if (this.recurrenceEditor) {\n            this.recurrenceEditor.destroy();\n            this.recurrenceEditor = null;\n        }\n        if (this.fieldValidator) {\n            this.fieldValidator.destroy();\n            this.fieldValidator = null;\n        }\n        if (this.repeatDialogObject) {\n            this.repeatDialogObject.destroy();\n            this.repeatDialogObject = null;\n        }\n        if (this.dialogObject) {\n            if (this.dialogObject.element) {\n                EventHandler.remove(this.dialogObject.element, 'keydown', this.preventEventSave);\n            }\n            this.dialogObject.destroy();\n            this.dialogObject = null;\n        }\n        if (this.element) {\n            remove(this.element);\n            this.element = null;\n        }\n        if (!isIgnore) {\n            this.l10n = null;\n            this.parent = null;\n            this.fields = null;\n            this.buttonObj = null;\n            this.repeatStatus = null;\n            this.eventWindowTime = null;\n        }\n    };\n    return EventWindow;\n}());\nexport { EventWindow };\n"],"mappings":"AAAA;AACA,SAASA,aAAT,EAAwBC,iBAAxB,EAA2CC,QAA3C,EAAqDC,MAArD,EAA6DC,YAA7D,EAA2EC,MAA3E,EAAmFC,MAAnF,QAAiG,sBAAjG;AACA,SAASC,QAAT,EAAmBC,WAAnB,EAAgCC,QAAhC,EAA0CC,oBAA1C,EAAgEC,OAAhE,EAAyEC,kBAAzE,QAAmG,sBAAnG;AACA,SAASC,KAAT,EAAgBC,QAAhB,QAAgC,sBAAhC;AACA,SAASC,QAAT,EAAmBC,MAAnB,QAAiC,yBAAjC;AACA,SAASC,MAAT,QAAuB,wBAAvB;AACA,SAASC,YAAT,EAAuBC,WAAvB,QAA0C,2BAA1C;AACA,SAASC,KAAT,QAAsB,wBAAtB;AACA,SAASC,cAAT,QAA+B,2BAA/B;AACA,SAASC,cAAT,QAA+B,kBAA/B;AACA,SAASC,gBAAT,QAAiC,2CAAjC;AACA,OAAO,KAAKC,GAAZ,MAAqB,sBAArB;AACA,OAAO,KAAKC,KAAZ,MAAuB,kBAAvB;AACA,OAAO,KAAKC,IAAZ,MAAsB,cAAtB;AACA,IAAIC,WAAW,GAAG,SAAlB;AACA,IAAIC,sBAAsB,GAAG,wBAA7B;AACA,IAAIC,wBAAwB,GAAG,mBAA/B;AACA,IAAIC,mBAAmB,GAAG,0BAA1B;AACA,IAAIC,mBAAmB,GAAG,qBAA1B;AACA,IAAIC,gBAAgB,GAAG,QAAvB;AACA;AACA;AACA;;AACA,IAAIC,WAAW;AAAG;AAAe,YAAY;EACzC,SAASA,WAAT,CAAqBC,MAArB,EAA6B;IACzB,KAAKA,MAAL,GAAcA,MAAd;IACA,KAAKC,IAAL,GAAY,KAAKD,MAAL,CAAYE,SAAxB;IACA,KAAKC,MAAL,GAAc,KAAKH,MAAL,CAAYI,WAA1B;IACA,KAAKC,eAAL,GAAuB;MAAEC,SAAS,EAAE,IAAIC,IAAJ,EAAb;MAAyBC,OAAO,EAAE,IAAID,IAAJ;IAAlC,CAAvB;IACA,KAAKE,iBAAL;EACH;;EACDV,WAAW,CAACW,SAAZ,CAAsBD,iBAAtB,GAA0C,YAAY;IAClD,KAAKE,OAAL,GAAe7C,aAAa,CAAC,KAAD,EAAQ;MAAE8C,EAAE,EAAE,KAAKZ,MAAL,CAAYW,OAAZ,CAAoBC,EAApB,GAAyB;IAA/B,CAAR,CAA5B;IACA,KAAKZ,MAAL,CAAYW,OAAZ,CAAoBE,WAApB,CAAgC,KAAKF,OAArC;IACA,IAAIG,WAAW,GAAG;MACdC,iBAAiB,EAAE;QAAEC,MAAM,EAAE;MAAV,CADL;MAEdC,OAAO,EAAE,KAAKC,qBAAL,EAFK;MAGdC,QAAQ,EAAE7B,GAAG,CAAC8B,yBAHA;MAIdC,SAAS,EAAE,KAAKrB,MAAL,CAAYqB,SAJT;MAKdC,MAAM,EAAE,KAAKtB,MAAL,CAAYuB,UAAZ,GAAyB,MAAzB,GAAkC,MAL5B;MAMdC,SAAS,EAAE,OANG;MAOdC,OAAO,EAAE,IAPK;MAQdC,aAAa,EAAE,KAAK1B,MAAL,CAAYuB,UAAZ,GAAyB,KAAzB,GAAiC,IARlC;MASdI,MAAM,EAAEC,QAAQ,CAACC,IATH;MAUdC,OAAO,EAAE,KAVK;MAWdC,KAAK,EAAE,OAXO;MAYdC,UAAU,EAAE,KAAKC,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAZE;MAadC,WAAW,EAAE,KAAKC,aAAL,CAAmBF,IAAnB,CAAwB,IAAxB;IAbC,CAAlB;;IAeA,IAAI,KAAKlC,MAAL,CAAYuB,UAAhB,EAA4B;MACxBT,WAAW,CAACK,QAAZ,GAAuB7B,GAAG,CAAC8B,yBAAJ,GAAgC,GAAhC,GAAsC9B,GAAG,CAAC+C,YAAjE;MACAvB,WAAW,CAACwB,MAAZ,GAAqB,kGACjB,KAAKrC,IAAL,CAAUsC,WAAV,CAAsB,UAAtB,CADiB,GACmB,qDADxC;IAEH,CAJD,MAKK;MACDzB,WAAW,CAAC0B,OAAZ,GAAsB,CAAC;QACfC,WAAW,EAAE;UACTxB,OAAO,EAAE,KAAKhB,IAAL,CAAUsC,WAAV,CAAsB,cAAtB,CADA;UACuCpB,QAAQ,EAAE7B,GAAG,CAACoD,kBADrD;UAETC,QAAQ,EAAE,CAAC,KAAK3C,MAAL,CAAY4C,aAAZ,CAA0BC,aAA3B,IAA4C,KAAK7C,MAAL,CAAY8C;QAFzD,CADE;QAKfC,KAAK,EAAE,KAAKC,WAAL,CAAiBd,IAAjB,CAAsB,IAAtB;MALQ,CAAD,EAMf;QACCO,WAAW,EAAE;UACTxB,OAAO,EAAE,KAAKhB,IAAL,CAAUsC,WAAV,CAAsB,YAAtB,CADA;UACqCpB,QAAQ,EAAE,eAAe7B,GAAG,CAAC2D,8BADlE;UAETC,SAAS,EAAE,IAFF;UAEQP,QAAQ,EAAE,CAAC,KAAK3C,MAAL,CAAY4C,aAAZ,CAA0BO,WAA3B,IAA0C,KAAKnD,MAAL,CAAY8C;QAFxE,CADd;QAKCC,KAAK,EAAE,KAAKK,SAAL,CAAelB,IAAf,CAAoB,IAApB;MALR,CANe,EAYf;QACCO,WAAW,EAAE;UAAEtB,QAAQ,EAAE7B,GAAG,CAAC+D,gCAAhB;UAAkDpC,OAAO,EAAE,KAAKhB,IAAL,CAAUsC,WAAV,CAAsB,cAAtB;QAA3D,CADd;QAECQ,KAAK,EAAE,KAAKO,WAAL,CAAiBpB,IAAjB,CAAsB,IAAtB;MAFR,CAZe,CAAtB;MAgBApB,WAAW,CAACwB,MAAZ,GAAqB,+BAA+B,KAAKrC,IAAL,CAAUsC,WAAV,CAAsB,UAAtB,CAA/B,GAAmE,QAAxF;IACH;;IACD,KAAKgB,YAAL,GAAoB,IAAIxE,MAAJ,CAAW+B,WAAX,EAAwB,KAAKH,OAA7B,CAApB;;IACA,IAAI,KAAK4C,YAAL,CAAkB5C,OAAlB,CAA0B6C,aAA1B,CAAwC,sBAAxC,CAAJ,EAAqE;MACjE,KAAKD,YAAL,CAAkB5C,OAAlB,CAA0B6C,aAA1B,CAAwC,sBAAxC,EAAgEC,YAAhE,CAA6E,OAA7E,EAAsF,KAAKxD,IAAL,CAAUsC,WAAV,CAAsB,OAAtB,CAAtF;IACH;;IACDvE,QAAQ,CAAC,CAAC,KAAK2C,OAAL,CAAa+C,aAAd,CAAD,EAA+BpE,GAAG,CAAC8B,yBAAJ,GAAgC,YAA/D,CAAR;;IACA,IAAI,KAAKpB,MAAL,CAAYuB,UAAhB,EAA4B;MACxBrD,YAAY,CAACyF,GAAb,CAAiB,KAAKhD,OAAL,CAAa6C,aAAb,CAA2B,MAAMlE,GAAG,CAACsE,4BAArC,CAAjB,EAAqF,OAArF,EAA8F,KAAKN,WAAnG,EAAgH,IAAhH;MACApF,YAAY,CAACyF,GAAb,CAAiB,KAAKhD,OAAL,CAAa6C,aAAb,CAA2B,MAAMlE,GAAG,CAACuE,4BAArC,CAAjB,EAAqF,OAArF,EAA8F,KAAKT,SAAnG,EAA8G,IAA9G;IACH;;IACDlF,YAAY,CAACyF,GAAb,CAAiB,KAAKJ,YAAL,CAAkB5C,OAAnC,EAA4C,SAA5C,EAAuD,KAAKmD,gBAA5D,EAA8E,IAA9E;IACA,KAAKC,mBAAL;EACH,CArDD;;EAsDAhE,WAAW,CAACW,SAAZ,CAAsBsD,OAAtB,GAAgC,YAAY;IACxC,KAAKC,OAAL,CAAa,IAAb;IACA,KAAKxD,iBAAL;EACH,CAHD;;EAIAV,WAAW,CAACW,SAAZ,CAAsBwD,uBAAtB,GAAgD,YAAY;IACxD,IAAI,KAAKC,gBAAT,EAA2B;MACvB,IAAIA,gBAAgB,GAAG,KAAKA,gBAAL,CAAsBxD,OAA7C;MACA,KAAKwD,gBAAL,CAAsBF,OAAtB;MACA,KAAKG,sBAAL,CAA4BD,gBAA5B;IACH;EACJ,CAND;;EAOApE,WAAW,CAACW,SAAZ,CAAsB2D,mBAAtB,GAA4C,UAAUF,gBAAV,EAA4B;IACpE,IAAI,KAAKnE,MAAL,CAAYsE,cAAhB,EAAgC;MAC5B,KAAKH,gBAAL,GAAwBA,gBAAxB;IACH;EACJ,CAJD;;EAKApE,WAAW,CAACW,SAAZ,CAAsB6D,UAAtB,GAAmC,UAAUC,IAAV,EAAgBC,IAAhB,EAAsBC,WAAtB,EAAmCC,UAAnC,EAA+C;IAC9E,KAAK3E,MAAL,CAAY4E,aAAZ,GAA4BH,IAA5B;IACA,KAAKzE,MAAL,CAAY6E,qBAAZ;;IACA,IAAI,KAAK7E,MAAL,CAAY8E,UAAhB,EAA4B;MACxB,KAAK9E,MAAL,CAAY8E,UAAZ,CAAuBC,cAAvB,CAAsC,IAAtC;IACH;;IACD,KAAK/E,MAAL,CAAYgF,YAAZ,CAAyBC,8BAAzB;;IACA,IAAIR,IAAI,KAAK,KAAb,EAAoB;MAChB,IAAIS,QAAQ,GAAG,EAAf;MACA,KAAKC,eAAL,GAAuB,CAACT,WAAxB;MACA,KAAK1E,MAAL,CAAYoF,eAAZ,GAA8BZ,IAA9B;MACA,IAAIa,OAAO,GAAGb,IAAd;;MACA,IAAI,KAAKW,eAAT,EAA0B;QACtB,KAAKG,kBAAL,CAAwBD,OAAxB,EAAiCH,QAAjC;MACH,CAFD,MAGK;QACD,KAAKlF,MAAL,CAAYoF,eAAZ,GAA8B;UAC1B9E,SAAS,EAAG+E,OAAO,CAAC/E,SAAR,IAAqB+E,OAAO,CAAC,KAAKlF,MAAL,CAAYG,SAAb,CADd;UAE1BE,OAAO,EAAG6E,OAAO,CAAC7E,OAAR,IAAmB6E,OAAO,CAAC,KAAKlF,MAAL,CAAYK,OAAb,CAFV;UAG1B+E,QAAQ,EAAGF,OAAO,CAACE,QAAR,IAAoBF,OAAO,CAAC,KAAKlF,MAAL,CAAYoF,QAAb,CAHZ;UAI1B5E,OAAO,EAAE0E,OAAO,CAAC1E,OAJS;UAK1B6E,UAAU,EAAEH,OAAO,CAACG;QALM,CAA9B;QAOAN,QAAQ,GAAGG,OAAX;MACH;;MACDb,IAAI,GAAGU,QAAP;IACH;;IACD,IAAI,CAACnH,iBAAiB,CAAC,KAAKiC,MAAL,CAAYsE,cAAb,CAAtB,EAAoD;MAChD,KAAKmB,kBAAL,CAAwB,KAAK9E,OAAL,CAAa6C,aAAb,CAA2B,kBAA3B,CAAxB,EAAwEgB,IAAxE;IACH;;IACD,IAAI,CAAC,KAAKxE,MAAL,CAAYuB,UAAb,IAA2BxD,iBAAiB,CAAC,KAAKiC,MAAL,CAAYsE,cAAb,CAAhD,EAA8E;MAC1EhG,WAAW,CAAC,CAAC,KAAKiF,YAAL,CAAkB5C,OAAlB,CAA0B6C,aAA1B,CAAwC,qBAAxC,CAAD,CAAD,EAAmElE,GAAG,CAACoG,aAAvE,CAAX;IACH;;IACD,IAAI,KAAKvB,gBAAT,EAA2B;MACvB,KAAKA,gBAAL,CAAsBwB,cAAtB,GAAuC,KAAK3F,MAAL,CAAY4F,iBAAZ,CAA8BD,cAArE;IACH;;IACD,QAAQlB,IAAR;MACI,KAAK,KAAL;QACI,KAAKoB,mBAAL,CAAyBrB,IAAzB,EAA+BG,UAA/B;QACA;;MACJ,KAAK,MAAL;MACA,KAAK,gBAAL;MACA,KAAK,YAAL;MACA,KAAK,qBAAL;QACI,IAAIF,IAAI,KAAK,gBAAT,IAA6B,CAAC,KAAKzE,MAAL,CAAYuB,UAA1C,IAAwDxD,iBAAiB,CAAC,KAAKiC,MAAL,CAAYsE,cAAb,CAA7E,EAA2G;UACvGtG,QAAQ,CAAC,CAAC,KAAKuF,YAAL,CAAkB5C,OAAlB,CAA0B6C,aAA1B,CAAwC,qBAAxC,CAAD,CAAD,EAAmElE,GAAG,CAACoG,aAAvE,CAAR;QACH;;QACD,KAAKP,eAAL,GAAuB,KAAvB;QACA,KAAKW,oBAAL,CAA0BtB,IAA1B;QACA;IAbR;EAeH,CAnDD;;EAoDAzE,WAAW,CAACW,SAAZ,CAAsBqF,gBAAtB,GAAyC,YAAY;IACjD,KAAKxC,YAAL,CAAkBtC,OAAlB,GAA4B,KAAKC,qBAAL,EAA5B;IACA,KAAKqC,YAAL,CAAkByC,QAAlB;EACH,CAHD;;EAIAjG,WAAW,CAACW,SAAZ,CAAsBoD,gBAAtB,GAAyC,UAAUmC,CAAV,EAAa;IAClD,IAAI,KAAKjG,MAAL,IAAe,CAAC,KAAKA,MAAL,CAAYkG,wBAA5B,IAAwDD,CAAC,CAACE,IAAF,KAAW,OAAvE,EAAgF;MAC5E,KAAKC,UAAL,GAAkB,IAAlB;IACH;EACJ,CAJD;;EAKArG,WAAW,CAACW,SAAZ,CAAsBuB,YAAtB,GAAqC,UAAUoE,IAAV,EAAgB;IACjD,IAAIC,KAAK,GAAG,IAAZ;;IACA,IAAIC,SAAS,GAAG;MACZ9B,IAAI,EAAE,QADM;MAEZD,IAAI,EAAE,KAAKgC,SAFC;MAGZC,MAAM,EAAE,KAHI;MAIZ9F,OAAO,EAAE,KAAKA,OAJF;MAKZgB,MAAM,EAAG,KAAKwD,eAAL,GAAuB,KAAKnF,MAAL,CAAYoF,eAAZ,CAA4BzE,OAAnD,GAA6D,KAAKX,MAAL,CAAY0G,eAAZ,CAA4B/F;IALtF,CAAhB;;IAOA,IAAI,KAAKwE,eAAT,EAA0B;MACtBoB,SAAS,CAACI,QAAV,GAAqB,KAAKC,eAAL,EAArB;IACH;;IACD,IAAIC,OAAO,GAAG,KAAKC,WAAL,CAAiBxH,GAAG,CAAC2D,8BAArB,CAAd;;IACA,IAAI4D,OAAJ,EAAa;MACTA,OAAO,CAAClE,QAAR,GAAmB,EAAE,KAAKwC,eAAL,GAAuB,KAAKnF,MAAL,CAAY4C,aAAZ,CAA0BO,WAAjD,GAA+D,KAAKnD,MAAL,CAAY4C,aAAZ,CAA0BmE,YAA3F,CAAnB;MACAF,OAAO,CAACb,QAAR;IACH;;IACD,IAAIgB,SAAS,GAAG,KAAKF,WAAL,CAAiBxH,GAAG,CAACoD,kBAArB,CAAhB;;IACA,IAAIsE,SAAJ,EAAe;MACXA,SAAS,CAACrE,QAAV,GAAqB,CAAC,KAAK3C,MAAL,CAAY4C,aAAZ,CAA0BC,aAAhD;MACAmE,SAAS,CAAChB,QAAV;IACH;;IACD,IAAIiB,eAAe,GAAG,IAAIrI,QAAJ,EAAtB;IACA,KAAKoB,MAAL,CAAYkH,OAAZ,CAAoB3H,KAAK,CAAC4H,SAA1B,EAAqCZ,SAArC,EAAgD,UAAUa,SAAV,EAAqB;MACjEf,IAAI,CAACI,MAAL,GAAcW,SAAS,CAACX,MAAxB;MACAH,KAAK,CAACK,QAAN,GAAiBL,KAAK,CAACnB,eAAN,GAAwBiC,SAAS,CAACT,QAAlC,GAA6C,IAA9D;;MACAL,KAAK,CAACe,qBAAN,CAA4Bf,KAAK,CAACK,QAAlC;;MACA,IAAIL,KAAK,CAACnB,eAAN,IAAyBiC,SAAS,CAACT,QAAV,KAAuBL,KAAK,CAACM,eAAN,EAAhD,IAA2E7I,iBAAiB,CAACuI,KAAK,CAACtG,MAAN,CAAasE,cAAd,CAAhG,EAA+H;QAC3H,IAAIgD,QAAQ,GAAGhB,KAAK,CAACQ,WAAN,CAAkBxH,GAAG,CAACiI,wBAAtB,CAAf;;QACA,IAAIC,MAAM,GAAGlB,KAAK,CAACQ,WAAN,CAAkBxH,GAAG,CAACmI,sBAAtB,CAAb;;QACAD,MAAM,CAACE,KAAP,GAAe,IAAInH,IAAJ,CAAS+G,QAAQ,CAACI,KAAT,CAAeC,OAAf,KAA4BnI,IAAI,CAACoI,aAAL,GAAqBR,SAAS,CAACT,QAApE,CAAf;QACAa,MAAM,CAACxB,QAAP;MACH;;MACD,IAAIM,KAAK,CAACtG,MAAN,CAAasE,cAAb,IAA+BgC,KAAK,CAAC3F,OAAN,CAAc6C,aAAd,CAA4B,qBAA5B,CAA/B,IAAqF,CAAC8C,KAAK,CAACnC,gBAAhG,EAAkH;QAC9GmC,KAAK,CAACnC,gBAAN,GAAyBmC,KAAK,CAACQ,WAAN,CAAkB,oBAAlB,CAAzB;MACH;;MACDG,eAAe,CAACY,OAAhB,CAAwBxB,IAAxB;IACH,CAdD;IAeA,OAAOY,eAAP;EACH,CAvCD;;EAwCAlH,WAAW,CAACW,SAAZ,CAAsB0B,aAAtB,GAAsC,UAAUiE,IAAV,EAAgB;IAClD,IAAIC,KAAK,GAAG,IAAZ;;IACA,IAAID,IAAI,CAACyB,YAAT,EAAuB;MACnB,KAAKC,YAAL,GAAoB,KAApB;IACH;;IACD,IAAIxB,SAAS,GAAG;MACZ9B,IAAI,EAAE,QADM;MAEZlF,KAAK,EAAE8G,IAAI,CAAC9G,KAAL,IAAc,KAAKyI,WAFd;MAGZxD,IAAI,EAAE,KAAKyD,aAHC;MAIZxB,MAAM,EAAE,KAJI;MAKZ9F,OAAO,EAAE,KAAKA,OALF;MAMZgB,MAAM,EAAG,KAAKwD,eAAL,GAAuB,KAAKnF,MAAL,CAAYoF,eAAZ,CAA4BzE,OAAnD,GAA6D,KAAKX,MAAL,CAAY0G,eAAZ,CAA4B/F;IANtF,CAAhB;IAQA,IAAIsG,eAAe,GAAG,IAAIrI,QAAJ,EAAtB;IACA,KAAKoB,MAAL,CAAYkH,OAAZ,CAAoB3H,KAAK,CAAC2I,UAA1B,EAAsC3B,SAAtC,EAAiD,UAAUa,SAAV,EAAqB;MAClEf,IAAI,CAACI,MAAL,GAAcW,SAAS,CAACX,MAAxB;;MACA,IAAI,CAACW,SAAS,CAACX,MAAf,EAAuB;QACnB,IAAIH,KAAK,CAACyB,YAAV,EAAwB;UACpB1B,IAAI,CAACI,MAAL,GAAcH,KAAK,CAAC6B,kBAAN,CAAyBf,SAAS,CAAC5C,IAAnC,CAAd;UACA8B,KAAK,CAACyB,YAAN,GAAqB1B,IAAI,CAACI,MAA1B;QACH;;QACD,IAAI,CAACH,KAAK,CAACyB,YAAX,EAAyB;UACrBzB,KAAK,CAAC8B,SAAN;;UACA9B,KAAK,CAACtG,MAAN,CAAaqI,SAAb,CAAuBC,YAAvB,CAAoC,IAApC;;UACAhC,KAAK,CAAC2B,aAAN,GAAsB,IAAtB;QACH;MACJ;;MACDhB,eAAe,CAACY,OAAhB,CAAwBxB,IAAxB;IACH,CAdD;IAeA,OAAOY,eAAP;EACH,CA9BD;;EA+BAlH,WAAW,CAACW,SAAZ,CAAsBQ,qBAAtB,GAA8C,YAAY;IACtD,IAAIqH,SAAS,GAAGzK,aAAa,CAAC,KAAD,EAAQ;MAAE0K,SAAS,EAAElJ,GAAG,CAACmJ;IAAjB,CAAR,CAA7B;IACA,IAAIC,IAAI,GAAG5K,aAAa,CAAC,MAAD,EAAS;MAC7B8C,EAAE,EAAE,KAAKZ,MAAL,CAAYW,OAAZ,CAAoBC,EAApB,GAAyB,UADA;MAE7B4H,SAAS,EAAElJ,GAAG,CAACqJ,UAFc;MAG7BC,KAAK,EAAE;QAAEC,QAAQ,EAAE;MAAZ;IAHsB,CAAT,CAAxB;IAKA,KAAKpD,kBAAL,CAAwBiD,IAAxB;IACAH,SAAS,CAAC1H,WAAV,CAAsB6H,IAAtB;IACA,OAAOH,SAAP;EACH,CAVD;;EAWAxI,WAAW,CAACW,SAAZ,CAAsB+E,kBAAtB,GAA2C,UAAUiD,IAAV,EAAgBrC,IAAhB,EAAsB;IAC7D,IAAI,CAACtI,iBAAiB,CAAC,KAAKiC,MAAL,CAAYsE,cAAb,CAAtB,EAAoD;MAChD,IAAI+B,IAAJ,EAAU;QACN,IAAI,KAAKlC,gBAAT,EAA2B;UACvB,KAAKA,gBAAL,CAAsBF,OAAtB;UACA,KAAKE,gBAAL,GAAwB,IAAxB;QACH;;QACD,KAAK2E,iBAAL;QACA,IAAIC,YAAY,GAAG,GAAGC,KAAH,CAASC,IAAT,CAAcP,IAAI,CAACQ,QAAnB,CAAnB;;QACA,KAAK,IAAIC,EAAE,GAAG,CAAT,EAAYC,cAAc,GAAGL,YAAlC,EAAgDI,EAAE,GAAGC,cAAc,CAACC,MAApE,EAA4EF,EAAE,EAA9E,EAAkF;UAC9E,IAAIxI,OAAO,GAAGyI,cAAc,CAACD,EAAD,CAA5B;UACAlL,MAAM,CAAC0C,OAAD,CAAN;QACH;MACJ;;MACD,IAAI2I,UAAU,GAAG,KAAKtJ,MAAL,CAAYW,OAAZ,CAAoBC,EAApB,GAAyB,iBAA1C;MACA,IAAI2I,OAAO,GAAG,GAAGP,KAAH,CAASC,IAAT,CAAc,KAAKjJ,MAAL,CAAYwJ,iBAAZ,GAAgCnD,IAAI,IAAI,EAAxC,EAA4C,KAAKrG,MAAjD,EAAyD,gBAAzD,EAA2EsJ,UAA3E,EAAuF,KAAvF,CAAd,CAAd;MACAlL,MAAM,CAACmL,OAAD,EAAUb,IAAV,CAAN;MACA,KAAK1I,MAAL,CAAYyJ,eAAZ;IACH,CAjBD,MAkBK;MACDf,IAAI,CAAC7H,WAAL,CAAiB,KAAK6I,4BAAL,EAAjB;IACH;EACJ,CAtBD;;EAuBA3J,WAAW,CAACW,SAAZ,CAAsBgJ,4BAAtB,GAAqD,YAAY;IAC7D,IAAIC,SAAS,GAAG,KAAKC,gBAAL,CAAsBtK,GAAG,CAACuK,gCAA1B,CAAhB;IACA,IAAIC,gBAAgB,GAAG,KAAKF,gBAAL,CAAsBtK,GAAG,CAACyK,qCAA1B,CAAvB;IACAJ,SAAS,CAAC9I,WAAV,CAAsBiJ,gBAAtB;IACAA,gBAAgB,CAACjJ,WAAjB,CAA6B,KAAKmJ,aAAL,CAAmB1K,GAAG,CAAC2K,aAAvB,CAA7B;IACAH,gBAAgB,CAACtG,aAAjB,CAA+B,MAAMlE,GAAG,CAAC2K,aAAzC,EAAwDxG,YAAxD,CAAqE,OAArE,EAA8E,KAAKzD,MAAL,CAAYkK,YAAZ,CAAyBC,OAAvG;IACAL,gBAAgB,CAACjJ,WAAjB,CAA6B,KAAKmJ,aAAL,CAAmB1K,GAAG,CAAC8K,cAAvB,CAA7B;IACAN,gBAAgB,CAACtG,aAAjB,CAA+B,MAAMlE,GAAG,CAAC8K,cAAzC,EAAyD3G,YAAzD,CAAsE,OAAtE,EAA+E,KAAKzD,MAAL,CAAYkK,YAAZ,CAAyBG,QAAxG;IACA,IAAIC,mBAAmB,GAAG,KAAKV,gBAAL,CAAsBtK,GAAG,CAACiL,gCAA1B,CAA1B;IACAZ,SAAS,CAAC9I,WAAV,CAAsByJ,mBAAtB;IACAA,mBAAmB,CAACzJ,WAApB,CAAgC,KAAK2J,oBAAL,CAA0BlL,GAAG,CAACiI,wBAA9B,EAAwD,KAAKkD,YAAL,CAAkBvI,IAAlB,CAAuB,IAAvB,CAAxD,CAAhC;IACAoI,mBAAmB,CAAC9G,aAApB,CAAkC,MAAMlE,GAAG,CAACiI,wBAA5C,EAAsE9D,YAAtE,CAAmF,OAAnF,EAA4F,KAAKzD,MAAL,CAAYkK,YAAZ,CAAyB5J,SAArH;IACAgK,mBAAmB,CAACzJ,WAApB,CAAgC,KAAK2J,oBAAL,CAA0BlL,GAAG,CAACmI,sBAA9B,CAAhC;IACA6C,mBAAmB,CAAC9G,aAApB,CAAkC,MAAMlE,GAAG,CAACmI,sBAA5C,EAAoEhE,YAApE,CAAiF,OAAjF,EAA0F,KAAKzD,MAAL,CAAYkK,YAAZ,CAAyB1J,OAAnH;IACA,IAAIkK,iBAAiB,GAAG,KAAKd,gBAAL,CAAsBtK,GAAG,CAACqL,gCAA1B,CAAxB;IACAhB,SAAS,CAAC9I,WAAV,CAAsB6J,iBAAtB;IACAA,iBAAiB,CAAC7J,WAAlB,CAA8B,KAAK+J,cAAL,CAAoBtL,GAAG,CAACuL,0BAAxB,CAA9B;IACAH,iBAAiB,CAAC7J,WAAlB,CAA8B,KAAK+J,cAAL,CAAoBtL,GAAG,CAACwL,eAAxB,CAA9B;IACA,IAAIC,iBAAiB,GAAG,KAAKnB,gBAAL,CAAsBtK,GAAG,CAAC0L,gCAA1B,CAAxB;IACArB,SAAS,CAAC9I,WAAV,CAAsBkK,iBAAtB;IACAA,iBAAiB,CAAClK,WAAlB,CAA8B,KAAKoK,cAAL,CAAoB3L,GAAG,CAAC4L,2BAAxB,CAA9B;IACAH,iBAAiB,CAAClK,WAAlB,CAA8B,KAAKoK,cAAL,CAAoB3L,GAAG,CAAC6L,yBAAxB,CAA9B;IACA,IAAIC,eAAe,GAAG,KAAKxB,gBAAL,CAAsBtK,GAAG,CAAC+L,6BAA1B,CAAtB;IACA1B,SAAS,CAAC9I,WAAV,CAAsBuK,eAAtB;IACA,IAAIE,SAAS,GAAG,KAAKV,cAAL,CAAoBtL,GAAG,CAACiM,yBAAxB,CAAhB;IACA,IAAIC,mBAAmB,GAAG1N,aAAa,CAAC,MAAD,EAAS;MAAE0K,SAAS,EAAE9I;IAAb,CAAT,CAAvC;IACA,IAAI+L,MAAM,GAAG3N,aAAa,CAAC,QAAD,EAAW;MACjC0K,SAAS,EAAE5I,mBADsB;MAEjCgJ,KAAK,EAAE;QAAEnE,IAAI,EAAE,QAAR;QAAkB,SAAS,KAAKxE,IAAL,CAAUsC,WAAV,CAAsB,gBAAtB;MAA3B;IAF0B,CAAX,CAA1B;IAIA,KAAKmJ,SAAL,GAAiB,IAAI5M,MAAJ,CAAW;MAAE6M,OAAO,EAAEhM,wBAAwB,GAAG,UAAtC;MAAkDwB,QAAQ,EAAE,cAAc,KAAKnB,MAAL,CAAYmB;IAAtF,CAAX,CAAjB;IACAqK,mBAAmB,CAAC3K,WAApB,CAAgC4K,MAAhC;IACA,KAAKC,SAAL,CAAeE,QAAf,CAAwBH,MAAxB;IACAH,SAAS,CAACzK,WAAV,CAAsB2K,mBAAtB;IACAJ,eAAe,CAACvK,WAAhB,CAA4ByK,SAA5B;;IACA,IAAI,KAAKtL,MAAL,CAAYuB,UAAhB,EAA4B;MACxBrD,YAAY,CAACyF,GAAb,CAAiB8H,MAAjB,EAAyB,OAAzB,EAAkC,KAAKI,oBAAvC,EAA6D,IAA7D;IACH,CAFD,MAGK;MACD,KAAKzH,sBAAL,CAA4BuF,SAA5B;IACH;;IACD,IAAI,KAAK3J,MAAL,CAAY8L,kBAAZ,CAA+BzC,MAA/B,GAAwC,CAA5C,EAA+C;MAC3C,IAAI0C,iBAAiB,GAAG,KAAKnC,gBAAL,CAAsBtK,GAAG,CAAC0M,gCAA1B,CAAxB;;MACA,KAAK,IAAI7C,EAAE,GAAG,CAAT,EAAY8C,EAAE,GAAG,KAAKjM,MAAL,CAAYkM,YAAZ,CAAyBJ,kBAA/C,EAAmE3C,EAAE,GAAG8C,EAAE,CAAC5C,MAA3E,EAAmFF,EAAE,EAArF,EAAyF;QACrF,IAAIgD,QAAQ,GAAGF,EAAE,CAAC9C,EAAD,CAAjB;QACA4C,iBAAiB,CAAClL,WAAlB,CAA8B,KAAKuL,qBAAL,CAA2BD,QAA3B,CAA9B;MACH;;MACDxC,SAAS,CAAC9I,WAAV,CAAsBkL,iBAAtB;IACH;;IACD,IAAIM,WAAW,GAAG,KAAKzC,gBAAL,CAAsBtK,GAAG,CAACgN,iBAAJ,GAAwB,MAA9C,CAAlB;IACAD,WAAW,CAACxL,WAAZ,CAAwB,KAAKmJ,aAAL,CAAmB1K,GAAG,CAACgN,iBAAvB,CAAxB;IACAD,WAAW,CAAC7I,aAAZ,CAA0B,MAAMlE,GAAG,CAACgN,iBAApC,EAAuD7I,YAAvD,CAAoE,OAApE,EAA6E,KAAKzD,MAAL,CAAYkK,YAAZ,CAAyBmC,WAAtG;IACA1C,SAAS,CAAC9I,WAAV,CAAsBwL,WAAtB;IACA,IAAIE,MAAM,GAAGzO,aAAa,CAAC,QAAD,EAAW;MAAE8K,KAAK,EAAE;QAAEnE,IAAI,EAAE,QAAR;QAAkB+H,KAAK,EAAE,QAAzB;QAAmCC,KAAK,EAAE;MAA1C;IAAT,CAAX,CAA1B;IACA9C,SAAS,CAAC9I,WAAV,CAAsB0L,MAAtB;IACA,OAAO5C,SAAP;EACH,CAxDD;;EAyDA5J,WAAW,CAACW,SAAZ,CAAsB0D,sBAAtB,GAA+C,UAAUuF,SAAV,EAAqB;IAChE,IAAIxF,gBAAgB,GAAG,KAAKyF,gBAAL,EAAvB;IACAD,SAAS,CAAC9I,WAAV,CAAsBsD,gBAAtB;IACA,KAAKA,gBAAL,GAAwB,KAAKuI,sBAAL,EAAxB;IACA,KAAKvI,gBAAL,CAAsByH,QAAtB,CAA+BzH,gBAA/B;IACA,KAAKwI,wBAAL;EACH,CAND;;EAOA5M,WAAW,CAACW,SAAZ,CAAsBkJ,gBAAtB,GAAyC,UAAUpB,SAAV,EAAqB;IAC1D,OAAO1K,aAAa,CAAC,KAAD,EAAQ;MAAE0K,SAAS,EAAEA;IAAb,CAAR,CAApB;EACH,CAFD;;EAGAzI,WAAW,CAACW,SAAZ,CAAsBkM,kBAAtB,GAA2C,UAAUpE,SAAV,EAAqBqE,SAArB,EAAgCpI,IAAhC,EAAsC;IAC7E,OAAO3G,aAAa,CAAC2G,IAAI,IAAI,OAAT,EAAkB;MAClC+D,SAAS,EAAEA,SADuB;MACZI,KAAK,EAAE;QACzBnE,IAAI,EAAE,MADmB;QACXqI,IAAI,EAAED,SADK;QACMnF,KAAK,EAAE,EADb;QACiB9G,EAAE,EAAEiM,SADrB;QAEzBL,KAAK,EAAI,KAAKvM,IAAL,CAAUsC,WAAV,CAAsBsK,SAAS,CAACE,MAAV,CAAiB,CAAjB,EAAoBC,WAApB,KAAoCH,SAAS,CAAC7D,KAAV,CAAgB,CAAhB,CAA1D,CAAD,KAAoF,EAArF,GACH6D,SADG,GACS,KAAK5M,IAAL,CAAUsC,WAAV,CAAsBsK,SAAS,CAACE,MAAV,CAAiB,CAAjB,EAAoBC,WAApB,KAAoCH,SAAS,CAAC7D,KAAV,CAAgB,CAAhB,CAA1D;MAHS;IADK,CAAlB,CAApB;EAOH,CARD;;EASAjJ,WAAW,CAACW,SAAZ,CAAsBkG,eAAtB,GAAwC,YAAY;IAChD,OAAO,KAAK5G,MAAL,CAAY4F,iBAAZ,CAA8BqH,SAA9B,CAAwCC,QAAxC,GAAmD,KAAKlN,MAAL,CAAY4F,iBAAZ,CAA8BqH,SAA9B,CAAwCE,SAAlG;EACH,CAFD;;EAGApN,WAAW,CAACW,SAAZ,CAAsB8J,oBAAtB,GAA6C,UAAU9C,KAAV,EAAiB0F,WAAjB,EAA8B;IACvE,IAAIC,WAAW,GAAG,KAAKzD,gBAAL,CAAsBlC,KAAK,GAAG,YAA9B,CAAlB;IACA,IAAImF,SAAS,GAAG,KAAKS,YAAL,CAAkB5F,KAAlB,CAAhB;IACA,IAAI6F,aAAa,GAAG,KAAKX,kBAAL,CAAwBlF,KAAK,GAAG,GAAR,GAAcjI,WAAtC,EAAmDoN,SAAnD,CAApB;IACAQ,WAAW,CAACxM,WAAZ,CAAwB0M,aAAxB;IACA,IAAIC,cAAc,GAAG,IAAIrO,cAAJ,CAAmB;MACpCsO,MAAM,EAAEL,WAD4B;MAEpCzH,cAAc,EAAE,KAAK3F,MAAL,CAAY4F,iBAAZ,CAA8BD,cAFV;MAGpC+H,YAAY,EAAE,KAAK1N,MAAL,CAAY0N,YAHU;MAIpCC,GAAG,EAAE,KAAK3N,MAAL,CAAY4N,OAJmB;MAKpCC,GAAG,EAAE,IAAItN,IAAJ,CAAS,IAAIA,IAAJ,CAAS,CAAC,KAAKP,MAAL,CAAY8N,OAAtB,EAA+BC,QAA/B,CAAwC,EAAxC,EAA4C,EAA5C,EAAgD,EAAhD,CAAT,CAL+B;MAMpC5M,QAAQ,EAAE,KAAKnB,MAAL,CAAYmB,QANc;MAOpCE,SAAS,EAAE,KAAKrB,MAAL,CAAYqB,SAPa;MAQpC2M,MAAM,EAAE,KAAKhO,MAAL,CAAYgO,MARgB;MASpCC,cAAc,EAAE,QAToB;MAUpCC,UAAU,EAAE,KAAKlO,MAAL,CAAY4F,iBAAZ,CAA8BsI,UAVN;MAWpCC,MAAM,EAAE,CAACpQ,iBAAiB,CAAC,KAAKiC,MAAL,CAAYoO,UAAb,CAAjB,GACL,KAAKC,SAAL,CAAe,aAAf,CADK,GAC2B,KAAKrO,MAAL,CAAYoO,UADxC,IACsD,GADtD,GAC4D,KAAKpO,MAAL,CAAY4F,iBAAZ,CAA8BsI,UAZ9D;MAapCI,WAAW,EAAE,KAAKC,aAAL,CAAmB7G,KAAnB,CAbuB;MAcpC8G,IAAI,EAAE,KAAK5H,eAAL,EAd8B;MAepC7E,KAAK,EAAE;IAf6B,CAAnB,CAArB;IAiBAyL,cAAc,CAAC5B,QAAf,CAAwB2B,aAAxB;IACA,OAAOF,WAAP;EACH,CAxBD;;EAyBAtN,WAAW,CAACW,SAAZ,CAAsB2G,qBAAtB,GAA8C,UAAUV,QAAV,EAAoB;IAC9D,IAAI8H,eAAe,GAAG,MAAMnP,GAAG,CAACiI,wBAAV,GAAqC,IAArC,GAA4CjI,GAAG,CAACmI,sBAAtE;IACA,IAAIiH,eAAe,GAAG,GAAG1F,KAAH,CAASC,IAAT,CAAc,KAAKtI,OAAL,CAAagO,gBAAb,CAA8BF,eAA9B,CAAd,CAAtB;;IACA,KAAK,IAAItF,EAAE,GAAG,CAAT,EAAYyF,iBAAiB,GAAGF,eAArC,EAAsDvF,EAAE,GAAGyF,iBAAiB,CAACvF,MAA7E,EAAqFF,EAAE,EAAvF,EAA2F;MACvF,IAAIxI,OAAO,GAAGiO,iBAAiB,CAACzF,EAAD,CAA/B;MACA,IAAI0F,QAAQ,GAAGlO,OAAO,CAACmO,aAAR,CAAsB,CAAtB,CAAf;MACAD,QAAQ,CAAClJ,cAAT,GAA0B,KAAK3F,MAAL,CAAY4F,iBAAZ,CAA8BD,cAAxD;MACAkJ,QAAQ,CAACX,UAAT,GAAsB,KAAKlO,MAAL,CAAY4F,iBAAZ,CAA8BsI,UAApD;MACAW,QAAQ,CAACL,IAAT,GAAgB7H,QAAQ,IAAI,KAAKC,eAAL,EAA5B;MACAiI,QAAQ,CAAC7I,QAAT;IACH;EACJ,CAXD;;EAYAjG,WAAW,CAACW,SAAZ,CAAsB+J,YAAtB,GAAqC,YAAY;IAC7C,IAAInD,QAAQ,GAAG,KAAKR,WAAL,CAAiBxH,GAAG,CAACiI,wBAArB,CAAf;;IACA,IAAID,QAAQ,CAAC3G,OAAT,CAAiB+C,aAAjB,CAA+BqL,SAA/B,CAAyCC,QAAzC,CAAkD,eAAlD,CAAJ,EAAwE;MACpE,IAAIxH,MAAM,GAAG,KAAKV,WAAL,CAAiBxH,GAAG,CAACmI,sBAArB,CAAb;MACA,IAAId,QAAQ,GAAG,CAAf;;MACA,IAAI,KAAKxB,eAAT,EAA0B;QACtBwB,QAAQ,GAAGnH,IAAI,CAACoI,aAAL,GAAqB,KAAKjB,QAArC;QACA,KAAKtG,eAAL,CAAqBC,SAArB,GAAiCgH,QAAQ,CAACI,KAA1C;MACH,CAHD,MAIK;QACDf,QAAQ,GAAG,KAAKH,SAAL,CAAe,KAAKrG,MAAL,CAAYK,OAA3B,EAAoCmH,OAApC,KAAgD,KAAKnB,SAAL,CAAe,KAAKrG,MAAL,CAAYG,SAA3B,EAAsCqH,OAAtC,EAA3D;MACH;;MACD,IAAIsH,OAAO,GAAIlR,iBAAiB,CAACuJ,QAAQ,CAACI,KAAV,CAAlB,GAAsC,IAAtC,GAA6C,IAAInH,IAAJ,CAAS+G,QAAQ,CAACI,KAAT,CAAeC,OAAf,KAA2BhB,QAApC,CAA3D;;MACA,IAAI,KAAKxB,eAAT,EAA0B;QACtB,KAAK9E,eAAL,CAAqBG,OAArB,GAA+ByO,OAA/B;MACH;;MACDzH,MAAM,CAACE,KAAP,GAAeuH,OAAf;MACAzH,MAAM,CAACxB,QAAP;IACH;;IACD,IAAI,KAAK7B,gBAAT,EAA2B;MACvB,KAAKA,gBAAL,CAAsB+K,mBAAtB,CAA0C,KAAK7O,eAAL,CAAqBC,SAA/D;IACH;EACJ,CAtBD;;EAuBAP,WAAW,CAACW,SAAZ,CAAsB0L,qBAAtB,GAA8C,UAAU+C,YAAV,EAAwB;IAClE,IAAItC,SAAS,GAAGsC,YAAY,CAACC,KAA7B;IACA,IAAI1H,KAAK,GAAG,OAAOmF,SAAnB;IACA,IAAIwC,UAAU,GAAGF,YAAY,CAAC3C,KAA9B;IACA,IAAI8C,WAAW,GAAG,KAAK1F,gBAAL,CAAsBlC,KAAK,GAAG,YAAR,GAAuB,GAAvB,GAA6B,aAAnD,CAAlB;IACA,IAAI6H,aAAa,GAAG,KAAK3C,kBAAL,CAAwBlF,KAAK,GAAG,GAAR,GAAcjI,WAAtC,EAAmDoN,SAAnD,CAApB;IACAyC,WAAW,CAACzO,WAAZ,CAAwB0O,aAAxB;IACA,IAAIC,gBAAgB,GAAG,8FACnBL,YAAY,CAACM,UADM,GACO,0CADP,GACoDN,YAAY,CAACO,SADjE,GAC6E,eADpG;;IAEA,IAAIP,YAAY,CAACQ,aAAjB,EAAgC;MAC5B,IAAIC,OAAO,GAAG,IAAI3Q,WAAJ,CAAgB;QAC1BkC,QAAQ,EAAE,KAAKnB,MAAL,CAAYmB,QAAZ,IAAwB,EADR;QAE1B0O,UAAU,EAAEV,YAAY,CAACU,UAFC;QAG1BpC,MAAM,EAAE,KAAKqC,2BAAL,CAAiC5N,IAAjC,CAAsC,IAAtC,CAHkB;QAI1B6N,YAAY,EAAEP,gBAJY;QAK1BrP,MAAM,EAAE;UACJ6P,IAAI,EAAEb,YAAY,CAACO,SADf;UAEJhI,KAAK,EAAEyH,YAAY,CAACc;QAFhB,CALkB;QAS1BC,cAAc,EAAE;UAAE,SAASb,UAAX;UAAuB,QAAQxC;QAA/B,CATU;QAU1BoB,cAAc,EAAE,QAVU;QAW1BK,WAAW,EAAEe,UAXa;QAY1Bc,WAAW,EAAE,OAZa;QAa1BC,UAAU,EAAE,OAbc;QAc1BC,IAAI,EAAE;MAdoB,CAAhB,CAAd;MAgBAT,OAAO,CAAChE,QAAR,CAAiB2D,aAAjB;IACH,CAlBD,MAmBK;MACD,IAAIe,YAAY,GAAG,IAAItR,YAAJ,CAAiB;QAChCmC,QAAQ,EAAE,KAAKnB,MAAL,CAAYmB,QAAZ,IAAwB,EADF;QAEhCsM,MAAM,EAAE,KAAK8C,wBAAL,CAA8BrO,IAA9B,CAAmC,IAAnC,CAFwB;QAGhC2N,UAAU,EAAEV,YAAY,CAACU,UAHO;QAIhCxO,SAAS,EAAE,KAAKrB,MAAL,CAAYqB,SAJS;QAKhClB,MAAM,EAAE;UACJ6P,IAAI,EAAEb,YAAY,CAACO,SADf;UAEJhI,KAAK,EAAEyH,YAAY,CAACc;QAFhB,CALwB;QAShCC,cAAc,EAAE;UAAE,SAASb,UAAX;UAAuB,QAAQxC;QAA/B,CATgB;QAUhCoB,cAAc,EAAE,QAVgB;QAWhCK,WAAW,EAAEe,UAXmB;QAYhCc,WAAW,EAAE,OAZmB;QAahCC,UAAU,EAAE,OAboB;QAchCL,YAAY,EAAEP;MAdkB,CAAjB,CAAnB;MAgBAc,YAAY,CAAC1E,QAAb,CAAsB2D,aAAtB;IACH;;IACD,OAAOD,WAAP;EACH,CAhDD;;EAiDAvP,WAAW,CAACW,SAAZ,CAAsBuK,cAAtB,GAAuC,UAAUvD,KAAV,EAAiB;IACpD,IAAIpB,KAAK,GAAG,IAAZ;;IACA,IAAIuG,SAAS,GAAG,KAAKS,YAAL,CAAkB5F,KAAlB,CAAhB;IACA,IAAI8I,WAAW,GAAG,KAAK5G,gBAAL,CAAsBlC,KAAK,GAAG,YAA9B,CAAlB;IACA,IAAI+I,aAAa,GAAG,KAAK7D,kBAAL,CAAwBlF,KAAK,GAAG,GAAR,GAAcjI,WAAtC,EAAmDoN,SAAnD,CAApB;IACA2D,WAAW,CAAC3P,WAAZ,CAAwB4P,aAAxB;IACA,IAAIH,YAAY,GAAG,IAAItR,YAAJ,CAAiB;MAChC0R,cAAc,EAAE,IADgB;MAEhCjD,MAAM,EAAE,KAAKkD,gBAAL,CAAsBzO,IAAtB,CAA2B,IAA3B,CAFwB;MAGhCf,QAAQ,EAAE,KAAKnB,MAAL,CAAYmB,QAAZ,IAAwB,EAHF;MAIhC0O,UAAU,EAAE,KAAK7P,MAAL,CAAY4Q,kBAJQ;MAKhCvP,SAAS,EAAE,KAAKrB,MAAL,CAAYqB,SALS;MAMhClB,MAAM,EAAE;QAAE6P,IAAI,EAAE,MAAR;QAAgBtI,KAAK,EAAE;MAAvB,CANwB;MAOhCmJ,oBAAoB,EAAE,KAAK7Q,MAAL,CAAYE,SAAZ,CAAsBqC,WAAtB,CAAkC,gBAAlC,CAPU;MAQhCuO,iBAAiB,EAAE,KAAK9Q,MAAL,CAAYE,SAAZ,CAAsBqC,WAAtB,CAAkC,WAAlC,CARa;MAShCwO,SAAS,EAAE,UAAU9K,CAAV,EAAa;QACpB,IAAI+K,KAAK,GAAG,IAAIrS,KAAJ,EAAZ;QACAqS,KAAK,GAAI/K,CAAC,CAAC+J,IAAF,KAAW,EAAZ,GAAkBgB,KAAK,CAACC,KAAN,CAAY,MAAZ,EAAoB,UAApB,EAAgChL,CAAC,CAAC+J,IAAlC,EAAwC,IAAxC,CAAlB,GAAkEgB,KAA1E;QACA/K,CAAC,CAACiL,UAAF,CAAa5K,KAAK,CAACtG,MAAN,CAAa4Q,kBAA1B,EAA8CI,KAA9C;MACH,CAb+B;MAchCd,cAAc,EAAE;QAAE,SAAS,KAAK3B,aAAL,CAAmB7G,KAAnB,CAAX;QAAsC,QAAQmF;MAA9C,CAdgB;MAehCoB,cAAc,EAAE,QAfgB;MAgBhCK,WAAW,EAAE,KAAKC,aAAL,CAAmB7G,KAAnB,CAhBmB;MAiBhCyI,WAAW,EAAE;IAjBmB,CAAjB,CAAnB;IAmBAG,YAAY,CAAC1E,QAAb,CAAsB6E,aAAtB;IACA,OAAOD,WAAP;EACH,CA3BD;;EA4BAzQ,WAAW,CAACW,SAAZ,CAAsBoP,2BAAtB,GAAoD,UAAUzJ,IAAV,EAAgB;IAChE,IAAI,CAACA,IAAI,CAACqB,KAAN,IAAe,CAAC,KAAK1H,MAAL,CAAY4F,iBAAZ,CAA8BuL,KAA9B,CAAoCC,SAApD,IAAiE,KAAKpR,MAAL,CAAY8L,kBAAZ,CAA+BzC,MAA/B,IAAyC,CAA9G,EAAiH;MAC7G;IACH;;IACD,IAAIyC,kBAAkB,GAAG,KAAK9L,MAAL,CAAYkM,YAAZ,CAAyBJ,kBAAlD;IACA,IAAIe,SAAS,GAAGxG,IAAI,CAAC1F,OAAL,CAAa0Q,YAAb,CAA0B,MAA1B,KAAqC,KAAKC,aAAL,CAAmBjL,IAAI,CAAC1F,OAAxB,CAArD;;IACA,KAAK,IAAI4Q,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGzF,kBAAkB,CAACzC,MAAvC,EAA+CkI,CAAC,EAAhD,EAAoD;MAChD,IAAIzF,kBAAkB,CAACyF,CAAD,CAAlB,CAAsBnC,KAAtB,KAAgCvC,SAAhC,IAA6C0E,CAAC,GAAGzF,kBAAkB,CAACzC,MAAnB,GAA4B,CAAjF,EAAoF;QAChF,IAAImI,SAAS,GAAG,KAAKC,cAAL,CAAoBF,CAApB,CAAhB;QACA,IAAIG,UAAU,GAAG,EAAjB;;QACA,IAAIC,OAAO,GAAG,UAAUC,CAAV,EAAa;UACvB,IAAIC,aAAa,GAAG/F,kBAAkB,CAACyF,CAAC,GAAG,CAAL,CAAtC,CADuB,CAEvB;;UACA,IAAIO,MAAM,GAAGD,aAAa,CAAChC,UAAd,CAAyBiC,MAAzB,CAAgC,UAAUtN,IAAV,EAAgB;YACzD,OAAOA,IAAI,CAACqN,aAAa,CAACE,YAAf,CAAJ,KAAqC1L,IAAI,CAACqB,KAAL,CAAWkK,CAAX,CAA5C;UACH,CAFY,EAEV,CAFU,CAAb;UAGA,IAAII,OAAO,GAAGF,MAAM,CAAChG,kBAAkB,CAACyF,CAAC,GAAG,CAAL,CAAlB,CAA0BQ,YAA3B,CAApB;UACA,IAAIE,SAAS,GAAGC,MAAM,CAACC,gBAAP,CAAwBZ,CAAxB,EAA2BS,OAA3B,CAAhB;UACAN,UAAU,GAAGA,UAAU,CAACU,MAAX,CAAkBH,SAAlB,CAAb;QACH,CATD;;QAUA,IAAIC,MAAM,GAAG,IAAb;;QACA,KAAK,IAAIN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGvL,IAAI,CAACqB,KAAL,CAAW2B,MAA/B,EAAuCuI,CAAC,EAAxC,EAA4C;UACxCD,OAAO,CAACC,CAAD,CAAP;QACH;;QACDJ,SAAS,CAAC3B,UAAV,GAAuB6B,UAAvB;QACAF,SAAS,CAACxL,QAAV;MACH;IACJ;EACJ,CA5BD;;EA6BAjG,WAAW,CAACW,SAAZ,CAAsB+Q,cAAtB,GAAuC,UAAUY,KAAV,EAAiB;IACpD,IAAIlD,YAAY,GAAG,KAAKnP,MAAL,CAAYkM,YAAZ,CAAyBJ,kBAAzB,CAA4CuG,KAAK,GAAG,CAApD,CAAnB;IACA,IAAIb,SAAS,GAAG,KAAK7Q,OAAL,CAAa6C,aAAb,CAA2B,QAAQ2L,YAAY,CAACC,KAAhD,EACZN,aADY,CACE,CADF,CAAhB;IAEA,OAAO0C,SAAP;EACH,CALD;;EAMAzR,WAAW,CAACW,SAAZ,CAAsB6P,wBAAtB,GAAiD,UAAUlK,IAAV,EAAgB;IAC7D,IAAI,CAACA,IAAI,CAACqB,KAAN,IAAe,KAAK1H,MAAL,CAAY8L,kBAAZ,CAA+BzC,MAA/B,IAAyC,CAAxD,IAA6D,CAAC,KAAKrJ,MAAL,CAAY4F,iBAAZ,CAA8BuL,KAA9B,CAAoCC,SAAtG,EAAiH;MAC7G;IACH;;IACD,IAAIvE,SAAS,GAAGxG,IAAI,CAAC1F,OAAL,CAAa0Q,YAAb,CAA0B,MAA1B,KAAqC,KAAKC,aAAL,CAAmBjL,IAAI,CAAC1F,OAAxB,CAArD;IACA,IAAImL,kBAAkB,GAAG,KAAK9L,MAAL,CAAYkM,YAAZ,CAAyBJ,kBAAlD;;IACA,KAAK,IAAIyF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGzF,kBAAkB,CAACzC,MAAvC,EAA+CkI,CAAC,EAAhD,EAAoD;MAChD,IAAKA,CAAC,GAAGzF,kBAAkB,CAACzC,MAAnB,GAA4B,CAAjC,IAAuCyC,kBAAkB,CAACyF,CAAD,CAAlB,CAAsBnC,KAAtB,KAAgCvC,SAA3E,EAAsF;QAClF,IAAIyF,MAAM,GAAG,KAAKb,cAAL,CAAoBF,CAApB,CAAb;QACA,IAAIS,OAAO,GAAG3L,IAAI,CAACkM,QAAL,CAAczG,kBAAkB,CAACyF,CAAD,CAAlB,CAAsBtB,OAApC,CAAd;QACAqC,MAAM,CAACzC,UAAP,GAAoB,KAAKsC,gBAAL,CAAsBZ,CAAtB,EAAyBS,OAAzB,CAApB;QACAM,MAAM,CAACtM,QAAP;QACA,IAAIwM,QAAQ,GAAGF,MAAM,CAACzC,UAAP,CAAkB,CAAlB,EAAqB/D,kBAAkB,CAACyF,CAAC,GAAG,CAAL,CAAlB,CAA0BtB,OAA/C,CAAf;QACAqC,MAAM,CAAC5K,KAAP,GAAgBoE,kBAAkB,CAACyF,CAAC,GAAG,CAAL,CAAlB,CAA0B5B,aAA3B,GAA4C,CAAC6C,QAAD,CAA5C,GAAyDA,QAAxE;QACAF,MAAM,CAACtM,QAAP;MACH;IACJ;EACJ,CAjBD;;EAkBAjG,WAAW,CAACW,SAAZ,CAAsByR,gBAAtB,GAAyC,UAAUE,KAAV,EAAiBL,OAAjB,EAA0B;IAC/D,IAAI7C,YAAY,GAAG,KAAKnP,MAAL,CAAYkM,YAAZ,CAAyBJ,kBAAzB,CAA4CuG,KAAK,GAAG,CAApD,CAAnB;IACA,OAAOlD,YAAY,CAACU,UAAb,CAAwBiC,MAAxB,CAA+B,UAAUtN,IAAV,EAAgB;MAClD,OAAOA,IAAI,CAAC2K,YAAY,CAAC4C,YAAd,CAAJ,KAAoCC,OAA3C;IACH,CAFM,CAAP;EAGH,CALD;;EAMAjS,WAAW,CAACW,SAAZ,CAAsBiQ,gBAAtB,GAAyC,UAAUtK,IAAV,EAAgB;IACrD,IAAIwG,SAAS,GAAGxG,IAAI,CAAC1F,OAAL,CAAa0Q,YAAb,CAA0B,MAA1B,KAAqC,KAAKC,aAAL,CAAmBjL,IAAI,CAAC1F,OAAxB,CAArD;;IACA,IAAIkM,SAAS,KAAK,KAAK7M,MAAL,CAAYI,WAAZ,CAAwBqS,aAA1C,EAAyD;MACrD,IAAIC,gBAAgB,GAAG,KAAK5L,WAAL,CAAiBxH,GAAG,CAAC4L,2BAArB,CAAvB;MACA,IAAIyH,cAAc,GAAG,KAAK7L,WAAL,CAAiBxH,GAAG,CAAC6L,yBAArB,CAArB;MACAwH,cAAc,CAACjL,KAAf,GAAuBgL,gBAAgB,CAAChL,KAAxC;MACAiL,cAAc,CAAC3M,QAAf;IACH;EACJ,CARD;;EASAjG,WAAW,CAACW,SAAZ,CAAsBkK,cAAtB,GAAuC,UAAUlD,KAAV,EAAiB;IACpD,IAAIkL,WAAW,GAAG,KAAKhJ,gBAAL,CAAsBlC,KAAK,GAAG,YAA9B,CAAlB;IACA,IAAImF,SAAS,GAAG,KAAKS,YAAL,CAAkB5F,KAAlB,CAAhB;IACA,IAAImL,aAAa,GAAG,KAAKjG,kBAAL,CAAwBlF,KAAK,GAAG,GAAR,GAAcjI,WAAtC,EAAmDoN,SAAnD,CAApB;IACA+F,WAAW,CAAC/R,WAAZ,CAAwBgS,aAAxB;IACA,IAAIC,QAAQ,GAAG,IAAIjU,QAAJ,CAAa;MACxB4O,MAAM,EAAE,KAAKsF,QAAL,CAAc7Q,IAAd,CAAmB,IAAnB,CADgB;MAExBf,QAAQ,EAAEuG,KAAK,GAAG,GAAR,GAAc,KAAK1H,MAAL,CAAYmB,QAFZ;MAGxBE,SAAS,EAAE,KAAKrB,MAAL,CAAYqB,SAHC;MAIxB2R,KAAK,EAAE,KAAKzE,aAAL,CAAmB7G,KAAnB;IAJiB,CAAb,CAAf;IAMAoL,QAAQ,CAAClH,QAAT,CAAkBiH,aAAlB;IACAA,aAAa,CAACpP,YAAd,CAA2B,MAA3B,EAAmCoJ,SAAnC;;IACA,IAAIA,SAAS,KAAK,QAAlB,EAA4B;MACxB,KAAKoG,YAAL,GAAoBH,QAApB;IACH;;IACD,OAAOF,WAAP;EACH,CAjBD;;EAkBA7S,WAAW,CAACW,SAAZ,CAAsBsJ,aAAtB,GAAsC,UAAUtC,KAAV,EAAiB;IACnD,IAAIwL,UAAU,GAAG,KAAKtJ,gBAAL,CAAsBlC,KAAK,GAAG,YAA9B,CAAjB;IACA,IAAImF,SAAS,GAAG,KAAKS,YAAL,CAAkB5F,KAAlB,CAAhB;IACA,IAAIyL,WAAW,GAAIzL,KAAK,KAAKpI,GAAG,CAACgN,iBAAf,GAAoC,UAApC,GAAiD,OAAnE;IACA,IAAI8G,YAAY,GAAG,KAAKxG,kBAAL,CAAwBlF,KAAK,GAAG,GAAR,GAAcjI,WAAtC,EAAmDoN,SAAnD,EAA8DsG,WAA9D,CAAnB;IACAD,UAAU,CAACrS,WAAX,CAAuBuS,YAAvB;IACAlU,KAAK,CAACmU,WAAN,CAAkB;MACd1S,OAAO,EAAEyS,YADK;MAEdnF,cAAc,EAAE,QAFF;MAGdqF,UAAU,EAAE;QACRjS,SAAS,EAAE,KAAKrB,MAAL,CAAYqB,SADf;QAERiN,WAAW,EAAE,KAAKC,aAAL,CAAmB7G,KAAnB;MAFL;IAHE,CAAlB;IAQA,OAAOwL,UAAP;EACH,CAfD;;EAgBAnT,WAAW,CAACW,SAAZ,CAAsB4M,YAAtB,GAAqC,UAAUR,IAAV,EAAgB;IACjD,IAAID,SAAS,GAAG,EAAhB;;IACA,QAAQC,IAAR;MACI,KAAKxN,GAAG,CAAC2K,aAAT;QACI4C,SAAS,GAAG,KAAK1M,MAAL,CAAYgK,OAAxB;QACA;;MACJ,KAAK7K,GAAG,CAAC8K,cAAT;QACIyC,SAAS,GAAG,KAAK1M,MAAL,CAAYkK,QAAxB;QACA;;MACJ,KAAK/K,GAAG,CAACiI,wBAAT;QACIsF,SAAS,GAAG,KAAK1M,MAAL,CAAYG,SAAxB;QACA;;MACJ,KAAKhB,GAAG,CAACmI,sBAAT;QACIoF,SAAS,GAAG,KAAK1M,MAAL,CAAYK,OAAxB;QACA;;MACJ,KAAKlB,GAAG,CAACgN,iBAAT;QACIO,SAAS,GAAG,KAAK1M,MAAL,CAAYkM,WAAxB;QACA;;MACJ,KAAK/M,GAAG,CAACuL,0BAAT;QACIgC,SAAS,GAAG,KAAK1M,MAAL,CAAYoF,QAAxB;QACA;;MACJ,KAAKjG,GAAG,CAAC4L,2BAAT;QACI2B,SAAS,GAAG,KAAK1M,MAAL,CAAYsS,aAAxB;QACA;;MACJ,KAAKnT,GAAG,CAAC6L,yBAAT;QACI0B,SAAS,GAAG,KAAK1M,MAAL,CAAYoT,WAAxB;QACA;;MACJ,KAAKjU,GAAG,CAACwL,eAAT;QACI+B,SAAS,GAAG,UAAZ;QACA;;MACJ,KAAKvN,GAAG,CAACiM,yBAAT;QACIsB,SAAS,GAAG,QAAZ;QACA;IA9BR;;IAgCA,OAAOA,SAAP;EACH,CAnCD;;EAoCA9M,WAAW,CAACW,SAAZ,CAAsB6N,aAAtB,GAAsC,UAAU1B,SAAV,EAAqB;IACvD,IAAI2G,SAAS,GAAG,EAAhB;;IACA,QAAQ3G,SAAR;MACI,KAAKvN,GAAG,CAAC2K,aAAT;QACIuJ,SAAS,GAAG,KAAKxT,MAAL,CAAYkK,YAAZ,CAAyBC,OAArC;QACA;;MACJ,KAAK7K,GAAG,CAAC8K,cAAT;QACIoJ,SAAS,GAAG,KAAKxT,MAAL,CAAYkK,YAAZ,CAAyBG,QAArC;QACA;;MACJ,KAAK/K,GAAG,CAACgN,iBAAT;QACIkH,SAAS,GAAG,KAAKxT,MAAL,CAAYkK,YAAZ,CAAyBmC,WAArC;QACA;;MACJ,KAAK/M,GAAG,CAACiI,wBAAT;QACIiM,SAAS,GAAG,KAAKxT,MAAL,CAAYkK,YAAZ,CAAyB5J,SAArC;QACA;;MACJ,KAAKhB,GAAG,CAACmI,sBAAT;QACI+L,SAAS,GAAG,KAAKxT,MAAL,CAAYkK,YAAZ,CAAyB1J,OAArC;QACA;;MACJ,KAAKlB,GAAG,CAAC4L,2BAAT;QACIsI,SAAS,GAAG,KAAKxT,MAAL,CAAYkK,YAAZ,CAAyBuI,aAArC;QACA;;MACJ,KAAKnT,GAAG,CAAC6L,yBAAT;QACIqI,SAAS,GAAG,KAAKxT,MAAL,CAAYkK,YAAZ,CAAyBqJ,WAArC;QACA;;MACJ,KAAKjU,GAAG,CAACiM,yBAAT;QACIiI,SAAS,GAAG,KAAKxT,MAAL,CAAYkK,YAAZ,CAAyBuJ,cAArC;QACA;;MACJ,KAAKnU,GAAG,CAACuL,0BAAT;QACI2I,SAAS,GAAG,KAAKxT,MAAL,CAAYkK,YAAZ,CAAyB3E,QAArC;QACA;;MACJ,KAAKjG,GAAG,CAACwL,eAAT;QACI0I,SAAS,GAAG,KAAKvT,IAAL,CAAUsC,WAAV,CAAsB,UAAtB,CAAZ;QACA;IA9BR;;IAgCA,OAAOiR,SAAP;EACH,CAnCD;;EAoCAzT,WAAW,CAACW,SAAZ,CAAsBqS,QAAtB,GAAiC,UAAU1M,IAAV,EAAgB;IAC7C,IAAI1E,MAAM,GAAG0E,IAAI,CAAC9G,KAAL,CAAWmU,aAAX,CAAyBlQ,aAAzB,CAAuC,OAAvC,CAAb;;IACA,IAAI7B,MAAM,CAACoN,SAAP,CAAiBC,QAAjB,CAA0B1P,GAAG,CAACuL,0BAA9B,CAAJ,EAA+D;MAC3D,KAAK8I,cAAL,CAAoBtN,IAAI,CAACuN,OAAzB;IACH,CAFD,MAGK,IAAIjS,MAAM,CAACoN,SAAP,CAAiBC,QAAjB,CAA0B1P,GAAG,CAACwL,eAA9B,CAAJ,EAAoD;MACrD,KAAK+I,mBAAL,CAAyBxN,IAAI,CAACuN,OAA9B;IACH,CAFI,MAGA,IAAIjS,MAAM,CAACoN,SAAP,CAAiBC,QAAjB,CAA0B1P,GAAG,CAACiM,yBAA9B,CAAJ,EAA8D;MAC/D,KAAKuI,cAAL,CAAoBzN,IAAI,CAACuN,OAAzB;IACH;EACJ,CAXD;;EAYA7T,WAAW,CAACW,SAAZ,CAAsBqT,kBAAtB,GAA2C,YAAY;IACnD,IAAIpT,OAAO,GAAG7C,aAAa,CAAC,KAAD,CAA3B;IACA,KAAKkW,kBAAL,GAA0B,IAAIjV,MAAJ,CAAW;MACjCuD,MAAM,EAAE,KAAKrC,IAAL,CAAUsC,WAAV,CAAsB,YAAtB,CADyB;MAEjCT,OAAO,EAAE,KAFwB;MAGjCb,OAAO,EAAE,kCAHwB;MAIjCgT,aAAa,EAAE,IAJkB;MAKjClS,KAAK,EAAE,KAL0B;MAMjCS,OAAO,EAAE,CAAC;QACFO,KAAK,EAAE,KAAKmR,gBAAL,CAAsBhS,IAAtB,CAA2B,IAA3B,CADL;QAEFO,WAAW,EAAE;UAAExB,OAAO,EAAE,KAAKhB,IAAL,CAAUsC,WAAV,CAAsB,MAAtB,CAAX;UAA0CpB,QAAQ,EAAE,QAApD;UAA8D+B,SAAS,EAAE;QAAzE;MAFX,CAAD,EAIL;QAAEH,KAAK,EAAE,KAAKoR,kBAAL,CAAwBjS,IAAxB,CAA6B,IAA7B,CAAT;QAA6CO,WAAW,EAAE;UAAEtB,QAAQ,EAAE,UAAZ;UAAwBF,OAAO,EAAE,KAAKhB,IAAL,CAAUsC,WAAV,CAAsB,QAAtB;QAAjC;MAA1D,CAJK,CANwB;MAWjCZ,MAAM,EAAE,KAAKhB,OAXoB;MAYjCI,iBAAiB,EAAE;QAAEC,MAAM,EAAE;MAAV,CAZc;MAajCK,SAAS,EAAE,KAAKrB,MAAL,CAAYqB,SAbU;MAcjCI,OAAO,EAAE,IAdwB;MAejCN,QAAQ,EAAEtB,mBAfuB;MAgBjCuU,IAAI,EAAE,KAAKC,gBAAL,CAAsBnS,IAAtB,CAA2B,IAA3B;IAhB2B,CAAX,CAA1B;IAkBA,KAAKvB,OAAL,CAAaE,WAAb,CAAyBF,OAAzB;IACA,KAAKqT,kBAAL,CAAwBpI,QAAxB,CAAiCjL,OAAjC;IACA,KAAKyD,sBAAL,CAA4B,KAAK4P,kBAAL,CAAwBrT,OAAxB,CAAgC6C,aAAhC,CAA8C,eAA9C,CAA5B;EACH,CAvBD;;EAwBAzD,WAAW,CAACW,SAAZ,CAAsBmL,oBAAtB,GAA6C,YAAY;IACrD,KAAKmI,kBAAL,CAAwBM,IAAxB;;IACA,IAAI,KAAKnQ,gBAAL,IAAyB,KAAKoQ,UAAlC,EAA8C;MAC1C,KAAKpQ,gBAAL,CAAsBqQ,iBAAtB,CAAwC,KAAKD,UAA7C;IACH;EACJ,CALD;;EAMAxU,WAAW,CAACW,SAAZ,CAAsBoT,cAAtB,GAAuC,UAAUW,KAAV,EAAiB;IACpD,IAAIA,KAAJ,EAAW;MACP,IAAI,CAAC,KAAKT,kBAAV,EAA8B;QAC1B,KAAKD,kBAAL;MACH;;MACD,KAAK5P,gBAAL,CAAsBuQ,aAAtB,CAAoC;QAAEC,SAAS,EAAE,KAAKC,eAAlB;QAAmCC,YAAY,EAAE;MAAjD,CAApC;MACA,KAAKhJ,oBAAL;IACH,CAND,MAOK;MACD,IAAI,KAAKmI,kBAAT,EAA6B;QACzB,KAAKA,kBAAL,CAAwBc,IAAxB;MACH;;MACD,KAAKP,UAAL,GAAkB,EAAlB;;MACA,IAAI,KAAKpQ,gBAAT,EAA2B;QACvB,KAAKA,gBAAL,CAAsBqQ,iBAAtB,CAAwC,KAAKD,UAA7C;QACA,KAAKQ,iBAAL,CAAuB,KAAKR,UAA5B;MACH;;MACD,IAAI5T,OAAO,GAAG,KAAKA,OAAL,CAAa6C,aAAb,CAA2B,MAAM9D,sBAAjC,CAAd;MACA1B,QAAQ,CAAC,CAAC2C,OAAD,CAAD,EAAYb,gBAAZ,CAAR;IACH;EACJ,CApBD;;EAqBAC,WAAW,CAACW,SAAZ,CAAsBwT,gBAAtB,GAAyC,YAAY;IACjD,KAAKK,UAAL,GAAkB,KAAKpQ,gBAAL,CAAsB6Q,iBAAtB,EAAlB;IACA,IAAIrU,OAAO,GAAG,KAAKA,OAAL,CAAa6C,aAAb,CAA2B,MAAM9D,sBAAjC,CAAd;;IACA,IAAI,KAAKyE,gBAAL,CAAsB6Q,iBAAtB,EAAJ,EAA+C;MAC3C1W,WAAW,CAAC,CAACqC,OAAD,CAAD,EAAYb,gBAAZ,CAAX;IACH,CAFD,MAGK;MACD9B,QAAQ,CAAC,CAAC2C,OAAD,CAAD,EAAYb,gBAAZ,CAAR;MACA,KAAKmT,YAAL,CAAkByB,aAAlB,CAAgC;QAAEd,OAAO,EAAE;MAAX,CAAhC;IACH;;IACD,KAAKmB,iBAAL,CAAuB,KAAKR,UAA5B;IACA,KAAKU,iBAAL;EACH,CAZD;;EAaAlV,WAAW,CAACW,SAAZ,CAAsBuU,iBAAtB,GAA0C,YAAY;IAClD,KAAKjB,kBAAL,CAAwBc,IAAxB;EACH,CAFD;;EAGA/U,WAAW,CAACW,SAAZ,CAAsByT,kBAAtB,GAA2C,YAAY;IACnD,KAAKc,iBAAL;;IACA,IAAI,KAAK9Q,gBAAT,EAA2B;MACvB,KAAKA,gBAAL,CAAsBqQ,iBAAtB,CAAwC,KAAKU,cAA7C;IACH;;IACD,IAAI,CAAC,KAAKA,cAAV,EAA0B;MACtB,KAAKjC,YAAL,CAAkByB,aAAlB,CAAgC;QAAEd,OAAO,EAAE;MAAX,CAAhC;IACH;EACJ,CARD;;EASA7T,WAAW,CAACW,SAAZ,CAAsB2T,gBAAtB,GAAyC,YAAY;IACjD,KAAKa,cAAL,GAAsB,KAAK/Q,gBAAL,CAAsB6Q,iBAAtB,EAAtB;EACH,CAFD;;EAGAjV,WAAW,CAACW,SAAZ,CAAsBmF,mBAAtB,GAA4C,UAAUX,QAAV,EAAoBP,UAApB,EAAgC;IACxE,IAAI,CAAC,KAAK3E,MAAL,CAAY4C,aAAZ,CAA0BO,WAA/B,EAA4C;MACxC;IACH;;IACD,KAAKxC,OAAL,CAAa6C,aAAb,CAA2B,MAAMlE,GAAG,CAACqJ,UAArC,EAAiDwM,eAAjD,CAAiE,SAAjE;IACA,KAAKxU,OAAL,CAAa6C,aAAb,CAA2B,MAAMlE,GAAG,CAAC8V,6BAArC,EAAoEC,SAApE,GAAgF,KAAKpV,IAAL,CAAUsC,WAAV,CAAsB,UAAtB,CAAhF;IACA2C,QAAQ,CAACoQ,QAAT,GAAoB,KAApB;IACA,KAAKV,eAAL,GAAuB1P,QAAQ,CAAC,KAAK/E,MAAL,CAAYG,SAAb,CAA/B;IACA,KAAKiU,UAAL,GAAkB,EAAlB;;IACA,IAAI,CAACxW,iBAAiB,CAAC,KAAKiC,MAAL,CAAY4C,aAAZ,CAA0BzC,MAA1B,CAAiCgK,OAAjC,CAAyCoL,OAA1C,CAAtB,EAA0E;MACtErQ,QAAQ,CAAC,KAAK/E,MAAL,CAAYgK,OAAb,CAAR,GAAgC,KAAKnK,MAAL,CAAY4C,aAAZ,CAA0BzC,MAA1B,CAAiCgK,OAAjC,CAAyCoL,OAAzE;IACH;;IACD,IAAI,CAACxX,iBAAiB,CAAC,KAAKiC,MAAL,CAAY4C,aAAZ,CAA0BzC,MAA1B,CAAiCkK,QAAjC,CAA0CkL,OAA3C,CAAtB,EAA2E;MACvErQ,QAAQ,CAAC,KAAK/E,MAAL,CAAYkK,QAAb,CAAR,GAAiC,KAAKrK,MAAL,CAAY4C,aAAZ,CAA0BzC,MAA1B,CAAiCkK,QAAjC,CAA0CkL,OAA3E;IACH;;IACD,IAAI,CAACxX,iBAAiB,CAAC,KAAKiC,MAAL,CAAY4C,aAAZ,CAA0BzC,MAA1B,CAAiCkM,WAAjC,CAA6CkJ,OAA9C,CAAtB,EAA8E;MAC1ErQ,QAAQ,CAAC,KAAK/E,MAAL,CAAYkM,WAAb,CAAR,GAAoC,KAAKrM,MAAL,CAAY4C,aAAZ,CAA0BzC,MAA1B,CAAiCkM,WAAjC,CAA6CkJ,OAAjF;IACH;;IACD,KAAKC,WAAL,CAAiBtQ,QAAjB;;IACA,IAAIA,QAAQ,CAAC,KAAK/E,MAAL,CAAYsT,cAAb,CAAR,IAAwC,KAAKtP,gBAAjD,EAAmE;MAC/D,KAAKA,gBAAL,CAAsBqQ,iBAAtB,CAAwCtP,QAAQ,CAAC,KAAK/E,MAAL,CAAYsT,cAAb,CAAhD,EAA8EvO,QAAQ,CAAC,KAAK/E,MAAL,CAAYG,SAAb,CAAtF;MACA,KAAKiU,UAAL,GAAkBrP,QAAQ,CAAC,KAAK/E,MAAL,CAAYsT,cAAb,CAA1B;IACH;;IACD,IAAIgC,YAAY,GAAG,KAAK9U,OAAL,CAAa6C,aAAb,CAA2B,MAAMlE,GAAG,CAACoD,kBAArC,CAAnB;;IACA,IAAI+S,YAAJ,EAAkB;MACdzX,QAAQ,CAAC,CAACyX,YAAD,CAAD,EAAiBnW,GAAG,CAACoG,aAArB,CAAR;IACH;;IACD,IAAI,KAAKvB,gBAAT,EAA2B;MACvB,KAAKA,gBAAL,CAAsBuQ,aAAtB,CAAoC;QAChCC,SAAS,EAAEzP,QAAQ,CAAC,KAAK/E,MAAL,CAAYG,SAAb,CADa;QAEhCuU,YAAY,EAAE,CAAC9W,iBAAiB,CAAC4G,UAAD,CAAlB,GAAiCA,UAAjC,GAA8C,CAAC5G,iBAAiB,CAACmH,QAAQ,CAAC,KAAK/E,MAAL,CAAYsT,cAAb,CAAT,CAAlB,GACxD,KAAKtP,gBAAL,CAAsB0Q,YADkC,GACnB;MAHT,CAApC;IAKH;;IACD,IAAI,KAAK7U,MAAL,CAAYuB,UAAZ,IAA0BxD,iBAAiB,CAAC,KAAKiC,MAAL,CAAYsE,cAAb,CAA/C,EAA6E;MACzE,IAAI3D,OAAO,GAAG,KAAKA,OAAL,CAAa6C,aAAb,CAA2B,MAAM9D,sBAAjC,CAAd;MACA1B,QAAQ,CAAC,CAAC2C,OAAD,CAAD,EAAYb,gBAAZ,CAAR;MACA,KAAKiV,iBAAL,CAAuB,KAAKR,UAA5B;IACH,CAJD,MAKK;MACD,IAAImB,UAAU,GAAG,KAAK/U,OAAL,CAAa6C,aAAb,CAA2B,MAAMlE,GAAG,CAAC2D,8BAArC,CAAjB;MACA,KAAK0S,aAAL,CAAmBD,UAAnB,EAA+B,KAA/B;IACH;;IACD,KAAKnS,YAAL,CAAkB+Q,IAAlB;EACH,CA5CD;;EA6CAvU,WAAW,CAACW,SAAZ,CAAsB4E,kBAAtB,GAA2C,UAAUsQ,SAAV,EAAqB1Q,QAArB,EAA+B;IACtE,IAAI0Q,SAAS,CAACzL,OAAd,EAAuB;MACnBjF,QAAQ,CAAC,KAAK/E,MAAL,CAAYgK,OAAb,CAAR,GAAgCyL,SAAS,CAACzL,OAA1C;IACH;;IACDjF,QAAQ,CAAC,KAAK/E,MAAL,CAAYG,SAAb,CAAR,GAAkCsV,SAAS,CAACtV,SAA5C;IACA4E,QAAQ,CAAC,KAAK/E,MAAL,CAAYK,OAAb,CAAR,GAAgCoV,SAAS,CAACpV,OAA1C;IACA0E,QAAQ,CAAC,KAAK/E,MAAL,CAAYoF,QAAb,CAAR,GAAiCqQ,SAAS,CAACrQ,QAA3C;;IACA,IAAIqQ,SAAS,CAACC,cAAd,EAA8B;MAC1B3Q,QAAQ,CAAC,KAAK/E,MAAL,CAAYsT,cAAb,CAAR,GAAuCmC,SAAS,CAACC,cAAjD;IACH;;IACD,IAAI,KAAK7V,MAAL,CAAY8L,kBAAZ,CAA+BzC,MAA/B,GAAwC,CAAxC,IAA6C,KAAKrJ,MAAL,CAAY4F,iBAAZ,CAA8BuL,KAA9B,CAAoC2E,SAApC,CAA8CzM,MAA9C,GAAuD,CAAxG,EAA2G;MACvG,KAAKrJ,MAAL,CAAYkM,YAAZ,CAAyB6J,iBAAzB,CAA2C7Q,QAA3C;IACH;EACJ,CAbD;;EAcAnF,WAAW,CAACW,SAAZ,CAAsBqD,mBAAtB,GAA4C,YAAY;IACpD,IAAIiS,iBAAiB,GAAG,UAAUC,KAAV,EAAiB;MACrC,OAAQA,KAAK,IAAIC,MAAM,CAACC,IAAP,CAAYF,KAAZ,EAAmB5M,MAAnB,GAA4B,CAAtC,GAA2C4M,KAA3C,GAAmDG,SAA1D;IACH,CAFD;;IAGA,IAAI1N,IAAI,GAAG,KAAK/H,OAAL,CAAa6C,aAAb,CAA2B,MAAMlE,GAAG,CAACqJ,UAArC,CAAX;IACA,IAAIsN,KAAK,GAAG,EAAZ;IACAA,KAAK,CAAC,KAAKjW,MAAL,CAAY4C,aAAZ,CAA0BzC,MAA1B,CAAiCgK,OAAjC,CAAyC2C,IAA1C,CAAL,GAAuDkJ,iBAAiB,CAAC,KAAKhW,MAAL,CAAY4C,aAAZ,CAA0BzC,MAA1B,CAAiCgK,OAAjC,CAAyCkM,UAA1C,CAAxE;IACAJ,KAAK,CAAC,KAAKjW,MAAL,CAAY4C,aAAZ,CAA0BzC,MAA1B,CAAiCkK,QAAjC,CAA0CyC,IAA3C,CAAL,GAAwDkJ,iBAAiB,CAAC,KAAKhW,MAAL,CAAY4C,aAAZ,CAA0BzC,MAA1B,CAAiCkK,QAAjC,CAA0CgM,UAA3C,CAAzE;IACAJ,KAAK,CAAC,KAAKjW,MAAL,CAAY4C,aAAZ,CAA0BzC,MAA1B,CAAiCG,SAAjC,CAA2CwM,IAA5C,CAAL,GAAyDkJ,iBAAiB,CAAC,KAAKhW,MAAL,CAAY4C,aAAZ,CAA0BzC,MAA1B,CAAiCG,SAAjC,CAA2C+V,UAA5C,CAA1E;IACAJ,KAAK,CAAC,KAAKjW,MAAL,CAAY4C,aAAZ,CAA0BzC,MAA1B,CAAiCK,OAAjC,CAAyCsM,IAA1C,CAAL,GAAuDkJ,iBAAiB,CAAC,KAAKhW,MAAL,CAAY4C,aAAZ,CAA0BzC,MAA1B,CAAiCK,OAAjC,CAAyC6V,UAA1C,CAAxE;IACAJ,KAAK,CAAC,KAAKjW,MAAL,CAAY4C,aAAZ,CAA0BzC,MAA1B,CAAiCkM,WAAjC,CAA6CS,IAA9C,CAAL,GACIkJ,iBAAiB,CAAC,KAAKhW,MAAL,CAAY4C,aAAZ,CAA0BzC,MAA1B,CAAiCkM,WAAjC,CAA6CgK,UAA9C,CADrB;IAEA,KAAKC,cAAL,GAAsB,IAAIlX,cAAJ,EAAtB;IACA,KAAKkX,cAAL,CAAoBC,mBAApB,CAAwC7N,IAAxC,EAA8CuN,KAA9C,EAAqD,KAAKtV,OAA1D,EAAmE,KAAKX,MAAL,CAAYgO,MAA/E;EACH,CAdD;;EAeAjO,WAAW,CAACW,SAAZ,CAAsB8U,WAAtB,GAAoC,UAAUhP,SAAV,EAAqB;IACrD,IAAItB,QAAQ,GAAG/G,MAAM,CAAC,EAAD,EAAKqI,SAAL,EAAgB,IAAhB,EAAsB,IAAtB,CAArB;;IACA,IAAItB,QAAQ,CAAC,KAAK/E,MAAL,CAAYK,OAAb,CAAR,CAA8BgW,QAA9B,OAA6C,CAA7C,IAAkDtR,QAAQ,CAAC,KAAK/E,MAAL,CAAYK,OAAb,CAAR,CAA8BiW,UAA9B,OAA+C,CAArG,EAAwG;MACpG,KAAKC,UAAL,CAAgBxR,QAAhB;IACH;;IACD,KAAKsB,SAAL,GAAiBtB,QAAjB;IACA,IAAI6D,YAAY,GAAG,KAAK4N,eAAL,CAAqBrX,GAAG,CAAC8B,yBAAzB,CAAnB;IACA,IAAIwV,QAAQ,GAAGV,MAAM,CAACC,IAAP,CAAYjR,QAAZ,CAAf;;IACA,KAAK,IAAIiE,EAAE,GAAG,CAAT,EAAY0N,cAAc,GAAG9N,YAAlC,EAAgDI,EAAE,GAAG0N,cAAc,CAACxN,MAApE,EAA4EF,EAAE,EAA9E,EAAkF;MAC9E,IAAI2N,UAAU,GAAGD,cAAc,CAAC1N,EAAD,CAA/B;MACA,IAAI4N,UAAU,GAAGD,UAAU,CAAChK,IAAX,IAAmB,KAAKwE,aAAL,CAAmBwF,UAAnB,CAApC;;MACA,IAAI,CAAC/Y,iBAAiB,CAACgZ,UAAD,CAAlB,IAAkCA,UAAU,KAAK,EAArD,EAAyD;QACrD,IAAIH,QAAQ,CAACI,OAAT,CAAiBD,UAAjB,MAAiC,CAAC,CAAtC,EAAyC;UACrC,KAAKE,iBAAL,CAAuBH,UAAvB,EAAmC5R,QAAQ,CAAC6R,UAAD,CAA3C;QACH,CAFD,MAGK;UACD,KAAKG,wBAAL,CAA8BJ,UAA9B;QACH;MACJ;IACJ;;IACD,IAAI/Y,iBAAiB,CAAC,KAAKiC,MAAL,CAAYsE,cAAb,CAArB,EAAmD;MAC/C,KAAKqP,cAAL,CAAoBzO,QAAQ,CAAC,KAAK/E,MAAL,CAAYoF,QAAb,CAA5B;MACA,IAAI4R,WAAW,GAAG,KAAKrQ,WAAL,CAAiBxH,GAAG,CAACwL,eAAJ,GAAsB,GAAtB,GAA4BrL,WAA7C,CAAlB;;MACA,IAAI,EAAE1B,iBAAiB,CAACmH,QAAQ,CAAC,KAAK/E,MAAL,CAAYsS,aAAb,CAAT,CAAjB,IAA0D1U,iBAAiB,CAACmH,QAAQ,CAAC,KAAK/E,MAAL,CAAYoT,WAAb,CAAT,CAA7E,CAAJ,EAAuH;QACnH4D,WAAW,CAACvD,OAAZ,GAAsB,IAAtB;QACAuD,WAAW,CAACnR,QAAZ;MACH;;MACD,KAAK6N,mBAAL,CAAyBsD,WAAW,CAACvD,OAArC;MACA,OAAO1O,QAAQ,CAACoQ,QAAhB;IACH;EACJ,CA9BD;;EA+BAvV,WAAW,CAACW,SAAZ,CAAsB4Q,aAAtB,GAAsC,UAAU3Q,OAAV,EAAmB;IACrD,IAAIyW,QAAQ,GAAGzW,OAAO,CAAC0Q,YAAR,CAAqB,WAArB,KAAqC,EAApD;;IACA,IAAI+F,QAAQ,KAAK,EAAjB,EAAqB;MACjB,IAAIC,WAAW,GAAG,KAAlB;MACA,IAAIC,aAAa,GAAG,EAApB;;MACA,IAAI3W,OAAO,CAACoO,SAAR,CAAkBC,QAAlB,CAA2B,gBAA3B,CAAJ,EAAkD;QAC9CsI,aAAa,GAAG,OAAhB;QACAD,WAAW,GAAG,IAAd;MACH,CAHD,MAIK,IAAI1W,OAAO,CAACoO,SAAR,CAAkBC,QAAlB,CAA2B,eAA3B,CAAJ,EAAiD;QAClDsI,aAAa,GAAG,eAAhB;QACAD,WAAW,GAAG,IAAd;MACH,CAHI,MAIA,IAAI1W,OAAO,CAACoO,SAAR,CAAkBC,QAAlB,CAA2B,kBAA3B,CAAJ,EAAoD;QACrDsI,aAAa,GAAG,kBAAhB;MACH,CAFI,MAGA,IAAI3W,OAAO,CAACoO,SAAR,CAAkBC,QAAlB,CAA2B,cAA3B,CAAJ,EAAgD;QACjDsI,aAAa,GAAG,cAAhB;MACH,CAFI,MAGA,IAAI3W,OAAO,CAACoO,SAAR,CAAkBC,QAAlB,CAA2B,YAA3B,CAAJ,EAA8C;QAC/CsI,aAAa,GAAG,YAAhB;MACH;;MACD,IAAIC,aAAa,GAAGF,WAAW,GAAG,MAAMC,aAAN,GAAsB,kBAAzB,GAA8C,MAAMA,aAAnF;MACA,IAAIE,OAAO,GAAG/Y,OAAO,CAACkC,OAAD,EAAU4W,aAAV,CAAP,IAAmC5W,OAAO,CAAC6C,aAAR,CAAsB,MAAM8T,aAA5B,CAAjD;;MACA,IAAIE,OAAJ,EAAa;QACT,IAAIC,OAAO,GAAGD,OAAO,CAAChU,aAAR,CAAsB,QAAtB,CAAd;;QACA,IAAIiU,OAAJ,EAAa;UACTL,QAAQ,GAAGK,OAAO,CAAC3K,IAAnB;QACH;MACJ;IACJ;;IACD,OAAOsK,QAAP;EACH,CAhCD;;EAiCArX,WAAW,CAACW,SAAZ,CAAsBiT,cAAtB,GAAuC,UAAU+D,YAAV,EAAwB;IAC3D,IAAIpQ,QAAQ,GAAG,KAAKR,WAAL,CAAiBxH,GAAG,CAACiI,wBAArB,CAAf;IACA,IAAIC,MAAM,GAAG,KAAKV,WAAL,CAAiBxH,GAAG,CAACmI,sBAArB,CAAb;IACA,IAAI+I,WAAW,GAAG,KAAK7P,OAAL,CAAa6C,aAAb,CAA2B,wBAA3B,CAAlB;IACA,IAAI2K,MAAJ;;IACA,IAAIuJ,YAAJ,EAAkB;MACdvJ,MAAM,GAAIpQ,iBAAiB,CAAC,KAAKiC,MAAL,CAAYoO,UAAb,CAAlB,GAA8C,KAAKC,SAAL,CAAe,aAAf,CAA9C,GAA8E,KAAKrO,MAAL,CAAYoO,UAAnG;MACApQ,QAAQ,CAAC,KAAK2C,OAAL,CAAagO,gBAAb,CAA8B,cAA9B,CAAD,EAAgDrP,GAAG,CAACqY,+BAApD,CAAR;MACA3Z,QAAQ,CAAC,CAACwS,WAAD,CAAD,EAAgBlR,GAAG,CAACoG,aAApB,CAAR;;MACA,IAAI,KAAK/E,OAAL,CAAa6C,aAAb,CAA2B,MAAMlE,GAAG,CAAC0L,gCAArC,CAAJ,EAA4E;QACxE1M,WAAW,CAAC,CAAC,KAAKqC,OAAL,CAAa6C,aAAb,CAA2B,MAAMlE,GAAG,CAAC0L,gCAArC,CAAD,CAAD,EAA2E1L,GAAG,CAACsY,YAA/E,CAAX;MACH;;MACDtQ,QAAQ,CAAC6G,MAAT,GAAkB3G,MAAM,CAAC2G,MAAP,GAAgBA,MAAlC;IACH,CARD,MASK;MACDA,MAAM,GAAIpQ,iBAAiB,CAAC,KAAKiC,MAAL,CAAYoO,UAAb,CAAlB,GAA8C,KAAKC,SAAL,CAAe,aAAf,IAAgC,GAAhC,GACnD,KAAKrO,MAAL,CAAY4F,iBAAZ,CAA8BsI,UADzB,GACsC,KAAKlO,MAAL,CAAYoO,UAAZ,GAAyB,GAAzB,GAA+B,KAAKpO,MAAL,CAAY4F,iBAAZ,CAA8BsI,UAD5G;MAEA5P,WAAW,CAAC,KAAKqC,OAAL,CAAagO,gBAAb,CAA8B,cAA9B,CAAD,EAAgDrP,GAAG,CAACqY,+BAApD,CAAX;MACArZ,WAAW,CAAC,CAACkS,WAAD,CAAD,EAAgBlR,GAAG,CAACoG,aAApB,CAAX;;MACA,IAAI,KAAK/E,OAAL,CAAa6C,aAAb,CAA2B,kCAA3B,EAA+DoQ,OAAnE,EAA4E;QACxE5V,QAAQ,CAAC,CAAC,KAAK2C,OAAL,CAAa6C,aAAb,CAA2B,MAAMlE,GAAG,CAAC0L,gCAArC,CAAD,CAAD,EAA2E1L,GAAG,CAACsY,YAA/E,CAAR;MACH;;MACDtQ,QAAQ,CAAC6G,MAAT,GAAkB3G,MAAM,CAAC2G,MAAP,GAAgBA,MAAlC;IACH;;IACD,IAAI,KAAKhJ,eAAT,EAA0B;MACtB,KAAK0S,cAAL,CAAoBH,YAApB,EAAkCpQ,QAAlC,EAA4CE,MAA5C;IACH;;IACDF,QAAQ,CAACtB,QAAT;IACAwB,MAAM,CAACxB,QAAP;;IACA,IAAI,CAACjI,iBAAiB,CAAC,KAAKoG,gBAAN,CAAtB,EAA+C;MAC3C,KAAKA,gBAAL,CAAsB+K,mBAAtB,CAA0C5H,QAAQ,CAACI,KAAnD;IACH;EACJ,CAhCD;;EAiCA3H,WAAW,CAACW,SAAZ,CAAsBmX,cAAtB,GAAuC,UAAUH,YAAV,EAAwBpQ,QAAxB,EAAkCE,MAAlC,EAA0C;IAC7E,IAAImN,SAAJ;IACA,IAAI1F,OAAJ;;IACA,IAAIyI,YAAJ,EAAkB;MACd/C,SAAS,GAAGnV,IAAI,CAACsY,SAAL,CAAe,IAAIvX,IAAJ,CAAS,KAAKF,eAAL,CAAqBC,SAArB,CAA+BqH,OAA/B,EAAT,CAAf,CAAZ;;MACA,IAAI,KAAK3H,MAAL,CAAYoF,eAAZ,CAA4BG,QAAhC,EAA0C;QACtC,IAAIwS,IAAI,GAAGvY,IAAI,CAACwY,OAAL,CAAa,IAAIzX,IAAJ,CAAS,KAAKF,eAAL,CAAqBG,OAArB,CAA6BmH,OAA7B,EAAT,CAAb,EAA+D,CAAC,CAAhE,EAAmEA,OAAnE,EAAX;QACAsH,OAAO,GAAI,CAAC,KAAK5O,eAAL,CAAqBC,SAAtB,GAAkCyX,IAAnC,GAA2C,KAAK1X,eAAL,CAAqBG,OAAhE,GAA0E,IAAID,IAAJ,CAASwX,IAAT,CAApF;MACH,CAHD,MAIK;QACD9I,OAAO,GAAGzP,IAAI,CAACsY,SAAL,CAAe,IAAIvX,IAAJ,CAAS,KAAKF,eAAL,CAAqBG,OAArB,CAA6BmH,OAA7B,EAAT,CAAf,CAAV;MACH;IACJ,CATD,MAUK;MACD,IAAIsQ,KAAK,GAAG,KAAKjY,MAAL,CAAYoF,eAAZ,CAA4B9E,SAAxC;MACAqU,SAAS,GAAG,IAAIpU,IAAJ,CAAS,KAAKF,eAAL,CAAqBC,SAArB,CAA+BqH,OAA/B,EAAT,CAAZ;MACAgN,SAAS,CAAC5G,QAAV,CAAmBkK,KAAK,CAACzB,QAAN,EAAnB,EAAqCyB,KAAK,CAACxB,UAAN,EAArC,EAAyDwB,KAAK,CAACC,UAAN,EAAzD;;MACA,IAAI,KAAKlY,MAAL,CAAYoF,eAAZ,CAA4BG,QAAhC,EAA0C;QACtC,IAAI4S,SAAS,GAAG,KAAKnY,MAAL,CAAYoY,eAAZ,CAA4B,KAAKpY,MAAL,CAAYqY,SAAZ,CAAsBJ,KAAlD,CAAhB;QACAtD,SAAS,CAAC5G,QAAV,CAAmBoK,SAAS,CAAC3B,QAAV,EAAnB,EAAyC2B,SAAS,CAAC1B,UAAV,EAAzC,EAAiE0B,SAAS,CAACD,UAAV,EAAjE;QACAjJ,OAAO,GAAG,IAAI1O,IAAJ,CAASoU,SAAS,CAAChN,OAAV,EAAT,CAAV;QACAsH,OAAO,CAACqJ,eAAR,CAAwB9Y,IAAI,CAACoI,aAAL,GAAqB,KAAKhB,eAAL,EAA7C;MACH,CALD,MAMK;QACDqI,OAAO,GAAG,IAAI1O,IAAJ,CAASoU,SAAS,CAAChN,OAAV,EAAT,CAAV;QACAsH,OAAO,CAACqJ,eAAR,CAAwB,KAAKtY,MAAL,CAAYoF,eAAZ,CAA4B5E,OAA5B,CAAoCmH,OAApC,KAAgD,KAAK3H,MAAL,CAAYoF,eAAZ,CAA4B9E,SAA5B,CAAsCqH,OAAtC,EAAxE;MACH;IACJ;;IACD,KAAKtH,eAAL,GAAuB;MAAEC,SAAS,EAAE,IAAIC,IAAJ,CAASoU,SAAS,CAAChN,OAAV,EAAT,CAAb;MAA4CnH,OAAO,EAAE,IAAID,IAAJ,CAAS0O,OAAO,CAACtH,OAAR,EAAT;IAArD,CAAvB;IACAL,QAAQ,CAACI,KAAT,GAAiBiN,SAAjB;IACAnN,MAAM,CAACE,KAAP,GAAeuH,OAAf;IACA3H,QAAQ,CAACtB,QAAT;IACAwB,MAAM,CAACxB,QAAP;EACH,CAjCD;;EAkCAjG,WAAW,CAACW,SAAZ,CAAsB2N,SAAtB,GAAkC,UAAUkK,UAAV,EAAsB;IACpD,IAAIpK,MAAJ;;IACA,IAAI,KAAKnO,MAAL,CAAYgO,MAAZ,KAAuB,IAAvB,IAA+B,KAAKhO,MAAL,CAAYgO,MAAZ,KAAuB,OAA1D,EAAmE;MAC/DG,MAAM,GAAG5P,QAAQ,CAACga,UAAU,GAAG,QAAd,EAAwB/Z,oBAAoB,CAAC,KAAKwB,MAAL,CAAYwY,eAAZ,EAAD,CAA5C,CAAjB;IACH,CAFD,MAGK;MACDrK,MAAM,GAAG5P,QAAQ,CAAC,UAAU,KAAKyB,MAAL,CAAYgO,MAAtB,GAA+B,mBAA/B,GAAqD,KAAKhO,MAAL,CAAYwY,eAAZ,EAArD,GAAqF,GAArF,GAA2FD,UAA3F,GAAwG,QAAzG,EAAmHla,QAAnH,CAAjB;IACH;;IACD,OAAO8P,MAAP;EACH,CATD;;EAUApO,WAAW,CAACW,SAAZ,CAAsBoF,oBAAtB,GAA6C,UAAUZ,QAAV,EAAoB;IAC7D,IAAI,CAAC,KAAKlF,MAAL,CAAY4C,aAAZ,CAA0BmE,YAA/B,EAA6C;MACzC;IACH;;IACD,IAAI,CAAC,KAAK/G,MAAL,CAAYuB,UAAjB,EAA6B;MACzBjD,WAAW,CAAC,CAAC,KAAKqC,OAAL,CAAa6C,aAAb,CAA2B,MAAMlE,GAAG,CAACoD,kBAArC,CAAD,CAAD,EAA6DpD,GAAG,CAACoG,aAAjE,CAAX;IACH;;IACD,KAAK/E,OAAL,CAAa6C,aAAb,CAA2B,MAAMlE,GAAG,CAAC8V,6BAArC,EAAoEC,SAApE,GAAgF,KAAKpV,IAAL,CAAUsC,WAAV,CAAsB,WAAtB,CAAhF;IACA,KAAK5B,OAAL,CAAa6C,aAAb,CAA2B,MAAMlE,GAAG,CAACqJ,UAArC,EAAiDlF,YAAjD,CAA8D,SAA9D,EAAyEyB,QAAQ,CAAC,KAAK/E,MAAL,CAAYS,EAAb,CAAR,CAAyB6X,QAAzB,EAAzE;;IACA,IAAI1a,iBAAiB,CAAC,KAAKiC,MAAL,CAAYsE,cAAb,CAArB,EAAmD;MAC/CY,QAAQ,GAAG/G,MAAM,CAAC,EAAD,EAAK+G,QAAL,EAAe,IAAf,EAAqB,IAArB,CAAjB;MACA,IAAIiS,WAAW,GAAG,KAAKrQ,WAAL,CAAiBxH,GAAG,CAACwL,eAAJ,GAAsB,GAAtB,GAA4BrL,WAA7C,CAAlB;MACA,IAAIiZ,aAAa,GAAG,KAAK,CAAzB;;MACA,IAAIxT,QAAQ,CAAC,KAAK/E,MAAL,CAAYsS,aAAb,CAAR,IAAuCvN,QAAQ,CAAC,KAAK/E,MAAL,CAAYoT,WAAb,CAAnD,EAA8E;QAC1EmF,aAAa,GAAG,IAAhB;QACA,KAAK1Y,MAAL,CAAYqI,SAAZ,CAAsBsQ,eAAtB,CAAsCzT,QAAtC;MACH,CAHD,MAIK;QACDwT,aAAa,GAAG,KAAhB;MACH;;MACDxT,QAAQ,CAACoQ,QAAT,GAAoBoD,aAApB;MACAvB,WAAW,CAACvD,OAAZ,GAAsB8E,aAAtB;MACAvB,WAAW,CAACnR,QAAZ;IACH;;IACD,KAAKwP,WAAL,CAAiBtQ,QAAjB;;IACA,IAAIA,QAAQ,CAAC,KAAK/E,MAAL,CAAYsT,cAAb,CAAR,IAAwC,KAAKtP,gBAAjD,EAAmE;MAC/D,KAAKA,gBAAL,CAAsBqQ,iBAAtB,CAAwCtP,QAAQ,CAAC,KAAK/E,MAAL,CAAYsT,cAAb,CAAhD,EAA8EvO,QAAQ,CAAC,KAAK/E,MAAL,CAAYG,SAAb,CAAtF;IACH,CAFD,MAGK,IAAI,CAAC,KAAKN,MAAL,CAAYuB,UAAb,IAA2B,KAAK4C,gBAApC,EAAsD;MACvD,KAAKA,gBAAL,CAAsBuQ,aAAtB,CAAoC;QAAEC,SAAS,EAAEzP,QAAQ,CAAC,KAAK/E,MAAL,CAAYG,SAAb;MAArB,CAApC;MACA,KAAK6D,gBAAL,CAAsBqQ,iBAAtB,CAAwC,EAAxC;IACH;;IACD,KAAKI,eAAL,GAAuB1P,QAAQ,CAAC,KAAK/E,MAAL,CAAYG,SAAb,CAA/B;IACA,KAAKiU,UAAL,GAAkB,EAAlB;;IACA,IAAIrP,QAAQ,CAAC,KAAK/E,MAAL,CAAYsT,cAAb,CAAZ,EAA0C;MACtC,IAAI,KAAKtP,gBAAT,EAA2B;QACvB,KAAKA,gBAAL,CAAsBqQ,iBAAtB,CAAwCtP,QAAQ,CAAC,KAAK/E,MAAL,CAAYsT,cAAb,CAAhD,EAA8EvO,QAAQ,CAAC,KAAK/E,MAAL,CAAYG,SAAb,CAAtF;MACH;;MACD,KAAKiU,UAAL,GAAkBrP,QAAQ,CAAC,KAAK/E,MAAL,CAAYsT,cAAb,CAA1B;IACH;;IACD,IAAI,KAAKzT,MAAL,CAAYuB,UAAZ,IAA0BxD,iBAAiB,CAAC,KAAKiC,MAAL,CAAYsE,cAAb,CAA/C,EAA6E;MACzE,IAAI3D,OAAO,GAAG,KAAKA,OAAL,CAAa6C,aAAb,CAA2B,MAAM9D,sBAAjC,CAAd;;MACA,IAAIwF,QAAQ,CAAC,KAAK/E,MAAL,CAAYsT,cAAb,CAAZ,EAA0C;QACtCnV,WAAW,CAAC,CAACqC,OAAD,CAAD,EAAYb,gBAAZ,CAAX;QACA,KAAKmT,YAAL,CAAkByB,aAAlB,CAAgC;UAAEd,OAAO,EAAE;QAAX,CAAhC;MACH,CAHD,MAIK;QACD5V,QAAQ,CAAC,CAAC2C,OAAD,CAAD,EAAYb,gBAAZ,CAAR;QACA,KAAKmT,YAAL,CAAkByB,aAAlB,CAAgC;UAAEd,OAAO,EAAE;QAAX,CAAhC;MACH;;MACD,KAAKmB,iBAAL,CAAuB,KAAKR,UAA5B;IACH;;IACD,IAAIqE,SAAS,GAAI,KAAK5Y,MAAL,CAAY8C,QAAZ,IAAwBoC,QAAQ,CAAC,KAAK/E,MAAL,CAAY0Y,UAAb,CAAjD;;IACA,IAAI,CAAC,KAAK7Y,MAAL,CAAYuB,UAAjB,EAA6B;MACzB,IAAImU,UAAU,GAAG,KAAK/U,OAAL,CAAa6C,aAAb,CAA2B,MAAMlE,GAAG,CAAC2D,8BAArC,CAAjB;MACA,IAAIwS,YAAY,GAAG,KAAK9U,OAAL,CAAa6C,aAAb,CAA2B,MAAMlE,GAAG,CAACoD,kBAArC,CAAnB;MACA,KAAKiT,aAAL,CAAmBD,UAAnB,EAA+BkD,SAA/B;MACA,KAAKjD,aAAL,CAAmBF,YAAnB,EAAiCmD,SAAjC;IACH,CALD,MAMK;MACD,IAAIE,QAAQ,GAAG,KAAKnY,OAAL,CAAa6C,aAAb,CAA2B,MAAMlE,GAAG,CAACuE,4BAArC,CAAf;;MACA,IAAIiV,QAAJ,EAAc;QACV,IAAIF,SAAJ,EAAe;UACX5a,QAAQ,CAAC,CAAC8a,QAAD,CAAD,EAAaxZ,GAAG,CAACyZ,kBAAjB,CAAR;QACH,CAFD,MAGK;UACDza,WAAW,CAAC,CAACwa,QAAD,CAAD,EAAaxZ,GAAG,CAACyZ,kBAAjB,CAAX;QACH;MACJ;IACJ;;IACD,KAAKxV,YAAL,CAAkB+Q,IAAlB;EACH,CAvED;;EAwEAvU,WAAW,CAACW,SAAZ,CAAsBiV,aAAtB,GAAsC,UAAUhV,OAAV,EAAmB+G,KAAnB,EAA0B;IAC5D,IAAI/G,OAAJ,EAAa;MACTA,OAAO,CAACmO,aAAR,CAAsB,CAAtB,EAAyBnM,QAAzB,GAAoC+E,KAApC;IACH;EACJ,CAJD;;EAKA3H,WAAW,CAACW,SAAZ,CAAsBgM,sBAAtB,GAA+C,YAAY;IACvD,OAAO,IAAIrN,gBAAJ,CAAqB;MACxBqO,YAAY,EAAE,KAAK1N,MAAL,CAAY0N,YADF;MAExBvM,QAAQ,EAAE,KAAKnB,MAAL,CAAYmB,QAFE;MAGxBiN,UAAU,EAAE,KAAKpO,MAAL,CAAYoO,UAHA;MAIxB/M,SAAS,EAAE,KAAKrB,MAAL,CAAYqB,SAJC;MAKxBsE,cAAc,EAAE,KAAK3F,MAAL,CAAY4F,iBAAZ,CAA8BD,cALtB;MAMxBqI,MAAM,EAAE,KAAKhO,MAAL,CAAYgO;IANI,CAArB,CAAP;EAQH,CATD;;EAUAjO,WAAW,CAACW,SAAZ,CAAsBiM,wBAAtB,GAAiD,YAAY;IACzD,IAAIgI,SAAS,GAAG,KAAKhU,OAAL,CAAa6C,aAAb,CAA2B,UAA3B,CAAhB;IACA,IAAIyL,OAAO,GAAG,KAAKtO,OAAL,CAAa6C,aAAb,CAA2B,QAA3B,CAAd;;IACA,IAAImR,SAAS,IAAI1F,OAAjB,EAA0B;MACtB,IAAI3H,QAAQ,GAAGqN,SAAS,CAAC7F,aAAV,CAAwB,CAAxB,CAAf;MACA,IAAItH,MAAM,GAAGyH,OAAO,CAACH,aAAR,CAAsB,CAAtB,CAAb;MACAxH,QAAQ,CAACqG,GAAT,GAAe,KAAK3N,MAAL,CAAY4N,OAA3B;MACAtG,QAAQ,CAACuG,GAAT,GAAe,KAAK7N,MAAL,CAAY8N,OAA3B;MACAtG,MAAM,CAACmG,GAAP,GAAa,KAAK3N,MAAL,CAAY4N,OAAzB;MACApG,MAAM,CAACqG,GAAP,GAAa,KAAK7N,MAAL,CAAY8N,OAAzB;MACAxG,QAAQ,CAACtB,QAAT;MACAwB,MAAM,CAACxB,QAAP;IACH;;IACD,IAAI,KAAK7B,gBAAT,EAA2B;MACvB,IAAI6U,SAAS,GAAG,KAAK7U,gBAAL,CAAsBxD,OAAtB,CAA8B6C,aAA9B,CAA4C,eAA5C,CAAhB;;MACA,IAAIwV,SAAJ,EAAe;QACX,IAAIC,QAAQ,GAAGD,SAAS,CAAClK,aAAV,CAAwB,CAAxB,CAAf;QACAmK,QAAQ,CAACtL,GAAT,GAAe,KAAK3N,MAAL,CAAY4N,OAA3B;QACAqL,QAAQ,CAACpL,GAAT,GAAe,KAAK7N,MAAL,CAAY8N,OAA3B;QACAmL,QAAQ,CAACjT,QAAT;MACH;IACJ;EACJ,CAtBD;;EAuBAjG,WAAW,CAACW,SAAZ,CAAsBqU,iBAAtB,GAA0C,UAAUR,UAAV,EAAsB;IAC5D,IAAI,KAAKvU,MAAL,CAAYuB,UAAZ,IAA0B,CAAC,KAAKyS,kBAApC,EAAwD;MACpD,KAAKD,kBAAL;IACH;;IACD,IAAIvP,IAAI,GAAG+P,UAAU,GAChB,KAAKtU,IAAL,CAAUsC,WAAV,CAAsB,SAAtB,IAAmC,GAAnC,GAAyC,KAAK4B,gBAAL,CAAsB+U,cAAtB,CAAqC3E,UAArC,CADzB,GAC6E,KAAKtU,IAAL,CAAUsC,WAAV,CAAsB,QAAtB,CADlG;IAEA,KAAK0Q,YAAL,CAAkByB,aAAlB,CAAgC;MAAE1B,KAAK,EAAExO;IAAT,CAAhC;EACH,CAPD;;EAQAzE,WAAW,CAACW,SAAZ,CAAsB4C,WAAtB,GAAoC,UAAU/D,KAAV,EAAiB;IACjD,IAAI,KAAK6G,UAAT,EAAqB;MACjB,KAAKA,UAAL,GAAkB,KAAlB;MACA;IACH;;IACD,KAAK4B,WAAL,GAAmBzI,KAAnB;IACA,KAAKwI,YAAL,GAAoB,KAApB;IACA,KAAK/H,MAAL,CAAY0G,eAAZ,GAA8B;MAAEnH,KAAK,EAAE6W,SAAT;MAAoBzV,OAAO,EAAEyV;IAA7B,CAA9B;IACA,KAAKpW,MAAL,CAAY4E,aAAZ,GAA4B,IAA5B;IACA,KAAKrB,YAAL,CAAkBuR,IAAlB;EACH,CAVD;;EAWA/U,WAAW,CAACW,SAAZ,CAAsB0H,SAAtB,GAAkC,YAAY;IAC1C,KAAKkO,cAAL,CAAoB6C,cAApB;IACA,KAAKC,eAAL;;IACA,IAAI,CAAC,KAAKpZ,MAAL,CAAYuB,UAAb,IAA2B,KAAK4C,gBAAhC,IAAoD,CAAC,KAAKA,gBAAL,CAAsBkV,WAA/E,EAA4F;MACxF,KAAKlV,gBAAL,CAAsBmV,WAAtB;IACH;EACJ,CAND;;EAOAvZ,WAAW,CAACW,SAAZ,CAAsBmT,mBAAtB,GAA4C,UAAUnM,KAAV,EAAiB;IACzD,IAAI8I,WAAW,GAAG,KAAK7P,OAAL,CAAa6C,aAAb,CAA2B,MAAMlE,GAAG,CAAC0L,gCAArC,CAAlB;IACA,IAAIuO,iBAAiB,GAAG,KAAKvZ,MAAL,CAAYwZ,QAAZ,CAAqBC,oBAArB,EAAxB;;IACA,IAAI/R,KAAJ,EAAW;MACP1J,QAAQ,CAAC,CAACwS,WAAD,CAAD,EAAgBlR,GAAG,CAACsY,YAApB,CAAR;MACA,IAAIlF,gBAAgB,GAAG,KAAK5L,WAAL,CAAiBxH,GAAG,CAAC4L,2BAArB,CAAvB;MACA,IAAIyH,cAAc,GAAG,KAAK7L,WAAL,CAAiBxH,GAAG,CAAC6L,yBAArB,CAArB;MACA,IAAIuO,QAAQ,GAAGhH,gBAAgB,CAAC7C,UAAhC;;MACA,IAAI,CAAC6C,gBAAgB,CAAChL,KAAlB,IAA2B,CAAC,KAAK1H,MAAL,CAAY0Z,QAA5C,EAAsD;QAClD,IAAIC,KAAK,GAAGD,QAAQ,CAACE,IAAT,CAAc,UAAUC,EAAV,EAAc;UAAE,OAAOA,EAAE,CAACC,KAAH,KAAaP,iBAApB;QAAwC,CAAtE,CAAZ;;QACA,IAAI,CAACI,KAAL,EAAY;UACRD,QAAQ,CAACK,IAAT,CAAc;YAAED,KAAK,EAAEP,iBAAT;YAA4BS,IAAI,EAAET;UAAlC,CAAd;UACA7G,gBAAgB,CAAC7C,UAAjB,GAA8B6J,QAA9B;UACA/G,cAAc,CAAC9C,UAAf,GAA4B6J,QAA5B;UACAhH,gBAAgB,CAAC1M,QAAjB;UACA2M,cAAc,CAAC3M,QAAf;QACH;MACJ;;MACD0M,gBAAgB,CAAChL,KAAjB,GAAyBgL,gBAAgB,CAAChL,KAAjB,IAA0B,KAAK1H,MAAL,CAAY0Z,QAAtC,IAAkDH,iBAA3E;MACA5G,cAAc,CAACjL,KAAf,GAAuBiL,cAAc,CAACjL,KAAf,IAAwB,KAAK1H,MAAL,CAAY0Z,QAApC,IAAgDH,iBAAvE;MACA7G,gBAAgB,CAAC1M,QAAjB;MACA2M,cAAc,CAAC3M,QAAf;IACH,CAnBD,MAoBK;MACD1H,WAAW,CAAC,CAACkS,WAAD,CAAD,EAAgBlR,GAAG,CAACsY,YAApB,CAAX;IACH;EACJ,CA1BD;;EA2BA7X,WAAW,CAACW,SAAZ,CAAsB0Y,eAAtB,GAAwC,YAAY;IAChD,IAAIa,WAAW,GAAG,KAAKtD,eAAL,CAAqBrX,GAAG,CAAC8B,yBAAzB,CAAlB;;IACA,KAAK,IAAI+H,EAAE,GAAG,CAAT,EAAY+Q,aAAa,GAAGD,WAAjC,EAA8C9Q,EAAE,GAAG+Q,aAAa,CAAC7Q,MAAjE,EAAyEF,EAAE,EAA3E,EAA+E;MAC3E,IAAIgR,cAAc,GAAGD,aAAa,CAAC/Q,EAAD,CAAlC;MACA,IAAI4N,UAAU,GAAGoD,cAAc,CAACrN,IAAf,IAAuB,KAAKwE,aAAL,CAAmB6I,cAAnB,CAAxC;;MACA,IAAI,CAACpc,iBAAiB,CAACgZ,UAAD,CAAlB,IAAkCA,UAAU,KAAK,EAArD,EAAyD;QACrD,KAAKG,wBAAL,CAA8BiD,cAA9B;MACH;IACJ;EACJ,CATD;;EAUApa,WAAW,CAACW,SAAZ,CAAsB0C,SAAtB,GAAkC,UAAU7D,KAAV,EAAiB6a,KAAjB,EAAwB;IACtD,IAAI,KAAKhU,UAAT,EAAqB;MACjB,KAAKA,UAAL,GAAkB,KAAlB;MACA;IACH;;IACD,IAAI6T,WAAW,GAAG,KAAKtZ,OAAL,CAAa6C,aAAb,CAA2B,MAAMlE,GAAG,CAACqJ,UAArC,CAAlB;;IACA,IAAIsR,WAAW,IAAIA,WAAW,CAAClL,SAAZ,CAAsBC,QAAtB,CAA+B,iBAA/B,CAAf,IACA,CAACiL,WAAW,CAACnL,aAAZ,CAA0B,CAA1B,EAA6BuL,QAA7B,EADL,EAC8C;MAC1C;IACH;;IACD,IAAIC,cAAc,GAAG,KAAKC,sBAAL,EAArB;;IACA,IAAI,KAAKC,sBAAL,CAA4BF,cAAc,CAACG,QAA3C,EAAqDL,KAArD,CAAJ,EAAiE;MAC7D;IACH;;IACD,KAAKnS,aAAL,GAAqBqS,cAAc,CAAC9T,SAApC;IACA,KAAKwB,WAAL,GAAmBzI,KAAnB;IACA,KAAKwI,YAAL,GAAoB,IAApB;IACA,KAAKxE,YAAL,CAAkBuR,IAAlB;EACH,CAlBD;;EAmBA/U,WAAW,CAACW,SAAZ,CAAsB6Z,sBAAtB,GAA+C,YAAY;IACvD,IAAIrV,QAAQ,GAAG/G,MAAM,CAAC,EAAD,EAAK,KAAKuc,qBAAL,CAA2Bpb,GAAG,CAAC8B,yBAA/B,CAAL,CAArB;;IACA,IAAI,CAAC8D,QAAQ,CAACoQ,QAAd,EAAwB;MACpBpQ,QAAQ,CAAC,KAAK/E,MAAL,CAAYsS,aAAb,CAAR,GAAsC,IAAtC;MACAvN,QAAQ,CAAC,KAAK/E,MAAL,CAAYoT,WAAb,CAAR,GAAoC,IAApC;IACH;;IACD,OAAOrO,QAAQ,CAACoQ,QAAhB;IACA,OAAOpQ,QAAQ,CAACyV,MAAhB;IACA,KAAKC,uBAAL,CAA6B1V,QAA7B;IACAA,QAAQ,CAAC,KAAK/E,MAAL,CAAYsT,cAAb,CAAR,GAAuC,KAAKtP,gBAAL,GAAwB,KAAKA,gBAAL,CAAsB6Q,iBAAtB,MAA6C,IAArE,GAA4EoB,SAAnH;IACA,IAAIyE,OAAO,GAAG1c,MAAM,CAAC,EAAD,EAAK+G,QAAL,EAAe,IAAf,EAAqB,IAArB,CAApB;;IACA,IAAIA,QAAQ,CAAC,KAAK/E,MAAL,CAAYoF,QAAb,CAAZ,EAAoC;MAChCL,QAAQ,CAAC,KAAK/E,MAAL,CAAYG,SAAb,CAAR,GAAmCvC,iBAAiB,CAACmH,QAAQ,CAAC,KAAK/E,MAAL,CAAYG,SAAb,CAAT,CAAlB,GAAuD,IAAvD,GAC5Bd,IAAI,CAACsY,SAAL,CAAe,IAAIvX,IAAJ,CAAS2E,QAAQ,CAAC,KAAK/E,MAAL,CAAYG,SAAb,CAAR,CAAgCqH,OAAhC,EAAT,CAAf,CADN;MAEAzC,QAAQ,CAAC,KAAK/E,MAAL,CAAYK,OAAb,CAAR,GAAiCzC,iBAAiB,CAACmH,QAAQ,CAAC,KAAK/E,MAAL,CAAYK,OAAb,CAAT,CAAlB,GAAqD,IAArD,GAC1BhB,IAAI,CAACwY,OAAL,CAAaxY,IAAI,CAACsY,SAAL,CAAe,IAAIvX,IAAJ,CAAS2E,QAAQ,CAAC,KAAK/E,MAAL,CAAYK,OAAb,CAAR,CAA8BmH,OAA9B,EAAT,CAAf,CAAb,EAAgF,CAAhF,CADN;IAEH;;IACD,OAAO;MAAEnB,SAAS,EAAEtB,QAAb;MAAuBuV,QAAQ,EAAEI;IAAjC,CAAP;EACH,CAlBD;;EAmBA9a,WAAW,CAACW,SAAZ,CAAsB8Z,sBAAtB,GAA+C,UAAUtV,QAAV,EAAoBkV,KAApB,EAA2B;IACtE,IAAIU,SAAJ;;IACA,IAAI/c,iBAAiB,CAAC,KAAKiC,MAAL,CAAYsE,cAAb,CAArB,EAAmD;MAC/C,IAAI,CAACY,QAAQ,CAAC,KAAK/E,MAAL,CAAYG,SAAb,CAAT,IAAoC,CAAC4E,QAAQ,CAAC,KAAK/E,MAAL,CAAYK,OAAb,CAAjD,EAAwE;QACpE,KAAKR,MAAL,CAAY8E,UAAZ,CAAuBiW,mBAAvB,CAA2C,kBAA3C;QACA,OAAO,IAAP;MACH;;MACD,IAAI7V,QAAQ,CAAC,KAAK/E,MAAL,CAAYG,SAAb,CAAR,GAAkC4E,QAAQ,CAAC,KAAK/E,MAAL,CAAYK,OAAb,CAA9C,EAAqE;QACjE,KAAKR,MAAL,CAAY8E,UAAZ,CAAuBiW,mBAAvB,CAA2C,eAA3C;QACA,OAAO,IAAP;MACH;IACJ;;IACD,IAAI,KAAK5W,gBAAL,IAAyB,KAAKA,gBAAL,CAAsBuD,KAA/C,IAAwD,KAAKvD,gBAAL,CAAsBuD,KAAtB,KAAgC,EAA5F,EAAgG;MAC5FoT,SAAS,GAAG,KAAKE,oBAAL,CAA0B9V,QAAQ,CAAC,KAAK/E,MAAL,CAAYG,SAAb,CAAlC,EAA2D4E,QAAQ,CAAC,KAAK/E,MAAL,CAAYK,OAAb,CAAnE,EAA0F4Z,KAA1F,CAAZ;MACA,IAAIa,WAAW,GAAG,IAAlB;;MACA,IAAIH,SAAS,KAAK,mBAAd,IAAqC,KAAK9a,MAAL,CAAYkb,aAAZ,CAA0BC,kBAAnE,EAAuF;QACnFF,WAAW,GAAG,KAAd;MACH;;MACD,IAAI,CAACld,iBAAiB,CAAC+c,SAAD,CAAlB,IAAiCG,WAAjC,KACK,CAAC,KAAKjb,MAAL,CAAYob,0BAAb,IAA2CN,SAAS,KAAK,cAA1D,IAA6E,KAAK9a,MAAL,CAAYob,0BAD7F,CAAJ,EAC8H;QAC1H,KAAKpb,MAAL,CAAY8E,UAAZ,CAAuBuW,6BAAvB,CAAqDP,SAArD;QACA,OAAO,IAAP;MACH;IACJ;;IACD,OAAO,KAAP;EACH,CAzBD;;EA0BA/a,WAAW,CAACW,SAAZ,CAAsByH,kBAAtB,GAA2C,UAAUjD,QAAV,EAAoB;IAC3D,IAAIoB,KAAK,GAAG,IAAZ;;IACA,KAAKtG,MAAL,CAAYkb,aAAZ,CAA0BI,OAA1B,GAAoC,KAApC;IACA,IAAInM,YAAY,GAAG,KAAKoM,eAAL,CAAqBrW,QAArB,CAAnB;IACA,IAAIsW,qBAAqB,GAAG,CAAC,KAAKxb,MAAL,CAAY4F,iBAAZ,CAA8BuL,KAA9B,CAAoC2E,SAApC,CAA8CzM,MAA9C,GAAuD,CAAvD,IACzB,KAAKrJ,MAAL,CAAY8L,kBAAZ,CAA+BzC,MAA/B,GAAwC,CADhB,KACsB,CAAC,KAAKrJ,MAAL,CAAY4F,iBAAZ,CAA8BuL,KAA9B,CAAoCsK,cAD3D,IAErB,CAAC1d,iBAAiB,CAACoR,YAAD,CAFzB;IAGA,IAAIuM,OAAO,GAAG,KAAKC,kBAAL,EAAd;;IACA,IAAI,CAAC5d,iBAAiB,CAAC2d,OAAD,CAAtB,EAAiC;MAC7B,IAAIE,OAAO,GAAG,KAAK5b,MAAL,CAAYqI,SAAZ,CAAsBwT,cAAtB,OAA2C,QAA3C,GAAsDH,OAAtD,GAAgEI,QAAQ,CAACJ,OAAD,EAAU,EAAV,CAAtF;MACA,IAAIK,UAAU,GAAG,KAAK/b,MAAL,CAAYgc,UAAZ,CAAuBlK,MAAvB,CAA8B,UAAUtN,IAAV,EAAgB;QAC3D,OAAOA,IAAI,CAAC8B,KAAK,CAACnG,MAAN,CAAaS,EAAd,CAAJ,KAA0Bgb,OAAjC;MACH,CAFgB,EAEd,CAFc,CAAjB;;MAGA,IAAI7d,iBAAiB,CAACge,UAAD,CAArB,EAAmC;QAC/BA,UAAU,GAAG,KAAK/b,MAAL,CAAYic,SAAZ,CAAsBnK,MAAtB,CAA6B,UAAUtN,IAAV,EAAgB;UACtD,OAAOA,IAAI,CAAC8B,KAAK,CAACnG,MAAN,CAAaS,EAAd,CAAJ,KAA0Bgb,OAAjC;QACH,CAFY,EAEV,CAFU,CAAb;MAGH;;MACD1W,QAAQ,GAAG/G,MAAM,CAAC,EAAD,EAAK4d,UAAL,EAAiB7W,QAAjB,CAAjB;;MACA,IAAIA,QAAQ,CAAC,KAAK/E,MAAL,CAAY0Y,UAAb,CAAZ,EAAsC;QAClC,OAAO,KAAP;MACH;;MACD,IAAIjU,aAAa,GAAG,KAAK,CAAzB;;MACA,IAAI,CAAC7G,iBAAiB,CAACge,UAAU,CAAC,KAAK5b,MAAL,CAAYsT,cAAb,CAAX,CAAtB,EAAgE;QAC5D7O,aAAa,GAAG,KAAK5E,MAAL,CAAY4E,aAA5B;QACAM,QAAQ,CAACgX,IAAT,GAAgB,KAAKlc,MAAL,CAAY0G,eAAZ,CAA4BnH,KAA5B,CAAkC2c,IAAlD;;QACA,IAAI,KAAKlc,MAAL,CAAY4E,aAAZ,KAA8B,gBAAlC,EAAoD;UAChD,IAAI,CAACM,QAAQ,CAAC,KAAK/E,MAAL,CAAYgc,YAAb,CAAb,EAAyC;YACrCjX,QAAQ,CAAC,KAAK/E,MAAL,CAAYS,EAAb,CAAR,GAA2B,KAAKZ,MAAL,CAAYqI,SAAZ,CAAsB+T,aAAtB,EAA3B;YACAlX,QAAQ,CAACgX,IAAT,GAAgB,KAAKlc,MAAL,CAAY0G,eAAZ,CAA4BnH,KAA5B,CAAkC2c,IAAlD;UACH,CAHD,MAIK;YACDN,OAAO,GAAG1W,QAAQ,CAAC,KAAK/E,MAAL,CAAYgc,YAAb,CAAlB;YACAvX,aAAa,GAAG,IAAhB;UACH;;UACD,IAAI,KAAK5E,MAAL,CAAYob,0BAAZ,IAA0C,KAAKiB,wBAAL,CAA8BT,OAA9B,EAAuC1W,QAAvC,CAA9C,EAAgG;YAC5F,OAAO,IAAP;UACH;QACJ;;QACD,IAAI,KAAKlF,MAAL,CAAY4E,aAAZ,KAA8B,YAA9B,IAA8CM,QAAQ,CAAC,KAAK/E,MAAL,CAAYS,EAAb,CAAR,KAA6Bmb,UAAU,CAAC,KAAK5b,MAAL,CAAYS,EAAb,CAAzF,EAA2G;UACvGsE,QAAQ,CAAC,KAAK/E,MAAL,CAAYgc,YAAb,CAAR,GAAqCJ,UAAU,CAAC,KAAK5b,MAAL,CAAYS,EAAb,CAA/C;QACH,CAFD,MAGK,IAAI,KAAKZ,MAAL,CAAY4E,aAAZ,KAA8B,qBAAlC,EAAyD;UAC1DM,QAAQ,CAAC,KAAK/E,MAAL,CAAYS,EAAb,CAAR,GAA2B,KAAKZ,MAAL,CAAYqI,SAAZ,CAAsB+T,aAAtB,EAA3B;UACAlX,QAAQ,CAAC,KAAK/E,MAAL,CAAYmc,WAAb,CAAR,GAAoCP,UAAU,CAAC,KAAK5b,MAAL,CAAYS,EAAb,CAA9C;QACH;MACJ;;MACD,IAAI4a,qBAAJ,EAA2B;QACvB,KAAKe,iBAAL,CAAuBrX,QAAvB,EAAiC,MAAjC,EAAyCN,aAAzC;MACH,CAFD,MAGK;QACD,KAAK5E,MAAL,CAAYwc,SAAZ,CAAsBtX,QAAtB,EAAgCN,aAAhC;MACH;IACJ,CA7CD,MA8CK;MACD,KAAK5E,MAAL,CAAY4E,aAAZ,GAA4B,KAA5B;;MACA,IAAI4W,qBAAJ,EAA2B;QACvB,KAAKe,iBAAL,CAAuBrX,QAAvB,EAAiC,KAAKlF,MAAL,CAAY4E,aAA7C;MACH,CAFD,MAGK;QACDM,QAAQ,CAAC,KAAK/E,MAAL,CAAYS,EAAb,CAAR,GAA2B,KAAKZ,MAAL,CAAYqI,SAAZ,CAAsB+T,aAAtB,EAA3B;QACA,KAAKpc,MAAL,CAAYyc,QAAZ,CAAqBvX,QAArB;MACH;IACJ;;IACD,OAAO,KAAKlF,MAAL,CAAYkb,aAAZ,CAA0BI,OAAjC;EACH,CAjED;;EAkEAvb,WAAW,CAACW,SAAZ,CAAsB6a,eAAtB,GAAwC,UAAUrW,QAAV,EAAoB;IACxD,IAAIiK,YAAY,GAAG,IAAnB;;IACA,IAAI,CAACpR,iBAAiB,CAAC,KAAKiC,MAAL,CAAYkM,YAAb,CAAlB,IAAgD,CAACnO,iBAAiB,CAAC,KAAKiC,MAAL,CAAYkM,YAAZ,CAAyBJ,kBAA1B,CAAlE,IACG,KAAK9L,MAAL,CAAYkM,YAAZ,CAAyBJ,kBAAzB,CAA4CzC,MAA5C,GAAqD,CAD5D,EAC+D;MAC3D,IAAIqT,gBAAgB,GAAG,KAAK1c,MAAL,CAAYkM,YAAZ,CAAyBJ,kBAAzB,CAA4C9C,KAA5C,CAAkD,CAAC,CAAnD,EAAsD,CAAtD,CAAvB;MACAmG,YAAY,GAAGjK,QAAQ,CAACwX,gBAAgB,CAACtN,KAAlB,CAAvB;IACH;;IACD,OAAOD,YAAP;EACH,CARD;;EASApP,WAAW,CAACW,SAAZ,CAAsBga,qBAAtB,GAA8C,UAAUlS,SAAV,EAAqB;IAC/D,IAAIyR,WAAW,GAAG,KAAKtD,eAAL,CAAqBnO,SAArB,CAAlB;IACA,IAAItD,QAAQ,GAAG,EAAf;;IACA,KAAK,IAAIiE,EAAE,GAAG,CAAT,EAAYwT,aAAa,GAAG1C,WAAjC,EAA8C9Q,EAAE,GAAGwT,aAAa,CAACtT,MAAjE,EAAyEF,EAAE,EAA3E,EAA+E;MAC3E,IAAIgR,cAAc,GAAGwC,aAAa,CAACxT,EAAD,CAAlC;MACA,IAAI4N,UAAU,GAAGoD,cAAc,CAACrN,IAAf,IAAuB,KAAKwE,aAAL,CAAmB6I,cAAnB,CAAxC;;MACA,IAAI,CAACpc,iBAAiB,CAACgZ,UAAD,CAAlB,IAAkCA,UAAU,KAAK,EAArD,EAAyD;QACrD7R,QAAQ,CAAC6R,UAAD,CAAR,GAAuB,KAAK6F,mBAAL,CAAyBzC,cAAzB,CAAvB;MACH;IACJ;;IACD,OAAOjV,QAAP;EACH,CAXD;;EAYAnF,WAAW,CAACW,SAAZ,CAAsBka,uBAAtB,GAAgD,UAAU1V,QAAV,EAAoB;IAChE,IAAI,CAACnH,iBAAiB,CAACmH,QAAQ,CAAC,KAAK/E,MAAL,CAAYgK,OAAb,CAAT,CAAtB,EAAuD;MACnDjF,QAAQ,CAAC,KAAK/E,MAAL,CAAYgK,OAAb,CAAR,GAAgCjF,QAAQ,CAAC,KAAK/E,MAAL,CAAYgK,OAAb,CAAR,IAAiC,KAAKnK,MAAL,CAAY4C,aAAZ,CAA0BzC,MAA1B,CAAiCgK,OAAjC,CAAyCoL,OAA1E,IACzB,KAAKtV,IAAL,CAAUsC,WAAV,CAAsB,UAAtB,CADP;IAEH;;IACD,IAAI,CAACxE,iBAAiB,CAACmH,QAAQ,CAAC,KAAK/E,MAAL,CAAYkK,QAAb,CAAT,CAAtB,EAAwD;MACpDnF,QAAQ,CAAC,KAAK/E,MAAL,CAAYkK,QAAb,CAAR,GAAiCnF,QAAQ,CAAC,KAAK/E,MAAL,CAAYkK,QAAb,CAAR,IAAkC,KAAKrK,MAAL,CAAY4C,aAAZ,CAA0BzC,MAA1B,CAAiCkK,QAAjC,CAA0CkL,OAA7G;IACH;;IACD,IAAI,CAACxX,iBAAiB,CAACmH,QAAQ,CAAC,KAAK/E,MAAL,CAAYkM,WAAb,CAAT,CAAtB,EAA2D;MACvDnH,QAAQ,CAAC,KAAK/E,MAAL,CAAYkM,WAAb,CAAR,GAAoCnH,QAAQ,CAAC,KAAK/E,MAAL,CAAYkM,WAAb,CAAR,IAAqC,KAAKrM,MAAL,CAAY4C,aAAZ,CAA0BzC,MAA1B,CAAiCkM,WAAjC,CAA6CkJ,OAAtH;IACH;EACJ,CAXD;;EAYAxV,WAAW,CAACW,SAAZ,CAAsBsa,oBAAtB,GAA6C,UAAUrG,SAAV,EAAqB1F,OAArB,EAA8BmL,KAA9B,EAAqC;IAC9E,IAAIyC,YAAJ;IACA,IAAIC,SAAS,GAAG,KAAK3Y,gBAArB;IACA,IAAI+I,QAAQ,GAAG,KAAKpG,WAAL,CAAiB,oCAAjB,EAAuDY,KAAtE;;IACA,IAAI0S,KAAK,KAAK,KAAKna,IAAL,CAAUsC,WAAV,CAAsB,IAAtB,CAAd,EAA2C;MACvC,IAAIwa,WAAW,GAAG,KAAK/c,MAAL,CAAY0G,eAAZ,CAA4BnH,KAA9C;MACA,IAAIyd,cAAc,GAAG,EAArB;;MACA,IAAI,CAAC,KAAKhd,MAAL,CAAY4E,aAAZ,KAA8B,YAA9B,IAA8C,KAAK5E,MAAL,CAAY4E,aAAZ,KAA8B,qBAA7E,KACG,CAAC7G,iBAAiB,CAACgf,WAAD,CADzB,EACwC;QACpC,IAAIE,cAAc,GAAGF,WAAW,CAAC,KAAK/c,MAAL,CAAYI,WAAZ,CAAwBE,SAAzB,CAAhC;QACA,IAAI4c,YAAY,GAAG,KAAKld,MAAL,CAAYqI,SAAZ,CAAsB8U,eAAtB,CAAsC,KAAK3W,SAA3C,EAAsDyW,cAAtD,CAAnB;;QACA,IAAIC,YAAY,CAAC7T,MAAb,GAAsB,CAA1B,EAA6B;UACzB2T,cAAc,GAAG,KAAKhd,MAAL,CAAYqI,SAAZ,CAAsB+U,oBAAtB,CAA2CF,YAA3C,EAAyDD,cAAzD,CAAjB;QACH,CAFD,MAGK;UACD,IAAII,OAAO,GAAG,KAAKrd,MAAL,CAAYqI,SAAZ,CAAsBiV,YAAtB,CAAmCP,WAAW,CAAC,KAAK/c,MAAL,CAAYI,WAAZ,CAAwBQ,EAAzB,CAA9C,CAAd;UACAoc,cAAc,GAAG,KAAKhd,MAAL,CAAYqI,SAAZ,CAAsB+U,oBAAtB,CAA2C,CAACC,OAAD,CAA3C,EAAsDJ,cAAtD,CAAjB;QACH;;QACD,IAAI,KAAKjd,MAAL,CAAY4E,aAAZ,KAA8B,YAA9B,IACG,CAAC7G,iBAAiB,CAAC,KAAKyI,SAAL,CAAe,KAAKxG,MAAL,CAAYI,WAAZ,CAAwBmd,mBAAvC,CAAD,CADzB,EACwF;UACpFP,cAAc,CAACjD,IAAf,CAAoB,KAAKvT,SAAzB;QACH;MACJ;;MACD,IAAIwW,cAAc,CAAC3T,MAAf,GAAwB,CAA5B,EAA+B;QAC3BwT,YAAY,GAAG,mBAAf;MACH;;MACD,IAAI,KAAK/V,WAAL,CAAiB,sCAAjB,EAAyDY,KAAzD,KAAmE,OAAnE,IACA,KAAKZ,WAAL,CAAiB,6BAAjB,EAAgDY,KAAhD,GAAwDiN,SAD5D,EACuE;QACnEkI,YAAY,GAAG,cAAf;MACH;;MACD,IAAI9e,iBAAiB,CAAC8e,YAAD,CAArB,EAAqC;QACjC,IAAIW,KAAK,GAAGV,SAAS,CAACpV,KAAV,CAAgB+V,KAAhB,CAAsB,GAAtB,EAA2B,CAA3B,EAA8BA,KAA9B,CAAoC,GAApC,EAAyC,CAAzC,EAA4CA,KAA5C,CAAkD,GAAlD,CAAZ;QACA,IAAIC,GAAG,GAAG;UAAE,MAAM,CAAR;UAAW,MAAM,CAAjB;UAAoB,MAAM,CAA1B;UAA6B,MAAM,CAAnC;UAAsC,MAAM,CAA5C;UAA+C,MAAM,CAArD;UAAwD,MAAM;QAA9D,CAAV;QACA,IAAI3F,IAAI,GAAG,EAAX;QACA,IAAI4F,QAAQ,GAAG,EAAf;QACA,IAAIC,SAAS,GAAG,KAAK,CAArB;;QACA,QAAQd,SAAS,CAACpV,KAAV,CAAgB+V,KAAhB,CAAsB,GAAtB,EAA2B,CAA3B,EAA8BA,KAA9B,CAAoC,GAApC,EAAyC,CAAzC,CAAR;UACI,KAAK,OAAL;YACI,IAAM,CAACxO,OAAO,CAACtH,OAAR,KAAoBgN,SAAS,CAAChN,OAAV,EAArB,KAA6C,OAAO,IAApD,CAAD,GAA+DuF,QAAQ,GAAG,EAA/E,EAAqF;cACjF2P,YAAY,GAAG,aAAf;YACH;;YACD;;UACJ,KAAK,QAAL;YACIW,KAAK,GAAGV,SAAS,CAACpV,KAAV,CAAgB+V,KAAhB,CAAsB,GAAtB,EAA2B,CAA3B,EAA8BA,KAA9B,CAAoC,GAApC,EAAyC,CAAzC,EAA4CA,KAA5C,CAAkD,GAAlD,CAAR;;YACA,KAAK,IAAIpL,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGmL,KAAK,CAACnU,MAAN,IAAgB6D,QAAQ,GAAG,CAA3B,CAA5B,EAA2DmF,KAAK,EAAhE,EAAoE;cAChE0F,IAAI,CAAC1F,KAAD,CAAJ,GAAemL,KAAK,CAACnU,MAAN,GAAegJ,KAAhB,GAAyBqL,GAAG,CAACF,KAAK,CAACnL,KAAD,CAAN,CAA5B,GAA6C0F,IAAI,CAAC1F,KAAK,GAAGmL,KAAK,CAACnU,MAAf,CAAJ,GAA8B,IAAI6D,QAA7F;YACH;;YACD0Q,SAAS,GAAG7F,IAAI,CAAC8F,IAAL,CAAU,UAAUC,CAAV,EAAaC,CAAb,EAAgB;cAAE,OAAOD,CAAC,GAAGC,CAAX;YAAe,CAA3C,CAAZ;;YACA,KAAK,IAAI1L,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGuL,SAAS,CAACvU,MAAtC,EAA8CgJ,KAAK,EAAnD,EAAuD;cACnDsL,QAAQ,CAAC5D,IAAT,CAAc6D,SAAS,CAACvL,KAAD,CAAT,GAAmBuL,SAAS,CAACvL,KAAK,GAAG,CAAT,CAA1C;YACH;;YACD,IAAM,CAACpD,OAAO,CAACtH,OAAR,KAAoBgN,SAAS,CAAChN,OAAV,EAArB,KAA6C,OAAO,IAApD,CAAD,IAA+DqW,IAAI,CAACrQ,GAAL,CAASsQ,KAAT,CAAeD,IAAf,EAAqBL,QAArB,IAAiC,EAAjG,IACG5f,iBAAiB,CAACmP,QAAD,CADxB,EACoC;cAChC2P,YAAY,GAAG,aAAf;YACH;;YACD;;UACJ,KAAK,SAAL;YACI,IAAI5N,OAAO,CAACtH,OAAR,MAAqB,IAAIpH,IAAJ,CAAS,CAACoU,SAAV,EAAqBuJ,QAArB,CAA8BvJ,SAAS,CAACwJ,QAAV,KAAuBjR,QAArD,CAAzB,EAAyF;cACrF2P,YAAY,GAAG,aAAf;YACH;;YACD;;UACJ,KAAK,QAAL;YACI,IAAI5N,OAAO,CAACtH,OAAR,MAAqB,IAAIpH,IAAJ,CAAS,CAACoU,SAAV,EAAqByJ,WAArB,CAAiCzJ,SAAS,CAAC0J,WAAV,KAA0BnR,QAA3D,CAAzB,EAA+F;cAC3F2P,YAAY,GAAG,aAAf;YACH;;YACD;QA7BR;MA+BH;IACJ,CAhED,MAiEK;MACD,IAAI5N,OAAO,CAACtH,OAAR,MAAqB,IAAIpH,IAAJ,CAAS,CAACoU,SAAV,EAAqBuJ,QAArB,CAA8BvJ,SAAS,CAACwJ,QAAV,KAAuBjR,QAArD,CAAzB,EAAyF;QACrF2P,YAAY,GAAG,aAAf;MACH;;MACD,IAAI9e,iBAAiB,CAAC8e,YAAD,CAArB,EAAqC;QACjC,KAAK7c,MAAL,CAAY8E,UAAZ,CAAuBwZ,WAAvB,CAAmCxJ,IAAnC;MACH;IACJ;;IACD,IAAI/W,iBAAiB,CAACmP,QAAD,CAArB,EAAiC;MAC7B2P,YAAY,GAAG,aAAf;IACH;;IACD,OAAOA,YAAP;EACH,CAjFD;;EAkFA9c,WAAW,CAACW,SAAZ,CAAsB6d,kBAAtB,GAA2C,UAAUC,OAAV,EAAmBjf,KAAnB,EAA0B;IACjE,IAAIkf,QAAJ;;IACA,KAAK,IAAIpM,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGmM,OAAO,CAACnV,MAApC,EAA4CgJ,KAAK,EAAjD,EAAqD;MACjD,IAAI9S,KAAK,CAAC,KAAKY,MAAL,CAAYG,SAAb,CAAL,CAA6Boe,OAA7B,OAA2CF,OAAO,CAACnM,KAAD,CAAP,CAAe,KAAKlS,MAAL,CAAYG,SAA3B,EAAsCoe,OAAtC,EAA/C,EAAgG;QAC5FD,QAAQ,GAAGpM,KAAX;QACA;MACH;IACJ;;IACD,OAAOoM,QAAP;EACH,CATD;;EAUA1e,WAAW,CAACW,SAAZ,CAAsBgW,UAAtB,GAAmC,UAAUlS,IAAV,EAAgB;IAC/C,IAAIA,IAAI,CAAC,KAAKrE,MAAL,CAAYoF,QAAb,CAAR,EAAgC;MAC5B,IAAIwS,IAAI,GAAGvY,IAAI,CAACwY,OAAL,CAAa,IAAIzX,IAAJ,CAAS,CAACiE,IAAI,CAAC,KAAKrE,MAAL,CAAYK,OAAb,CAAd,CAAb,EAAmD,CAAC,CAApD,EAAuDmH,OAAvD,EAAX;MACAnD,IAAI,CAAC,KAAKrE,MAAL,CAAYK,OAAb,CAAJ,GAA6B,CAACgE,IAAI,CAAC,KAAKrE,MAAL,CAAYG,SAAb,CAAL,GAA+ByX,IAAhC,GAAwCvT,IAAI,CAAC,KAAKrE,MAAL,CAAYK,OAAb,CAA5C,GAAoE,IAAID,IAAJ,CAASwX,IAAT,CAAhG;IACH;EACJ,CALD;;EAMAhY,WAAW,CAACW,SAAZ,CAAsB2b,wBAAtB,GAAiD,UAAUX,OAAV,EAAmBiD,WAAnB,EAAgCC,QAAhC,EAA0C;IACvF,IAAItY,KAAK,GAAG,IAAZ;;IACA,IAAIsY,QAAQ,KAAK,KAAK,CAAtB,EAAyB;MACrBA,QAAQ,GAAG,KAAKpY,SAAhB;IACH;;IACD,IAAIqY,SAAS,GAAG,KAAK7e,MAAL,CAAY8e,kBAAZ,CAA+BpD,OAA/B,CAAhB;IACA,IAAIqD,aAAa,GAAG,KAAK/e,MAAL,CAAYgc,UAAZ,CAAuBlK,MAAvB,CAA8B,UAAUtN,IAAV,EAAgB;MAC9D,OAAOA,IAAI,CAAC8B,KAAK,CAACnG,MAAN,CAAagc,YAAd,CAAJ,KAAoCT,OAA3C;IACH,CAFmB,CAApB;IAGAqD,aAAa,CAACC,GAAd,CAAkB,UAAUxa,IAAV,EAAgB;MAAE,OAAOqa,SAAS,CAAC9E,IAAV,CAAe5b,MAAM,CAAC,EAAD,EAAKqG,IAAL,CAArB,CAAP;IAA0C,CAA9E;IACAma,WAAW,GAAGxgB,MAAM,CAAC,EAAD,EAAKwgB,WAAL,CAApB;IACA,KAAKjI,UAAL,CAAgBiI,WAAhB;;IACA,KAAK,IAAIxV,EAAE,GAAG,CAAT,EAAY8V,WAAW,GAAGJ,SAA/B,EAA0C1V,EAAE,GAAG8V,WAAW,CAAC5V,MAA3D,EAAmEF,EAAE,EAArE,EAAyE;MACrE,IAAI3E,IAAI,GAAGya,WAAW,CAAC9V,EAAD,CAAtB;MACA,KAAKuN,UAAL,CAAgBlS,IAAhB;IACH;;IACD,KAAKxE,MAAL,CAAYqI,SAAZ,CAAsB6W,UAAtB,CAAiCL,SAAjC;IACA,IAAIxM,KAAK,GAAG,KAAKkM,kBAAL,CAAwBM,SAAxB,EAAmCD,QAAnC,CAAZ;;IACA,IAAI7gB,iBAAiB,CAACsU,KAAD,CAArB,EAA8B;MAC1B,OAAO,KAAP;IACH;;IACD,IAAIA,KAAK,KAAK,CAAd,EAAiB;MACb,IAAI,CAACtU,iBAAiB,CAAC8gB,SAAS,CAACxM,KAAK,GAAG,CAAT,CAAV,CAAtB,EAA8C;QAC1C,IAAI,EAAE7S,IAAI,CAACsY,SAAL,CAAe,IAAIvX,IAAJ,CAAS,CAACse,SAAS,CAACxM,KAAK,GAAG,CAAT,CAAT,CAAqB,KAAKlS,MAAL,CAAYG,SAAjC,CAAV,CAAf,EAAuEqH,OAAvE,KACFnI,IAAI,CAACsY,SAAL,CAAe,IAAIvX,IAAJ,CAAS,CAACoe,WAAW,CAAC,KAAKxe,MAAL,CAAYK,OAAb,CAArB,CAAf,EAA4DmH,OAA5D,EADA,KAECnI,IAAI,CAACsY,SAAL,CAAe,IAAIvX,IAAJ,CAAS,CAACse,SAAS,CAACA,SAAS,CAACxV,MAAV,GAAmB,CAApB,CAAT,CAAgC,KAAKlJ,MAAL,CAAYK,OAA5C,CAAV,CAAf,EAAgFmH,OAAhF,MACGnI,IAAI,CAACsY,SAAL,CAAe,IAAIvX,IAAJ,CAAS,CAACoe,WAAW,CAAC,KAAKxe,MAAL,CAAYG,SAAb,CAArB,CAAf,EAA8DqH,OAA9D,EAHR,EAGkF;UAC9E,KAAK3H,MAAL,CAAY8E,UAAZ,CAAuBuW,6BAAvB,CAAqD,cAArD;UACA,OAAO,IAAP;QACH,CAND,MAOK,IAAI7b,IAAI,CAACsY,SAAL,CAAe,IAAIvX,IAAJ,CAAS,CAACse,SAAS,CAACA,SAAS,CAACxV,MAAV,GAAmB,CAApB,CAAT,CAAgC,KAAKlJ,MAAL,CAAYK,OAA5C,CAAV,CAAf,EAAgFmH,OAAhF,KACLnI,IAAI,CAACsY,SAAL,CAAe,IAAIvX,IAAJ,CAAS,CAACoe,WAAW,CAAC,KAAKxe,MAAL,CAAYG,SAAb,CAArB,CAAf,EAA8DqH,OAA9D,EADC,EACwE;UACzE,KAAK3H,MAAL,CAAY8E,UAAZ,CAAuBuW,6BAAvB,CAAqD,iBAArD;UACA,OAAO,IAAP;QACH;MACJ;;MACD,OAAO,KAAP;IACH,CAhBD,MAiBK;MACD,IAAIhJ,KAAK,KAAKwM,SAAS,CAACxV,MAAV,GAAmB,CAAjC,EAAoC;QAChC,IAAI,EAAE7J,IAAI,CAACsY,SAAL,CAAe,IAAIvX,IAAJ,CAAS,CAACse,SAAS,CAACxM,KAAK,GAAG,CAAT,CAAT,CAAqB,KAAKlS,MAAL,CAAYK,OAAjC,CAAV,CAAf,EAAqEmH,OAArE,KACFnI,IAAI,CAACsY,SAAL,CAAe,IAAIvX,IAAJ,CAAS,CAACoe,WAAW,CAAC,KAAKxe,MAAL,CAAYG,SAAb,CAArB,CAAf,EAA8DqH,OAA9D,EADA,KAECnI,IAAI,CAACsY,SAAL,CAAe,IAAIvX,IAAJ,CAAS,CAACse,SAAS,CAAEA,SAAS,CAACxV,MAAV,GAAmB,CAApB,GAAyBgJ,KAA1B,CAAT,CAA0C,KAAKlS,MAAL,CAAYG,SAAtD,CAAV,CAAf,EAA4FqH,OAA5F,MACGnI,IAAI,CAACsY,SAAL,CAAe,IAAIvX,IAAJ,CAAS,CAACoe,WAAW,CAAC,KAAKxe,MAAL,CAAYK,OAAb,CAArB,CAAf,EAA4DmH,OAA5D,EAHR,EAGgF;UAC5E,KAAK3H,MAAL,CAAY8E,UAAZ,CAAuBuW,6BAAvB,CAAqD,cAArD;UACA,OAAO,IAAP;QACH,CAND,MAOK,IAAI7b,IAAI,CAACsY,SAAL,CAAe,IAAIvX,IAAJ,CAAS,CAACse,SAAS,CAAEA,SAAS,CAACxV,MAAV,GAAmB,CAApB,GAAyBgJ,KAA1B,CAAT,CAA0C,KAAKlS,MAAL,CAAYK,OAAtD,CAAV,CAAf,EAA0FmH,OAA1F,KACLnI,IAAI,CAACsY,SAAL,CAAe,IAAIvX,IAAJ,CAAS,CAACoe,WAAW,CAAC,KAAKxe,MAAL,CAAYG,SAAb,CAArB,CAAf,EAA8DqH,OAA9D,EADC,EACwE;UACzE,KAAK3H,MAAL,CAAY8E,UAAZ,CAAuBuW,6BAAvB,CAAqD,iBAArD;UACA,OAAO,IAAP;QACH;MACJ,CAbD,MAcK,IAAI,EAAE,CAAE7b,IAAI,CAACsY,SAAL,CAAe,IAAIvX,IAAJ,CAAS,CAACse,SAAS,CAACxM,KAAK,GAAG,CAAT,CAAT,CAAqB,KAAKlS,MAAL,CAAYK,OAAjC,CAAV,CAAf,EAAqEmH,OAArE,KACTnI,IAAI,CAACsY,SAAL,CAAe,IAAIvX,IAAJ,CAAS,CAACoe,WAAW,CAAC,KAAKxe,MAAL,CAAYG,SAAb,CAArB,CAAf,EAA8DqH,OAA9D,EADQ,IAEPnI,IAAI,CAACsY,SAAL,CAAe,IAAIvX,IAAJ,CAAS,CAACse,SAAS,CAAC,CAAD,CAAT,CAAa,KAAK1e,MAAL,CAAYG,SAAzB,CAAV,CAAf,EAA+DqH,OAA/D,KACGnI,IAAI,CAACsY,SAAL,CAAe,IAAIvX,IAAJ,CAAS,CAACoe,WAAW,CAAC,KAAKxe,MAAL,CAAYG,SAAb,CAArB,CAAf,EAA8DqH,OAA9D,EAHG,MAILnI,IAAI,CAACsY,SAAL,CAAe,IAAIvX,IAAJ,CAAS,CAACse,SAAS,CAACxM,KAAK,GAAG,CAAT,CAAT,CAAqB,KAAKlS,MAAL,CAAYG,SAAjC,CAAV,CAAf,EAAuEqH,OAAvE,KACEnI,IAAI,CAACsY,SAAL,CAAe,IAAIvX,IAAJ,CAAS,CAACoe,WAAW,CAAC,KAAKxe,MAAL,CAAYK,OAAb,CAArB,CAAf,EAA4DmH,OAA5D,EADH,IAEInI,IAAI,CAACsY,SAAL,CAAe,IAAIvX,IAAJ,CAAS,CAACse,SAAS,CAACA,SAAS,CAACxV,MAAV,GAAmB,CAApB,CAAT,CAAgC,KAAKlJ,MAAL,CAAYK,OAA5C,CAAV,CAAf,EAAgFmH,OAAhF,KACGnI,IAAI,CAACsY,SAAL,CAAe,IAAIvX,IAAJ,CAAS,CAACoe,WAAW,CAAC,KAAKxe,MAAL,CAAYG,SAAb,CAArB,CAAf,EAA8DqH,OAA9D,EAPD,CAAF,CAAJ,EAOmF;QACpF,KAAK3H,MAAL,CAAY8E,UAAZ,CAAuBuW,6BAAvB,CAAqD,cAArD;QACA,OAAO,IAAP;MACH,CAVI,MAWA,IAAK7b,IAAI,CAACsY,SAAL,CAAe,IAAIvX,IAAJ,CAAS,CAACse,SAAS,CAACxM,KAAK,GAAG,CAAT,CAAT,CAAqB,KAAKlS,MAAL,CAAYK,OAAjC,CAAV,CAAf,EAAqEmH,OAArE,KACNnI,IAAI,CAACsY,SAAL,CAAe,IAAIvX,IAAJ,CAAS,CAACoe,WAAW,CAAC,KAAKxe,MAAL,CAAYG,SAAb,CAArB,CAAf,EAA8DqH,OAA9D,EADK,IAEJnI,IAAI,CAACsY,SAAL,CAAe,IAAIvX,IAAJ,CAAS,CAACse,SAAS,CAACxM,KAAK,GAAG,CAAT,CAAT,CAAqB,KAAKlS,MAAL,CAAYG,SAAjC,CAAV,CAAf,EAAuEqH,OAAvE,KACGnI,IAAI,CAACsY,SAAL,CAAe,IAAIvX,IAAJ,CAAS,CAACoe,WAAW,CAAC,KAAKxe,MAAL,CAAYK,OAAb,CAArB,CAAf,EAA4DmH,OAA5D,EAHH,EAG2E;QAC5E,KAAK3H,MAAL,CAAY8E,UAAZ,CAAuBuW,6BAAvB,CAAqD,iBAArD;QACA,OAAO,IAAP;MACH;IACJ;;IACD,OAAO,KAAP;EACH,CAzED;;EA0EAtb,WAAW,CAACW,SAAZ,CAAsB6b,iBAAtB,GAA0C,UAAUrX,QAAV,EAAoBia,MAApB,EAA4Bva,aAA5B,EAA2C;IACjF,IAAI0B,KAAK,GAAG,IAAZ;;IACA,IAAIoW,gBAAgB,GAAG,KAAK1c,MAAL,CAAYkM,YAAZ,CAAyBJ,kBAAzB,CAA4C9C,KAA5C,CAAkD,CAAC,CAAnD,EAAsD,CAAtD,CAAvB;IACA,IAAImG,YAAY,GAAGjK,QAAQ,CAACwX,gBAAgB,CAACtN,KAAlB,CAA3B;IACAD,YAAY,GAAIA,YAAY,YAAYiQ,KAAzB,GAAkCjQ,YAAlC,GAAiD,CAACA,YAAD,CAAhE;IACA,IAAIkQ,SAAS,GAAG,KAAKrf,MAAL,CAAYkM,YAAZ,CAAyBoT,iBAAzC;IACA,IAAIC,SAAS,GAAG,EAAhB;;IACA,IAAIC,OAAO,GAAG,UAAUjO,CAAV,EAAa;MACvB,IAAIkO,MAAM,GAAGthB,MAAM,CAAC,EAAD,EAAK+G,QAAL,EAAe,IAAf,EAAqB,IAArB,CAAnB;MACAua,MAAM,CAACC,MAAM,CAACvf,MAAP,CAAcS,EAAf,CAAN,GAA2B8e,MAAM,CAAC1f,MAAP,CAAcqI,SAAd,CAAwB+T,aAAxB,EAA3B;MACA,IAAIrE,IAAI,GAAG,EAAX;;MACA,IAAI4H,SAAS,GAAG,YAAY;QACxB,IAAIR,MAAM,KAAK,MAAX,IAAqB5N,CAAC,KAAKpC,YAAY,CAAC9F,MAAb,GAAsB,CAArD,EAAwD;UACpD,IAAI0O,IAAI,CAAC1O,MAAL,GAAc,CAAlB,EAAqB;YACjB0O,IAAI,CAAC,CAAD,CAAJ,CAAQzR,KAAK,CAACnG,MAAN,CAAaS,EAArB,IAA2BsE,QAAQ,CAACoB,KAAK,CAACnG,MAAN,CAAaS,EAAd,CAAnC;;YACA,KAAK,IAAIgf,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG7H,IAAI,CAAC1O,MAAzB,EAAiCuW,CAAC,EAAlC,EAAsC;cAClC7H,IAAI,CAAC6H,CAAD,CAAJ,CAAQtZ,KAAK,CAACnG,MAAN,CAAaS,EAArB,IAA2B0F,KAAK,CAACtG,MAAN,CAAaqI,SAAb,CAAuB+T,aAAvB,CAAqC7K,CAArC,CAA3B;cACAgO,SAAS,CAACxF,IAAV,CAAehC,IAAI,CAAC6H,CAAD,CAAnB;;cACAtZ,KAAK,CAACtG,MAAN,CAAawc,SAAb,CAAuBzE,IAAI,CAAC,CAAD,CAA3B,EAAgCnT,aAAhC;YACH;UACJ,CAPD,MAQK;YACD6a,MAAM,CAACnZ,KAAK,CAACnG,MAAN,CAAaS,EAAd,CAAN,GAA0BsE,QAAQ,CAACoB,KAAK,CAACnG,MAAN,CAAaS,EAAd,CAAlC;;YACA0F,KAAK,CAACtG,MAAN,CAAawc,SAAb,CAAuBiD,MAAvB,EAA+B7a,aAA/B;UACH;QACJ,CAbD,MAcK;UACD,IAAImT,IAAI,CAAC1O,MAAL,GAAc,CAAlB,EAAqB;YACjB,KAAK,IAAIuI,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGmG,IAAI,CAAC1O,MAAzB,EAAiCuI,CAAC,EAAlC,EAAsC;cAClCmG,IAAI,CAACnG,CAAD,CAAJ,CAAQtL,KAAK,CAACnG,MAAN,CAAaS,EAArB,IAA2B0F,KAAK,CAACtG,MAAN,CAAaqI,SAAb,CAAuB+T,aAAvB,CAAqCxK,CAArC,CAA3B;cACA2N,SAAS,CAACxF,IAAV,CAAehC,IAAI,CAACnG,CAAD,CAAnB;YACH;UACJ,CALD,MAMK;YACD6N,MAAM,CAACnZ,KAAK,CAACnG,MAAN,CAAaS,EAAd,CAAN,GAA0B0F,KAAK,CAACtG,MAAN,CAAaqI,SAAb,CAAuB+T,aAAvB,CAAqC7K,CAArC,CAA1B;YACAgO,SAAS,CAACxF,IAAV,CAAe0F,MAAf;UACH;QACJ;MACJ,CA3BD;;MA4BA,IAAIC,MAAM,CAAC1f,MAAP,CAAc4F,iBAAd,CAAgCuL,KAAhC,CAAsCC,SAAtC,IAAoD,CAACrT,iBAAiB,CAACshB,SAAD,CAA1E,EAAwF;QACpF,IAAIQ,YAAY,GAAGnD,gBAAgB,CAAC7M,UAApC;QACA,IAAIiQ,MAAM,GAAGJ,MAAM,CAAC1f,MAAP,CAAc8L,kBAA3B;QACA,IAAIuG,KAAK,GAAG,KAAK,CAAjB;;QACA,IAAIyN,MAAM,CAACzW,MAAP,GAAgB,CAApB,EAAuB;UACnBgJ,KAAK,GAAG7S,IAAI,CAACugB,eAAL,CAAqBF,YAArB,EAAmCnD,gBAAgB,CAACzM,OAApD,EAA6Dd,YAAY,CAACoC,CAAD,CAAzE,EAA8EkO,MAA9E,EAAsFK,MAAtF,CAAR;QACH,CAFD,MAGK;UACDzN,KAAK,GAAG7S,IAAI,CAACugB,eAAL,CAAqBF,YAArB,EAAmCnD,gBAAgB,CAACzM,OAApD,EAA6Dd,YAAY,CAACoC,CAAD,CAAzE,CAAR;QACH;;QACD,IAAIc,KAAK,GAAG,CAAZ,EAAe;UACX,OAAO;YAAE3K,KAAK,EAAE,KAAK;UAAd,CAAP;QACH;;QACD,IAAIsY,SAAS,GAAGH,YAAY,CAACxN,KAAD,CAAZ,CAAoBqK,gBAAgB,CAAC3K,YAArC,CAAhB;QACA,IAAID,MAAM,GAAGuN,SAAS,CAACvN,MAAV,CAAiB,UAAU4L,GAAV,EAAe;UAAE,OAAOA,GAAG,CAACvO,YAAJ,CAAiBuN,gBAAgB,CAACzM,OAAlC,MAA+Cd,YAAY,CAACoC,CAAD,CAAlE;QAAwE,CAA1G,EACTO,MADS,CACF,UAAU4L,GAAV,EAAe;UAAE,OAAOA,GAAG,CAACvO,YAAJ,CAAiBuN,gBAAgB,CAAC3K,YAAlC,MAAoDiO,SAA3D;QAAuE,CADtF,EACwF,CADxF,CAAb;QAEA,IAAIC,UAAU,GAAGnO,MAAM,CAACmO,UAAxB;;QACA,KAAK,IAAIC,OAAO,GAAG,CAAnB,EAAsBA,OAAO,GAAGR,MAAM,CAAC1f,MAAP,CAAckM,YAAd,CAA2BJ,kBAA3B,CAA8CzC,MAA9E,EAAsF6W,OAAO,EAA7F,EAAiG;UAC7F,IAAI9Q,KAAK,GAAGsQ,MAAM,CAAC1f,MAAP,CAAckM,YAAd,CAA2BJ,kBAA3B,CAA8CoU,OAA9C,EAAuD9Q,KAAnE;UACAqQ,MAAM,CAACrQ,KAAD,CAAN,GAAiB6Q,UAAU,CAACC,OAAD,CAAV,YAA+Bd,KAAhC,GAAyCa,UAAU,CAACC,OAAD,CAAV,CAAoB,CAApB,CAAzC,GAAkED,UAAU,CAACC,OAAD,CAA5F;QACH;;QACDP,SAAS;MACZ,CAtBD,MAuBK;QACD,KAAK,IAAItN,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGqN,MAAM,CAAC1f,MAAP,CAAckM,YAAd,CAA2BJ,kBAA3B,CAA8CzC,MAA9C,GAAuD,CAAnF,EAAsFgJ,KAAK,EAA3F,EAA+F;UAC3F,IAAIjD,KAAK,GAAGsQ,MAAM,CAAC1f,MAAP,CAAckM,YAAd,CAA2BJ,kBAA3B,CAA8CuG,KAA9C,EAAqDjD,KAAjE;;UACA,IAAIqQ,MAAM,CAACrQ,KAAD,CAAN,YAAyBgQ,KAAzB,IAAkCK,MAAM,CAACrQ,KAAD,CAAN,CAAc/F,MAAd,GAAuB,CAA7D,EAAgE;YAC5D,KAAK,IAAIuW,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,MAAM,CAACrQ,KAAD,CAAN,CAAc/F,MAAlC,EAA0CuW,CAAC,EAA3C,EAA+C;cAC3C,IAAIO,OAAO,GAAGhiB,MAAM,CAAC,EAAD,EAAKshB,MAAL,EAAa,IAAb,EAAmB,IAAnB,CAApB;cACAU,OAAO,CAAC/Q,KAAD,CAAP,GAAiBlK,QAAQ,CAACkK,KAAD,CAAR,CAAgBwQ,CAAhB,CAAjB;cACAO,OAAO,CAACzD,gBAAgB,CAACtN,KAAlB,CAAP,GAAkCD,YAAY,CAACoC,CAAD,CAA9C;cACAwG,IAAI,CAACgC,IAAL,CAAUoG,OAAV;YACH;UACJ,CAPD,MAQK;YACD,IAAIpI,IAAI,CAAC1O,MAAL,KAAgB,CAApB,EAAuB;cACnBoW,MAAM,CAACrQ,KAAD,CAAN,GAAiBlK,QAAQ,CAACkK,KAAD,CAAR,YAA2BgQ,KAA5B,GACZla,QAAQ,CAACkK,KAAD,CAAR,CAAgB,CAAhB,CADY,GACSlK,QAAQ,CAACkK,KAAD,CADjC;cAEAqQ,MAAM,CAAC/C,gBAAgB,CAACtN,KAAlB,CAAN,GAAiCD,YAAY,CAACoC,CAAD,CAA7C;YACH,CAJD,MAKK;cACD,KAAK,IAAI6O,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGrI,IAAI,CAAC1O,MAAzB,EAAiC+W,CAAC,EAAlC,EAAsC;gBAClCrI,IAAI,CAACqI,CAAD,CAAJ,CAAQhR,KAAR,IAAkBlK,QAAQ,CAACkK,KAAD,CAAR,YAA2BgQ,KAA5B,GACbla,QAAQ,CAACkK,KAAD,CAAR,CAAgB,CAAhB,CADa,GACQlK,QAAQ,CAACkK,KAAD,CADjC;cAEH;YACJ;UACJ;QACJ;;QACDqQ,MAAM,CAAC/C,gBAAgB,CAACtN,KAAlB,CAAN,GAAiCD,YAAY,CAACoC,CAAD,CAA7C;QACAoO,SAAS;MACZ;IACJ,CAnFD;;IAoFA,IAAID,MAAM,GAAG,IAAb;;IACA,KAAK,IAAInO,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGpC,YAAY,CAAC9F,MAAjC,EAAyCkI,CAAC,EAA1C,EAA8C;MAC1C,IAAI8O,OAAO,GAAGb,OAAO,CAACjO,CAAD,CAArB;;MACA,IAAI,OAAO8O,OAAP,KAAmB,QAAvB,EACI,OAAOA,OAAO,CAAC3Y,KAAf;IACP;;IACD,IAAI6X,SAAS,CAAClW,MAAV,GAAmB,CAAvB,EAA0B;MACtB,KAAK,IAAIF,EAAE,GAAG,CAAT,EAAYmX,WAAW,GAAGf,SAA/B,EAA0CpW,EAAE,GAAGmX,WAAW,CAACjX,MAA3D,EAAmEF,EAAE,EAArE,EAAyE;QACrE,IAAIoX,OAAO,GAAGD,WAAW,CAACnX,EAAD,CAAzB;QACAoX,OAAO,CAAC,KAAKpgB,MAAL,CAAYod,mBAAb,CAAP,GAA2C,IAA3C;QACAgD,OAAO,CAAC,KAAKpgB,MAAL,CAAYgc,YAAb,CAAP,GAAoC,IAApC;MACH;;MACD,KAAKnc,MAAL,CAAYyc,QAAZ,CAAqB8C,SAArB;IACH;EACJ,CAzGD;;EA0GAxf,WAAW,CAACW,SAAZ,CAAsBib,kBAAtB,GAA2C,YAAY;IACnD,OAAO,KAAKhb,OAAL,CAAa6C,aAAb,CAA2B,MAAMlE,GAAG,CAACqJ,UAArC,EAAiD0I,YAAjD,CAA8D,SAA9D,CAAP;EACH,CAFD;;EAGAtR,WAAW,CAACW,SAAZ,CAAsBiW,eAAtB,GAAwC,UAAUnO,SAAV,EAAqB;IACzD,IAAIgY,QAAQ,GAAG,EAAf;;IACA,IAAIhY,SAAS,KAAKlJ,GAAG,CAAC8B,yBAAtB,EAAiD;MAC7Cof,QAAQ,GAAG,GAAGxX,KAAH,CAASC,IAAT,CAAc,KAAKtI,OAAL,CAAagO,gBAAb,CAA8B,MAAMlP,WAApC,CAAd,CAAX;IACH,CAFD,MAGK;MACD+gB,QAAQ,GAAG,GAAGxX,KAAH,CAASC,IAAT,CAAc,KAAKjJ,MAAL,CAAYW,OAAZ,CAAoBgO,gBAApB,CAAqC,MAAMnG,SAAN,GAAkB,IAAlB,GAAyB/I,WAA9D,CAAd,CAAX;IACH;;IACD,OAAO+gB,QAAP;EACH,CATD;;EAUAzgB,WAAW,CAACW,SAAZ,CAAsBkc,mBAAtB,GAA4C,UAAUjc,OAAV,EAAmB;IAC3D,IAAI+G,KAAJ;;IACA,IAAI/G,OAAO,CAACoO,SAAR,CAAkBC,QAAlB,CAA2B,cAA3B,CAAJ,EAAgD;MAC5CtH,KAAK,GAAG/G,OAAO,CAACmO,aAAR,CAAsB,CAAtB,EAAyBpH,KAAjC;IACH,CAFD,MAGK,IAAI/G,OAAO,CAACoO,SAAR,CAAkBC,QAAlB,CAA2B,kBAA3B,CAAJ,EAAoD;MACrDtH,KAAK,GAAG/G,OAAO,CAACmO,aAAR,CAAsB,CAAtB,EAAyBpH,KAAjC;IACH,CAFI,MAGA,IAAI/G,OAAO,CAACoO,SAAR,CAAkBC,QAAlB,CAA2B,gBAA3B,CAAJ,EAAkD;MACnDtH,KAAK,GAAG/G,OAAO,CAACmO,aAAR,CAAsB,CAAtB,EAAyBpH,KAAjC;IACH,CAFI,MAGA,IAAI/G,OAAO,CAACoO,SAAR,CAAkBC,QAAlB,CAA2B,eAA3B,CAAJ,EAAiD;MAClDtH,KAAK,GAAG/G,OAAO,CAACmO,aAAR,CAAsB,CAAtB,EAAyBpH,KAAjC;IACH,CAFI,MAGA,IAAI/G,OAAO,CAACoO,SAAR,CAAkBC,QAAlB,CAA2B,YAA3B,CAAJ,EAA8C;MAC/CtH,KAAK,GAAG/G,OAAO,CAACmO,aAAR,CAAsB,CAAtB,EAAyB8E,OAAjC;IACH,CAFI,MAGA;MACD,IAAIjT,OAAO,CAAC8D,IAAR,KAAiB,UAArB,EAAiC;QAC7BiD,KAAK,GAAG/G,OAAO,CAACiT,OAAhB;MACH,CAFD,MAGK;QACDlM,KAAK,GAAGhJ,kBAAkB,CAAC+hB,QAAnB,CAA4B9f,OAAO,CAAC+G,KAApC,CAAR;MACH;IACJ;;IACD,OAAOA,KAAP;EACH,CA1BD;;EA2BA3H,WAAW,CAACW,SAAZ,CAAsBuW,iBAAtB,GAA0C,UAAUtW,OAAV,EAAmB+G,KAAnB,EAA0B;IAChE,IAAI/G,OAAO,CAACoO,SAAR,CAAkBC,QAAlB,CAA2B,cAA3B,CAAJ,EAAgD;MAC5C,IAAIH,QAAQ,GAAGlO,OAAO,CAACmO,aAAR,CAAsB,CAAtB,CAAf;MACAD,QAAQ,CAACnH,KAAT,GAAiBA,KAAjB;MACAmH,QAAQ,CAAC7I,QAAT;IACH,CAJD,MAKK,IAAIrF,OAAO,CAACoO,SAAR,CAAkBC,QAAlB,CAA2B,kBAA3B,CAAJ,EAAoD;MACrD,IAAIH,QAAQ,GAAGlO,OAAO,CAACmO,aAAR,CAAsB,CAAtB,CAAf;;MACA,IAAID,QAAQ,CAAClO,OAAT,CAAiBoO,SAAjB,CAA2BC,QAA3B,CAAoC1P,GAAG,CAACiI,wBAAxC,CAAJ,EAAuE;QACnE,KAAKlH,eAAL,CAAqBC,SAArB,GAAiC,IAAIC,IAAJ,CAAS,KAAKmH,KAAd,CAAjC;MACH,CAFD,MAGK;QACD,KAAKrH,eAAL,CAAqBG,OAArB,GAA+B,IAAID,IAAJ,CAAS,KAAKmH,KAAd,CAA/B;MACH;;MACDmH,QAAQ,CAACnH,KAAT,GAAiBA,KAAjB;MACAmH,QAAQ,CAAC7I,QAAT;IACH,CAVI,MAWA,IAAIrF,OAAO,CAACoO,SAAR,CAAkBC,QAAlB,CAA2B,gBAA3B,CAAJ,EAAkD;MACnD,IAAIH,QAAQ,GAAGlO,OAAO,CAACmO,aAAR,CAAsB,CAAtB,CAAf;MACAD,QAAQ,CAACnH,KAAT,GAAiBA,KAAjB;MACAmH,QAAQ,CAAC7I,QAAT;IACH,CAJI,MAKA,IAAIrF,OAAO,CAACoO,SAAR,CAAkBC,QAAlB,CAA2B,eAA3B,CAAJ,EAAiD;MAClD,IAAIH,QAAQ,GAAGlO,OAAO,CAACmO,aAAR,CAAsB,CAAtB,CAAf;MACAD,QAAQ,CAACnH,KAAT,GAAiB,EAAjB;MACAmH,QAAQ,CAACnH,KAAT,GAAmBA,KAAK,YAAY0X,KAAlB,GAA2B1X,KAA3B,GAAmC,CAACA,KAAD,CAArD;MACAmH,QAAQ,CAAC7I,QAAT;IACH,CALI,MAMA,IAAIrF,OAAO,CAACoO,SAAR,CAAkBC,QAAlB,CAA2B,YAA3B,CAAJ,EAA8C;MAC/C,IAAIH,QAAQ,GAAGlO,OAAO,CAACmO,aAAR,CAAsB,CAAtB,CAAf;MACAD,QAAQ,CAAC+E,OAAT,GAAmBlM,KAAnB;MACAmH,QAAQ,CAAC7I,QAAT;IACH,CAJI,MAKA;MACD,IAAIrF,OAAO,CAAC8D,IAAR,KAAiB,UAArB,EAAiC;QAC7B9D,OAAO,CAAC+G,KAAR,GAAgBA,KAAK,IAAI,EAAzB;MACH,CAFD,MAGK;QACD/G,OAAO,CAACiT,OAAR,GAAkBlM,KAAlB;MACH;IACJ;EACJ,CAzCD;;EA0CA3H,WAAW,CAACW,SAAZ,CAAsBwW,wBAAtB,GAAiD,UAAUvW,OAAV,EAAmB;IAChE,IAAIA,OAAO,CAACoO,SAAR,CAAkBC,QAAlB,CAA2B,cAA3B,CAAJ,EAAgD;MAC5C,IAAIH,QAAQ,GAAGlO,OAAO,CAACmO,aAAR,CAAsB,CAAtB,CAAf;MACAD,QAAQ,CAACnH,KAAT,GAAiB,KAAK1H,MAAL,CAAY0gB,cAAZ,EAAjB;MACA7R,QAAQ,CAAC7I,QAAT;IACH,CAJD,MAKK,IAAIrF,OAAO,CAACoO,SAAR,CAAkBC,QAAlB,CAA2B,kBAA3B,CAAJ,EAAoD;MACrD,IAAIH,QAAQ,GAAGlO,OAAO,CAACmO,aAAR,CAAsB,CAAtB,CAAf;MACA,IAAI6R,SAAS,GAAG,KAAK3gB,MAAL,CAAY0gB,cAAZ,EAAhB;MACA,KAAKrgB,eAAL,GAAuB;QAAEC,SAAS,EAAEqgB,SAAb;QAAwBngB,OAAO,EAAEmgB;MAAjC,CAAvB;MACA9R,QAAQ,CAACnH,KAAT,GAAiBiZ,SAAjB;MACA9R,QAAQ,CAAC7I,QAAT;IACH,CANI,MAOA,IAAIrF,OAAO,CAACoO,SAAR,CAAkBC,QAAlB,CAA2B,gBAA3B,CAAJ,EAAkD;MACnD,IAAIH,QAAQ,GAAGlO,OAAO,CAACmO,aAAR,CAAsB,CAAtB,CAAf;MACAD,QAAQ,CAACnH,KAAT,GAAiB,IAAjB;MACAmH,QAAQ,CAAC7I,QAAT;IACH,CAJI,MAKA,IAAIrF,OAAO,CAACoO,SAAR,CAAkBC,QAAlB,CAA2B,eAA3B,CAAJ,EAAiD;MAClD,IAAIH,QAAQ,GAAGlO,OAAO,CAACmO,aAAR,CAAsB,CAAtB,CAAf;MACAD,QAAQ,CAACnH,KAAT,GAAiB,EAAjB;MACAmH,QAAQ,CAAC7I,QAAT;IACH,CAJI,MAKA,IAAIrF,OAAO,CAACoO,SAAR,CAAkBC,QAAlB,CAA2B,YAA3B,CAAJ,EAA8C;MAC/C,IAAIH,QAAQ,GAAGlO,OAAO,CAACmO,aAAR,CAAsB,CAAtB,CAAf;MACAD,QAAQ,CAAC+E,OAAT,GAAmB,KAAnB;MACA/E,QAAQ,CAAC7I,QAAT;IACH,CAJI,MAKA;MACD,IAAIrF,OAAO,CAAC8D,IAAR,KAAiB,UAArB,EAAiC;QAC7B9D,OAAO,CAACiT,OAAR,GAAkB,KAAlB;MACH,CAFD,MAGK;QACDjT,OAAO,CAAC+G,KAAR,GAAgB,EAAhB;MACH;IACJ;EACJ,CApCD;;EAqCA3H,WAAW,CAACW,SAAZ,CAAsBoG,WAAtB,GAAoC,UAAU0B,SAAV,EAAqB;IACrD,IAAI7H,OAAO,GAAG,KAAKA,OAAL,CAAa6C,aAAb,CAA2B,MAAMgF,SAAjC,CAAd;IACA,OAAO7H,OAAO,GAAGA,OAAO,CAACmO,aAAR,CAAsB,CAAtB,CAAH,GAA8B,IAA5C;EACH,CAHD;;EAIA/O,WAAW,CAACW,SAAZ,CAAsBsC,WAAtB,GAAoC,UAAUzD,KAAV,EAAiB;IACjD,IAAI,KAAK6G,UAAT,EAAqB;MACjB,KAAKA,UAAL,GAAkB,KAAlB;MACA;IACH;;IACD,QAAQ,KAAKpG,MAAL,CAAY4E,aAApB;MACI,KAAK,gBAAL;QACI,IAAI,CAAC7G,iBAAiB,CAAC,KAAKiC,MAAL,CAAY0G,eAAZ,CAA4BnH,KAA5B,CAAkC,KAAKS,MAAL,CAAYI,WAAZ,CAAwBqT,cAA1D,CAAD,CAAtB,EAAmG;UAC/F,KAAKzT,MAAL,CAAY4E,aAAZ,GAA4B,kBAA5B;QACH,CAFD,MAGK;UACD,KAAK5E,MAAL,CAAY4E,aAAZ,GAA4B,QAA5B;QACH;;QACD;;MACJ,KAAK,YAAL;QACI,KAAK5E,MAAL,CAAY4E,aAAZ,GAA4B,cAA5B;QACA;;MACJ,KAAK,MAAL;QACI,KAAK5E,MAAL,CAAY4E,aAAZ,GAA4B,QAA5B;QACA;;MACJ,KAAK,qBAAL;QACI,IAAI,CAAC7G,iBAAiB,CAAC,KAAKiC,MAAL,CAAY0G,eAAZ,CAA4BnH,KAA5B,CAAkC,KAAKS,MAAL,CAAYI,WAAZ,CAAwBqT,cAA1D,CAAD,CAAtB,EAAmG;UAC/F,KAAKzT,MAAL,CAAY4E,aAAZ,GAA4B,uBAA5B;QACH;;QACD;IAnBR;;IAqBA,KAAKoD,WAAL,GAAmBzI,KAAnB;IACA,KAAKwI,YAAL,GAAoB,KAApB;IACA,KAAKxE,YAAL,CAAkBuR,IAAlB;IACA,KAAK9U,MAAL,CAAY8E,UAAZ,CAAuB8b,eAAvB;EACH,CA9BD;;EA+BA7gB,WAAW,CAACW,SAAZ,CAAsBmgB,2BAAtB,GAAoD,YAAY;IAC5D,IAAI,KAAK7gB,MAAL,CAAYuB,UAAZ,IAA0B,CAAC,KAAKyS,kBAApC,EAAwD;MACpD,KAAKD,kBAAL;IACH;;IACD,OAAO,KAAK5P,gBAAZ;EACH,CALD;;EAMApE,WAAW,CAACW,SAAZ,CAAsBoI,iBAAtB,GAA0C,YAAY;IAClD,IAAIC,YAAY,GAAG,KAAK4N,eAAL,CAAqBrX,GAAG,CAAC8B,yBAAzB,CAAnB;;IACA,KAAK,IAAI+H,EAAE,GAAG,CAAT,EAAY2X,cAAc,GAAG/X,YAAlC,EAAgDI,EAAE,GAAG2X,cAAc,CAACzX,MAApE,EAA4EF,EAAE,EAA9E,EAAkF;MAC9E,IAAIxI,OAAO,GAAGmgB,cAAc,CAAC3X,EAAD,CAA5B;MACA,IAAI0F,QAAQ,GAAG,KAAK,CAApB;;MACA,IAAIlO,OAAO,CAACoO,SAAR,CAAkBC,QAAlB,CAA2B,kBAA3B,CAAJ,EAAoD;QAChDH,QAAQ,GAAGlO,OAAO,CAACmO,aAAnB;MACH,CAFD,MAGK,IAAInO,OAAO,CAACoO,SAAR,CAAkBC,QAAlB,CAA2B,cAA3B,CAAJ,EAAgD;QACjDH,QAAQ,GAAGlO,OAAO,CAACmO,aAAnB;MACH,CAFI,MAGA,IAAInO,OAAO,CAACoO,SAAR,CAAkBC,QAAlB,CAA2B,YAA3B,CAAJ,EAA8C;QAC/CH,QAAQ,GAAGlO,OAAO,CAACmO,aAAnB;MACH,CAFI,MAGA,IAAInO,OAAO,CAACoO,SAAR,CAAkBC,QAAlB,CAA2B,gBAA3B,CAAJ,EAAkD;QACnDH,QAAQ,GAAGlO,OAAO,CAACmO,aAAnB;MACH,CAFI,MAGA,IAAInO,OAAO,CAACoO,SAAR,CAAkBC,QAAlB,CAA2B,eAA3B,CAAJ,EAAiD;QAClDH,QAAQ,GAAGlO,OAAO,CAACmO,aAAnB;MACH;;MACD,IAAID,QAAQ,IAAIA,QAAQ,CAAC,CAAD,CAAxB,EAA6B;QACzBA,QAAQ,CAAC,CAAD,CAAR,CAAY5K,OAAZ;MACH;IACJ;;IACD,IAAI,KAAKyH,SAAT,EAAoB;MAChB,KAAKA,SAAL,CAAezH,OAAf;IACH;EACJ,CA3BD;;EA4BAlE,WAAW,CAACW,SAAZ,CAAsBuD,OAAtB,GAAgC,UAAU8c,QAAV,EAAoB;IAChD,IAAI,KAAK/gB,MAAL,IAAe,CAAC,KAAKA,MAAL,CAAYqZ,WAAhC,EAA6C;MACzC,KAAKrZ,MAAL,CAAYghB,cAAZ,CAA2B,CAAC,gBAAD,CAA3B;IACH;;IACD,KAAKlY,iBAAL;;IACA,IAAI,KAAK3E,gBAAT,EAA2B;MACvB,KAAKA,gBAAL,CAAsBF,OAAtB;MACA,KAAKE,gBAAL,GAAwB,IAAxB;IACH;;IACD,IAAI,KAAKmS,cAAT,EAAyB;MACrB,KAAKA,cAAL,CAAoBrS,OAApB;MACA,KAAKqS,cAAL,GAAsB,IAAtB;IACH;;IACD,IAAI,KAAKtC,kBAAT,EAA6B;MACzB,KAAKA,kBAAL,CAAwB/P,OAAxB;MACA,KAAK+P,kBAAL,GAA0B,IAA1B;IACH;;IACD,IAAI,KAAKzQ,YAAT,EAAuB;MACnB,IAAI,KAAKA,YAAL,CAAkB5C,OAAtB,EAA+B;QAC3BzC,YAAY,CAACD,MAAb,CAAoB,KAAKsF,YAAL,CAAkB5C,OAAtC,EAA+C,SAA/C,EAA0D,KAAKmD,gBAA/D;MACH;;MACD,KAAKP,YAAL,CAAkBU,OAAlB;MACA,KAAKV,YAAL,GAAoB,IAApB;IACH;;IACD,IAAI,KAAK5C,OAAT,EAAkB;MACd1C,MAAM,CAAC,KAAK0C,OAAN,CAAN;MACA,KAAKA,OAAL,GAAe,IAAf;IACH;;IACD,IAAI,CAACogB,QAAL,EAAe;MACX,KAAK9gB,IAAL,GAAY,IAAZ;MACA,KAAKD,MAAL,GAAc,IAAd;MACA,KAAKG,MAAL,GAAc,IAAd;MACA,KAAKuL,SAAL,GAAiB,IAAjB;MACA,KAAKuH,YAAL,GAAoB,IAApB;MACA,KAAK5S,eAAL,GAAuB,IAAvB;IACH;EACJ,CApCD;;EAqCA,OAAON,WAAP;AACH,CApvDgC,EAAjC;;AAqvDA,SAASA,WAAT"},"metadata":{},"sourceType":"module"}