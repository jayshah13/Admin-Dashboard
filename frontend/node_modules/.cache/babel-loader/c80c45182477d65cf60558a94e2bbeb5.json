{"ast":null,"code":"import { MarkdownSelection } from '../../markdown-parser/plugin/markdown-selection';\nimport * as events from '../base/constant';\nimport { getDefaultMDTbStatus } from '../../common/util';\n/**\n * MarkdownToolbarStatus module for refresh the toolbar status\n */\n\nvar MarkdownToolbarStatus =\n/** @class */\nfunction () {\n  function MarkdownToolbarStatus(parent) {\n    this.toolbarStatus = this.prevToolbarStatus = getDefaultMDTbStatus();\n    this.selection = new MarkdownSelection();\n    this.parent = parent;\n    this.element = this.parent.contentModule.getEditPanel();\n    this.addEventListener();\n  }\n\n  MarkdownToolbarStatus.prototype.addEventListener = function () {\n    this.parent.on(events.toolbarRefresh, this.onRefreshHandler, this);\n    this.parent.on(events.destroy, this.removeEventListener, this);\n  };\n\n  MarkdownToolbarStatus.prototype.removeEventListener = function () {\n    this.parent.off(events.toolbarRefresh, this.onRefreshHandler);\n    this.parent.off(events.destroy, this.removeEventListener);\n  };\n\n  MarkdownToolbarStatus.prototype.onRefreshHandler = function (args) {\n    var parentsLines = this.selection.getSelectedParentPoints(this.element);\n    this.toolbarStatus = {\n      orderedlist: args.documentNode ? false : this.isListsApplied(parentsLines, 'OL'),\n      unorderedlist: args.documentNode ? false : this.isListsApplied(parentsLines, 'UL'),\n      formats: this.currentFormat(parentsLines, args.documentNode),\n      bold: args.documentNode ? false : this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('Bold'),\n      italic: args.documentNode ? false : this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('Italic'),\n      inlinecode: args.documentNode ? false : this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('InlineCode'),\n      strikethrough: args.documentNode ? false : this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('StrikeThrough'),\n      subscript: args.documentNode ? false : this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('SubScript'),\n      superscript: args.documentNode ? false : this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('SuperScript'),\n      uppercase: args.documentNode ? false : this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('UpperCase')\n    };\n\n    if (this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('InlineCode')) {\n      this.toolbarStatus.formats = 'pre';\n    }\n\n    var tbStatusString = JSON.stringify(this.toolbarStatus);\n    this.parent.notify(events.toolbarUpdated, this.toolbarStatus);\n\n    if (JSON.stringify(this.prevToolbarStatus) !== tbStatusString) {\n      this.parent.notify(events.updateTbItemsStatus, {\n        html: null,\n        markdown: JSON.parse(tbStatusString)\n      });\n      this.prevToolbarStatus = JSON.parse(tbStatusString);\n    }\n  };\n\n  MarkdownToolbarStatus.prototype.isListsApplied = function (lines, type) {\n    var isApply = true;\n\n    if (type === 'OL') {\n      for (var i = 0; i < lines.length; i++) {\n        var lineSplit = lines[i].text.trim().split(' ', 2)[0] + ' ';\n\n        if (!/^[\\d.]+[ ]+$/.test(lineSplit)) {\n          isApply = false;\n          break;\n        }\n      }\n    } else {\n      for (var i = 0; i < lines.length; i++) {\n        if (!this.selection.isStartWith(lines[i].text, this.parent.formatter.listTags[type])) {\n          isApply = false;\n          break;\n        }\n      }\n    }\n\n    return isApply;\n  };\n\n  MarkdownToolbarStatus.prototype.currentFormat = function (lines, documentNode) {\n    var format = 'p';\n    var keys = Object.keys(this.parent.formatter.formatTags);\n    var direction = this.element.selectionDirection;\n    var checkLine = direction === 'backward' ? lines[0].text : lines[lines.length - 1].text;\n\n    for (var i = 0; !documentNode && i < keys.length; i++) {\n      if (keys[i] !== 'pre' && this.selection.isStartWith(checkLine, this.parent.formatter.formatTags[keys[i]])) {\n        format = keys[i];\n        break;\n      } else if (keys[i] === 'pre') {\n        if (this.codeFormat()) {\n          format = keys[i];\n          break;\n        }\n      }\n    }\n\n    return format;\n  };\n\n  MarkdownToolbarStatus.prototype.codeFormat = function () {\n    var isFormat = false;\n    var textArea = this.parent.inputElement;\n    var start = textArea.selectionStart;\n\n    var splitAt = function (index) {\n      return function (x) {\n        return [x.slice(0, index), x.slice(index)];\n      };\n    };\n\n    var splitText = splitAt(start)(textArea.value);\n    var cmdPre = this.parent.formatter.formatTags.pre;\n    var selectedText = this.getSelectedText(textArea);\n\n    if (selectedText !== '' && selectedText === selectedText.toLocaleUpperCase()) {\n      return true;\n    } else if (selectedText === '') {\n      var beforeText = textArea.value.substr(splitText[0].length - 1, 1);\n      var afterText = splitText[1].substr(0, 1);\n\n      if (beforeText !== '' && afterText !== '' && beforeText.match(/[a-z]/i) && beforeText === beforeText.toLocaleUpperCase() && afterText === afterText.toLocaleUpperCase()) {\n        return true;\n      }\n    }\n\n    if (this.isCode(splitText[0], cmdPre) && this.isCode(splitText[1], cmdPre) && splitText[0].match(this.multiCharRegx(cmdPre)).length % 2 === 1 && splitText[1].match(this.multiCharRegx(cmdPre)).length % 2 === 1) {\n      isFormat = true;\n    }\n\n    return isFormat;\n  };\n\n  MarkdownToolbarStatus.prototype.getSelectedText = function (textarea) {\n    return textarea.value.substring(textarea.selectionStart, textarea.selectionEnd);\n  };\n\n  MarkdownToolbarStatus.prototype.isCode = function (text, cmd) {\n    return text.search('\\\\' + cmd + '') !== -1;\n  };\n\n  MarkdownToolbarStatus.prototype.multiCharRegx = function (cmd) {\n    return new RegExp('(\\\\' + cmd + ')', 'g');\n  };\n\n  return MarkdownToolbarStatus;\n}();\n\nexport { MarkdownToolbarStatus };","map":{"version":3,"names":["MarkdownSelection","events","getDefaultMDTbStatus","MarkdownToolbarStatus","parent","toolbarStatus","prevToolbarStatus","selection","element","contentModule","getEditPanel","addEventListener","prototype","on","toolbarRefresh","onRefreshHandler","destroy","removeEventListener","off","args","parentsLines","getSelectedParentPoints","orderedlist","documentNode","isListsApplied","unorderedlist","formats","currentFormat","bold","formatter","editorManager","mdSelectionFormats","isAppliedCommand","italic","inlinecode","strikethrough","subscript","superscript","uppercase","tbStatusString","JSON","stringify","notify","toolbarUpdated","updateTbItemsStatus","html","markdown","parse","lines","type","isApply","i","length","lineSplit","text","trim","split","test","isStartWith","listTags","format","keys","Object","formatTags","direction","selectionDirection","checkLine","codeFormat","isFormat","textArea","inputElement","start","selectionStart","splitAt","index","x","slice","splitText","value","cmdPre","pre","selectedText","getSelectedText","toLocaleUpperCase","beforeText","substr","afterText","match","isCode","multiCharRegx","textarea","substring","selectionEnd","cmd","search","RegExp"],"sources":["C:/Users/shahj/OneDrive/Documents/GitHub/Multifunctional-React-Dashboard/node_modules/@syncfusion/ej2-richtexteditor/src/rich-text-editor/actions/markdown-toolbar-status.js"],"sourcesContent":["import { MarkdownSelection } from '../../markdown-parser/plugin/markdown-selection';\nimport * as events from '../base/constant';\nimport { getDefaultMDTbStatus } from '../../common/util';\n/**\n * MarkdownToolbarStatus module for refresh the toolbar status\n */\nvar MarkdownToolbarStatus = /** @class */ (function () {\n    function MarkdownToolbarStatus(parent) {\n        this.toolbarStatus = this.prevToolbarStatus = getDefaultMDTbStatus();\n        this.selection = new MarkdownSelection();\n        this.parent = parent;\n        this.element = this.parent.contentModule.getEditPanel();\n        this.addEventListener();\n    }\n    MarkdownToolbarStatus.prototype.addEventListener = function () {\n        this.parent.on(events.toolbarRefresh, this.onRefreshHandler, this);\n        this.parent.on(events.destroy, this.removeEventListener, this);\n    };\n    MarkdownToolbarStatus.prototype.removeEventListener = function () {\n        this.parent.off(events.toolbarRefresh, this.onRefreshHandler);\n        this.parent.off(events.destroy, this.removeEventListener);\n    };\n    MarkdownToolbarStatus.prototype.onRefreshHandler = function (args) {\n        var parentsLines = this.selection.getSelectedParentPoints(this.element);\n        this.toolbarStatus = {\n            orderedlist: args.documentNode ? false : this.isListsApplied(parentsLines, 'OL'),\n            unorderedlist: args.documentNode ? false : this.isListsApplied(parentsLines, 'UL'),\n            formats: this.currentFormat(parentsLines, args.documentNode),\n            bold: args.documentNode ? false : this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('Bold'),\n            italic: args.documentNode ? false : this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('Italic'),\n            inlinecode: args.documentNode ? false : this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('InlineCode'),\n            strikethrough: args.documentNode ? false :\n                this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('StrikeThrough'),\n            subscript: args.documentNode ? false : this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('SubScript'),\n            superscript: args.documentNode ? false : this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('SuperScript'),\n            uppercase: args.documentNode ? false : this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('UpperCase')\n        };\n        if (this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand('InlineCode')) {\n            this.toolbarStatus.formats = 'pre';\n        }\n        var tbStatusString = JSON.stringify(this.toolbarStatus);\n        this.parent.notify(events.toolbarUpdated, this.toolbarStatus);\n        if (JSON.stringify(this.prevToolbarStatus) !== tbStatusString) {\n            this.parent.notify(events.updateTbItemsStatus, { html: null, markdown: JSON.parse(tbStatusString) });\n            this.prevToolbarStatus = JSON.parse(tbStatusString);\n        }\n    };\n    MarkdownToolbarStatus.prototype.isListsApplied = function (lines, type) {\n        var isApply = true;\n        if (type === 'OL') {\n            for (var i = 0; i < lines.length; i++) {\n                var lineSplit = lines[i].text.trim().split(' ', 2)[0] + ' ';\n                if (!/^[\\d.]+[ ]+$/.test(lineSplit)) {\n                    isApply = false;\n                    break;\n                }\n            }\n        }\n        else {\n            for (var i = 0; i < lines.length; i++) {\n                if (!this.selection.isStartWith(lines[i].text, this.parent.formatter.listTags[type])) {\n                    isApply = false;\n                    break;\n                }\n            }\n        }\n        return isApply;\n    };\n    MarkdownToolbarStatus.prototype.currentFormat = function (lines, documentNode) {\n        var format = 'p';\n        var keys = Object.keys(this.parent.formatter.formatTags);\n        var direction = this.element.selectionDirection;\n        var checkLine = direction === 'backward' ? lines[0].text : lines[lines.length - 1].text;\n        for (var i = 0; !documentNode && i < keys.length; i++) {\n            if (keys[i] !== 'pre' && this.selection.isStartWith(checkLine, this.parent.formatter.formatTags[keys[i]])) {\n                format = keys[i];\n                break;\n            }\n            else if (keys[i] === 'pre') {\n                if (this.codeFormat()) {\n                    format = keys[i];\n                    break;\n                }\n            }\n        }\n        return format;\n    };\n    MarkdownToolbarStatus.prototype.codeFormat = function () {\n        var isFormat = false;\n        var textArea = this.parent.inputElement;\n        var start = textArea.selectionStart;\n        var splitAt = function (index) { return function (x) { return [x.slice(0, index), x.slice(index)]; }; };\n        var splitText = splitAt(start)(textArea.value);\n        var cmdPre = this.parent.formatter.formatTags.pre;\n        var selectedText = this.getSelectedText(textArea);\n        if (selectedText !== '' && selectedText === selectedText.toLocaleUpperCase()) {\n            return true;\n        }\n        else if (selectedText === '') {\n            var beforeText = textArea.value.substr(splitText[0].length - 1, 1);\n            var afterText = splitText[1].substr(0, 1);\n            if ((beforeText !== '' && afterText !== '' && beforeText.match(/[a-z]/i)) &&\n                beforeText === beforeText.toLocaleUpperCase() && afterText === afterText.toLocaleUpperCase()) {\n                return true;\n            }\n        }\n        if ((this.isCode(splitText[0], cmdPre) && this.isCode(splitText[1], cmdPre)) &&\n            (splitText[0].match(this.multiCharRegx(cmdPre)).length % 2 === 1 &&\n                splitText[1].match(this.multiCharRegx(cmdPre)).length % 2 === 1)) {\n            isFormat = true;\n        }\n        return isFormat;\n    };\n    MarkdownToolbarStatus.prototype.getSelectedText = function (textarea) {\n        return textarea.value.substring(textarea.selectionStart, textarea.selectionEnd);\n    };\n    MarkdownToolbarStatus.prototype.isCode = function (text, cmd) {\n        return text.search('\\\\' + cmd + '') !== -1;\n    };\n    MarkdownToolbarStatus.prototype.multiCharRegx = function (cmd) {\n        return new RegExp('(\\\\' + cmd + ')', 'g');\n    };\n    return MarkdownToolbarStatus;\n}());\nexport { MarkdownToolbarStatus };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}