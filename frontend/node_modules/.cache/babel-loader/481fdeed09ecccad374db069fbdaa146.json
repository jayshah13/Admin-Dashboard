{"ast":null,"code":"import { debounce, isNullOrUndefined, detach } from '@syncfusion/ej2-base';\nimport { NodeSelection } from './../../selection/selection';\nimport * as EVENTS from './../../common/constant';\nimport { isIDevice, setEditFrameFocus } from '../../common/util';\n/**\n * `Undo` module is used to handle undo actions.\n */\n\nvar UndoRedoManager =\n/** @class */\nfunction () {\n  function UndoRedoManager(parent, options) {\n    this.undoRedoStack = [];\n    this.parent = parent;\n    this.undoRedoSteps = !isNullOrUndefined(options) ? options.undoRedoSteps : 30;\n    this.undoRedoTimer = !isNullOrUndefined(options) ? options.undoRedoTimer : 300;\n    this.addEventListener();\n  }\n\n  UndoRedoManager.prototype.addEventListener = function () {\n    var debounceListener = debounce(this.keyUp, this.undoRedoTimer);\n    this.parent.observer.on(EVENTS.KEY_UP_HANDLER, debounceListener, this);\n    this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.keyDown, this);\n    this.parent.observer.on(EVENTS.ACTION, this.onAction, this);\n    this.parent.observer.on(EVENTS.MODEL_CHANGED_PLUGIN, this.onPropertyChanged, this);\n  };\n\n  UndoRedoManager.prototype.onPropertyChanged = function (props) {\n    for (var _i = 0, _a = Object.keys(props.newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'undoRedoSteps':\n          this.undoRedoSteps = props.newProp.undoRedoSteps;\n          break;\n\n        case 'undoRedoTimer':\n          this.undoRedoTimer = props.newProp.undoRedoTimer;\n          break;\n      }\n    }\n  };\n\n  UndoRedoManager.prototype.removeEventListener = function () {\n    this.parent.observer.off(EVENTS.KEY_UP_HANDLER, this.keyUp);\n    this.parent.observer.off(EVENTS.KEY_DOWN_HANDLER, this.keyDown);\n    this.parent.observer.off(EVENTS.ACTION, this.onAction);\n  };\n  /**\n   * onAction method\n   *\n   * @param {IHtmlSubCommands} e - specifies the sub command\n   * @returns {void}\n   * @hidden\n    */\n\n\n  UndoRedoManager.prototype.onAction = function (e) {\n    if (e.subCommand === 'Undo') {\n      this.undo(e);\n    } else {\n      this.redo(e);\n    }\n  };\n  /**\n   * Destroys the ToolBar.\n   *\n   * @function destroy\n   * @returns {void}\n   * @hidden\n    */\n\n\n  UndoRedoManager.prototype.destroy = function () {\n    this.removeEventListener();\n  };\n\n  UndoRedoManager.prototype.keyDown = function (e) {\n    var event = e.event; // eslint-disable-next-line\n\n    var proxy = this;\n\n    switch (event.action) {\n      case 'undo':\n        event.preventDefault();\n        proxy.undo(e);\n        break;\n\n      case 'redo':\n        event.preventDefault();\n        proxy.redo(e);\n        break;\n    }\n  };\n\n  UndoRedoManager.prototype.keyUp = function (e) {\n    if (e.event.keyCode !== 17 && !e.event.ctrlKey) {\n      this.saveData(e);\n    }\n  };\n  /**\n   * RTE collection stored html format.\n   *\n   * @function saveData\n   * @param {KeyboardEvent} e - specifies the keyboard event\n   * @returns {void}\n   * @hidden\n    */\n\n\n  UndoRedoManager.prototype.saveData = function (e) {\n    var range = new NodeSelection().getRange(this.parent.currentDocument);\n    var currentContainer = range.startContainer;\n\n    for (var i = currentContainer.childNodes.length - 1; i >= 0; i--) {\n      if (!isNullOrUndefined(currentContainer.childNodes[i]) && currentContainer.childNodes[i].nodeName === '#text' && currentContainer.childNodes[i].textContent.length === 0 && currentContainer.childNodes[i].nodeName !== 'IMG' && currentContainer.childNodes[i].nodeName !== 'BR' && currentContainer.childNodes[i].nodeName && 'HR') {\n        detach(currentContainer.childNodes[i]);\n      }\n    }\n\n    range = new NodeSelection().getRange(this.parent.currentDocument);\n    var save = new NodeSelection().save(range, this.parent.currentDocument);\n    var htmlText = this.parent.editableElement.innerHTML;\n    var changEle = {\n      text: htmlText,\n      range: save\n    };\n\n    if (this.undoRedoStack.length >= this.steps) {\n      this.undoRedoStack = this.undoRedoStack.slice(0, this.steps + 1);\n    }\n\n    if (this.undoRedoStack.length > 1 && this.undoRedoStack[this.undoRedoStack.length - 1].range.range.collapsed === range.collapsed && this.undoRedoStack[this.undoRedoStack.length - 1].range.startOffset === save.range.startOffset && this.undoRedoStack[this.undoRedoStack.length - 1].range.endOffset === save.range.endOffset && this.undoRedoStack[this.undoRedoStack.length - 1].range.range.startContainer === save.range.startContainer && this.undoRedoStack[this.undoRedoStack.length - 1].text.trim() === changEle.text.trim()) {\n      return;\n    }\n\n    this.undoRedoStack.push(changEle);\n    this.steps = this.undoRedoStack.length - 1;\n\n    if (this.steps > this.undoRedoSteps) {\n      this.undoRedoStack.shift();\n      this.steps--;\n    }\n\n    if (e && e.callBack) {\n      e.callBack();\n    }\n  };\n  /**\n   * Undo the editable text.\n   *\n   * @function undo\n   * @param {IHtmlSubCommands} e - specifies the sub commands\n   * @returns {void}\n   * @hidden\n    */\n\n\n  UndoRedoManager.prototype.undo = function (e) {\n    if (this.steps > 0) {\n      var range = this.undoRedoStack[this.steps - 1].range;\n      var removedContent = this.undoRedoStack[this.steps - 1].text;\n      this.parent.editableElement.innerHTML = removedContent;\n      this.parent.editableElement.focus();\n\n      if (isIDevice()) {\n        setEditFrameFocus(this.parent.editableElement, e.selector);\n      }\n\n      range.restore();\n      this.steps--;\n\n      if (e.callBack) {\n        e.callBack({\n          requestType: 'Undo',\n          editorMode: 'HTML',\n          range: range,\n          elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),\n          event: e.event\n        });\n      }\n    }\n  };\n  /**\n   * Redo the editable text.\n   *\n   * @param {IHtmlSubCommands} e - specifies the sub commands\n   * @function redo\n   * @returns {void}\n   * @hidden\n    */\n\n\n  UndoRedoManager.prototype.redo = function (e) {\n    if (this.undoRedoStack[this.steps + 1] != null) {\n      var range = this.undoRedoStack[this.steps + 1].range;\n      this.parent.editableElement.innerHTML = this.undoRedoStack[this.steps + 1].text;\n      this.parent.editableElement.focus();\n\n      if (isIDevice()) {\n        setEditFrameFocus(this.parent.editableElement, e.selector);\n      }\n\n      range.restore();\n      this.steps++;\n\n      if (e.callBack) {\n        e.callBack({\n          requestType: 'Redo',\n          editorMode: 'HTML',\n          range: range,\n          elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),\n          event: e.event\n        });\n      }\n    }\n  };\n  /**\n   * getUndoStatus method\n   *\n   * @returns {boolean} - returns the boolean value\n   * @hidden\n    */\n\n\n  UndoRedoManager.prototype.getUndoStatus = function () {\n    var status = {\n      undo: false,\n      redo: false\n    };\n\n    if (this.steps > 0) {\n      status.undo = true;\n    }\n\n    if (this.undoRedoStack[this.steps + 1] != null) {\n      status.redo = true;\n    }\n\n    return status;\n  };\n\n  return UndoRedoManager;\n}();\n\nexport { UndoRedoManager };","map":{"version":3,"names":["debounce","isNullOrUndefined","detach","NodeSelection","EVENTS","isIDevice","setEditFrameFocus","UndoRedoManager","parent","options","undoRedoStack","undoRedoSteps","undoRedoTimer","addEventListener","prototype","debounceListener","keyUp","observer","on","KEY_UP_HANDLER","KEY_DOWN_HANDLER","keyDown","ACTION","onAction","MODEL_CHANGED_PLUGIN","onPropertyChanged","props","_i","_a","Object","keys","newProp","length","prop","removeEventListener","off","e","subCommand","undo","redo","destroy","event","proxy","action","preventDefault","keyCode","ctrlKey","saveData","range","getRange","currentDocument","currentContainer","startContainer","i","childNodes","nodeName","textContent","save","htmlText","editableElement","innerHTML","changEle","text","steps","slice","collapsed","startOffset","endOffset","trim","push","shift","callBack","removedContent","focus","selector","restore","requestType","editorMode","elements","nodeSelection","getSelectedNodes","getUndoStatus","status"],"sources":["C:/Users/shahj/OneDrive/Documents/GitHub/Multifunctional-React-Dashboard/node_modules/@syncfusion/ej2-richtexteditor/src/editor-manager/plugin/undo.js"],"sourcesContent":["import { debounce, isNullOrUndefined, detach } from '@syncfusion/ej2-base';\nimport { NodeSelection } from './../../selection/selection';\nimport * as EVENTS from './../../common/constant';\nimport { isIDevice, setEditFrameFocus } from '../../common/util';\n/**\n * `Undo` module is used to handle undo actions.\n */\nvar UndoRedoManager = /** @class */ (function () {\n    function UndoRedoManager(parent, options) {\n        this.undoRedoStack = [];\n        this.parent = parent;\n        this.undoRedoSteps = !isNullOrUndefined(options) ? options.undoRedoSteps : 30;\n        this.undoRedoTimer = !isNullOrUndefined(options) ? options.undoRedoTimer : 300;\n        this.addEventListener();\n    }\n    UndoRedoManager.prototype.addEventListener = function () {\n        var debounceListener = debounce(this.keyUp, this.undoRedoTimer);\n        this.parent.observer.on(EVENTS.KEY_UP_HANDLER, debounceListener, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.keyDown, this);\n        this.parent.observer.on(EVENTS.ACTION, this.onAction, this);\n        this.parent.observer.on(EVENTS.MODEL_CHANGED_PLUGIN, this.onPropertyChanged, this);\n    };\n    UndoRedoManager.prototype.onPropertyChanged = function (props) {\n        for (var _i = 0, _a = Object.keys(props.newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'undoRedoSteps':\n                    this.undoRedoSteps = props.newProp.undoRedoSteps;\n                    break;\n                case 'undoRedoTimer':\n                    this.undoRedoTimer = props.newProp.undoRedoTimer;\n                    break;\n            }\n        }\n    };\n    UndoRedoManager.prototype.removeEventListener = function () {\n        this.parent.observer.off(EVENTS.KEY_UP_HANDLER, this.keyUp);\n        this.parent.observer.off(EVENTS.KEY_DOWN_HANDLER, this.keyDown);\n        this.parent.observer.off(EVENTS.ACTION, this.onAction);\n    };\n    /**\n     * onAction method\n     *\n     * @param {IHtmlSubCommands} e - specifies the sub command\n     * @returns {void}\n     * @hidden\n\n     */\n    UndoRedoManager.prototype.onAction = function (e) {\n        if (e.subCommand === 'Undo') {\n            this.undo(e);\n        }\n        else {\n            this.redo(e);\n        }\n    };\n    /**\n     * Destroys the ToolBar.\n     *\n     * @function destroy\n     * @returns {void}\n     * @hidden\n\n     */\n    UndoRedoManager.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    UndoRedoManager.prototype.keyDown = function (e) {\n        var event = e.event;\n        // eslint-disable-next-line\n        var proxy = this;\n        switch (event.action) {\n            case 'undo':\n                event.preventDefault();\n                proxy.undo(e);\n                break;\n            case 'redo':\n                event.preventDefault();\n                proxy.redo(e);\n                break;\n        }\n    };\n    UndoRedoManager.prototype.keyUp = function (e) {\n        if (e.event.keyCode !== 17 && !e.event.ctrlKey) {\n            this.saveData(e);\n        }\n    };\n    /**\n     * RTE collection stored html format.\n     *\n     * @function saveData\n     * @param {KeyboardEvent} e - specifies the keyboard event\n     * @returns {void}\n     * @hidden\n\n     */\n    UndoRedoManager.prototype.saveData = function (e) {\n        var range = new NodeSelection().getRange(this.parent.currentDocument);\n        var currentContainer = range.startContainer;\n        for (var i = currentContainer.childNodes.length - 1; i >= 0; i--) {\n            if (!isNullOrUndefined(currentContainer.childNodes[i]) && currentContainer.childNodes[i].nodeName === '#text' &&\n                currentContainer.childNodes[i].textContent.length === 0 && currentContainer.childNodes[i].nodeName !== 'IMG' &&\n                currentContainer.childNodes[i].nodeName !== 'BR' && currentContainer.childNodes[i].nodeName && 'HR') {\n                detach(currentContainer.childNodes[i]);\n            }\n        }\n        range = new NodeSelection().getRange(this.parent.currentDocument);\n        var save = new NodeSelection().save(range, this.parent.currentDocument);\n        var htmlText = this.parent.editableElement.innerHTML;\n        var changEle = { text: htmlText, range: save };\n        if (this.undoRedoStack.length >= this.steps) {\n            this.undoRedoStack = this.undoRedoStack.slice(0, this.steps + 1);\n        }\n        if (this.undoRedoStack.length > 1 && (this.undoRedoStack[this.undoRedoStack.length - 1].range.range.collapsed === range.collapsed)\n            && (this.undoRedoStack[this.undoRedoStack.length - 1].range.startOffset === save.range.startOffset) &&\n            (this.undoRedoStack[this.undoRedoStack.length - 1].range.endOffset === save.range.endOffset) &&\n            (this.undoRedoStack[this.undoRedoStack.length - 1].range.range.startContainer === save.range.startContainer) &&\n            (this.undoRedoStack[this.undoRedoStack.length - 1].text.trim() === changEle.text.trim())) {\n            return;\n        }\n        this.undoRedoStack.push(changEle);\n        this.steps = this.undoRedoStack.length - 1;\n        if (this.steps > this.undoRedoSteps) {\n            this.undoRedoStack.shift();\n            this.steps--;\n        }\n        if (e && e.callBack) {\n            e.callBack();\n        }\n    };\n    /**\n     * Undo the editable text.\n     *\n     * @function undo\n     * @param {IHtmlSubCommands} e - specifies the sub commands\n     * @returns {void}\n     * @hidden\n\n     */\n    UndoRedoManager.prototype.undo = function (e) {\n        if (this.steps > 0) {\n            var range = this.undoRedoStack[this.steps - 1].range;\n            var removedContent = this.undoRedoStack[this.steps - 1].text;\n            this.parent.editableElement.innerHTML = removedContent;\n            this.parent.editableElement.focus();\n            if (isIDevice()) {\n                setEditFrameFocus(this.parent.editableElement, e.selector);\n            }\n            range.restore();\n            this.steps--;\n            if (e.callBack) {\n                e.callBack({\n                    requestType: 'Undo',\n                    editorMode: 'HTML',\n                    range: range,\n                    elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),\n                    event: e.event\n                });\n            }\n        }\n    };\n    /**\n     * Redo the editable text.\n     *\n     * @param {IHtmlSubCommands} e - specifies the sub commands\n     * @function redo\n     * @returns {void}\n     * @hidden\n\n     */\n    UndoRedoManager.prototype.redo = function (e) {\n        if (this.undoRedoStack[this.steps + 1] != null) {\n            var range = this.undoRedoStack[this.steps + 1].range;\n            this.parent.editableElement.innerHTML = this.undoRedoStack[this.steps + 1].text;\n            this.parent.editableElement.focus();\n            if (isIDevice()) {\n                setEditFrameFocus(this.parent.editableElement, e.selector);\n            }\n            range.restore();\n            this.steps++;\n            if (e.callBack) {\n                e.callBack({\n                    requestType: 'Redo',\n                    editorMode: 'HTML',\n                    range: range,\n                    elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),\n                    event: e.event\n                });\n            }\n        }\n    };\n    /**\n     * getUndoStatus method\n     *\n     * @returns {boolean} - returns the boolean value\n     * @hidden\n\n     */\n    UndoRedoManager.prototype.getUndoStatus = function () {\n        var status = { undo: false, redo: false };\n        if (this.steps > 0) {\n            status.undo = true;\n        }\n        if (this.undoRedoStack[this.steps + 1] != null) {\n            status.redo = true;\n        }\n        return status;\n    };\n    return UndoRedoManager;\n}());\nexport { UndoRedoManager };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}