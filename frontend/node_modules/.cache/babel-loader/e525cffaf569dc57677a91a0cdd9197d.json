{"ast":null,"code":"import { measureText, TextOption, renderTextElement, CircleOption, PathOption, RectOption } from '../../smithchart/utils/helper';\nimport { SmithchartRect } from '../../smithchart/utils/utils';\nimport { legendRender } from '../model/constant';\n\nvar SmithchartLegend =\n/** @class */\nfunction () {\n  function SmithchartLegend() {\n    this.legendSeries = [];\n  }\n\n  SmithchartLegend.prototype.renderLegend = function (smithchart) {\n    this.calculateLegendBounds(smithchart);\n\n    this._drawLegend(smithchart);\n\n    return this.legendActualBounds;\n  };\n\n  SmithchartLegend.prototype.calculateLegendBounds = function (smithchart) {\n    this.legendSeries = [];\n    var padding = 10;\n    var legend = smithchart.legendSettings;\n    var legendSizeHeight = legend.height;\n    var legendSizeWidth = legend.width;\n    var itemPadding = legend.itemPadding > 0 ? legend.itemPadding : 0;\n    var position = legend.position.toLowerCase();\n    var font = legend.title.textStyle;\n    var width = 0;\n    var height = 0;\n    var legendItemWidth = 0;\n    var legendItemHeight = 0;\n    var legendHeight = 0;\n    var svgObjectWidth = smithchart.availableSize.width - (smithchart.elementSpacing * 4 - legend.border.width * 2 + smithchart.border.width * 2);\n    var rowCount = legend.rowCount;\n    var columnCount = legend.columnCount;\n    var titleSize = measureText(smithchart.legendSettings['title']['text'], font);\n    var maxRowWidth = 0;\n    var totalRowHeight = 0;\n    var curRowWidth = 0;\n    var curRowHeight = 0;\n    var allowItems;\n    var itemsCountRow = 0;\n    var length = smithchart.series.length;\n    var legendBounds;\n\n    if (smithchart.legendSettings.visible && length !== 0) {\n      if (position === 'bottom' || position === 'top' || position === 'custom') {\n        if (rowCount && columnCount && rowCount <= columnCount) {\n          rowCount = length / columnCount;\n        } else if (rowCount == null && columnCount != null) {\n          rowCount = length / columnCount;\n        } else if (rowCount == null && columnCount == null) {\n          rowCount = 1;\n        }\n\n        if (rowCount) {\n          allowItems = Math.ceil(length / rowCount);\n        }\n      } else {\n        if (rowCount && columnCount && rowCount <= columnCount) {\n          columnCount = length / rowCount;\n        } else if (rowCount != null && columnCount == null) {\n          columnCount = length / rowCount;\n        } else if (rowCount == null && columnCount == null) {\n          columnCount = 1;\n        }\n\n        if (columnCount) {\n          allowItems = columnCount;\n        }\n      }\n\n      for (var i = 0; i < length; i++) {\n        this.legendSeries.push({\n          text: smithchart.series[i]['name'] ? smithchart.series[i]['name'] : 'series' + i,\n          seriesIndex: i,\n          shape: smithchart.legendSettings.shape,\n          fill: smithchart.series[i].fill || smithchart.seriesColors[i % smithchart.seriesColors.length],\n          bounds: null\n        });\n\n        var legendsize = this._getLegendSize(smithchart, this.legendSeries[i]);\n\n        legendItemWidth = Math.max(legendsize['width'], legendItemWidth);\n        legendItemHeight = Math.max(legendsize['height'], legendItemHeight);\n        this.legendSeries[i]['bounds'] = {\n          width: legendItemWidth,\n          height: legendItemHeight\n        };\n        itemsCountRow = itemsCountRow + 1;\n        curRowWidth = curRowWidth + legendItemWidth + itemPadding;\n        curRowHeight = Math.max(legendItemHeight, curRowHeight);\n\n        if (position === 'top' || position === 'bottom' || position === 'custom') {\n          if (curRowWidth > svgObjectWidth) {\n            curRowWidth -= legendsize.width + itemPadding;\n            maxRowWidth = Math.max(maxRowWidth, curRowWidth);\n            curRowWidth = legendsize.width + itemPadding;\n            totalRowHeight = totalRowHeight + curRowHeight + itemPadding;\n          }\n        }\n\n        if (itemsCountRow === allowItems || i === length - 1) {\n          maxRowWidth = Math.max(maxRowWidth, curRowWidth);\n          totalRowHeight = totalRowHeight + curRowHeight + itemPadding;\n          legendHeight = totalRowHeight;\n          itemsCountRow = 0;\n          curRowHeight = 0;\n          curRowWidth = 0;\n        }\n      }\n\n      width = titleSize.width > maxRowWidth - itemPadding ? titleSize.width + padding * 2 + itemPadding : maxRowWidth + padding * 2 - smithchart.border.width * 2;\n      height = legendHeight + smithchart.elementSpacing;\n      legendBounds = {\n        x: 0,\n        y: 0,\n        width: width,\n        height: height\n      };\n    }\n\n    this.legendActualBounds = legendBounds;\n\n    if (legendSizeWidth != null) {\n      this.legendActualBounds.width = legendSizeWidth;\n    }\n\n    if (legendSizeHeight != null) {\n      this.legendActualBounds.height = legendSizeHeight;\n    }\n  };\n\n  SmithchartLegend.prototype._getLegendSize = function (smithchart, series) {\n    var legend = smithchart.legendSettings;\n    var symbolWidth = legend.itemStyle.width;\n    var symbolHeight = legend.itemStyle.height;\n    var textSize = measureText(series.text, legend.textStyle);\n    var width = symbolWidth + textSize.width + legend.shapePadding;\n    var height = Math.max(symbolHeight, textSize.height);\n    return {\n      width: width,\n      height: height\n    };\n  };\n  /* eslint-disable  */\n\n\n  SmithchartLegend.prototype._drawLegend = function (smithchart) {\n    var legend = smithchart.legendSettings;\n    var legendPosition = legend.position.toLowerCase();\n    var alignment = legend.alignment;\n    var legendBounds = this.legendActualBounds;\n    var maxWidth = 0;\n    var startX;\n    var startY;\n    var titleFont = smithchart.title.font ? smithchart.title.font : smithchart.title.textStyle;\n    var smithchartTitleHeight = measureText(smithchart.title.text, titleFont).height;\n    var smithchartSubtitleHeight = measureText(smithchart.title.subtitle.text, smithchart.title.subtitle.textStyle).height;\n    var elementSpacing = smithchart.elementSpacing;\n    var offset = smithchartTitleHeight + smithchartSubtitleHeight + elementSpacing + smithchart.margin.top;\n    var itemPadding = legend.itemPadding > 0 ? legend.itemPadding : 0;\n    var svgObjectWidth = smithchart.availableSize.width;\n    var svgObjectHeight = smithchart.availableSize.height;\n    var legendBorder = legend.border.width;\n    var legendWidth = 0;\n    var titleSize = measureText(legend['title']['text'], legend.title.textStyle);\n    var legendTitleHeight = titleSize.height;\n    var borderSize = smithchart.border.width;\n    var svgWidth = svgObjectWidth - borderSize * 2;\n    var svgHeight = svgObjectHeight - borderSize * 2;\n    legendBounds.height += legendTitleHeight;\n\n    if (legendPosition !== 'custom') {\n      switch (legendPosition) {\n        case 'bottom':\n          legendBounds.y = svgHeight - (legendBounds.height + legendBorder + elementSpacing);\n          break;\n\n        case 'top':\n          legendBounds.y = borderSize + offset;\n          break;\n\n        case 'right':\n          legendBounds.x = svgWidth - legendBounds.width - elementSpacing * 2;\n          break;\n\n        case 'left':\n          legendBounds.x = borderSize + elementSpacing * 2;\n          break;\n      }\n\n      if (legendPosition === 'left' || legendPosition === 'right') {\n        switch (alignment) {\n          case 'Center':\n            legendBounds.y = svgHeight / 2 - (legendBounds.height + legendBorder * 2) / 2 + elementSpacing / 2;\n            break;\n\n          case 'Near':\n            legendBounds.y = borderSize + elementSpacing * 2 + offset;\n            break;\n\n          case 'Far':\n            legendBounds.y = svgHeight - (legendBounds.height + legendBorder) - elementSpacing * 2;\n            break;\n        }\n      } else {\n        switch (alignment) {\n          case 'Center':\n            legendBounds.x = svgWidth / 2 - (legendBounds.width + legendBorder * 2) / 2 + elementSpacing / 2;\n            break;\n\n          case 'Near':\n            legendBounds.x = borderSize + elementSpacing * 2;\n            break;\n\n          case 'Far':\n            legendBounds.x = svgWidth - (legendBounds.width + legendBorder) - elementSpacing * 2;\n            break;\n        }\n      }\n    } else {\n      legendBounds.y = legend.location.y < svgHeight ? legend.location.y : 0;\n      legendBounds.x = legend.location.x < svgWidth ? legend.location.x : 0;\n    }\n\n    if (legendPosition === 'bottom' || legendPosition === 'top') {\n      for (var i = 0; i < this.legendSeries.length; i++) {\n        legendWidth += this.legendSeries[i].bounds.width + itemPadding;\n\n        if (legendWidth > svgWidth) {\n          legendBounds.x = svgWidth / 2 - (legendBounds.width + legendBorder * 2) / 2 + elementSpacing / 2;\n          break;\n        }\n      }\n    }\n\n    var gLegendEle = smithchart.renderer.createGroup({\n      'id': smithchart.element.id + '_legend_group'\n    });\n    smithchart.svgObject.appendChild(gLegendEle);\n    this.legendItemGroup = smithchart.renderer.createGroup({\n      'id': smithchart.element.id + 'legendItem_Group'\n    });\n    var currentX = startX = elementSpacing;\n    var currentY = startY = elementSpacing;\n\n    if (legend.title.text !== '' && legend.title.visible) {\n      gLegendEle.appendChild(this.drawLegendTitle(smithchart, legend, legendBounds, gLegendEle));\n      currentY = startY = elementSpacing + legendTitleHeight;\n    }\n\n    for (var k = 0; k < this.legendSeries.length; k++) {\n      if ((legend.rowCount < legend.columnCount || legend.rowCount === legend.columnCount) && (legendPosition === 'top' || legendPosition === 'bottom' || legendPosition === 'custom')) {\n        if (currentX + this.legendSeries[k]['bounds'].width > legendBounds.width + startX) {\n          currentX = elementSpacing;\n          currentY += this.legendSeries[k]['bounds'].height + itemPadding;\n        }\n\n        this.legendGroup = this.drawLegendItem(smithchart, legend, this.legendSeries[k], k, currentX, currentY, legendBounds);\n        gLegendEle.appendChild(this.legendGroup);\n        currentX += this.legendSeries[k]['bounds'].width + itemPadding;\n      } else {\n        if (currentY + this.legendSeries[k]['bounds'].height + itemPadding + legendTitleHeight + borderSize > legendBounds.height + startY) {\n          currentY = startY;\n          currentX += maxWidth + itemPadding;\n        }\n\n        this.legendGroup = this.drawLegendItem(smithchart, legend, this.legendSeries[k], k, currentX, currentY, legendBounds);\n        gLegendEle.appendChild(this.legendGroup);\n        currentY += this.legendSeries[k]['bounds'].height + itemPadding;\n        maxWidth = Math.max(maxWidth, this.legendSeries[k]['bounds'].width);\n      }\n    }\n\n    gLegendEle.setAttribute('transform', 'translate(' + legendBounds.x.toString() + ',' + legendBounds.y.toString() + ')');\n    this.drawLegendBorder(gLegendEle, smithchart, legend, legendBounds);\n  };\n\n  SmithchartLegend.prototype.drawLegendBorder = function (gLegendEle, smithchart, legend, legendBounds) {\n    var borderRect = new RectOption(smithchart.element.id + '_svg' + '_legendRect', 'none', legend.border, 1, new SmithchartRect(0, 0, legendBounds.width, legendBounds.height));\n    gLegendEle.appendChild(smithchart.renderer.drawRectangle(borderRect));\n  };\n\n  SmithchartLegend.prototype.drawLegendTitle = function (smithchart, legend, legendBounds, gLegendEle) {\n    var elementSpacing = smithchart.elementSpacing;\n    var titleSize = measureText(legend.title.text, legend.title.textStyle);\n    var titleWidth = titleSize.width;\n    var titleHeight = titleSize.height;\n    var textAlignment = legend.title.textAlignment;\n    var startX = 0;\n    var legendBoundsWidth = legendBounds.width;\n    var startY = elementSpacing + titleHeight / 2;\n\n    switch (textAlignment) {\n      case 'Far':\n        startX = legendBoundsWidth - titleWidth - startX;\n        break;\n\n      case 'Center':\n        startX = legendBoundsWidth / 2 - titleWidth / 2;\n        break;\n    }\n\n    if (startX < 0) {\n      startX = 0;\n      legendBoundsWidth = titleWidth;\n    }\n\n    if (legendBoundsWidth < titleWidth + startX) {\n      legendBoundsWidth = titleWidth + startX;\n    }\n\n    var options = new TextOption(smithchart.element.id + '_LegendTitleText', startX, startY, 'start', legend.title.text);\n    var element = renderTextElement(options, legend.title.textStyle, smithchart.themeStyle.legendLabel, gLegendEle);\n    element.setAttribute('aria-label', legend.title.description || legend.title.text);\n    return element;\n  };\n\n  SmithchartLegend.prototype.drawLegendItem = function (smithchart, legend, legendSeries, k, x, y, legendBounds) {\n    var _this = this;\n\n    var location;\n    var radius;\n    var symbol = legend.itemStyle;\n    var itemPadding = legend.itemPadding;\n    var textHeight;\n    radius = Math.sqrt(symbol['width'] * symbol['width'] + symbol['height'] * symbol['height']) / 2;\n    textHeight = measureText(legendSeries['text'], legend.textStyle).height;\n    location = {\n      x: x + symbol['width'] / 2,\n      y: y + (textHeight > symbol['height'] ? textHeight : symbol['height']) / 2\n    };\n    var legendGroup = smithchart.renderer.createGroup({\n      id: smithchart.element.id + '_svg' + '_Legend' + k.toString()\n    });\n    legendGroup['style']['cursor'] = legend.toggleVisibility ? 'pointer' : 'default';\n    var legendEventArgs = {\n      text: legendSeries['text'],\n      fill: legendSeries['fill'],\n      shape: legendSeries['shape'],\n      name: legendRender,\n      cancel: false\n    };\n\n    var legendRenderSuccess = function (args) {\n      if (!args.cancel) {\n        var shape = _this.drawLegendShape(smithchart, legendSeries, location.x, location.y, k, legend, args);\n\n        legendGroup.appendChild(shape);\n        var options = new TextOption(smithchart.element.id + '_LegendItemText' + k.toString(), location.x + symbol['width'] / 2 + legend.shapePadding, location.y + textHeight / 4, 'start', args.text);\n        legend.textStyle.fontFamily = smithchart.themeStyle.fontFamily || legend.textStyle.fontFamily;\n        legend.textStyle.size = smithchart.themeStyle.fontSize || legend.textStyle.size;\n        var element = renderTextElement(options, legend.textStyle, smithchart.themeStyle.legendLabel, legendGroup);\n        element.setAttribute('aria-label', legend.description || 'Click to show or hide the ' + options.text + ' series');\n        legendGroup.appendChild(element);\n\n        _this.legendItemGroup.appendChild(legendGroup);\n      }\n    };\n\n    legendRenderSuccess.bind(this);\n    smithchart.trigger(legendRender, legendEventArgs, legendRenderSuccess);\n    return this.legendItemGroup;\n  };\n\n  SmithchartLegend.prototype.drawLegendShape = function (smithchart, legendSeries, locX, locY, index, legend, legendEventArgs) {\n    var element;\n    var circleOptions;\n    var pathOptions;\n    var path;\n    var symbol = legend.itemStyle;\n    var width = symbol['width'];\n    var height = symbol['height'];\n    var x = locX + -width / 2;\n    var y = locY + -height / 2;\n    var border = {\n      color: symbol.border.color,\n      width: symbol.border.width\n    };\n    var opacity = 1;\n    var fill = smithchart.series[index].visibility === 'visible' ? legendEventArgs.fill : 'grey';\n    var shape = legendEventArgs.shape.toLowerCase();\n    var radius = Math.sqrt(height * height + width * width) / 2;\n\n    switch (shape) {\n      case 'circle':\n        circleOptions = new CircleOption(smithchart.element.id + '_svg' + '_LegendItemShape' + index.toString(), fill, border, opacity, locX, locY, radius, null);\n        element = smithchart.renderer.drawCircle(circleOptions);\n        break;\n\n      case 'rectangle':\n        path = 'M' + ' ' + x + ' ' + (locY + -height / 2) + ' ' + 'L' + ' ' + (width / 2 + locX) + ' ' + (locY + -height / 2) + ' ' + 'L' + ' ' + (locX + width / 2) + ' ' + (locY + height / 2) + ' ' + 'L' + ' ' + x + ' ' + (locY + height / 2) + ' ' + 'L' + ' ' + x + ' ' + (locY + -height / 2) + ' z';\n        pathOptions = new PathOption(smithchart.element.id + '_svg' + '_LegendItemShape' + index.toString(), fill, border.width, border.color, 1, '', path);\n        element = smithchart.renderer.drawPath(pathOptions);\n        break;\n\n      case 'diamond':\n        path = 'M' + ' ' + x + ' ' + locY + ' ' + 'L' + ' ' + locX + ' ' + (locY + -height / 2) + ' ' + 'L' + ' ' + (width / 2 + locX) + ' ' + locY + ' ' + 'L' + ' ' + locX + ' ' + (locY + height / 2) + ' ' + 'L' + ' ' + x + ' ' + locY + ' z';\n        pathOptions = new PathOption(smithchart.element.id + '_svg' + '_LegendItemShape' + index.toString(), fill, border.width, border.color, 1, '', path);\n        element = smithchart.renderer.drawPath(pathOptions);\n        break;\n\n      case 'pentagon':\n        var eq = 72;\n\n        for (var j = 0; j <= 5; j++) {\n          var xValue = radius * Math.cos(Math.PI / 180 * (j * eq));\n          var yValue = radius * Math.sin(Math.PI / 180 * (j * eq));\n\n          if (j === 0) {\n            path = 'M' + ' ' + (xValue + locX) + ' ' + (locY + yValue) + ' ';\n          } else {\n            path = path.concat('L' + ' ' + (locX + xValue) + ' ' + (locY + yValue) + ' ');\n          }\n        }\n\n        path = path.concat('Z');\n        pathOptions = new PathOption(smithchart.element.id + '_svg' + '_LegendItemShape' + index.toString(), fill, border.width, border.color, 1, '', path);\n        element = smithchart.renderer.drawPath(pathOptions);\n        break;\n\n      case 'triangle':\n        path = 'M' + ' ' + x + ' ' + (height / 2 + locY) + ' ' + 'L' + ' ' + locX + ' ' + (locY + -height / 2) + ' ' + 'L' + ' ' + (locX + width / 2) + ' ' + (locY + height / 2) + ' ' + 'L' + ' ' + x + ' ' + (locY + height / 2) + ' Z';\n        pathOptions = new PathOption(smithchart.element.id + '_svg' + '_LegendItemShape' + index.toString(), fill, border.width, border.color, 1, '', path);\n        element = smithchart.renderer.drawPath(pathOptions);\n        break;\n    }\n\n    return element;\n  };\n  /**\n   * Get module name.\n   */\n\n\n  SmithchartLegend.prototype.getModuleName = function () {\n    return 'SmithchartLegend';\n  };\n  /**\n   * To destroy the legend.\n   * @return {void}\n   * @private\n   */\n\n\n  SmithchartLegend.prototype.destroy = function (smithchart) {\n    /**\n     * Destroy method performed here\n     */\n  };\n\n  return SmithchartLegend;\n}();\n\nexport { SmithchartLegend };","map":{"version":3,"names":["measureText","TextOption","renderTextElement","CircleOption","PathOption","RectOption","SmithchartRect","legendRender","SmithchartLegend","legendSeries","prototype","renderLegend","smithchart","calculateLegendBounds","_drawLegend","legendActualBounds","padding","legend","legendSettings","legendSizeHeight","height","legendSizeWidth","width","itemPadding","position","toLowerCase","font","title","textStyle","legendItemWidth","legendItemHeight","legendHeight","svgObjectWidth","availableSize","elementSpacing","border","rowCount","columnCount","titleSize","maxRowWidth","totalRowHeight","curRowWidth","curRowHeight","allowItems","itemsCountRow","length","series","legendBounds","visible","Math","ceil","i","push","text","seriesIndex","shape","fill","seriesColors","bounds","legendsize","_getLegendSize","max","x","y","symbolWidth","itemStyle","symbolHeight","textSize","shapePadding","legendPosition","alignment","maxWidth","startX","startY","titleFont","smithchartTitleHeight","smithchartSubtitleHeight","subtitle","offset","margin","top","svgObjectHeight","legendBorder","legendWidth","legendTitleHeight","borderSize","svgWidth","svgHeight","location","gLegendEle","renderer","createGroup","element","id","svgObject","appendChild","legendItemGroup","currentX","currentY","drawLegendTitle","k","legendGroup","drawLegendItem","setAttribute","toString","drawLegendBorder","borderRect","drawRectangle","titleWidth","titleHeight","textAlignment","legendBoundsWidth","options","themeStyle","legendLabel","description","_this","radius","symbol","textHeight","sqrt","toggleVisibility","legendEventArgs","name","cancel","legendRenderSuccess","args","drawLegendShape","fontFamily","size","fontSize","bind","trigger","locX","locY","index","circleOptions","pathOptions","path","color","opacity","visibility","drawCircle","drawPath","eq","j","xValue","cos","PI","yValue","sin","concat","getModuleName","destroy"],"sources":["C:/Users/shahj/OneDrive/Documents/GitHub/Admin Dashboard/Frontend/node_modules/@syncfusion/ej2-charts/src/smithchart/legend/legendrender.js"],"sourcesContent":["import { measureText, TextOption, renderTextElement, CircleOption, PathOption, RectOption } from '../../smithchart/utils/helper';\nimport { SmithchartRect } from '../../smithchart/utils/utils';\nimport { legendRender } from '../model/constant';\nvar SmithchartLegend = /** @class */ (function () {\n    function SmithchartLegend() {\n        this.legendSeries = [];\n    }\n    SmithchartLegend.prototype.renderLegend = function (smithchart) {\n        this.calculateLegendBounds(smithchart);\n        this._drawLegend(smithchart);\n        return this.legendActualBounds;\n    };\n    SmithchartLegend.prototype.calculateLegendBounds = function (smithchart) {\n        this.legendSeries = [];\n        var padding = 10;\n        var legend = smithchart.legendSettings;\n        var legendSizeHeight = legend.height;\n        var legendSizeWidth = legend.width;\n        var itemPadding = legend.itemPadding > 0 ? legend.itemPadding : 0;\n        var position = legend.position.toLowerCase();\n        var font = legend.title.textStyle;\n        var width = 0;\n        var height = 0;\n        var legendItemWidth = 0;\n        var legendItemHeight = 0;\n        var legendHeight = 0;\n        var svgObjectWidth = smithchart.availableSize.width - ((smithchart.elementSpacing * 4) - (legend.border.width * 2)\n            + (smithchart.border.width * 2));\n        var rowCount = legend.rowCount;\n        var columnCount = legend.columnCount;\n        var titleSize = measureText(smithchart.legendSettings['title']['text'], font);\n        var maxRowWidth = 0;\n        var totalRowHeight = 0;\n        var curRowWidth = 0;\n        var curRowHeight = 0;\n        var allowItems;\n        var itemsCountRow = 0;\n        var length = smithchart.series.length;\n        var legendBounds;\n        if (smithchart.legendSettings.visible && length !== 0) {\n            if (position === 'bottom' || position === 'top' || position === 'custom') {\n                if ((rowCount && columnCount) && (rowCount <= columnCount)) {\n                    rowCount = length / columnCount;\n                }\n                else if (rowCount == null && columnCount != null) {\n                    rowCount = length / columnCount;\n                }\n                else if (rowCount == null && columnCount == null) {\n                    rowCount = 1;\n                }\n                if (rowCount) {\n                    allowItems = Math.ceil(length / rowCount);\n                }\n            }\n            else {\n                if ((rowCount && columnCount) && (rowCount <= columnCount)) {\n                    columnCount = length / rowCount;\n                }\n                else if (rowCount != null && columnCount == null) {\n                    columnCount = length / rowCount;\n                }\n                else if (rowCount == null && columnCount == null) {\n                    columnCount = 1;\n                }\n                if (columnCount) {\n                    allowItems = columnCount;\n                }\n            }\n            for (var i = 0; i < length; i++) {\n                this.legendSeries.push({\n                    text: smithchart.series[i]['name'] ? smithchart.series[i]['name'] : 'series' + i,\n                    seriesIndex: i,\n                    shape: smithchart.legendSettings.shape,\n                    fill: smithchart.series[i].fill || smithchart.seriesColors[i % smithchart.seriesColors.length],\n                    bounds: null\n                });\n                var legendsize = this._getLegendSize(smithchart, this.legendSeries[i]);\n                legendItemWidth = Math.max(legendsize['width'], legendItemWidth);\n                legendItemHeight = Math.max(legendsize['height'], legendItemHeight);\n                this.legendSeries[i]['bounds'] = { width: legendItemWidth, height: legendItemHeight };\n                itemsCountRow = itemsCountRow + 1;\n                curRowWidth = curRowWidth + legendItemWidth + itemPadding;\n                curRowHeight = Math.max(legendItemHeight, curRowHeight);\n                if (position === 'top' || position === 'bottom' || position === 'custom') {\n                    if (curRowWidth > svgObjectWidth) {\n                        curRowWidth -= legendsize.width + itemPadding;\n                        maxRowWidth = Math.max(maxRowWidth, curRowWidth);\n                        curRowWidth = legendsize.width + itemPadding;\n                        totalRowHeight = totalRowHeight + curRowHeight + itemPadding;\n                    }\n                }\n                if (itemsCountRow === allowItems || i === length - 1) {\n                    maxRowWidth = Math.max(maxRowWidth, curRowWidth);\n                    totalRowHeight = totalRowHeight + curRowHeight + itemPadding;\n                    legendHeight = totalRowHeight;\n                    itemsCountRow = 0;\n                    curRowHeight = 0;\n                    curRowWidth = 0;\n                }\n            }\n            width = (titleSize.width) > maxRowWidth - itemPadding ? (titleSize.width + padding * 2 + itemPadding) :\n                maxRowWidth + padding * 2 - (smithchart.border.width * 2);\n            height = legendHeight + smithchart.elementSpacing;\n            legendBounds = { x: 0, y: 0, width: width, height: height };\n        }\n        this.legendActualBounds = legendBounds;\n        if (legendSizeWidth != null) {\n            this.legendActualBounds.width = legendSizeWidth;\n        }\n        if (legendSizeHeight != null) {\n            this.legendActualBounds.height = legendSizeHeight;\n        }\n    };\n    SmithchartLegend.prototype._getLegendSize = function (smithchart, series) {\n        var legend = smithchart.legendSettings;\n        var symbolWidth = legend.itemStyle.width;\n        var symbolHeight = legend.itemStyle.height;\n        var textSize = measureText(series.text, legend.textStyle);\n        var width = symbolWidth + textSize.width + legend.shapePadding;\n        var height = Math.max(symbolHeight, textSize.height);\n        return { width: width, height: height };\n    };\n    /* eslint-disable  */\n    SmithchartLegend.prototype._drawLegend = function (smithchart) {\n        var legend = smithchart.legendSettings;\n        var legendPosition = legend.position.toLowerCase();\n        var alignment = legend.alignment;\n        var legendBounds = this.legendActualBounds;\n        var maxWidth = 0;\n        var startX;\n        var startY;\n        var titleFont = smithchart.title.font ? smithchart.title.font : smithchart.title.textStyle;\n        var smithchartTitleHeight = measureText(smithchart.title.text, titleFont).height;\n        var smithchartSubtitleHeight = measureText(smithchart.title.subtitle.text, smithchart.title.subtitle.textStyle).height;\n        var elementSpacing = smithchart.elementSpacing;\n        var offset = smithchartTitleHeight + smithchartSubtitleHeight + elementSpacing + smithchart.margin.top;\n        var itemPadding = legend.itemPadding > 0 ? legend.itemPadding : 0;\n        var svgObjectWidth = smithchart.availableSize.width;\n        var svgObjectHeight = smithchart.availableSize.height;\n        var legendBorder = legend.border.width;\n        var legendWidth = 0;\n        var titleSize = measureText(legend['title']['text'], legend.title.textStyle);\n        var legendTitleHeight = titleSize.height;\n        var borderSize = smithchart.border.width;\n        var svgWidth = svgObjectWidth - ((borderSize * 2));\n        var svgHeight = svgObjectHeight - ((borderSize * 2));\n        legendBounds.height += legendTitleHeight;\n        if (legendPosition !== 'custom') {\n            switch (legendPosition) {\n                case 'bottom':\n                    legendBounds.y = svgHeight - (legendBounds.height + (legendBorder) + elementSpacing);\n                    break;\n                case 'top':\n                    legendBounds.y = borderSize + offset;\n                    break;\n                case 'right':\n                    legendBounds.x = svgWidth - legendBounds.width - (elementSpacing * 2);\n                    break;\n                case 'left':\n                    legendBounds.x = borderSize + (elementSpacing * 2);\n                    break;\n            }\n            if (legendPosition === 'left' || legendPosition === 'right') {\n                switch (alignment) {\n                    case 'Center':\n                        legendBounds.y = (svgHeight / 2) - ((legendBounds.height + legendBorder * 2) / 2) + (elementSpacing / 2);\n                        break;\n                    case 'Near':\n                        legendBounds.y = borderSize + (elementSpacing * 2) + offset;\n                        break;\n                    case 'Far':\n                        legendBounds.y = svgHeight - (legendBounds.height + (legendBorder)) - (elementSpacing * 2);\n                        break;\n                }\n            }\n            else {\n                switch (alignment) {\n                    case 'Center':\n                        legendBounds.x = (svgWidth / 2) - ((legendBounds.width + legendBorder * 2) / 2) + (elementSpacing / 2);\n                        break;\n                    case 'Near':\n                        legendBounds.x = borderSize + (elementSpacing * 2);\n                        break;\n                    case 'Far':\n                        legendBounds.x = svgWidth - (legendBounds.width + (legendBorder)) - (elementSpacing * 2);\n                        break;\n                }\n            }\n        }\n        else {\n            legendBounds.y = (legend.location.y < svgHeight) ? legend.location.y : 0;\n            legendBounds.x = (legend.location.x < svgWidth) ? legend.location.x : 0;\n        }\n        if (legendPosition === 'bottom' || legendPosition === 'top') {\n            for (var i = 0; i < this.legendSeries.length; i++) {\n                legendWidth += this.legendSeries[i].bounds.width + itemPadding;\n                if (legendWidth > svgWidth) {\n                    legendBounds.x = (svgWidth / 2) - ((legendBounds.width + legendBorder * 2) / 2) + (elementSpacing / 2);\n                    break;\n                }\n            }\n        }\n        var gLegendEle = smithchart.renderer.createGroup({ 'id': smithchart.element.id + '_legend_group' });\n        smithchart.svgObject.appendChild(gLegendEle);\n        this.legendItemGroup = smithchart.renderer.createGroup({ 'id': smithchart.element.id + 'legendItem_Group' });\n        var currentX = startX = elementSpacing;\n        var currentY = startY = elementSpacing;\n        if (legend.title.text !== '' && legend.title.visible) {\n            gLegendEle.appendChild(this.drawLegendTitle(smithchart, legend, legendBounds, gLegendEle));\n            currentY = startY = elementSpacing + legendTitleHeight;\n        }\n        for (var k = 0; k < this.legendSeries.length; k++) {\n            if ((legend.rowCount < legend.columnCount || legend.rowCount === legend.columnCount) &&\n                (legendPosition === 'top' || legendPosition === 'bottom' || legendPosition === 'custom')) {\n                if ((currentX + this.legendSeries[k]['bounds'].width) > legendBounds.width + startX) {\n                    currentX = elementSpacing;\n                    currentY += this.legendSeries[k]['bounds'].height + itemPadding;\n                }\n                this.legendGroup = this.drawLegendItem(smithchart, legend, this.legendSeries[k], k, currentX, (currentY), legendBounds);\n                gLegendEle.appendChild(this.legendGroup);\n                currentX += this.legendSeries[k]['bounds'].width + itemPadding;\n            }\n            else {\n                if (((currentY + this.legendSeries[k]['bounds'].height + itemPadding) +\n                    legendTitleHeight + borderSize > legendBounds.height + startY)) {\n                    currentY = startY;\n                    currentX += maxWidth + (itemPadding);\n                }\n                this.legendGroup = this.drawLegendItem(smithchart, legend, this.legendSeries[k], k, (currentX), (currentY), legendBounds);\n                gLegendEle.appendChild(this.legendGroup);\n                currentY += this.legendSeries[k]['bounds'].height + itemPadding;\n                maxWidth = Math.max(maxWidth, this.legendSeries[k]['bounds'].width);\n            }\n        }\n        gLegendEle.setAttribute('transform', 'translate(' + legendBounds.x.toString() + ',' + legendBounds.y.toString() + ')');\n        this.drawLegendBorder(gLegendEle, smithchart, legend, legendBounds);\n    };\n    SmithchartLegend.prototype.drawLegendBorder = function (gLegendEle, smithchart, legend, legendBounds) {\n        var borderRect = new RectOption(smithchart.element.id + '_svg' + '_legendRect', 'none', legend.border, 1, new SmithchartRect(0, 0, legendBounds.width, legendBounds.height));\n        gLegendEle.appendChild(smithchart.renderer.drawRectangle(borderRect));\n    };\n    SmithchartLegend.prototype.drawLegendTitle = function (smithchart, legend, legendBounds, gLegendEle) {\n        var elementSpacing = smithchart.elementSpacing;\n        var titleSize = measureText(legend.title.text, legend.title.textStyle);\n        var titleWidth = titleSize.width;\n        var titleHeight = titleSize.height;\n        var textAlignment = legend.title.textAlignment;\n        var startX = 0;\n        var legendBoundsWidth = legendBounds.width;\n        var startY = elementSpacing + (titleHeight / 2);\n        switch (textAlignment) {\n            case 'Far':\n                startX = legendBoundsWidth - titleWidth - startX;\n                break;\n            case 'Center':\n                startX = legendBoundsWidth / 2 - (titleWidth) / 2;\n                break;\n        }\n        if (startX < 0) {\n            startX = 0;\n            legendBoundsWidth = titleWidth;\n        }\n        if (legendBoundsWidth < titleWidth + startX) {\n            legendBoundsWidth = titleWidth + startX;\n        }\n        var options = new TextOption(smithchart.element.id + '_LegendTitleText', startX, startY, 'start', legend.title.text);\n        var element = renderTextElement(options, legend.title.textStyle, smithchart.themeStyle.legendLabel, gLegendEle);\n        element.setAttribute('aria-label', legend.title.description || legend.title.text);\n        return element;\n    };\n    SmithchartLegend.prototype.drawLegendItem = function (smithchart, legend, legendSeries, k, x, y, legendBounds) {\n        var _this = this;\n        var location;\n        var radius;\n        var symbol = legend.itemStyle;\n        var itemPadding = legend.itemPadding;\n        var textHeight;\n        radius = Math.sqrt(symbol['width'] * symbol['width'] + symbol['height'] * symbol['height']) / 2;\n        textHeight = measureText(legendSeries['text'], legend.textStyle).height;\n        location = {\n            x: x + symbol['width'] / 2,\n            y: (y + (textHeight > symbol['height'] ? textHeight : symbol['height']) / 2)\n        };\n        var legendGroup = smithchart.renderer.createGroup({ id: smithchart.element.id + '_svg' + '_Legend' + k.toString() });\n        legendGroup['style']['cursor'] = legend.toggleVisibility ? 'pointer' : 'default';\n        var legendEventArgs = {\n            text: legendSeries['text'],\n            fill: legendSeries['fill'],\n            shape: legendSeries['shape'],\n            name: legendRender,\n            cancel: false\n        };\n        var legendRenderSuccess = function (args) {\n            if (!args.cancel) {\n                var shape = _this.drawLegendShape(smithchart, legendSeries, location.x, location.y, k, legend, args);\n                legendGroup.appendChild(shape);\n                var options = new TextOption(smithchart.element.id + '_LegendItemText' + k.toString(), location.x + symbol['width'] / 2 + legend.shapePadding, location.y + textHeight / 4, 'start', args.text);\n                legend.textStyle.fontFamily = smithchart.themeStyle.fontFamily || legend.textStyle.fontFamily;\n                legend.textStyle.size = smithchart.themeStyle.fontSize || legend.textStyle.size;\n                var element = renderTextElement(options, legend.textStyle, smithchart.themeStyle.legendLabel, legendGroup);\n                element.setAttribute('aria-label', legend.description || 'Click to show or hide the ' + options.text + ' series');\n                legendGroup.appendChild(element);\n                _this.legendItemGroup.appendChild(legendGroup);\n            }\n        };\n        legendRenderSuccess.bind(this);\n        smithchart.trigger(legendRender, legendEventArgs, legendRenderSuccess);\n        return this.legendItemGroup;\n    };\n    SmithchartLegend.prototype.drawLegendShape = function (smithchart, legendSeries, locX, locY, index, legend, legendEventArgs) {\n        var element;\n        var circleOptions;\n        var pathOptions;\n        var path;\n        var symbol = legend.itemStyle;\n        var width = symbol['width'];\n        var height = symbol['height'];\n        var x = locX + (-width / 2);\n        var y = locY + (-height / 2);\n        var border = { color: symbol.border.color, width: symbol.border.width };\n        var opacity = 1;\n        var fill = (smithchart.series[index].visibility === 'visible') ? legendEventArgs.fill : 'grey';\n        var shape = legendEventArgs.shape.toLowerCase();\n        var radius = Math.sqrt(height * height + width * width) / 2;\n        switch (shape) {\n            case 'circle':\n                circleOptions = new CircleOption(smithchart.element.id + '_svg' + '_LegendItemShape' + index.toString(), fill, border, opacity, locX, locY, radius, null);\n                element = smithchart.renderer.drawCircle(circleOptions);\n                break;\n            case 'rectangle':\n                path = 'M' + ' ' + x + ' ' + (locY + (-height / 2)) + ' ' +\n                    'L' + ' ' + ((width / 2) + locX) + ' ' + (locY + (-height / 2)) + ' ' +\n                    'L' + ' ' + (locX + (width / 2)) + ' ' + (locY + (height / 2)) + ' ' +\n                    'L' + ' ' + x + ' ' + (locY + (height / 2)) + ' ' +\n                    'L' + ' ' + x + ' ' + (locY + (-height / 2)) + ' z';\n                pathOptions = new PathOption(smithchart.element.id + '_svg' + '_LegendItemShape' + index.toString(), fill, border.width, border.color, 1, '', path);\n                element = smithchart.renderer.drawPath(pathOptions);\n                break;\n            case 'diamond':\n                path = 'M' + ' ' + x + ' ' + locY + ' ' +\n                    'L' + ' ' + locX + ' ' + (locY + (-height / 2)) + ' ' +\n                    'L' + ' ' + ((width / 2) + locX) + ' ' + locY + ' ' +\n                    'L' + ' ' + locX + ' ' + (locY + (height / 2)) + ' ' +\n                    'L' + ' ' + x + ' ' + locY + ' z';\n                pathOptions = new PathOption(smithchart.element.id + '_svg' + '_LegendItemShape' + index.toString(), fill, border.width, border.color, 1, '', path);\n                element = smithchart.renderer.drawPath(pathOptions);\n                break;\n            case 'pentagon':\n                var eq = 72;\n                for (var j = 0; j <= 5; j++) {\n                    var xValue = radius * Math.cos((Math.PI / 180) * (j * eq));\n                    var yValue = radius * Math.sin((Math.PI / 180) * (j * eq));\n                    if (j === 0) {\n                        path = 'M' + ' ' + (xValue + locX) + ' ' + (locY + yValue) + ' ';\n                    }\n                    else {\n                        path = path.concat('L' + ' ' + (locX + xValue) + ' ' + (locY + yValue) + ' ');\n                    }\n                }\n                path = path.concat('Z');\n                pathOptions = new PathOption(smithchart.element.id + '_svg' + '_LegendItemShape' + index.toString(), fill, border.width, border.color, 1, '', path);\n                element = smithchart.renderer.drawPath(pathOptions);\n                break;\n            case 'triangle':\n                path = 'M' + ' ' + x + ' ' + ((height / 2) + locY) + ' ' +\n                    'L' + ' ' + locX + ' ' + (locY + (-height / 2)) + ' ' +\n                    'L' + ' ' + (locX + (width / 2)) + ' ' + (locY + (height / 2)) + ' ' +\n                    'L' + ' ' + x + ' ' + (locY + (height / 2)) + ' Z';\n                pathOptions = new PathOption(smithchart.element.id + '_svg' + '_LegendItemShape' + index.toString(), fill, border.width, border.color, 1, '', path);\n                element = smithchart.renderer.drawPath(pathOptions);\n                break;\n        }\n        return element;\n    };\n    /**\n     * Get module name.\n     */\n    SmithchartLegend.prototype.getModuleName = function () {\n        return 'SmithchartLegend';\n    };\n    /**\n     * To destroy the legend.\n     * @return {void}\n     * @private\n     */\n    SmithchartLegend.prototype.destroy = function (smithchart) {\n        /**\n         * Destroy method performed here\n         */\n    };\n    return SmithchartLegend;\n}());\nexport { SmithchartLegend };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}