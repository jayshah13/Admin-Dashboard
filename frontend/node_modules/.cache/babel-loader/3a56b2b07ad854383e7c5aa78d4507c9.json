{"ast":null,"code":"import { EventHandler, closest, Browser, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { remove } from '@syncfusion/ej2-base';\nimport { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport { parentsUntil, applyBiggerTheme } from '../base/util';\nimport * as events from '../base/constant';\nimport { calculatePosition } from '@syncfusion/ej2-popups';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { Group } from '../actions/group';\nimport { Sort } from '../actions/sort';\nimport { Filter } from '../actions/filter';\nimport { Resize } from '../actions/resize';\nimport * as literals from '../base/string-literals';\n/**\n * 'column menu module used to handle column menu actions'\n *\n * @hidden\n */\n\nvar ColumnMenu =\n/** @class */\nfunction () {\n  function ColumnMenu(parent, serviceLocator) {\n    this.defaultItems = {};\n    this.localeText = this.setLocaleKey();\n    this.disableItems = [];\n    this.hiddenItems = [];\n    this.isOpen = false; // default class names\n\n    this.GROUP = 'e-icon-group';\n    this.UNGROUP = 'e-icon-ungroup';\n    this.ASCENDING = 'e-icon-ascending';\n    this.DESCENDING = 'e-icon-descending';\n    this.ROOT = 'e-columnmenu';\n    this.FILTER = 'e-icon-filter';\n    this.POP = 'e-filter-popup';\n    this.WRAP = 'e-col-menu';\n    this.CHOOSER = '_chooser_';\n    this.parent = parent;\n    this.gridID = parent.element.id;\n    this.serviceLocator = serviceLocator;\n    this.addEventListener();\n  }\n\n  ColumnMenu.prototype.wireEvents = function () {\n    var elements = this.getColumnMenuHandlers();\n\n    for (var i = 0; i < elements.length; i++) {\n      EventHandler.add(elements[i], 'mousedown', this.columnMenuHandlerDown, this);\n    }\n  };\n\n  ColumnMenu.prototype.unwireEvents = function () {\n    var elements = this.getColumnMenuHandlers();\n\n    for (var i = 0; i < elements.length; i++) {\n      EventHandler.remove(elements[i], 'mousedown', this.columnMenuHandlerDown);\n    }\n  };\n  /**\n   * To destroy the resize\n   *\n   * @returns {void}\n   * @hidden\n   */\n\n\n  ColumnMenu.prototype.destroy = function () {\n    var gridElement = this.parent.element;\n\n    if (!gridElement || !gridElement.querySelector('.' + literals.gridHeader) && !gridElement.querySelector('.' + literals.gridContent)) {\n      return;\n    }\n\n    this.columnMenu.destroy();\n    this.removeEventListener();\n    this.unwireFilterEvents();\n    this.unwireEvents();\n\n    if (this.element.parentNode) {\n      remove(this.element);\n    }\n  };\n\n  ColumnMenu.prototype.columnMenuHandlerClick = function (e) {\n    if (e.target.classList.contains('e-columnmenu')) {\n      this.columnMenu.items = this.getItems();\n      this.columnMenu.dataBind();\n\n      if (this.isOpen && this.headerCell !== this.getHeaderCell(e) || document.querySelector('.e-grid-menu .e-menu-parent.e-ul')) {\n        this.columnMenu.close();\n        this.openColumnMenu(e);\n      } else if (!this.isOpen) {\n        this.openColumnMenu(e);\n      } else {\n        this.columnMenu.close();\n      }\n    }\n  };\n  /**\n   * @param {string} field - specifies the field name\n   * @returns {void}\n   * @hidden\n   */\n\n\n  ColumnMenu.prototype.openColumnMenuByField = function (field) {\n    this.openColumnMenu({\n      target: this.parent.getColumnHeaderByField(field).querySelector('.e-columnmenu')\n    });\n  };\n\n  ColumnMenu.prototype.afterFilterColumnMenuClose = function () {\n    if (this.columnMenu) {\n      this.columnMenu.items = this.getItems();\n      this.columnMenu.dataBind();\n      this.columnMenu.close();\n    }\n  };\n\n  ColumnMenu.prototype.openColumnMenu = function (e) {\n    var pos = {\n      top: 0,\n      left: 0\n    };\n    this.element.style.cssText = 'display:block;visibility:hidden';\n    var elePos = this.element.getBoundingClientRect();\n    var gClient = this.parent.element.getBoundingClientRect();\n    this.element.style.cssText = 'display:none;visibility:visible';\n    this.headerCell = this.getHeaderCell(e);\n\n    if (Browser.isDevice) {\n      pos.top = window.innerHeight / 2 - elePos.height / 2;\n      pos.left = window.innerWidth / 2 - elePos.width / 2;\n    } else {\n      if (this.parent.enableRtl) {\n        pos = calculatePosition(this.headerCell, 'left', 'bottom');\n      } else {\n        pos = calculatePosition(this.headerCell, 'right', 'bottom');\n        pos.left -= elePos.width;\n\n        if (pos.left + elePos.width + 1 >= gClient.right) {\n          pos.left -= 35;\n        }\n      }\n    }\n\n    this.columnMenu.open(pos.top, pos.left);\n\n    if (e.preventDefault) {\n      e.preventDefault();\n    }\n\n    applyBiggerTheme(this.parent.element, this.columnMenu.element.parentElement);\n  };\n\n  ColumnMenu.prototype.columnMenuHandlerDown = function () {\n    this.isOpen = !(this.element.style.display === 'none' || this.element.style.display === '');\n  };\n\n  ColumnMenu.prototype.getColumnMenuHandlers = function () {\n    return [].slice.call(this.parent.getHeaderTable().getElementsByClassName(this.ROOT));\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n\n\n  ColumnMenu.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.on(events.headerRefreshed, this.wireEvents, this);\n    this.parent.on(events.uiUpdate, this.enableAfterRenderMenu, this);\n    this.parent.on(events.initialEnd, this.render, this);\n\n    if (this.isFilterItemAdded()) {\n      this.parent.on(events.filterDialogCreated, this.filterPosition, this);\n    }\n\n    this.parent.on(events.click, this.columnMenuHandlerClick, this);\n    this.parent.on(events.afterFilterColumnMenuClose, this.afterFilterColumnMenuClose, this);\n    this.parent.on(events.keyPressed, this.keyPressHandler, this);\n    this.parent.on(events.destroy, this.destroy, this);\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n\n\n  ColumnMenu.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.off(events.headerRefreshed, this.unwireEvents);\n    this.parent.off(events.uiUpdate, this.enableAfterRenderMenu);\n    this.parent.off(events.initialEnd, this.render);\n\n    if (this.isFilterItemAdded()) {\n      this.parent.off(events.filterDialogCreated, this.filterPosition);\n    }\n\n    this.parent.off(events.click, this.columnMenuHandlerClick);\n    this.parent.on(events.afterFilterColumnMenuClose, this.afterFilterColumnMenuClose);\n    this.parent.off(events.keyPressed, this.keyPressHandler);\n    this.parent.off(events.destroy, this.destroy);\n  };\n\n  ColumnMenu.prototype.keyPressHandler = function (e) {\n    var gObj = this.parent;\n\n    if (e.action === 'altDownArrow') {\n      var element = gObj.focusModule.currentInfo.element;\n\n      if (element && element.classList.contains('e-headercell')) {\n        var column = gObj.getColumnByUid(element.firstElementChild.getAttribute('e-mappinguid'));\n        this.openColumnMenuByField(column.field);\n      }\n    }\n  };\n\n  ColumnMenu.prototype.enableAfterRenderMenu = function (e) {\n    if (e.module === this.getModuleName() && e.enable) {\n      if (this.columnMenu) {\n        this.columnMenu.destroy();\n        remove(this.element);\n      }\n\n      this.render();\n    }\n  };\n\n  ColumnMenu.prototype.render = function () {\n    this.l10n = this.serviceLocator.getService('localization');\n    this.element = this.parent.createElement('ul', {\n      id: this.gridID + '_columnmenu',\n      className: 'e-colmenu'\n    });\n    this.element.setAttribute('aria-label', this.l10n.getConstant('ColumnMenuDialogARIA'));\n    this.parent.element.appendChild(this.element);\n    this.columnMenu = new Menu({\n      cssClass: 'e-grid-menu',\n      enableRtl: this.parent.enableRtl,\n      enablePersistence: this.parent.enablePersistence,\n      locale: this.parent.locale,\n      items: this.getItems(),\n      select: this.columnMenuItemClick.bind(this),\n      beforeOpen: this.columnMenuBeforeOpen.bind(this),\n      onOpen: this.columnMenuOnOpen.bind(this),\n      onClose: this.columnMenuOnClose.bind(this),\n      beforeItemRender: this.beforeMenuItemRender.bind(this),\n      beforeClose: this.columnMenuBeforeClose.bind(this)\n    });\n    this.columnMenu.appendTo(this.element);\n    this.wireFilterEvents();\n  };\n\n  ColumnMenu.prototype.wireFilterEvents = function () {\n    if (!Browser.isDevice && this.isFilterItemAdded()) {\n      EventHandler.add(this.element, 'mouseover', this.appendFilter, this);\n    }\n  };\n\n  ColumnMenu.prototype.unwireFilterEvents = function () {\n    if (!Browser.isDevice && this.isFilterItemAdded()) {\n      EventHandler.remove(this.element, 'mouseover', this.appendFilter);\n    }\n  };\n\n  ColumnMenu.prototype.beforeMenuItemRender = function (args) {\n    if (this.isChooserItem(args.item)) {\n      var field_1 = this.getKeyFromId(args.item.id, this.CHOOSER);\n      var column = this.parent.columnModel.filter(function (col) {\n        return col.field === field_1;\n      });\n      var check = createCheckBox(this.parent.createElement, false, {\n        label: args.item.text,\n        checked: column[0].visible\n      });\n\n      if (this.parent.enableRtl) {\n        check.classList.add('e-rtl');\n      }\n\n      args.element.innerHTML = '';\n      args.element.appendChild(check);\n    } else if (args.item.id && this.getKeyFromId(args.item.id) === 'Filter') {\n      args.element.appendChild(this.parent.createElement('span', {\n        className: 'e-icons e-caret'\n      }));\n      args.element.className += 'e-filter-item e-menu-caret-icon';\n    }\n  };\n\n  ColumnMenu.prototype.columnMenuBeforeClose = function (args) {\n    var colChooser = args.event ? closest(args.event.target, '.e-menu-item') : null;\n\n    if (!isNullOrUndefined(args.parentItem) && this.getKeyFromId(args.parentItem.id) === 'ColumnChooser' && colChooser && this.isChooserItem(colChooser)) {\n      args.cancel = true;\n    } else if (args.event && (closest(args.event.target, '.' + this.POP) || args.event.currentTarget && args.event.currentTarget.activeElement && parentsUntil(args.event.currentTarget.activeElement, 'e-filter-popup') || parentsUntil(args.event.target, 'e-popup') || parentsUntil(args.event.target, 'e-popup-wrapper')) && !Browser.isDevice) {\n      args.cancel = true;\n    }\n  };\n\n  ColumnMenu.prototype.isChooserItem = function (item) {\n    return item.id && item.id.indexOf('_colmenu_') >= 0 && this.getKeyFromId(item.id, this.CHOOSER).indexOf('_colmenu_') === -1;\n  };\n\n  ColumnMenu.prototype.columnMenuBeforeOpen = function (args) {\n    args.column = this.targetColumn = this.getColumn();\n    this.parent.trigger(events.columnMenuOpen, args);\n\n    for (var _i = 0, _a = args.items; _i < _a.length; _i++) {\n      var item = _a[_i];\n      var key = this.getKeyFromId(item.id);\n      var dItem = this.defaultItems[key];\n\n      if (this.getDefaultItems().indexOf(key) !== -1 && this.ensureDisabledStatus(key) && !dItem.hide) {\n        this.disableItems.push(item.text);\n      }\n\n      if (item.hide) {\n        this.hiddenItems.push(item.text);\n      }\n    }\n\n    this.columnMenu.enableItems(this.disableItems, false);\n    this.columnMenu.hideItems(this.hiddenItems);\n  };\n\n  ColumnMenu.prototype.columnMenuOnOpen = function (args) {\n    if (args.element.className === 'e-menu-parent e-ul ') {\n      if (args.element.offsetHeight > window.innerHeight || this.parent.element.offsetHeight > window.innerHeight) {\n        args.element.style.maxHeight = window.innerHeight * 0.8 + 'px';\n        args.element.style.overflowY = 'auto';\n      }\n    }\n  };\n\n  ColumnMenu.prototype.ensureDisabledStatus = function (item) {\n    var status = false;\n\n    switch (item) {\n      case 'Group':\n        if (!this.parent.allowGrouping || this.parent.ensureModuleInjected(Group) && this.targetColumn && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) >= 0 || this.targetColumn && !this.targetColumn.allowGrouping) {\n          status = true;\n        }\n\n        break;\n\n      case 'AutoFitAll':\n      case 'AutoFit':\n        status = !this.parent.ensureModuleInjected(Resize);\n        break;\n\n      case 'Ungroup':\n        if (!this.parent.ensureModuleInjected(Group) || this.parent.ensureModuleInjected(Group) && this.targetColumn && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) < 0) {\n          status = true;\n        }\n\n        break;\n\n      case 'SortDescending':\n      case 'SortAscending':\n        if (this.parent.allowSorting && this.parent.ensureModuleInjected(Sort) && this.parent.sortSettings.columns.length > 0 && this.targetColumn && this.targetColumn.allowSorting) {\n          var sortColumns = this.parent.sortSettings.columns;\n\n          for (var i = 0; i < sortColumns.length; i++) {\n            if (sortColumns[i].field === this.targetColumn.field && sortColumns[i].direction.toLocaleLowerCase() === item.toLocaleLowerCase().replace('sort', '')) {\n              status = true;\n            }\n          }\n        } else if (!this.parent.allowSorting || !this.parent.ensureModuleInjected(Sort) || this.parent.allowSorting && this.targetColumn && !this.targetColumn.allowSorting) {\n          status = true;\n        }\n\n        break;\n\n      case 'Filter':\n        if (this.parent.allowFiltering && this.parent.filterSettings.type !== 'FilterBar' && this.parent.ensureModuleInjected(Filter) && this.targetColumn && this.targetColumn.allowFiltering) {\n          status = false;\n        } else if (this.parent.ensureModuleInjected(Filter) && this.parent.allowFiltering && this.targetColumn && (!this.targetColumn.allowFiltering || this.parent.filterSettings.type === 'FilterBar')) {\n          status = true;\n        }\n\n    }\n\n    return status;\n  };\n\n  ColumnMenu.prototype.columnMenuItemClick = function (args) {\n    var item = this.isChooserItem(args.item) ? 'ColumnChooser' : this.getKeyFromId(args.item.id);\n\n    switch (item) {\n      case 'AutoFit':\n        this.parent.autoFitColumns(this.targetColumn.field);\n        break;\n\n      case 'AutoFitAll':\n        this.parent.autoFitColumns([]);\n        break;\n\n      case 'Ungroup':\n        this.parent.ungroupColumn(this.targetColumn.field);\n        break;\n\n      case 'Group':\n        this.parent.groupColumn(this.targetColumn.field);\n        break;\n\n      case 'SortAscending':\n        this.parent.sortColumn(this.targetColumn.field, 'Ascending');\n        break;\n\n      case 'SortDescending':\n        this.parent.sortColumn(this.targetColumn.field, 'Descending');\n        break;\n\n      case 'ColumnChooser':\n        // eslint-disable-next-line no-case-declarations\n        var key = this.getKeyFromId(args.item.id, this.CHOOSER); // eslint-disable-next-line no-case-declarations\n\n        var checkbox = args.element.querySelector('.e-checkbox-wrapper .e-frame');\n\n        if (checkbox && checkbox.classList.contains('e-check')) {\n          checkbox.classList.remove('e-check');\n          this.parent.hideColumns(key, 'field');\n        } else if (checkbox) {\n          this.parent.showColumns(key, 'field');\n          checkbox.classList.add('e-check');\n        }\n\n        break;\n\n      case 'Filter':\n        this.getFilter(args.element, args.item.id);\n        break;\n    }\n\n    args.column = this.targetColumn;\n    this.parent.trigger(events.columnMenuClick, args);\n  };\n\n  ColumnMenu.prototype.columnMenuOnClose = function (args) {\n    var parent = 'parentObj';\n\n    if (args.items.length > 0 && args.items[0][parent] instanceof Menu) {\n      this.columnMenu.enableItems(this.disableItems, false);\n      this.disableItems = [];\n      this.columnMenu.showItems(this.hiddenItems);\n      this.hiddenItems = [];\n\n      if (this.isFilterPopupOpen()) {\n        this.getFilter(args.element, args.element.id, true);\n      }\n    }\n\n    if (!this.parent.isFrozenGrid()) {\n      this.parent.notify(events.restoreFocus, {});\n    }\n  };\n\n  ColumnMenu.prototype.getDefaultItems = function () {\n    return ['AutoFitAll', 'AutoFit', 'SortAscending', 'SortDescending', 'Group', 'Ungroup', 'ColumnChooser', 'Filter'];\n  };\n\n  ColumnMenu.prototype.getItems = function () {\n    var items = [];\n    var defultItems = this.parent.columnMenuItems ? this.parent.columnMenuItems : this.getDefault();\n\n    for (var _i = 0, defultItems_1 = defultItems; _i < defultItems_1.length; _i++) {\n      var item = defultItems_1[_i];\n\n      if (typeof item === 'string') {\n        if (item === 'ColumnChooser') {\n          var col = this.getDefaultItem(item);\n          col.items = this.createChooserItems();\n          items.push(col);\n        } else {\n          items.push(this.getDefaultItem(item));\n        }\n      } else {\n        items.push(item);\n      }\n    }\n\n    return items;\n  };\n\n  ColumnMenu.prototype.getDefaultItem = function (item) {\n    var menuItem = {};\n\n    switch (item) {\n      case 'SortAscending':\n        menuItem = {\n          iconCss: this.ASCENDING\n        };\n        break;\n\n      case 'SortDescending':\n        menuItem = {\n          iconCss: this.DESCENDING\n        };\n        break;\n\n      case 'Group':\n        menuItem = {\n          iconCss: this.GROUP\n        };\n        break;\n\n      case 'Ungroup':\n        menuItem = {\n          iconCss: this.UNGROUP\n        };\n        break;\n\n      case 'Filter':\n        menuItem = {\n          iconCss: this.FILTER\n        };\n        break;\n    }\n\n    this.defaultItems[item] = {\n      text: this.getLocaleText(item),\n      id: this.generateID(item),\n      iconCss: menuItem.iconCss ? 'e-icons ' + menuItem.iconCss : null\n    };\n    return this.defaultItems[item];\n  };\n\n  ColumnMenu.prototype.getLocaleText = function (item) {\n    return this.l10n.getConstant(this.localeText[item]);\n  };\n\n  ColumnMenu.prototype.generateID = function (item, append) {\n    return this.gridID + '_colmenu_' + (append ? append + item : item);\n  };\n\n  ColumnMenu.prototype.getKeyFromId = function (id, append) {\n    return id.indexOf('_colmenu_') > 0 && id.replace(this.gridID + '_colmenu_' + (append ? append : ''), '');\n  };\n  /**\n   * @returns {HTMLElement} returns the HTMLElement\n   * @hidden\n   */\n\n\n  ColumnMenu.prototype.getColumnMenu = function () {\n    return this.element;\n  };\n\n  ColumnMenu.prototype.getModuleName = function () {\n    return 'columnMenu';\n  };\n\n  ColumnMenu.prototype.setLocaleKey = function () {\n    var localeKeys = {\n      'AutoFitAll': 'autoFitAll',\n      'AutoFit': 'autoFit',\n      'Group': 'Group',\n      'Ungroup': 'Ungroup',\n      'SortAscending': 'SortAscending',\n      'SortDescending': 'SortDescending',\n      'ColumnChooser': 'Columnchooser',\n      'Filter': 'FilterMenu'\n    };\n    return localeKeys;\n  };\n\n  ColumnMenu.prototype.getHeaderCell = function (e) {\n    return closest(e.target, 'th.e-headercell');\n  };\n\n  ColumnMenu.prototype.getColumn = function () {\n    if (this.headerCell) {\n      var uid = this.headerCell.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n      return this.parent.getColumnByUid(uid);\n    }\n\n    return null;\n  };\n\n  ColumnMenu.prototype.createChooserItems = function () {\n    var items = [];\n\n    for (var _i = 0, _a = this.parent.columnModel; _i < _a.length; _i++) {\n      var col = _a[_i];\n\n      if (col.showInColumnChooser && col.field) {\n        items.push({\n          id: this.generateID(col.field, this.CHOOSER),\n          text: col.headerText ? col.headerText : col.field\n        });\n      }\n    }\n\n    return items;\n  };\n\n  ColumnMenu.prototype.appendFilter = function (e) {\n    var filter = 'Filter';\n\n    if (!this.defaultItems[filter]) {\n      return;\n    } else {\n      var key = this.defaultItems[filter].id;\n\n      if (closest(e.target, '#' + key) && !this.isFilterPopupOpen()) {\n        this.getFilter(e.target, key);\n      } else if (!closest(e.target, '#' + key) && this.isFilterPopupOpen()) {\n        this.getFilter(e.target, key, true);\n      }\n    }\n  };\n\n  ColumnMenu.prototype.getFilter = function (target, id, isClose) {\n    var filterPopup = this.getFilterPop();\n\n    if (filterPopup) {\n      filterPopup.style.display = !Browser.isDevice && isClose ? 'none' : 'block';\n    } else {\n      this.parent.notify(events.filterOpen, {\n        col: this.targetColumn,\n        target: target,\n        isClose: isClose,\n        id: id\n      });\n    }\n  };\n\n  ColumnMenu.prototype.setPosition = function (li, ul) {\n    var gridPos = this.parent.element.getBoundingClientRect();\n    var liPos = li.getBoundingClientRect();\n    var left = liPos.left - gridPos.left;\n    var top = liPos.top - gridPos.top;\n\n    if (gridPos.height < top) {\n      top = top - ul.offsetHeight + liPos.height;\n    } else if (gridPos.height < top + ul.offsetHeight) {\n      top = gridPos.height - ul.offsetHeight;\n    }\n\n    if (window.innerHeight < ul.offsetHeight + top + gridPos.top) {\n      top = window.innerHeight - ul.offsetHeight - gridPos.top;\n    }\n\n    if (top + gridPos.top < 0) {\n      top = 0;\n    }\n\n    left += this.parent.enableRtl ? -ul.offsetWidth : liPos.width;\n\n    if (gridPos.width <= left + ul.offsetWidth) {\n      left -= liPos.width + ul.offsetWidth;\n\n      if (liPos.left < ul.offsetWidth) {\n        left = liPos.left + ul.offsetWidth / 2;\n      }\n    } else if (left < 0) {\n      left += ul.offsetWidth + liPos.width;\n    }\n\n    ul.style.top = top + 'px';\n    ul.style.left = left + 'px';\n  };\n\n  ColumnMenu.prototype.filterPosition = function () {\n    var filterPopup = this.getFilterPop();\n    filterPopup.classList.add(this.WRAP);\n\n    if (!Browser.isDevice) {\n      var disp = filterPopup.style.display;\n      filterPopup.style.cssText += 'display:block;visibility:hidden';\n      var li = this.element.querySelector('.' + this.FILTER);\n\n      if (li) {\n        this.setPosition(li.parentElement, filterPopup);\n        filterPopup.style.cssText += 'display:' + disp + ';visibility:visible';\n      }\n    }\n  };\n\n  ColumnMenu.prototype.getDefault = function () {\n    var items = [];\n\n    if (this.parent.ensureModuleInjected(Resize)) {\n      items.push('AutoFitAll');\n      items.push('AutoFit');\n    }\n\n    if (this.parent.allowGrouping && this.parent.ensureModuleInjected(Group)) {\n      items.push('Group');\n      items.push('Ungroup');\n    }\n\n    if (this.parent.allowSorting && this.parent.ensureModuleInjected(Sort)) {\n      items.push('SortAscending');\n      items.push('SortDescending');\n    }\n\n    items.push('ColumnChooser');\n\n    if (this.parent.allowFiltering && this.parent.filterSettings.type !== 'FilterBar' && this.parent.ensureModuleInjected(Filter)) {\n      items.push('Filter');\n    }\n\n    return items;\n  };\n\n  ColumnMenu.prototype.isFilterPopupOpen = function () {\n    var filterPopup = this.getFilterPop();\n    return filterPopup && filterPopup.style.display !== 'none';\n  };\n\n  ColumnMenu.prototype.getFilterPop = function () {\n    if (Browser.isDevice && this.targetColumn !== null && this.parent.filterSettings.type === 'Menu') {\n      return document.getElementById(this.targetColumn.uid + '-flmdlg');\n    }\n\n    return this.parent.element.querySelector('.' + this.POP);\n  };\n\n  ColumnMenu.prototype.isFilterItemAdded = function () {\n    return this.parent.columnMenuItems && this.parent.columnMenuItems.indexOf('Filter') >= 0 || !this.parent.columnMenuItems;\n  };\n\n  return ColumnMenu;\n}();\n\nexport { ColumnMenu };","map":{"version":3,"names":["EventHandler","closest","Browser","isNullOrUndefined","remove","ContextMenu","Menu","parentsUntil","applyBiggerTheme","events","calculatePosition","createCheckBox","Group","Sort","Filter","Resize","literals","ColumnMenu","parent","serviceLocator","defaultItems","localeText","setLocaleKey","disableItems","hiddenItems","isOpen","GROUP","UNGROUP","ASCENDING","DESCENDING","ROOT","FILTER","POP","WRAP","CHOOSER","gridID","element","id","addEventListener","prototype","wireEvents","elements","getColumnMenuHandlers","i","length","add","columnMenuHandlerDown","unwireEvents","destroy","gridElement","querySelector","gridHeader","gridContent","columnMenu","removeEventListener","unwireFilterEvents","parentNode","columnMenuHandlerClick","e","target","classList","contains","items","getItems","dataBind","headerCell","getHeaderCell","document","close","openColumnMenu","openColumnMenuByField","field","getColumnHeaderByField","afterFilterColumnMenuClose","pos","top","left","style","cssText","elePos","getBoundingClientRect","gClient","isDevice","window","innerHeight","height","innerWidth","width","enableRtl","right","open","preventDefault","parentElement","display","slice","call","getHeaderTable","getElementsByClassName","isDestroyed","on","headerRefreshed","uiUpdate","enableAfterRenderMenu","initialEnd","render","isFilterItemAdded","filterDialogCreated","filterPosition","click","keyPressed","keyPressHandler","off","gObj","action","focusModule","currentInfo","column","getColumnByUid","firstElementChild","getAttribute","module","getModuleName","enable","l10n","getService","createElement","className","setAttribute","getConstant","appendChild","cssClass","enablePersistence","locale","select","columnMenuItemClick","bind","beforeOpen","columnMenuBeforeOpen","onOpen","columnMenuOnOpen","onClose","columnMenuOnClose","beforeItemRender","beforeMenuItemRender","beforeClose","columnMenuBeforeClose","appendTo","wireFilterEvents","appendFilter","args","isChooserItem","item","field_1","getKeyFromId","columnModel","filter","col","check","label","text","checked","visible","innerHTML","colChooser","event","parentItem","cancel","currentTarget","activeElement","indexOf","targetColumn","getColumn","trigger","columnMenuOpen","_i","_a","key","dItem","getDefaultItems","ensureDisabledStatus","hide","push","enableItems","hideItems","offsetHeight","maxHeight","overflowY","status","allowGrouping","ensureModuleInjected","groupSettings","columns","allowSorting","sortSettings","sortColumns","direction","toLocaleLowerCase","replace","allowFiltering","filterSettings","type","autoFitColumns","ungroupColumn","groupColumn","sortColumn","checkbox","hideColumns","showColumns","getFilter","columnMenuClick","showItems","isFilterPopupOpen","isFrozenGrid","notify","restoreFocus","defultItems","columnMenuItems","getDefault","defultItems_1","getDefaultItem","createChooserItems","menuItem","iconCss","getLocaleText","generateID","append","getColumnMenu","localeKeys","uid","showInColumnChooser","headerText","isClose","filterPopup","getFilterPop","filterOpen","setPosition","li","ul","gridPos","liPos","offsetWidth","disp","getElementById"],"sources":["C:/Users/shahj/OneDrive/Documents/GitHub/Admin-Dashboard/frontend/node_modules/@syncfusion/ej2-grids/src/grid/actions/column-menu.js"],"sourcesContent":["import { EventHandler, closest, Browser, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { remove } from '@syncfusion/ej2-base';\nimport { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport { parentsUntil, applyBiggerTheme } from '../base/util';\nimport * as events from '../base/constant';\nimport { calculatePosition } from '@syncfusion/ej2-popups';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { Group } from '../actions/group';\nimport { Sort } from '../actions/sort';\nimport { Filter } from '../actions/filter';\nimport { Resize } from '../actions/resize';\nimport * as literals from '../base/string-literals';\n/**\n * 'column menu module used to handle column menu actions'\n *\n * @hidden\n */\nvar ColumnMenu = /** @class */ (function () {\n    function ColumnMenu(parent, serviceLocator) {\n        this.defaultItems = {};\n        this.localeText = this.setLocaleKey();\n        this.disableItems = [];\n        this.hiddenItems = [];\n        this.isOpen = false;\n        // default class names\n        this.GROUP = 'e-icon-group';\n        this.UNGROUP = 'e-icon-ungroup';\n        this.ASCENDING = 'e-icon-ascending';\n        this.DESCENDING = 'e-icon-descending';\n        this.ROOT = 'e-columnmenu';\n        this.FILTER = 'e-icon-filter';\n        this.POP = 'e-filter-popup';\n        this.WRAP = 'e-col-menu';\n        this.CHOOSER = '_chooser_';\n        this.parent = parent;\n        this.gridID = parent.element.id;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    ColumnMenu.prototype.wireEvents = function () {\n        var elements = this.getColumnMenuHandlers();\n        for (var i = 0; i < elements.length; i++) {\n            EventHandler.add(elements[i], 'mousedown', this.columnMenuHandlerDown, this);\n        }\n    };\n    ColumnMenu.prototype.unwireEvents = function () {\n        var elements = this.getColumnMenuHandlers();\n        for (var i = 0; i < elements.length; i++) {\n            EventHandler.remove(elements[i], 'mousedown', this.columnMenuHandlerDown);\n        }\n    };\n    /**\n     * To destroy the resize\n     *\n     * @returns {void}\n     * @hidden\n     */\n    ColumnMenu.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.' + literals.gridHeader) && !gridElement.querySelector('.' + literals.gridContent))) {\n            return;\n        }\n        this.columnMenu.destroy();\n        this.removeEventListener();\n        this.unwireFilterEvents();\n        this.unwireEvents();\n        if (this.element.parentNode) {\n            remove(this.element);\n        }\n    };\n    ColumnMenu.prototype.columnMenuHandlerClick = function (e) {\n        if (e.target.classList.contains('e-columnmenu')) {\n            this.columnMenu.items = this.getItems();\n            this.columnMenu.dataBind();\n            if ((this.isOpen && this.headerCell !== this.getHeaderCell(e)) || document.querySelector('.e-grid-menu .e-menu-parent.e-ul')) {\n                this.columnMenu.close();\n                this.openColumnMenu(e);\n            }\n            else if (!this.isOpen) {\n                this.openColumnMenu(e);\n            }\n            else {\n                this.columnMenu.close();\n            }\n        }\n    };\n    /**\n     * @param {string} field - specifies the field name\n     * @returns {void}\n     * @hidden\n     */\n    ColumnMenu.prototype.openColumnMenuByField = function (field) {\n        this.openColumnMenu({ target: this.parent.getColumnHeaderByField(field).querySelector('.e-columnmenu') });\n    };\n    ColumnMenu.prototype.afterFilterColumnMenuClose = function () {\n        if (this.columnMenu) {\n            this.columnMenu.items = this.getItems();\n            this.columnMenu.dataBind();\n            this.columnMenu.close();\n        }\n    };\n    ColumnMenu.prototype.openColumnMenu = function (e) {\n        var pos = { top: 0, left: 0 };\n        this.element.style.cssText = 'display:block;visibility:hidden';\n        var elePos = this.element.getBoundingClientRect();\n        var gClient = this.parent.element.getBoundingClientRect();\n        this.element.style.cssText = 'display:none;visibility:visible';\n        this.headerCell = this.getHeaderCell(e);\n        if (Browser.isDevice) {\n            pos.top = ((window.innerHeight / 2) - (elePos.height / 2));\n            pos.left = ((window.innerWidth / 2) - (elePos.width / 2));\n        }\n        else {\n            if (this.parent.enableRtl) {\n                pos = calculatePosition(this.headerCell, 'left', 'bottom');\n            }\n            else {\n                pos = calculatePosition(this.headerCell, 'right', 'bottom');\n                pos.left -= elePos.width;\n                if ((pos.left + elePos.width + 1) >= gClient.right) {\n                    pos.left -= 35;\n                }\n            }\n        }\n        this.columnMenu.open(pos.top, pos.left);\n        if (e.preventDefault) {\n            e.preventDefault();\n        }\n        applyBiggerTheme(this.parent.element, this.columnMenu.element.parentElement);\n    };\n    ColumnMenu.prototype.columnMenuHandlerDown = function () {\n        this.isOpen = !(this.element.style.display === 'none' || this.element.style.display === '');\n    };\n    ColumnMenu.prototype.getColumnMenuHandlers = function () {\n        return [].slice.call(this.parent.getHeaderTable().getElementsByClassName(this.ROOT));\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    ColumnMenu.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.headerRefreshed, this.wireEvents, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRenderMenu, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        if (this.isFilterItemAdded()) {\n            this.parent.on(events.filterDialogCreated, this.filterPosition, this);\n        }\n        this.parent.on(events.click, this.columnMenuHandlerClick, this);\n        this.parent.on(events.afterFilterColumnMenuClose, this.afterFilterColumnMenuClose, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n        this.parent.on(events.destroy, this.destroy, this);\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    ColumnMenu.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.headerRefreshed, this.unwireEvents);\n        this.parent.off(events.uiUpdate, this.enableAfterRenderMenu);\n        this.parent.off(events.initialEnd, this.render);\n        if (this.isFilterItemAdded()) {\n            this.parent.off(events.filterDialogCreated, this.filterPosition);\n        }\n        this.parent.off(events.click, this.columnMenuHandlerClick);\n        this.parent.on(events.afterFilterColumnMenuClose, this.afterFilterColumnMenuClose);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n        this.parent.off(events.destroy, this.destroy);\n    };\n    ColumnMenu.prototype.keyPressHandler = function (e) {\n        var gObj = this.parent;\n        if (e.action === 'altDownArrow') {\n            var element = gObj.focusModule.currentInfo.element;\n            if (element && element.classList.contains('e-headercell')) {\n                var column = gObj.getColumnByUid(element.firstElementChild.getAttribute('e-mappinguid'));\n                this.openColumnMenuByField(column.field);\n            }\n        }\n    };\n    ColumnMenu.prototype.enableAfterRenderMenu = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            if (this.columnMenu) {\n                this.columnMenu.destroy();\n                remove(this.element);\n            }\n            this.render();\n        }\n    };\n    ColumnMenu.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        this.element = this.parent.createElement('ul', { id: this.gridID + '_columnmenu', className: 'e-colmenu' });\n        this.element.setAttribute('aria-label', this.l10n.getConstant('ColumnMenuDialogARIA'));\n        this.parent.element.appendChild(this.element);\n        this.columnMenu = new Menu({\n            cssClass: 'e-grid-menu',\n            enableRtl: this.parent.enableRtl,\n            enablePersistence: this.parent.enablePersistence,\n            locale: this.parent.locale,\n            items: this.getItems(),\n            select: this.columnMenuItemClick.bind(this),\n            beforeOpen: this.columnMenuBeforeOpen.bind(this),\n            onOpen: this.columnMenuOnOpen.bind(this),\n            onClose: this.columnMenuOnClose.bind(this),\n            beforeItemRender: this.beforeMenuItemRender.bind(this),\n            beforeClose: this.columnMenuBeforeClose.bind(this)\n        });\n        this.columnMenu.appendTo(this.element);\n        this.wireFilterEvents();\n    };\n    ColumnMenu.prototype.wireFilterEvents = function () {\n        if (!Browser.isDevice && this.isFilterItemAdded()) {\n            EventHandler.add(this.element, 'mouseover', this.appendFilter, this);\n        }\n    };\n    ColumnMenu.prototype.unwireFilterEvents = function () {\n        if (!Browser.isDevice && this.isFilterItemAdded()) {\n            EventHandler.remove(this.element, 'mouseover', this.appendFilter);\n        }\n    };\n    ColumnMenu.prototype.beforeMenuItemRender = function (args) {\n        if (this.isChooserItem(args.item)) {\n            var field_1 = this.getKeyFromId(args.item.id, this.CHOOSER);\n            var column = this.parent.columnModel.filter(function (col) { return col.field === field_1; });\n            var check = createCheckBox(this.parent.createElement, false, {\n                label: args.item.text,\n                checked: column[0].visible\n            });\n            if (this.parent.enableRtl) {\n                check.classList.add('e-rtl');\n            }\n            args.element.innerHTML = '';\n            args.element.appendChild(check);\n        }\n        else if (args.item.id && this.getKeyFromId(args.item.id) === 'Filter') {\n            args.element.appendChild(this.parent.createElement('span', { className: 'e-icons e-caret' }));\n            args.element.className += 'e-filter-item e-menu-caret-icon';\n        }\n    };\n    ColumnMenu.prototype.columnMenuBeforeClose = function (args) {\n        var colChooser = args.event ? closest(args.event.target, '.e-menu-item') : null;\n        if (!isNullOrUndefined(args.parentItem) &&\n            this.getKeyFromId(args.parentItem.id) === 'ColumnChooser' &&\n            colChooser && this.isChooserItem(colChooser)) {\n            args.cancel = true;\n        }\n        else if (args.event && (closest(args.event.target, '.' + this.POP)\n            || (args.event.currentTarget && args.event.currentTarget.activeElement &&\n                parentsUntil(args.event.currentTarget.activeElement, 'e-filter-popup'))\n            || parentsUntil(args.event.target, 'e-popup') ||\n            (parentsUntil(args.event.target, 'e-popup-wrapper'))) && !Browser.isDevice) {\n            args.cancel = true;\n        }\n    };\n    ColumnMenu.prototype.isChooserItem = function (item) {\n        return item.id && item.id.indexOf('_colmenu_') >= 0 &&\n            this.getKeyFromId(item.id, this.CHOOSER).indexOf('_colmenu_') === -1;\n    };\n    ColumnMenu.prototype.columnMenuBeforeOpen = function (args) {\n        args.column = this.targetColumn = this.getColumn();\n        this.parent.trigger(events.columnMenuOpen, args);\n        for (var _i = 0, _a = args.items; _i < _a.length; _i++) {\n            var item = _a[_i];\n            var key = this.getKeyFromId(item.id);\n            var dItem = this.defaultItems[key];\n            if (this.getDefaultItems().indexOf(key) !== -1 && this.ensureDisabledStatus(key) && !dItem.hide) {\n                this.disableItems.push(item.text);\n            }\n            if (item.hide) {\n                this.hiddenItems.push(item.text);\n            }\n        }\n        this.columnMenu.enableItems(this.disableItems, false);\n        this.columnMenu.hideItems(this.hiddenItems);\n    };\n    ColumnMenu.prototype.columnMenuOnOpen = function (args) {\n        if (args.element.className === 'e-menu-parent e-ul ') {\n            if (args.element.offsetHeight > window.innerHeight || this.parent.element.offsetHeight > window.innerHeight) {\n                args.element.style.maxHeight = (window.innerHeight) * 0.8 + 'px';\n                args.element.style.overflowY = 'auto';\n            }\n        }\n    };\n    ColumnMenu.prototype.ensureDisabledStatus = function (item) {\n        var status = false;\n        switch (item) {\n            case 'Group':\n                if (!this.parent.allowGrouping || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                    && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) >= 0 ||\n                    this.targetColumn && !this.targetColumn.allowGrouping)) {\n                    status = true;\n                }\n                break;\n            case 'AutoFitAll':\n            case 'AutoFit':\n                status = !this.parent.ensureModuleInjected(Resize);\n                break;\n            case 'Ungroup':\n                if (!this.parent.ensureModuleInjected(Group) || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                    && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) < 0)) {\n                    status = true;\n                }\n                break;\n            case 'SortDescending':\n            case 'SortAscending':\n                if (this.parent.allowSorting && this.parent.ensureModuleInjected(Sort)\n                    && this.parent.sortSettings.columns.length > 0 && this.targetColumn && this.targetColumn.allowSorting) {\n                    var sortColumns = this.parent.sortSettings.columns;\n                    for (var i = 0; i < sortColumns.length; i++) {\n                        if (sortColumns[i].field === this.targetColumn.field\n                            && sortColumns[i].direction.toLocaleLowerCase() === item.toLocaleLowerCase().replace('sort', '')) {\n                            status = true;\n                        }\n                    }\n                }\n                else if (!this.parent.allowSorting || !this.parent.ensureModuleInjected(Sort) ||\n                    this.parent.allowSorting && this.targetColumn && !this.targetColumn.allowSorting) {\n                    status = true;\n                }\n                break;\n            case 'Filter':\n                if (this.parent.allowFiltering && (this.parent.filterSettings.type !== 'FilterBar')\n                    && this.parent.ensureModuleInjected(Filter) && this.targetColumn && this.targetColumn.allowFiltering) {\n                    status = false;\n                }\n                else if (this.parent.ensureModuleInjected(Filter) && this.parent.allowFiltering\n                    && this.targetColumn && (!this.targetColumn.allowFiltering || this.parent.filterSettings.type === 'FilterBar')) {\n                    status = true;\n                }\n        }\n        return status;\n    };\n    ColumnMenu.prototype.columnMenuItemClick = function (args) {\n        var item = this.isChooserItem(args.item) ? 'ColumnChooser' : this.getKeyFromId(args.item.id);\n        switch (item) {\n            case 'AutoFit':\n                this.parent.autoFitColumns(this.targetColumn.field);\n                break;\n            case 'AutoFitAll':\n                this.parent.autoFitColumns([]);\n                break;\n            case 'Ungroup':\n                this.parent.ungroupColumn(this.targetColumn.field);\n                break;\n            case 'Group':\n                this.parent.groupColumn(this.targetColumn.field);\n                break;\n            case 'SortAscending':\n                this.parent.sortColumn(this.targetColumn.field, 'Ascending');\n                break;\n            case 'SortDescending':\n                this.parent.sortColumn(this.targetColumn.field, 'Descending');\n                break;\n            case 'ColumnChooser':\n                // eslint-disable-next-line no-case-declarations\n                var key = this.getKeyFromId(args.item.id, this.CHOOSER);\n                // eslint-disable-next-line no-case-declarations\n                var checkbox = args.element.querySelector('.e-checkbox-wrapper .e-frame');\n                if (checkbox && checkbox.classList.contains('e-check')) {\n                    checkbox.classList.remove('e-check');\n                    this.parent.hideColumns(key, 'field');\n                }\n                else if (checkbox) {\n                    this.parent.showColumns(key, 'field');\n                    checkbox.classList.add('e-check');\n                }\n                break;\n            case 'Filter':\n                this.getFilter(args.element, args.item.id);\n                break;\n        }\n        args.column = this.targetColumn;\n        this.parent.trigger(events.columnMenuClick, args);\n    };\n    ColumnMenu.prototype.columnMenuOnClose = function (args) {\n        var parent = 'parentObj';\n        if (args.items.length > 0 && args.items[0][parent] instanceof Menu) {\n            this.columnMenu.enableItems(this.disableItems, false);\n            this.disableItems = [];\n            this.columnMenu.showItems(this.hiddenItems);\n            this.hiddenItems = [];\n            if (this.isFilterPopupOpen()) {\n                this.getFilter(args.element, args.element.id, true);\n            }\n        }\n        if (!this.parent.isFrozenGrid()) {\n            this.parent.notify(events.restoreFocus, {});\n        }\n    };\n    ColumnMenu.prototype.getDefaultItems = function () {\n        return ['AutoFitAll', 'AutoFit', 'SortAscending', 'SortDescending', 'Group', 'Ungroup', 'ColumnChooser', 'Filter'];\n    };\n    ColumnMenu.prototype.getItems = function () {\n        var items = [];\n        var defultItems = this.parent.columnMenuItems ? this.parent.columnMenuItems : this.getDefault();\n        for (var _i = 0, defultItems_1 = defultItems; _i < defultItems_1.length; _i++) {\n            var item = defultItems_1[_i];\n            if (typeof item === 'string') {\n                if (item === 'ColumnChooser') {\n                    var col = this.getDefaultItem(item);\n                    col.items = this.createChooserItems();\n                    items.push(col);\n                }\n                else {\n                    items.push(this.getDefaultItem(item));\n                }\n            }\n            else {\n                items.push(item);\n            }\n        }\n        return items;\n    };\n    ColumnMenu.prototype.getDefaultItem = function (item) {\n        var menuItem = {};\n        switch (item) {\n            case 'SortAscending':\n                menuItem = { iconCss: this.ASCENDING };\n                break;\n            case 'SortDescending':\n                menuItem = { iconCss: this.DESCENDING };\n                break;\n            case 'Group':\n                menuItem = { iconCss: this.GROUP };\n                break;\n            case 'Ungroup':\n                menuItem = { iconCss: this.UNGROUP };\n                break;\n            case 'Filter':\n                menuItem = { iconCss: this.FILTER };\n                break;\n        }\n        this.defaultItems[item] = {\n            text: this.getLocaleText(item), id: this.generateID(item),\n            iconCss: menuItem.iconCss ? 'e-icons ' + menuItem.iconCss : null\n        };\n        return this.defaultItems[item];\n    };\n    ColumnMenu.prototype.getLocaleText = function (item) {\n        return this.l10n.getConstant(this.localeText[item]);\n    };\n    ColumnMenu.prototype.generateID = function (item, append) {\n        return this.gridID + '_colmenu_' + (append ? append + item : item);\n    };\n    ColumnMenu.prototype.getKeyFromId = function (id, append) {\n        return id.indexOf('_colmenu_') > 0 &&\n            id.replace(this.gridID + '_colmenu_' + (append ? append : ''), '');\n    };\n    /**\n     * @returns {HTMLElement} returns the HTMLElement\n     * @hidden\n     */\n    ColumnMenu.prototype.getColumnMenu = function () {\n        return this.element;\n    };\n    ColumnMenu.prototype.getModuleName = function () {\n        return 'columnMenu';\n    };\n    ColumnMenu.prototype.setLocaleKey = function () {\n        var localeKeys = {\n            'AutoFitAll': 'autoFitAll',\n            'AutoFit': 'autoFit',\n            'Group': 'Group',\n            'Ungroup': 'Ungroup',\n            'SortAscending': 'SortAscending',\n            'SortDescending': 'SortDescending',\n            'ColumnChooser': 'Columnchooser',\n            'Filter': 'FilterMenu'\n        };\n        return localeKeys;\n    };\n    ColumnMenu.prototype.getHeaderCell = function (e) {\n        return closest(e.target, 'th.e-headercell');\n    };\n    ColumnMenu.prototype.getColumn = function () {\n        if (this.headerCell) {\n            var uid = this.headerCell.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n            return this.parent.getColumnByUid(uid);\n        }\n        return null;\n    };\n    ColumnMenu.prototype.createChooserItems = function () {\n        var items = [];\n        for (var _i = 0, _a = this.parent.columnModel; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.showInColumnChooser && col.field) {\n                items.push({ id: this.generateID(col.field, this.CHOOSER), text: col.headerText ? col.headerText : col.field });\n            }\n        }\n        return items;\n    };\n    ColumnMenu.prototype.appendFilter = function (e) {\n        var filter = 'Filter';\n        if (!this.defaultItems[filter]) {\n            return;\n        }\n        else {\n            var key = this.defaultItems[filter].id;\n            if (closest(e.target, '#' + key) && !this.isFilterPopupOpen()) {\n                this.getFilter(e.target, key);\n            }\n            else if (!closest(e.target, '#' + key) && this.isFilterPopupOpen()) {\n                this.getFilter(e.target, key, true);\n            }\n        }\n    };\n    ColumnMenu.prototype.getFilter = function (target, id, isClose) {\n        var filterPopup = this.getFilterPop();\n        if (filterPopup) {\n            filterPopup.style.display = !Browser.isDevice && isClose ? 'none' : 'block';\n        }\n        else {\n            this.parent.notify(events.filterOpen, {\n                col: this.targetColumn, target: target, isClose: isClose, id: id\n            });\n        }\n    };\n    ColumnMenu.prototype.setPosition = function (li, ul) {\n        var gridPos = this.parent.element.getBoundingClientRect();\n        var liPos = li.getBoundingClientRect();\n        var left = liPos.left - gridPos.left;\n        var top = liPos.top - gridPos.top;\n        if (gridPos.height < top) {\n            top = top - ul.offsetHeight + liPos.height;\n        }\n        else if (gridPos.height < top + ul.offsetHeight) {\n            top = gridPos.height - ul.offsetHeight;\n        }\n        if (window.innerHeight < ul.offsetHeight + top + gridPos.top) {\n            top = window.innerHeight - ul.offsetHeight - gridPos.top;\n        }\n        if (top + gridPos.top < 0) {\n            top = 0;\n        }\n        left += (this.parent.enableRtl ? -ul.offsetWidth : liPos.width);\n        if (gridPos.width <= left + ul.offsetWidth) {\n            left -= liPos.width + ul.offsetWidth;\n            if (liPos.left < ul.offsetWidth) {\n                left = liPos.left + ul.offsetWidth / 2;\n            }\n        }\n        else if (left < 0) {\n            left += ul.offsetWidth + liPos.width;\n        }\n        ul.style.top = top + 'px';\n        ul.style.left = left + 'px';\n    };\n    ColumnMenu.prototype.filterPosition = function () {\n        var filterPopup = this.getFilterPop();\n        filterPopup.classList.add(this.WRAP);\n        if (!Browser.isDevice) {\n            var disp = filterPopup.style.display;\n            filterPopup.style.cssText += 'display:block;visibility:hidden';\n            var li = this.element.querySelector('.' + this.FILTER);\n            if (li) {\n                this.setPosition(li.parentElement, filterPopup);\n                filterPopup.style.cssText += 'display:' + disp + ';visibility:visible';\n            }\n        }\n    };\n    ColumnMenu.prototype.getDefault = function () {\n        var items = [];\n        if (this.parent.ensureModuleInjected(Resize)) {\n            items.push('AutoFitAll');\n            items.push('AutoFit');\n        }\n        if (this.parent.allowGrouping && this.parent.ensureModuleInjected(Group)) {\n            items.push('Group');\n            items.push('Ungroup');\n        }\n        if (this.parent.allowSorting && this.parent.ensureModuleInjected(Sort)) {\n            items.push('SortAscending');\n            items.push('SortDescending');\n        }\n        items.push('ColumnChooser');\n        if (this.parent.allowFiltering && (this.parent.filterSettings.type !== 'FilterBar') &&\n            this.parent.ensureModuleInjected(Filter)) {\n            items.push('Filter');\n        }\n        return items;\n    };\n    ColumnMenu.prototype.isFilterPopupOpen = function () {\n        var filterPopup = this.getFilterPop();\n        return filterPopup && filterPopup.style.display !== 'none';\n    };\n    ColumnMenu.prototype.getFilterPop = function () {\n        if (Browser.isDevice && this.targetColumn !== null && this.parent.filterSettings.type === 'Menu') {\n            return document.getElementById(this.targetColumn.uid + '-flmdlg');\n        }\n        return this.parent.element.querySelector('.' + this.POP);\n    };\n    ColumnMenu.prototype.isFilterItemAdded = function () {\n        return (this.parent.columnMenuItems &&\n            this.parent.columnMenuItems.indexOf('Filter') >= 0) || !this.parent.columnMenuItems;\n    };\n    return ColumnMenu;\n}());\nexport { ColumnMenu };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}