{"ast":null,"code":"import { remove, extend, getValue } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, addClass } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { uiUpdate, initialEnd, dataReady, modelChanged, refreshAggregates, refreshFooterRenderer, groupAggregates, destroy } from '../base/constant';\nimport { FooterRenderer } from '../renderer/footer-renderer';\nimport { SummaryCellRenderer } from '../renderer/summary-cell-renderer';\nimport { GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport * as literals from '../base/string-literals';\n/**\n * Summary Action controller.\n */\n\nvar Aggregate =\n/** @class */\nfunction () {\n  function Aggregate(parent, locator) {\n    this.parent = parent;\n    this.locator = locator;\n    this.addEventListener();\n  }\n\n  Aggregate.prototype.getModuleName = function () {\n    return 'aggregate';\n  };\n\n  Aggregate.prototype.initiateRender = function () {\n    var _this = this;\n\n    var cellFac = this.locator.getService('cellRendererFactory');\n    var instance = new SummaryCellRenderer(this.parent, this.locator);\n    var type = [CellType.Summary, CellType.CaptionSummary, CellType.GroupSummary];\n\n    for (var i = 0; i < type.length; i++) {\n      cellFac.addCellRenderer(type[i], instance);\n    }\n\n    this.footerRenderer = new FooterRenderer(this.parent, this.locator);\n    this.footerRenderer.renderPanel();\n    this.footerRenderer.renderTable();\n    var footerContent = this.footerRenderer.getPanel();\n\n    if (this.parent.element.scrollHeight >= this.parent.getHeight(this.parent.height) && footerContent) {\n      addClass([footerContent], ['e-footerpadding']);\n    }\n\n    this.locator.register('footerRenderer', this.footerRenderer);\n\n    var fn = function () {\n      _this.prepareSummaryInfo();\n\n      _this.parent.off(dataReady, fn);\n    };\n\n    this.parent.on(dataReady, fn, this);\n    this.parent.on(dataReady, this.footerRenderer.refresh, this.footerRenderer);\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n\n\n  Aggregate.prototype.prepareSummaryInfo = function () {\n    var _this = this;\n\n    summaryIterator(this.parent.aggregates, function (column) {\n      var cFormat = getValue('customFormat', column);\n\n      if (!isNullOrUndefined(cFormat)) {\n        column.setPropertiesSilent({\n          format: cFormat\n        });\n      }\n\n      if (typeof column.format === 'object') {\n        var valueFormatter = new ValueFormatter();\n        column.setFormatter(valueFormatter.getFormatFunction(extend({}, column.format)));\n      } else if (typeof column.format === 'string') {\n        var fmtr = _this.locator.getService('valueFormatter');\n\n        column.setFormatter(fmtr.getFormatFunction({\n          format: column.format\n        }));\n      }\n\n      column.setPropertiesSilent({\n        columnName: column.columnName || column.field\n      });\n    });\n  };\n\n  Aggregate.prototype.onPropertyChanged = function (e) {\n    if (e.module !== this.getModuleName()) {\n      return;\n    }\n\n    if (isNullOrUndefined(this.footerRenderer)) {\n      this.initiateRender();\n    }\n\n    this.prepareSummaryInfo();\n    this.footerRenderer.refresh();\n    var cModel = new CaptionSummaryModelGenerator(this.parent);\n    var gModel = new GroupSummaryModelGenerator(this.parent);\n\n    if (gModel.getData().length !== 0 || !cModel.isEmpty()) {\n      this.parent.notify(modelChanged, {});\n    }\n  };\n\n  Aggregate.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.on(initialEnd, this.initiateRender, this);\n    this.parent.on(uiUpdate, this.onPropertyChanged, this);\n    this.parent.on(refreshAggregates, this.refresh, this);\n    this.parent.on(destroy, this.destroy, this);\n  };\n\n  Aggregate.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.footerRenderer.removeEventListener();\n    this.parent.off(initialEnd, this.initiateRender);\n    this.parent.off(dataReady, this.footerRenderer.refresh);\n    this.parent.off(uiUpdate, this.onPropertyChanged);\n    this.parent.off(refreshAggregates, this.refresh);\n    this.parent.off(destroy, this.destroy);\n    remove(this.parent.element.querySelector('.' + literals.gridFooter));\n  };\n\n  Aggregate.prototype.destroy = function () {\n    this.removeEventListener();\n  };\n\n  Aggregate.prototype.refresh = function (data) {\n    var editedData = data instanceof Array ? data : [data];\n    this.parent.notify(refreshFooterRenderer, editedData);\n\n    if (this.parent.groupSettings.columns.length > 0) {\n      this.parent.notify(groupAggregates, editedData);\n    }\n  };\n\n  return Aggregate;\n}();\n\nexport { Aggregate };\n/**\n * @param {AggregateRowModel[]} aggregates - specifies the AggregateRowModel\n * @param {Function} callback - specifies the Function\n * @returns {void}\n * @private\n */\n\nexport function summaryIterator(aggregates, callback) {\n  for (var i = 0; i < aggregates.length; i++) {\n    for (var j = 0; j < aggregates[i].columns.length; j++) {\n      callback(aggregates[i].columns[j], aggregates[i]);\n    }\n  }\n}","map":{"version":3,"names":["remove","extend","getValue","isNullOrUndefined","addClass","CellType","ValueFormatter","uiUpdate","initialEnd","dataReady","modelChanged","refreshAggregates","refreshFooterRenderer","groupAggregates","destroy","FooterRenderer","SummaryCellRenderer","GroupSummaryModelGenerator","CaptionSummaryModelGenerator","literals","Aggregate","parent","locator","addEventListener","prototype","getModuleName","initiateRender","_this","cellFac","getService","instance","type","Summary","CaptionSummary","GroupSummary","i","length","addCellRenderer","footerRenderer","renderPanel","renderTable","footerContent","getPanel","element","scrollHeight","getHeight","height","register","fn","prepareSummaryInfo","off","on","refresh","summaryIterator","aggregates","column","cFormat","setPropertiesSilent","format","valueFormatter","setFormatter","getFormatFunction","fmtr","columnName","field","onPropertyChanged","e","module","cModel","gModel","getData","isEmpty","notify","isDestroyed","removeEventListener","querySelector","gridFooter","data","editedData","Array","groupSettings","columns","callback","j"],"sources":["C:/Users/shahj/OneDrive/Documents/GitHub/Multifunctional-React-Dashboard/node_modules/@syncfusion/ej2-grids/src/grid/actions/aggregate.js"],"sourcesContent":["import { remove, extend, getValue } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, addClass } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { uiUpdate, initialEnd, dataReady, modelChanged, refreshAggregates, refreshFooterRenderer, groupAggregates, destroy } from '../base/constant';\nimport { FooterRenderer } from '../renderer/footer-renderer';\nimport { SummaryCellRenderer } from '../renderer/summary-cell-renderer';\nimport { GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport * as literals from '../base/string-literals';\n/**\n * Summary Action controller.\n */\nvar Aggregate = /** @class */ (function () {\n    function Aggregate(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.addEventListener();\n    }\n    Aggregate.prototype.getModuleName = function () {\n        return 'aggregate';\n    };\n    Aggregate.prototype.initiateRender = function () {\n        var _this = this;\n        var cellFac = this.locator.getService('cellRendererFactory');\n        var instance = new SummaryCellRenderer(this.parent, this.locator);\n        var type = [CellType.Summary, CellType.CaptionSummary, CellType.GroupSummary];\n        for (var i = 0; i < type.length; i++) {\n            cellFac.addCellRenderer(type[i], instance);\n        }\n        this.footerRenderer = new FooterRenderer(this.parent, this.locator);\n        this.footerRenderer.renderPanel();\n        this.footerRenderer.renderTable();\n        var footerContent = this.footerRenderer.getPanel();\n        if (this.parent.element.scrollHeight >= this.parent.getHeight(this.parent.height)\n            && footerContent) {\n            addClass([footerContent], ['e-footerpadding']);\n        }\n        this.locator.register('footerRenderer', this.footerRenderer);\n        var fn = function () {\n            _this.prepareSummaryInfo();\n            _this.parent.off(dataReady, fn);\n        };\n        this.parent.on(dataReady, fn, this);\n        this.parent.on(dataReady, this.footerRenderer.refresh, this.footerRenderer);\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Aggregate.prototype.prepareSummaryInfo = function () {\n        var _this = this;\n        summaryIterator(this.parent.aggregates, function (column) {\n            var cFormat = getValue('customFormat', column);\n            if (!isNullOrUndefined(cFormat)) {\n                column.setPropertiesSilent({ format: cFormat });\n            }\n            if (typeof (column.format) === 'object') {\n                var valueFormatter = new ValueFormatter();\n                column.setFormatter(valueFormatter.getFormatFunction(extend({}, column.format)));\n            }\n            else if (typeof (column.format) === 'string') {\n                var fmtr = _this.locator.getService('valueFormatter');\n                column.setFormatter(fmtr.getFormatFunction({ format: column.format }));\n            }\n            column.setPropertiesSilent({ columnName: column.columnName || column.field });\n        });\n    };\n    Aggregate.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        if (isNullOrUndefined(this.footerRenderer)) {\n            this.initiateRender();\n        }\n        this.prepareSummaryInfo();\n        this.footerRenderer.refresh();\n        var cModel = new CaptionSummaryModelGenerator(this.parent);\n        var gModel = new GroupSummaryModelGenerator(this.parent);\n        if (gModel.getData().length !== 0 || !cModel.isEmpty()) {\n            this.parent.notify(modelChanged, {});\n        }\n    };\n    Aggregate.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(initialEnd, this.initiateRender, this);\n        this.parent.on(uiUpdate, this.onPropertyChanged, this);\n        this.parent.on(refreshAggregates, this.refresh, this);\n        this.parent.on(destroy, this.destroy, this);\n    };\n    Aggregate.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.footerRenderer.removeEventListener();\n        this.parent.off(initialEnd, this.initiateRender);\n        this.parent.off(dataReady, this.footerRenderer.refresh);\n        this.parent.off(uiUpdate, this.onPropertyChanged);\n        this.parent.off(refreshAggregates, this.refresh);\n        this.parent.off(destroy, this.destroy);\n        remove(this.parent.element.querySelector('.' + literals.gridFooter));\n    };\n    Aggregate.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    Aggregate.prototype.refresh = function (data) {\n        var editedData = data instanceof Array ? data : [data];\n        this.parent.notify(refreshFooterRenderer, editedData);\n        if (this.parent.groupSettings.columns.length > 0) {\n            this.parent.notify(groupAggregates, editedData);\n        }\n    };\n    return Aggregate;\n}());\nexport { Aggregate };\n/**\n * @param {AggregateRowModel[]} aggregates - specifies the AggregateRowModel\n * @param {Function} callback - specifies the Function\n * @returns {void}\n * @private\n */\nexport function summaryIterator(aggregates, callback) {\n    for (var i = 0; i < aggregates.length; i++) {\n        for (var j = 0; j < aggregates[i].columns.length; j++) {\n            callback(aggregates[i].columns[j], aggregates[i]);\n        }\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}