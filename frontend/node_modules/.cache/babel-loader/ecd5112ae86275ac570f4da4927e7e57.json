{"ast":null,"code":"import { extend, isNullOrUndefined, Browser } from '@syncfusion/ej2-base';\nimport * as CONSTANT from '../base/constant';\nimport { updateUndoRedoStatus, isIDevice } from '../base/util';\nimport { KEY_DOWN, KEY_UP } from './../../common/constant';\n/**\n * Formatter\n *\n * @hidden\n\n */\n\nvar Formatter =\n/** @class */\nfunction () {\n  function Formatter() {}\n  /**\n   * To execute the command\n   *\n   * @param  {IRichTextEditor} self - specifies the self element.\n   * @param  {ActionBeginEventArgs} args - specifies the event arguments.\n   * @param  {MouseEvent|KeyboardEvent} event - specifies the keyboard event.\n   * @param  {IItemCollectionArgs} value - specifies the collection arguments\n   * @returns {void}\n   * @hidden\n    */\n\n\n  Formatter.prototype.process = function (self, args, event, value) {\n    var _this = this;\n\n    var selection = self.contentModule.getDocument().getSelection();\n    var range = selection.rangeCount > 0 ? selection.getRangeAt(selection.rangeCount - 1) : null;\n    var saveSelection;\n\n    if (self.editorMode === 'HTML') {\n      saveSelection = this.editorManager.nodeSelection.save(range, self.contentModule.getDocument());\n    }\n\n    if (!isNullOrUndefined(args) && args.item.command && args.item.command !== 'Table' && args.item.command !== 'Actions' && args.item.command !== 'Links' && args.item.command !== 'Images' && args.item.command !== 'Files' && range && !(self.contentModule.getEditPanel().contains(this.getAncestorNode(range.commonAncestorContainer)) || self.contentModule.getEditPanel() === range.commonAncestorContainer || self.contentModule.getPanel() === range.commonAncestorContainer)) {\n      return;\n    }\n\n    if (isNullOrUndefined(args)) {\n      var action_1 = event.action;\n\n      if (action_1 !== 'tab' && action_1 !== 'enter' && action_1 !== 'space' && action_1 !== 'escape') {\n        args = {};\n\n        if (self.editorMode === 'Markdown' && action_1 === 'insert-table') {\n          value = {\n            'headingText': self.localeObj.getConstant('TableHeadingText'),\n            'colText': self.localeObj.getConstant('TableColText')\n          };\n        }\n\n        var items = {\n          originalEvent: event,\n          cancel: false,\n          requestType: action_1 || event.key + 'Key',\n          itemCollection: value\n        };\n        extend(args, args, items, true);\n        self.trigger(CONSTANT.actionBegin, args, function (actionBeginArgs) {\n          if (actionBeginArgs.cancel) {\n            if (action_1 === 'paste' || action_1 === 'cut' || action_1 === 'copy') {\n              event.preventDefault();\n            }\n          }\n        });\n      }\n\n      var isTableModule = isNullOrUndefined(self.tableModule) ? true : self.tableModule ? self.tableModule.ensureInsideTableList : false;\n\n      if (event.which === 9 && isTableModule || event.which !== 9) {\n        if (event.which === 13 && self.editorMode === 'HTML') {\n          value = {\n            'enterAction': self.enterKey\n          };\n        }\n\n        this.editorManager.observer.notify(event.type === 'keydown' ? KEY_DOWN : KEY_UP, {\n          event: event,\n          callBack: this.onSuccess.bind(this, self),\n          value: value,\n          enterAction: self.enterKey\n        });\n      }\n    } else if (!isNullOrUndefined(args) && args.item.command && args.item.subCommand && (args.item.command !== args.item.subCommand && args.item.command !== 'Font' || (args.item.subCommand === 'FontName' || args.item.subCommand === 'FontSize') && args.name === 'dropDownSelect' || (args.item.subCommand === 'BackgroundColor' || args.item.subCommand === 'FontColor') && args.name === 'colorPickerChanged')) {\n      extend(args, args, {\n        requestType: args.item.subCommand,\n        cancel: false,\n        itemCollection: value,\n        selectType: args.name\n      }, true);\n      self.trigger(CONSTANT.actionBegin, args, function (actionBeginArgs) {\n        if (!actionBeginArgs.cancel) {\n          if (_this.getUndoRedoStack().length === 0 && actionBeginArgs.item.command !== 'Links' && actionBeginArgs.item.command !== 'Images') {\n            _this.saveData();\n          }\n\n          self.isBlur = false;\n          self.contentModule.getEditPanel().focus();\n\n          if (self.editorMode === 'HTML') {\n            saveSelection.restore();\n          }\n\n          var command = actionBeginArgs.item.subCommand.toLocaleLowerCase();\n\n          if (command === 'paste' || command === 'cut' || command === 'copy') {\n            self.clipboardAction(command, event);\n          } else {\n            _this.editorManager.observer.notify(CONSTANT.checkUndo, {\n              subCommand: actionBeginArgs.item.subCommand\n            });\n\n            _this.editorManager.execCommand(actionBeginArgs.item.command, actionBeginArgs.item.subCommand, event, _this.onSuccess.bind(_this, self), actionBeginArgs.item.value, actionBeginArgs.item.subCommand === 'Pre' && actionBeginArgs.selectType === 'dropDownSelect' ? {\n              name: actionBeginArgs.selectType\n            } : value, '#' + self.getID() + ' iframe', self.enterKey);\n          }\n        }\n      });\n    }\n\n    if (isNullOrUndefined(event) || event && event.action !== 'copy') {\n      this.enableUndo(self);\n    }\n  };\n\n  Formatter.prototype.getAncestorNode = function (node) {\n    node = node.nodeType === 3 ? node.parentNode : node;\n    return node;\n  };\n  /**\n   * onKeyHandler method\n   *\n   * @param {IRichTextEditor} self - specifies the self element.\n   * @param {KeyboardEvent} e - specifies the keyboard event.\n   * @returns {void}\n   * @hidden\n    */\n\n\n  Formatter.prototype.onKeyHandler = function (self, e) {\n    var _this = this;\n\n    this.editorManager.observer.notify(KEY_UP, {\n      event: e,\n      callBack: function () {\n        self.notify(CONSTANT.contentChanged, {});\n\n        _this.enableUndo(self);\n      }\n    });\n  };\n  /**\n   * onSuccess method\n   *\n   * @param {IRichTextEditor} self - specifies the self element.\n   * @param {IMarkdownFormatterCallBack} events - specifies the event call back\n   * @returns {void}\n   * @hidden\n    */\n\n\n  Formatter.prototype.onSuccess = function (self, events) {\n    self.notify(CONSTANT.contentChanged, {});\n\n    if (events && (isNullOrUndefined(events.event) || events.event.action !== 'copy')) {\n      this.enableUndo(self);\n      self.notify(CONSTANT.execCommandCallBack, events);\n    }\n\n    self.trigger(CONSTANT.actionComplete, events, function (callbackArgs) {\n      self.setPlaceHolder();\n\n      if (callbackArgs.requestType === 'Images' || callbackArgs.requestType === 'Links' && self.editorMode === 'HTML') {\n        var args = callbackArgs;\n\n        if (callbackArgs.requestType === 'Links' && callbackArgs.event && callbackArgs.event.type === 'keydown' && callbackArgs.event.keyCode === 32) {\n          return;\n        }\n\n        self.notify(CONSTANT.insertCompleted, {\n          args: args.event,\n          type: callbackArgs.requestType,\n          isNotify: true,\n          elements: args.elements\n        });\n      }\n\n      self.autoResize();\n    });\n  };\n  /**\n   * Save the data for undo and redo action.\n   *\n   * @param {KeyboardEvent} e - specifies the keyboard event.\n   * @returns {void}\n   * @hidden\n    */\n\n\n  Formatter.prototype.saveData = function (e) {\n    this.editorManager.undoRedoManager.saveData(e);\n  };\n  /**\n   * getUndoStatus method\n   *\n   * @returns {void}\n   * @hidden\n    */\n\n\n  Formatter.prototype.getUndoStatus = function () {\n    return this.editorManager.undoRedoManager.getUndoStatus();\n  };\n  /* eslint-disable */\n\n  /**\n   * getUndoRedoStack method\n   *\n   * @param {IHtmlUndoRedoData}  - specifies the redo data.\n   * @returns {void}\n   * @hidden\n    */\n\n  /* eslint-enable */\n\n\n  Formatter.prototype.getUndoRedoStack = function () {\n    return this.editorManager.undoRedoManager.undoRedoStack;\n  };\n  /**\n   * enableUndo method\n   *\n   * @param {IRichTextEditor} self - specifies the self element.\n   * @returns {void}\n   * @hidden\n    */\n\n\n  Formatter.prototype.enableUndo = function (self) {\n    var status = this.getUndoStatus();\n\n    if (self.inlineMode.enable && (!Browser.isDevice || isIDevice())) {\n      updateUndoRedoStatus(self.quickToolbarModule.inlineQTBar.quickTBarObj, status);\n    } else {\n      if (self.toolbarModule) {\n        updateUndoRedoStatus(self.toolbarModule.baseToolbar, status);\n      }\n    }\n  };\n\n  return Formatter;\n}();\n\nexport { Formatter };","map":{"version":3,"names":["extend","isNullOrUndefined","Browser","CONSTANT","updateUndoRedoStatus","isIDevice","KEY_DOWN","KEY_UP","Formatter","prototype","process","self","args","event","value","_this","selection","contentModule","getDocument","getSelection","range","rangeCount","getRangeAt","saveSelection","editorMode","editorManager","nodeSelection","save","item","command","getEditPanel","contains","getAncestorNode","commonAncestorContainer","getPanel","action_1","action","localeObj","getConstant","items","originalEvent","cancel","requestType","key","itemCollection","trigger","actionBegin","actionBeginArgs","preventDefault","isTableModule","tableModule","ensureInsideTableList","which","enterKey","observer","notify","type","callBack","onSuccess","bind","enterAction","subCommand","name","selectType","getUndoRedoStack","length","saveData","isBlur","focus","restore","toLocaleLowerCase","clipboardAction","checkUndo","execCommand","getID","enableUndo","node","nodeType","parentNode","onKeyHandler","e","contentChanged","events","execCommandCallBack","actionComplete","callbackArgs","setPlaceHolder","keyCode","insertCompleted","isNotify","elements","autoResize","undoRedoManager","getUndoStatus","undoRedoStack","status","inlineMode","enable","isDevice","quickToolbarModule","inlineQTBar","quickTBarObj","toolbarModule","baseToolbar"],"sources":["C:/Users/shahj/OneDrive/Documents/GitHub/Multifunctional-React-Dashboard/node_modules/@syncfusion/ej2-richtexteditor/src/rich-text-editor/formatter/formatter.js"],"sourcesContent":["import { extend, isNullOrUndefined, Browser } from '@syncfusion/ej2-base';\nimport * as CONSTANT from '../base/constant';\nimport { updateUndoRedoStatus, isIDevice } from '../base/util';\nimport { KEY_DOWN, KEY_UP } from './../../common/constant';\n/**\n * Formatter\n *\n * @hidden\n\n */\nvar Formatter = /** @class */ (function () {\n    function Formatter() {\n    }\n    /**\n     * To execute the command\n     *\n     * @param  {IRichTextEditor} self - specifies the self element.\n     * @param  {ActionBeginEventArgs} args - specifies the event arguments.\n     * @param  {MouseEvent|KeyboardEvent} event - specifies the keyboard event.\n     * @param  {IItemCollectionArgs} value - specifies the collection arguments\n     * @returns {void}\n     * @hidden\n\n     */\n    Formatter.prototype.process = function (self, args, event, value) {\n        var _this = this;\n        var selection = self.contentModule.getDocument().getSelection();\n        var range = (selection.rangeCount > 0) ? selection.getRangeAt(selection.rangeCount - 1) : null;\n        var saveSelection;\n        if (self.editorMode === 'HTML') {\n            saveSelection = this.editorManager.nodeSelection.save(range, self.contentModule.getDocument());\n        }\n        if (!isNullOrUndefined(args)\n            && args.item.command\n            && args.item.command !== 'Table'\n            && args.item.command !== 'Actions'\n            && args.item.command !== 'Links'\n            && args.item.command !== 'Images'\n            && args.item.command !== 'Files'\n            && range\n            && !(self.contentModule.getEditPanel().contains(this.getAncestorNode(range.commonAncestorContainer))\n                || self.contentModule.getEditPanel() === range.commonAncestorContainer\n                || self.contentModule.getPanel() === range.commonAncestorContainer)) {\n            return;\n        }\n        if (isNullOrUndefined(args)) {\n            var action_1 = event.action;\n            if (action_1 !== 'tab' && action_1 !== 'enter' && action_1 !== 'space' && action_1 !== 'escape') {\n                args = {};\n                if (self.editorMode === 'Markdown' && action_1 === 'insert-table') {\n                    value = {\n                        'headingText': self.localeObj.getConstant('TableHeadingText'),\n                        'colText': self.localeObj.getConstant('TableColText')\n                    };\n                }\n                var items = {\n                    originalEvent: event, cancel: false,\n                    requestType: action_1 || (event.key + 'Key'),\n                    itemCollection: value\n                };\n                extend(args, args, items, true);\n                self.trigger(CONSTANT.actionBegin, args, function (actionBeginArgs) {\n                    if (actionBeginArgs.cancel) {\n                        if (action_1 === 'paste' || action_1 === 'cut' || action_1 === 'copy') {\n                            event.preventDefault();\n                        }\n                    }\n                });\n            }\n            var isTableModule = isNullOrUndefined(self.tableModule) ? true : self.tableModule ?\n                self.tableModule.ensureInsideTableList : false;\n            if ((event.which === 9 && isTableModule) || event.which !== 9) {\n                if (event.which === 13 && self.editorMode === 'HTML') {\n                    value = {\n                        'enterAction': self.enterKey\n                    };\n                }\n                this.editorManager.observer.notify((event.type === 'keydown' ? KEY_DOWN : KEY_UP), {\n                    event: event,\n                    callBack: this.onSuccess.bind(this, self),\n                    value: value,\n                    enterAction: self.enterKey\n                });\n            }\n        }\n        else if (!isNullOrUndefined(args) && args.item.command && args.item.subCommand && ((args.item.command !== args.item.subCommand\n            && args.item.command !== 'Font')\n            || ((args.item.subCommand === 'FontName' || args.item.subCommand === 'FontSize') && args.name === 'dropDownSelect')\n            || ((args.item.subCommand === 'BackgroundColor' || args.item.subCommand === 'FontColor')\n                && args.name === 'colorPickerChanged'))) {\n            extend(args, args, { requestType: args.item.subCommand, cancel: false, itemCollection: value, selectType: args.name }, true);\n            self.trigger(CONSTANT.actionBegin, args, function (actionBeginArgs) {\n                if (!actionBeginArgs.cancel) {\n                    if (_this.getUndoRedoStack().length === 0 && actionBeginArgs.item.command !== 'Links'\n                        && actionBeginArgs.item.command !== 'Images') {\n                        _this.saveData();\n                    }\n                    self.isBlur = false;\n                    self.contentModule.getEditPanel().focus();\n                    if (self.editorMode === 'HTML') {\n                        saveSelection.restore();\n                    }\n                    var command = actionBeginArgs.item.subCommand.toLocaleLowerCase();\n                    if (command === 'paste' || command === 'cut' || command === 'copy') {\n                        self.clipboardAction(command, event);\n                    }\n                    else {\n                        _this.editorManager.observer.notify(CONSTANT.checkUndo, { subCommand: actionBeginArgs.item.subCommand });\n                        _this.editorManager.execCommand(actionBeginArgs.item.command, actionBeginArgs.item.subCommand, event, _this.onSuccess.bind(_this, self), actionBeginArgs.item.value, actionBeginArgs.item.subCommand === 'Pre' && actionBeginArgs.selectType === 'dropDownSelect' ?\n                            { name: actionBeginArgs.selectType } : value, ('#' + self.getID() + ' iframe'), self.enterKey);\n                    }\n                }\n            });\n        }\n        if (isNullOrUndefined(event) || event && event.action !== 'copy') {\n            this.enableUndo(self);\n        }\n    };\n    Formatter.prototype.getAncestorNode = function (node) {\n        node = node.nodeType === 3 ? node.parentNode : node;\n        return node;\n    };\n    /**\n     * onKeyHandler method\n     *\n     * @param {IRichTextEditor} self - specifies the self element.\n     * @param {KeyboardEvent} e - specifies the keyboard event.\n     * @returns {void}\n     * @hidden\n\n     */\n    Formatter.prototype.onKeyHandler = function (self, e) {\n        var _this = this;\n        this.editorManager.observer.notify(KEY_UP, {\n            event: e, callBack: function () {\n                self.notify(CONSTANT.contentChanged, {});\n                _this.enableUndo(self);\n            }\n        });\n    };\n    /**\n     * onSuccess method\n     *\n     * @param {IRichTextEditor} self - specifies the self element.\n     * @param {IMarkdownFormatterCallBack} events - specifies the event call back\n     * @returns {void}\n     * @hidden\n\n     */\n    Formatter.prototype.onSuccess = function (self, events) {\n        self.notify(CONSTANT.contentChanged, {});\n        if (events && (isNullOrUndefined(events.event) || events.event.action !== 'copy')) {\n            this.enableUndo(self);\n            self.notify(CONSTANT.execCommandCallBack, events);\n        }\n        self.trigger(CONSTANT.actionComplete, events, function (callbackArgs) {\n            self.setPlaceHolder();\n            if (callbackArgs.requestType === 'Images' || callbackArgs.requestType === 'Links' && self.editorMode === 'HTML') {\n                var args = callbackArgs;\n                if (callbackArgs.requestType === 'Links' && callbackArgs.event &&\n                    callbackArgs.event.type === 'keydown' &&\n                    callbackArgs.event.keyCode === 32) {\n                    return;\n                }\n                self.notify(CONSTANT.insertCompleted, {\n                    args: args.event, type: callbackArgs.requestType, isNotify: true,\n                    elements: args.elements\n                });\n            }\n            self.autoResize();\n        });\n    };\n    /**\n     * Save the data for undo and redo action.\n     *\n     * @param {KeyboardEvent} e - specifies the keyboard event.\n     * @returns {void}\n     * @hidden\n\n     */\n    Formatter.prototype.saveData = function (e) {\n        this.editorManager.undoRedoManager.saveData(e);\n    };\n    /**\n     * getUndoStatus method\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    Formatter.prototype.getUndoStatus = function () {\n        return this.editorManager.undoRedoManager.getUndoStatus();\n    };\n    /* eslint-disable */\n    /**\n     * getUndoRedoStack method\n     *\n     * @param {IHtmlUndoRedoData}  - specifies the redo data.\n     * @returns {void}\n     * @hidden\n\n     */\n    /* eslint-enable */\n    Formatter.prototype.getUndoRedoStack = function () {\n        return this.editorManager.undoRedoManager.undoRedoStack;\n    };\n    /**\n     * enableUndo method\n     *\n     * @param {IRichTextEditor} self - specifies the self element.\n     * @returns {void}\n     * @hidden\n\n     */\n    Formatter.prototype.enableUndo = function (self) {\n        var status = this.getUndoStatus();\n        if (self.inlineMode.enable && (!Browser.isDevice || isIDevice())) {\n            updateUndoRedoStatus(self.quickToolbarModule.inlineQTBar.quickTBarObj, status);\n        }\n        else {\n            if (self.toolbarModule) {\n                updateUndoRedoStatus(self.toolbarModule.baseToolbar, status);\n            }\n        }\n    };\n    return Formatter;\n}());\nexport { Formatter };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}