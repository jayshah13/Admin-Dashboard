{"ast":null,"code":"import { Ajax, createElement, select, extend } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined as isNOU, setValue, getValue } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { createDialog, createExtDialog } from '../pop-up/dialog';\nimport { fileType, setNodeId, getLocaleText, setDateObject, doPasteUpdate, getParentPath, getPathObject } from '../common/utility';\nimport { generatePath } from '../common/utility';\n/**\n * Function to read the content from given path in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} event - specifies the event.\n * @param {string} path - specifies the path.\n * @returns {void}\n * @private\n */\n\nexport function read(parent, event, path) {\n  // eslint-disable-next-line\n  var itemData = parent.itemData;\n\n  for (var i = 0; i < itemData.length; i++) {\n    if (isNOU(getValue('hasChild', itemData[i]))) {\n      setValue('hasChild', false, itemData[i]);\n    }\n  } // eslint-disable-next-line\n\n\n  var data = {\n    action: 'read',\n    path: path,\n    showHiddenItems: parent.showHiddenItems,\n    data: itemData\n  };\n  createAjax(parent, data, readSuccess, event);\n}\n/**\n * Function to create new folder in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} itemName - specifies the item name.\n * @returns {void}\n * @private\n */\n\nexport function createFolder(parent, itemName) {\n  // eslint-disable-next-line\n  var data = {\n    action: 'create',\n    path: parent.path,\n    name: itemName,\n    data: parent.itemData\n  };\n  createAjax(parent, data, createSuccess, itemName);\n}\n/**\n * Function to filter the files in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string}  event - specifies the event.\n * @returns {void}\n * @private\n */\n\nexport function filter(parent, event) {\n  // eslint-disable-next-line\n  var data = {\n    action: 'filter',\n    path: parent.path,\n    showHiddenItems: parent.showHiddenItems,\n    data: [getPathObject(parent)]\n  }; // eslint-disable-next-line\n\n  var filterData; // eslint-disable-next-line\n\n  var filterDataVal = parent.filterData ? extend(filterData, data, parent.filterData) : data;\n  createAjax(parent, filterDataVal, filterSuccess, event, getValue('action', filterDataVal));\n}\n/**\n * Function to rename the folder/file in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} path - specifies the path.\n * @param {string} itemNewName - specifies the item's new name.\n * @returns {void}\n * @private\n */\n\nexport function rename(parent, path, itemNewName) {\n  var name;\n  var newName;\n\n  if (parent.breadcrumbbarModule.searchObj.element.value === '' && !parent.isFiltered) {\n    name = parent.currentItemText;\n    newName = itemNewName;\n  } else {\n    var fPath = parent.filterPath;\n\n    if (parent.hasId) {\n      name = parent.currentItemText;\n      newName = itemNewName;\n    } else {\n      fPath = fPath.replace(/\\\\/g, '/');\n      name = fPath.replace(path, '') + parent.currentItemText;\n      newName = fPath.replace(path, '') + itemNewName;\n    }\n  } // eslint-disable-next-line\n\n\n  var data = {\n    action: 'rename',\n    path: path,\n    name: name,\n    newName: newName,\n    data: parent.itemData\n  };\n  createAjax(parent, data, renameSuccess, path);\n}\n/**\n * Function to paste file's and folder's in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} path - specifies the path.\n * @param {string[]} names - specifies the names.\n * @param {string} targetPath - specifies the target path.\n * @param {string} pasteOperation - specifies the paste operation.\n * @param {string[]} renameItems - specifies the rename items.\n * @param {Object[]} actionRecords - specifies the action records.\n * @returns {void}\n * @private\n */\n\nexport function paste(parent, path, names, targetPath, pasteOperation, // eslint-disable-next-line\nrenameItems, actionRecords) {\n  // eslint-disable-next-line\n  var data = {\n    action: pasteOperation,\n    path: path,\n    targetData: parent.itemData[0],\n    targetPath: targetPath,\n    names: names,\n    renameFiles: renameItems,\n    data: actionRecords\n  };\n  parent.destinationPath = targetPath;\n  createAjax(parent, data, pasteSuccess, path, pasteOperation, targetPath);\n}\n/**\n * Function to delete file's and folder's in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string[]} items - specifies the items.\n * @param {string} path - specifies the path.\n * @param {string} operation - specifies the operation.\n * @returns {void}\n * @private\n */\n\nexport function Delete(parent, items, path, operation) {\n  // eslint-disable-next-line\n  var data = {\n    action: operation,\n    path: path,\n    names: items,\n    data: parent.itemData\n  };\n  createAjax(parent, data, deleteSuccess, path);\n}\n/* istanbul ignore next */\n\n/**\n * Function to get details of file's and folder's in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string[]} names - specifies the names.\n * @param {string} path - specifies the path.\n * @param {string} operation - specifies the operation data.\n * @returns {void}\n * @private\n */\n\nexport function GetDetails(parent, names, path, operation) {\n  // eslint-disable-next-line\n  var data = {\n    action: operation,\n    path: path,\n    names: names,\n    data: parent.itemData\n  };\n  createAjax(parent, data, detailsSuccess, path, operation);\n}\n/**\n * Function for createAjax in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {Object} data - specifies the data.\n * @param {Function} fn - specifies the fn.\n * @param {string} event - specifies the event.\n * @param {string} operation - specifies the operation.\n * @param {string} targetPath - specifies the target path.\n * @returns {void}\n * @private\n */\n\nfunction createAjax( // eslint-disable-next-line\nparent, data, fn, event, operation, targetPath) {\n  // eslint-disable-next-line\n  var ajaxSettings = {\n    url: parent.ajaxSettings.url,\n    type: 'POST',\n    mode: true,\n    dataType: 'json',\n    contentType: 'application/json',\n    data: JSON.stringify(data),\n    onSuccess: null,\n    onFailure: null,\n    beforeSend: null\n  };\n  var eventArgs = {\n    action: getValue('action', data),\n    ajaxSettings: ajaxSettings,\n    cancel: false\n  };\n  parent.trigger('beforeSend', eventArgs, function (beforeSendArgs) {\n    if (!beforeSendArgs.cancel) {\n      parent.notify(events.beforeRequest, {});\n      var ajax = new Ajax({\n        url: getValue('url', beforeSendArgs.ajaxSettings),\n        type: getValue('type', beforeSendArgs.ajaxSettings),\n        mode: getValue('mode', beforeSendArgs.ajaxSettings),\n        dataType: getValue('dataType', beforeSendArgs.ajaxSettings),\n        contentType: getValue('contentType', beforeSendArgs.ajaxSettings),\n        data: getValue('data', beforeSendArgs.ajaxSettings),\n        beforeSend: getValue('beforeSend', beforeSendArgs.ajaxSettings),\n        onSuccess: function (result) {\n          if (isNOU(result)) {\n            var result_1 = {\n              error: {\n                fileExists: null,\n                message: getLocaleText(parent, 'Server-Error') + ' ' + parent.ajaxSettings.url,\n                code: '406'\n              },\n              files: null\n            };\n            triggerAjaxFailure(parent, beforeSendArgs, fn, result_1, event, operation, targetPath);\n            return;\n          }\n\n          if (typeof result === 'string') {\n            result = JSON.parse(result);\n          }\n\n          parent.notify(events.afterRequest, {\n            action: 'success'\n          });\n          var id = parent.expandedId ? parent.expandedId : parent.pathId[parent.pathId.length - 1];\n\n          if (!isNOU(result.cwd) && getValue('action', data) === 'read') {\n            result.cwd.name = parent.pathId.length === 1 ? parent.rootAliasName || result.cwd.name : result.cwd.name;\n            setValue('_fm_id', id, result.cwd);\n            setValue(id, result.cwd, parent.feParent);\n\n            if (!isNOU(result.files) || result.error.code === '401') {\n              if ((event === 'finalize-end' || event === 'initial-end') && parent.pathNames.length === 0) {\n                // eslint-disable-next-line\n                var root = getValue(parent.pathId[0], parent.feParent);\n                parent.pathNames[0] = getValue('name', root);\n                parent.hasId = !isNOU(getValue('id', root));\n              }\n\n              if (event === 'finalize-end') {\n                generatePath(parent);\n              }\n            }\n          }\n\n          if (!isNOU(result.files)) {\n            setDateObject(result.files);\n\n            for (var i = 0, len = result.files.length; i < len; i++) {\n              // eslint-disable-next-line\n              var item = result.files[i];\n              setValue('_fm_iconClass', fileType(item), item);\n            }\n\n            if (getValue('action', data) === 'read') {\n              setNodeId(result, id);\n              setValue(id, result.files, parent.feFiles);\n            }\n          }\n\n          if (!isNOU(result.details) && !isNOU(parent.rootAliasName)) {\n            var rootName = parent.rootAliasName || getValue('name', result.details);\n            var location_1 = getValue('location', result.details).replace(new RegExp('/', 'g'), '\\\\');\n\n            if (getValue('path', data) === '/' || parent.hasId && getValue('path', data).match(/[/]/g).length === 1) {\n              if (getValue('names', data).length === 0) {\n                setValue('name', rootName, result.details);\n                location_1 = rootName;\n              } else {\n                location_1 = location_1.replace(location_1.substring(0, location_1.indexOf('\\\\')), rootName);\n              }\n            } else {\n              location_1 = location_1.replace(location_1.substring(0, location_1.indexOf('\\\\')), rootName);\n            }\n\n            setValue('location', location_1, result.details);\n          }\n\n          fn(parent, result, event, operation, targetPath);\n\n          if (!isNOU(result.files) && (event === 'path-changed' || event === 'finalize-end' || event === 'open-end')) {\n            parent.notify(events.searchTextChange, result);\n          }\n\n          if (typeof getValue('onSuccess', beforeSendArgs.ajaxSettings) === 'function') {\n            getValue('onSuccess', beforeSendArgs.ajaxSettings)();\n          }\n        },\n        onFailure: function () {\n          var result = {\n            files: null,\n            error: {\n              code: '404',\n              message: getLocaleText(parent, 'Network-Error') + ' ' + parent.ajaxSettings.url,\n              fileExists: null\n            }\n          };\n          triggerAjaxFailure(parent, beforeSendArgs, fn, result, event, operation, targetPath);\n        }\n      });\n      ajax.send();\n    }\n  });\n}\n/**\n * Function for trigger Ajax failure in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {BeforeSendEventArgs} beforeSendArgs - specifies the beforeSendArgs.\n * @param {Function} fn - specifies the function.\n * @param {ReadArgs} result - specifies the result.\n * @param {string} event - specifies the event.\n * @param {string} operation - specifies the operation.\n * @param {string} targetPath - specifies the targetPath.\n * @returns {void}\n * @private\n */\n\n\nfunction triggerAjaxFailure( // eslint-disable-next-line\nparent, beforeSendArgs, fn, result, event, operation, targetPath) {\n  parent.notify(events.afterRequest, {\n    action: 'failure'\n  });\n  fn(parent, result, event, operation, targetPath);\n\n  if (typeof getValue('onFailure', beforeSendArgs.ajaxSettings) === 'function') {\n    getValue('onFailure', beforeSendArgs.ajaxSettings)();\n  }\n}\n/**\n * Function for read success in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {ReadArgs} result - specifies the result.\n * @param {string} event - specifies the event.\n * @returns {void}\n * @private\n */\n\n\nfunction readSuccess(parent, result, event) {\n  if (!isNOU(result.files)) {\n    parent.notify(event, result);\n    parent.notify(events.selectionChanged, {});\n    var args = {\n      action: 'read',\n      result: result\n    };\n    parent.trigger('success', args);\n  } else {\n    if (result.error.code === '401') {\n      result.files = [];\n      parent.notify(event, result);\n      parent.notify(events.selectionChanged, {});\n    }\n\n    onFailure(parent, result, 'read');\n  }\n\n  if (parent.isDragDrop && parent.isDropEnd) {\n    if (parent.droppedObjects.length !== 0) {\n      var args = {\n        fileDetails: parent.droppedObjects\n      };\n      parent.trigger('fileDropped', args);\n    }\n\n    parent.isDropEnd = parent.isDragDrop = false;\n  }\n}\n/**\n * Function for filter success in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {ReadArgs} result - specifies the result.\n * @param {string} event - specifies the event.\n * @param {string} action - specifies the action.\n * @returns {void}\n * @private\n */\n\n\nfunction filterSuccess(parent, result, event, action) {\n  if (!isNOU(result.files)) {\n    parent.notify(event, result);\n    var args = {\n      action: action,\n      result: result\n    };\n    parent.trigger('success', args);\n  } else {\n    onFailure(parent, result, action);\n  }\n}\n/* istanbul ignore next */\n\n/**\n * Function for create success in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {ReadArgs} result - specifies the result.\n * @param {string} itemName - specifies the item name.\n * @returns {void}\n * @private\n */\n\n\nfunction createSuccess(parent, result, itemName) {\n  if (!isNOU(result.files)) {\n    if (parent.dialogObj && parent.dialogObj.visible) {\n      parent.dialogObj.hide();\n    }\n\n    parent.createdItem = result.files[0];\n    parent.breadcrumbbarModule.searchObj.value = '';\n    var args = {\n      action: 'create',\n      result: result\n    };\n    parent.trigger('success', args);\n    parent.itemData = [getPathObject(parent)];\n    read(parent, events.createEnd, parent.path);\n  } else {\n    if (result.error.code === '400') {\n      if (parent.dialogObj && parent.dialogObj.visible) {\n        var ele = select('#newname', parent.dialogObj.element);\n        var error = getLocaleText(parent, 'Validation-NewFolder-Exists').replace('{0}', '\"' + ele.value + '\"');\n        ele.parentElement.nextElementSibling.innerHTML = error;\n      } else {\n        var result_2 = {\n          files: null,\n          error: {\n            code: '400',\n            message: getLocaleText(parent, 'Validation-NewFolder-Exists').replace('{0}', '\"' + itemName + '\"'),\n            fileExists: null\n          }\n        };\n        createDialog(parent, 'Error', result_2);\n      }\n\n      var args = {\n        action: 'create',\n        error: result.error\n      };\n      parent.trigger('failure', args);\n    } else {\n      if (parent.dialogObj && parent.dialogObj.visible) {\n        parent.dialogObj.hide();\n      }\n\n      onFailure(parent, result, 'create');\n    }\n  }\n}\n/* istanbul ignore next */\n\n/**\n * Function to rename the folder/file in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {ReadArgs} result - specifies the result.\n * @param {string} path - specifies the path\n * @returns {void}\n * @private\n */\n\n\nfunction renameSuccess(parent, result, path) {\n  if (!isNOU(result.files)) {\n    if (!isNOU(parent.dialogObj)) {\n      parent.dialogObj.hide();\n    }\n\n    var args = {\n      action: 'rename',\n      result: result\n    };\n    parent.trigger('success', args);\n    parent.renamedItem = result.files[0];\n\n    if (parent.activeModule === 'navigationpane') {\n      parent.pathId.pop();\n      parent.itemData = [getValue(parent.pathId[parent.pathId.length - 1], parent.feParent)];\n      read(parent, events.renameEndParent, getParentPath(parent.path));\n    } else {\n      parent.itemData = [getPathObject(parent)];\n\n      if (parent.breadcrumbbarModule.searchObj.value !== '') {\n        Search(parent, events.renameEnd, parent.path, parent.searchWord, parent.showHiddenItems, !parent.searchSettings.ignoreCase);\n      } else {\n        if (parent.isFiltered) {\n          filter(parent, events.renameEnd);\n        } else {\n          read(parent, events.renameEnd, parent.path);\n        }\n      }\n    }\n  } else {\n    if (result.error.code === '400' && parent.dialogObj && parent.dialogObj.visible) {\n      var ele = select('#rename', parent.dialogObj.element);\n      var error = getLocaleText(parent, 'Validation-Rename-Exists').replace('{0}', '\"' + parent.currentItemText + '\"');\n      error = error.replace('{1}', '\"' + ele.value + '\"');\n      ele.parentElement.nextElementSibling.innerHTML = error;\n      var args = {\n        action: 'rename',\n        error: result.error\n      };\n      parent.trigger('failure', args);\n    } else {\n      if (!isNOU(parent.dialogObj)) {\n        parent.dialogObj.hide();\n      }\n\n      onFailure(parent, result, 'rename');\n    }\n  }\n}\n/* istanbul ignore next */\n\n/**\n * Function to create new folder in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {ReadArgs} result - specifies the result.\n * @param {string} path - specifies the path.\n * @param {string} operation - specifies the operation.\n * @returns {void}\n * @private\n */\n\n\nfunction pasteSuccess(parent, result, path, operation) {\n  if (result.error && result.error.fileExists) {\n    parent.fileLength = 0;\n\n    if (!isNOU(result.files)) {\n      parent.isPasteError = true;\n      doPasteUpdate(parent, operation, result);\n    }\n\n    createExtDialog(parent, 'DuplicateItems', result.error.fileExists);\n\n    if (result.error.code === '404') {\n      createDialog(parent, 'Error', result);\n    }\n  } else if (!result.error && !isNOU(result.files)) {\n    parent.isPasteError = false;\n    doPasteUpdate(parent, operation, result);\n  } else if (result.error && !isNOU(result.files)) {\n    parent.isPasteError = true;\n    doPasteUpdate(parent, operation, result);\n    createDialog(parent, 'Error', result);\n  } else {\n    onFailure(parent, result, operation);\n  }\n}\n/**\n * Function to delete success in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {ReadArgs} result - specifies the result.\n * @param {string} path - specifies the path.\n * @returns {void}\n * @private\n */\n\n\nfunction deleteSuccess(parent, result, path) {\n  if (!isNOU(result.files)) {\n    parent.setProperties({\n      path: path\n    }, true);\n    parent.itemData = [getPathObject(parent)];\n    read(parent, events.deleteEnd, parent.path);\n\n    if (result.error) {\n      onFailure(parent, result, 'delete');\n    } else {\n      var args = {\n        action: 'delete',\n        result: result\n      };\n      parent.trigger('success', args);\n    }\n  } else {\n    onFailure(parent, result, 'delete');\n  }\n}\n/**\n * Function for details success in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {ReadArgs} result - specifies the result.\n * @param {string} path - specifies the path.\n * @param {string} operation - specifies the operation.\n * @returns {void}\n * @private\n */\n\n\nfunction detailsSuccess( // eslint:disable-next-line\nparent, result, path, operation) {\n  if (!isNOU(result.details)) {\n    createDialog(parent, operation, null, result.details);\n    var args = {\n      action: 'details',\n      result: result\n    };\n    parent.trigger('success', args);\n  } else {\n    onFailure(parent, result, 'details');\n  }\n}\n/**\n * Function for on failure event in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {ReadArgs} result - specifies the result.\n * @param {string} action - specifies the action.\n * @returns {void}\n * @private\n */\n\n\nfunction onFailure(parent, result, action) {\n  createDialog(parent, 'Error', result);\n  var args = {\n    action: action,\n    error: result.error\n  };\n  parent.trigger('failure', args);\n}\n/**\n * Function for search in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} event - specifies the event.\n * @param {string} path - specifies the path.\n * @param {string} searchString - specifies the search string.\n * @param {boolean} showHiddenItems - specifies the hidden items.\n * @param {boolean} caseSensitive - specifies the casing of search text.\n * @returns {void}\n * @private\n */\n\n\nexport function Search( // eslint:disable-next-line\nparent, event, path, searchString, showHiddenItems, caseSensitive) {\n  // eslint-disable-next-line\n  var data = {\n    action: 'search',\n    path: path,\n    searchString: searchString,\n    showHiddenItems: showHiddenItems,\n    caseSensitive: caseSensitive,\n    data: parent.itemData\n  };\n  createAjax(parent, data, searchSuccess, event);\n}\n/* istanbul ignore next */\n\n/**\n * Function for search success in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {ReadArgs} result - specifies the result.\n * @param {string} event - specifies the event.\n * @returns {void}\n * @private\n */\n\nfunction searchSuccess(parent, result, event) {\n  if (!isNOU(result.files)) {\n    parent.notify(event, result);\n    var args = {\n      action: 'search',\n      result: result\n    };\n    parent.trigger('success', args);\n  } else {\n    onFailure(parent, result, 'search');\n  }\n}\n/* istanbul ignore next */\n\n/**\n * Function for download in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} path - specifies the path.\n * @param {string[]} items - specifies the items.\n * @returns {void}\n * @private\n */\n\n\nexport function Download(parent, path, items) {\n  var downloadUrl = parent.ajaxSettings.downloadUrl ? parent.ajaxSettings.downloadUrl : parent.ajaxSettings.url; // eslint-disable-next-line\n\n  var data = {\n    'action': 'download',\n    'path': path,\n    'names': items,\n    'data': parent.itemData\n  };\n  var eventArgs = {\n    data: data,\n    cancel: false\n  };\n  parent.trigger('beforeDownload', eventArgs, function (downloadArgs) {\n    if (!downloadArgs.cancel) {\n      var form = createElement('form', {\n        id: parent.element.id + '_downloadForm',\n        attrs: {\n          action: downloadUrl,\n          method: 'post',\n          name: 'downloadForm',\n          'download': ''\n        }\n      });\n      var input = createElement('input', {\n        id: parent.element.id + '_hiddenForm',\n        attrs: {\n          name: 'downloadInput',\n          value: JSON.stringify(downloadArgs.data),\n          type: 'hidden'\n        }\n      });\n      form.appendChild(input);\n      parent.element.appendChild(form);\n      document.forms.namedItem('downloadForm').submit();\n      parent.element.removeChild(form);\n    }\n  });\n}","map":{"version":3,"names":["Ajax","createElement","select","extend","isNullOrUndefined","isNOU","setValue","getValue","events","createDialog","createExtDialog","fileType","setNodeId","getLocaleText","setDateObject","doPasteUpdate","getParentPath","getPathObject","generatePath","read","parent","event","path","itemData","i","length","data","action","showHiddenItems","createAjax","readSuccess","createFolder","itemName","name","createSuccess","filter","filterData","filterDataVal","filterSuccess","rename","itemNewName","newName","breadcrumbbarModule","searchObj","element","value","isFiltered","currentItemText","fPath","filterPath","hasId","replace","renameSuccess","paste","names","targetPath","pasteOperation","renameItems","actionRecords","targetData","renameFiles","destinationPath","pasteSuccess","Delete","items","operation","deleteSuccess","GetDetails","detailsSuccess","fn","ajaxSettings","url","type","mode","dataType","contentType","JSON","stringify","onSuccess","onFailure","beforeSend","eventArgs","cancel","trigger","beforeSendArgs","notify","beforeRequest","ajax","result","result_1","error","fileExists","message","code","files","triggerAjaxFailure","parse","afterRequest","id","expandedId","pathId","cwd","rootAliasName","feParent","pathNames","root","len","item","feFiles","details","rootName","location_1","RegExp","match","substring","indexOf","searchTextChange","send","selectionChanged","args","isDragDrop","isDropEnd","droppedObjects","fileDetails","dialogObj","visible","hide","createdItem","createEnd","ele","parentElement","nextElementSibling","innerHTML","result_2","renamedItem","activeModule","pop","renameEndParent","Search","renameEnd","searchWord","searchSettings","ignoreCase","fileLength","isPasteError","setProperties","deleteEnd","searchString","caseSensitive","searchSuccess","Download","downloadUrl","downloadArgs","form","attrs","method","input","appendChild","document","forms","namedItem","submit","removeChild"],"sources":["C:/Users/shahj/OneDrive/Documents/GitHub/Multifunctional-React-Dashboard/node_modules/@syncfusion/ej2-filemanager/src/file-manager/common/operations.js"],"sourcesContent":["import { Ajax, createElement, select, extend } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined as isNOU, setValue, getValue } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { createDialog, createExtDialog } from '../pop-up/dialog';\nimport { fileType, setNodeId, getLocaleText, setDateObject, doPasteUpdate, getParentPath, getPathObject } from '../common/utility';\nimport { generatePath } from '../common/utility';\n/**\n * Function to read the content from given path in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} event - specifies the event.\n * @param {string} path - specifies the path.\n * @returns {void}\n * @private\n */\nexport function read(parent, event, path) {\n    // eslint-disable-next-line\n    var itemData = parent.itemData;\n    for (var i = 0; i < itemData.length; i++) {\n        if (isNOU(getValue('hasChild', itemData[i]))) {\n            setValue('hasChild', false, itemData[i]);\n        }\n    }\n    // eslint-disable-next-line\n    var data = { action: 'read', path: path, showHiddenItems: parent.showHiddenItems, data: itemData };\n    createAjax(parent, data, readSuccess, event);\n}\n/**\n * Function to create new folder in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} itemName - specifies the item name.\n * @returns {void}\n * @private\n */\nexport function createFolder(parent, itemName) {\n    // eslint-disable-next-line\n    var data = { action: 'create', path: parent.path, name: itemName, data: parent.itemData };\n    createAjax(parent, data, createSuccess, itemName);\n}\n/**\n * Function to filter the files in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string}  event - specifies the event.\n * @returns {void}\n * @private\n */\nexport function filter(parent, event) {\n    // eslint-disable-next-line\n    var data = { action: 'filter', path: parent.path, showHiddenItems: parent.showHiddenItems, data: [getPathObject(parent)] };\n    // eslint-disable-next-line\n    var filterData;\n    // eslint-disable-next-line\n    var filterDataVal = parent.filterData ? extend(filterData, data, parent.filterData) : data;\n    createAjax(parent, filterDataVal, filterSuccess, event, getValue('action', filterDataVal));\n}\n/**\n * Function to rename the folder/file in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} path - specifies the path.\n * @param {string} itemNewName - specifies the item's new name.\n * @returns {void}\n * @private\n */\nexport function rename(parent, path, itemNewName) {\n    var name;\n    var newName;\n    if (parent.breadcrumbbarModule.searchObj.element.value === '' && !parent.isFiltered) {\n        name = parent.currentItemText;\n        newName = itemNewName;\n    }\n    else {\n        var fPath = parent.filterPath;\n        if (parent.hasId) {\n            name = parent.currentItemText;\n            newName = itemNewName;\n        }\n        else {\n            fPath = fPath.replace(/\\\\/g, '/');\n            name = fPath.replace(path, '') + parent.currentItemText;\n            newName = fPath.replace(path, '') + itemNewName;\n        }\n    }\n    // eslint-disable-next-line\n    var data = {\n        action: 'rename', path: path, name: name, newName: newName, data: parent.itemData\n    };\n    createAjax(parent, data, renameSuccess, path);\n}\n/**\n * Function to paste file's and folder's in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} path - specifies the path.\n * @param {string[]} names - specifies the names.\n * @param {string} targetPath - specifies the target path.\n * @param {string} pasteOperation - specifies the paste operation.\n * @param {string[]} renameItems - specifies the rename items.\n * @param {Object[]} actionRecords - specifies the action records.\n * @returns {void}\n * @private\n */\nexport function paste(parent, path, names, targetPath, pasteOperation, \n// eslint-disable-next-line\nrenameItems, actionRecords) {\n    // eslint-disable-next-line\n    var data = {\n        action: pasteOperation, path: path, targetData: parent.itemData[0],\n        targetPath: targetPath, names: names, renameFiles: renameItems, data: actionRecords\n    };\n    parent.destinationPath = targetPath;\n    createAjax(parent, data, pasteSuccess, path, pasteOperation, targetPath);\n}\n/**\n * Function to delete file's and folder's in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string[]} items - specifies the items.\n * @param {string} path - specifies the path.\n * @param {string} operation - specifies the operation.\n * @returns {void}\n * @private\n */\nexport function Delete(parent, items, path, operation) {\n    // eslint-disable-next-line\n    var data = { action: operation, path: path, names: items, data: parent.itemData };\n    createAjax(parent, data, deleteSuccess, path);\n}\n/* istanbul ignore next */\n/**\n * Function to get details of file's and folder's in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string[]} names - specifies the names.\n * @param {string} path - specifies the path.\n * @param {string} operation - specifies the operation data.\n * @returns {void}\n * @private\n */\nexport function GetDetails(parent, names, path, operation) {\n    // eslint-disable-next-line\n    var data = { action: operation, path: path, names: names, data: parent.itemData };\n    createAjax(parent, data, detailsSuccess, path, operation);\n}\n/**\n * Function for createAjax in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {Object} data - specifies the data.\n * @param {Function} fn - specifies the fn.\n * @param {string} event - specifies the event.\n * @param {string} operation - specifies the operation.\n * @param {string} targetPath - specifies the target path.\n * @returns {void}\n * @private\n */\nfunction createAjax(\n// eslint-disable-next-line\nparent, data, fn, event, operation, targetPath) {\n    // eslint-disable-next-line\n    var ajaxSettings = {\n        url: parent.ajaxSettings.url,\n        type: 'POST',\n        mode: true,\n        dataType: 'json',\n        contentType: 'application/json',\n        data: JSON.stringify(data),\n        onSuccess: null,\n        onFailure: null,\n        beforeSend: null\n    };\n    var eventArgs = { action: getValue('action', data), ajaxSettings: ajaxSettings, cancel: false };\n    parent.trigger('beforeSend', eventArgs, function (beforeSendArgs) {\n        if (!beforeSendArgs.cancel) {\n            parent.notify(events.beforeRequest, {});\n            var ajax = new Ajax({\n                url: getValue('url', beforeSendArgs.ajaxSettings),\n                type: getValue('type', beforeSendArgs.ajaxSettings),\n                mode: getValue('mode', beforeSendArgs.ajaxSettings),\n                dataType: getValue('dataType', beforeSendArgs.ajaxSettings),\n                contentType: getValue('contentType', beforeSendArgs.ajaxSettings),\n                data: getValue('data', beforeSendArgs.ajaxSettings),\n                beforeSend: getValue('beforeSend', beforeSendArgs.ajaxSettings),\n                onSuccess: function (result) {\n                    if (isNOU(result)) {\n                        var result_1 = {\n                            error: {\n                                fileExists: null,\n                                message: getLocaleText(parent, 'Server-Error') + ' ' + parent.ajaxSettings.url,\n                                code: '406'\n                            },\n                            files: null\n                        };\n                        triggerAjaxFailure(parent, beforeSendArgs, fn, result_1, event, operation, targetPath);\n                        return;\n                    }\n                    if (typeof (result) === 'string') {\n                        result = JSON.parse(result);\n                    }\n                    parent.notify(events.afterRequest, { action: 'success' });\n                    var id = parent.expandedId ? parent.expandedId : parent.pathId[parent.pathId.length - 1];\n                    if (!isNOU(result.cwd) && (getValue('action', data) === 'read')) {\n                        result.cwd.name = (parent.pathId.length === 1) ? (parent.rootAliasName || result.cwd.name) : result.cwd.name;\n                        setValue('_fm_id', id, result.cwd);\n                        setValue(id, result.cwd, parent.feParent);\n                        if (!isNOU(result.files) || result.error.code === '401') {\n                            if ((event === 'finalize-end' || event === 'initial-end') && parent.pathNames.length === 0) {\n                                // eslint-disable-next-line\n                                var root = getValue(parent.pathId[0], parent.feParent);\n                                parent.pathNames[0] = getValue('name', root);\n                                parent.hasId = !isNOU(getValue('id', root));\n                            }\n                            if (event === 'finalize-end') {\n                                generatePath(parent);\n                            }\n                        }\n                    }\n                    if (!isNOU(result.files)) {\n                        setDateObject(result.files);\n                        for (var i = 0, len = result.files.length; i < len; i++) {\n                            // eslint-disable-next-line\n                            var item = result.files[i];\n                            setValue('_fm_iconClass', fileType(item), item);\n                        }\n                        if (getValue('action', data) === 'read') {\n                            setNodeId(result, id);\n                            setValue(id, result.files, parent.feFiles);\n                        }\n                    }\n                    if (!isNOU(result.details) && !isNOU(parent.rootAliasName)) {\n                        var rootName = parent.rootAliasName || getValue('name', result.details);\n                        var location_1 = getValue('location', result.details).replace(new RegExp('/', 'g'), '\\\\');\n                        if ((getValue('path', data) === '/') || (parent.hasId && getValue('path', data).match(/[/]/g).length === 1)) {\n                            if (getValue('names', data).length === 0) {\n                                setValue('name', rootName, result.details);\n                                location_1 = rootName;\n                            }\n                            else {\n                                location_1 = location_1.replace(location_1.substring(0, location_1.indexOf('\\\\')), rootName);\n                            }\n                        }\n                        else {\n                            location_1 = location_1.replace(location_1.substring(0, location_1.indexOf('\\\\')), rootName);\n                        }\n                        setValue('location', location_1, result.details);\n                    }\n                    fn(parent, result, event, operation, targetPath);\n                    if (!isNOU(result.files) && (event === 'path-changed' || event === 'finalize-end' || event === 'open-end')) {\n                        parent.notify(events.searchTextChange, result);\n                    }\n                    if (typeof getValue('onSuccess', beforeSendArgs.ajaxSettings) === 'function') {\n                        getValue('onSuccess', beforeSendArgs.ajaxSettings)();\n                    }\n                },\n                onFailure: function () {\n                    var result = {\n                        files: null,\n                        error: {\n                            code: '404',\n                            message: getLocaleText(parent, 'Network-Error') + ' ' + parent.ajaxSettings.url,\n                            fileExists: null\n                        }\n                    };\n                    triggerAjaxFailure(parent, beforeSendArgs, fn, result, event, operation, targetPath);\n                }\n            });\n            ajax.send();\n        }\n    });\n}\n/**\n * Function for trigger Ajax failure in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {BeforeSendEventArgs} beforeSendArgs - specifies the beforeSendArgs.\n * @param {Function} fn - specifies the function.\n * @param {ReadArgs} result - specifies the result.\n * @param {string} event - specifies the event.\n * @param {string} operation - specifies the operation.\n * @param {string} targetPath - specifies the targetPath.\n * @returns {void}\n * @private\n */\nfunction triggerAjaxFailure(\n// eslint-disable-next-line\nparent, beforeSendArgs, fn, result, event, operation, targetPath) {\n    parent.notify(events.afterRequest, { action: 'failure' });\n    fn(parent, result, event, operation, targetPath);\n    if (typeof getValue('onFailure', beforeSendArgs.ajaxSettings) === 'function') {\n        getValue('onFailure', beforeSendArgs.ajaxSettings)();\n    }\n}\n/**\n * Function for read success in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {ReadArgs} result - specifies the result.\n * @param {string} event - specifies the event.\n * @returns {void}\n * @private\n */\nfunction readSuccess(parent, result, event) {\n    if (!isNOU(result.files)) {\n        parent.notify(event, result);\n        parent.notify(events.selectionChanged, {});\n        var args = { action: 'read', result: result };\n        parent.trigger('success', args);\n    }\n    else {\n        if (result.error.code === '401') {\n            result.files = [];\n            parent.notify(event, result);\n            parent.notify(events.selectionChanged, {});\n        }\n        onFailure(parent, result, 'read');\n    }\n    if (parent.isDragDrop && parent.isDropEnd) {\n        if (parent.droppedObjects.length !== 0) {\n            var args = { fileDetails: parent.droppedObjects };\n            parent.trigger('fileDropped', args);\n        }\n        parent.isDropEnd = parent.isDragDrop = false;\n    }\n}\n/**\n * Function for filter success in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {ReadArgs} result - specifies the result.\n * @param {string} event - specifies the event.\n * @param {string} action - specifies the action.\n * @returns {void}\n * @private\n */\nfunction filterSuccess(parent, result, event, action) {\n    if (!isNOU(result.files)) {\n        parent.notify(event, result);\n        var args = { action: action, result: result };\n        parent.trigger('success', args);\n    }\n    else {\n        onFailure(parent, result, action);\n    }\n}\n/* istanbul ignore next */\n/**\n * Function for create success in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {ReadArgs} result - specifies the result.\n * @param {string} itemName - specifies the item name.\n * @returns {void}\n * @private\n */\nfunction createSuccess(parent, result, itemName) {\n    if (!isNOU(result.files)) {\n        if (parent.dialogObj && parent.dialogObj.visible) {\n            parent.dialogObj.hide();\n        }\n        parent.createdItem = result.files[0];\n        parent.breadcrumbbarModule.searchObj.value = '';\n        var args = { action: 'create', result: result };\n        parent.trigger('success', args);\n        parent.itemData = [getPathObject(parent)];\n        read(parent, events.createEnd, parent.path);\n    }\n    else {\n        if (result.error.code === '400') {\n            if (parent.dialogObj && parent.dialogObj.visible) {\n                var ele = select('#newname', parent.dialogObj.element);\n                var error = getLocaleText(parent, 'Validation-NewFolder-Exists').replace('{0}', '\"' + ele.value + '\"');\n                ele.parentElement.nextElementSibling.innerHTML = error;\n            }\n            else {\n                var result_2 = {\n                    files: null,\n                    error: {\n                        code: '400',\n                        message: getLocaleText(parent, 'Validation-NewFolder-Exists').replace('{0}', '\"' + itemName + '\"'),\n                        fileExists: null\n                    }\n                };\n                createDialog(parent, 'Error', result_2);\n            }\n            var args = { action: 'create', error: result.error };\n            parent.trigger('failure', args);\n        }\n        else {\n            if (parent.dialogObj && parent.dialogObj.visible) {\n                parent.dialogObj.hide();\n            }\n            onFailure(parent, result, 'create');\n        }\n    }\n}\n/* istanbul ignore next */\n/**\n * Function to rename the folder/file in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {ReadArgs} result - specifies the result.\n * @param {string} path - specifies the path\n * @returns {void}\n * @private\n */\nfunction renameSuccess(parent, result, path) {\n    if (!isNOU(result.files)) {\n        if (!isNOU(parent.dialogObj)) {\n            parent.dialogObj.hide();\n        }\n        var args = { action: 'rename', result: result };\n        parent.trigger('success', args);\n        parent.renamedItem = result.files[0];\n        if (parent.activeModule === 'navigationpane') {\n            parent.pathId.pop();\n            parent.itemData = [getValue(parent.pathId[parent.pathId.length - 1], parent.feParent)];\n            read(parent, events.renameEndParent, getParentPath(parent.path));\n        }\n        else {\n            parent.itemData = [getPathObject(parent)];\n            if (parent.breadcrumbbarModule.searchObj.value !== '') {\n                Search(parent, events.renameEnd, parent.path, parent.searchWord, parent.showHiddenItems, !parent.searchSettings.ignoreCase);\n            }\n            else {\n                if (parent.isFiltered) {\n                    filter(parent, events.renameEnd);\n                }\n                else {\n                    read(parent, events.renameEnd, parent.path);\n                }\n            }\n        }\n    }\n    else {\n        if (result.error.code === '400' && parent.dialogObj && parent.dialogObj.visible) {\n            var ele = select('#rename', parent.dialogObj.element);\n            var error = getLocaleText(parent, 'Validation-Rename-Exists').replace('{0}', '\"' + parent.currentItemText + '\"');\n            error = error.replace('{1}', '\"' + ele.value + '\"');\n            ele.parentElement.nextElementSibling.innerHTML = error;\n            var args = { action: 'rename', error: result.error };\n            parent.trigger('failure', args);\n        }\n        else {\n            if (!isNOU(parent.dialogObj)) {\n                parent.dialogObj.hide();\n            }\n            onFailure(parent, result, 'rename');\n        }\n    }\n}\n/* istanbul ignore next */\n/**\n * Function to create new folder in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {ReadArgs} result - specifies the result.\n * @param {string} path - specifies the path.\n * @param {string} operation - specifies the operation.\n * @returns {void}\n * @private\n */\nfunction pasteSuccess(parent, result, path, operation) {\n    if (result.error && result.error.fileExists) {\n        parent.fileLength = 0;\n        if (!isNOU(result.files)) {\n            parent.isPasteError = true;\n            doPasteUpdate(parent, operation, result);\n        }\n        createExtDialog(parent, 'DuplicateItems', result.error.fileExists);\n        if (result.error.code === '404') {\n            createDialog(parent, 'Error', result);\n        }\n    }\n    else if (!result.error && !isNOU(result.files)) {\n        parent.isPasteError = false;\n        doPasteUpdate(parent, operation, result);\n    }\n    else if (result.error && !isNOU(result.files)) {\n        parent.isPasteError = true;\n        doPasteUpdate(parent, operation, result);\n        createDialog(parent, 'Error', result);\n    }\n    else {\n        onFailure(parent, result, operation);\n    }\n}\n/**\n * Function to delete success in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {ReadArgs} result - specifies the result.\n * @param {string} path - specifies the path.\n * @returns {void}\n * @private\n */\nfunction deleteSuccess(parent, result, path) {\n    if (!isNOU(result.files)) {\n        parent.setProperties({ path: path }, true);\n        parent.itemData = [getPathObject(parent)];\n        read(parent, events.deleteEnd, parent.path);\n        if (result.error) {\n            onFailure(parent, result, 'delete');\n        }\n        else {\n            var args = { action: 'delete', result: result };\n            parent.trigger('success', args);\n        }\n    }\n    else {\n        onFailure(parent, result, 'delete');\n    }\n}\n/**\n * Function for details success in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {ReadArgs} result - specifies the result.\n * @param {string} path - specifies the path.\n * @param {string} operation - specifies the operation.\n * @returns {void}\n * @private\n */\nfunction detailsSuccess(\n// eslint:disable-next-line\nparent, result, path, operation) {\n    if (!isNOU(result.details)) {\n        createDialog(parent, operation, null, result.details);\n        var args = { action: 'details', result: result };\n        parent.trigger('success', args);\n    }\n    else {\n        onFailure(parent, result, 'details');\n    }\n}\n/**\n * Function for on failure event in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {ReadArgs} result - specifies the result.\n * @param {string} action - specifies the action.\n * @returns {void}\n * @private\n */\nfunction onFailure(parent, result, action) {\n    createDialog(parent, 'Error', result);\n    var args = { action: action, error: result.error };\n    parent.trigger('failure', args);\n}\n/**\n * Function for search in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} event - specifies the event.\n * @param {string} path - specifies the path.\n * @param {string} searchString - specifies the search string.\n * @param {boolean} showHiddenItems - specifies the hidden items.\n * @param {boolean} caseSensitive - specifies the casing of search text.\n * @returns {void}\n * @private\n */\nexport function Search(\n// eslint:disable-next-line\nparent, event, path, searchString, showHiddenItems, caseSensitive) {\n    // eslint-disable-next-line\n    var data = {\n        action: 'search', path: path, searchString: searchString, showHiddenItems: showHiddenItems, caseSensitive: caseSensitive,\n        data: parent.itemData\n    };\n    createAjax(parent, data, searchSuccess, event);\n}\n/* istanbul ignore next */\n/**\n * Function for search success in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {ReadArgs} result - specifies the result.\n * @param {string} event - specifies the event.\n * @returns {void}\n * @private\n */\nfunction searchSuccess(parent, result, event) {\n    if (!isNOU(result.files)) {\n        parent.notify(event, result);\n        var args = { action: 'search', result: result };\n        parent.trigger('success', args);\n    }\n    else {\n        onFailure(parent, result, 'search');\n    }\n}\n/* istanbul ignore next */\n/**\n * Function for download in File Manager.\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} path - specifies the path.\n * @param {string[]} items - specifies the items.\n * @returns {void}\n * @private\n */\nexport function Download(parent, path, items) {\n    var downloadUrl = parent.ajaxSettings.downloadUrl ? parent.ajaxSettings.downloadUrl : parent.ajaxSettings.url;\n    // eslint-disable-next-line\n    var data = { 'action': 'download', 'path': path, 'names': items, 'data': parent.itemData };\n    var eventArgs = { data: data, cancel: false };\n    parent.trigger('beforeDownload', eventArgs, function (downloadArgs) {\n        if (!downloadArgs.cancel) {\n            var form = createElement('form', {\n                id: parent.element.id + '_downloadForm',\n                attrs: { action: downloadUrl, method: 'post', name: 'downloadForm', 'download': '' }\n            });\n            var input = createElement('input', {\n                id: parent.element.id + '_hiddenForm',\n                attrs: { name: 'downloadInput', value: JSON.stringify(downloadArgs.data), type: 'hidden' }\n            });\n            form.appendChild(input);\n            parent.element.appendChild(form);\n            document.forms.namedItem('downloadForm').submit();\n            parent.element.removeChild(form);\n        }\n    });\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}