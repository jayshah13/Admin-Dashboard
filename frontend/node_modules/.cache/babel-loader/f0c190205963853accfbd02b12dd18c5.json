{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n\nimport { addClass, Browser, EventHandler, remove, closest, extend, formatUnit, setStyleAttribute, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { ActionBase } from '../actions/action-base';\nimport { MonthEvent } from '../event-renderer/month';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Schedule events resize actions\n */\n\nvar Resize =\n/** @class */\nfunction (_super) {\n  __extends(Resize, _super);\n\n  function Resize() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Resize.prototype.wireResizeEvent = function (element) {\n    var resizeElement = [].slice.call(element.querySelectorAll('.' + cls.EVENT_RESIZE_CLASS));\n\n    for (var _i = 0, resizeElement_1 = resizeElement; _i < resizeElement_1.length; _i++) {\n      var element_1 = resizeElement_1[_i];\n      EventHandler.add(element_1, Browser.touchStartEvent, this.resizeStart, this);\n    }\n  };\n\n  Resize.prototype.resizeHelper = function () {\n    if (this.parent.activeViewOptions.group.resources.length > 0 && this.parent.activeViewOptions.group.allowGroupEdit) {\n      for (var i = 0, len = this.actionObj.originalElement.length; i < len; i++) {\n        var cloneElement = this.createCloneElement(this.actionObj.originalElement[i]);\n        this.actionObj.cloneElement[i] = cloneElement;\n\n        if (this.actionObj.element === this.actionObj.originalElement[i]) {\n          this.actionObj.clone = cloneElement;\n        }\n      }\n    } else {\n      if (this.actionObj.element) {\n        this.actionObj.clone = this.createCloneElement(this.actionObj.element);\n      }\n\n      this.actionObj.cloneElement = [this.actionObj.clone];\n      this.actionObj.originalElement = [this.actionObj.element];\n    }\n  };\n\n  Resize.prototype.resizeStart = function (e) {\n    var _this = this;\n\n    this.actionObj.action = 'resize';\n    this.actionObj.slotInterval = this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\n    this.actionObj.interval = this.actionObj.slotInterval;\n    var resizeTarget = closest(e.target, '.' + cls.EVENT_RESIZE_CLASS);\n    this.actionObj.element = closest(resizeTarget, '.' + cls.APPOINTMENT_CLASS);\n    this.actionObj.event = this.parent.eventBase.getEventByGuid(this.actionObj.element.getAttribute('data-guid'));\n    var eventObj = extend({}, this.actionObj.event, null, true);\n    var resizeArgs = {\n      cancel: false,\n      data: eventObj,\n      element: this.actionObj.element,\n      event: e,\n      interval: this.actionObj.interval,\n      scroll: {\n        enable: true,\n        scrollBy: 30,\n        timeDelay: 100\n      }\n    };\n    this.parent.trigger(event.resizeStart, resizeArgs, function (resizeEventArgs) {\n      if (resizeEventArgs.cancel) {\n        return;\n      }\n\n      _this.actionClass('addClass');\n\n      _this.parent.uiStateValues.action = true;\n      _this.resizeEdges = {\n        left: resizeTarget.classList.contains(cls.LEFT_RESIZE_HANDLER),\n        right: resizeTarget.classList.contains(cls.RIGHT_RESIZE_HANDLER),\n        top: resizeTarget.classList.contains(cls.TOP_RESIZE_HANDLER),\n        bottom: resizeTarget.classList.contains(cls.BOTTOM_RESIZE_HANDLER)\n      };\n      _this.actionObj.groupIndex = _this.parent.uiStateValues.isGroupAdaptive ? _this.parent.uiStateValues.groupIndex : 0;\n\n      var workCell = _this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS).getBoundingClientRect();\n\n      _this.actionObj.cellWidth = workCell.width;\n      _this.actionObj.cellHeight = workCell.height;\n\n      var hRows = _this.parent.activeViewOptions.headerRows.map(function (row) {\n        return row.option;\n      });\n\n      if (_this.parent.activeView.isTimelineView() && hRows.length > 0 && ['Date', 'Hour'].indexOf(hRows.slice(-1)[0]) < 0) {\n        var tr = _this.parent.getContentTable().querySelector('tr');\n\n        var noOfDays = 0;\n        var tdCollections = [].slice.call(tr.children);\n\n        for (var _i = 0, tdCollections_1 = tdCollections; _i < tdCollections_1.length; _i++) {\n          var td = tdCollections_1[_i];\n          noOfDays += parseInt(td.getAttribute('colspan'), 10);\n        }\n\n        var trRect = tr.getBoundingClientRect();\n        _this.actionObj.cellWidth = trRect.width / noOfDays;\n        _this.actionObj.cellHeight = trRect.height;\n      }\n\n      var pages = _this.getPageCoordinates(e);\n\n      _this.actionObj.X = pages.pageX;\n      _this.actionObj.Y = pages.pageY;\n      _this.actionObj.groupIndex = parseInt(_this.actionObj.element.getAttribute('data-group-index') || '0', 10);\n      _this.actionObj.interval = resizeEventArgs.interval;\n      _this.actionObj.scroll = resizeEventArgs.scroll;\n      _this.actionObj.start = new Date(eventObj[_this.parent.eventFields.startTime].getTime());\n      _this.actionObj.end = new Date(eventObj[_this.parent.eventFields.endTime].getTime());\n      _this.actionObj.originalElement = _this.getOriginalElement(_this.actionObj.element);\n\n      if (_this.parent.currentView === 'Month') {\n        _this.daysVariation = -1;\n        _this.monthEvent = new MonthEvent(_this.parent);\n      }\n\n      var viewElement = _this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n\n      _this.scrollArgs = {\n        element: viewElement,\n        width: viewElement.scrollWidth,\n        height: viewElement.scrollHeight\n      };\n      EventHandler.add(document, Browser.touchMoveEvent, _this.resizing, _this);\n      EventHandler.add(document, Browser.touchEndEvent, _this.resizeStop, _this);\n    });\n  };\n\n  Resize.prototype.resizing = function (e) {\n    if (this.parent.quickPopup) {\n      this.parent.quickPopup.quickPopupHide();\n    }\n\n    if (this.parent.element.querySelectorAll('.' + cls.RESIZE_CLONE_CLASS).length === 0) {\n      this.resizeHelper();\n    }\n\n    if (!isNullOrUndefined(e.target) && e.target.classList.contains(cls.DISABLE_DATES)) {\n      return;\n    }\n\n    var pages = this.getPageCoordinates(e);\n    this.actionObj.pageX = pages.pageX;\n    this.actionObj.pageY = pages.pageY;\n    this.updateScrollPosition(e);\n    this.updateResizingDirection(e);\n    var eventObj = extend({}, this.actionObj.event, null, true);\n    var resizeArgs = {\n      cancel: false,\n      data: eventObj,\n      element: this.actionObj.element,\n      event: e,\n      startTime: this.actionObj.start,\n      endTime: this.actionObj.end\n    };\n\n    if (this.parent.group.resources.length > 0) {\n      resizeArgs.groupIndex = this.actionObj.groupIndex;\n    }\n\n    this.parent.trigger(event.resizing, resizeArgs);\n  };\n\n  Resize.prototype.updateResizingDirection = function (e) {\n    if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineYear') {\n      this.monthResizing();\n      return;\n    }\n\n    var resizeValidation = this.resizeValidation(e);\n\n    if (this.resizeEdges.left) {\n      if (resizeValidation) {\n        var leftStyles = this.getLeftRightStyles(e, true);\n\n        if (parseInt(leftStyles.width, 10) < 1) {\n          return;\n        }\n\n        for (var _i = 0, _a = this.actionObj.cloneElement; _i < _a.length; _i++) {\n          var cloneElement = _a[_i];\n          setStyleAttribute(cloneElement, leftStyles);\n          addClass([cloneElement], cls.LEFT_RESIZE_HANDLER);\n        }\n      }\n\n      this.horizontalResizing(!this.parent.enableRtl);\n    }\n\n    if (this.resizeEdges.right) {\n      if (resizeValidation) {\n        var rightStyles = this.getLeftRightStyles(e, false);\n\n        if (parseInt(rightStyles.width, 10) < 1) {\n          return;\n        }\n\n        for (var _b = 0, _c = this.actionObj.cloneElement; _b < _c.length; _b++) {\n          var cloneElement = _c[_b];\n          setStyleAttribute(cloneElement, rightStyles);\n          addClass([cloneElement], cls.RIGHT_RESIZE_HANDLER);\n        }\n      }\n\n      this.horizontalResizing(this.parent.enableRtl);\n    }\n\n    if (this.resizeEdges.top) {\n      if (resizeValidation) {\n        var topStyles = this.getTopBottomStyles(e, true);\n\n        if (parseInt(topStyles.height, 10) < 1) {\n          return;\n        }\n\n        for (var _d = 0, _e = this.actionObj.cloneElement; _d < _e.length; _d++) {\n          var cloneElement = _e[_d];\n          setStyleAttribute(cloneElement, topStyles);\n          addClass([cloneElement], cls.TOP_RESIZE_HANDLER);\n        }\n      }\n\n      this.verticalResizing(true);\n    }\n\n    if (this.resizeEdges.bottom) {\n      if (resizeValidation) {\n        var bottomStyles = this.getTopBottomStyles(e, false);\n\n        if (parseInt(bottomStyles.height, 10) < 1) {\n          return;\n        }\n\n        for (var _f = 0, _g = this.actionObj.cloneElement; _f < _g.length; _f++) {\n          var cloneElement = _g[_f];\n          setStyleAttribute(cloneElement, bottomStyles);\n          addClass([cloneElement], cls.BOTTOM_RESIZE_HANDLER);\n        }\n      }\n\n      this.verticalResizing(false);\n    }\n  };\n\n  Resize.prototype.monthResizing = function () {\n    this.removeCloneElement();\n\n    if (isNullOrUndefined(this.actionObj.pageX) || isNullOrUndefined(this.actionObj.pageY)) {\n      return;\n    }\n\n    var td = document.elementFromPoint(this.actionObj.pageX, this.actionObj.pageY);\n\n    if (isNullOrUndefined(td)) {\n      return;\n    }\n\n    var resizeTime = this.parent.getDateFromElement(td);\n    var isSameCell = this.parent.activeViewOptions.group.resources.length > 0 ? parseInt(td.getAttribute('data-group-index'), 10) === this.actionObj.groupIndex : true;\n    var startTime = new Date(this.actionObj.event[this.parent.eventFields.startTime].getTime());\n    var endTime = new Date(this.actionObj.event[this.parent.eventFields.endTime].getTime());\n\n    if (!this.parent.enableRtl && this.resizeEdges.left || this.parent.enableRtl && this.resizeEdges.right || this.resizeEdges.top) {\n      startTime = resizeTime;\n    } else if (!this.parent.enableRtl && this.resizeEdges.right || this.parent.enableRtl && this.resizeEdges.left || this.resizeEdges.bottom) {\n      endTime = util.addDays(resizeTime, 1);\n    }\n\n    if (isSameCell && startTime < endTime) {\n      this.actionObj.start = startTime;\n      this.actionObj.end = endTime;\n      var event_1 = this.getUpdatedEvent(this.actionObj.start, this.actionObj.end, this.actionObj.event);\n\n      if (this.parent.currentView === 'TimelineYear') {\n        this.yearEventsRendering(event_1);\n      } else {\n        this.dynamicEventsRendering(event_1);\n      }\n\n      this.updateOriginalElement(this.actionObj.clone);\n    }\n  };\n\n  Resize.prototype.yearEventsRendering = function (event) {\n    var eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CLONE_ELEMENT_CLASS));\n\n    for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {\n      var wrapper = eventWrappers_1[_i];\n      remove(wrapper);\n    }\n\n    var endDate = new Date(event[this.parent.eventFields.endTime]);\n    var monthDiff = 0;\n\n    if (this.parent.activeViewOptions.group.resources.length === 0) {\n      monthDiff = this.getMonthDiff(event[this.parent.eventFields.startTime], util.addDays(endDate, -1));\n    }\n\n    for (var i = 0; i <= monthDiff; i++) {\n      var eventObj = void 0;\n\n      if (this.parent.activeViewOptions.group.resources.length === 0) {\n        eventObj = this.getEventCount(event, this.actionObj.start.getMonth() + i);\n      } else {\n        eventObj = extend({}, event, null, true);\n        endDate = this.resizeEdges.left || this.resizeEdges.right ? util.addDays(endDate, -1) : endDate;\n        eventObj.count = this.getMonthDiff(event[this.parent.eventFields.startTime], endDate) + 1;\n      }\n\n      this.dynamicYearlyEventsRendering(eventObj, true);\n    }\n  };\n\n  Resize.prototype.getMonthDiff = function (startDate, endDate) {\n    var months;\n    months = (endDate.getFullYear() - startDate.getFullYear()) * 12;\n    months -= startDate.getMonth();\n    months += endDate.getMonth();\n    return months <= 0 ? 0 : months;\n  };\n\n  Resize.prototype.getEventCount = function (eventObj, month) {\n    var eventData = extend({}, eventObj, null, true);\n    var eventStart = eventData[this.parent.eventFields.startTime];\n    var eventEnd = eventData[this.parent.eventFields.endTime];\n    var monthStart = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n    var monthEnd = util.addDays(new Date(this.parent.selectedDate.getFullYear(), month + 1, 0), 1);\n    var count = 1;\n\n    if (eventStart.getTime() < monthStart.getTime()) {\n      eventData[this.parent.eventFields.startTime] = monthStart;\n    }\n\n    if (eventEnd.getTime() > monthEnd.getTime()) {\n      eventData[this.parent.eventFields.endTime] = monthEnd;\n    }\n\n    if (this.parent.activeViewOptions.group.resources.length === 0) {\n      count = Math.ceil((eventData[this.parent.eventFields.endTime].getTime() - eventData[this.parent.eventFields.startTime].getTime()) / util.MS_PER_DAY);\n    }\n\n    eventData.count = count;\n    return eventData;\n  };\n\n  Resize.prototype.resizeStop = function (e) {\n    var _this = this;\n\n    EventHandler.remove(document, Browser.touchMoveEvent, this.resizing);\n    EventHandler.remove(document, Browser.touchEndEvent, this.resizeStop);\n    clearInterval(this.actionObj.scrollInterval);\n    this.actionObj.scrollInterval = null;\n    this.removeCloneElementClasses();\n    this.removeCloneElement();\n    this.actionClass('removeClass');\n    this.parent.uiStateValues.action = false;\n    var resizeArgs = {\n      cancel: false,\n      data: this.getChangedData(),\n      element: this.actionObj.element,\n      event: e\n    };\n    this.parent.trigger(event.resizeStop, resizeArgs, function (resizeEventArgs) {\n      if (resizeEventArgs.cancel) {\n        return;\n      }\n\n      if (_this.parent.activeViewOptions.group.resources.length > 0 && !_this.parent.rowAutoHeight && !_this.parent.activeViewOptions.group.allowGroupEdit && !_this.parent.virtualScrollModule && _this.parent.activeViewOptions.group.byGroupID) {\n        _this.parent.crudModule.crudObj.sourceEvent = [_this.parent.resourceBase.lastResourceLevel[parseInt(resizeEventArgs.element.getAttribute('data-group-index'), 10)]];\n        _this.parent.crudModule.crudObj.targetEvent = _this.parent.crudModule.crudObj.sourceEvent;\n        _this.parent.crudModule.crudObj.isCrudAction = true;\n      }\n\n      _this.saveChangedData(resizeEventArgs);\n    });\n  };\n\n  Resize.prototype.verticalResizing = function (isTop) {\n    var offsetValue = this.actionObj.clone.offsetTop;\n\n    if (!isTop) {\n      offsetValue += this.actionObj.clone.offsetHeight;\n    }\n\n    var minutes = offsetValue / this.actionObj.cellHeight * this.actionObj.slotInterval;\n    var element = this.actionObj.clone.offsetParent;\n\n    if (isNullOrUndefined(element)) {\n      return;\n    }\n\n    var resizeTime = util.resetTime(this.parent.getDateFromElement(element));\n    resizeTime.setHours(this.parent.activeView.getStartHour().getHours());\n    resizeTime.setMinutes(minutes + this.parent.activeView.getStartHour().getMinutes());\n\n    if (isTop) {\n      this.actionObj.start = this.calculateIntervalTime(resizeTime);\n    } else {\n      this.actionObj.end = this.calculateIntervalTime(resizeTime);\n    }\n\n    this.updateTimePosition(resizeTime);\n  };\n\n  Resize.prototype.horizontalResizing = function (isLeft) {\n    var eventStart = new Date(this.actionObj.event[this.parent.eventFields.startTime].getTime());\n    var eventEnd = new Date(this.actionObj.event[this.parent.eventFields.endTime].getTime());\n    var resizeTime;\n    var isDateHeader = false;\n    var headerName = this.parent.currentView;\n    var isTimeViews = ['TimelineDay', 'TimelineWeek', 'TimelineWorkWeek'].indexOf(this.parent.currentView) > -1;\n    var isTimelineMonth = this.parent.currentView === 'TimelineMonth';\n    var isWithoutScale = isTimelineMonth || isTimeViews && !this.parent.activeViewOptions.timeScale.enable;\n\n    if (this.parent.activeView.isTimelineView()) {\n      var tr = this.parent.getContentTable().querySelector('tr');\n\n      if (this.parent.activeViewOptions.headerRows.length > 0) {\n        var rows = this.parent.activeViewOptions.headerRows.map(function (row) {\n          return row.option;\n        });\n        headerName = rows.slice(-1)[0];\n\n        if (isTimelineMonth && headerName === 'Hour') {\n          headerName = rows.slice(-2)[0] || 'Month';\n        }\n      }\n\n      resizeTime = isLeft ? eventStart : eventEnd;\n      var cellIndex = 0;\n      var tdCollections = [].slice.call(tr.children);\n      var isLastCell = false;\n      var pixelsPerMinute = this.actionObj.cellWidth / (this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount);\n      var offset = parseFloat(this.parent.enableRtl ? this.actionObj.clone.style.right : this.actionObj.clone.style.left);\n      offset = Math.round(offset / pixelsPerMinute) * pixelsPerMinute;\n\n      if (['Year', 'Month', 'Week', 'Date'].indexOf(headerName) !== -1) {\n        var noOfDays = 0;\n\n        for (var _i = 0, tdCollections_2 = tdCollections; _i < tdCollections_2.length; _i++) {\n          var td = tdCollections_2[_i];\n          noOfDays += parseInt(td.getAttribute('colspan'), 10);\n        }\n\n        var offsetValue = this.parent.enableRtl ? parseInt(this.actionObj.clone.style.right, 10) : parseInt(this.actionObj.clone.style.left, 10);\n        offsetValue = Math.round(offsetValue / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n\n        if (!isLeft) {\n          offsetValue += this.actionObj.clone.getBoundingClientRect().width - this.actionObj.cellWidth;\n        }\n\n        cellIndex = Math.floor(offsetValue / Math.floor(tr.getBoundingClientRect().width / noOfDays));\n        isDateHeader = isTimeViews && headerName === 'Date';\n        cellIndex = isLeft ? cellIndex : isTimelineMonth ? cellIndex + 1 : cellIndex;\n        isLastCell = cellIndex === tdCollections.length;\n        cellIndex = cellIndex < 0 ? 0 : cellIndex >= noOfDays ? noOfDays - 1 : cellIndex;\n      } else {\n        var cellWidth = this.actionObj.cellWidth;\n        cellIndex = isLeft ? Math.floor(offset / this.actionObj.cellWidth) : Math.ceil((offset + (this.actionObj.clone.getBoundingClientRect().width - cellWidth)) / this.actionObj.cellWidth);\n\n        if (this.parent.enableRtl) {\n          var cellOffsetWidth = 0;\n\n          if (headerName === 'TimelineMonth' || !this.parent.activeViewOptions.timeScale.enable && !isTimelineMonth) {\n            cellOffsetWidth = this.actionObj.cellWidth;\n          }\n\n          var offsetWidth = Math.floor(offset / this.actionObj.cellWidth) * this.actionObj.cellWidth + (isLeft ? 0 : this.actionObj.clone.getBoundingClientRect().width - cellOffsetWidth);\n          cellIndex = Math.floor(offsetWidth / this.actionObj.cellWidth);\n        }\n\n        isLastCell = cellIndex === tdCollections.length;\n        cellIndex = this.getIndex(cellIndex);\n      }\n\n      var resizeDate = void 0;\n\n      if (['Year', 'Month', 'Week', 'Date'].indexOf(headerName) !== -1) {\n        resizeDate = new Date(this.parent.activeView.renderDates[cellIndex].getTime());\n      } else {\n        resizeDate = this.parent.getDateFromElement(tr.children[cellIndex]);\n      }\n\n      if (['TimelineMonth', 'Year', 'Month', 'Week', 'Date'].indexOf(headerName) !== -1 || !this.parent.activeViewOptions.timeScale.enable) {\n        resizeTime = new Date(resizeDate.setHours(resizeTime.getHours(), resizeTime.getMinutes(), resizeTime.getSeconds()));\n      } else {\n        if (!isLeft) {\n          offset += this.actionObj.clone.getBoundingClientRect().width;\n        }\n\n        var spanMinutes = Math.ceil(this.actionObj.slotInterval / this.actionObj.cellWidth * (offset - Math.floor(offset / this.actionObj.cellWidth) * this.actionObj.cellWidth));\n        spanMinutes = isLastCell || !isLeft && spanMinutes === 0 ? this.actionObj.slotInterval : spanMinutes;\n        resizeTime = new Date(resizeDate.getTime());\n        resizeTime.setMinutes(resizeTime.getMinutes() + spanMinutes);\n        this.updateTimePosition(resizeTime);\n      }\n    } else {\n      var cloneIndex = closest(this.actionObj.clone, 'td').cellIndex;\n      var originalWidth = Math.ceil((isLeft ? this.actionObj.element.getBoundingClientRect().width : 0) / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n      var noOfDays = Math.ceil((this.actionObj.clone.getBoundingClientRect().width - originalWidth) / this.actionObj.cellWidth);\n      var tr = closest(this.actionObj.clone, 'tr');\n      var dayIndex = isLeft ? cloneIndex - noOfDays : cloneIndex + noOfDays - 1;\n      dayIndex = this.getIndex(dayIndex);\n      resizeTime = this.parent.getDateFromElement(tr.children[dayIndex]);\n\n      if (isLeft) {\n        resizeTime.setHours(eventStart.getHours(), eventStart.getMinutes(), eventStart.getSeconds());\n      } else {\n        resizeTime.setHours(eventEnd.getHours(), eventEnd.getMinutes(), eventEnd.getSeconds());\n      }\n    }\n\n    if (isLeft) {\n      if (eventEnd.getTime() - resizeTime.getTime() <= 0) {\n        resizeTime = isWithoutScale ? util.resetTime(eventEnd) : eventStart;\n      }\n\n      this.actionObj.start = this.parent.activeViewOptions.timeScale.enable ? this.calculateIntervalTime(resizeTime) : resizeTime;\n    } else {\n      var isTimeScaleViews = isTimeViews && this.parent.activeViewOptions.timeScale.enable;\n      var resizeEnd = (!isTimeScaleViews || isDateHeader || isTimeViews && ['Week', 'Month', 'Year'].indexOf(headerName) > -1) && resizeTime.getHours() === 0 && resizeTime.getMinutes() === 0 ? util.addDays(resizeTime, 1) : resizeTime;\n\n      if (isWithoutScale && resizeEnd.getTime() - eventStart.getTime() <= 0) {\n        resizeEnd = util.addDays(util.resetTime(eventStart), 1);\n      }\n\n      this.actionObj.end = this.parent.activeViewOptions.timeScale.enable && this.parent.currentView !== 'Month' ? this.calculateIntervalTime(resizeEnd) : resizeEnd;\n    }\n  };\n\n  Resize.prototype.getTopBottomStyles = function (e, isTop) {\n    var viewElement = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n    var slotInterval = this.actionObj.cellHeight / this.actionObj.slotInterval * this.actionObj.interval;\n    var clnHeight = isTop ? this.actionObj.element.offsetHeight + (this.actionObj.Y - this.actionObj.pageY) : this.actionObj.element.offsetHeight + (this.actionObj.pageY - this.actionObj.Y);\n    var clnTop = isTop ? this.actionObj.element.offsetTop - (this.actionObj.Y - this.actionObj.pageY) : this.actionObj.clone.offsetTop;\n    clnHeight = clnTop < 0 ? this.actionObj.clone.offsetHeight : this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight > this.scrollArgs.height ? this.actionObj.clone.offsetHeight : clnHeight;\n    clnTop = clnTop < 0 ? 0 : clnTop;\n    clnTop = isTop ? Math.floor(clnTop / slotInterval) * slotInterval : clnTop;\n    clnHeight = clnTop + clnHeight >= viewElement.scrollHeight ? viewElement.scrollHeight - clnTop : Math.ceil(clnHeight / slotInterval) * slotInterval;\n    var styles = {\n      height: formatUnit(clnHeight < this.actionObj.cellHeight ? Math.floor(clnHeight / slotInterval) * slotInterval : clnHeight),\n      top: formatUnit(clnHeight < this.actionObj.cellHeight && isTop ? Math.ceil(clnTop / slotInterval) * slotInterval : clnTop),\n      left: '0px',\n      right: '0px',\n      width: '100%'\n    };\n    return styles;\n  };\n\n  Resize.prototype.getLeftRightStyles = function (e, isLeft) {\n    var styles = {};\n    var isTimelineView = this.parent.activeView.isTimelineView();\n    var isTimeViews = ['TimelineDay', 'TimelineWeek', 'TimelineWorkWeek'].indexOf(this.parent.currentView) > -1 && this.parent.activeViewOptions.timeScale.enable;\n    var slotInterval = this.actionObj.cellWidth / this.actionObj.slotInterval * this.actionObj.interval;\n    var pageWidth = isLeft ? this.actionObj.X - this.actionObj.pageX : this.actionObj.pageX - this.actionObj.X;\n    var targetWidth = isTimelineView ? this.actionObj.element.getBoundingClientRect().width / this.actionObj.cellWidth * this.actionObj.cellWidth : this.parent.currentView === 'Month' ? this.actionObj.element.getBoundingClientRect().width : Math.ceil(this.actionObj.element.getBoundingClientRect().width / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n    var offsetWidth = targetWidth + Math.ceil(pageWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n    var left = this.parent.enableRtl ? parseInt(this.actionObj.element.style.right, 10) : this.actionObj.clone.offsetLeft;\n\n    if (isTimeViews) {\n      offsetWidth = targetWidth + Math.ceil(pageWidth / slotInterval) * slotInterval;\n      offsetWidth = Math.round((left + offsetWidth) / slotInterval) * slotInterval - left;\n      this.actionObj.event[this.parent.eventFields.isAllDay] = false;\n    }\n\n    var width = !isLeft && offsetWidth + this.actionObj.clone.offsetLeft > this.scrollArgs.width ? this.actionObj.clone.getBoundingClientRect().width : offsetWidth < this.actionObj.cellWidth ? offsetWidth : offsetWidth;\n\n    if (this.parent.enableRtl) {\n      var rightValue = isTimelineView ? parseInt(this.actionObj.element.style.right, 10) : -(offsetWidth - this.actionObj.cellWidth);\n      rightValue = isTimelineView ? rightValue : isLeft ? 0 : rightValue > 0 ? 0 : rightValue;\n\n      if (isTimelineView && !isLeft) {\n        rightValue = Math.ceil((this.actionObj.element.offsetLeft + (this.actionObj.element.getBoundingClientRect().width + (this.actionObj.pageX - this.actionObj.X))) / slotInterval) * slotInterval;\n        rightValue = rightValue < 0 ? Math.abs(rightValue) : -rightValue;\n      }\n\n      rightValue = rightValue >= this.scrollArgs.width ? this.scrollArgs.width - this.actionObj.cellWidth : rightValue;\n      styles.right = formatUnit(rightValue);\n      width = width + rightValue > this.scrollArgs.width ? this.actionObj.clone.getBoundingClientRect().width : width;\n    } else {\n      var offsetLeft = isLeft ? this.actionObj.element.offsetLeft - (this.actionObj.X - this.actionObj.pageX) : this.parent.enableRtl ? this.actionObj.element.offsetLeft : 0;\n\n      if (isTimelineView) {\n        offsetLeft = isLeft ? offsetLeft : parseInt(this.actionObj.clone.style.left, 10);\n\n        if (this.parent.enableRtl) {\n          offsetLeft = !isLeft ? this.actionObj.pageX < this.actionObj.X - this.actionObj.clone.getBoundingClientRect().width ? parseInt(this.actionObj.clone.style.right, 10) : offsetLeft : offsetLeft;\n        } else {\n          offsetLeft = isLeft ? this.actionObj.pageX > this.actionObj.X + this.actionObj.clone.getBoundingClientRect().width && this.actionObj.clone.getBoundingClientRect().width === this.actionObj.cellWidth ? parseInt(this.actionObj.clone.style.left, 10) : offsetLeft : offsetLeft;\n        }\n      }\n\n      var leftValue = offsetLeft;\n      offsetLeft = isTimelineView ? isTimeViews ? isLeft ? Math.floor(offsetLeft / slotInterval) * slotInterval : offsetLeft : Math.floor(offsetLeft / this.actionObj.cellWidth) * this.actionObj.cellWidth : Math.ceil(Math.abs(offsetLeft) / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n\n      if (offsetLeft < 0) {\n        offsetLeft = 0;\n        width = this.actionObj.clone.getBoundingClientRect().width;\n      }\n\n      var cloneWidth = Math.ceil(this.actionObj.clone.getBoundingClientRect().width / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n\n      if (isLeft) {\n        styles.left = formatUnit(isTimelineView ? offsetLeft : isLeft ? leftValue < 0 ? -offsetLeft : Math.ceil((targetWidth - cloneWidth) / this.actionObj.cellWidth) * this.actionObj.cellWidth : offsetLeft);\n      }\n    }\n\n    styles.width = formatUnit(width);\n    return styles;\n  };\n\n  Resize.prototype.resizeValidation = function (e) {\n    var pages = this.getPageCoordinates(e);\n    var viewDimension = this.getContentAreaDimension();\n    var isTimeScale = this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.timeScale.enable;\n    var cellWidth = this.actionObj.cellWidth;\n    var resizeValidation = false;\n\n    if (this.resizeEdges.left) {\n      if (pages.pageX < viewDimension.leftOffset && pages.pageX >= viewDimension.left && isTimeScale) {\n        cellWidth = 0;\n      }\n\n      resizeValidation = pages.pageX - cellWidth >= viewDimension.left;\n    }\n\n    if (this.resizeEdges.right) {\n      if (pages.pageX > viewDimension.rightOffset && pages.pageX <= viewDimension.right && isTimeScale) {\n        cellWidth = 0;\n      }\n\n      resizeValidation = pages.pageX + cellWidth <= viewDimension.right;\n    }\n\n    if (this.resizeEdges.top) {\n      resizeValidation = this.actionObj.clone.offsetTop >= viewDimension.top;\n    }\n\n    if (this.resizeEdges.bottom) {\n      resizeValidation = this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight <= this.scrollArgs.height;\n    }\n\n    return resizeValidation;\n  };\n  /**\n   * Get module name\n   *\n   * @returns {string} Returns the module name..\n   */\n\n\n  Resize.prototype.getModuleName = function () {\n    return 'resize';\n  };\n\n  return Resize;\n}(ActionBase);\n\nexport { Resize };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","addClass","Browser","EventHandler","remove","closest","extend","formatUnit","setStyleAttribute","isNullOrUndefined","ActionBase","MonthEvent","util","event","cls","Resize","_super","apply","arguments","wireResizeEvent","element","resizeElement","slice","call","querySelectorAll","EVENT_RESIZE_CLASS","_i","resizeElement_1","length","element_1","add","touchStartEvent","resizeStart","resizeHelper","parent","activeViewOptions","group","resources","allowGroupEdit","i","len","actionObj","originalElement","cloneElement","createCloneElement","clone","e","_this","action","slotInterval","timeScale","interval","slotCount","resizeTarget","target","APPOINTMENT_CLASS","eventBase","getEventByGuid","getAttribute","eventObj","resizeArgs","cancel","data","scroll","enable","scrollBy","timeDelay","trigger","resizeEventArgs","actionClass","uiStateValues","resizeEdges","left","classList","contains","LEFT_RESIZE_HANDLER","right","RIGHT_RESIZE_HANDLER","top","TOP_RESIZE_HANDLER","bottom","BOTTOM_RESIZE_HANDLER","groupIndex","isGroupAdaptive","workCell","querySelector","WORK_CELLS_CLASS","getBoundingClientRect","cellWidth","width","cellHeight","height","hRows","headerRows","map","row","option","activeView","isTimelineView","indexOf","tr","getContentTable","noOfDays","tdCollections","children","tdCollections_1","td","parseInt","trRect","pages","getPageCoordinates","X","pageX","Y","pageY","start","Date","eventFields","startTime","getTime","end","endTime","getOriginalElement","currentView","daysVariation","monthEvent","viewElement","CONTENT_WRAP_CLASS","scrollArgs","scrollWidth","scrollHeight","document","touchMoveEvent","resizing","touchEndEvent","resizeStop","quickPopup","quickPopupHide","RESIZE_CLONE_CLASS","DISABLE_DATES","updateScrollPosition","updateResizingDirection","monthResizing","resizeValidation","leftStyles","getLeftRightStyles","_a","horizontalResizing","enableRtl","rightStyles","_b","_c","topStyles","getTopBottomStyles","_d","_e","verticalResizing","bottomStyles","_f","_g","removeCloneElement","elementFromPoint","resizeTime","getDateFromElement","isSameCell","addDays","event_1","getUpdatedEvent","yearEventsRendering","dynamicEventsRendering","updateOriginalElement","eventWrappers","CLONE_ELEMENT_CLASS","eventWrappers_1","wrapper","endDate","monthDiff","getMonthDiff","getEventCount","getMonth","count","dynamicYearlyEventsRendering","startDate","months","getFullYear","month","eventData","eventStart","eventEnd","monthStart","selectedDate","monthEnd","Math","ceil","MS_PER_DAY","clearInterval","scrollInterval","removeCloneElementClasses","getChangedData","rowAutoHeight","virtualScrollModule","byGroupID","crudModule","crudObj","sourceEvent","resourceBase","lastResourceLevel","targetEvent","isCrudAction","saveChangedData","isTop","offsetValue","offsetTop","offsetHeight","minutes","offsetParent","resetTime","setHours","getStartHour","getHours","setMinutes","getMinutes","calculateIntervalTime","updateTimePosition","isLeft","isDateHeader","headerName","isTimeViews","isTimelineMonth","isWithoutScale","rows","cellIndex","isLastCell","pixelsPerMinute","offset","parseFloat","style","round","tdCollections_2","floor","cellOffsetWidth","offsetWidth","getIndex","resizeDate","renderDates","getSeconds","spanMinutes","cloneIndex","originalWidth","dayIndex","isTimeScaleViews","resizeEnd","clnHeight","clnTop","styles","pageWidth","targetWidth","offsetLeft","isAllDay","rightValue","abs","leftValue","cloneWidth","viewDimension","getContentAreaDimension","isTimeScale","leftOffset","rightOffset","getModuleName"],"sources":["C:/Users/shahj/OneDrive/Documents/GitHub/Multifunctional-React-Dashboard/node_modules/@syncfusion/ej2-schedule/src/schedule/actions/resize.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { addClass, Browser, EventHandler, remove, closest, extend, formatUnit, setStyleAttribute, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { ActionBase } from '../actions/action-base';\nimport { MonthEvent } from '../event-renderer/month';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Schedule events resize actions\n */\nvar Resize = /** @class */ (function (_super) {\n    __extends(Resize, _super);\n    function Resize() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Resize.prototype.wireResizeEvent = function (element) {\n        var resizeElement = [].slice.call(element.querySelectorAll('.' + cls.EVENT_RESIZE_CLASS));\n        for (var _i = 0, resizeElement_1 = resizeElement; _i < resizeElement_1.length; _i++) {\n            var element_1 = resizeElement_1[_i];\n            EventHandler.add(element_1, Browser.touchStartEvent, this.resizeStart, this);\n        }\n    };\n    Resize.prototype.resizeHelper = function () {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && this.parent.activeViewOptions.group.allowGroupEdit) {\n            for (var i = 0, len = this.actionObj.originalElement.length; i < len; i++) {\n                var cloneElement = this.createCloneElement(this.actionObj.originalElement[i]);\n                this.actionObj.cloneElement[i] = cloneElement;\n                if (this.actionObj.element === this.actionObj.originalElement[i]) {\n                    this.actionObj.clone = cloneElement;\n                }\n            }\n        }\n        else {\n            if (this.actionObj.element) {\n                this.actionObj.clone = this.createCloneElement(this.actionObj.element);\n            }\n            this.actionObj.cloneElement = [this.actionObj.clone];\n            this.actionObj.originalElement = [this.actionObj.element];\n        }\n    };\n    Resize.prototype.resizeStart = function (e) {\n        var _this = this;\n        this.actionObj.action = 'resize';\n        this.actionObj.slotInterval = this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\n        this.actionObj.interval = this.actionObj.slotInterval;\n        var resizeTarget = closest(e.target, '.' + cls.EVENT_RESIZE_CLASS);\n        this.actionObj.element = closest(resizeTarget, '.' + cls.APPOINTMENT_CLASS);\n        this.actionObj.event = this.parent.eventBase.getEventByGuid(this.actionObj.element.getAttribute('data-guid'));\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var resizeArgs = {\n            cancel: false,\n            data: eventObj,\n            element: this.actionObj.element,\n            event: e,\n            interval: this.actionObj.interval,\n            scroll: { enable: true, scrollBy: 30, timeDelay: 100 }\n        };\n        this.parent.trigger(event.resizeStart, resizeArgs, function (resizeEventArgs) {\n            if (resizeEventArgs.cancel) {\n                return;\n            }\n            _this.actionClass('addClass');\n            _this.parent.uiStateValues.action = true;\n            _this.resizeEdges = {\n                left: resizeTarget.classList.contains(cls.LEFT_RESIZE_HANDLER),\n                right: resizeTarget.classList.contains(cls.RIGHT_RESIZE_HANDLER),\n                top: resizeTarget.classList.contains(cls.TOP_RESIZE_HANDLER),\n                bottom: resizeTarget.classList.contains(cls.BOTTOM_RESIZE_HANDLER)\n            };\n            _this.actionObj.groupIndex = _this.parent.uiStateValues.isGroupAdaptive ? _this.parent.uiStateValues.groupIndex : 0;\n            var workCell = _this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS).getBoundingClientRect();\n            _this.actionObj.cellWidth = workCell.width;\n            _this.actionObj.cellHeight = workCell.height;\n            var hRows = _this.parent.activeViewOptions.headerRows.map(function (row) { return row.option; });\n            if (_this.parent.activeView.isTimelineView() && hRows.length > 0 && ['Date', 'Hour'].indexOf(hRows.slice(-1)[0]) < 0) {\n                var tr = _this.parent.getContentTable().querySelector('tr');\n                var noOfDays = 0;\n                var tdCollections = [].slice.call(tr.children);\n                for (var _i = 0, tdCollections_1 = tdCollections; _i < tdCollections_1.length; _i++) {\n                    var td = tdCollections_1[_i];\n                    noOfDays += parseInt(td.getAttribute('colspan'), 10);\n                }\n                var trRect = tr.getBoundingClientRect();\n                _this.actionObj.cellWidth = trRect.width / noOfDays;\n                _this.actionObj.cellHeight = trRect.height;\n            }\n            var pages = _this.getPageCoordinates(e);\n            _this.actionObj.X = pages.pageX;\n            _this.actionObj.Y = pages.pageY;\n            _this.actionObj.groupIndex = parseInt(_this.actionObj.element.getAttribute('data-group-index') || '0', 10);\n            _this.actionObj.interval = resizeEventArgs.interval;\n            _this.actionObj.scroll = resizeEventArgs.scroll;\n            _this.actionObj.start = new Date(eventObj[_this.parent.eventFields.startTime].getTime());\n            _this.actionObj.end = new Date(eventObj[_this.parent.eventFields.endTime].getTime());\n            _this.actionObj.originalElement = _this.getOriginalElement(_this.actionObj.element);\n            if (_this.parent.currentView === 'Month') {\n                _this.daysVariation = -1;\n                _this.monthEvent = new MonthEvent(_this.parent);\n            }\n            var viewElement = _this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            _this.scrollArgs = { element: viewElement, width: viewElement.scrollWidth, height: viewElement.scrollHeight };\n            EventHandler.add(document, Browser.touchMoveEvent, _this.resizing, _this);\n            EventHandler.add(document, Browser.touchEndEvent, _this.resizeStop, _this);\n        });\n    };\n    Resize.prototype.resizing = function (e) {\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide();\n        }\n        if (this.parent.element.querySelectorAll('.' + cls.RESIZE_CLONE_CLASS).length === 0) {\n            this.resizeHelper();\n        }\n        if ((!isNullOrUndefined(e.target)) && e.target.classList.contains(cls.DISABLE_DATES)) {\n            return;\n        }\n        var pages = this.getPageCoordinates(e);\n        this.actionObj.pageX = pages.pageX;\n        this.actionObj.pageY = pages.pageY;\n        this.updateScrollPosition(e);\n        this.updateResizingDirection(e);\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var resizeArgs = {\n            cancel: false,\n            data: eventObj,\n            element: this.actionObj.element,\n            event: e,\n            startTime: this.actionObj.start,\n            endTime: this.actionObj.end\n        };\n        if (this.parent.group.resources.length > 0) {\n            resizeArgs.groupIndex = this.actionObj.groupIndex;\n        }\n        this.parent.trigger(event.resizing, resizeArgs);\n    };\n    Resize.prototype.updateResizingDirection = function (e) {\n        if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineYear') {\n            this.monthResizing();\n            return;\n        }\n        var resizeValidation = this.resizeValidation(e);\n        if (this.resizeEdges.left) {\n            if (resizeValidation) {\n                var leftStyles = this.getLeftRightStyles(e, true);\n                if (parseInt(leftStyles.width, 10) < 1) {\n                    return;\n                }\n                for (var _i = 0, _a = this.actionObj.cloneElement; _i < _a.length; _i++) {\n                    var cloneElement = _a[_i];\n                    setStyleAttribute(cloneElement, leftStyles);\n                    addClass([cloneElement], cls.LEFT_RESIZE_HANDLER);\n                }\n            }\n            this.horizontalResizing(!this.parent.enableRtl);\n        }\n        if (this.resizeEdges.right) {\n            if (resizeValidation) {\n                var rightStyles = this.getLeftRightStyles(e, false);\n                if (parseInt(rightStyles.width, 10) < 1) {\n                    return;\n                }\n                for (var _b = 0, _c = this.actionObj.cloneElement; _b < _c.length; _b++) {\n                    var cloneElement = _c[_b];\n                    setStyleAttribute(cloneElement, rightStyles);\n                    addClass([cloneElement], cls.RIGHT_RESIZE_HANDLER);\n                }\n            }\n            this.horizontalResizing(this.parent.enableRtl);\n        }\n        if (this.resizeEdges.top) {\n            if (resizeValidation) {\n                var topStyles = this.getTopBottomStyles(e, true);\n                if (parseInt(topStyles.height, 10) < 1) {\n                    return;\n                }\n                for (var _d = 0, _e = this.actionObj.cloneElement; _d < _e.length; _d++) {\n                    var cloneElement = _e[_d];\n                    setStyleAttribute(cloneElement, topStyles);\n                    addClass([cloneElement], cls.TOP_RESIZE_HANDLER);\n                }\n            }\n            this.verticalResizing(true);\n        }\n        if (this.resizeEdges.bottom) {\n            if (resizeValidation) {\n                var bottomStyles = this.getTopBottomStyles(e, false);\n                if (parseInt(bottomStyles.height, 10) < 1) {\n                    return;\n                }\n                for (var _f = 0, _g = this.actionObj.cloneElement; _f < _g.length; _f++) {\n                    var cloneElement = _g[_f];\n                    setStyleAttribute(cloneElement, bottomStyles);\n                    addClass([cloneElement], cls.BOTTOM_RESIZE_HANDLER);\n                }\n            }\n            this.verticalResizing(false);\n        }\n    };\n    Resize.prototype.monthResizing = function () {\n        this.removeCloneElement();\n        if (isNullOrUndefined(this.actionObj.pageX) || isNullOrUndefined(this.actionObj.pageY)) {\n            return;\n        }\n        var td = document.elementFromPoint(this.actionObj.pageX, this.actionObj.pageY);\n        if (isNullOrUndefined(td)) {\n            return;\n        }\n        var resizeTime = this.parent.getDateFromElement(td);\n        var isSameCell = this.parent.activeViewOptions.group.resources.length > 0 ?\n            parseInt(td.getAttribute('data-group-index'), 10) === this.actionObj.groupIndex : true;\n        var startTime = new Date(this.actionObj.event[this.parent.eventFields.startTime].getTime());\n        var endTime = new Date(this.actionObj.event[this.parent.eventFields.endTime].getTime());\n        if ((!this.parent.enableRtl && this.resizeEdges.left) || (this.parent.enableRtl && this.resizeEdges.right)\n            || this.resizeEdges.top) {\n            startTime = resizeTime;\n        }\n        else if ((!this.parent.enableRtl && this.resizeEdges.right) || (this.parent.enableRtl && this.resizeEdges.left)\n            || this.resizeEdges.bottom) {\n            endTime = util.addDays(resizeTime, 1);\n        }\n        if (isSameCell && startTime < endTime) {\n            this.actionObj.start = startTime;\n            this.actionObj.end = endTime;\n            var event_1 = this.getUpdatedEvent(this.actionObj.start, this.actionObj.end, this.actionObj.event);\n            if (this.parent.currentView === 'TimelineYear') {\n                this.yearEventsRendering(event_1);\n            }\n            else {\n                this.dynamicEventsRendering(event_1);\n            }\n            this.updateOriginalElement(this.actionObj.clone);\n        }\n    };\n    Resize.prototype.yearEventsRendering = function (event) {\n        var eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CLONE_ELEMENT_CLASS));\n        for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {\n            var wrapper = eventWrappers_1[_i];\n            remove(wrapper);\n        }\n        var endDate = new Date(event[this.parent.eventFields.endTime]);\n        var monthDiff = 0;\n        if (this.parent.activeViewOptions.group.resources.length === 0) {\n            monthDiff = this.getMonthDiff(event[this.parent.eventFields.startTime], util.addDays(endDate, -1));\n        }\n        for (var i = 0; i <= monthDiff; i++) {\n            var eventObj = void 0;\n            if (this.parent.activeViewOptions.group.resources.length === 0) {\n                eventObj = this.getEventCount(event, this.actionObj.start.getMonth() + i);\n            }\n            else {\n                eventObj = extend({}, event, null, true);\n                endDate = this.resizeEdges.left || this.resizeEdges.right ? util.addDays(endDate, -1) : endDate;\n                eventObj.count = this.getMonthDiff(event[this.parent.eventFields.startTime], endDate) + 1;\n            }\n            this.dynamicYearlyEventsRendering(eventObj, true);\n        }\n    };\n    Resize.prototype.getMonthDiff = function (startDate, endDate) {\n        var months;\n        months = (endDate.getFullYear() - startDate.getFullYear()) * 12;\n        months -= startDate.getMonth();\n        months += endDate.getMonth();\n        return months <= 0 ? 0 : months;\n    };\n    Resize.prototype.getEventCount = function (eventObj, month) {\n        var eventData = extend({}, eventObj, null, true);\n        var eventStart = eventData[this.parent.eventFields.startTime];\n        var eventEnd = eventData[this.parent.eventFields.endTime];\n        var monthStart = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n        var monthEnd = util.addDays(new Date(this.parent.selectedDate.getFullYear(), month + 1, 0), 1);\n        var count = 1;\n        if (eventStart.getTime() < monthStart.getTime()) {\n            eventData[this.parent.eventFields.startTime] = monthStart;\n        }\n        if (eventEnd.getTime() > monthEnd.getTime()) {\n            eventData[this.parent.eventFields.endTime] = monthEnd;\n        }\n        if (this.parent.activeViewOptions.group.resources.length === 0) {\n            count = Math.ceil((eventData[this.parent.eventFields.endTime].getTime() -\n                eventData[this.parent.eventFields.startTime].getTime()) / util.MS_PER_DAY);\n        }\n        eventData.count = count;\n        return eventData;\n    };\n    Resize.prototype.resizeStop = function (e) {\n        var _this = this;\n        EventHandler.remove(document, Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(document, Browser.touchEndEvent, this.resizeStop);\n        clearInterval(this.actionObj.scrollInterval);\n        this.actionObj.scrollInterval = null;\n        this.removeCloneElementClasses();\n        this.removeCloneElement();\n        this.actionClass('removeClass');\n        this.parent.uiStateValues.action = false;\n        var resizeArgs = { cancel: false, data: this.getChangedData(), element: this.actionObj.element, event: e };\n        this.parent.trigger(event.resizeStop, resizeArgs, function (resizeEventArgs) {\n            if (resizeEventArgs.cancel) {\n                return;\n            }\n            if (_this.parent.activeViewOptions.group.resources.length > 0 && !_this.parent.rowAutoHeight\n                && !_this.parent.activeViewOptions.group.allowGroupEdit && !_this.parent.virtualScrollModule\n                && _this.parent.activeViewOptions.group.byGroupID) {\n                _this.parent.crudModule.crudObj.sourceEvent =\n                    [_this.parent.resourceBase.lastResourceLevel[parseInt(resizeEventArgs.element.getAttribute('data-group-index'), 10)]];\n                _this.parent.crudModule.crudObj.targetEvent = _this.parent.crudModule.crudObj.sourceEvent;\n                _this.parent.crudModule.crudObj.isCrudAction = true;\n            }\n            _this.saveChangedData(resizeEventArgs);\n        });\n    };\n    Resize.prototype.verticalResizing = function (isTop) {\n        var offsetValue = this.actionObj.clone.offsetTop;\n        if (!isTop) {\n            offsetValue += this.actionObj.clone.offsetHeight;\n        }\n        var minutes = (offsetValue / this.actionObj.cellHeight) * this.actionObj.slotInterval;\n        var element = this.actionObj.clone.offsetParent;\n        if (isNullOrUndefined(element)) {\n            return;\n        }\n        var resizeTime = util.resetTime(this.parent.getDateFromElement(element));\n        resizeTime.setHours(this.parent.activeView.getStartHour().getHours());\n        resizeTime.setMinutes(minutes + this.parent.activeView.getStartHour().getMinutes());\n        if (isTop) {\n            this.actionObj.start = this.calculateIntervalTime(resizeTime);\n        }\n        else {\n            this.actionObj.end = this.calculateIntervalTime(resizeTime);\n        }\n        this.updateTimePosition(resizeTime);\n    };\n    Resize.prototype.horizontalResizing = function (isLeft) {\n        var eventStart = new Date(this.actionObj.event[this.parent.eventFields.startTime].getTime());\n        var eventEnd = new Date(this.actionObj.event[this.parent.eventFields.endTime].getTime());\n        var resizeTime;\n        var isDateHeader = false;\n        var headerName = this.parent.currentView;\n        var isTimeViews = ['TimelineDay', 'TimelineWeek', 'TimelineWorkWeek'].indexOf(this.parent.currentView) > -1;\n        var isTimelineMonth = this.parent.currentView === 'TimelineMonth';\n        var isWithoutScale = isTimelineMonth || isTimeViews && !this.parent.activeViewOptions.timeScale.enable;\n        if (this.parent.activeView.isTimelineView()) {\n            var tr = this.parent.getContentTable().querySelector('tr');\n            if (this.parent.activeViewOptions.headerRows.length > 0) {\n                var rows = this.parent.activeViewOptions.headerRows.map(function (row) { return row.option; });\n                headerName = rows.slice(-1)[0];\n                if (isTimelineMonth && headerName === 'Hour') {\n                    headerName = rows.slice(-2)[0] || 'Month';\n                }\n            }\n            resizeTime = isLeft ? eventStart : eventEnd;\n            var cellIndex = 0;\n            var tdCollections = [].slice.call(tr.children);\n            var isLastCell = false;\n            var pixelsPerMinute = this.actionObj.cellWidth / (this.parent.activeViewOptions.timeScale.interval /\n                this.parent.activeViewOptions.timeScale.slotCount);\n            var offset = parseFloat(this.parent.enableRtl ? this.actionObj.clone.style.right :\n                this.actionObj.clone.style.left);\n            offset = Math.round(offset / pixelsPerMinute) * pixelsPerMinute;\n            if (['Year', 'Month', 'Week', 'Date'].indexOf(headerName) !== -1) {\n                var noOfDays = 0;\n                for (var _i = 0, tdCollections_2 = tdCollections; _i < tdCollections_2.length; _i++) {\n                    var td = tdCollections_2[_i];\n                    noOfDays += parseInt(td.getAttribute('colspan'), 10);\n                }\n                var offsetValue = this.parent.enableRtl ? parseInt(this.actionObj.clone.style.right, 10) :\n                    parseInt(this.actionObj.clone.style.left, 10);\n                offsetValue = Math.round(offsetValue / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n                if (!isLeft) {\n                    offsetValue += (this.actionObj.clone.getBoundingClientRect().width - this.actionObj.cellWidth);\n                }\n                cellIndex = Math.floor(offsetValue / Math.floor(tr.getBoundingClientRect().width / noOfDays));\n                isDateHeader = isTimeViews && headerName === 'Date';\n                cellIndex = isLeft ? cellIndex : isTimelineMonth ? cellIndex + 1 : cellIndex;\n                isLastCell = cellIndex === tdCollections.length;\n                cellIndex = (cellIndex < 0) ? 0 : (cellIndex >= noOfDays) ? noOfDays - 1 : cellIndex;\n            }\n            else {\n                var cellWidth = this.actionObj.cellWidth;\n                cellIndex = isLeft ? Math.floor(offset / this.actionObj.cellWidth) :\n                    Math.ceil((offset + (this.actionObj.clone.getBoundingClientRect().width - cellWidth)) / this.actionObj.cellWidth);\n                if (this.parent.enableRtl) {\n                    var cellOffsetWidth = 0;\n                    if (headerName === 'TimelineMonth' || (!this.parent.activeViewOptions.timeScale.enable &&\n                        !isTimelineMonth)) {\n                        cellOffsetWidth = this.actionObj.cellWidth;\n                    }\n                    var offsetWidth = (Math.floor(offset / this.actionObj.cellWidth) *\n                        this.actionObj.cellWidth) + (isLeft ? 0 : this.actionObj.clone.getBoundingClientRect().width - cellOffsetWidth);\n                    cellIndex = Math.floor(offsetWidth / this.actionObj.cellWidth);\n                }\n                isLastCell = cellIndex === tdCollections.length;\n                cellIndex = this.getIndex(cellIndex);\n            }\n            var resizeDate = void 0;\n            if (['Year', 'Month', 'Week', 'Date'].indexOf(headerName) !== -1) {\n                resizeDate = new Date(this.parent.activeView.renderDates[cellIndex].getTime());\n            }\n            else {\n                resizeDate = this.parent.getDateFromElement(tr.children[cellIndex]);\n            }\n            if (['TimelineMonth', 'Year', 'Month', 'Week', 'Date'].indexOf(headerName) !== -1 ||\n                !this.parent.activeViewOptions.timeScale.enable) {\n                resizeTime = new Date(resizeDate.setHours(resizeTime.getHours(), resizeTime.getMinutes(), resizeTime.getSeconds()));\n            }\n            else {\n                if (!isLeft) {\n                    offset += this.actionObj.clone.getBoundingClientRect().width;\n                }\n                var spanMinutes = Math.ceil((this.actionObj.slotInterval / this.actionObj.cellWidth) *\n                    (offset - Math.floor(offset / this.actionObj.cellWidth) * this.actionObj.cellWidth));\n                spanMinutes = (isLastCell || (!isLeft && spanMinutes === 0)) ? this.actionObj.slotInterval : spanMinutes;\n                resizeTime = new Date(resizeDate.getTime());\n                resizeTime.setMinutes(resizeTime.getMinutes() + spanMinutes);\n                this.updateTimePosition(resizeTime);\n            }\n        }\n        else {\n            var cloneIndex = closest(this.actionObj.clone, 'td').cellIndex;\n            var originalWidth = Math.ceil((isLeft ? this.actionObj.element.getBoundingClientRect().width : 0) /\n                this.actionObj.cellWidth) * this.actionObj.cellWidth;\n            var noOfDays = Math.ceil((this.actionObj.clone.getBoundingClientRect().width - originalWidth) /\n                this.actionObj.cellWidth);\n            var tr = closest(this.actionObj.clone, 'tr');\n            var dayIndex = isLeft ? cloneIndex - noOfDays : cloneIndex + noOfDays - 1;\n            dayIndex = this.getIndex(dayIndex);\n            resizeTime = this.parent.getDateFromElement(tr.children[dayIndex]);\n            if (isLeft) {\n                resizeTime.setHours(eventStart.getHours(), eventStart.getMinutes(), eventStart.getSeconds());\n            }\n            else {\n                resizeTime.setHours(eventEnd.getHours(), eventEnd.getMinutes(), eventEnd.getSeconds());\n            }\n        }\n        if (isLeft) {\n            if ((eventEnd.getTime() - resizeTime.getTime()) <= 0) {\n                resizeTime = isWithoutScale ? util.resetTime(eventEnd) : eventStart;\n            }\n            this.actionObj.start = this.parent.activeViewOptions.timeScale.enable ? this.calculateIntervalTime(resizeTime) : resizeTime;\n        }\n        else {\n            var isTimeScaleViews = isTimeViews && this.parent.activeViewOptions.timeScale.enable;\n            var resizeEnd = ((!isTimeScaleViews || isDateHeader || isTimeViews && ['Week', 'Month', 'Year'].indexOf(headerName) > -1)\n                && resizeTime.getHours() === 0 && resizeTime.getMinutes() === 0) ? util.addDays(resizeTime, 1) : resizeTime;\n            if (isWithoutScale && (resizeEnd.getTime() - eventStart.getTime()) <= 0) {\n                resizeEnd = util.addDays(util.resetTime(eventStart), 1);\n            }\n            this.actionObj.end = this.parent.activeViewOptions.timeScale.enable && this.parent.currentView !== 'Month' ?\n                this.calculateIntervalTime(resizeEnd) : resizeEnd;\n        }\n    };\n    Resize.prototype.getTopBottomStyles = function (e, isTop) {\n        var viewElement = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var slotInterval = (this.actionObj.cellHeight / this.actionObj.slotInterval) * this.actionObj.interval;\n        var clnHeight = isTop ? this.actionObj.element.offsetHeight + (this.actionObj.Y - this.actionObj.pageY) :\n            this.actionObj.element.offsetHeight + (this.actionObj.pageY - this.actionObj.Y);\n        var clnTop = isTop ? this.actionObj.element.offsetTop -\n            (this.actionObj.Y - this.actionObj.pageY) : this.actionObj.clone.offsetTop;\n        clnHeight = (clnTop < 0) ? this.actionObj.clone.offsetHeight :\n            (this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight) > this.scrollArgs.height ?\n                this.actionObj.clone.offsetHeight : clnHeight;\n        clnTop = (clnTop < 0) ? 0 : clnTop;\n        clnTop = isTop ? Math.floor(clnTop / slotInterval) * slotInterval : clnTop;\n        clnHeight = clnTop + clnHeight >= viewElement.scrollHeight ? viewElement.scrollHeight - clnTop :\n            Math.ceil(clnHeight / slotInterval) * slotInterval;\n        var styles = {\n            height: formatUnit(clnHeight < this.actionObj.cellHeight ? Math.floor(clnHeight / slotInterval) * slotInterval : clnHeight),\n            top: formatUnit((clnHeight < this.actionObj.cellHeight && isTop) ? Math.ceil(clnTop / slotInterval) * slotInterval : clnTop),\n            left: '0px', right: '0px', width: '100%'\n        };\n        return styles;\n    };\n    Resize.prototype.getLeftRightStyles = function (e, isLeft) {\n        var styles = {};\n        var isTimelineView = this.parent.activeView.isTimelineView();\n        var isTimeViews = ['TimelineDay', 'TimelineWeek', 'TimelineWorkWeek'].indexOf(this.parent.currentView) > -1 &&\n            this.parent.activeViewOptions.timeScale.enable;\n        var slotInterval = (this.actionObj.cellWidth / this.actionObj.slotInterval) * this.actionObj.interval;\n        var pageWidth = isLeft ? (this.actionObj.X - this.actionObj.pageX) : (this.actionObj.pageX - this.actionObj.X);\n        var targetWidth = isTimelineView ?\n            (this.actionObj.element.getBoundingClientRect().width / this.actionObj.cellWidth) * this.actionObj.cellWidth :\n            this.parent.currentView === 'Month' ? this.actionObj.element.getBoundingClientRect().width :\n                Math.ceil(this.actionObj.element.getBoundingClientRect().width / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n        var offsetWidth = targetWidth + (Math.ceil(pageWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth);\n        var left = (this.parent.enableRtl) ? parseInt(this.actionObj.element.style.right, 10) : this.actionObj.clone.offsetLeft;\n        if (isTimeViews) {\n            offsetWidth = targetWidth + (Math.ceil(pageWidth / slotInterval) * slotInterval);\n            offsetWidth = (Math.round((left + offsetWidth) / slotInterval) * slotInterval) - left;\n            this.actionObj.event[this.parent.eventFields.isAllDay] = false;\n        }\n        var width = !isLeft && ((offsetWidth + this.actionObj.clone.offsetLeft > this.scrollArgs.width)) ?\n            this.actionObj.clone.getBoundingClientRect().width : (offsetWidth < this.actionObj.cellWidth) ? offsetWidth : offsetWidth;\n        if (this.parent.enableRtl) {\n            var rightValue = isTimelineView ? parseInt(this.actionObj.element.style.right, 10) :\n                -(offsetWidth - this.actionObj.cellWidth);\n            rightValue = isTimelineView ? rightValue : isLeft ? 0 : rightValue > 0 ? 0 : rightValue;\n            if (isTimelineView && !isLeft) {\n                rightValue = Math.ceil((this.actionObj.element.offsetLeft + (this.actionObj.element.getBoundingClientRect().width +\n                    (this.actionObj.pageX - this.actionObj.X))) / slotInterval) * slotInterval;\n                rightValue = rightValue < 0 ? Math.abs(rightValue) : -rightValue;\n            }\n            rightValue = rightValue >= this.scrollArgs.width ? this.scrollArgs.width - this.actionObj.cellWidth : rightValue;\n            styles.right = formatUnit(rightValue);\n            width = width + rightValue > this.scrollArgs.width ? this.actionObj.clone.getBoundingClientRect().width : width;\n        }\n        else {\n            var offsetLeft = isLeft ? this.actionObj.element.offsetLeft - (this.actionObj.X - this.actionObj.pageX) :\n                this.parent.enableRtl ? this.actionObj.element.offsetLeft : 0;\n            if (isTimelineView) {\n                offsetLeft = isLeft ? offsetLeft : parseInt(this.actionObj.clone.style.left, 10);\n                if (this.parent.enableRtl) {\n                    offsetLeft = !isLeft ? (this.actionObj.pageX < this.actionObj.X - this.actionObj.clone.getBoundingClientRect().width)\n                        ? parseInt(this.actionObj.clone.style.right, 10) : offsetLeft : offsetLeft;\n                }\n                else {\n                    offsetLeft = isLeft ? (this.actionObj.pageX > this.actionObj.X + this.actionObj.clone.getBoundingClientRect().width &&\n                        this.actionObj.clone.getBoundingClientRect().width === this.actionObj.cellWidth) ?\n                        parseInt(this.actionObj.clone.style.left, 10) : offsetLeft : offsetLeft;\n                }\n            }\n            var leftValue = offsetLeft;\n            offsetLeft = isTimelineView ? isTimeViews ? isLeft ? Math.floor(offsetLeft / slotInterval) * slotInterval : offsetLeft :\n                Math.floor(offsetLeft / this.actionObj.cellWidth) * this.actionObj.cellWidth :\n                Math.ceil(Math.abs(offsetLeft) / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n            if (offsetLeft < 0) {\n                offsetLeft = 0;\n                width = this.actionObj.clone.getBoundingClientRect().width;\n            }\n            var cloneWidth = Math.ceil(this.actionObj.clone.getBoundingClientRect().width / this.actionObj.cellWidth) *\n                this.actionObj.cellWidth;\n            if (isLeft) {\n                styles.left = formatUnit(isTimelineView ? offsetLeft : isLeft ? leftValue < 0 ? -offsetLeft :\n                    (Math.ceil((targetWidth - cloneWidth) / this.actionObj.cellWidth) * this.actionObj.cellWidth) : offsetLeft);\n            }\n        }\n        styles.width = formatUnit(width);\n        return styles;\n    };\n    Resize.prototype.resizeValidation = function (e) {\n        var pages = this.getPageCoordinates(e);\n        var viewDimension = this.getContentAreaDimension();\n        var isTimeScale = this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.timeScale.enable;\n        var cellWidth = this.actionObj.cellWidth;\n        var resizeValidation = false;\n        if (this.resizeEdges.left) {\n            if (pages.pageX < viewDimension.leftOffset && pages.pageX >= viewDimension.left && isTimeScale) {\n                cellWidth = 0;\n            }\n            resizeValidation = (pages.pageX - cellWidth) >= viewDimension.left;\n        }\n        if (this.resizeEdges.right) {\n            if (pages.pageX > viewDimension.rightOffset && pages.pageX <= viewDimension.right && isTimeScale) {\n                cellWidth = 0;\n            }\n            resizeValidation = (pages.pageX + cellWidth) <= viewDimension.right;\n        }\n        if (this.resizeEdges.top) {\n            resizeValidation = this.actionObj.clone.offsetTop >= viewDimension.top;\n        }\n        if (this.resizeEdges.bottom) {\n            resizeValidation = (this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight) <= this.scrollArgs.height;\n        }\n        return resizeValidation;\n    };\n    /**\n     * Get module name\n     *\n     * @returns {string} Returns the module name..\n     */\n    Resize.prototype.getModuleName = function () {\n        return 'resize';\n    };\n    return Resize;\n}(ActionBase));\nexport { Resize };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}