{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { extend, Browser, remove } from '@syncfusion/ej2-base';\nimport { PointData, ChartLocation } from '../../common/utils/helper';\nimport { getElement } from '@syncfusion/ej2-svg-base';\nimport { valueToCoefficient, removeElement, valueToPolarCoefficient, withInBounds } from '../../common/utils/helper';\nimport { BaseTooltip } from '../../common/user-interaction/tooltip';\nimport { tooltipRender, sharedTooltipRender } from '../../common/model/constants';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * `Tooltip` module is used to render the tooltip for chart series.\n */\n\nvar Tooltip =\n/** @class */\nfunction (_super) {\n  __extends(Tooltip, _super);\n  /**\n   * Constructor for tooltip module.\n   *\n   * @private\n   */\n\n\n  function Tooltip(chart) {\n    var _this = _super.call(this, chart) || this;\n\n    _this.commonXvalues = [];\n\n    _this.addEventListener();\n\n    return _this;\n  }\n  /**\n   * @hidden\n   */\n\n\n  Tooltip.prototype.addEventListener = function () {\n    if (this.chart.isDestroyed) {\n      return;\n    }\n\n    var cancelEvent = Browser.isPointer ? 'pointerleave' : 'mouseleave';\n    this.chart.on(cancelEvent, this.mouseLeaveHandler, this);\n    this.chart.on('tapHold', this.longPress, this);\n    this.chart.on(Browser.touchMoveEvent, this.mouseMoveHandler, this);\n    this.chart.on(Browser.touchEndEvent, this.mouseUpHandler, this);\n  };\n\n  Tooltip.prototype.mouseUpHandler = function () {\n    var chart = this.control;\n    var data = this.getData();\n    data.lierIndex = this.lierIndex;\n\n    if (chart.isTouch && !this.isSelected(chart) && (withInBounds(chart.mouseX, chart.mouseY, chart.chartAxisLayoutPanel.seriesClipRect) && chart.tooltip.shared || !chart.tooltip.shared)) {\n      if (!chart.crosshair.enable) {\n        this.tooltip();\n\n        if (chart.tooltip.fadeOutMode === 'Move') {\n          this.removeTooltip(chart.tooltip.fadeOutDuration);\n        }\n      } else if (chart.startMove && chart.tooltip.fadeOutMode === 'Move') {\n        this.removeTooltip(2000);\n      }\n    } else if (!this.findData(data, this.previousPoints[0]) && chart.tooltip.fadeOutMode === 'Click') {\n      this.removeTooltip(0);\n    }\n  };\n\n  Tooltip.prototype.mouseLeaveHandler = function () {\n    this.removeTooltip(this.chart.tooltip.fadeOutDuration);\n  };\n\n  Tooltip.prototype.mouseMoveHandler = function () {\n    var chart = this.chart;\n    chart.mouseX = chart.mouseX / chart.scaleX;\n    chart.mouseY = chart.mouseY / chart.scaleY; // Tooltip for chart series.\n\n    if (!chart.disableTrackTooltip && !this.isSelected(chart)) {\n      if (!chart.tooltip.shared && (!chart.isTouch || chart.startMove)) {\n        this.tooltip();\n      }\n\n      if (withInBounds(chart.mouseX, chart.mouseY, chart.chartAxisLayoutPanel.seriesClipRect)) {\n        if (chart.tooltip.shared && (!chart.isTouch || chart.startMove)) {\n          this.tooltip();\n        }\n      } else {\n        if (chart.tooltip.shared && chart.tooltip.fadeOutMode === 'Move') {\n          this.removeTooltip(this.chart.tooltip.fadeOutDuration);\n        }\n      }\n    }\n  };\n  /**\n   * Handles the long press on chart.\n   *\n   * @returns {boolean} false\n   * @private\n   */\n\n\n  Tooltip.prototype.longPress = function () {\n    var chart = this.chart;\n\n    if (chart.crosshair.enable && withInBounds(chart.mouseX, chart.mouseY, chart.chartAxisLayoutPanel.seriesClipRect)) {\n      this.tooltip();\n    }\n\n    return false;\n  };\n  /**\n   * Renders the tooltip.\n   *\n   * @returns {void}\n   */\n\n\n  Tooltip.prototype.tooltip = function () {\n    if (this.chart.stockChart && this.chart.stockChart.onPanning) {\n      this.removeTooltip(1000);\n      return null;\n    }\n\n    var elementId = this.chart.enableCanvas ? this.element.id + '_tooltip_group' : this.element.id + '_tooltip_svg';\n    var svgElement = this.getElement(elementId); // To prevent the disappearance of the tooltip, while resize the stock chart.\n\n    var isStockSvg = this.chart.stockChart && svgElement && svgElement.firstChild.childNodes.length > 1;\n    var isTooltip = svgElement && parseInt(svgElement.getAttribute('opacity'), 10) > 0 && !isStockSvg;\n    var tooltipDiv = this.getTooltipElement(isTooltip);\n\n    if (this.chart.enableCanvas && tooltipDiv) {\n      document.getElementById(this.chart.element.id + '_Secondary_Element').appendChild(tooltipDiv);\n      tooltipDiv.appendChild(document.getElementById(this.chart.element.id + '_tooltip_svg'));\n    }\n\n    if (!this.chart.tooltip.shared) {\n      this.renderSeriesTooltip(this.chart, !isTooltip, tooltipDiv);\n    } else {\n      this.renderGroupedTooltip(this.chart, !isTooltip, tooltipDiv);\n    }\n  };\n\n  Tooltip.prototype.findHeader = function (data) {\n    if (this.header === '') {\n      return '';\n    }\n\n    this.header = this.parseTemplate(data.point, data.series, this.header, data.series.xAxis, data.series.yAxis);\n\n    if (this.header.replace(/<b>/g, '').replace(/<\\/b>/g, '').trim() !== '') {\n      return this.header;\n    }\n\n    return '';\n  };\n\n  Tooltip.prototype.findShapes = function () {\n    if (!this.chart.tooltip.enableMarker) {\n      return [];\n    }\n\n    var marker = [];\n\n    for (var _i = 0, _a = this.currentPoints; _i < _a.length; _i++) {\n      var data = _a[_i];\n      marker.push(data.point.marker.shape || data.series.marker.shape);\n    }\n\n    return marker;\n  };\n\n  Tooltip.prototype.renderSeriesTooltip = function (chart, isFirst, tooltipDiv) {\n    var data = this.getData();\n    data.lierIndex = this.lierIndex;\n    this.currentPoints = [];\n\n    if (this.findData(data, this.previousPoints[0])) {\n      if (!(chart.dataEditingModule && chart.dataEditingModule.isPointDragging) && this.previousPoints[0] && data.point.index === this.previousPoints[0].point.index && data.series.index === this.previousPoints[0].series.index) {\n        return null;\n      }\n\n      if (this.pushData(data, isFirst, tooltipDiv, true)) {\n        this.triggerTooltipRender(data, isFirst, this.getTooltipText(data), this.findHeader(data));\n      }\n    } else {\n      if (!data.point && this.isRemove && chart.tooltip.fadeOutMode === 'Move') {\n        this.removeTooltip(this.chart.tooltip.fadeOutDuration);\n        this.isRemove = false;\n      } else {\n        var commonXvalues = this.mergeXvalues(this.chart.visibleSeries);\n\n        for (var _i = 0, _a = chart.visibleSeries; _i < _a.length; _i++) {\n          var series = _a[_i];\n\n          if (series.visible && !(series.category === 'TrendLine')) {\n            data = this.getClosestX(chart, series, commonXvalues) || data;\n          }\n        }\n      }\n    }\n\n    if (data && data.point) {\n      this.findMouseValue(data, chart);\n    }\n  };\n\n  Tooltip.prototype.triggerTooltipRender = function (point, isFirst, textCollection, headerText) {\n    var _this = this;\n\n    var tooltipTemplate;\n    var argsData = {\n      cancel: false,\n      name: tooltipRender,\n      text: textCollection,\n      headerText: headerText,\n      template: tooltipTemplate,\n      series: this.chart.isBlazor ? {} : point.series,\n      textStyle: this.textStyle,\n      point: point.point,\n      data: {\n        pointX: point.point.x,\n        pointY: point.point.y,\n        seriesIndex: point.series.index,\n        seriesName: point.series.name,\n        pointIndex: point.point.index,\n        pointText: point.point.text\n      }\n    };\n\n    var chartTooltipSuccess = function (argsData) {\n      if (!argsData.cancel) {\n        if (point.series.type === 'BoxAndWhisker') {\n          _this.removeText();\n\n          isFirst = true;\n        }\n\n        _this.headerText = argsData.headerText;\n        _this.formattedText = _this.formattedText.concat(argsData.text);\n        _this.text = _this.formattedText;\n\n        _this.createTooltip(_this.chart, isFirst, _this.getSymbolLocation(point), point.series.clipRect, point.point, _this.findShapes(), _this.findMarkerHeight(_this.currentPoints[0]), _this.chart.chartAxisLayoutPanel.seriesClipRect, null, _this.getTemplateText(point), _this.template ? argsData.template : '');\n      } else {\n        _this.removeHighlight();\n\n        remove(_this.getElement(_this.element.id + '_tooltip'));\n      }\n\n      _this.isRemove = true;\n    };\n\n    chartTooltipSuccess.bind(this, point);\n    this.chart.trigger(tooltipRender, argsData, chartTooltipSuccess);\n  };\n\n  Tooltip.prototype.findMarkerHeight = function (pointData) {\n    if (!this.chart.tooltip.enableMarker) {\n      return 0;\n    }\n\n    var markerHeight = 0;\n    var series = pointData.series;\n    markerHeight = (series.marker.visible || this.chart.tooltip.shared && (!series.isRectSeries || series.marker.visible) || series.type === 'Scatter' || series.drawType === 'Scatter') && !(series.type === 'Candle' || series.type === 'Hilo' || series.type === 'HiloOpenClose') ? (series.marker.height + 2) / 2 + 2 * series.marker.border.width : 0;\n    return markerHeight;\n  };\n\n  Tooltip.prototype.findData = function (data, previous) {\n    return data.point && (!previous || previous.point !== data.point || previous && previous.lierIndex > 3 && previous.lierIndex !== this.lierIndex || previous.point === data.point);\n  };\n\n  Tooltip.prototype.getSymbolLocation = function (data) {\n    var location;\n\n    if (data.series.type !== 'BoxAndWhisker') {\n      if (!data.point.symbolLocations[0]) {\n        return null;\n      }\n\n      var isSharedTemplate = this.chart.tooltip.shared && !(isNullOrUndefined(this.template) || this.template == '');\n      var x = isSharedTemplate ? this.chart.chartAxisLayoutPanel.seriesClipRect.x : 0;\n      var y = isSharedTemplate ? this.chart.chartAxisLayoutPanel.seriesClipRect.y : 0;\n      location = new ChartLocation(data.point.symbolLocations[0].x + x, data.point.symbolLocations[0].y + y);\n    }\n\n    switch (data.series.type) {\n      case 'BoxAndWhisker':\n        return this.getBoxLocation(data);\n\n      case 'Waterfall':\n        return this.getWaterfallRegion(data, location);\n\n      case 'RangeArea':\n      case 'SplineRangeArea':\n        return this.getRangeArea(data, location);\n\n      default:\n        return location;\n    }\n  };\n\n  Tooltip.prototype.getRangeArea = function (data, location) {\n    if (data.point.regions[0]) {\n      if (!this.inverted) {\n        location.y = data.point.regions[0].y + data.point.regions[0].height / 2;\n      } else {\n        location.x = data.point.regions[0].x + data.point.regions[0].width / 2;\n      }\n    }\n\n    return location;\n  };\n\n  Tooltip.prototype.getWaterfallRegion = function (data, location) {\n    if (!this.inverted) {\n      location.y = data.point.y < 0 ? location.y - data.point.regions[0].height : location.y;\n    } else {\n      location.x = data.point.y < 0 ? location.x + data.point.regions[0].width : location.x;\n    }\n\n    return location;\n  };\n\n  Tooltip.prototype.getTooltipText = function (pointData) {\n    var series = pointData.series;\n    return this.parseTemplate(pointData.point, series, this.getFormat(this.chart, series), series.xAxis, series.yAxis);\n  };\n\n  Tooltip.prototype.getTemplateText = function (data) {\n    if (this.template) {\n      var point = extend({}, data.point);\n      point.x = this.formatPointValue(data.point, data.series.xAxis, 'x', true, false);\n\n      if (data.series.seriesType === 'XY') {\n        point.y = this.formatPointValue(data.point, data.series.yAxis, 'y', false, true);\n      } else {\n        point.low = this.formatPointValue(data.point, data.series.yAxis, 'low', false, true);\n        point.high = this.formatPointValue(data.point, data.series.yAxis, 'high', false, true);\n      }\n\n      return point;\n    } else {\n      return data.point;\n    }\n  };\n\n  Tooltip.prototype.findMouseValue = function (data, chart) {\n    if (!chart.requireInvertedAxis) {\n      if (chart.chartAreaType === 'PolarRadar') {\n        this.valueX = valueToPolarCoefficient(data.point.xValue, data.series.xAxis) * data.series.xAxis.rect.width + data.series.xAxis.rect.x;\n      } else {\n        this.valueX = data.series.category === 'TrendLine' && chart.tooltip.shared ? this.valueX : valueToCoefficient(data.point.xValue, data.series.xAxis) * data.series.xAxis.rect.width + data.series.xAxis.rect.x;\n      }\n\n      this.valueY = chart.mouseY;\n    } else {\n      this.valueY = (1 - valueToCoefficient(data.point.xValue, data.series.xAxis)) * data.series.xAxis.rect.height + data.series.xAxis.rect.y;\n      this.valueX = chart.mouseX;\n    }\n  };\n\n  Tooltip.prototype.renderGroupedTooltip = function (chart, isFirst, tooltipDiv) {\n    var data;\n    var dataCollection = [];\n    var lastData;\n    var pointData = chart.chartAreaType === 'PolarRadar' ? this.getData() : null;\n    this.stopAnimation();\n    this.removeHighlight();\n    this.currentPoints = [];\n    var extraPoints = []; //let headerContent : string = '';\n\n    if (isFirst) {\n      if (!chart.stockChart) {\n        if (tooltipDiv) {\n          document.getElementById(this.element.id + '_Secondary_Element').appendChild(tooltipDiv);\n        }\n      } else {\n        if (tooltipDiv && !getElement(tooltipDiv.id)) {\n          document.getElementById(chart.stockChart.element.id + '_Secondary_Element').appendChild(tooltipDiv);\n        }\n      }\n    }\n\n    this.removeText();\n    var argument = {\n      text: [],\n      cancel: false,\n      name: sharedTooltipRender,\n      data: [],\n      point: [],\n      series: [],\n      headerText: '',\n      textStyle: this.textStyle,\n      template: ''\n    };\n    var commonXvalues = this.mergeXvalues(this.chart.visibleSeries);\n    var i = 0;\n\n    for (var _i = 0, _a = chart.visibleSeries; _i < _a.length; _i++) {\n      var series = _a[_i];\n\n      if (!series.enableTooltip || !series.visible) {\n        continue;\n      }\n\n      if (chart.chartAreaType === 'Cartesian' && series.visible) {\n        data = this.getClosestX(chart, series, commonXvalues);\n      } else if (chart.chartAreaType === 'PolarRadar' && series.visible && pointData.point !== null) {\n        data = new PointData(series.points[pointData.point.index], series);\n      } // if (data && this.header !== '' && this.currentPoints.length === 0) {\n      //     headerContent = this.findHeader(data);\n      // }\n\n\n      if (data) {\n        argument.data.push({\n          pointX: data.point.x,\n          pointY: data.point.y,\n          seriesIndex: data.series.index,\n          seriesName: data.series.name,\n          pointIndex: data.point.index,\n          pointText: data.point.text\n        });\n        argument.series[i] = data.series;\n        argument.point[i] = data.point;\n        argument.headerText = this.findHeader(data);\n        this.currentPoints.push(data);\n        argument.text.push(this.getTooltipText(data));\n        lastData = data.series.category === 'TrendLine' && chart.tooltip.shared ? lastData : data;\n        dataCollection.push(data);\n      } // if (data && this.triggerEvent(data, isFirst, this.getTooltipText(data)), this.findHeader(data)) {\n      //     this.findMouseValue(data, chart);\n      //     (<PointData[]>this.currentPoints).push(data);\n      //     data = null;\n      // } else if (data) {\n      //     extraPoints.push(data);\n      // }\n\n\n      i++;\n    }\n\n    if (dataCollection.length > 0 && this.currentPoints.length > 0) {\n      // To avoid console error when we have empty chart with shared tooltip.\n      this.triggerSharedTooltip(argument, lastData, extraPoints, chart, isFirst, dataCollection);\n    } else if (this.getElement(this.element.id + '_tooltip_path')) {\n      this.getElement(this.element.id + '_tooltip_path').setAttribute('d', '');\n    }\n  };\n\n  Tooltip.prototype.triggerSharedTooltip = function (argument, point, extraPoints, chart, isFirst, dataCollection) {\n    var _this = this;\n\n    var tooltipTemplate;\n    var argsData = {\n      cancel: false,\n      name: sharedTooltipRender,\n      text: argument.text,\n      headerText: argument.headerText,\n      textStyle: argument.textStyle,\n      template: tooltipTemplate,\n      point: argument.point,\n      series: argument.series,\n      data: argument.data\n    };\n\n    var sharedTooltip = function (argsData) {\n      if (!argsData.cancel) {\n        if (point.series.type === 'BoxAndWhisker') {\n          _this.removeText();\n\n          isFirst = true;\n        }\n\n        _this.formattedText = _this.formattedText.concat(argsData.text);\n        _this.text = argsData.text;\n        _this.headerText = argsData.headerText;\n\n        _this.findMouseValue(point, _this.chart);\n\n        _this.createTooltip(chart, isFirst, _this.findSharedLocation(), _this.currentPoints.length === 1 ? _this.currentPoints[0].series.clipRect : null, dataCollection.length === 1 ? dataCollection[0].point : null, _this.findShapes(), _this.findMarkerHeight(_this.currentPoints[0]), chart.chartAxisLayoutPanel.seriesClipRect, extraPoints, _this.template ? _this.getTemplateText(dataCollection[0]) : null, _this.template ? argsData.template : '');\n\n        point = null;\n      } else {\n        extraPoints.push(point);\n      }\n    };\n\n    sharedTooltip.bind(this, point, extraPoints);\n    this.chart.trigger(sharedTooltipRender, argsData, sharedTooltip);\n  };\n\n  Tooltip.prototype.findSharedLocation = function () {\n    var stockChart = this.chart.stockChart;\n\n    if (stockChart) {\n      if (this.text.length === 1) {\n        this.text.push('');\n      }\n\n      var toolbarHeight = stockChart.enablePeriodSelector ? stockChart.toolbarHeight : 0;\n      var element = document.getElementById(stockChart.element.id + '_ChartTitle');\n      var titleHeight = stockChart.title !== '' ? element.getBoundingClientRect().height + 10 : 0;\n      return new ChartLocation(this.chart.chartAxisLayoutPanel.seriesClipRect.x + 5, this.chart.chartAxisLayoutPanel.seriesClipRect.y + toolbarHeight + 5 + titleHeight);\n    } else {\n      if (this.currentPoints.length > 1) {\n        return new ChartLocation(this.valueX, this.valueY);\n      } else {\n        return this.getSymbolLocation(this.currentPoints[0]);\n      }\n    }\n  };\n\n  Tooltip.prototype.getBoxLocation = function (data) {\n    var location = this.lierIndex > 3 ? data.point.symbolLocations[this.lierIndex - 4] : {\n      x: data.point.regions[0].x + data.point.regions[0].width / 2,\n      y: data.point.regions[0].y + data.point.regions[0].height / 2\n    };\n    return location;\n  };\n\n  Tooltip.prototype.parseTemplate = function (point, series, format, xAxis, yAxis) {\n    var val;\n    var textValue;\n\n    for (var _i = 0, _a = Object.keys(point); _i < _a.length; _i++) {\n      var dataValue = _a[_i];\n      val = new RegExp('${point' + '.' + dataValue + '}', 'gm');\n      format = format.replace(val.source, this.formatPointValue(point, val.source === '${point.x}' ? xAxis : yAxis, dataValue, val.source === '${point.x}', val.source === '${point.high}' || val.source === '${point.open}' || val.source === '${point.close}' || val.source === '${point.low}' || val.source === '${point.y}' || val.source === '${point.minimum}' || val.source === '${point.maximum}' || val.source === '${point.outliers}' || val.source === '${point.upperQuartile}' || val.source === '${point.lowerQuartile}' || val.source === '${point.median}'));\n    }\n\n    for (var _b = 0, _c = Object.keys(Object.getPrototypeOf(series)); _b < _c.length; _b++) {\n      var dataValue = _c[_b];\n      val = new RegExp('${series' + '.' + dataValue + '}', 'gm');\n      textValue = series[dataValue];\n      format = format.replace(val.source, textValue);\n    }\n\n    return format;\n  };\n\n  Tooltip.prototype.formatPointValue = function (point, axis, dataValue, isXPoint, isYPoint) {\n    var textValue;\n    var customLabelFormat;\n    var value;\n\n    if (axis.valueType !== 'Category' && isXPoint) {\n      customLabelFormat = axis.labelFormat && axis.labelFormat.match('{value}') !== null;\n      textValue = customLabelFormat ? axis.labelFormat.replace('{value}', axis.format(point[dataValue])) : axis.format(point[dataValue]);\n    } else if (isYPoint && !isNullOrUndefined(point[dataValue])) {\n      customLabelFormat = axis.labelFormat && axis.labelFormat.match('{value}') !== null;\n      value = dataValue === 'outliers' ? axis.format(point[dataValue][this.lierIndex - 4]) : axis.format(point[dataValue]);\n      textValue = customLabelFormat ? axis.labelFormat.replace('{value}', value) : value;\n    } else {\n      textValue = point[dataValue];\n    }\n\n    return textValue;\n  };\n\n  Tooltip.prototype.getFormat = function (chart, series) {\n    if (series.tooltipFormat) {\n      if (series.seriesType === 'XY' && series.category === 'Indicator') {\n        return this.getIndicatorTooltipFormat(series, chart, chart.tooltip.format);\n      }\n\n      return series.tooltipFormat;\n    }\n\n    if (!series.tooltipFormat && chart.tooltip.format) {\n      if (series.seriesType === 'XY' && series.category === 'Indicator') {\n        return this.getIndicatorTooltipFormat(series, chart, chart.tooltip.format);\n      }\n\n      return chart.tooltip.format;\n    }\n\n    var textX = series.type === 'Histogram' ? '${point.minimum}' + '-' + '${point.maximum}' : '${point.x}';\n    var format = !chart.tooltip.shared ? textX : '${series.name}';\n\n    switch (series.seriesType) {\n      case 'XY':\n        if (series.category === 'Indicator') {\n          this.getIndicatorTooltipFormat(series, chart, chart.tooltip.format);\n        }\n\n        return format + ' : ' + (series.type === 'Bubble' ? '<b>${point.y}</b>  Size : <b>${point.size}</b>' : '<b>${point.y}</b>');\n\n      case 'HighLow':\n        return format + '<br/>High : <b>${point.high}</b><br/>Low : <b>${point.low}</b>';\n\n      case 'HighLowOpenClose':\n        return format + ('<br/>High : <b>${point.high}</b><br/>Low : <b>${point.low}</b><br/>' + 'Open : <b>${point.open}</b><br/>Close : <b>${point.close}</b>');\n\n      case 'BoxPlot':\n        {\n          return format + '<br/>' + (this.lierIndex > 3 ? 'Outliers : <b>${point.outliers}</b>' : 'Maximum : <b>${point.maximum}</b><br/>Q3 : <b>${point.upperQuartile}</b><br/>' + 'Median : <b>${point.median}</b><br/>Q1 : <b>${point.lowerQuartile}</b><br/>Minimum : <b>${point.minimum}</b>');\n        }\n\n      default:\n        return '';\n    }\n  };\n\n  Tooltip.prototype.getIndicatorTooltipFormat = function (series, chart, format) {\n    var toolTip;\n\n    if (series.seriesType === 'XY') {\n      toolTip = series.name + ' : <b>${point.y}</b>';\n    } else {\n      toolTip = format;\n    }\n\n    return toolTip;\n  };\n  /*\n  * @hidden\n  */\n\n\n  Tooltip.prototype.removeHighlightedMarker = function (data) {\n    for (var _i = 0, data_1 = data; _i < data_1.length; _i++) {\n      var item = data_1[_i];\n      removeElement(this.element.id + '_Series_' + item.series.index + '_Point_' + item.point.index + '_Trackball');\n    }\n\n    if (this.chart.markerRender) {\n      this.chart.markerRender.removeHighlightedMarker();\n    }\n\n    this.previousPoints = [];\n  };\n  /**\n   * Get module name.\n   */\n\n\n  Tooltip.prototype.getModuleName = function () {\n    /**\n     * Returns the module name\n     */\n    return 'Tooltip';\n  };\n  /**\n   * To destroy the tooltip.\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  Tooltip.prototype.destroy = function () {\n    /**\n     * Destroy method performed here\n     */\n  };\n\n  return Tooltip;\n}(BaseTooltip);\n\nexport { Tooltip };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","extend","Browser","remove","PointData","ChartLocation","getElement","valueToCoefficient","removeElement","valueToPolarCoefficient","withInBounds","BaseTooltip","tooltipRender","sharedTooltipRender","isNullOrUndefined","Tooltip","_super","chart","_this","call","commonXvalues","addEventListener","isDestroyed","cancelEvent","isPointer","on","mouseLeaveHandler","longPress","touchMoveEvent","mouseMoveHandler","touchEndEvent","mouseUpHandler","control","data","getData","lierIndex","isTouch","isSelected","mouseX","mouseY","chartAxisLayoutPanel","seriesClipRect","tooltip","shared","crosshair","enable","fadeOutMode","removeTooltip","fadeOutDuration","startMove","findData","previousPoints","scaleX","scaleY","disableTrackTooltip","stockChart","onPanning","elementId","enableCanvas","element","id","svgElement","isStockSvg","firstChild","childNodes","length","isTooltip","parseInt","getAttribute","tooltipDiv","getTooltipElement","document","getElementById","appendChild","renderSeriesTooltip","renderGroupedTooltip","findHeader","header","parseTemplate","point","series","xAxis","yAxis","replace","trim","findShapes","enableMarker","marker","_i","_a","currentPoints","push","shape","isFirst","dataEditingModule","isPointDragging","index","pushData","triggerTooltipRender","getTooltipText","isRemove","mergeXvalues","visibleSeries","visible","category","getClosestX","findMouseValue","textCollection","headerText","tooltipTemplate","argsData","cancel","name","text","template","isBlazor","textStyle","pointX","x","pointY","y","seriesIndex","seriesName","pointIndex","pointText","chartTooltipSuccess","type","removeText","formattedText","concat","createTooltip","getSymbolLocation","clipRect","findMarkerHeight","getTemplateText","removeHighlight","bind","trigger","pointData","markerHeight","isRectSeries","drawType","height","border","width","previous","location","symbolLocations","isSharedTemplate","getBoxLocation","getWaterfallRegion","getRangeArea","regions","inverted","getFormat","formatPointValue","seriesType","low","high","requireInvertedAxis","chartAreaType","valueX","xValue","rect","valueY","dataCollection","lastData","stopAnimation","extraPoints","argument","i","enableTooltip","points","triggerSharedTooltip","setAttribute","sharedTooltip","findSharedLocation","toolbarHeight","enablePeriodSelector","titleHeight","title","getBoundingClientRect","format","val","textValue","keys","dataValue","RegExp","source","_b","_c","getPrototypeOf","axis","isXPoint","isYPoint","customLabelFormat","value","valueType","labelFormat","match","tooltipFormat","getIndicatorTooltipFormat","textX","toolTip","removeHighlightedMarker","data_1","item","markerRender","getModuleName","destroy"],"sources":["C:/Users/shahj/OneDrive/Documents/GitHub/Multifunctional-React-Dashboard/node_modules/@syncfusion/ej2-charts/src/chart/user-interaction/tooltip.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { extend, Browser, remove } from '@syncfusion/ej2-base';\nimport { PointData, ChartLocation } from '../../common/utils/helper';\nimport { getElement } from '@syncfusion/ej2-svg-base';\nimport { valueToCoefficient, removeElement, valueToPolarCoefficient, withInBounds } from '../../common/utils/helper';\nimport { BaseTooltip } from '../../common/user-interaction/tooltip';\nimport { tooltipRender, sharedTooltipRender } from '../../common/model/constants';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * `Tooltip` module is used to render the tooltip for chart series.\n */\nvar Tooltip = /** @class */ (function (_super) {\n    __extends(Tooltip, _super);\n    /**\n     * Constructor for tooltip module.\n     *\n     * @private\n     */\n    function Tooltip(chart) {\n        var _this = _super.call(this, chart) || this;\n        _this.commonXvalues = [];\n        _this.addEventListener();\n        return _this;\n    }\n    /**\n     * @hidden\n     */\n    Tooltip.prototype.addEventListener = function () {\n        if (this.chart.isDestroyed) {\n            return;\n        }\n        var cancelEvent = Browser.isPointer ? 'pointerleave' : 'mouseleave';\n        this.chart.on(cancelEvent, this.mouseLeaveHandler, this);\n        this.chart.on('tapHold', this.longPress, this);\n        this.chart.on(Browser.touchMoveEvent, this.mouseMoveHandler, this);\n        this.chart.on(Browser.touchEndEvent, this.mouseUpHandler, this);\n    };\n    Tooltip.prototype.mouseUpHandler = function () {\n        var chart = this.control;\n        var data = this.getData();\n        data.lierIndex = this.lierIndex;\n        if (chart.isTouch && !this.isSelected(chart) &&\n            ((withInBounds(chart.mouseX, chart.mouseY, chart.chartAxisLayoutPanel.seriesClipRect) && chart.tooltip.shared)\n                || !chart.tooltip.shared)) {\n            if (!chart.crosshair.enable) {\n                this.tooltip();\n                if (chart.tooltip.fadeOutMode === 'Move') {\n                    this.removeTooltip(chart.tooltip.fadeOutDuration);\n                }\n            }\n            else if (chart.startMove && chart.tooltip.fadeOutMode === 'Move') {\n                this.removeTooltip(2000);\n            }\n        }\n        else if (!this.findData(data, this.previousPoints[0]) && chart.tooltip.fadeOutMode === 'Click') {\n            this.removeTooltip(0);\n        }\n    };\n    Tooltip.prototype.mouseLeaveHandler = function () {\n        this.removeTooltip(this.chart.tooltip.fadeOutDuration);\n    };\n    Tooltip.prototype.mouseMoveHandler = function () {\n        var chart = this.chart;\n        chart.mouseX = chart.mouseX / chart.scaleX;\n        chart.mouseY = chart.mouseY / chart.scaleY;\n        // Tooltip for chart series.\n        if (!chart.disableTrackTooltip && !this.isSelected(chart)) {\n            if (!chart.tooltip.shared && (!chart.isTouch || (chart.startMove))) {\n                this.tooltip();\n            }\n            if (withInBounds(chart.mouseX, chart.mouseY, chart.chartAxisLayoutPanel.seriesClipRect)) {\n                if (chart.tooltip.shared && (!chart.isTouch || (chart.startMove))) {\n                    this.tooltip();\n                }\n            }\n            else {\n                if (chart.tooltip.shared && chart.tooltip.fadeOutMode === 'Move') {\n                    this.removeTooltip(this.chart.tooltip.fadeOutDuration);\n                }\n            }\n        }\n    };\n    /**\n     * Handles the long press on chart.\n     *\n     * @returns {boolean} false\n     * @private\n     */\n    Tooltip.prototype.longPress = function () {\n        var chart = this.chart;\n        if (chart.crosshair.enable && withInBounds(chart.mouseX, chart.mouseY, chart.chartAxisLayoutPanel.seriesClipRect)) {\n            this.tooltip();\n        }\n        return false;\n    };\n    /**\n     * Renders the tooltip.\n     *\n     * @returns {void}\n     */\n    Tooltip.prototype.tooltip = function () {\n        if ((this.chart.stockChart && this.chart.stockChart.onPanning)) {\n            this.removeTooltip(1000);\n            return null;\n        }\n        var elementId = this.chart.enableCanvas ? this.element.id + '_tooltip_group' : this.element.id + '_tooltip_svg';\n        var svgElement = this.getElement(elementId);\n        // To prevent the disappearance of the tooltip, while resize the stock chart.\n        var isStockSvg = this.chart.stockChart && svgElement && (svgElement.firstChild.childNodes.length > 1);\n        var isTooltip = (svgElement && parseInt(svgElement.getAttribute('opacity'), 10) > 0 && !isStockSvg);\n        var tooltipDiv = this.getTooltipElement(isTooltip);\n        if (this.chart.enableCanvas && tooltipDiv) {\n            document.getElementById(this.chart.element.id + '_Secondary_Element').appendChild(tooltipDiv);\n            tooltipDiv.appendChild(document.getElementById(this.chart.element.id + '_tooltip_svg'));\n        }\n        if (!this.chart.tooltip.shared) {\n            this.renderSeriesTooltip(this.chart, !isTooltip, tooltipDiv);\n        }\n        else {\n            this.renderGroupedTooltip(this.chart, !isTooltip, tooltipDiv);\n        }\n    };\n    Tooltip.prototype.findHeader = function (data) {\n        if (this.header === '') {\n            return '';\n        }\n        this.header = this.parseTemplate(data.point, data.series, this.header, data.series.xAxis, data.series.yAxis);\n        if (this.header.replace(/<b>/g, '').replace(/<\\/b>/g, '').trim() !== '') {\n            return this.header;\n        }\n        return '';\n    };\n    Tooltip.prototype.findShapes = function () {\n        if (!this.chart.tooltip.enableMarker) {\n            return [];\n        }\n        var marker = [];\n        for (var _i = 0, _a = this.currentPoints; _i < _a.length; _i++) {\n            var data = _a[_i];\n            marker.push(data.point.marker.shape || data.series.marker.shape);\n        }\n        return marker;\n    };\n    Tooltip.prototype.renderSeriesTooltip = function (chart, isFirst, tooltipDiv) {\n        var data = this.getData();\n        data.lierIndex = this.lierIndex;\n        this.currentPoints = [];\n        if (this.findData(data, this.previousPoints[0])) {\n            if (!(chart.dataEditingModule && chart.dataEditingModule.isPointDragging) && (this.previousPoints[0] &&\n                data.point.index === this.previousPoints[0].point.index && data.series.index === this.previousPoints[0].series.index)) {\n                return null;\n            }\n            if (this.pushData(data, isFirst, tooltipDiv, true)) {\n                this.triggerTooltipRender(data, isFirst, this.getTooltipText(data), this.findHeader(data));\n            }\n        }\n        else {\n            if (!data.point && this.isRemove && chart.tooltip.fadeOutMode === 'Move') {\n                this.removeTooltip(this.chart.tooltip.fadeOutDuration);\n                this.isRemove = false;\n            }\n            else {\n                var commonXvalues = this.mergeXvalues(this.chart.visibleSeries);\n                for (var _i = 0, _a = chart.visibleSeries; _i < _a.length; _i++) {\n                    var series = _a[_i];\n                    if (series.visible && !(series.category === 'TrendLine')) {\n                        data = this.getClosestX(chart, series, commonXvalues) || data;\n                    }\n                }\n            }\n        }\n        if (data && data.point) {\n            this.findMouseValue(data, chart);\n        }\n    };\n    Tooltip.prototype.triggerTooltipRender = function (point, isFirst, textCollection, headerText) {\n        var _this = this;\n        var tooltipTemplate;\n        var argsData = {\n            cancel: false, name: tooltipRender, text: textCollection, headerText: headerText, template: tooltipTemplate,\n            series: this.chart.isBlazor ? {} : point.series, textStyle: this.textStyle, point: point.point,\n            data: { pointX: point.point.x, pointY: point.point.y, seriesIndex: point.series.index, seriesName: point.series.name,\n                pointIndex: point.point.index, pointText: point.point.text }\n        };\n        var chartTooltipSuccess = function (argsData) {\n            if (!argsData.cancel) {\n                if (point.series.type === 'BoxAndWhisker') {\n                    _this.removeText();\n                    isFirst = true;\n                }\n                _this.headerText = argsData.headerText;\n                _this.formattedText = _this.formattedText.concat(argsData.text);\n                _this.text = _this.formattedText;\n                _this.createTooltip(_this.chart, isFirst, _this.getSymbolLocation(point), point.series.clipRect, point.point, _this.findShapes(), _this.findMarkerHeight(_this.currentPoints[0]), _this.chart.chartAxisLayoutPanel.seriesClipRect, null, _this.getTemplateText(point), _this.template ? argsData.template : '');\n            }\n            else {\n                _this.removeHighlight();\n                remove(_this.getElement(_this.element.id + '_tooltip'));\n            }\n            _this.isRemove = true;\n        };\n        chartTooltipSuccess.bind(this, point);\n        this.chart.trigger(tooltipRender, argsData, chartTooltipSuccess);\n    };\n    Tooltip.prototype.findMarkerHeight = function (pointData) {\n        if (!this.chart.tooltip.enableMarker) {\n            return 0;\n        }\n        var markerHeight = 0;\n        var series = pointData.series;\n        markerHeight = ((series.marker.visible || (this.chart.tooltip.shared &&\n            (!series.isRectSeries || series.marker.visible)) || series.type === 'Scatter' || series.drawType === 'Scatter')\n            && !(series.type === 'Candle' || series.type === 'Hilo' || series.type === 'HiloOpenClose')) ?\n            ((series.marker.height + 2) / 2 + (2 * series.marker.border.width)) : 0;\n        return markerHeight;\n    };\n    Tooltip.prototype.findData = function (data, previous) {\n        return data.point && ((!previous || (previous.point !== data.point)) ||\n            (previous && previous.lierIndex > 3 && previous.lierIndex !== this.lierIndex) || (previous.point === data.point));\n    };\n    Tooltip.prototype.getSymbolLocation = function (data) {\n        var location;\n        if (data.series.type !== 'BoxAndWhisker') {\n            if (!data.point.symbolLocations[0]) {\n                return null;\n            }\n            var isSharedTemplate = this.chart.tooltip.shared && !(isNullOrUndefined(this.template) || this.template == '');\n            var x = isSharedTemplate ? this.chart.chartAxisLayoutPanel.seriesClipRect.x : 0;\n            var y = isSharedTemplate ? this.chart.chartAxisLayoutPanel.seriesClipRect.y : 0;\n            location = new ChartLocation(data.point.symbolLocations[0].x + x, data.point.symbolLocations[0].y + y);\n        }\n        switch (data.series.type) {\n            case 'BoxAndWhisker':\n                return this.getBoxLocation(data);\n            case 'Waterfall':\n                return this.getWaterfallRegion(data, location);\n            case 'RangeArea':\n            case 'SplineRangeArea':\n                return this.getRangeArea(data, location);\n            default:\n                return location;\n        }\n    };\n    Tooltip.prototype.getRangeArea = function (data, location) {\n        if (data.point.regions[0]) {\n            if (!this.inverted) {\n                location.y = data.point.regions[0].y + data.point.regions[0].height / 2;\n            }\n            else {\n                location.x = data.point.regions[0].x + data.point.regions[0].width / 2;\n            }\n        }\n        return location;\n    };\n    Tooltip.prototype.getWaterfallRegion = function (data, location) {\n        if (!this.inverted) {\n            location.y = (data.point.y < 0) ?\n                location.y - data.point.regions[0].height : location.y;\n        }\n        else {\n            location.x = (data.point.y < 0) ?\n                location.x + data.point.regions[0].width : location.x;\n        }\n        return location;\n    };\n    Tooltip.prototype.getTooltipText = function (pointData) {\n        var series = pointData.series;\n        return this.parseTemplate(pointData.point, series, this.getFormat(this.chart, series), series.xAxis, series.yAxis);\n    };\n    Tooltip.prototype.getTemplateText = function (data) {\n        if (this.template) {\n            var point = extend({}, data.point);\n            point.x = this.formatPointValue(data.point, data.series.xAxis, 'x', true, false);\n            if ((data.series.seriesType === 'XY')) {\n                point.y = this.formatPointValue(data.point, data.series.yAxis, 'y', false, true);\n            }\n            else {\n                point.low = this.formatPointValue(data.point, data.series.yAxis, 'low', false, true);\n                point.high = this.formatPointValue(data.point, data.series.yAxis, 'high', false, true);\n            }\n            return point;\n        }\n        else {\n            return data.point;\n        }\n    };\n    Tooltip.prototype.findMouseValue = function (data, chart) {\n        if (!chart.requireInvertedAxis) {\n            if (chart.chartAreaType === 'PolarRadar') {\n                this.valueX = valueToPolarCoefficient(data.point.xValue, data.series.xAxis) * data.series.xAxis.rect.width\n                    + data.series.xAxis.rect.x;\n            }\n            else {\n                this.valueX = (data.series.category === 'TrendLine' && chart.tooltip.shared) ? this.valueX :\n                    valueToCoefficient(data.point.xValue, data.series.xAxis) * data.series.xAxis.rect.width\n                        + data.series.xAxis.rect.x;\n            }\n            this.valueY = chart.mouseY;\n        }\n        else {\n            this.valueY = (1 - valueToCoefficient(data.point.xValue, data.series.xAxis)) * data.series.xAxis.rect.height\n                + data.series.xAxis.rect.y;\n            this.valueX = chart.mouseX;\n        }\n    };\n    Tooltip.prototype.renderGroupedTooltip = function (chart, isFirst, tooltipDiv) {\n        var data;\n        var dataCollection = [];\n        var lastData;\n        var pointData = chart.chartAreaType === 'PolarRadar' ? this.getData() : null;\n        this.stopAnimation();\n        this.removeHighlight();\n        this.currentPoints = [];\n        var extraPoints = [];\n        //let headerContent : string = '';\n        if (isFirst) {\n            if (!chart.stockChart) {\n                if (tooltipDiv) {\n                    document.getElementById(this.element.id + '_Secondary_Element').appendChild(tooltipDiv);\n                }\n            }\n            else {\n                if (tooltipDiv && !getElement(tooltipDiv.id)) {\n                    document.getElementById(chart.stockChart.element.id + '_Secondary_Element').appendChild(tooltipDiv);\n                }\n            }\n        }\n        this.removeText();\n        var argument = {\n            text: [], cancel: false, name: sharedTooltipRender, data: [], point: [], series: [], headerText: '', textStyle: this.textStyle, template: ''\n        };\n        var commonXvalues = this.mergeXvalues(this.chart.visibleSeries);\n        var i = 0;\n        for (var _i = 0, _a = chart.visibleSeries; _i < _a.length; _i++) {\n            var series = _a[_i];\n            if (!series.enableTooltip || !series.visible) {\n                continue;\n            }\n            if (chart.chartAreaType === 'Cartesian' && series.visible) {\n                data = this.getClosestX(chart, series, commonXvalues);\n            }\n            else if (chart.chartAreaType === 'PolarRadar' && series.visible && pointData.point !== null) {\n                data = new PointData(series.points[pointData.point.index], series);\n            }\n            // if (data && this.header !== '' && this.currentPoints.length === 0) {\n            //     headerContent = this.findHeader(data);\n            // }\n            if (data) {\n                argument.data.push({ pointX: data.point.x, pointY: data.point.y, seriesIndex: data.series.index,\n                    seriesName: data.series.name, pointIndex: data.point.index, pointText: data.point.text });\n                argument.series[i] = data.series;\n                argument.point[i] = data.point;\n                argument.headerText = this.findHeader(data);\n                this.currentPoints.push(data);\n                argument.text.push(this.getTooltipText(data));\n                lastData = (data.series.category === 'TrendLine' && chart.tooltip.shared) ? lastData : data;\n                dataCollection.push(data);\n            }\n            // if (data && this.triggerEvent(data, isFirst, this.getTooltipText(data)), this.findHeader(data)) {\n            //     this.findMouseValue(data, chart);\n            //     (<PointData[]>this.currentPoints).push(data);\n            //     data = null;\n            // } else if (data) {\n            //     extraPoints.push(data);\n            // }\n            i++;\n        }\n        if (dataCollection.length > 0 && this.currentPoints.length > 0) { // To avoid console error when we have empty chart with shared tooltip.\n            this.triggerSharedTooltip(argument, lastData, extraPoints, chart, isFirst, dataCollection);\n        }\n        else if (this.getElement(this.element.id + '_tooltip_path')) {\n            this.getElement(this.element.id + '_tooltip_path').setAttribute('d', '');\n        }\n    };\n    Tooltip.prototype.triggerSharedTooltip = function (argument, point, extraPoints, chart, isFirst, dataCollection) {\n        var _this = this;\n        var tooltipTemplate;\n        var argsData = {\n            cancel: false, name: sharedTooltipRender, text: argument.text, headerText: argument.headerText,\n            textStyle: argument.textStyle, template: tooltipTemplate,\n            point: argument.point, series: argument.series,\n            data: argument.data\n        };\n        var sharedTooltip = function (argsData) {\n            if (!argsData.cancel) {\n                if (point.series.type === 'BoxAndWhisker') {\n                    _this.removeText();\n                    isFirst = true;\n                }\n                _this.formattedText = _this.formattedText.concat(argsData.text);\n                _this.text = argsData.text;\n                _this.headerText = argsData.headerText;\n                _this.findMouseValue(point, _this.chart);\n                _this.createTooltip(chart, isFirst, _this.findSharedLocation(), _this.currentPoints.length === 1 ? _this.currentPoints[0].series.clipRect : null, dataCollection.length === 1 ? dataCollection[0].point : null, _this.findShapes(), _this.findMarkerHeight(_this.currentPoints[0]), chart.chartAxisLayoutPanel.seriesClipRect, extraPoints, _this.template ? _this.getTemplateText(dataCollection[0]) : null, _this.template ? argsData.template : '');\n                point = null;\n            }\n            else {\n                extraPoints.push(point);\n            }\n        };\n        sharedTooltip.bind(this, point, extraPoints);\n        this.chart.trigger(sharedTooltipRender, argsData, sharedTooltip);\n    };\n    Tooltip.prototype.findSharedLocation = function () {\n        var stockChart = this.chart.stockChart;\n        if (stockChart) {\n            if (this.text.length === 1) {\n                this.text.push('');\n            }\n            var toolbarHeight = stockChart.enablePeriodSelector ? stockChart.toolbarHeight : 0;\n            var element = document.getElementById(stockChart.element.id + '_ChartTitle');\n            var titleHeight = stockChart.title !== '' ? element.getBoundingClientRect().height + 10 : 0;\n            return new ChartLocation(this.chart.chartAxisLayoutPanel.seriesClipRect.x + 5, this.chart.chartAxisLayoutPanel.seriesClipRect.y + toolbarHeight + 5 + titleHeight);\n        }\n        else {\n            if (this.currentPoints.length > 1) {\n                return new ChartLocation(this.valueX, this.valueY);\n            }\n            else {\n                return this.getSymbolLocation(this.currentPoints[0]);\n            }\n        }\n    };\n    Tooltip.prototype.getBoxLocation = function (data) {\n        var location = this.lierIndex > 3 ? data.point.symbolLocations[this.lierIndex - 4] :\n            {\n                x: data.point.regions[0].x + (data.point.regions[0].width / 2),\n                y: data.point.regions[0].y + (data.point.regions[0].height / 2)\n            };\n        return location;\n    };\n    Tooltip.prototype.parseTemplate = function (point, series, format, xAxis, yAxis) {\n        var val;\n        var textValue;\n        for (var _i = 0, _a = Object.keys(point); _i < _a.length; _i++) {\n            var dataValue = _a[_i];\n            val = new RegExp('${point' + '.' + dataValue + '}', 'gm');\n            format = format.replace(val.source, this.formatPointValue(point, val.source === '${point.x}' ? xAxis : yAxis, dataValue, val.source === '${point.x}', (val.source === '${point.high}' ||\n                val.source === '${point.open}' ||\n                val.source === '${point.close}' ||\n                val.source === '${point.low}' ||\n                val.source === '${point.y}' ||\n                val.source === '${point.minimum}' ||\n                val.source === '${point.maximum}' ||\n                val.source === '${point.outliers}' ||\n                val.source === '${point.upperQuartile}' ||\n                val.source === '${point.lowerQuartile}' ||\n                val.source === '${point.median}')));\n        }\n        for (var _b = 0, _c = Object.keys(Object.getPrototypeOf(series)); _b < _c.length; _b++) {\n            var dataValue = _c[_b];\n            val = new RegExp('${series' + '.' + dataValue + '}', 'gm');\n            textValue = series[dataValue];\n            format = format.replace(val.source, textValue);\n        }\n        return format;\n    };\n    Tooltip.prototype.formatPointValue = function (point, axis, dataValue, isXPoint, isYPoint) {\n        var textValue;\n        var customLabelFormat;\n        var value;\n        if (axis.valueType !== 'Category' && isXPoint) {\n            customLabelFormat = axis.labelFormat && axis.labelFormat.match('{value}') !== null;\n            textValue = customLabelFormat ? axis.labelFormat.replace('{value}', axis.format(point[dataValue])) :\n                axis.format(point[dataValue]);\n        }\n        else if (isYPoint && !isNullOrUndefined(point[dataValue])) {\n            customLabelFormat = axis.labelFormat && axis.labelFormat.match('{value}') !== null;\n            value = dataValue === 'outliers' ? axis.format(point[dataValue][this.lierIndex - 4]) :\n                axis.format(point[dataValue]);\n            textValue = customLabelFormat ? axis.labelFormat.replace('{value}', value) : value;\n        }\n        else {\n            textValue = point[dataValue];\n        }\n        return textValue;\n    };\n    Tooltip.prototype.getFormat = function (chart, series) {\n        if (series.tooltipFormat) {\n            if (series.seriesType === 'XY' && series.category === 'Indicator') {\n                return this.getIndicatorTooltipFormat(series, chart, chart.tooltip.format);\n            }\n            return series.tooltipFormat;\n        }\n        if (!series.tooltipFormat && chart.tooltip.format) {\n            if (series.seriesType === 'XY' && series.category === 'Indicator') {\n                return this.getIndicatorTooltipFormat(series, chart, chart.tooltip.format);\n            }\n            return chart.tooltip.format;\n        }\n        var textX = (series.type === 'Histogram') ? '${point.minimum}' + '-' + '${point.maximum}' : '${point.x}';\n        var format = !chart.tooltip.shared ? textX : '${series.name}';\n        switch (series.seriesType) {\n            case 'XY':\n                if (series.category === 'Indicator') {\n                    this.getIndicatorTooltipFormat(series, chart, chart.tooltip.format);\n                }\n                return format + ' : ' + ((series.type === 'Bubble') ? '<b>${point.y}</b>  Size : <b>${point.size}</b>' :\n                    '<b>${point.y}</b>');\n            case 'HighLow':\n                return format + ('<br/>High : <b>${point.high}</b><br/>Low : <b>${point.low}</b>');\n            case 'HighLowOpenClose':\n                return format + ('<br/>High : <b>${point.high}</b><br/>Low : <b>${point.low}</b><br/>' +\n                    'Open : <b>${point.open}</b><br/>Close : <b>${point.close}</b>');\n            case 'BoxPlot': {\n                return format + '<br/>' + (this.lierIndex > 3 ? 'Outliers : <b>${point.outliers}</b>' :\n                    'Maximum : <b>${point.maximum}</b><br/>Q3 : <b>${point.upperQuartile}</b><br/>' +\n                        'Median : <b>${point.median}</b><br/>Q1 : <b>${point.lowerQuartile}</b><br/>Minimum : <b>${point.minimum}</b>');\n            }\n            default: return '';\n        }\n    };\n    Tooltip.prototype.getIndicatorTooltipFormat = function (series, chart, format) {\n        var toolTip;\n        if (series.seriesType === 'XY') {\n            toolTip = series.name + ' : <b>${point.y}</b>';\n        }\n        else {\n            toolTip = format;\n        }\n        return toolTip;\n    };\n    /*\n    * @hidden\n    */\n    Tooltip.prototype.removeHighlightedMarker = function (data) {\n        for (var _i = 0, data_1 = data; _i < data_1.length; _i++) {\n            var item = data_1[_i];\n            removeElement(this.element.id + '_Series_' + item.series.index +\n                '_Point_' + item.point.index + '_Trackball');\n        }\n        if (this.chart.markerRender) {\n            this.chart.markerRender.removeHighlightedMarker();\n        }\n        this.previousPoints = [];\n    };\n    /**\n     * Get module name.\n     */\n    Tooltip.prototype.getModuleName = function () {\n        /**\n         * Returns the module name\n         */\n        return 'Tooltip';\n    };\n    /**\n     * To destroy the tooltip.\n     *\n     * @returns {void}\n     * @private\n     */\n    Tooltip.prototype.destroy = function () {\n        /**\n         * Destroy method performed here\n         */\n    };\n    return Tooltip;\n}(BaseTooltip));\nexport { Tooltip };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}