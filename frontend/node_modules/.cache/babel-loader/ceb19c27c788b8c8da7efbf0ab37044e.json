{"ast":null,"code":"import { removeClass, selectAll, isNullOrUndefined, EventHandler } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { CLS_EXPAND_OPEN, CLS_TB_ITEM, CLS_ACTIVE } from '../base/classes';\nimport * as CONSTANT from '../../common/constant';\nimport { RenderType } from '../base/enum';\nimport { KeyboardEvents } from '../actions/keyboard';\n/**\n * Content module is used to render Rich Text Editor content\n *\n * @hidden\n\n */\n\nvar ViewSource =\n/** @class */\nfunction () {\n  /**\n   * Constructor for view source module\n   *\n   * @param {IRichTextEditor} parent - specifies the parent element.\n   * @param {ServiceLocator} locator - specifies the locator.\n   * @returns {void}\n   */\n  function ViewSource(parent, locator) {\n    this.parent = parent;\n    var serviceLocator = locator;\n    this.rendererFactory = serviceLocator.getService('rendererFactory');\n    this.addEventListener();\n  }\n\n  ViewSource.prototype.addEventListener = function () {\n    this.parent.on(events.sourceCode, this.sourceCode, this);\n    this.parent.on(events.initialEnd, this.onInitialEnd, this);\n    this.parent.on(events.updateSource, this.updateSourceCode, this);\n    this.parent.on(events.destroy, this.destroy, this);\n  };\n\n  ViewSource.prototype.onInitialEnd = function () {\n    this.parent.formatter.editorManager.observer.on(CONSTANT.KEY_DOWN_HANDLER, this.onKeyDown, this);\n  };\n\n  ViewSource.prototype.removeEventListener = function () {\n    this.unWireEvent();\n    this.parent.off(events.sourceCode, this.sourceCode);\n    this.parent.off(events.updateSource, this.updateSourceCode);\n    this.parent.off(events.initialEnd, this.onInitialEnd);\n    this.parent.off(events.destroy, this.destroy);\n    this.parent.formatter.editorManager.observer.off(CONSTANT.KEY_DOWN_HANDLER, this.onKeyDown);\n  };\n\n  ViewSource.prototype.getSourceCode = function () {\n    return this.parent.createElement('textarea', {\n      className: 'e-rte-srctextarea'\n    });\n  };\n\n  ViewSource.prototype.wireEvent = function (element) {\n    this.keyboardModule = new KeyboardEvents(element, {\n      keyAction: this.previewKeyDown.bind(this),\n      keyConfigs: this.parent.formatter.keyConfig,\n      eventName: 'keydown'\n    });\n    EventHandler.add(this.previewElement, 'mousedown', this.mouseDownHandler, this);\n  };\n\n  ViewSource.prototype.unWireEvent = function () {\n    if (this.keyboardModule) {\n      this.keyboardModule.destroy();\n    }\n\n    if (this.previewElement) {\n      EventHandler.remove(this.previewElement, 'mousedown', this.mouseDownHandler);\n    }\n  };\n\n  ViewSource.prototype.wireBaseKeyDown = function () {\n    this.parent.keyboardModule = new KeyboardEvents(this.contentModule.getEditPanel(), {\n      keyAction: this.parent.keyDown.bind(this.parent),\n      keyConfigs: this.parent.formatter.keyConfig,\n      eventName: 'keydown'\n    });\n  };\n\n  ViewSource.prototype.unWireBaseKeyDown = function () {\n    this.parent.keyboardModule.destroy();\n  };\n\n  ViewSource.prototype.mouseDownHandler = function (e) {\n    this.parent.notify(events.sourceCodeMouseDown, {\n      args: e\n    });\n  };\n\n  ViewSource.prototype.previewKeyDown = function (event) {\n    switch (event.action) {\n      case 'html-source':\n        this.updateSourceCode(event);\n        event.preventDefault();\n        break;\n\n      case 'toolbar-focus':\n        if (this.parent.toolbarSettings.enable) {\n          var selector = '.e-toolbar-item[aria-disabled=\"false\"][title] [tabindex]';\n          this.parent.toolbarModule.baseToolbar.toolbarObj.element.querySelector(selector).focus();\n        }\n\n        break;\n    }\n  };\n\n  ViewSource.prototype.onKeyDown = function (e) {\n    switch (e.event.action) {\n      case 'html-source':\n        e.event.preventDefault();\n        this.sourceCode(e);\n        e.callBack({\n          requestType: 'SourceCode',\n          editorMode: 'HTML',\n          event: e.event\n        });\n        break;\n    }\n  };\n  /**\n   * sourceCode method\n   *\n   * @param {ClickEventArgs} args - specifies the click event.\n   * @returns {void}\n   * @hidden\n    */\n\n\n  ViewSource.prototype.sourceCode = function (args) {\n    this.parent.isBlur = false;\n    this.parent.trigger(events.actionBegin, {\n      requestType: 'SourceCode',\n      targetItem: 'SourceCode',\n      args: args\n    });\n    var tbItems = selectAll('.' + CLS_TB_ITEM, this.parent.element);\n    this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n    this.parent.notify(events.updateToolbarItem, {\n      targetItem: 'SourceCode',\n      updateItem: 'Preview',\n      baseToolbar: this.parent.getBaseToolbarObject()\n    });\n\n    if (isNullOrUndefined(this.previewElement)) {\n      this.previewElement = this.getSourceCode();\n    }\n\n    this.parent.updateValueData();\n\n    if (this.parent.iframeSettings.enable) {\n      var rteContent = void 0;\n\n      if (isNullOrUndefined(this.parent.element.querySelector('#' + this.parent.element.id + '_source-view'))) {\n        rteContent = this.parent.createElement('div', {\n          className: 'e-source-content',\n          id: this.parent.element.id + '_source-view'\n        });\n      } else {\n        rteContent = this.parent.element.querySelector('#' + this.parent.element.id + '_source-view');\n      }\n\n      rteContent.appendChild(this.previewElement);\n      this.parent.element.appendChild(rteContent);\n      rteContent.style.height = this.contentModule.getPanel().style.height;\n      rteContent.style.marginTop = this.contentModule.getPanel().style.marginTop;\n      this.getPanel().value = this.getTextAreaValue();\n      this.contentModule.getPanel().style.display = 'none';\n      rteContent.style.display = 'block';\n      this.getPanel().style.display = 'block';\n    } else {\n      this.contentModule.getPanel().appendChild(this.previewElement);\n      this.getPanel().value = this.getTextAreaValue();\n      this.contentModule.getEditPanel().style.display = 'none';\n      this.previewElement.style.display = 'block';\n    }\n\n    this.parent.isBlur = false;\n    this.parent.disableToolbarItem(this.parent.toolbarSettings.items);\n    this.parent.enableToolbarItem('SourceCode');\n\n    if (this.parent.getToolbar()) {\n      removeClass([this.parent.getToolbar()], [CLS_EXPAND_OPEN]);\n    }\n\n    removeClass(tbItems, [CLS_ACTIVE]);\n    this.parent.setContentHeight('sourceCode', true);\n    this.wireEvent(this.previewElement);\n    this.unWireBaseKeyDown();\n    this.previewElement.focus();\n    this.parent.updateValue();\n\n    if (!isNullOrUndefined(this.parent.placeholder) && !this.parent.iframeSettings.enable) {\n      var placeHolderWrapper = this.parent.element.querySelector('.rte-placeholder.e-rte-placeholder');\n      placeHolderWrapper.style.display = 'none';\n    }\n\n    this.parent.trigger(events.actionComplete, {\n      requestType: 'SourceCode',\n      targetItem: 'SourceCode',\n      args: args\n    });\n    this.parent.invokeChangeEvent();\n  };\n  /**\n   * updateSourceCode method\n   *\n   * @param {ClickEventArgs} args - specifies the click event.\n   * @returns {void}\n   * @hidden\n    */\n\n\n  ViewSource.prototype.updateSourceCode = function (args) {\n    this.parent.isBlur = false;\n    this.parent.trigger(events.actionBegin, {\n      requestType: 'Preview',\n      targetItem: 'Preview',\n      args: args\n    });\n    var editHTML = this.getPanel();\n    this.parent.notify(events.updateToolbarItem, {\n      targetItem: 'Preview',\n      updateItem: 'SourceCode',\n      baseToolbar: this.parent.getBaseToolbarObject()\n    });\n    var serializeValue = this.parent.serializeValue(editHTML.value);\n    var value;\n\n    if (serializeValue === null || serializeValue === '') {\n      if (this.parent.enterKey === 'DIV') {\n        value = '<div><br/></div>';\n      } else if (this.parent.enterKey === 'BR') {\n        value = '<br/>';\n      } else {\n        value = '<p><br/></p>';\n      }\n    } else {\n      value = serializeValue;\n    }\n\n    if (this.parent.iframeSettings.enable) {\n      editHTML.parentElement.style.display = 'none';\n      editHTML.style.display = 'none';\n      this.contentModule.getPanel().style.display = 'block';\n      this.contentModule.getEditPanel().innerHTML = value;\n    } else {\n      editHTML.style.display = 'none';\n      this.contentModule.getEditPanel().style.display = 'block';\n      this.contentModule.getEditPanel().innerHTML = value;\n    }\n\n    this.parent.isBlur = false;\n    this.parent.enableToolbarItem(this.parent.toolbarSettings.items);\n\n    if (this.parent.getToolbar()) {\n      removeClass([this.parent.getToolbar()], [CLS_EXPAND_OPEN]);\n    }\n\n    this.parent.setContentHeight('preview', true);\n    this.unWireEvent();\n    this.wireBaseKeyDown();\n    this.contentModule.getEditPanel().focus();\n    this.parent.updateValue();\n\n    if (!isNullOrUndefined(this.parent.placeholder) && this.contentModule.getEditPanel().innerText.length === 0) {\n      var placeHolderWrapper = this.parent.element.querySelector('.rte-placeholder.e-rte-placeholder');\n      placeHolderWrapper.style.display = 'block';\n    }\n\n    this.parent.trigger(events.actionComplete, {\n      requestType: 'Preview',\n      targetItem: 'Preview',\n      args: args\n    });\n    this.parent.formatter.enableUndo(this.parent);\n    this.parent.invokeChangeEvent();\n  };\n\n  ViewSource.prototype.getTextAreaValue = function () {\n    return this.contentModule.getEditPanel().innerHTML === '<p><br></p>' || this.contentModule.getEditPanel().innerHTML === '<div><br></div>' || this.contentModule.getEditPanel().innerHTML === '<br>' || this.contentModule.getEditPanel().childNodes.length === 1 && this.contentModule.getEditPanel().childNodes[0].tagName === 'P' && this.contentModule.getEditPanel().innerHTML.length === 7 || this.contentModule.getEditPanel().childNodes[0].tagName === 'DIV' && this.contentModule.getEditPanel().innerHTML.length === 11 ? '' : this.parent.value;\n  };\n  /**\n   * getPanel method\n   *\n   * @returns {void}\n   * @hidden\n    */\n\n\n  ViewSource.prototype.getPanel = function () {\n    return this.parent.element && this.parent.element.querySelector('.e-rte-srctextarea');\n  };\n  /**\n   * getViewPanel method\n   *\n   * @returns {void}\n   * @hidden\n    */\n\n\n  ViewSource.prototype.getViewPanel = function () {\n    return this.parent.iframeSettings.enable && this.getPanel() ? this.getPanel().parentElement : this.getPanel();\n  };\n  /**\n   * Destroy the entire RichTextEditor.\n   *\n   * @returns {void}\n   * @hidden\n    */\n\n\n  ViewSource.prototype.destroy = function () {\n    this.removeEventListener();\n  };\n\n  return ViewSource;\n}();\n\nexport { ViewSource };","map":{"version":3,"names":["removeClass","selectAll","isNullOrUndefined","EventHandler","events","CLS_EXPAND_OPEN","CLS_TB_ITEM","CLS_ACTIVE","CONSTANT","RenderType","KeyboardEvents","ViewSource","parent","locator","serviceLocator","rendererFactory","getService","addEventListener","prototype","on","sourceCode","initialEnd","onInitialEnd","updateSource","updateSourceCode","destroy","formatter","editorManager","observer","KEY_DOWN_HANDLER","onKeyDown","removeEventListener","unWireEvent","off","getSourceCode","createElement","className","wireEvent","element","keyboardModule","keyAction","previewKeyDown","bind","keyConfigs","keyConfig","eventName","add","previewElement","mouseDownHandler","remove","wireBaseKeyDown","contentModule","getEditPanel","keyDown","unWireBaseKeyDown","e","notify","sourceCodeMouseDown","args","event","action","preventDefault","toolbarSettings","enable","selector","toolbarModule","baseToolbar","toolbarObj","querySelector","focus","callBack","requestType","editorMode","isBlur","trigger","actionBegin","targetItem","tbItems","getRenderer","Content","updateToolbarItem","updateItem","getBaseToolbarObject","updateValueData","iframeSettings","rteContent","id","appendChild","style","height","getPanel","marginTop","value","getTextAreaValue","display","disableToolbarItem","items","enableToolbarItem","getToolbar","setContentHeight","updateValue","placeholder","placeHolderWrapper","actionComplete","invokeChangeEvent","editHTML","serializeValue","enterKey","parentElement","innerHTML","innerText","length","enableUndo","childNodes","tagName","getViewPanel"],"sources":["C:/Users/shahj/OneDrive/Documents/GitHub/Multifunctional-React-Dashboard/node_modules/@syncfusion/ej2-richtexteditor/src/rich-text-editor/renderer/view-source.js"],"sourcesContent":["import { removeClass, selectAll, isNullOrUndefined, EventHandler } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { CLS_EXPAND_OPEN, CLS_TB_ITEM, CLS_ACTIVE } from '../base/classes';\nimport * as CONSTANT from '../../common/constant';\nimport { RenderType } from '../base/enum';\nimport { KeyboardEvents } from '../actions/keyboard';\n/**\n * Content module is used to render Rich Text Editor content\n *\n * @hidden\n\n */\nvar ViewSource = /** @class */ (function () {\n    /**\n     * Constructor for view source module\n     *\n     * @param {IRichTextEditor} parent - specifies the parent element.\n     * @param {ServiceLocator} locator - specifies the locator.\n     * @returns {void}\n     */\n    function ViewSource(parent, locator) {\n        this.parent = parent;\n        var serviceLocator = locator;\n        this.rendererFactory = serviceLocator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    ViewSource.prototype.addEventListener = function () {\n        this.parent.on(events.sourceCode, this.sourceCode, this);\n        this.parent.on(events.initialEnd, this.onInitialEnd, this);\n        this.parent.on(events.updateSource, this.updateSourceCode, this);\n        this.parent.on(events.destroy, this.destroy, this);\n    };\n    ViewSource.prototype.onInitialEnd = function () {\n        this.parent.formatter.editorManager.observer.on(CONSTANT.KEY_DOWN_HANDLER, this.onKeyDown, this);\n    };\n    ViewSource.prototype.removeEventListener = function () {\n        this.unWireEvent();\n        this.parent.off(events.sourceCode, this.sourceCode);\n        this.parent.off(events.updateSource, this.updateSourceCode);\n        this.parent.off(events.initialEnd, this.onInitialEnd);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.formatter.editorManager.observer.off(CONSTANT.KEY_DOWN_HANDLER, this.onKeyDown);\n    };\n    ViewSource.prototype.getSourceCode = function () {\n        return this.parent.createElement('textarea', { className: 'e-rte-srctextarea' });\n    };\n    ViewSource.prototype.wireEvent = function (element) {\n        this.keyboardModule = new KeyboardEvents(element, {\n            keyAction: this.previewKeyDown.bind(this), keyConfigs: this.parent.formatter.keyConfig, eventName: 'keydown'\n        });\n        EventHandler.add(this.previewElement, 'mousedown', this.mouseDownHandler, this);\n    };\n    ViewSource.prototype.unWireEvent = function () {\n        if (this.keyboardModule) {\n            this.keyboardModule.destroy();\n        }\n        if (this.previewElement) {\n            EventHandler.remove(this.previewElement, 'mousedown', this.mouseDownHandler);\n        }\n    };\n    ViewSource.prototype.wireBaseKeyDown = function () {\n        this.parent.keyboardModule = new KeyboardEvents(this.contentModule.getEditPanel(), {\n            keyAction: this.parent.keyDown.bind(this.parent), keyConfigs: this.parent.formatter.keyConfig, eventName: 'keydown'\n        });\n    };\n    ViewSource.prototype.unWireBaseKeyDown = function () {\n        this.parent.keyboardModule.destroy();\n    };\n    ViewSource.prototype.mouseDownHandler = function (e) {\n        this.parent.notify(events.sourceCodeMouseDown, { args: e });\n    };\n    ViewSource.prototype.previewKeyDown = function (event) {\n        switch (event.action) {\n            case 'html-source':\n                this.updateSourceCode(event);\n                event.preventDefault();\n                break;\n            case 'toolbar-focus':\n                if (this.parent.toolbarSettings.enable) {\n                    var selector = '.e-toolbar-item[aria-disabled=\"false\"][title] [tabindex]';\n                    this.parent.toolbarModule.baseToolbar.toolbarObj.element.querySelector(selector).focus();\n                }\n                break;\n        }\n    };\n    ViewSource.prototype.onKeyDown = function (e) {\n        switch (e.event.action) {\n            case 'html-source':\n                e.event.preventDefault();\n                this.sourceCode(e);\n                e.callBack({\n                    requestType: 'SourceCode',\n                    editorMode: 'HTML',\n                    event: e.event\n                });\n                break;\n        }\n    };\n    /**\n     * sourceCode method\n     *\n     * @param {ClickEventArgs} args - specifies the click event.\n     * @returns {void}\n     * @hidden\n\n     */\n    ViewSource.prototype.sourceCode = function (args) {\n        this.parent.isBlur = false;\n        this.parent.trigger(events.actionBegin, { requestType: 'SourceCode', targetItem: 'SourceCode', args: args });\n        var tbItems = selectAll('.' + CLS_TB_ITEM, this.parent.element);\n        this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n        this.parent.notify(events.updateToolbarItem, {\n            targetItem: 'SourceCode', updateItem: 'Preview',\n            baseToolbar: this.parent.getBaseToolbarObject()\n        });\n        if (isNullOrUndefined(this.previewElement)) {\n            this.previewElement = this.getSourceCode();\n        }\n        this.parent.updateValueData();\n        if (this.parent.iframeSettings.enable) {\n            var rteContent = void 0;\n            if (isNullOrUndefined(this.parent.element.querySelector('#' + this.parent.element.id + '_source-view'))) {\n                rteContent = this.parent.createElement('div', {\n                    className: 'e-source-content', id: this.parent.element.id + '_source-view'\n                });\n            }\n            else {\n                rteContent = this.parent.element.querySelector('#' + this.parent.element.id + '_source-view');\n            }\n            rteContent.appendChild(this.previewElement);\n            this.parent.element.appendChild(rteContent);\n            rteContent.style.height = this.contentModule.getPanel().style.height;\n            rteContent.style.marginTop = this.contentModule.getPanel().style.marginTop;\n            this.getPanel().value = this.getTextAreaValue();\n            this.contentModule.getPanel().style.display = 'none';\n            rteContent.style.display = 'block';\n            this.getPanel().style.display = 'block';\n        }\n        else {\n            this.contentModule.getPanel().appendChild(this.previewElement);\n            this.getPanel().value = this.getTextAreaValue();\n            this.contentModule.getEditPanel().style.display = 'none';\n            this.previewElement.style.display = 'block';\n        }\n        this.parent.isBlur = false;\n        this.parent.disableToolbarItem(this.parent.toolbarSettings.items);\n        this.parent.enableToolbarItem('SourceCode');\n        if (this.parent.getToolbar()) {\n            removeClass([this.parent.getToolbar()], [CLS_EXPAND_OPEN]);\n        }\n        removeClass(tbItems, [CLS_ACTIVE]);\n        this.parent.setContentHeight('sourceCode', true);\n        this.wireEvent(this.previewElement);\n        this.unWireBaseKeyDown();\n        this.previewElement.focus();\n        this.parent.updateValue();\n        if (!isNullOrUndefined(this.parent.placeholder) && !this.parent.iframeSettings.enable) {\n            var placeHolderWrapper = this.parent.element.querySelector('.rte-placeholder.e-rte-placeholder');\n            placeHolderWrapper.style.display = 'none';\n        }\n        this.parent.trigger(events.actionComplete, { requestType: 'SourceCode', targetItem: 'SourceCode', args: args });\n        this.parent.invokeChangeEvent();\n    };\n    /**\n     * updateSourceCode method\n     *\n     * @param {ClickEventArgs} args - specifies the click event.\n     * @returns {void}\n     * @hidden\n\n     */\n    ViewSource.prototype.updateSourceCode = function (args) {\n        this.parent.isBlur = false;\n        this.parent.trigger(events.actionBegin, { requestType: 'Preview', targetItem: 'Preview', args: args });\n        var editHTML = this.getPanel();\n        this.parent.notify(events.updateToolbarItem, {\n            targetItem: 'Preview', updateItem: 'SourceCode',\n            baseToolbar: this.parent.getBaseToolbarObject()\n        });\n        var serializeValue = this.parent.serializeValue(editHTML.value);\n        var value;\n        if (serializeValue === null || serializeValue === '') {\n            if (this.parent.enterKey === 'DIV') {\n                value = '<div><br/></div>';\n            }\n            else if (this.parent.enterKey === 'BR') {\n                value = '<br/>';\n            }\n            else {\n                value = '<p><br/></p>';\n            }\n        }\n        else {\n            value = serializeValue;\n        }\n        if (this.parent.iframeSettings.enable) {\n            editHTML.parentElement.style.display = 'none';\n            editHTML.style.display = 'none';\n            this.contentModule.getPanel().style.display = 'block';\n            this.contentModule.getEditPanel().innerHTML = value;\n        }\n        else {\n            editHTML.style.display = 'none';\n            this.contentModule.getEditPanel().style.display = 'block';\n            this.contentModule.getEditPanel().innerHTML = value;\n        }\n        this.parent.isBlur = false;\n        this.parent.enableToolbarItem(this.parent.toolbarSettings.items);\n        if (this.parent.getToolbar()) {\n            removeClass([this.parent.getToolbar()], [CLS_EXPAND_OPEN]);\n        }\n        this.parent.setContentHeight('preview', true);\n        this.unWireEvent();\n        this.wireBaseKeyDown();\n        this.contentModule.getEditPanel().focus();\n        this.parent.updateValue();\n        if (!isNullOrUndefined(this.parent.placeholder) && this.contentModule.getEditPanel().innerText.length === 0) {\n            var placeHolderWrapper = this.parent.element.querySelector('.rte-placeholder.e-rte-placeholder');\n            placeHolderWrapper.style.display = 'block';\n        }\n        this.parent.trigger(events.actionComplete, { requestType: 'Preview', targetItem: 'Preview', args: args });\n        this.parent.formatter.enableUndo(this.parent);\n        this.parent.invokeChangeEvent();\n    };\n    ViewSource.prototype.getTextAreaValue = function () {\n        return (this.contentModule.getEditPanel().innerHTML === '<p><br></p>') ||\n            (this.contentModule.getEditPanel().innerHTML === '<div><br></div>') ||\n            (this.contentModule.getEditPanel().innerHTML === '<br>') ||\n            (this.contentModule.getEditPanel().childNodes.length === 1 &&\n                (this.contentModule.getEditPanel().childNodes[0].tagName === 'P' &&\n                    this.contentModule.getEditPanel().innerHTML.length === 7) ||\n                (this.contentModule.getEditPanel().childNodes[0].tagName === 'DIV' &&\n                    this.contentModule.getEditPanel().innerHTML.length === 11)) ? '' : this.parent.value;\n    };\n    /**\n     * getPanel method\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    ViewSource.prototype.getPanel = function () {\n        return this.parent.element && this.parent.element.querySelector('.e-rte-srctextarea');\n    };\n    /**\n     * getViewPanel method\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    ViewSource.prototype.getViewPanel = function () {\n        return (this.parent.iframeSettings.enable && this.getPanel()) ? this.getPanel().parentElement : this.getPanel();\n    };\n    /**\n     * Destroy the entire RichTextEditor.\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    ViewSource.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return ViewSource;\n}());\nexport { ViewSource };\n"],"mappings":"AAAA,SAASA,WAAT,EAAsBC,SAAtB,EAAiCC,iBAAjC,EAAoDC,YAApD,QAAwE,sBAAxE;AACA,OAAO,KAAKC,MAAZ,MAAwB,kBAAxB;AACA,SAASC,eAAT,EAA0BC,WAA1B,EAAuCC,UAAvC,QAAyD,iBAAzD;AACA,OAAO,KAAKC,QAAZ,MAA0B,uBAA1B;AACA,SAASC,UAAT,QAA2B,cAA3B;AACA,SAASC,cAAT,QAA+B,qBAA/B;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAIC,UAAU;AAAG;AAAe,YAAY;EACxC;AACJ;AACA;AACA;AACA;AACA;AACA;EACI,SAASA,UAAT,CAAoBC,MAApB,EAA4BC,OAA5B,EAAqC;IACjC,KAAKD,MAAL,GAAcA,MAAd;IACA,IAAIE,cAAc,GAAGD,OAArB;IACA,KAAKE,eAAL,GAAuBD,cAAc,CAACE,UAAf,CAA0B,iBAA1B,CAAvB;IACA,KAAKC,gBAAL;EACH;;EACDN,UAAU,CAACO,SAAX,CAAqBD,gBAArB,GAAwC,YAAY;IAChD,KAAKL,MAAL,CAAYO,EAAZ,CAAef,MAAM,CAACgB,UAAtB,EAAkC,KAAKA,UAAvC,EAAmD,IAAnD;IACA,KAAKR,MAAL,CAAYO,EAAZ,CAAef,MAAM,CAACiB,UAAtB,EAAkC,KAAKC,YAAvC,EAAqD,IAArD;IACA,KAAKV,MAAL,CAAYO,EAAZ,CAAef,MAAM,CAACmB,YAAtB,EAAoC,KAAKC,gBAAzC,EAA2D,IAA3D;IACA,KAAKZ,MAAL,CAAYO,EAAZ,CAAef,MAAM,CAACqB,OAAtB,EAA+B,KAAKA,OAApC,EAA6C,IAA7C;EACH,CALD;;EAMAd,UAAU,CAACO,SAAX,CAAqBI,YAArB,GAAoC,YAAY;IAC5C,KAAKV,MAAL,CAAYc,SAAZ,CAAsBC,aAAtB,CAAoCC,QAApC,CAA6CT,EAA7C,CAAgDX,QAAQ,CAACqB,gBAAzD,EAA2E,KAAKC,SAAhF,EAA2F,IAA3F;EACH,CAFD;;EAGAnB,UAAU,CAACO,SAAX,CAAqBa,mBAArB,GAA2C,YAAY;IACnD,KAAKC,WAAL;IACA,KAAKpB,MAAL,CAAYqB,GAAZ,CAAgB7B,MAAM,CAACgB,UAAvB,EAAmC,KAAKA,UAAxC;IACA,KAAKR,MAAL,CAAYqB,GAAZ,CAAgB7B,MAAM,CAACmB,YAAvB,EAAqC,KAAKC,gBAA1C;IACA,KAAKZ,MAAL,CAAYqB,GAAZ,CAAgB7B,MAAM,CAACiB,UAAvB,EAAmC,KAAKC,YAAxC;IACA,KAAKV,MAAL,CAAYqB,GAAZ,CAAgB7B,MAAM,CAACqB,OAAvB,EAAgC,KAAKA,OAArC;IACA,KAAKb,MAAL,CAAYc,SAAZ,CAAsBC,aAAtB,CAAoCC,QAApC,CAA6CK,GAA7C,CAAiDzB,QAAQ,CAACqB,gBAA1D,EAA4E,KAAKC,SAAjF;EACH,CAPD;;EAQAnB,UAAU,CAACO,SAAX,CAAqBgB,aAArB,GAAqC,YAAY;IAC7C,OAAO,KAAKtB,MAAL,CAAYuB,aAAZ,CAA0B,UAA1B,EAAsC;MAAEC,SAAS,EAAE;IAAb,CAAtC,CAAP;EACH,CAFD;;EAGAzB,UAAU,CAACO,SAAX,CAAqBmB,SAArB,GAAiC,UAAUC,OAAV,EAAmB;IAChD,KAAKC,cAAL,GAAsB,IAAI7B,cAAJ,CAAmB4B,OAAnB,EAA4B;MAC9CE,SAAS,EAAE,KAAKC,cAAL,CAAoBC,IAApB,CAAyB,IAAzB,CADmC;MACHC,UAAU,EAAE,KAAK/B,MAAL,CAAYc,SAAZ,CAAsBkB,SAD/B;MAC0CC,SAAS,EAAE;IADrD,CAA5B,CAAtB;IAGA1C,YAAY,CAAC2C,GAAb,CAAiB,KAAKC,cAAtB,EAAsC,WAAtC,EAAmD,KAAKC,gBAAxD,EAA0E,IAA1E;EACH,CALD;;EAMArC,UAAU,CAACO,SAAX,CAAqBc,WAArB,GAAmC,YAAY;IAC3C,IAAI,KAAKO,cAAT,EAAyB;MACrB,KAAKA,cAAL,CAAoBd,OAApB;IACH;;IACD,IAAI,KAAKsB,cAAT,EAAyB;MACrB5C,YAAY,CAAC8C,MAAb,CAAoB,KAAKF,cAAzB,EAAyC,WAAzC,EAAsD,KAAKC,gBAA3D;IACH;EACJ,CAPD;;EAQArC,UAAU,CAACO,SAAX,CAAqBgC,eAArB,GAAuC,YAAY;IAC/C,KAAKtC,MAAL,CAAY2B,cAAZ,GAA6B,IAAI7B,cAAJ,CAAmB,KAAKyC,aAAL,CAAmBC,YAAnB,EAAnB,EAAsD;MAC/EZ,SAAS,EAAE,KAAK5B,MAAL,CAAYyC,OAAZ,CAAoBX,IAApB,CAAyB,KAAK9B,MAA9B,CADoE;MAC7B+B,UAAU,EAAE,KAAK/B,MAAL,CAAYc,SAAZ,CAAsBkB,SADL;MACgBC,SAAS,EAAE;IAD3B,CAAtD,CAA7B;EAGH,CAJD;;EAKAlC,UAAU,CAACO,SAAX,CAAqBoC,iBAArB,GAAyC,YAAY;IACjD,KAAK1C,MAAL,CAAY2B,cAAZ,CAA2Bd,OAA3B;EACH,CAFD;;EAGAd,UAAU,CAACO,SAAX,CAAqB8B,gBAArB,GAAwC,UAAUO,CAAV,EAAa;IACjD,KAAK3C,MAAL,CAAY4C,MAAZ,CAAmBpD,MAAM,CAACqD,mBAA1B,EAA+C;MAAEC,IAAI,EAAEH;IAAR,CAA/C;EACH,CAFD;;EAGA5C,UAAU,CAACO,SAAX,CAAqBuB,cAArB,GAAsC,UAAUkB,KAAV,EAAiB;IACnD,QAAQA,KAAK,CAACC,MAAd;MACI,KAAK,aAAL;QACI,KAAKpC,gBAAL,CAAsBmC,KAAtB;QACAA,KAAK,CAACE,cAAN;QACA;;MACJ,KAAK,eAAL;QACI,IAAI,KAAKjD,MAAL,CAAYkD,eAAZ,CAA4BC,MAAhC,EAAwC;UACpC,IAAIC,QAAQ,GAAG,0DAAf;UACA,KAAKpD,MAAL,CAAYqD,aAAZ,CAA0BC,WAA1B,CAAsCC,UAAtC,CAAiD7B,OAAjD,CAAyD8B,aAAzD,CAAuEJ,QAAvE,EAAiFK,KAAjF;QACH;;QACD;IAVR;EAYH,CAbD;;EAcA1D,UAAU,CAACO,SAAX,CAAqBY,SAArB,GAAiC,UAAUyB,CAAV,EAAa;IAC1C,QAAQA,CAAC,CAACI,KAAF,CAAQC,MAAhB;MACI,KAAK,aAAL;QACIL,CAAC,CAACI,KAAF,CAAQE,cAAR;QACA,KAAKzC,UAAL,CAAgBmC,CAAhB;QACAA,CAAC,CAACe,QAAF,CAAW;UACPC,WAAW,EAAE,YADN;UAEPC,UAAU,EAAE,MAFL;UAGPb,KAAK,EAAEJ,CAAC,CAACI;QAHF,CAAX;QAKA;IATR;EAWH,CAZD;EAaA;AACJ;AACA;AACA;AACA;AACA;AACA;;;EAEIhD,UAAU,CAACO,SAAX,CAAqBE,UAArB,GAAkC,UAAUsC,IAAV,EAAgB;IAC9C,KAAK9C,MAAL,CAAY6D,MAAZ,GAAqB,KAArB;IACA,KAAK7D,MAAL,CAAY8D,OAAZ,CAAoBtE,MAAM,CAACuE,WAA3B,EAAwC;MAAEJ,WAAW,EAAE,YAAf;MAA6BK,UAAU,EAAE,YAAzC;MAAuDlB,IAAI,EAAEA;IAA7D,CAAxC;IACA,IAAImB,OAAO,GAAG5E,SAAS,CAAC,MAAMK,WAAP,EAAoB,KAAKM,MAAL,CAAY0B,OAAhC,CAAvB;IACA,KAAKa,aAAL,GAAqB,KAAKpC,eAAL,CAAqB+D,WAArB,CAAiCrE,UAAU,CAACsE,OAA5C,CAArB;IACA,KAAKnE,MAAL,CAAY4C,MAAZ,CAAmBpD,MAAM,CAAC4E,iBAA1B,EAA6C;MACzCJ,UAAU,EAAE,YAD6B;MACfK,UAAU,EAAE,SADG;MAEzCf,WAAW,EAAE,KAAKtD,MAAL,CAAYsE,oBAAZ;IAF4B,CAA7C;;IAIA,IAAIhF,iBAAiB,CAAC,KAAK6C,cAAN,CAArB,EAA4C;MACxC,KAAKA,cAAL,GAAsB,KAAKb,aAAL,EAAtB;IACH;;IACD,KAAKtB,MAAL,CAAYuE,eAAZ;;IACA,IAAI,KAAKvE,MAAL,CAAYwE,cAAZ,CAA2BrB,MAA/B,EAAuC;MACnC,IAAIsB,UAAU,GAAG,KAAK,CAAtB;;MACA,IAAInF,iBAAiB,CAAC,KAAKU,MAAL,CAAY0B,OAAZ,CAAoB8B,aAApB,CAAkC,MAAM,KAAKxD,MAAL,CAAY0B,OAAZ,CAAoBgD,EAA1B,GAA+B,cAAjE,CAAD,CAArB,EAAyG;QACrGD,UAAU,GAAG,KAAKzE,MAAL,CAAYuB,aAAZ,CAA0B,KAA1B,EAAiC;UAC1CC,SAAS,EAAE,kBAD+B;UACXkD,EAAE,EAAE,KAAK1E,MAAL,CAAY0B,OAAZ,CAAoBgD,EAApB,GAAyB;QADlB,CAAjC,CAAb;MAGH,CAJD,MAKK;QACDD,UAAU,GAAG,KAAKzE,MAAL,CAAY0B,OAAZ,CAAoB8B,aAApB,CAAkC,MAAM,KAAKxD,MAAL,CAAY0B,OAAZ,CAAoBgD,EAA1B,GAA+B,cAAjE,CAAb;MACH;;MACDD,UAAU,CAACE,WAAX,CAAuB,KAAKxC,cAA5B;MACA,KAAKnC,MAAL,CAAY0B,OAAZ,CAAoBiD,WAApB,CAAgCF,UAAhC;MACAA,UAAU,CAACG,KAAX,CAAiBC,MAAjB,GAA0B,KAAKtC,aAAL,CAAmBuC,QAAnB,GAA8BF,KAA9B,CAAoCC,MAA9D;MACAJ,UAAU,CAACG,KAAX,CAAiBG,SAAjB,GAA6B,KAAKxC,aAAL,CAAmBuC,QAAnB,GAA8BF,KAA9B,CAAoCG,SAAjE;MACA,KAAKD,QAAL,GAAgBE,KAAhB,GAAwB,KAAKC,gBAAL,EAAxB;MACA,KAAK1C,aAAL,CAAmBuC,QAAnB,GAA8BF,KAA9B,CAAoCM,OAApC,GAA8C,MAA9C;MACAT,UAAU,CAACG,KAAX,CAAiBM,OAAjB,GAA2B,OAA3B;MACA,KAAKJ,QAAL,GAAgBF,KAAhB,CAAsBM,OAAtB,GAAgC,OAAhC;IACH,CAlBD,MAmBK;MACD,KAAK3C,aAAL,CAAmBuC,QAAnB,GAA8BH,WAA9B,CAA0C,KAAKxC,cAA/C;MACA,KAAK2C,QAAL,GAAgBE,KAAhB,GAAwB,KAAKC,gBAAL,EAAxB;MACA,KAAK1C,aAAL,CAAmBC,YAAnB,GAAkCoC,KAAlC,CAAwCM,OAAxC,GAAkD,MAAlD;MACA,KAAK/C,cAAL,CAAoByC,KAApB,CAA0BM,OAA1B,GAAoC,OAApC;IACH;;IACD,KAAKlF,MAAL,CAAY6D,MAAZ,GAAqB,KAArB;IACA,KAAK7D,MAAL,CAAYmF,kBAAZ,CAA+B,KAAKnF,MAAL,CAAYkD,eAAZ,CAA4BkC,KAA3D;IACA,KAAKpF,MAAL,CAAYqF,iBAAZ,CAA8B,YAA9B;;IACA,IAAI,KAAKrF,MAAL,CAAYsF,UAAZ,EAAJ,EAA8B;MAC1BlG,WAAW,CAAC,CAAC,KAAKY,MAAL,CAAYsF,UAAZ,EAAD,CAAD,EAA6B,CAAC7F,eAAD,CAA7B,CAAX;IACH;;IACDL,WAAW,CAAC6E,OAAD,EAAU,CAACtE,UAAD,CAAV,CAAX;IACA,KAAKK,MAAL,CAAYuF,gBAAZ,CAA6B,YAA7B,EAA2C,IAA3C;IACA,KAAK9D,SAAL,CAAe,KAAKU,cAApB;IACA,KAAKO,iBAAL;IACA,KAAKP,cAAL,CAAoBsB,KAApB;IACA,KAAKzD,MAAL,CAAYwF,WAAZ;;IACA,IAAI,CAAClG,iBAAiB,CAAC,KAAKU,MAAL,CAAYyF,WAAb,CAAlB,IAA+C,CAAC,KAAKzF,MAAL,CAAYwE,cAAZ,CAA2BrB,MAA/E,EAAuF;MACnF,IAAIuC,kBAAkB,GAAG,KAAK1F,MAAL,CAAY0B,OAAZ,CAAoB8B,aAApB,CAAkC,oCAAlC,CAAzB;MACAkC,kBAAkB,CAACd,KAAnB,CAAyBM,OAAzB,GAAmC,MAAnC;IACH;;IACD,KAAKlF,MAAL,CAAY8D,OAAZ,CAAoBtE,MAAM,CAACmG,cAA3B,EAA2C;MAAEhC,WAAW,EAAE,YAAf;MAA6BK,UAAU,EAAE,YAAzC;MAAuDlB,IAAI,EAAEA;IAA7D,CAA3C;IACA,KAAK9C,MAAL,CAAY4F,iBAAZ;EACH,CAxDD;EAyDA;AACJ;AACA;AACA;AACA;AACA;AACA;;;EAEI7F,UAAU,CAACO,SAAX,CAAqBM,gBAArB,GAAwC,UAAUkC,IAAV,EAAgB;IACpD,KAAK9C,MAAL,CAAY6D,MAAZ,GAAqB,KAArB;IACA,KAAK7D,MAAL,CAAY8D,OAAZ,CAAoBtE,MAAM,CAACuE,WAA3B,EAAwC;MAAEJ,WAAW,EAAE,SAAf;MAA0BK,UAAU,EAAE,SAAtC;MAAiDlB,IAAI,EAAEA;IAAvD,CAAxC;IACA,IAAI+C,QAAQ,GAAG,KAAKf,QAAL,EAAf;IACA,KAAK9E,MAAL,CAAY4C,MAAZ,CAAmBpD,MAAM,CAAC4E,iBAA1B,EAA6C;MACzCJ,UAAU,EAAE,SAD6B;MAClBK,UAAU,EAAE,YADM;MAEzCf,WAAW,EAAE,KAAKtD,MAAL,CAAYsE,oBAAZ;IAF4B,CAA7C;IAIA,IAAIwB,cAAc,GAAG,KAAK9F,MAAL,CAAY8F,cAAZ,CAA2BD,QAAQ,CAACb,KAApC,CAArB;IACA,IAAIA,KAAJ;;IACA,IAAIc,cAAc,KAAK,IAAnB,IAA2BA,cAAc,KAAK,EAAlD,EAAsD;MAClD,IAAI,KAAK9F,MAAL,CAAY+F,QAAZ,KAAyB,KAA7B,EAAoC;QAChCf,KAAK,GAAG,kBAAR;MACH,CAFD,MAGK,IAAI,KAAKhF,MAAL,CAAY+F,QAAZ,KAAyB,IAA7B,EAAmC;QACpCf,KAAK,GAAG,OAAR;MACH,CAFI,MAGA;QACDA,KAAK,GAAG,cAAR;MACH;IACJ,CAVD,MAWK;MACDA,KAAK,GAAGc,cAAR;IACH;;IACD,IAAI,KAAK9F,MAAL,CAAYwE,cAAZ,CAA2BrB,MAA/B,EAAuC;MACnC0C,QAAQ,CAACG,aAAT,CAAuBpB,KAAvB,CAA6BM,OAA7B,GAAuC,MAAvC;MACAW,QAAQ,CAACjB,KAAT,CAAeM,OAAf,GAAyB,MAAzB;MACA,KAAK3C,aAAL,CAAmBuC,QAAnB,GAA8BF,KAA9B,CAAoCM,OAApC,GAA8C,OAA9C;MACA,KAAK3C,aAAL,CAAmBC,YAAnB,GAAkCyD,SAAlC,GAA8CjB,KAA9C;IACH,CALD,MAMK;MACDa,QAAQ,CAACjB,KAAT,CAAeM,OAAf,GAAyB,MAAzB;MACA,KAAK3C,aAAL,CAAmBC,YAAnB,GAAkCoC,KAAlC,CAAwCM,OAAxC,GAAkD,OAAlD;MACA,KAAK3C,aAAL,CAAmBC,YAAnB,GAAkCyD,SAAlC,GAA8CjB,KAA9C;IACH;;IACD,KAAKhF,MAAL,CAAY6D,MAAZ,GAAqB,KAArB;IACA,KAAK7D,MAAL,CAAYqF,iBAAZ,CAA8B,KAAKrF,MAAL,CAAYkD,eAAZ,CAA4BkC,KAA1D;;IACA,IAAI,KAAKpF,MAAL,CAAYsF,UAAZ,EAAJ,EAA8B;MAC1BlG,WAAW,CAAC,CAAC,KAAKY,MAAL,CAAYsF,UAAZ,EAAD,CAAD,EAA6B,CAAC7F,eAAD,CAA7B,CAAX;IACH;;IACD,KAAKO,MAAL,CAAYuF,gBAAZ,CAA6B,SAA7B,EAAwC,IAAxC;IACA,KAAKnE,WAAL;IACA,KAAKkB,eAAL;IACA,KAAKC,aAAL,CAAmBC,YAAnB,GAAkCiB,KAAlC;IACA,KAAKzD,MAAL,CAAYwF,WAAZ;;IACA,IAAI,CAAClG,iBAAiB,CAAC,KAAKU,MAAL,CAAYyF,WAAb,CAAlB,IAA+C,KAAKlD,aAAL,CAAmBC,YAAnB,GAAkC0D,SAAlC,CAA4CC,MAA5C,KAAuD,CAA1G,EAA6G;MACzG,IAAIT,kBAAkB,GAAG,KAAK1F,MAAL,CAAY0B,OAAZ,CAAoB8B,aAApB,CAAkC,oCAAlC,CAAzB;MACAkC,kBAAkB,CAACd,KAAnB,CAAyBM,OAAzB,GAAmC,OAAnC;IACH;;IACD,KAAKlF,MAAL,CAAY8D,OAAZ,CAAoBtE,MAAM,CAACmG,cAA3B,EAA2C;MAAEhC,WAAW,EAAE,SAAf;MAA0BK,UAAU,EAAE,SAAtC;MAAiDlB,IAAI,EAAEA;IAAvD,CAA3C;IACA,KAAK9C,MAAL,CAAYc,SAAZ,CAAsBsF,UAAtB,CAAiC,KAAKpG,MAAtC;IACA,KAAKA,MAAL,CAAY4F,iBAAZ;EACH,CApDD;;EAqDA7F,UAAU,CAACO,SAAX,CAAqB2E,gBAArB,GAAwC,YAAY;IAChD,OAAQ,KAAK1C,aAAL,CAAmBC,YAAnB,GAAkCyD,SAAlC,KAAgD,aAAjD,IACF,KAAK1D,aAAL,CAAmBC,YAAnB,GAAkCyD,SAAlC,KAAgD,iBAD9C,IAEF,KAAK1D,aAAL,CAAmBC,YAAnB,GAAkCyD,SAAlC,KAAgD,MAF9C,IAGF,KAAK1D,aAAL,CAAmBC,YAAnB,GAAkC6D,UAAlC,CAA6CF,MAA7C,KAAwD,CAAxD,IACI,KAAK5D,aAAL,CAAmBC,YAAnB,GAAkC6D,UAAlC,CAA6C,CAA7C,EAAgDC,OAAhD,KAA4D,GAA5D,IACG,KAAK/D,aAAL,CAAmBC,YAAnB,GAAkCyD,SAAlC,CAA4CE,MAA5C,KAAuD,CAF9D,IAGI,KAAK5D,aAAL,CAAmBC,YAAnB,GAAkC6D,UAAlC,CAA6C,CAA7C,EAAgDC,OAAhD,KAA4D,KAA5D,IACG,KAAK/D,aAAL,CAAmBC,YAAnB,GAAkCyD,SAAlC,CAA4CE,MAA5C,KAAuD,EAP5D,GAOmE,EAPnE,GAOwE,KAAKnG,MAAL,CAAYgF,KAP3F;EAQH,CATD;EAUA;AACJ;AACA;AACA;AACA;AACA;;;EAEIjF,UAAU,CAACO,SAAX,CAAqBwE,QAArB,GAAgC,YAAY;IACxC,OAAO,KAAK9E,MAAL,CAAY0B,OAAZ,IAAuB,KAAK1B,MAAL,CAAY0B,OAAZ,CAAoB8B,aAApB,CAAkC,oBAAlC,CAA9B;EACH,CAFD;EAGA;AACJ;AACA;AACA;AACA;AACA;;;EAEIzD,UAAU,CAACO,SAAX,CAAqBiG,YAArB,GAAoC,YAAY;IAC5C,OAAQ,KAAKvG,MAAL,CAAYwE,cAAZ,CAA2BrB,MAA3B,IAAqC,KAAK2B,QAAL,EAAtC,GAAyD,KAAKA,QAAL,GAAgBkB,aAAzE,GAAyF,KAAKlB,QAAL,EAAhG;EACH,CAFD;EAGA;AACJ;AACA;AACA;AACA;AACA;;;EAEI/E,UAAU,CAACO,SAAX,CAAqBO,OAArB,GAA+B,YAAY;IACvC,KAAKM,mBAAL;EACH,CAFD;;EAGA,OAAOpB,UAAP;AACH,CA7P+B,EAAhC;;AA8PA,SAASA,UAAT"},"metadata":{},"sourceType":"module"}