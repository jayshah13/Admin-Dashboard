{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { isNullOrUndefined, remove } from '@syncfusion/ej2-base';\nimport { formatUnit } from '@syncfusion/ej2-base';\nimport { Browser } from '@syncfusion/ej2-base';\nimport { colGroupRefresh, columnWidthChanged, scroll, columnVisibilityChanged, refreshFooterRenderer } from '../base/constant';\nimport { ContentRender } from './content-renderer';\nimport { RowRenderer } from './row-renderer';\nimport { SummaryModelGenerator } from '../services/summary-model-generator';\nimport { renderMovable, calculateAggregate, iterateExtend, addRemoveEventListener } from '../base/util';\nimport { DataUtil } from '@syncfusion/ej2-data';\nimport * as literals from '../base/string-literals';\n/**\n * Footer module is used to render grid content\n *\n * @hidden\n */\n\nvar FooterRenderer =\n/** @class */\nfunction (_super) {\n  __extends(FooterRenderer, _super);\n\n  function FooterRenderer(gridModule, serviceLocator) {\n    var _this = _super.call(this, gridModule, serviceLocator) || this;\n\n    _this.aggregates = {};\n    _this.parent = gridModule;\n    _this.locator = serviceLocator;\n    _this.modelGenerator = new SummaryModelGenerator(_this.parent);\n\n    _this.addEventListener();\n\n    return _this;\n  }\n  /**\n   * The function is used to render grid footer div\n   *\n   * @returns {void}\n   */\n\n\n  FooterRenderer.prototype.renderPanel = function () {\n    var div = this.parent.createElement('div', {\n      className: literals.gridFooter\n    });\n    var innerDiv = this.parent.createElement('div', {\n      className: 'e-summarycontent'\n    });\n    var movableContent = innerDiv;\n\n    if (this.parent.isFrozenGrid()) {\n      var fDiv = this.parent.createElement('div', {\n        className: 'e-frozenfootercontent e-frozen-left-footercontent'\n      });\n      var mDiv = this.parent.createElement('div', {\n        className: 'e-movablefootercontent'\n      });\n      var frDiv = this.parent.createElement('div', {\n        className: 'e-frozenfootercontent e-frozen-right-footercontent'\n      });\n\n      if (this.parent.getFrozenColumns() || this.parent.getFrozenLeftColumnsCount()) {\n        innerDiv.appendChild(fDiv);\n        this.frozenContent = fDiv;\n      }\n\n      innerDiv.appendChild(mDiv);\n      this.movableContent = mDiv;\n      movableContent = mDiv;\n\n      if (this.parent.getFrozenRightColumnsCount()) {\n        innerDiv.appendChild(frDiv);\n        this.frozenRightContent = frDiv;\n      }\n    }\n\n    if (Browser.isDevice) {\n      movableContent.style.overflowX = 'scroll';\n    }\n\n    div.appendChild(innerDiv);\n    this.setPanel(div);\n\n    if (this.parent.getPager() != null) {\n      this.parent.element.insertBefore(div, this.parent.getPager());\n    } else {\n      this.parent.element.appendChild(div);\n    }\n  };\n  /**\n   * The function is used to render grid footer table\n   *\n   * @returns {void}\n   */\n\n\n  FooterRenderer.prototype.renderTable = function () {\n    var frzCols = this.parent.getFrozenColumns() || this.parent.getFrozenLeftColumnsCount();\n    var innerDiv = this.createContentTable('_footer_table');\n    var table = innerDiv.querySelector('.' + literals.table);\n    var tFoot = this.parent.createElement('tfoot');\n    table.appendChild(tFoot);\n\n    if (this.parent.isFrozenGrid()) {\n      var freezeTable = table.cloneNode(true);\n      var frTable = table.cloneNode(true);\n\n      if (frzCols) {\n        this.frozenContent.appendChild(freezeTable);\n        this.freezeTable = freezeTable;\n      }\n\n      if (this.parent.getFrozenRightColumnsCount()) {\n        remove(frTable.querySelector(literals.colGroup));\n        var hdr = this.parent.getHeaderContent().querySelector('.e-frozen-right-header');\n        var frCol = hdr.querySelector(literals.colGroup).cloneNode(true);\n        frTable.insertBefore(frCol, frTable.querySelector(literals.tbody));\n        this.frozenRightContent.appendChild(frTable);\n        this.frTable = frTable;\n      }\n\n      this.movableContent.appendChild(table);\n      remove(table.querySelector(literals.colGroup));\n      var colGroup = this.parent.getHeaderContent().querySelector('.' + literals.movableHeader).querySelector(literals.colGroup).cloneNode(true);\n      table.insertBefore(colGroup, table.querySelector(literals.tbody));\n      this.setColGroup(colGroup);\n    }\n\n    this.setTable(table);\n  };\n\n  FooterRenderer.prototype.renderSummaryContent = function (e, table, cStart, cEnd) {\n    var input = this.parent.dataSource instanceof Array ? !this.parent.getDataModule().isRemote() && this.parent.parentDetails ? this.getData() : this.parent.dataSource : this.parent.currentViewData;\n    var summaries = this.modelGenerator.getData();\n    var dummies = isNullOrUndefined(cStart) ? this.modelGenerator.getColumns() : this.modelGenerator.getColumns(cStart, cEnd); // eslint-disable-next-line max-len\n\n    var rows = isNullOrUndefined(cStart) ? this.modelGenerator.generateRows(input, e || this.aggregates) : this.modelGenerator.generateRows(input, e || this.aggregates, cStart, cEnd);\n    var fragment = document.createDocumentFragment();\n    var rowrenderer = new RowRenderer(this.locator, null, this.parent);\n    rowrenderer.element = this.parent.createElement('TR', {\n      className: 'e-summaryrow'\n    });\n\n    for (var srow = 0, len = summaries.length; srow < len; srow++) {\n      var row = rows[srow];\n\n      if (!row) {\n        continue;\n      }\n\n      var tr = rowrenderer.render(row, dummies);\n      fragment.appendChild(tr);\n    }\n\n    table.tFoot.appendChild(fragment);\n    this.aggregates = !isNullOrUndefined(e) ? e : this.aggregates;\n  };\n\n  FooterRenderer.prototype.refresh = function (e) {\n    var frzCols = this.parent.getFrozenColumns() || this.parent.getFrozenLeftColumnsCount();\n    var movable = this.parent.getMovableColumnsCount();\n    var right = this.parent.getFrozenRightColumnsCount();\n\n    if (this.parent.isFrozenGrid()) {\n      remove(this.getPanel());\n      this.renderPanel();\n      this.renderTable();\n\n      if (frzCols) {\n        this.freezeTable.tFoot.innerHTML = '';\n        this.renderSummaryContent(e, this.freezeTable, 0, frzCols);\n      }\n    }\n\n    this.getTable().tFoot.innerHTML = '';\n    this.renderSummaryContent(e, this.getTable(), frzCols, right ? frzCols + movable : undefined);\n\n    if (this.parent.getFrozenRightColumnsCount()) {\n      this.frTable.tFoot.innerHTML = '';\n      this.renderSummaryContent(e, this.frTable, frzCols + movable, frzCols + movable + right);\n      var movableLastCell = [].slice.call(this.getTable().getElementsByClassName('e-lastsummarycell'));\n\n      if (movableLastCell.length) {\n        for (var i = 0; i < movableLastCell.length; i++) {\n          movableLastCell[i].style.borderRight = '0px';\n        }\n      }\n    } // check freeze content have no row case\n\n\n    if (this.parent.isFrozenGrid()) {\n      var movableCnt = [].slice.call(this.parent.element.querySelector('.e-movablefootercontent').getElementsByClassName('e-summaryrow'));\n      var frozenCnt = void 0;\n\n      if (frzCols) {\n        frozenCnt = [].slice.call(this.parent.element.querySelector('.e-frozen-left-footercontent').getElementsByClassName('e-summaryrow'));\n        this.refreshHeight(frozenCnt, movableCnt);\n        var frozenDiv = this.frozenContent;\n\n        if (!frozenDiv.offsetHeight) {\n          frozenDiv.style.height = this.getTable().offsetHeight + 'px';\n        }\n      }\n\n      if (right) {\n        var frCnt = [].slice.call(this.parent.element.querySelector('.e-frozen-right-footercontent').getElementsByClassName('e-summaryrow'));\n        this.refreshHeight(frCnt, movableCnt);\n\n        if (frozenCnt) {\n          this.refreshHeight(frCnt, frozenCnt);\n        }\n\n        var frDiv = this.frTable;\n\n        if (!frDiv.offsetHeight) {\n          frDiv.style.height = this.getTable().offsetHeight + 'px';\n        }\n      }\n\n      if (this.parent.allowResizing) {\n        this.updateFooterTableWidth(this.getTable());\n      }\n    }\n\n    if (isNullOrUndefined(e) && this.parent.isAutoFitColumns) {\n      this.parent.autoFitColumns();\n    }\n\n    this.onScroll();\n  };\n\n  FooterRenderer.prototype.refreshHeight = function (frozenCnt, movableCnt) {\n    for (var i = 0; i < frozenCnt.length; i++) {\n      var frozenHeight = frozenCnt[i].getBoundingClientRect().height;\n      var movableHeight = movableCnt[i].getBoundingClientRect().height;\n\n      if (frozenHeight < movableHeight) {\n        frozenCnt[i].classList.remove('e-hide');\n        frozenCnt[i].style.height = movableHeight + 'px';\n      } else if (frozenHeight > movableHeight) {\n        movableCnt[i].classList.remove('e-hide');\n        movableCnt[i].style.height = frozenHeight + 'px';\n      }\n    }\n  };\n\n  FooterRenderer.prototype.refreshCol = function () {\n    // frozen table\n    var mheaderCol;\n    var fheaderCol = mheaderCol = this.parent.element.querySelector('.' + literals.gridHeader).querySelector(literals.colGroup).cloneNode(true);\n\n    if (this.parent.getFrozenColumns()) {\n      // eslint-disable-next-line max-len\n      var isXaxis = this.parent.enableColumnVirtualization && this.parent.contentModule.isXaxis();\n\n      if (isXaxis) {\n        mheaderCol = this.parent.getMovableVirtualHeader().querySelector(literals.colGroup).cloneNode(true);\n      } else {\n        mheaderCol = renderMovable(fheaderCol, this.parent.getFrozenColumns(), this.parent);\n        this.freezeTable.replaceChild(fheaderCol, this.freezeTable.querySelector(literals.colGroup));\n      }\n    }\n\n    this.getTable().replaceChild(mheaderCol, this.getColGroup());\n    this.setColGroup(mheaderCol);\n  };\n\n  FooterRenderer.prototype.onWidthChange = function (args) {\n    this.getColFromIndex(args.index).style.width = formatUnit(args.width);\n\n    if (this.parent.allowResizing && args.module === 'resize') {\n      this.updateFooterTableWidth(this.getTable());\n    }\n  };\n\n  FooterRenderer.prototype.onScroll = function (e) {\n    if (e === void 0) {\n      e = {\n        left: this.parent.isFrozenGrid() ? this.parent.getContent().querySelector('.' + literals.movableContent).scrollLeft : this.parent.getContent().firstChild.scrollLeft\n      };\n    }\n\n    this.getTable().parentElement.scrollLeft = e.left;\n  };\n\n  FooterRenderer.prototype.getColFromIndex = function (index) {\n    var left = this.parent.getFrozenLeftColumnsCount() || this.parent.getFrozenColumns();\n    var movable = this.parent.getMovableColumnsCount();\n    var right = this.parent.getFrozenRightColumnsCount();\n    var isDrag = this.parent.isRowDragable() && !(this.parent.getFrozenMode() === 'Right') ? 1 : 0;\n\n    if (left && index < left + isDrag) {\n      return this.freezeTable.querySelector(literals.colGroup).children[index];\n    } else if (right && index >= left + movable + isDrag) {\n      return this.frTable.querySelector(literals.colGroup).children[index - (left ? left + movable + isDrag : left + movable)];\n    }\n\n    return this.getColGroup().children[index - (left ? left + isDrag : left)];\n  };\n\n  FooterRenderer.prototype.columnVisibilityChanged = function () {\n    this.refresh();\n  };\n\n  FooterRenderer.prototype.addEventListener = function () {\n    this.evtHandlers = [{\n      event: colGroupRefresh,\n      handler: this.refreshCol\n    }, {\n      event: columnWidthChanged,\n      handler: this.onWidthChange\n    }, {\n      event: scroll,\n      handler: this.onScroll\n    }, {\n      event: columnVisibilityChanged,\n      handler: this.columnVisibilityChanged\n    }, {\n      event: refreshFooterRenderer,\n      handler: this.refreshFooterRenderer\n    }];\n    addRemoveEventListener(this.parent, this.evtHandlers, true, this);\n  };\n\n  FooterRenderer.prototype.removeEventListener = function () {\n    addRemoveEventListener(this.parent, this.evtHandlers, false);\n  };\n\n  FooterRenderer.prototype.updateFooterTableWidth = function (tFoot) {\n    var tHead = this.parent.getHeaderTable();\n\n    if (tHead && tFoot) {\n      tFoot.style.width = tHead.style.width;\n    }\n  };\n\n  FooterRenderer.prototype.refreshFooterRenderer = function (editedData) {\n    var aggregates = this.onAggregates(editedData);\n    this.refresh(aggregates);\n  };\n\n  FooterRenderer.prototype.getIndexByKey = function (data, ds) {\n    var key = this.parent.getPrimaryKeyFieldNames()[0];\n\n    for (var i = 0; i < ds.length; i++) {\n      if (ds[i][key] === data[key]) {\n        return i;\n      }\n    }\n\n    return -1;\n  };\n\n  FooterRenderer.prototype.getData = function () {\n    return this.parent.getDataModule().dataManager.executeLocal(this.parent.getDataModule().generateQuery(true));\n  };\n\n  FooterRenderer.prototype.onAggregates = function (editedData) {\n    editedData = editedData instanceof Array ? editedData : [];\n    var field = this.parent.getPrimaryKeyFieldNames()[0];\n    var dataSource = [];\n    var isModified = false;\n    var batchChanges = {};\n    var gridData = 'dataSource';\n    var isFiltered = false;\n\n    if (!this.parent.renderModule.data.isRemote() && this.parent.allowFiltering && this.parent.filterSettings.columns.length) {\n      isFiltered = true;\n    }\n\n    var currentViewData = this.parent.dataSource instanceof Array ? isFiltered ? this.parent.getFilteredRecords() : this.parent.dataSource : this.parent.dataSource[gridData].json.length ? this.parent.dataSource[gridData].json : this.parent.getCurrentViewRecords();\n\n    if (this.parent.parentDetails && !this.parent.getDataModule().isRemote()) {\n      currentViewData = this.getData();\n    }\n\n    if (this.parent.editModule) {\n      batchChanges = this.parent.editModule.getBatchChanges();\n    }\n\n    if (Object.keys(batchChanges).length) {\n      for (var i = 0; i < currentViewData.length; i++) {\n        isModified = false; // eslint-disable-next-line max-len\n\n        if (batchChanges[literals.changedRecords].length && this.getIndexByKey(currentViewData[i], batchChanges[literals.changedRecords]) > -1) {\n          isModified = true; // eslint-disable-next-line max-len\n\n          dataSource.push(batchChanges[literals.changedRecords][this.getIndexByKey(currentViewData[i], batchChanges[literals.changedRecords])]);\n        } // eslint-disable-next-line max-len\n\n\n        if (batchChanges[literals.deletedRecords].length && this.getIndexByKey(currentViewData[i], batchChanges[literals.deletedRecords]) > -1) {\n          isModified = true;\n        } else if (!isModified) {\n          dataSource.push(currentViewData[i]);\n        }\n      }\n\n      if (batchChanges[literals.addedRecords].length) {\n        for (var i = 0; i < batchChanges[literals.addedRecords].length; i++) {\n          dataSource.push(batchChanges[literals.addedRecords][i]);\n        }\n      }\n    } else {\n      if (editedData.length) {\n        var data = iterateExtend(currentViewData);\n        dataSource = data.map(function (item) {\n          var idVal = DataUtil.getObject(field, item);\n          var value;\n          var hasVal = editedData.some(function (cItem) {\n            value = cItem;\n            return idVal === DataUtil.getObject(field, cItem);\n          });\n          return hasVal ? value : item;\n        });\n      } else {\n        dataSource = currentViewData;\n      }\n    }\n\n    var eData = editedData;\n\n    if (eData.type && eData.type === 'cancel') {\n      dataSource = currentViewData;\n    }\n\n    var aggregate = {};\n    var agrVal;\n    var aggregateRows = this.parent.aggregates;\n\n    for (var i = 0; i < aggregateRows.length; i++) {\n      for (var j = 0; j < aggregateRows[i].columns.length; j++) {\n        var data = [];\n        var type = aggregateRows[i].columns[j].type.toString();\n        data = dataSource;\n        agrVal = calculateAggregate(type, data, aggregateRows[i].columns[j], this.parent);\n        aggregate[aggregateRows[i].columns[j].field + ' - ' + type.toLowerCase()] = agrVal;\n      }\n    }\n\n    var result = {\n      result: dataSource,\n      count: dataSource.length,\n      aggregates: aggregate\n    };\n    return result;\n  };\n\n  return FooterRenderer;\n}(ContentRender);\n\nexport { FooterRenderer };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","isNullOrUndefined","remove","formatUnit","Browser","colGroupRefresh","columnWidthChanged","scroll","columnVisibilityChanged","refreshFooterRenderer","ContentRender","RowRenderer","SummaryModelGenerator","renderMovable","calculateAggregate","iterateExtend","addRemoveEventListener","DataUtil","literals","FooterRenderer","_super","gridModule","serviceLocator","_this","call","aggregates","parent","locator","modelGenerator","addEventListener","renderPanel","div","createElement","className","gridFooter","innerDiv","movableContent","isFrozenGrid","fDiv","mDiv","frDiv","getFrozenColumns","getFrozenLeftColumnsCount","appendChild","frozenContent","getFrozenRightColumnsCount","frozenRightContent","isDevice","style","overflowX","setPanel","getPager","element","insertBefore","renderTable","frzCols","createContentTable","table","querySelector","tFoot","freezeTable","cloneNode","frTable","colGroup","hdr","getHeaderContent","frCol","tbody","movableHeader","setColGroup","setTable","renderSummaryContent","e","cStart","cEnd","input","dataSource","getDataModule","isRemote","parentDetails","getData","currentViewData","summaries","dummies","getColumns","rows","generateRows","fragment","document","createDocumentFragment","rowrenderer","srow","len","length","row","tr","render","refresh","movable","getMovableColumnsCount","right","getPanel","innerHTML","getTable","undefined","movableLastCell","slice","getElementsByClassName","i","borderRight","movableCnt","frozenCnt","refreshHeight","frozenDiv","offsetHeight","height","frCnt","allowResizing","updateFooterTableWidth","isAutoFitColumns","autoFitColumns","onScroll","frozenHeight","getBoundingClientRect","movableHeight","classList","refreshCol","mheaderCol","fheaderCol","gridHeader","isXaxis","enableColumnVirtualization","contentModule","getMovableVirtualHeader","replaceChild","getColGroup","onWidthChange","args","getColFromIndex","index","width","module","left","getContent","scrollLeft","firstChild","parentElement","isDrag","isRowDragable","getFrozenMode","children","evtHandlers","event","handler","removeEventListener","tHead","getHeaderTable","editedData","onAggregates","getIndexByKey","data","ds","key","getPrimaryKeyFieldNames","dataManager","executeLocal","generateQuery","field","isModified","batchChanges","gridData","isFiltered","renderModule","allowFiltering","filterSettings","columns","getFilteredRecords","json","getCurrentViewRecords","editModule","getBatchChanges","keys","changedRecords","push","deletedRecords","addedRecords","map","item","idVal","getObject","value","hasVal","some","cItem","eData","type","aggregate","agrVal","aggregateRows","j","toString","toLowerCase","result","count"],"sources":["C:/Users/shahj/OneDrive/Documents/GitHub/Multifunctional-React-Dashboard/node_modules/@syncfusion/ej2-grids/src/grid/renderer/footer-renderer.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, remove } from '@syncfusion/ej2-base';\nimport { formatUnit } from '@syncfusion/ej2-base';\nimport { Browser } from '@syncfusion/ej2-base';\nimport { colGroupRefresh, columnWidthChanged, scroll, columnVisibilityChanged, refreshFooterRenderer } from '../base/constant';\nimport { ContentRender } from './content-renderer';\nimport { RowRenderer } from './row-renderer';\nimport { SummaryModelGenerator } from '../services/summary-model-generator';\nimport { renderMovable, calculateAggregate, iterateExtend, addRemoveEventListener } from '../base/util';\nimport { DataUtil } from '@syncfusion/ej2-data';\nimport * as literals from '../base/string-literals';\n/**\n * Footer module is used to render grid content\n *\n * @hidden\n */\nvar FooterRenderer = /** @class */ (function (_super) {\n    __extends(FooterRenderer, _super);\n    function FooterRenderer(gridModule, serviceLocator) {\n        var _this = _super.call(this, gridModule, serviceLocator) || this;\n        _this.aggregates = {};\n        _this.parent = gridModule;\n        _this.locator = serviceLocator;\n        _this.modelGenerator = new SummaryModelGenerator(_this.parent);\n        _this.addEventListener();\n        return _this;\n    }\n    /**\n     * The function is used to render grid footer div\n     *\n     * @returns {void}\n     */\n    FooterRenderer.prototype.renderPanel = function () {\n        var div = this.parent.createElement('div', { className: literals.gridFooter });\n        var innerDiv = this.parent.createElement('div', { className: 'e-summarycontent' });\n        var movableContent = innerDiv;\n        if (this.parent.isFrozenGrid()) {\n            var fDiv = this.parent.createElement('div', { className: 'e-frozenfootercontent e-frozen-left-footercontent' });\n            var mDiv = this.parent.createElement('div', { className: 'e-movablefootercontent' });\n            var frDiv = this.parent.createElement('div', { className: 'e-frozenfootercontent e-frozen-right-footercontent' });\n            if (this.parent.getFrozenColumns() || this.parent.getFrozenLeftColumnsCount()) {\n                innerDiv.appendChild(fDiv);\n                this.frozenContent = fDiv;\n            }\n            innerDiv.appendChild(mDiv);\n            this.movableContent = mDiv;\n            movableContent = mDiv;\n            if (this.parent.getFrozenRightColumnsCount()) {\n                innerDiv.appendChild(frDiv);\n                this.frozenRightContent = frDiv;\n            }\n        }\n        if (Browser.isDevice) {\n            movableContent.style.overflowX = 'scroll';\n        }\n        div.appendChild(innerDiv);\n        this.setPanel(div);\n        if (this.parent.getPager() != null) {\n            this.parent.element.insertBefore(div, this.parent.getPager());\n        }\n        else {\n            this.parent.element.appendChild(div);\n        }\n    };\n    /**\n     * The function is used to render grid footer table\n     *\n     * @returns {void}\n     */\n    FooterRenderer.prototype.renderTable = function () {\n        var frzCols = this.parent.getFrozenColumns() || this.parent.getFrozenLeftColumnsCount();\n        var innerDiv = this.createContentTable('_footer_table');\n        var table = innerDiv.querySelector('.' + literals.table);\n        var tFoot = this.parent.createElement('tfoot');\n        table.appendChild(tFoot);\n        if (this.parent.isFrozenGrid()) {\n            var freezeTable = table.cloneNode(true);\n            var frTable = table.cloneNode(true);\n            if (frzCols) {\n                this.frozenContent.appendChild(freezeTable);\n                this.freezeTable = freezeTable;\n            }\n            if (this.parent.getFrozenRightColumnsCount()) {\n                remove(frTable.querySelector(literals.colGroup));\n                var hdr = this.parent.getHeaderContent().querySelector('.e-frozen-right-header');\n                var frCol = (hdr.querySelector(literals.colGroup).cloneNode(true));\n                frTable.insertBefore(frCol, frTable.querySelector(literals.tbody));\n                this.frozenRightContent.appendChild(frTable);\n                this.frTable = frTable;\n            }\n            this.movableContent.appendChild(table);\n            remove(table.querySelector(literals.colGroup));\n            var colGroup = ((this.parent.getHeaderContent().querySelector('.' + literals.movableHeader).querySelector(literals.colGroup)).cloneNode(true));\n            table.insertBefore(colGroup, table.querySelector(literals.tbody));\n            this.setColGroup(colGroup);\n        }\n        this.setTable(table);\n    };\n    FooterRenderer.prototype.renderSummaryContent = function (e, table, cStart, cEnd) {\n        var input = this.parent.dataSource instanceof Array ? !this.parent.getDataModule().isRemote() &&\n            this.parent.parentDetails ? this.getData() : this.parent.dataSource : this.parent.currentViewData;\n        var summaries = this.modelGenerator.getData();\n        var dummies = isNullOrUndefined(cStart) ? this.modelGenerator.getColumns() :\n            this.modelGenerator.getColumns(cStart, cEnd);\n        // eslint-disable-next-line max-len\n        var rows = isNullOrUndefined(cStart) ? this.modelGenerator.generateRows(input, e || this.aggregates) :\n            this.modelGenerator.generateRows(input, e || this.aggregates, cStart, cEnd);\n        var fragment = document.createDocumentFragment();\n        var rowrenderer = new RowRenderer(this.locator, null, this.parent);\n        rowrenderer.element = this.parent.createElement('TR', { className: 'e-summaryrow' });\n        for (var srow = 0, len = summaries.length; srow < len; srow++) {\n            var row = rows[srow];\n            if (!row) {\n                continue;\n            }\n            var tr = rowrenderer.render(row, dummies);\n            fragment.appendChild(tr);\n        }\n        table.tFoot.appendChild(fragment);\n        this.aggregates = !isNullOrUndefined(e) ? e : this.aggregates;\n    };\n    FooterRenderer.prototype.refresh = function (e) {\n        var frzCols = this.parent.getFrozenColumns() || this.parent.getFrozenLeftColumnsCount();\n        var movable = this.parent.getMovableColumnsCount();\n        var right = this.parent.getFrozenRightColumnsCount();\n        if (this.parent.isFrozenGrid()) {\n            remove(this.getPanel());\n            this.renderPanel();\n            this.renderTable();\n            if (frzCols) {\n                this.freezeTable.tFoot.innerHTML = '';\n                this.renderSummaryContent(e, this.freezeTable, 0, frzCols);\n            }\n        }\n        this.getTable().tFoot.innerHTML = '';\n        this.renderSummaryContent(e, this.getTable(), frzCols, right ? frzCols + movable : undefined);\n        if (this.parent.getFrozenRightColumnsCount()) {\n            this.frTable.tFoot.innerHTML = '';\n            this.renderSummaryContent(e, this.frTable, frzCols + movable, frzCols + movable + right);\n            var movableLastCell = [].slice.call(this.getTable().getElementsByClassName('e-lastsummarycell'));\n            if (movableLastCell.length) {\n                for (var i = 0; i < movableLastCell.length; i++) {\n                    movableLastCell[i].style.borderRight = '0px';\n                }\n            }\n        }\n        // check freeze content have no row case\n        if (this.parent.isFrozenGrid()) {\n            var movableCnt = [].slice.call(this.parent.element.querySelector('.e-movablefootercontent')\n                .getElementsByClassName('e-summaryrow'));\n            var frozenCnt = void 0;\n            if (frzCols) {\n                frozenCnt = [].slice.call(this.parent.element.querySelector('.e-frozen-left-footercontent')\n                    .getElementsByClassName('e-summaryrow'));\n                this.refreshHeight(frozenCnt, movableCnt);\n                var frozenDiv = this.frozenContent;\n                if (!frozenDiv.offsetHeight) {\n                    frozenDiv.style.height = this.getTable().offsetHeight + 'px';\n                }\n            }\n            if (right) {\n                var frCnt = [].slice.call(this.parent.element.querySelector('.e-frozen-right-footercontent')\n                    .getElementsByClassName('e-summaryrow'));\n                this.refreshHeight(frCnt, movableCnt);\n                if (frozenCnt) {\n                    this.refreshHeight(frCnt, frozenCnt);\n                }\n                var frDiv = this.frTable;\n                if (!frDiv.offsetHeight) {\n                    frDiv.style.height = this.getTable().offsetHeight + 'px';\n                }\n            }\n            if (this.parent.allowResizing) {\n                this.updateFooterTableWidth(this.getTable());\n            }\n        }\n        if (isNullOrUndefined(e) && this.parent.isAutoFitColumns) {\n            this.parent.autoFitColumns();\n        }\n        this.onScroll();\n    };\n    FooterRenderer.prototype.refreshHeight = function (frozenCnt, movableCnt) {\n        for (var i = 0; i < frozenCnt.length; i++) {\n            var frozenHeight = frozenCnt[i].getBoundingClientRect().height;\n            var movableHeight = movableCnt[i].getBoundingClientRect().height;\n            if (frozenHeight < movableHeight) {\n                frozenCnt[i].classList.remove('e-hide');\n                frozenCnt[i].style.height = movableHeight + 'px';\n            }\n            else if (frozenHeight > movableHeight) {\n                movableCnt[i].classList.remove('e-hide');\n                movableCnt[i].style.height = frozenHeight + 'px';\n            }\n        }\n    };\n    FooterRenderer.prototype.refreshCol = function () {\n        // frozen table\n        var mheaderCol;\n        var fheaderCol = mheaderCol = this.parent.element.querySelector('.' + literals.gridHeader).querySelector(literals.colGroup).cloneNode(true);\n        if (this.parent.getFrozenColumns()) {\n            // eslint-disable-next-line max-len\n            var isXaxis = this.parent.enableColumnVirtualization && this.parent.contentModule.isXaxis();\n            if (isXaxis) {\n                mheaderCol = this.parent.getMovableVirtualHeader().querySelector(literals.colGroup).cloneNode(true);\n            }\n            else {\n                mheaderCol = renderMovable(fheaderCol, this.parent.getFrozenColumns(), this.parent);\n                this.freezeTable.replaceChild(fheaderCol, this.freezeTable.querySelector(literals.colGroup));\n            }\n        }\n        this.getTable().replaceChild(mheaderCol, this.getColGroup());\n        this.setColGroup(mheaderCol);\n    };\n    FooterRenderer.prototype.onWidthChange = function (args) {\n        this.getColFromIndex(args.index).style.width = formatUnit(args.width);\n        if (this.parent.allowResizing && args.module === 'resize') {\n            this.updateFooterTableWidth(this.getTable());\n        }\n    };\n    FooterRenderer.prototype.onScroll = function (e) {\n        if (e === void 0) { e = {\n            left: this.parent.isFrozenGrid() ? this.parent.getContent().querySelector('.' + literals.movableContent).scrollLeft :\n                this.parent.getContent().firstChild.scrollLeft\n        }; }\n        this.getTable().parentElement.scrollLeft = e.left;\n    };\n    FooterRenderer.prototype.getColFromIndex = function (index) {\n        var left = this.parent.getFrozenLeftColumnsCount() || this.parent.getFrozenColumns();\n        var movable = this.parent.getMovableColumnsCount();\n        var right = this.parent.getFrozenRightColumnsCount();\n        var isDrag = this.parent.isRowDragable() && !(this.parent.getFrozenMode() === 'Right') ? 1 : 0;\n        if (left && index < (left + isDrag)) {\n            return this.freezeTable.querySelector(literals.colGroup).children[index];\n        }\n        else if (right && (index >= (left + movable + isDrag))) {\n            return this.frTable.querySelector(literals.colGroup).children[index - (left ? (left + movable + isDrag) :\n                (left + movable))];\n        }\n        return this.getColGroup().children[index - (left ? (left + isDrag) : left)];\n    };\n    FooterRenderer.prototype.columnVisibilityChanged = function () {\n        this.refresh();\n    };\n    FooterRenderer.prototype.addEventListener = function () {\n        this.evtHandlers = [{ event: colGroupRefresh, handler: this.refreshCol },\n            { event: columnWidthChanged, handler: this.onWidthChange },\n            { event: scroll, handler: this.onScroll },\n            { event: columnVisibilityChanged, handler: this.columnVisibilityChanged },\n            { event: refreshFooterRenderer, handler: this.refreshFooterRenderer }];\n        addRemoveEventListener(this.parent, this.evtHandlers, true, this);\n    };\n    FooterRenderer.prototype.removeEventListener = function () {\n        addRemoveEventListener(this.parent, this.evtHandlers, false);\n    };\n    FooterRenderer.prototype.updateFooterTableWidth = function (tFoot) {\n        var tHead = this.parent.getHeaderTable();\n        if (tHead && tFoot) {\n            tFoot.style.width = tHead.style.width;\n        }\n    };\n    FooterRenderer.prototype.refreshFooterRenderer = function (editedData) {\n        var aggregates = this.onAggregates(editedData);\n        this.refresh(aggregates);\n    };\n    FooterRenderer.prototype.getIndexByKey = function (data, ds) {\n        var key = this.parent.getPrimaryKeyFieldNames()[0];\n        for (var i = 0; i < ds.length; i++) {\n            if (ds[i][key] === data[key]) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    FooterRenderer.prototype.getData = function () {\n        return this.parent.getDataModule().dataManager.executeLocal(this.parent.getDataModule().generateQuery(true));\n    };\n    FooterRenderer.prototype.onAggregates = function (editedData) {\n        editedData = editedData instanceof Array ? editedData : [];\n        var field = this.parent.getPrimaryKeyFieldNames()[0];\n        var dataSource = [];\n        var isModified = false;\n        var batchChanges = {};\n        var gridData = 'dataSource';\n        var isFiltered = false;\n        if (!this.parent.renderModule.data.isRemote() && this.parent.allowFiltering && this.parent.filterSettings.columns.length) {\n            isFiltered = true;\n        }\n        var currentViewData = this.parent.dataSource instanceof Array ?\n            (isFiltered ? this.parent.getFilteredRecords() : this.parent.dataSource) : (this.parent.dataSource[gridData].json.length ?\n            this.parent.dataSource[gridData].json : this.parent.getCurrentViewRecords());\n        if (this.parent.parentDetails && !this.parent.getDataModule().isRemote()) {\n            currentViewData = this.getData();\n        }\n        if (this.parent.editModule) {\n            batchChanges = this.parent.editModule.getBatchChanges();\n        }\n        if (Object.keys(batchChanges).length) {\n            for (var i = 0; i < currentViewData.length; i++) {\n                isModified = false;\n                // eslint-disable-next-line max-len\n                if (batchChanges[literals.changedRecords].length && this.getIndexByKey(currentViewData[i], batchChanges[literals.changedRecords]) > -1) {\n                    isModified = true;\n                    // eslint-disable-next-line max-len\n                    dataSource.push(batchChanges[literals.changedRecords][this.getIndexByKey(currentViewData[i], batchChanges[literals.changedRecords])]);\n                }\n                // eslint-disable-next-line max-len\n                if (batchChanges[literals.deletedRecords].length && this.getIndexByKey(currentViewData[i], batchChanges[literals.deletedRecords]) > -1) {\n                    isModified = true;\n                }\n                else if (!isModified) {\n                    dataSource.push(currentViewData[i]);\n                }\n            }\n            if (batchChanges[literals.addedRecords].length) {\n                for (var i = 0; i < batchChanges[literals.addedRecords].length; i++) {\n                    dataSource.push(batchChanges[literals.addedRecords][i]);\n                }\n            }\n        }\n        else {\n            if (editedData.length) {\n                var data = iterateExtend(currentViewData);\n                dataSource = data.map(function (item) {\n                    var idVal = DataUtil.getObject(field, item);\n                    var value;\n                    var hasVal = editedData.some(function (cItem) {\n                        value = cItem;\n                        return idVal === DataUtil.getObject(field, cItem);\n                    });\n                    return hasVal ? value : item;\n                });\n            }\n            else {\n                dataSource = currentViewData;\n            }\n        }\n        var eData = editedData;\n        if ((eData.type && eData.type === 'cancel')) {\n            dataSource = currentViewData;\n        }\n        var aggregate = {};\n        var agrVal;\n        var aggregateRows = this.parent.aggregates;\n        for (var i = 0; i < aggregateRows.length; i++) {\n            for (var j = 0; j < aggregateRows[i].columns.length; j++) {\n                var data = [];\n                var type = aggregateRows[i].columns[j].type.toString();\n                data = dataSource;\n                agrVal = calculateAggregate(type, data, aggregateRows[i].columns[j], this.parent);\n                aggregate[aggregateRows[i].columns[j].field + ' - ' + type.toLowerCase()] = agrVal;\n            }\n        }\n        var result = {\n            result: dataSource,\n            count: dataSource.length,\n            aggregates: aggregate\n        };\n        return result;\n    };\n    return FooterRenderer;\n}(ContentRender));\nexport { FooterRenderer };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}