{"ast":null,"code":"import { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { closest as closestElement, removeClass, classList, remove } from '@syncfusion/ej2-base';\nimport { getElementIndex, inArray, parentsUntil, getPosition, isActionPrevent } from '../base/util';\nimport * as events from '../base/constant';\nimport * as literals from '../base/string-literals';\n/**\n *\n * The `Reorder` module is used for reordering columns.\n */\n\nvar Reorder =\n/** @class */\nfunction () {\n  /**\n   * Constructor for the Grid reorder module\n   *\n   * @param {IGrid} parent - specifies the IGrid\n   * @hidden\n   */\n  function Reorder(parent) {\n    this.parent = parent;\n\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.on(events.headerDrop, this.headerDrop, this);\n    this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n    this.parent.on(events.reorderComplete, this.onActionComplete, this);\n    this.parent.on(events.columnDrag, this.drag, this);\n    this.parent.on(events.columnDragStart, this.dragStart, this);\n    this.parent.on(events.columnDragStop, this.dragStop, this);\n    this.parent.on(events.headerDrop, this.headerDrop, this);\n    this.parent.on(events.headerRefreshed, this.createReorderElement, this);\n    this.parent.on(events.keyPressed, this.keyPressHandler, this);\n    this.parent.on(events.destroy, this.destroy, this);\n  }\n\n  Reorder.prototype.chkDropPosition = function (srcElem, destElem) {\n    var col = this.parent.getColumnByUid(destElem.firstElementChild.getAttribute('e-mappinguid'));\n    var bool = col ? !col.lockColumn : true;\n    return (srcElem.parentElement.isEqualNode(destElem.parentElement) || this.parent.enableColumnVirtualization || this.parent.isFrozenGrid() && Array.prototype.indexOf.call(closestElement(srcElem, 'thead').children, srcElem.parentElement) === Array.prototype.indexOf.call(closestElement(destElem, 'thead').children, destElem.parentElement)) && this.targetParentContainerIndex(srcElem, destElem) > -1 && bool;\n  };\n\n  Reorder.prototype.chkDropAllCols = function (srcElem, destElem) {\n    var isFound;\n    var headers = this.getHeaderCells();\n    var header;\n\n    while (!isFound && headers.length > 0) {\n      header = headers.pop();\n      isFound = srcElem !== header && this.targetParentContainerIndex(srcElem, destElem) > -1;\n    }\n\n    return isFound;\n  };\n\n  Reorder.prototype.findColParent = function (col, cols, parent) {\n    // eslint-disable-next-line no-self-assign\n    parent = parent;\n\n    for (var i = 0, len = cols.length; i < len; i++) {\n      if (col === cols[i]) {\n        return true;\n      } else if (cols[i].columns) {\n        var cnt = parent.length;\n        parent.push(cols[i]);\n\n        if (!this.findColParent(col, cols[i].columns, parent)) {\n          parent.splice(cnt, parent.length - cnt);\n        } else {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  };\n\n  Reorder.prototype.getColumnsModel = function (cols) {\n    var columnModel = [];\n    var subCols = [];\n\n    if (!this.parent.getFrozenColumns() && this.parent.isFrozenGrid()) {\n      return this.parent.getColumns();\n    } else {\n      for (var i = 0, len = cols.length; i < len; i++) {\n        columnModel.push(cols[i]);\n\n        if (cols[i].columns) {\n          subCols = subCols.concat(cols[i].columns);\n        }\n      }\n\n      if (subCols.length) {\n        columnModel = columnModel.concat(this.getColumnsModel(subCols));\n      }\n    }\n\n    return columnModel;\n  };\n\n  Reorder.prototype.headerDrop = function (e) {\n    var gObj = this.parent;\n    var dropElement = this.element.querySelector('.e-headercelldiv') || this.element.querySelector('.e-stackedheadercelldiv');\n    var uId = dropElement.getAttribute('e-mappinguid');\n    var column = gObj.getColumnByUid(uId);\n\n    if (!closestElement(e.target, 'th') || !isNullOrUndefined(column) && (!column.allowReordering || column.lockColumn)) {\n      this.parent.log('action_disabled_column', {\n        moduleName: this.getModuleName(),\n        column: column\n      });\n      return;\n    }\n\n    var destElem = closestElement(e.target, '.e-headercell');\n    var destElemDiv = destElem.querySelector('.e-headercelldiv') || destElem.querySelector('.e-stackedheadercelldiv');\n    var destElemUid = destElemDiv.getAttribute('e-mappinguid');\n\n    if (!isNullOrUndefined(destElemUid)) {\n      var destColumn = gObj.getColumnByUid(destElemUid);\n\n      if (isNullOrUndefined(destColumn) || !destColumn.allowReordering || destColumn.lockColumn) {\n        this.parent.log('action_disabled_column', {\n          moduleName: this.getModuleName(),\n          column: column,\n          destColumn: destColumn\n        });\n        return;\n      }\n    }\n\n    if (destElem && !(!this.chkDropPosition(this.element, destElem) || !this.chkDropAllCols(this.element, destElem))) {\n      if (this.parent.enableColumnVirtualization) {\n        var columns = this.parent.columns;\n        var sourceUid_1 = this.element.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n        var col = this.parent.columns.filter(function (col) {\n          return col.uid === sourceUid_1;\n        });\n        var colMatchIndex_1 = null;\n        var column_1 = col[0];\n        var destUid_1 = destElem.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n        columns.some(function (col, index) {\n          if (col.uid === destUid_1) {\n            colMatchIndex_1 = index;\n            return col.uid === destUid_1;\n          }\n\n          return false;\n        });\n\n        if (!isNullOrUndefined(colMatchIndex_1)) {\n          this.moveColumns(colMatchIndex_1, column_1);\n        }\n      } else {\n        var newIndex = this.targetParentContainerIndex(this.element, destElem);\n        var uid = this.element.firstElementChild.getAttribute('e-mappinguid');\n        this.destElement = destElem;\n        this.parent.notify(events.setReorderDestinationElement, {\n          ele: destElem\n        });\n\n        if (uid) {\n          this.moveColumns(newIndex, this.parent.getColumnByUid(uid));\n        } else {\n          var headers = this.getHeaderCells();\n          var oldIdx = getElementIndex(this.element, headers);\n          var columns = this.getColumnsModel(this.parent.columns);\n          this.moveColumns(newIndex, columns[oldIdx]);\n        }\n      }\n    }\n  };\n\n  Reorder.prototype.isActionPrevent = function (gObj) {\n    return isActionPrevent(gObj);\n  };\n\n  Reorder.prototype.moveColumns = function (destIndex, column, reorderByColumn, preventRefresh) {\n    var gObj = this.parent;\n\n    if (this.isActionPrevent(gObj)) {\n      gObj.notify(events.preventBatch, {\n        instance: this,\n        handler: this.moveColumns,\n        arg1: destIndex,\n        arg2: column\n      });\n      return;\n    }\n\n    var isFrozen = !gObj.getFrozenColumns() && gObj.isFrozenGrid();\n    var parent = this.getColParent(column, this.parent.columns);\n    var cols = parent ? parent.columns : isFrozen ? this.parent.getColumns() : this.parent.columns;\n    var srcIdx = inArray(column, cols);\n\n    if ((this.parent.isFrozenGrid() && parent || this.parent.lockcolPositionCount) && !reorderByColumn && !this.parent.enableColumnVirtualization) {\n      for (var i = 0; i < cols.length; i++) {\n        if (cols[i].field === column.field) {\n          srcIdx = i;\n          break;\n        }\n      }\n\n      var col = this.parent.getColumnByUid(this.destElement.firstElementChild.getAttribute('e-mappinguid'));\n\n      if (col) {\n        for (var i = 0; i < cols.length; i++) {\n          if (cols[i].field === col.field) {\n            destIndex = i;\n            break;\n          }\n        }\n      } else {\n        for (var i = 0; i < cols.length; i++) {\n          if (cols[i].headerText === this.destElement.innerText.trim()) {\n            destIndex = i;\n          }\n        }\n      }\n    }\n\n    if (!gObj.allowReordering || srcIdx === destIndex || srcIdx === -1 || destIndex === -1) {\n      return;\n    }\n\n    cols.splice(destIndex, 0, cols.splice(srcIdx, 1)[0]);\n    var args = {\n      column: column,\n      destIndex: destIndex,\n      columns: cols,\n      parent: parent,\n      cancel: false\n    };\n    gObj.notify(events.refreshFrozenColumns, args);\n\n    if (args.cancel) {\n      return;\n    }\n\n    gObj.getColumns(true);\n    gObj.notify(events.columnPositionChanged, {\n      fromIndex: destIndex,\n      toIndex: srcIdx\n    });\n\n    if (preventRefresh !== false) {\n      gObj.notify(events.modelChanged, {\n        type: events.actionBegin,\n        requestType: 'reorder',\n        fromIndex: destIndex,\n        toIndex: srcIdx,\n        toColumnUid: column.uid\n      });\n    }\n  };\n\n  Reorder.prototype.targetParentContainerIndex = function (srcElem, destElem) {\n    var cols = !this.parent.getFrozenColumns() && this.parent.isFrozenGrid() ? this.parent.getColumns() : this.parent.columns;\n    var headers = this.getHeaderCells();\n    var flatColumns = this.getColumnsModel(cols);\n    var parent = this.getColParent(flatColumns[getElementIndex(srcElem, headers)], cols);\n    cols = parent ? parent.columns : cols;\n    return inArray(flatColumns[getElementIndex(destElem, headers)], cols);\n  };\n\n  Reorder.prototype.getHeaderCells = function () {\n    var frozenColumns = this.parent.getFrozenColumns();\n\n    if (frozenColumns || this.parent.isFrozenGrid() || this.parent.lockcolPositionCount) {\n      var fTh = void 0;\n      var mTh = void 0;\n      var fHeaders = [];\n      var fRows = [].slice.call(this.parent.getHeaderTable().getElementsByClassName('e-columnheader'));\n\n      if (frozenColumns || this.parent.isFrozenGrid()) {\n        var mRows = [].slice.call(this.parent.getHeaderContent().querySelector('.' + literals.movableHeader).getElementsByClassName('e-columnheader'));\n\n        for (var i = 0; i < fRows.length; i++) {\n          fTh = [].slice.call(fRows[i].getElementsByClassName('e-headercell'));\n          mTh = [].slice.call(mRows[i].getElementsByClassName('e-headercell'));\n          var isAvail = void 0;\n\n          for (var k = 0; k < fTh.length; k++) {\n            for (var j = 0; j < mTh.length; j++) {\n              if (mTh[j].innerText === fTh[k].innerText) {\n                isAvail = true;\n                break;\n              }\n            }\n\n            if (!isAvail) {\n              fHeaders = fHeaders.concat([fTh[k]]);\n            }\n          }\n\n          for (var j = 0; j < mTh.length; j++) {\n            fHeaders.push(mTh[j]);\n          }\n        }\n\n        if (this.parent.getFrozenRightColumnsCount()) {\n          var frTh = void 0;\n          var frRows = [].slice.call(this.parent.getHeaderContent().querySelector('.e-frozen-right-header').getElementsByClassName('e-columnheader'));\n          frTh = [].slice.call(frRows[0].getElementsByClassName('e-headercell'));\n\n          for (var i = 0; i < frTh.length; i++) {\n            fHeaders.push(frTh[i]);\n          }\n        }\n      } else {\n        for (var i = 0; i < fRows.length; i++) {\n          mTh = [].slice.call(fRows[i].getElementsByClassName('e-headercell'));\n\n          for (var k = 0; k < mTh.length; k++) {\n            var isAvail = void 0;\n\n            for (var j = k + 1; j < mTh.length; j++) {\n              if (mTh[j].innerText === mTh[k].innerText) {\n                isAvail = true;\n                break;\n              }\n            }\n\n            if (!isAvail) {\n              fHeaders = fHeaders.concat([mTh[k]]);\n            }\n          }\n        }\n      }\n\n      return fHeaders;\n    } else {\n      return [].slice.call(this.parent.element.getElementsByClassName('e-headercell'));\n    }\n  };\n\n  Reorder.prototype.getColParent = function (column, columns) {\n    var parents = [];\n    this.findColParent(column, columns, parents);\n    return parents[parents.length - 1];\n  };\n\n  Reorder.prototype.reorderSingleColumn = function (fromFName, toFName) {\n    var fColumn = this.parent.enableColumnVirtualization ? this.parent.columns.filter(function (col) {\n      return col.field === fromFName;\n    })[0] : this.parent.getColumnByField(fromFName);\n    var toColumn = this.parent.enableColumnVirtualization ? this.parent.columns.filter(function (col) {\n      return col.field === toFName;\n    })[0] : this.parent.getColumnByField(toFName);\n\n    if (!isNullOrUndefined(fColumn) && (!fColumn.allowReordering || fColumn.lockColumn) || !isNullOrUndefined(toColumn) && (!toColumn.allowReordering || fColumn.lockColumn)) {\n      this.parent.log('action_disabled_column', {\n        moduleName: this.getModuleName(),\n        column: fColumn,\n        destColumn: toColumn\n      });\n      return;\n    }\n\n    var column = toColumn;\n    var parent = this.getColParent(column, this.parent.columns);\n    var columns = parent ? parent.columns : this.parent.columns;\n    var destIndex = inArray(column, columns);\n\n    if (destIndex > -1) {\n      this.moveColumns(destIndex, fColumn, true);\n    }\n  };\n\n  Reorder.prototype.reorderMultipleColumns = function (fromFNames, toFName) {\n    var toIndex = this.parent.getColumnIndexByField(toFName);\n    var toColumn = this.parent.getColumnByField(toFName);\n\n    if (toIndex < 0 || !isNullOrUndefined(toColumn) && (!toColumn.allowReordering || toColumn.lockColumn)) {\n      return;\n    }\n\n    for (var i = 0; i < fromFNames.length; i++) {\n      var column = this.parent.getColumnByField(fromFNames[i]);\n\n      if (!isNullOrUndefined(column) && (!column.allowReordering || column.lockColumn)) {\n        return;\n      }\n    }\n\n    for (var i = 0; i < fromFNames.length; i++) {\n      var column = this.parent.getColumnByIndex(toIndex);\n      var parent_1 = this.getColParent(column, this.parent.columns);\n      var columns = parent_1 ? parent_1.columns : this.parent.columns;\n      var destIndex = inArray(column, columns);\n\n      if (destIndex > -1) {\n        this.moveColumns(destIndex, this.parent.getColumnByField(fromFNames[i]), true, true);\n      }\n\n      if (this.parent.getColumnIndexByField(fromFNames[i + 1]) >= destIndex) {\n        toIndex++; //R to L\n      }\n    }\n  };\n\n  Reorder.prototype.moveTargetColumn = function (column, toIndex) {\n    if (toIndex > -1) {\n      this.moveColumns(toIndex, column, true);\n    }\n  };\n\n  Reorder.prototype.reorderSingleColumnByTarget = function (fieldName, toIndex) {\n    this.moveTargetColumn(this.parent.getColumnByField(fieldName), toIndex);\n  };\n\n  Reorder.prototype.reorderMultipleColumnByTarget = function (fieldName, toIndex) {\n    for (var i = 0; i < fieldName.length; i++) {\n      this.reorderSingleColumnByTarget(fieldName[i], toIndex);\n    }\n  };\n  /**\n   * Changes the position of the Grid columns by field names.\n   *\n   * @param  {string | string[]} fromFName - Defines the origin field names.\n   * @param  {string} toFName - Defines the destination field name.\n   * @returns {void}\n   */\n\n\n  Reorder.prototype.reorderColumns = function (fromFName, toFName) {\n    if (typeof fromFName === 'string') {\n      this.reorderSingleColumn(fromFName, toFName);\n      this.fromCol = fromFName;\n    } else {\n      this.reorderMultipleColumns(fromFName, toFName);\n      this.fromCol = fromFName[0];\n    }\n  };\n  /**\n   * Changes the position of the Grid columns by field index.\n   *\n   * @param  {number} fromIndex - Defines the origin field index.\n   * @param  {number} toIndex - Defines the destination field index.\n   * @returns {void}\n   */\n\n\n  Reorder.prototype.reorderColumnByIndex = function (fromIndex, toIndex) {\n    this.moveTargetColumn(this.parent.getColumnByIndex(fromIndex), toIndex);\n  };\n  /**\n   * Changes the position of the Grid columns by field index.\n   *\n   * @param  {string | string[]} fieldName - Defines the field name.\n   * @param  {number} toIndex - Defines the destination field index.\n   * @returns {void}\n   */\n\n\n  Reorder.prototype.reorderColumnByTargetIndex = function (fieldName, toIndex) {\n    if (typeof fieldName === 'string') {\n      this.reorderSingleColumnByTarget(fieldName, toIndex);\n    } else {\n      this.reorderMultipleColumnByTarget(fieldName, toIndex);\n    }\n  };\n\n  Reorder.prototype.enableAfterRender = function (e) {\n    if (e.module === this.getModuleName() && e.enable) {\n      this.createReorderElement();\n    }\n  };\n\n  Reorder.prototype.createReorderElement = function (e) {\n    if (e && e.args.isXaxis) {\n      this.setDisplay('none');\n    }\n\n    var header = this.parent.element.querySelector('.' + literals.headerContent);\n    this.upArrow = header.appendChild(this.parent.createElement('div', {\n      className: 'e-icons e-icon-reorderuparrow e-reorderuparrow',\n      attrs: {\n        style: 'display:none'\n      }\n    }));\n    this.downArrow = header.appendChild(this.parent.createElement('div', {\n      className: 'e-icons e-icon-reorderdownarrow e-reorderdownarrow',\n      attrs: {\n        style: 'display:none'\n      }\n    }));\n  };\n  /**\n   * The function used to trigger onActionComplete\n   *\n   * @param {NotifyArgs} e - specified the NotifyArgs\n   * @returns {void}\n   * @hidden\n   */\n\n\n  Reorder.prototype.onActionComplete = function (e) {\n    this.parent.trigger(events.actionComplete, extend(e, {\n      type: events.actionComplete\n    }));\n    var target = this.fromCol && this.parent.getColumnHeaderByField(this.fromCol);\n\n    if (target) {\n      this.parent.focusModule.onClick({\n        target: target\n      }, true);\n    }\n  };\n  /**\n   * To destroy the reorder\n   *\n   * @returns {void}\n   * @hidden\n   */\n\n\n  Reorder.prototype.destroy = function () {\n    var gridElement = this.parent.element;\n\n    if (this.parent.isDestroyed || !gridElement || !gridElement.querySelector('.' + literals.gridHeader) && !gridElement.querySelector('.' + literals.gridContent)) {\n      return;\n    }\n\n    if (this.upArrow.parentNode) {\n      remove(this.upArrow);\n    }\n\n    if (this.downArrow.parentNode) {\n      remove(this.downArrow);\n    }\n\n    this.parent.off(events.headerDrop, this.headerDrop);\n    this.parent.off(events.uiUpdate, this.enableAfterRender);\n    this.parent.off(events.reorderComplete, this.onActionComplete);\n    this.parent.off(events.columnDrag, this.drag);\n    this.parent.off(events.columnDragStart, this.dragStart);\n    this.parent.off(events.columnDragStop, this.dragStop);\n    this.parent.off(events.headerRefreshed, this.createReorderElement);\n    this.parent.off(events.keyPressed, this.keyPressHandler);\n    this.parent.off(events.destroy, this.destroy); //call ejdrag and drop destroy\n  };\n\n  Reorder.prototype.keyPressHandler = function (e) {\n    var gObj = this.parent;\n\n    switch (e.action) {\n      case 'ctrlLeftArrow':\n      case 'ctrlRightArrow':\n        // eslint-disable-next-line no-case-declarations\n        var element = gObj.focusModule.currentInfo.element;\n\n        if (element && element.classList.contains('e-headercell')) {\n          var column = gObj.getColumnByUid(element.firstElementChild.getAttribute('e-mappinguid'));\n          var visibleCols = gObj.getVisibleColumns();\n          var index = visibleCols.indexOf(column);\n          var toCol = e.action === 'ctrlLeftArrow' ? visibleCols[index - 1] : visibleCols[index + 1];\n\n          if (toCol && toCol.field && column.field) {\n            this.reorderColumns(column.field, toCol.field);\n          }\n        }\n\n        break;\n    }\n  };\n\n  Reorder.prototype.drag = function (e) {\n    var gObj = this.parent;\n    var target = e.target;\n\n    if (!e.column.allowReordering || e.column.lockColumn) {\n      return;\n    }\n\n    var closest = closestElement(target, '.e-headercell:not(.e-stackedHeaderCell)');\n    var cloneElement = gObj.element.querySelector('.e-cloneproperties');\n    var content = gObj.isFrozenGrid() ? gObj.getMovableVirtualContent() : gObj.getContent().firstElementChild;\n    var isLeft = this.x > getPosition(e.event).x + content.scrollLeft;\n    removeClass([].slice.call(gObj.getHeaderTable().getElementsByClassName('e-reorderindicate')), ['e-reorderindicate']);\n    this.setDisplay('none');\n    this.stopTimer();\n    classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n    this.updateScrollPostion(e.event);\n\n    if (closest && !closest.isEqualNode(this.element)) {\n      target = closest; //consider stacked, detail header cell\n\n      if (!(!this.chkDropPosition(this.element, target) || !this.chkDropAllCols(this.element, target))) {\n        this.updateArrowPosition(target, isLeft);\n        classList(target, ['e-allowDrop', 'e-reorderindicate'], []);\n      } else if (!(gObj.allowGrouping && parentsUntil(e.target, 'e-groupdroparea'))) {\n        classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n      }\n    }\n\n    gObj.trigger(events.columnDrag, {\n      target: target,\n      draggableType: 'headercell',\n      column: e.column\n    });\n  };\n\n  Reorder.prototype.updateScrollPostion = function (e) {\n    var _this = this;\n\n    var x = getPosition(e).x;\n    var cliRect = this.parent.element.getBoundingClientRect();\n    var cliRectBaseRight = cliRect.right;\n\n    if (this.parent.isFrozenGrid()) {\n      this.updateFrozenScrollPosition(x, cliRect);\n    } else {\n      var cliRectBaseLeft = cliRect.left;\n      var scrollElem_1 = this.parent.getContent().firstElementChild;\n\n      if (x > cliRectBaseLeft && x < cliRectBaseLeft + 35) {\n        this.timer = window.setInterval(function () {\n          _this.setScrollLeft(scrollElem_1, true);\n        }, 50);\n      } else if (x < cliRectBaseRight && x > cliRectBaseRight - 35) {\n        this.timer = window.setInterval(function () {\n          _this.setScrollLeft(scrollElem_1, false);\n        }, 50);\n      }\n    }\n  };\n\n  Reorder.prototype.updateFrozenScrollPosition = function (x, cliRect) {\n    var _this = this;\n\n    var scrollElem = this.parent.getContent().querySelector('.' + literals.movableContent);\n    var mhdrCliRect = this.parent.element.querySelector('.' + literals.movableHeader).getBoundingClientRect();\n    var left = this.parent.getFrozenLeftCount();\n    var right = this.parent.getFrozenRightColumnsCount();\n    var cliRectBaseRight = right ? mhdrCliRect.right : cliRect.right;\n    var cliRectBaseLeft = left ? mhdrCliRect.left : cliRect.left;\n\n    if (x > cliRectBaseLeft && x < cliRectBaseLeft + 35) {\n      this.timer = window.setInterval(function () {\n        _this.setScrollLeft(scrollElem, true);\n      }, 50);\n    } else if (x < cliRectBaseRight && x > cliRectBaseRight - 35) {\n      this.timer = window.setInterval(function () {\n        _this.setScrollLeft(scrollElem, false);\n      }, 50);\n    }\n  };\n\n  Reorder.prototype.setScrollLeft = function (scrollElem, isLeft) {\n    var scrollLeft = scrollElem.scrollLeft;\n    scrollElem.scrollLeft = scrollElem.scrollLeft + (isLeft ? -5 : 5);\n\n    if (scrollLeft !== scrollElem.scrollLeft) {\n      this.setDisplay('none');\n    }\n  };\n\n  Reorder.prototype.stopTimer = function () {\n    window.clearInterval(this.timer);\n  };\n\n  Reorder.prototype.updateArrowPosition = function (target, isLeft) {\n    var cliRect = target.getBoundingClientRect();\n    var cliRectBase = this.parent.element.getBoundingClientRect();\n\n    if (isLeft && cliRect.left < cliRectBase.left || !isLeft && cliRect.right > cliRectBase.right) {\n      return;\n    }\n\n    if (this.parent.isFrozenGrid() && target.classList.contains('e-headercell')) {\n      var left = this.parent.getFrozenLeftCount();\n      var right = this.parent.getFrozenRightColumnsCount();\n      var dropEle = this.element.querySelector('.e-headercelldiv');\n      var dropCol = dropEle ? this.parent.getColumnByUid(dropEle.getAttribute('data-uid')) : null;\n      var col = this.parent.getColumnByUid(target.firstElementChild.getAttribute('e-mappinguid'));\n      var fhdrWidth = Math.round(this.parent.getFrozenVirtualHeader().getBoundingClientRect().right);\n      var mhdrRight = Math.round(this.parent.getMovableVirtualHeader().getBoundingClientRect().right);\n\n      if (col) {\n        if (left && !right && this.parent.getNormalizedColumnIndex(col.uid) >= left && (isLeft && Math.round(cliRect.left) < fhdrWidth || !isLeft && mhdrRight < cliRect.right)) {\n          return;\n        }\n\n        if (!left && right && dropCol && dropCol.getFreezeTableName() !== col.getFreezeTableName() && !isLeft && Math.round(cliRect.right) < fhdrWidth) {\n          return;\n        }\n      }\n    }\n\n    var isSticky = this.parent.getHeaderContent().classList.contains('e-sticky');\n    this.upArrow.style.top = isSticky ? cliRect.top + cliRect.height + 'px' : cliRect.top + cliRect.height - cliRectBase.top + 'px';\n    this.downArrow.style.top = isSticky ? cliRect.top - 7 + 'px' : cliRect.top - cliRectBase.top - 7 + 'px';\n    this.upArrow.style.left = this.downArrow.style.left = isSticky ? (isLeft ? cliRect.left : cliRect.right) - 4 + 'px' : (isLeft ? cliRect.left : cliRect.right) - cliRectBase.left - 4 + 'px';\n    this.setDisplay('');\n  };\n\n  Reorder.prototype.dragStart = function (e) {\n    var gObj = this.parent;\n    var target = e.target;\n    this.element = target.classList.contains('e-headercell') ? target : parentsUntil(target, 'e-headercell');\n\n    if (!e.column.allowReordering || e.column.lockColumn) {\n      return;\n    }\n\n    var content = gObj.isFrozenGrid() ? gObj.getMovableVirtualContent() : gObj.getContent().firstElementChild;\n    this.x = getPosition(e.event).x + content.scrollLeft;\n    gObj.trigger(events.columnDragStart, {\n      target: target,\n      draggableType: 'headercell',\n      column: e.column\n    });\n  };\n\n  Reorder.prototype.dragStop = function (e) {\n    var gObj = this.parent;\n    this.setDisplay('none');\n    this.stopTimer();\n\n    if (!e.cancel) {\n      gObj.trigger(events.columnDrop, {\n        target: e.target,\n        draggableType: 'headercell',\n        column: e.column\n      });\n    }\n\n    removeClass([].slice.call(gObj.getHeaderTable().getElementsByClassName('e-reorderindicate')), ['e-reorderindicate']);\n  };\n\n  Reorder.prototype.setDisplay = function (display) {\n    this.upArrow.style.display = display;\n    this.downArrow.style.display = display;\n  };\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {string} return the module name\n   * @private\n   */\n\n\n  Reorder.prototype.getModuleName = function () {\n    return 'reorder';\n  };\n\n  return Reorder;\n}();\n\nexport { Reorder };","map":{"version":3,"names":["extend","isNullOrUndefined","closest","closestElement","removeClass","classList","remove","getElementIndex","inArray","parentsUntil","getPosition","isActionPrevent","events","literals","Reorder","parent","isDestroyed","on","headerDrop","uiUpdate","enableAfterRender","reorderComplete","onActionComplete","columnDrag","drag","columnDragStart","dragStart","columnDragStop","dragStop","headerRefreshed","createReorderElement","keyPressed","keyPressHandler","destroy","prototype","chkDropPosition","srcElem","destElem","col","getColumnByUid","firstElementChild","getAttribute","bool","lockColumn","parentElement","isEqualNode","enableColumnVirtualization","isFrozenGrid","Array","indexOf","call","children","targetParentContainerIndex","chkDropAllCols","isFound","headers","getHeaderCells","header","length","pop","findColParent","cols","i","len","columns","cnt","push","splice","getColumnsModel","columnModel","subCols","getFrozenColumns","getColumns","concat","e","gObj","dropElement","element","querySelector","uId","column","target","allowReordering","log","moduleName","getModuleName","destElemDiv","destElemUid","destColumn","sourceUid_1","filter","uid","colMatchIndex_1","column_1","destUid_1","some","index","moveColumns","newIndex","destElement","notify","setReorderDestinationElement","ele","oldIdx","destIndex","reorderByColumn","preventRefresh","preventBatch","instance","handler","arg1","arg2","isFrozen","getColParent","srcIdx","lockcolPositionCount","field","headerText","innerText","trim","args","cancel","refreshFrozenColumns","columnPositionChanged","fromIndex","toIndex","modelChanged","type","actionBegin","requestType","toColumnUid","flatColumns","frozenColumns","fTh","mTh","fHeaders","fRows","slice","getHeaderTable","getElementsByClassName","mRows","getHeaderContent","movableHeader","isAvail","k","j","getFrozenRightColumnsCount","frTh","frRows","parents","reorderSingleColumn","fromFName","toFName","fColumn","getColumnByField","toColumn","reorderMultipleColumns","fromFNames","getColumnIndexByField","getColumnByIndex","parent_1","moveTargetColumn","reorderSingleColumnByTarget","fieldName","reorderMultipleColumnByTarget","reorderColumns","fromCol","reorderColumnByIndex","reorderColumnByTargetIndex","module","enable","isXaxis","setDisplay","headerContent","upArrow","appendChild","createElement","className","attrs","style","downArrow","trigger","actionComplete","getColumnHeaderByField","focusModule","onClick","gridElement","gridHeader","gridContent","parentNode","off","action","currentInfo","contains","visibleCols","getVisibleColumns","toCol","cloneElement","content","getMovableVirtualContent","getContent","isLeft","x","event","scrollLeft","stopTimer","updateScrollPostion","updateArrowPosition","allowGrouping","draggableType","_this","cliRect","getBoundingClientRect","cliRectBaseRight","right","updateFrozenScrollPosition","cliRectBaseLeft","left","scrollElem_1","timer","window","setInterval","setScrollLeft","scrollElem","movableContent","mhdrCliRect","getFrozenLeftCount","clearInterval","cliRectBase","dropEle","dropCol","fhdrWidth","Math","round","getFrozenVirtualHeader","mhdrRight","getMovableVirtualHeader","getNormalizedColumnIndex","getFreezeTableName","isSticky","top","height","columnDrop","display"],"sources":["C:/Users/shahj/OneDrive/Documents/GitHub/Admin Dashboard/frontend/node_modules/@syncfusion/ej2-grids/src/grid/actions/reorder.js"],"sourcesContent":["import { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { closest as closestElement, removeClass, classList, remove } from '@syncfusion/ej2-base';\nimport { getElementIndex, inArray, parentsUntil, getPosition, isActionPrevent } from '../base/util';\nimport * as events from '../base/constant';\nimport * as literals from '../base/string-literals';\n/**\n *\n * The `Reorder` module is used for reordering columns.\n */\nvar Reorder = /** @class */ (function () {\n    /**\n     * Constructor for the Grid reorder module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @hidden\n     */\n    function Reorder(parent) {\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.headerDrop, this.headerDrop, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n        this.parent.on(events.reorderComplete, this.onActionComplete, this);\n        this.parent.on(events.columnDrag, this.drag, this);\n        this.parent.on(events.columnDragStart, this.dragStart, this);\n        this.parent.on(events.columnDragStop, this.dragStop, this);\n        this.parent.on(events.headerDrop, this.headerDrop, this);\n        this.parent.on(events.headerRefreshed, this.createReorderElement, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n        this.parent.on(events.destroy, this.destroy, this);\n    }\n    Reorder.prototype.chkDropPosition = function (srcElem, destElem) {\n        var col = this.parent.getColumnByUid(destElem.firstElementChild.getAttribute('e-mappinguid'));\n        var bool = col ? !col.lockColumn : true;\n        return ((srcElem.parentElement.isEqualNode(destElem.parentElement) || this.parent.enableColumnVirtualization)\n            || (this.parent.isFrozenGrid()\n                && Array.prototype.indexOf.call(closestElement(srcElem, 'thead').children, srcElem.parentElement)\n                    === Array.prototype.indexOf.call(closestElement(destElem, 'thead').children, destElem.parentElement)))\n            && this.targetParentContainerIndex(srcElem, destElem) > -1 && bool;\n    };\n    Reorder.prototype.chkDropAllCols = function (srcElem, destElem) {\n        var isFound;\n        var headers = this.getHeaderCells();\n        var header;\n        while (!isFound && headers.length > 0) {\n            header = headers.pop();\n            isFound = srcElem !== header && this.targetParentContainerIndex(srcElem, destElem) > -1;\n        }\n        return isFound;\n    };\n    Reorder.prototype.findColParent = function (col, cols, parent) {\n        // eslint-disable-next-line no-self-assign\n        parent = parent;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (col === cols[i]) {\n                return true;\n            }\n            else if (cols[i].columns) {\n                var cnt = parent.length;\n                parent.push(cols[i]);\n                if (!this.findColParent(col, cols[i].columns, parent)) {\n                    parent.splice(cnt, parent.length - cnt);\n                }\n                else {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n    Reorder.prototype.getColumnsModel = function (cols) {\n        var columnModel = [];\n        var subCols = [];\n        if (!this.parent.getFrozenColumns() && this.parent.isFrozenGrid()) {\n            return this.parent.getColumns();\n        }\n        else {\n            for (var i = 0, len = cols.length; i < len; i++) {\n                columnModel.push(cols[i]);\n                if (cols[i].columns) {\n                    subCols = subCols.concat(cols[i].columns);\n                }\n            }\n            if (subCols.length) {\n                columnModel = columnModel.concat(this.getColumnsModel(subCols));\n            }\n        }\n        return columnModel;\n    };\n    Reorder.prototype.headerDrop = function (e) {\n        var gObj = this.parent;\n        var dropElement = this.element.querySelector('.e-headercelldiv') || this.element.querySelector('.e-stackedheadercelldiv');\n        var uId = dropElement.getAttribute('e-mappinguid');\n        var column = gObj.getColumnByUid(uId);\n        if (!closestElement(e.target, 'th') || (!isNullOrUndefined(column) && (!column.allowReordering || column.lockColumn))) {\n            this.parent.log('action_disabled_column', { moduleName: this.getModuleName(), column: column });\n            return;\n        }\n        var destElem = closestElement(e.target, '.e-headercell');\n        var destElemDiv = destElem.querySelector('.e-headercelldiv') || destElem.querySelector('.e-stackedheadercelldiv');\n        var destElemUid = destElemDiv.getAttribute('e-mappinguid');\n        if (!isNullOrUndefined(destElemUid)) {\n            var destColumn = gObj.getColumnByUid(destElemUid);\n            if (isNullOrUndefined(destColumn) || !destColumn.allowReordering || destColumn.lockColumn) {\n                this.parent.log('action_disabled_column', { moduleName: this.getModuleName(), column: column, destColumn: destColumn });\n                return;\n            }\n        }\n        if (destElem && !(!this.chkDropPosition(this.element, destElem) || !this.chkDropAllCols(this.element, destElem))) {\n            if (this.parent.enableColumnVirtualization) {\n                var columns = this.parent.columns;\n                var sourceUid_1 = this.element.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n                var col = this.parent.columns.filter(function (col) { return col.uid === sourceUid_1; });\n                var colMatchIndex_1 = null;\n                var column_1 = col[0];\n                var destUid_1 = destElem.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n                columns.some(function (col, index) {\n                    if (col.uid === destUid_1) {\n                        colMatchIndex_1 = index;\n                        return col.uid === destUid_1;\n                    }\n                    return false;\n                });\n                if (!isNullOrUndefined(colMatchIndex_1)) {\n                    this.moveColumns(colMatchIndex_1, column_1);\n                }\n            }\n            else {\n                var newIndex = this.targetParentContainerIndex(this.element, destElem);\n                var uid = this.element.firstElementChild.getAttribute('e-mappinguid');\n                this.destElement = destElem;\n                this.parent.notify(events.setReorderDestinationElement, { ele: destElem });\n                if (uid) {\n                    this.moveColumns(newIndex, this.parent.getColumnByUid(uid));\n                }\n                else {\n                    var headers = this.getHeaderCells();\n                    var oldIdx = getElementIndex(this.element, headers);\n                    var columns = this.getColumnsModel(this.parent.columns);\n                    this.moveColumns(newIndex, columns[oldIdx]);\n                }\n            }\n        }\n    };\n    Reorder.prototype.isActionPrevent = function (gObj) {\n        return isActionPrevent(gObj);\n    };\n    Reorder.prototype.moveColumns = function (destIndex, column, reorderByColumn, preventRefresh) {\n        var gObj = this.parent;\n        if (this.isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, { instance: this, handler: this.moveColumns, arg1: destIndex, arg2: column });\n            return;\n        }\n        var isFrozen = !gObj.getFrozenColumns() && gObj.isFrozenGrid();\n        var parent = this.getColParent(column, this.parent.columns);\n        var cols = parent ? parent.columns : isFrozen ? this.parent.getColumns() : this.parent.columns;\n        var srcIdx = inArray(column, cols);\n        if (((this.parent.isFrozenGrid() && parent) || this.parent.lockcolPositionCount) && !reorderByColumn &&\n            !this.parent.enableColumnVirtualization) {\n            for (var i = 0; i < cols.length; i++) {\n                if (cols[i].field === column.field) {\n                    srcIdx = i;\n                    break;\n                }\n            }\n            var col = this.parent.getColumnByUid(this.destElement.firstElementChild.getAttribute('e-mappinguid'));\n            if (col) {\n                for (var i = 0; i < cols.length; i++) {\n                    if (cols[i].field === col.field) {\n                        destIndex = i;\n                        break;\n                    }\n                }\n            }\n            else {\n                for (var i = 0; i < cols.length; i++) {\n                    if (cols[i].headerText === this.destElement.innerText.trim()) {\n                        destIndex = i;\n                    }\n                }\n            }\n        }\n        if (!gObj.allowReordering || srcIdx === destIndex || srcIdx === -1 || destIndex === -1) {\n            return;\n        }\n        cols.splice(destIndex, 0, cols.splice(srcIdx, 1)[0]);\n        var args = { column: column, destIndex: destIndex, columns: cols, parent: parent, cancel: false };\n        gObj.notify(events.refreshFrozenColumns, args);\n        if (args.cancel) {\n            return;\n        }\n        gObj.getColumns(true);\n        gObj.notify(events.columnPositionChanged, { fromIndex: destIndex, toIndex: srcIdx });\n        if (preventRefresh !== false) {\n            gObj.notify(events.modelChanged, {\n                type: events.actionBegin, requestType: 'reorder', fromIndex: destIndex, toIndex: srcIdx, toColumnUid: column.uid\n            });\n        }\n    };\n    Reorder.prototype.targetParentContainerIndex = function (srcElem, destElem) {\n        var cols = !this.parent.getFrozenColumns() && this.parent.isFrozenGrid() ? this.parent.getColumns() :\n            this.parent.columns;\n        var headers = this.getHeaderCells();\n        var flatColumns = this.getColumnsModel(cols);\n        var parent = this.getColParent(flatColumns[getElementIndex(srcElem, headers)], cols);\n        cols = parent ? parent.columns : cols;\n        return inArray(flatColumns[getElementIndex(destElem, headers)], cols);\n    };\n    Reorder.prototype.getHeaderCells = function () {\n        var frozenColumns = this.parent.getFrozenColumns();\n        if (frozenColumns || this.parent.isFrozenGrid() || this.parent.lockcolPositionCount) {\n            var fTh = void 0;\n            var mTh = void 0;\n            var fHeaders = [];\n            var fRows = [].slice.call(this.parent.getHeaderTable().getElementsByClassName('e-columnheader'));\n            if (frozenColumns || this.parent.isFrozenGrid()) {\n                var mRows = [].slice.call(this.parent.getHeaderContent()\n                    .querySelector('.' + literals.movableHeader).getElementsByClassName('e-columnheader'));\n                for (var i = 0; i < fRows.length; i++) {\n                    fTh = [].slice.call(fRows[i].getElementsByClassName('e-headercell'));\n                    mTh = [].slice.call(mRows[i].getElementsByClassName('e-headercell'));\n                    var isAvail = void 0;\n                    for (var k = 0; k < fTh.length; k++) {\n                        for (var j = 0; j < mTh.length; j++) {\n                            if (mTh[j].innerText === fTh[k].innerText) {\n                                isAvail = true;\n                                break;\n                            }\n                        }\n                        if (!isAvail) {\n                            fHeaders = fHeaders.concat([fTh[k]]);\n                        }\n                    }\n                    for (var j = 0; j < mTh.length; j++) {\n                        fHeaders.push(mTh[j]);\n                    }\n                }\n                if (this.parent.getFrozenRightColumnsCount()) {\n                    var frTh = void 0;\n                    var frRows = [].slice.call(this.parent.getHeaderContent().querySelector('.e-frozen-right-header')\n                        .getElementsByClassName('e-columnheader'));\n                    frTh = [].slice.call(frRows[0].getElementsByClassName('e-headercell'));\n                    for (var i = 0; i < frTh.length; i++) {\n                        fHeaders.push(frTh[i]);\n                    }\n                }\n            }\n            else {\n                for (var i = 0; i < fRows.length; i++) {\n                    mTh = [].slice.call(fRows[i].getElementsByClassName('e-headercell'));\n                    for (var k = 0; k < mTh.length; k++) {\n                        var isAvail = void 0;\n                        for (var j = k + 1; j < mTh.length; j++) {\n                            if (mTh[j].innerText === mTh[k].innerText) {\n                                isAvail = true;\n                                break;\n                            }\n                        }\n                        if (!isAvail) {\n                            fHeaders = fHeaders.concat([mTh[k]]);\n                        }\n                    }\n                }\n            }\n            return fHeaders;\n        }\n        else {\n            return [].slice.call(this.parent.element.getElementsByClassName('e-headercell'));\n        }\n    };\n    Reorder.prototype.getColParent = function (column, columns) {\n        var parents = [];\n        this.findColParent(column, columns, parents);\n        return parents[parents.length - 1];\n    };\n    Reorder.prototype.reorderSingleColumn = function (fromFName, toFName) {\n        var fColumn = this.parent.enableColumnVirtualization ?\n            this.parent.columns.filter(function (col) { return col.field === fromFName; })[0]\n            : this.parent.getColumnByField(fromFName);\n        var toColumn = this.parent.enableColumnVirtualization ?\n            this.parent.columns.filter(function (col) { return col.field === toFName; })[0]\n            : this.parent.getColumnByField(toFName);\n        if ((!isNullOrUndefined(fColumn) && (!fColumn.allowReordering || fColumn.lockColumn)) ||\n            (!isNullOrUndefined(toColumn) && (!toColumn.allowReordering || fColumn.lockColumn))) {\n            this.parent.log('action_disabled_column', { moduleName: this.getModuleName(), column: fColumn, destColumn: toColumn });\n            return;\n        }\n        var column = toColumn;\n        var parent = this.getColParent(column, this.parent.columns);\n        var columns = parent ? parent.columns : this.parent.columns;\n        var destIndex = inArray(column, columns);\n        if (destIndex > -1) {\n            this.moveColumns(destIndex, fColumn, true);\n        }\n    };\n    Reorder.prototype.reorderMultipleColumns = function (fromFNames, toFName) {\n        var toIndex = this.parent.getColumnIndexByField(toFName);\n        var toColumn = this.parent.getColumnByField(toFName);\n        if (toIndex < 0 || (!isNullOrUndefined(toColumn) && (!toColumn.allowReordering || toColumn.lockColumn))) {\n            return;\n        }\n        for (var i = 0; i < fromFNames.length; i++) {\n            var column = this.parent.getColumnByField(fromFNames[i]);\n            if (!isNullOrUndefined(column) && (!column.allowReordering || column.lockColumn)) {\n                return;\n            }\n        }\n        for (var i = 0; i < fromFNames.length; i++) {\n            var column = this.parent.getColumnByIndex(toIndex);\n            var parent_1 = this.getColParent(column, this.parent.columns);\n            var columns = parent_1 ? parent_1.columns : this.parent.columns;\n            var destIndex = inArray(column, columns);\n            if (destIndex > -1) {\n                this.moveColumns(destIndex, this.parent.getColumnByField(fromFNames[i]), true, true);\n            }\n            if (this.parent.getColumnIndexByField(fromFNames[i + 1]) >= destIndex) {\n                toIndex++; //R to L\n            }\n        }\n    };\n    Reorder.prototype.moveTargetColumn = function (column, toIndex) {\n        if (toIndex > -1) {\n            this.moveColumns(toIndex, column, true);\n        }\n    };\n    Reorder.prototype.reorderSingleColumnByTarget = function (fieldName, toIndex) {\n        this.moveTargetColumn(this.parent.getColumnByField(fieldName), toIndex);\n    };\n    Reorder.prototype.reorderMultipleColumnByTarget = function (fieldName, toIndex) {\n        for (var i = 0; i < fieldName.length; i++) {\n            this.reorderSingleColumnByTarget(fieldName[i], toIndex);\n        }\n    };\n    /**\n     * Changes the position of the Grid columns by field names.\n     *\n     * @param  {string | string[]} fromFName - Defines the origin field names.\n     * @param  {string} toFName - Defines the destination field name.\n     * @returns {void}\n     */\n    Reorder.prototype.reorderColumns = function (fromFName, toFName) {\n        if (typeof fromFName === 'string') {\n            this.reorderSingleColumn(fromFName, toFName);\n            this.fromCol = fromFName;\n        }\n        else {\n            this.reorderMultipleColumns(fromFName, toFName);\n            this.fromCol = fromFName[0];\n        }\n    };\n    /**\n     * Changes the position of the Grid columns by field index.\n     *\n     * @param  {number} fromIndex - Defines the origin field index.\n     * @param  {number} toIndex - Defines the destination field index.\n     * @returns {void}\n     */\n    Reorder.prototype.reorderColumnByIndex = function (fromIndex, toIndex) {\n        this.moveTargetColumn(this.parent.getColumnByIndex(fromIndex), toIndex);\n    };\n    /**\n     * Changes the position of the Grid columns by field index.\n     *\n     * @param  {string | string[]} fieldName - Defines the field name.\n     * @param  {number} toIndex - Defines the destination field index.\n     * @returns {void}\n     */\n    Reorder.prototype.reorderColumnByTargetIndex = function (fieldName, toIndex) {\n        if (typeof fieldName === 'string') {\n            this.reorderSingleColumnByTarget(fieldName, toIndex);\n        }\n        else {\n            this.reorderMultipleColumnByTarget(fieldName, toIndex);\n        }\n    };\n    Reorder.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.createReorderElement();\n        }\n    };\n    Reorder.prototype.createReorderElement = function (e) {\n        if (e && e.args.isXaxis) {\n            this.setDisplay('none');\n        }\n        var header = this.parent.element.querySelector('.' + literals.headerContent);\n        this.upArrow = header.appendChild(this.parent\n            .createElement('div', { className: 'e-icons e-icon-reorderuparrow e-reorderuparrow', attrs: { style: 'display:none' } }));\n        this.downArrow = header.appendChild(this.parent\n            .createElement('div', { className: 'e-icons e-icon-reorderdownarrow e-reorderdownarrow', attrs: { style: 'display:none' } }));\n    };\n    /**\n     * The function used to trigger onActionComplete\n     *\n     * @param {NotifyArgs} e - specified the NotifyArgs\n     * @returns {void}\n     * @hidden\n     */\n    Reorder.prototype.onActionComplete = function (e) {\n        this.parent.trigger(events.actionComplete, extend(e, { type: events.actionComplete }));\n        var target = this.fromCol && this.parent.getColumnHeaderByField(this.fromCol);\n        if (target) {\n            this.parent.focusModule.onClick({ target: target }, true);\n        }\n    };\n    /**\n     * To destroy the reorder\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Reorder.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (this.parent.isDestroyed || !gridElement || (!gridElement.querySelector('.' + literals.gridHeader) &&\n            !gridElement.querySelector('.' + literals.gridContent))) {\n            return;\n        }\n        if (this.upArrow.parentNode) {\n            remove(this.upArrow);\n        }\n        if (this.downArrow.parentNode) {\n            remove(this.downArrow);\n        }\n        this.parent.off(events.headerDrop, this.headerDrop);\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        this.parent.off(events.reorderComplete, this.onActionComplete);\n        this.parent.off(events.columnDrag, this.drag);\n        this.parent.off(events.columnDragStart, this.dragStart);\n        this.parent.off(events.columnDragStop, this.dragStop);\n        this.parent.off(events.headerRefreshed, this.createReorderElement);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n        this.parent.off(events.destroy, this.destroy);\n        //call ejdrag and drop destroy\n    };\n    Reorder.prototype.keyPressHandler = function (e) {\n        var gObj = this.parent;\n        switch (e.action) {\n            case 'ctrlLeftArrow':\n            case 'ctrlRightArrow':\n                // eslint-disable-next-line no-case-declarations\n                var element = gObj.focusModule.currentInfo.element;\n                if (element && element.classList.contains('e-headercell')) {\n                    var column = gObj.getColumnByUid(element.firstElementChild.getAttribute('e-mappinguid'));\n                    var visibleCols = gObj.getVisibleColumns();\n                    var index = visibleCols.indexOf(column);\n                    var toCol = e.action === 'ctrlLeftArrow' ? visibleCols[index - 1] : visibleCols[index + 1];\n                    if (toCol && toCol.field && column.field) {\n                        this.reorderColumns(column.field, toCol.field);\n                    }\n                }\n                break;\n        }\n    };\n    Reorder.prototype.drag = function (e) {\n        var gObj = this.parent;\n        var target = e.target;\n        if (!e.column.allowReordering || e.column.lockColumn) {\n            return;\n        }\n        var closest = closestElement(target, '.e-headercell:not(.e-stackedHeaderCell)');\n        var cloneElement = gObj.element.querySelector('.e-cloneproperties');\n        var content = gObj.isFrozenGrid() ? gObj.getMovableVirtualContent() : gObj.getContent().firstElementChild;\n        var isLeft = this.x > getPosition(e.event).x + content.scrollLeft;\n        removeClass([].slice.call(gObj.getHeaderTable().getElementsByClassName('e-reorderindicate')), ['e-reorderindicate']);\n        this.setDisplay('none');\n        this.stopTimer();\n        classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n        this.updateScrollPostion(e.event);\n        if (closest && !closest.isEqualNode(this.element)) {\n            target = closest;\n            //consider stacked, detail header cell\n            if (!(!this.chkDropPosition(this.element, target) || !this.chkDropAllCols(this.element, target))) {\n                this.updateArrowPosition(target, isLeft);\n                classList(target, ['e-allowDrop', 'e-reorderindicate'], []);\n            }\n            else if (!(gObj.allowGrouping && parentsUntil(e.target, 'e-groupdroparea'))) {\n                classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n            }\n        }\n        gObj.trigger(events.columnDrag, { target: target, draggableType: 'headercell', column: e.column });\n    };\n    Reorder.prototype.updateScrollPostion = function (e) {\n        var _this = this;\n        var x = getPosition(e).x;\n        var cliRect = this.parent.element.getBoundingClientRect();\n        var cliRectBaseRight = cliRect.right;\n        if (this.parent.isFrozenGrid()) {\n            this.updateFrozenScrollPosition(x, cliRect);\n        }\n        else {\n            var cliRectBaseLeft = cliRect.left;\n            var scrollElem_1 = this.parent.getContent().firstElementChild;\n            if (x > cliRectBaseLeft && x < cliRectBaseLeft + 35) {\n                this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem_1, true); }, 50);\n            }\n            else if (x < cliRectBaseRight && x > cliRectBaseRight - 35) {\n                this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem_1, false); }, 50);\n            }\n        }\n    };\n    Reorder.prototype.updateFrozenScrollPosition = function (x, cliRect) {\n        var _this = this;\n        var scrollElem = this.parent.getContent().querySelector('.' + literals.movableContent);\n        var mhdrCliRect = this.parent.element.querySelector('.' + literals.movableHeader).getBoundingClientRect();\n        var left = this.parent.getFrozenLeftCount();\n        var right = this.parent.getFrozenRightColumnsCount();\n        var cliRectBaseRight = right ? mhdrCliRect.right : cliRect.right;\n        var cliRectBaseLeft = left ? mhdrCliRect.left : cliRect.left;\n        if (x > cliRectBaseLeft && x < cliRectBaseLeft + 35) {\n            this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem, true); }, 50);\n        }\n        else if (x < cliRectBaseRight && x > cliRectBaseRight - 35) {\n            this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem, false); }, 50);\n        }\n    };\n    Reorder.prototype.setScrollLeft = function (scrollElem, isLeft) {\n        var scrollLeft = scrollElem.scrollLeft;\n        scrollElem.scrollLeft = scrollElem.scrollLeft + (isLeft ? -5 : 5);\n        if (scrollLeft !== scrollElem.scrollLeft) {\n            this.setDisplay('none');\n        }\n    };\n    Reorder.prototype.stopTimer = function () {\n        window.clearInterval(this.timer);\n    };\n    Reorder.prototype.updateArrowPosition = function (target, isLeft) {\n        var cliRect = target.getBoundingClientRect();\n        var cliRectBase = this.parent.element.getBoundingClientRect();\n        if ((isLeft && cliRect.left < cliRectBase.left) || (!isLeft && cliRect.right > cliRectBase.right)) {\n            return;\n        }\n        if (this.parent.isFrozenGrid() && target.classList.contains('e-headercell')) {\n            var left = this.parent.getFrozenLeftCount();\n            var right = this.parent.getFrozenRightColumnsCount();\n            var dropEle = this.element.querySelector('.e-headercelldiv');\n            var dropCol = dropEle ? this.parent.getColumnByUid(dropEle.getAttribute('data-uid')) : null;\n            var col = this.parent.getColumnByUid(target.firstElementChild.getAttribute('e-mappinguid'));\n            var fhdrWidth = Math.round(this.parent.getFrozenVirtualHeader().getBoundingClientRect().right);\n            var mhdrRight = Math.round(this.parent.getMovableVirtualHeader().getBoundingClientRect().right);\n            if (col) {\n                if (left && !right && this.parent.getNormalizedColumnIndex(col.uid) >= left\n                    && ((isLeft && Math.round(cliRect.left) < fhdrWidth) || (!isLeft && mhdrRight < cliRect.right))) {\n                    return;\n                }\n                if (!left && right && dropCol && dropCol.getFreezeTableName() !== col.getFreezeTableName()\n                    && (!isLeft && Math.round(cliRect.right) < fhdrWidth)) {\n                    return;\n                }\n            }\n        }\n        var isSticky = this.parent.getHeaderContent().classList.contains('e-sticky');\n        this.upArrow.style.top = isSticky ? cliRect.top + cliRect.height + 'px' : cliRect.top + cliRect.height - cliRectBase.top + 'px';\n        this.downArrow.style.top = isSticky ? cliRect.top - 7 + 'px' : cliRect.top - cliRectBase.top - 7 + 'px';\n        this.upArrow.style.left = this.downArrow.style.left = isSticky ? (isLeft ? cliRect.left : cliRect.right) - 4 + 'px' :\n            (isLeft ? cliRect.left : cliRect.right) - cliRectBase.left - 4 + 'px';\n        this.setDisplay('');\n    };\n    Reorder.prototype.dragStart = function (e) {\n        var gObj = this.parent;\n        var target = e.target;\n        this.element = target.classList.contains('e-headercell') ? target :\n            parentsUntil(target, 'e-headercell');\n        if (!e.column.allowReordering || e.column.lockColumn) {\n            return;\n        }\n        var content = gObj.isFrozenGrid() ? gObj.getMovableVirtualContent() : gObj.getContent().firstElementChild;\n        this.x = getPosition(e.event).x + content.scrollLeft;\n        gObj.trigger(events.columnDragStart, {\n            target: target, draggableType: 'headercell', column: e.column\n        });\n    };\n    Reorder.prototype.dragStop = function (e) {\n        var gObj = this.parent;\n        this.setDisplay('none');\n        this.stopTimer();\n        if (!e.cancel) {\n            gObj.trigger(events.columnDrop, { target: e.target, draggableType: 'headercell', column: e.column });\n        }\n        removeClass([].slice.call(gObj.getHeaderTable().getElementsByClassName('e-reorderindicate')), ['e-reorderindicate']);\n    };\n    Reorder.prototype.setDisplay = function (display) {\n        this.upArrow.style.display = display;\n        this.downArrow.style.display = display;\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} return the module name\n     * @private\n     */\n    Reorder.prototype.getModuleName = function () {\n        return 'reorder';\n    };\n    return Reorder;\n}());\nexport { Reorder };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}