{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { PdfGrid } from '../pdf-grid';\nimport { PdfStringFormat } from './../../../graphics/fonts/pdf-string-format';\nimport { SizeF, RectangleF, PointF } from './../../../drawing/pdf-drawing';\nimport { PdfBorders } from '../styles/pdf-borders';\nimport { PdfLayoutType, PdfLayoutBreakType } from './../../../graphics/figures/enum';\nimport { PdfLayoutResult, PdfLayoutFormat, ElementLayouter } from './../../../graphics/figures/base/element-layouter';\nimport { PdfHorizontalOverflowType } from '../styles/style';\nimport { TemporaryDictionary } from './../../../collections/object-object-pair/dictionary';\nimport { PdfStringLayouter } from './../../../graphics/fonts/string-layouter';\nimport { PdfDocument } from './../../../document/pdf-document';\n/**\n * Class `lay outing the text`.\n *\n */\n\nvar PdfGridLayouter =\n/** @class */\nfunction (_super) {\n  __extends(PdfGridLayouter, _super); //constructor\n\n  /**\n   * Initialize a new instance for `PdfGrid` class.\n   * @private\n   */\n\n\n  function PdfGridLayouter(baseFormat) {\n    var _this = _super.call(this, baseFormat) || this;\n    /**\n     * @hidden\n     * @private\n     */\n\n\n    _this.gridInitialWidth = 0;\n    /**\n     * @hidden\n     * @private\n     */\n\n    _this.gridSize = new SizeF(0, 0);\n    _this.parentCellIndex = 0;\n    _this.tempWidth = 0;\n    _this.childheight = 0;\n    /**\n     * Check weather it is `child grid or not`.\n     * @private\n     */\n\n    _this.isChildGrid = false;\n    /**\n     * @hidden\n     * @private\n     */\n\n    _this.hasRowSpanSpan = false;\n    /**\n     * @hidden\n     * @private\n     */\n\n    _this.isRearranged = false;\n    /**\n     * @hidden\n     * @private\n     */\n\n    _this.pageBounds = new RectangleF();\n    /**\n     * @hidden\n     * @private\n     */\n\n    _this.listOfNavigatePages = [];\n    /**\n     * @hidden\n     * @private\n     */\n\n    _this.flag = true;\n    /**\n     * @hidden\n     * @private\n     */\n\n    _this.columnRanges = [];\n    /**\n     * @hidden\n     * @private\n     */\n\n    _this.currentLocation = new PointF(0, 0);\n    /**\n     * @hidden\n     * @private\n     */\n\n    _this.breakRow = true;\n    _this.slr = null;\n    _this.remainderText = null;\n    _this.isPaginate = false;\n    /**\n     * Checks whether the x co-ordinate is need to set as client size or not.\n     * @hidden\n     * @private\n     */\n\n    _this.isOverloadWithPosition = false;\n    return _this;\n  }\n\n  Object.defineProperty(PdfGridLayouter.prototype, \"Grid\", {\n    //Properties\n    get: function () {\n      return this.elements;\n    },\n    enumerable: true,\n    configurable: true\n  }); // Constructors\n\n  /**\n   * Initializes a new instance of the `StringLayouter` class.\n   * @private\n   */\n  //Public methods\n\n  /**\n   * `Layouts` the text.\n   * @private\n   */\n\n  /**\n   * `Layouts` the specified graphics.\n   * @private\n   */\n\n  /**\n   * `Layouts` the specified graphics.\n   * @private\n   */\n\n  /*public layout(graphics : PdfLayoutParams) : PdfLayoutResult\n  public layout(graphics : PdfGraphics, bounds : RectangleF) : void\n  public layout(graphics : PdfGraphics, bounds : PointF) : void\n  public layout(graphics ?: PdfGraphics | PdfLayoutParams, bounds ?: PointF | RectangleF) : void | PdfLayoutResult  {\n      if (graphics instanceof PdfGraphics) {\n      if (bounds instanceof PointF) {\n          if (bounds.x === 0) {\n              bounds.x = PdfBorders.default.right.width / 2;\n          }\n          if (bounds.y === 0) {\n              bounds.y = PdfBorders.default.top.width / 2;\n          }\n          let boundaries : RectangleF = new RectangleF(bounds, new SizeF(0, 0));\n          this.layout(graphics, boundaries);\n      } else {\n          let width : number = graphics.clientSize.width;\n          let parameter : PdfLayoutParams = new PdfLayoutParams();\n          parameter.bounds = bounds;\n          this.currentGraphics = graphics;\n          if (graphics.layer != null) {\n              let index : number = 0;\n              if (this.currentGraphics.page instanceof PdfPage) {\n                  index = (this.currentGraphics.page as PdfPage).section.indexOf(this.currentGraphics.page as PdfPage);\n              } else {\n                  index = (this.currentGraphics.page as PdfPageBase).defaultLayerIndex;\n              }\n          } else {\n              this.layoutInternal(parameter);\n          }\n      }\n  }\n  }*/\n\n  /**\n   * Gets the `format`.\n   * @private\n   */\n\n  PdfGridLayouter.prototype.getFormat = function (format) {\n    var f = format;\n    return f;\n  };\n  /**\n   * `Layouts` the element.\n   * @private\n   */\n\n\n  PdfGridLayouter.prototype.layoutInternal = function (param) {\n    var format = this.getFormat(param.format);\n    this.gridLayoutFormat = this.getFormat(param.format);\n    this.currentPage = param.page;\n\n    if (this.currentPage !== null) {\n      var pageHeight = this.currentPage.getClientSize().height;\n      var pageWidth = this.currentPage.getClientSize().width;\n      this.currentPageBounds = this.currentPage.getClientSize();\n    } else {\n      throw Error('Can not set page as null'); //this.currentPageBounds = this.currentGraphics.clientSize;\n    }\n\n    this.currentGraphics = this.currentPage.graphics; //this.currentGraphics = (this.currentPage != null ) ? this.currentPage.graphics : this.currentGraphics;\n    // if (this.currentGraphics.layer !== null) {\n    //     let index : number = 0;\n    //     if (this.currentGraphics.page instanceof PdfPage) {\n    //         index = (this.currentGraphics.page as PdfPage).section.indexOf(this.currentGraphics.page as PdfPage);\n    //     } else {\n    //         index = (this.currentGraphics.page as PdfPageBase).defaultLayerIndex;\n    //     }\n    //     this.listOfNavigatePages.push(index);\n    // }\n\n    var index = 0;\n    index = this.currentGraphics.page.section.indexOf(this.currentGraphics.page);\n    this.listOfNavigatePages.push(index);\n\n    if (format != null && format.break === PdfLayoutBreakType.FitColumnsToPage) {\n      this.currentBounds = new RectangleF(new PointF(param.bounds.x, param.bounds.y), new SizeF(this.Grid.columns.width, this.currentGraphics.clientSize.height));\n    } else {\n      this.currentBounds = new RectangleF(new PointF(param.bounds.x, param.bounds.y), this.currentGraphics.clientSize);\n    } //this.currentBounds = new RectangleF(new PointF(param.bounds.x, param.bounds.y), this.currentGraphics.clientSize);\n\n\n    if (this.Grid.rows.count !== 0) {\n      this.currentBounds.width = param.bounds.width > 0 ? param.bounds.width : this.currentBounds.width - this.Grid.rows.getRow(0).cells.getCell(0).style.borders.left.width / 2;\n    } else if (this.Grid.headers.count !== 0) {\n      // this.currentBounds.width = (param.bounds.width > 0) ? param.bounds.width : (this.currentBounds.width -\n      //                                 this.Grid.headers.getHeader(0).cells.getCell(0).style.borders.left.width / 2);\n      this.currentBounds.width = param.bounds.width;\n    } else {\n      throw Error('Please add row or header into grid');\n    }\n\n    this.startLocation = new PointF(param.bounds.x, param.bounds.y); // if (this.Grid.style.allowHorizontalOverflow && this.currentBounds.width > this.currentGraphics.clientSize.width) {\n    //     this.currentBounds.width = this.currentGraphics.clientSize.width;\n    //     this.currentBounds.width -= this.currentBounds.x;\n    // }\n    // if (this.Grid.isChildGrid) {\n    //     this.childheight = param.bounds.height;\n    // }\n    // if (param.format !== null && param.format.usePaginateBounds) {\n    //     if (param.format.paginateBounds.height > 0) {\n    //         this.currentBounds.height = param.format.paginateBounds.height;\n    //     }\n    //} else \n\n    if (param.bounds.height > 0 && !this.Grid.isChildGrid) {\n      this.currentBounds.height = param.bounds.height;\n    }\n\n    if (!this.Grid.isChildGrid) {\n      this.hType = this.Grid.style.horizontalOverflowType;\n    }\n\n    if (!this.Grid.style.allowHorizontalOverflow) {\n      this.columnRanges = [];\n\n      if (typeof this.Grid.isChildGrid !== 'undefined' && typeof this.Grid.isChildGrid) {\n        this.Grid.measureColumnsWidth(this.currentBounds);\n      } else {\n        this.Grid.measureColumnsWidth(new RectangleF(this.currentBounds.x, this.currentBounds.y, this.currentBounds.x + this.currentBounds.width, this.currentBounds.height));\n      }\n\n      this.columnRanges.push([0, this.Grid.columns.count - 1]);\n    } else {\n      this.Grid.measureColumnsWidth();\n      this.determineColumnDrawRanges();\n    }\n\n    if (this.Grid.hasRowSpanSpan) {\n      for (var i = 0; i < this.Grid.rows.count; i++) {\n        if (this.Grid.rows.getRow(i).height !== -1 && !this.Grid.rows.getRow(i).isRowHeightSet) {\n          this.Grid.rows.getRow(i).isRowHeightSet = true;\n        }\n      }\n    }\n\n    var result = this.layoutOnPage(param);\n    return result;\n  }; // /* tslint:enable */\n\n  /**\n   * `Determines the column draw ranges`.\n   * @private\n   */\n\n\n  PdfGridLayouter.prototype.determineColumnDrawRanges = function () {\n    var startColumn = 0;\n    var endColumn = 0;\n    var cellWidths = 0;\n    var availableWidth = this.currentGraphics.clientSize.width - this.currentBounds.x;\n\n    for (var i = 0; i < this.Grid.columns.count; i++) {\n      cellWidths += this.Grid.columns.getColumn(i).width;\n\n      if (cellWidths >= availableWidth) {\n        var subWidths = 0;\n\n        for (var j = startColumn; j <= i; j++) {\n          subWidths += this.Grid.columns.getColumn(j).width;\n\n          if (subWidths > availableWidth) {\n            break;\n          }\n\n          endColumn = j;\n        }\n\n        this.columnRanges.push([startColumn, endColumn]);\n        startColumn = endColumn + 1;\n        endColumn = startColumn;\n        cellWidths = endColumn <= i ? this.Grid.columns.getColumn(i).width : 0;\n      }\n    } // if (startColumn !== this.columns.Count) {\n\n\n    this.columnRanges.push([startColumn, this.Grid.columns.count - 1]); // }\n  };\n  /**\n   * `Layouts the on page`.\n   * @private\n   */\n\n\n  PdfGridLayouter.prototype.layoutOnPage = function (param) {\n    /* tslint:disable */\n    this.pageBounds.x = param.bounds.x;\n    this.pageBounds.y = param.bounds.y;\n    this.pageBounds.height = param.bounds.height;\n    var format = this.getFormat(param.format);\n    var endArgs = null;\n    var result = null;\n    var layoutedPages = new TemporaryDictionary();\n    var startPage = param.page;\n    var isParentCell = false;\n    var cellBounds = [];\n\n    for (var index = 0; index < this.columnRanges.length; index++) {\n      var range = this.columnRanges[index];\n      this.cellStartIndex = range[0];\n      this.cellEndIndex = range[1];\n      var returnObject = this.raiseBeforePageLayout(this.currentPage, this.currentBounds, this.currentRowIndex);\n      this.currentBounds = returnObject.currentBounds;\n      this.currentRowIndex = returnObject.currentRowIndex; // if (returnObject.returnValue) {\n      //     result = new PdfGridLayoutResult(this.currentPage, this.currentBounds);\n      //     break;\n      // }\n      //Draw Headers.\n\n      var drawHeader = void 0;\n\n      for (var i_1 = 0; i_1 < this.Grid.headers.count; i_1++) {\n        var row = this.Grid.headers.getHeader(i_1);\n        var headerHeight = this.currentBounds.y;\n        this.isHeader = true;\n\n        if (startPage != this.currentPage) {\n          for (var k = this.cellStartIndex; k <= this.cellEndIndex; k++) {\n            if (row.cells.getCell(k).isCellMergeContinue) {\n              row.cells.getCell(k).isCellMergeContinue = false;\n              row.cells.getCell(k).value = \"\";\n            }\n          }\n        } // RowLayoutResult\n\n\n        var headerResult = this.drawRow(row);\n\n        if (headerHeight === this.currentBounds.y) {\n          drawHeader = true;\n\n          if (PdfGridLayouter.repeatRowIndex === -1) {\n            PdfGridLayouter.repeatRowIndex = i_1;\n          }\n        } else {\n          drawHeader = false;\n        }\n\n        if (!headerResult.isFinish && startPage !== null && format.layout !== PdfLayoutType.OnePage && drawHeader) {\n          this.startLocation.x = this.currentBounds.x;\n          this.currentPage = this.getNextPageformat(format);\n          this.startLocation.y = this.currentBounds.y;\n          if (typeof format.paginateBounds !== 'undefined' && format.paginateBounds.x === 0 && format.paginateBounds.y === 0 && format.paginateBounds.width === 0 && format.paginateBounds.height === 0) this.currentBounds.x += this.startLocation.x;\n          this.drawRow(row);\n        }\n\n        this.isHeader = false;\n      }\n\n      var i = 0;\n      var length_1 = this.Grid.rows.count;\n      var repeatRow = void 0;\n      var startingHeight = 0;\n      var flag = true; //Here is to draw parent Grid and Cells\n\n      cellBounds = []; //Draw row by row with the specified cell range.\n\n      for (var j = 0; j < this.Grid.rows.count; j++) {\n        var row = this.Grid.rows.getRow(j);\n        i++;\n        this.currentRowIndex = i - 1;\n        var originalHeight = this.currentBounds.y;\n        startPage = this.currentPage;\n        PdfGridLayouter.repeatRowIndex = -1;\n\n        if (flag && row.grid.isChildGrid) {\n          startingHeight = originalHeight;\n          flag = false;\n        }\n\n        var rowResult = null; ///rowResult = this.drawRow(row);\n\n        /*if(!row.isrowFinish) {\n            if(!row.grid.isgridSplit){\n                rowResult = this.drawRow(row);\n                row.isrowFinish = true;\n                row.isrowDraw = true;\n            } else {\n                if(!row.isrowDraw){\n                    rowResult = this.drawRow(row);\n                    row.isrowFinish = true;\n                    row.isrowDraw = true;\n                    row.grid.isgridSplit = false;\n                } else {\n                    rowResult =  null;\n                    break;\n                }\n            }\n        }\n        else {\n            //row.isrowFinish = false;\n            //rowResult = this.drawRow(row);\n            rowResult = null;\n            break;\n            \n        }             */\n\n        if (this.Grid.splitChildRowIndex == -1) {\n          rowResult = this.drawRow(row);\n          row.isrowFinish = true;\n        } else {\n          if (row.grid.ParentCell.row.grid.isGridSplit && this.Grid.splitChildRowIndex <= row.rowIndex) {\n            rowResult = this.drawRow(row);\n            row.isrowFinish = true;\n          } else if (row.isrowFinish) {\n            continue;\n          } else {\n            break;\n          }\n        } //rowResult = this.drawRow(row);\n\n\n        cellBounds.push(rowResult.bounds.width);\n        /*if (row.isRowBreaksNextPage)\n            {\n                let x : number  = 0;\n                for (let l : number = 0; l < row.cells.count; l++)\n                {\n                    let isNestedRowBreak : boolean = false;\n                    if (row.height == row.cells.getCell(l).height)\n                    {\n                        let n : number;\n                        let grid : PdfGrid = row.cells.getCell(l).value as PdfGrid;\n                        for (let m : number = grid.rows.count; 0 < m; m--)\n                        {\n                            if ((grid.rows.getRow(m - 1).rowBreakHeight > 0))\n                            {\n                                isNestedRowBreak = true;\n                                break;\n                            }\n                            if (grid.rows.getRow(m - 1).isRowBreaksNextPage)\n                            {\n                                row.rowBreakHeightValue = grid.rows.getRow(m - 1).rowBreakHeightValue;\n                                break;\n                            }\n                            row.rowBreakHeightValue += grid.rows.getRow(m - 1).height;\n                        }\n                    }\n                    if (isNestedRowBreak)\n                        break;\n                }\n                for (let j : number = 0; j < row.cells.count; j++)\n                {\n                     if (row.height > row.cells.getCell(j).height)\n                    {\n                        row.cells.getCell(j).value = \" \";\n                        let rect : RectangleF ;\n                        let page : PdfPage = this.getNextPage(this.currentPage);\n                        let section : PdfSection = this.currentPage.section;\n                        let index : number = section.indexOf(page);\n                        for (let k : number = 0; k < (section.count - 1) - index; k++)\n                        {\n                            rect = new RectangleF(x, 0, row.grid.columns.getColumn(j).width, page.getClientSize().height);\n                            PdfGridLayouter.repeatRowIndex = -1;\n                            row.cells.getCell(j).draw(page.graphics, rect, false);\n                            page = this.getNextPage(page);\n                        }\n                        rect = new RectangleF(x, 0, row.grid.columns.getColumn(j).width, row.rowBreakHeightValue);\n                         row.cells.getCell(j).draw(page.graphics, rect, false);\n                    }\n                    x += row.grid.columns.getColumn(j).width;\n                }\n            }*/\n        //if height remains same, it is understood that row is not drawn in the page\n\n        if (originalHeight === this.currentBounds.y) {\n          repeatRow = true;\n          PdfGridLayouter.repeatRowIndex = this.Grid.rows.rowCollection.indexOf(row);\n        } else {\n          repeatRow = false;\n          PdfGridLayouter.repeatRowIndex = -1;\n        }\n\n        while (!rowResult.isFinish && startPage != null) {\n          var tempResult = this.getLayoutResult();\n          /*if (startPage != this.currentPage)\n              {\n                  if (row.grid.isChildGrid && row.grid.ParentCell != null)\n                  {\n                      let bounds : RectangleF= new RectangleF(new PointF(format.paginateBounds.x,format.paginateBounds.y), new SizeF(param.bounds.width, tempResult.bounds.height));\n                      bounds.x += param.bounds.x;\n                      if (row.grid.ParentCell.row.grid.style.cellPadding != null)\n                      {\n                          bounds.y += row.grid.ParentCell.row.grid.style.cellPadding.top;\n                          if (bounds.height > this.currentPageBounds.height)\n                          {\n                              bounds.height = this.currentPageBounds.height - bounds.y;\n                              bounds.height -= (row.grid.ParentCell.row.grid.style.cellPadding.bottom);\n                          }\n                      }\n                      // Draw border for cells in the nested grid cell's row.\n                      for (let c : number = 0; c < row.cells.count; c++)\n                      {\n                          let cell : PdfGridCell = row.cells.getCell(c);\n                          let cellWidth :  number= 0;\n                          if (cell.columnSpan > 1)\n                          {\n                              for (; c < cell.columnSpan; c++)\n                                  cellWidth += row.grid.columns.getColumn(c).width;\n                          }\n                          else\n                              cellWidth = Math.max(cell.width, row.grid.columns.getColumn(c).width);\n                          cell.drawCellBorders(this.currentGraphics, new RectangleF(new PointF(bounds.x,bounds.y), new SizeF(cellWidth, bounds.height)));\n                          bounds.x += cellWidth;\n                          c += (cell.columnSpan - 1);\n                      }\n                  }\n              }\n              */\n\n          endArgs = this.raisePageLayouted(tempResult);\n          if (endArgs.cancel || repeatRow) break;else if (this.Grid.allowRowBreakAcrossPages) {\n            //If there is no space in the current page, add new page and then draw the remaining row.\n            this.currentPage = this.getNextPageformat(format);\n            originalHeight = this.currentBounds.y;\n            var location_1 = new PointF(PdfBorders.default.right.width / 2, PdfBorders.default.top.width / 2);\n\n            if (format.paginateBounds.x === 0 && format.paginateBounds.y === 0 && format.paginateBounds.width === 0 && format.paginateBounds.height === 0 && this.startLocation.x === location_1.x && this.startLocation.y === location_1.y) {\n              this.currentBounds.x += this.startLocation.x;\n              this.currentBounds.y += this.startLocation.y;\n            }\n\n            if (this.isPaginate) {\n              this.startLocation.y = this.currentBounds.y;\n              this.isPaginate = false;\n            }\n\n            if (this.Grid.isChildGrid && row.grid.ParentCell != null) {\n              if (this.Grid.ParentCell.row.grid.style.cellPadding != null) {\n                if (row.rowBreakHeight + this.Grid.ParentCell.row.grid.style.cellPadding.top < this.currentBounds.height) {\n                  this.currentBounds.y = this.Grid.ParentCell.row.grid.style.cellPadding.top;\n                }\n              }\n            }\n\n            if (row.grid.ParentCell != null) {\n              row.grid.ParentCell.row.isRowBreaksNextPage = true;\n              row.grid.ParentCell.row.rowBreakHeightValue = row.rowBreakHeight + this.Grid.ParentCell.row.grid.style.cellPadding.top + this.Grid.ParentCell.row.grid.style.cellPadding.bottom;\n\n              for (var i_2 = row.rowIndex + 1; i_2 < row.grid.rows.count; i_2++) {\n                row.grid.ParentCell.row.rowBreakHeightValue += row.grid.rows.getRow(i_2).height;\n              } //row.rowBreakHeight = row.grid.ParentCell.row.rowBreakHeightValue;\n\n            }\n            /*if (row.noOfPageCount > 1)\n            {\n                let temp : number = row.rowBreakHeightValue;\n                for (let j : number = 1; j < row.noOfPageCount; j++)\n                {\n                    row.rowBreakHeightValue = 0;\n                    row.height = ((row.noOfPageCount - 1) * this.currentPage.getClientSize().height);\n                    this.drawRow(row);\n                    this.currentPage = this.getNextPageformat(format);\n                    startPage = this.currentPage;\n                }\n                row.rowBreakHeightValue = temp;\n                row.noOfPageCount = 1;\n                rowResult = this.drawRow(row);\n            } else {\n                rowResult = this.drawRow(row);\n            }\n            /*if(row.grid.isChildGrid){\n                row.isrowFinish = false;\n                row.isrowDraw = false;\n                row.grid.isgridSplit = true;\n                row.grid.ParentCell.row.grid.isgridSplit = true;\n                //rowResult.isFinish = false;\n                break;\n            }*/\n\n\n            if (row.grid.isChildGrid) {\n              //row.grid.isgridSplit = true;\n              row.isrowFinish = false; //row.grid.ParentCell.row.grid.isgridSplit = true;\n\n              row.grid.splitChildRowIndex = row.rowIndex;\n              row.grid.ParentCell.row.grid.splitChildRowIndex = row.grid.ParentCell.row.rowIndex;\n\n              if (row.grid.ParentCell.row.grid.isGridSplit) {\n                row.grid.ParentCell.row.noOfPageCount += 1;\n                row.grid.ParentCell.row.grid.isGridSplit = false;\n              }\n\n              break;\n            }\n\n            if (row.noOfPageCount < 1) {\n              if (row.grid.splitChildRowIndex != -1) {\n                row.grid.isGridSplit = true;\n              }\n\n              if (row.style.border != null && (row.style.border.left != null && row.style.border.left.width !== 1 || row.style.border.top != null && row.style.border.top.width !== 1)) {\n                var x = row.style.border.left.width / 2;\n                var y = row.style.border.top.width / 2;\n\n                if (this.currentBounds.x === PdfBorders.default.right.width / 2 && this.currentBounds.y === PdfBorders.default.right.width / 2) {\n                  var newBound = new RectangleF(x, y, this.currentBounds.width, this.currentBounds.height);\n                  this.currentBounds = newBound;\n                }\n              }\n\n              if (this.Grid.repeatHeader) {\n                for (var j_1 = 0; j_1 < this.Grid.headers.count; j_1++) {\n                  var headerRepeat = this.Grid.headers.getHeader(j_1);\n                  this.drawRow(headerRepeat);\n                }\n              }\n\n              rowResult = this.drawRow(row);\n\n              if (row.noOfPageCount >= 1) {\n                var temp = row.rowBreakHeightValue;\n\n                for (var j_2 = 0; j_2 < row.noOfPageCount; j_2++) {\n                  //this.currentPage.section.add();\n                  var tempResult1 = this.getLayoutResult();\n                  endArgs = this.raisePageLayouted(tempResult1);\n                  this.currentPage = this.getNextPageformat(format);\n                  originalHeight = this.currentBounds.y; //row.rowBreakHeightValue = 0;\n\n                  if (row.grid.splitChildRowIndex != -1) {\n                    row.grid.isGridSplit = true;\n                  }\n\n                  this.currentBounds.y = 0.5;\n\n                  if (this.Grid.repeatHeader) {\n                    for (var i_3 = 0; i_3 < this.Grid.headers.count; i_3++) {\n                      var header = this.Grid.headers.getHeader(i_3);\n                      this.drawRow(header);\n                    }\n                  } //row.height = ((row.noOfPageCount - 1) * this.currentPage.getClientSize().height);\n\n\n                  this.drawRow(row);\n                } // row.rowBreakHeight = temp;\n                // row.noOfPageCount = 1;\n                // rowResult = this.drawRow(row);\n\n              }\n\n              row.grid.splitChildRowIndex = -1;\n              row.grid.isGridSplit = false;\n              rowResult.isFinish = this.checkIsFisished(row); //row.NestedGridLayoutResult.bounds.height = row.rowBreakHeightValue;\n              //this.currentBounds.y = rowResult.bounds.y;\n\n              for (var i_4 = 0; i_4 < row.cells.count; i_4++) {\n                if (row.cells.getCell(i_4).value instanceof PdfGrid) {\n                  row.cells.getCell(i_4).value.splitChildRowIndex = -1;\n                }\n              }\n            }\n          } // else if (!this.Grid.allowRowBreakAcrossPages && i < length)\n          // {\n          //     this.currentPage = this.getNextPageformat(format);\n          //     break;\n          // }\n          // else if (i >= length)\n          //     break;\n        }\n\n        if (!rowResult.isFinish && startPage !== null && format.layout !== PdfLayoutType.OnePage && repeatRow) {\n          // During pagination, cell position is maintained here.\n          this.startLocation.x = this.currentBounds.x;\n          var isAddNextPage = false;\n          this.currentPage = this.getNextPageformat(format);\n          /*if (!this.Grid.isSingleGrid)\n          {\n              for ( let j : number= 0; j < this.Grid.rows.count; j++)\n              {\n                  let isWidthGreaterthanParent : boolean = false;\n                  for (let k : number = 0; k < this.Grid.rows.getRow(j).cells.count; k++)\n                  {\n                      if (this.Grid.rows.getRow(j).cells.getCell(k).width > this.currentPageBounds.width)\n                          isWidthGreaterthanParent = true;\n                  }\n                  if (isWidthGreaterthanParent && this.Grid.rows.getRow(j).cells.getCell(this.rowBreakPageHeightCellIndex).pageCount > 0)\n                  {\n                      isAddNextPage = true;\n                  }\n              }\n          }\n          if (!this.Grid.isRearranged && isAddNextPage)\n               {\n                   let section : PdfSection = this.currentPage.section;\n                   \n                   //this.currentPage = section.add();\n               \n                   this.currentGraphics = this.currentPage.graphics;\n                   this.currentBounds = new RectangleF(new PointF(0,0), this.currentPage.getClientSize());\n                \n                   let pageindex  : number = (this.currentGraphics.page as PdfPage).section.indexOf(this.currentGraphics.page as PdfPage);\n               }\n               else\n               {\n                   this.currentPage = this.getNextPageformat(format);\n               }\n               if (format.paginateBounds.y == 0)\n                   this.currentBounds.y = PdfBorders.default.top.width/2;\n               else\n               {\n                   this.currentBounds.y = format == null ? 0 : format.paginateBounds.y;\n                   \n               }*/\n\n          if (this.raiseBeforePageLayout(this.currentPage, this.currentBounds, this.currentRowIndex).returnValue) {\n            break;\n          }\n\n          if (param.format !== null && !param.format.usePaginateBounds && param.bounds !== null && param.bounds.height > 0 && !this.Grid.isChildGrid) {\n            this.currentBounds.height = param.bounds.height;\n          }\n\n          if (typeof param.format !== 'undefined' && param.format != null && typeof param.format.usePaginateBounds !== 'undefined' && !param.format.usePaginateBounds && !(param.format.paginateBounds.x === 0 && param.format.paginateBounds.y === 0 && param.format.paginateBounds.width === 0 && param.format.paginateBounds.height === 0) && param.format.paginateBounds.y === 0) {\n            this.currentBounds.y = PdfBorders.default.top.width / 2;\n          } else {\n            this.currentBounds.y = format == null ? 0 : format.paginateBounds.y;\n\n            if (format != null && (format.paginateBounds.x !== 0 || format.paginateBounds.y !== 0 || format.paginateBounds.height !== 0 || format.paginateBounds.width !== 0)) {\n              this.currentBounds.x = format.paginateBounds.x;\n              this.currentBounds.width = format.paginateBounds.width;\n              this.currentBounds.height = format.paginateBounds.height;\n            }\n          }\n\n          if (typeof param.format !== 'undefined' && param.format !== null && typeof param.format.usePaginateBounds !== 'undefined' && !param.format.usePaginateBounds && param.bounds !== null && param.bounds.y > 0 && !this.Grid.isChildGrid) {\n            this.currentBounds.y = param.bounds.y;\n          }\n\n          this.startLocation.y = this.currentBounds.y;\n\n          if (format.paginateBounds.x === format.paginateBounds.y && format.paginateBounds.y === format.paginateBounds.height && format.paginateBounds.height === format.paginateBounds.width && format.paginateBounds.width === 0) {\n            this.currentBounds.x += this.startLocation.x;\n          }\n\n          if (this.currentBounds.x === PdfBorders.default.left.width / 2) {\n            this.currentBounds.y += this.startLocation.x;\n          }\n\n          if (this.Grid.repeatHeader) {\n            for (var i_5 = 0; i_5 < this.Grid.headers.count; i_5++) {\n              var header = this.Grid.headers.getHeader(i_5);\n              this.drawRow(header);\n            }\n          }\n\n          this.drawRow(row);\n\n          if (this.currentPage !== null && !layoutedPages.containsKey(this.currentPage)) {\n            layoutedPages.add(this.currentPage, range);\n          }\n        }\n\n        if (row.NestedGridLayoutResult != null) {\n          // Position for next row in the grid.\n          this.currentPage = row.NestedGridLayoutResult.page;\n          this.currentGraphics = this.currentPage.graphics; //If not, next row will not be drawn in the layouted page.\n\n          this.startLocation = new PointF(row.NestedGridLayoutResult.bounds.x, row.NestedGridLayoutResult.bounds.y);\n          var recalHeight = this.ReCalculateHeight(row, row.NestedGridLayoutResult.bounds.height);\n          this.currentBounds.y = recalHeight; //this.currentBounds.y = row.NestedGridLayoutResult.bounds.height;\n\n          if (startPage != this.currentPage) {\n            var secion = this.currentPage.section;\n            var startIndex = secion.indexOf(startPage) + 1;\n            var endIndex = secion.indexOf(this.currentPage);\n\n            for (var page = startIndex; page < endIndex + 1; page++) {\n              var pageGraphics = this.currentPage.graphics;\n              var location_2 = new PointF(format.paginateBounds.x, format.paginateBounds.y);\n              var height = page == endIndex ? row.NestedGridLayoutResult.bounds.height - param.bounds.y : this.currentBounds.height - location_2.y;\n              if (height <= pageGraphics.clientSize.height) height += param.bounds.y; // if (row.grid.isChildGrid && row.grid.ParentCell != null)\n              //     location.x += param.bounds.x;\n\n              location_2.y = format == null ? 0.5 : format.paginateBounds.y; // Draw border for last paginated row containing nested grid.\n\n              for (var c = 0; c < row.cells.count; c++) {\n                var cell = row.cells.getCell(c);\n                var cellWidth = 0;\n                var totalwidth = 0;\n\n                if (cell.value instanceof PdfGrid) {\n                  for (var i_6 = 0; i_6 < cell.value.columns.count; i_6++) {\n                    totalwidth += cell.value.columns.getColumn(i_6).columnWidth;\n                  }\n                } else {\n                  totalwidth = cell.width;\n                } // if (cell.columnSpan > 1)\n                // {\n                //     for (; c < cell.columnSpan; c++)\n                //         cellWidth += row.grid.columns.getColumn(c).width;\n                // }\n                // else\n\n\n                cellWidth = Math.max(totalwidth, row.grid.columns.getColumn(c).width);\n                cell.drawCellBorders(pageGraphics, new RectangleF(location_2, new SizeF(cellWidth, height)));\n                location_2.x += cellWidth;\n                c += cell.columnSpan - 1;\n              }\n            } // So, nested grid drawing is completed for the current row. Update page.\n            // Otherwise, the next nested grid of the parent will draw borders from start.\n\n\n            startPage = this.currentPage;\n          }\n        }\n      }\n\n      var isPdfGrid = false;\n      var maximumCellBoundsWidth = 0;\n\n      if (cellBounds.length > 0) {\n        maximumCellBoundsWidth = cellBounds[0];\n      }\n\n      var largeNavigatePage = [[1, 2]];\n\n      for (var c = 0; c < this.Grid.rows.count; c++) {\n        if (this.cellEndIndex != -1 && this.Grid.rows.getRow(c).cells.getCell(this.cellEndIndex).value instanceof PdfGrid) {\n          var grid = this.Grid.rows.getRow(c).cells.getCell(this.cellEndIndex).value;\n          this.rowLayoutBoundsWidth = grid.rowLayoutBoundsWidth;\n          isPdfGrid = true; // if (largeNavigatePage[0][0] < grid.listOfNavigatePages.length)\n          // {\n          //     largeNavigatePage[0][0] = grid.listOfNavigatePages.length;\n          //     largeNavigatePage[0][1] = cellBounds[c];\n          // }\n          // else if ((largeNavigatePage[0][0] == grid.listOfNavigatePages.length) && (largeNavigatePage[0][1] < cellBounds[c]))\n          // {\n          //     largeNavigatePage[0][1] = cellBounds[c];\n          // }\n        }\n      }\n\n      if (!isPdfGrid && cellBounds.length > 0) {\n        for (var c = 0; c < i - 1; c++) {\n          if (maximumCellBoundsWidth < cellBounds[c]) {\n            maximumCellBoundsWidth = cellBounds[c];\n          }\n        }\n\n        this.rowLayoutBoundsWidth = maximumCellBoundsWidth;\n      } else {\n        this.rowLayoutBoundsWidth = largeNavigatePage[0][1];\n      }\n\n      if (this.columnRanges.indexOf(range) < this.columnRanges.length - 1 && startPage != null && format.layout != PdfLayoutType.OnePage) {\n        isParentCell = this.Grid.isChildGrid;\n\n        if (largeNavigatePage[0][0] != 0) {\n          var section = this.currentPage.section;\n          var pageIndex = section.indexOf(this.currentPage);\n          this.currentGraphics = this.currentPage.graphics;\n          this.currentBounds = new RectangleF(new PointF(0, 0), this.currentPage.getClientSize());\n          var pageindex = this.currentGraphics.page.section.indexOf(this.currentGraphics.page);\n        } else {\n          this.currentPage = this.getNextPageformat(format);\n        } // let locationGrid : PointF= new PointF(PdfBorders.default.right.width / 2, PdfBorders.default.top.width / 2);\n        // if (format.paginateBounds == new RectangleF(0,0,0,0) && this.startLocation == locationGrid)\n        // {\n        //     this.currentBounds.x += this.startLocation.x;\n        //     this.currentBounds.y += this.startLocation.y;\n        // }\n\n      }\n\n      if (this.columnRanges.length - 1 !== index && this.columnRanges.length > 1 && format.layout !== PdfLayoutType.OnePage) {\n        this.currentPage = this.getNextPageformat(format);\n\n        if (format.paginateBounds.x === format.paginateBounds.y && format.paginateBounds.y === format.paginateBounds.height && format.paginateBounds.height === format.paginateBounds.width && format.paginateBounds.width === 0) {\n          this.currentBounds.x += this.startLocation.x;\n          this.currentBounds.y += this.startLocation.y; //this.currentBounds.height = this.pageBounds.height;\n        }\n      }\n    }\n\n    result = this.getLayoutResult();\n\n    if (this.Grid.style.allowHorizontalOverflow && this.Grid.style.horizontalOverflowType == PdfHorizontalOverflowType.NextPage) {\n      this.reArrangePages(layoutedPages);\n    }\n\n    this.raisePageLayouted(result);\n    return result;\n  };\n\n  PdfGridLayouter.prototype.checkIsFisished = function (row) {\n    var result = true;\n\n    for (var i = 0; i < row.cells.count; i++) {\n      if (!row.cells.getCell(i).FinishedDrawingCell) {\n        result = false;\n      }\n    }\n\n    return result;\n  };\n  /* tslint:enable */\n\n  /**\n   * Gets the `next page`.\n   * @private\n   */\n\n\n  PdfGridLayouter.prototype.getNextPageformat = function (format) {\n    var section = this.currentPage.section;\n    var nextPage = null;\n    var index = section.indexOf(this.currentPage);\n    this.flag = false;\n\n    if (index === section.count - 1) {\n      nextPage = section.add();\n    } else {\n      nextPage = section.getPages()[index + 1];\n    }\n\n    this.currentGraphics = nextPage.graphics;\n    var pageindex = this.currentGraphics.page.section.indexOf(this.currentGraphics.page);\n\n    if (!(this.listOfNavigatePages.indexOf(pageindex) !== -1)) {\n      this.listOfNavigatePages.push(pageindex);\n    }\n\n    this.currentBounds = new RectangleF(new PointF(0, 0), nextPage.getClientSize());\n\n    if (typeof format !== 'undefined' && format != null && format.usePaginateBounds && typeof format.paginateBounds !== 'undefined' && format.paginateBounds != null && format.paginateBounds.x !== format.paginateBounds.y && format.paginateBounds.y !== format.paginateBounds.height && format.paginateBounds.height !== format.paginateBounds.width && format.paginateBounds.width !== 0) {\n      this.currentBounds.x = format.paginateBounds.x;\n      this.currentBounds.y = format.paginateBounds.y;\n      this.currentBounds.height = format.paginateBounds.height;\n    }\n\n    return nextPage;\n  };\n\n  PdfGridLayouter.prototype.CheckIfDefaultFormat = function (format) {\n    var defaultFormat = new PdfStringFormat();\n    return format.alignment === defaultFormat.alignment && format.characterSpacing === defaultFormat.characterSpacing && format.clipPath === defaultFormat.clipPath && format.firstLineIndent === defaultFormat.firstLineIndent && format.horizontalScalingFactor === defaultFormat.horizontalScalingFactor && format.lineAlignment === defaultFormat.lineAlignment && format.lineLimit === defaultFormat.lineLimit && format.lineSpacing === defaultFormat.lineSpacing && format.measureTrailingSpaces === defaultFormat.measureTrailingSpaces && format.noClip === defaultFormat.noClip && format.paragraphIndent === defaultFormat.paragraphIndent && format.rightToLeft === defaultFormat.rightToLeft && format.subSuperScript === defaultFormat.subSuperScript && format.wordSpacing === defaultFormat.wordSpacing && format.wordWrap === defaultFormat.wordWrap;\n  };\n  /**\n   * `Raises BeforeCellDraw event`.\n   * @private\n   */\n\n\n  PdfGridLayouter.prototype.RaiseBeforeCellDraw = function (graphics, rowIndex, cellIndex, bounds, value, style) {\n    var args = null;\n\n    if (this.Grid.raiseBeginCellDraw) {\n      args = new PdfGridBeginCellDrawEventArgs(graphics, rowIndex, cellIndex, bounds, value, style);\n      this.Grid.onBeginCellDraw(args);\n      style = args.style;\n    }\n\n    return style;\n  };\n  /**\n   * `Raises AfterCellDraw event`.\n   * @private\n   */\n\n\n  PdfGridLayouter.prototype.raiseAfterCellDraw = function (graphics, rowIndex, cellIndex, bounds, value, cellstyle) {\n    var args = null;\n\n    if (this.Grid.raiseEndCellDraw) {\n      args = new PdfGridEndCellDrawEventArgs(graphics, rowIndex, cellIndex, bounds, value, cellstyle);\n      this.Grid.onEndCellDraw(args);\n    }\n  };\n\n  PdfGridLayouter.prototype.reArrangePages = function (layoutedPages) {\n    var document = this.currentPage.document;\n    var pages = [];\n    var keys = layoutedPages.keys();\n    var values = layoutedPages.values();\n\n    for (var i = 0; i < keys.length; i++) {\n      var page = keys[i];\n      page.section = null;\n      pages.push(page);\n      document.pages.remove(page);\n    }\n    /* tslint:disable */\n\n\n    for (var i = 0; i < layoutedPages.size(); i++) {\n      var count = 0;\n\n      for (var j = i, count_1 = layoutedPages.size() / this.columnRanges.length; j < layoutedPages.size(); j += count_1) {\n        var page = pages[j];\n\n        if (typeof page !== 'undefined' && document.pages.indexOf(page) === -1) {\n          document.pages.add(page);\n        }\n      }\n    }\n    /* tslint:enable */\n\n  };\n  /**\n   * Gets the `layout result`.\n   * @private\n   */\n\n\n  PdfGridLayouter.prototype.getLayoutResult = function () {\n    if (this.Grid.isChildGrid && this.Grid.allowRowBreakAcrossPages) {\n      for (var i = 0; i < this.Grid.rows.count; i++) {\n        var row = this.Grid.rows.getRow(i);\n\n        if (row.rowBreakHeight > 0 && row.repeatFlag) {\n          this.startLocation.y = this.currentPage.origin.y;\n        }\n      }\n    }\n\n    var bounds;\n\n    if (!this.isChanged) {\n      bounds = new RectangleF(this.startLocation, new SizeF(this.currentBounds.width, this.currentBounds.y - this.startLocation.y));\n    } // else {\n    //     bounds = new RectangleF(this.currentLocation, new SizeF(this.currentBounds.width, this.currentBounds.y -\n    //                              this.currentLocation.y));\n    // }\n\n    /* tslint:enable */\n\n\n    return new PdfGridLayoutResult(this.currentPage, bounds);\n  };\n  /**\n   * `Recalculate row height` for the split cell to be drawn.\n   * @private\n   */\n\n\n  PdfGridLayouter.prototype.ReCalculateHeight = function (row, height) {\n    var newHeight = 0.0;\n\n    for (var i = this.cellStartIndex; i <= this.cellEndIndex; i++) {\n      if (!(row.cells.getCell(i).remainingString === null || row.cells.getCell(i).remainingString === '' || typeof row.cells.getCell(i).remainingString === 'undefined')) {\n        newHeight = Math.max(newHeight, row.cells.getCell(i).measureHeight());\n      }\n    }\n\n    return Math.max(height, newHeight);\n  };\n  /**\n   * `Raises BeforePageLayout event`.\n   * @private\n   */\n\n\n  PdfGridLayouter.prototype.raiseBeforePageLayout = function (currentPage, currentBounds, currentRow) {\n    var cancel = false;\n\n    if (this.Grid.raiseBeginPageLayout) {\n      var args = new PdfGridBeginPageLayoutEventArgs(currentBounds, currentPage, currentRow);\n      this.Grid.onBeginPageLayout(args); // if (currentBounds !== args.Bounds) {\n      //     this.isChanged = true;\n      //     this.currentLocation = new PointF(args.Bounds.x, args.Bounds.y);\n      //     this.measureColumnsWidth(new RectangleF(new PointF(args.Bounds.x, args.Bounds.y) ,\n      //                                                  new SizeF(args.Bounds.width + args.Bounds.x ,\n      //                                                                 args.Bounds.height)));\n      // }\n\n      cancel = typeof args.cancel === 'undefined' ? false : args.cancel;\n      currentBounds = args.bounds;\n      currentRow = args.startRowIndex;\n    }\n\n    return {\n      returnValue: cancel,\n      currentBounds: currentBounds,\n      currentRowIndex: currentRow\n    };\n  };\n  /**\n   * `Raises PageLayout event` if needed.\n   * @private\n   */\n\n\n  PdfGridLayouter.prototype.raisePageLayouted = function (result) {\n    var args = new PdfGridEndPageLayoutEventArgs(result);\n\n    if (this.Grid.raiseEndPageLayout) {\n      this.Grid.onEndPageLayout(args);\n    }\n\n    return args;\n  };\n\n  PdfGridLayouter.prototype.drawRow = function (row, result, height) {\n    if (typeof result === 'undefined') {\n      //.. Check if required space available.\n      //.....If the row conains spans which  falls through more than one page, then draw the row to next page.                        \n      var result_1 = new RowLayoutResult();\n      var rowHeightWithSpan = 0;\n      var location_3 = new PointF(0, 0);\n      var size = new SizeF(0, 0);\n      var isHeader = false;\n\n      if (row.rowSpanExists) {\n        var maxSpan = 0;\n        var currRowIndex = this.Grid.rows.rowCollection.indexOf(row);\n\n        if (currRowIndex === -1) {\n          currRowIndex = this.Grid.headers.indexOf(row);\n\n          if (currRowIndex !== -1) {\n            isHeader = true;\n          }\n        }\n\n        for (var i = 0; i < row.cells.count; i++) {\n          var cell = row.cells.getCell(i);\n          maxSpan = Math.max(maxSpan, cell.rowSpan);\n        }\n\n        for (var i = currRowIndex; i < currRowIndex + maxSpan; i++) {\n          rowHeightWithSpan += isHeader ? this.Grid.headers.getHeader(i).height : this.Grid.rows.getRow(i).height;\n        } // let rowMaxHeight : number = rowHeightWithSpan;\n        // for (let i : number = 0; i < row.cells.count; i++ ) {\n        //     rowMaxHeight = rowMaxHeight > row.cells.getCell(i).height ? rowMaxHeight : row.cells.getCell(i).height;\n        // }\n        // let flag : boolean = true;\n        // let nextRow : PdfGridRow = this.Grid.headers.getHeader(this.Grid.headers.indexOf(row) + 1);\n        // for (let i : number = 0; i < nextRow.cells.count; i++ ) {\n        //     if (nextRow.cells.getCell(i).value !== '' && nextRow.cells.getCell(i).value !== undefined) {\n        //         flag = false;\n        //         break;\n        //     }\n        // }\n        // if ((rowMaxHeight > rowHeightWithSpan) && flag) {\n        //     row.height += (rowMaxHeight - rowHeightWithSpan);\n        // }                \n\n      }\n\n      var calculatedHeight = row.rowBreakHeight > 0.0 ? row.rowBreakHeight : row.height;\n\n      if (typeof this.Grid.isChildGrid !== 'undefined' && this.Grid.isChildGrid && typeof this.Grid.ParentCell !== 'undefined' && this.Grid.ParentCell != null) {\n        //Split row only if row height exceeds page height and AllowRowBreakAcrossPages is true.\n        // if (calculatedHeight + this.Grid.ParentCell.row.grid.style.cellPadding.bottom +\n        //             this.Grid.ParentCell.row.grid.style.cellPadding.top > this.currentPageBounds.height) {\n        //     if (this.Grid.allowRowBreakAcrossPages) {\n        //         result.isFinish = true;\n        //         if ( this.Grid.isChildGrid && row.rowBreakHeight > 0 ) {\n        //             if (this.Grid.ParentCell.row.grid.style.cellPadding !== null) {\n        //                 this.currentBounds.y += this.Grid.ParentCell.row.grid.style.cellPadding.top;\n        //             }\n        //             this.currentBounds.x = this.startLocation.x;\n        //         }\n        //         result.bounds = this.currentBounds ;\n        //         this.drawRowWithBreak(result, row, calculatedHeight);\n        //     } else {\n        //         //If AllowRowBreakAcrossPages is not true, draw the row till it fits the page.                       \n        //         if (this.Grid.ParentCell.row.grid.style.cellPadding != null) {\n        //             this.currentBounds.y += this.Grid.ParentCell.row.grid.style.cellPadding.top;\n        //             calculatedHeight = this.currentBounds.height - this.currentBounds.y -\n        //                     this.Grid.ParentCell.row.grid.style.cellPadding.bottom;\n        //         }\n        //         result.isFinish = false;\n        //         this.drawRow( row, result, calculatedHeight);\n        //     }\n        // } else\n        if (this.currentBounds.y + this.Grid.ParentCell.row.grid.style.cellPadding.bottom + calculatedHeight > this.currentPageBounds.height || this.currentBounds.y + this.Grid.ParentCell.row.grid.style.cellPadding.bottom + calculatedHeight > this.currentBounds.height || this.currentBounds.y + this.Grid.ParentCell.row.grid.style.cellPadding.bottom + rowHeightWithSpan > this.currentPageBounds.height) {\n          //If a row is repeated and still cannot fit in page, proceed draw.\n          if (typeof this.Grid.ParentCell.row.grid.LayoutFormat !== 'undefined' && this.Grid.ParentCell.row.grid.LayoutFormat.break === PdfLayoutBreakType.FitPage) {\n            PdfGridLayouter.repeatRowIndex = this.Grid.rows.rowCollection.indexOf(row);\n            this.Grid.splitChildRowIndex = this.Grid.rows.rowCollection.indexOf(row);\n          }\n\n          if (PdfGridLayouter.repeatRowIndex > -1 && PdfGridLayouter.repeatRowIndex === row.rowIndex) {\n            if (this.Grid.allowRowBreakAcrossPages) {\n              result_1.isFinish = true; // if (this.Grid.isChildGrid && row.rowBreakHeightValue > 0) {\n              //     // if (this.Grid.ParentCell.row.grid.style.cellPadding != null) {\n              //     //     this.currentBounds.y += this.Grid.ParentCell.row.grid.style.cellPadding.top;\n              //     // }\n              //     this.currentBounds.x = this.startLocation.x;\n              // }\n\n              result_1.bounds = this.currentBounds;\n              this.drawRowWithBreak(result_1, row, calculatedHeight);\n              row.repeatFlag = true;\n              row.repeatRowNumber = PdfGridLayouter.repeatRowIndex;\n            } // else {\n            //     result.isFinish = false;\n            //     row.repeatFlag = false;\n            //     this.drawRow( row, result, calculatedHeight);\n            // }\n\n          } // else {\n          //     result.isFinish = false;\n          // }\n\n        } else {\n          result_1.isFinish = true;\n\n          if (row.grid.ParentCell.row.rowBreakHeightValue > 0) {\n            row.repeatFlag = true;\n          } else {\n            row.repeatFlag = false;\n            calculatedHeight = row.height;\n          }\n\n          if (this.Grid.isChildGrid && row.rowBreakHeight > 0) {\n            if (this.Grid.ParentCell.row.grid.style.cellPadding != null) {\n              calculatedHeight += this.Grid.ParentCell.row.grid.style.cellPadding.bottom;\n            }\n          }\n\n          this.drawRow(row, result_1, calculatedHeight);\n        }\n      } else {\n        //Split row only if row height exceeds page height and AllowRowBreakAcrossPages is true.\n        if (calculatedHeight > this.currentPageBounds.height) {\n          if (this.Grid.allowRowBreakAcrossPages) {\n            result_1.isFinish = true; //result.bounds = this.currentBounds;\n\n            this.drawRowWithBreak(result_1, row, calculatedHeight);\n            row.isrowFinish = true;\n            row.repeatFlag = true;\n\n            if (row.grid.splitChildRowIndex !== -1) {\n              result_1.isFinish = false;\n            }\n          } // else {\n          //     //If AllowRowBreakAcrossPages is not true, draw the row till it fits the page.\n          //     result.isFinish = false;\n          //     this.drawRow( row, result, calculatedHeight);\n          // }\n\n        } else if (this.currentBounds.y + calculatedHeight > this.currentPageBounds.height || this.currentBounds.y + calculatedHeight > this.currentBounds.height + this.startLocation.y || this.currentBounds.y + rowHeightWithSpan > this.currentPageBounds.height) {\n          // If a row is repeated and still cannot fit in page, proceed draw.\n          var isFit = false;\n\n          if (this.Grid.allowRowBreakAcrossPages && !this.Grid.repeatHeader && !row.isRowHeightSet && !row.rowMergeComplete) {\n            if (this.Grid.LayoutFormat !== null && this.Grid.LayoutFormat.paginateBounds.height > 0) {\n              isFit = this.isFitToCell(this.currentBounds.height + this.startLocation.y - this.currentBounds.y, this.Grid, row);\n            } else isFit = this.isFitToCell(this.currentPageBounds.height - this.currentBounds.y, this.Grid, row);\n\n            if (isFit) {\n              this.isPaginate = true;\n            }\n          } else if (this.Grid.allowRowBreakAcrossPages && this.Grid.LayoutFormat != null && this.Grid.LayoutFormat.layout == PdfLayoutType.Paginate && this.Grid.LayoutFormat.break != PdfLayoutBreakType.FitElement && row.isRowHeightSet && this.currentBounds.y + height > this.currentPageBounds.height) {\n            isFit = this.isFitToCell(this.currentPageBounds.height - this.currentBounds.y, this.Grid, row);\n            if (!isFit) isFit = !(this.slr !== null && this.slr.actualSize.height == 0 && this.slr.remainder != null && this.slr.remainder.length > 0 && this.remainderText == this.slr.remainder);\n\n            if (isFit && this.slr != null && this.slr.lineCount > 1) {\n              //It may text cutoff issue\n              isFit = false;\n            }\n\n            this.remainderText = null;\n          }\n\n          if (PdfGridLayouter.repeatRowIndex > -1 && PdfGridLayouter.repeatRowIndex === row.rowIndex || isFit) {\n            if (this.Grid.allowRowBreakAcrossPages) {\n              result_1.isFinish = true;\n              this.drawRowWithBreak(result_1, row, calculatedHeight);\n              row.repeatFlag = true;\n              row.repeatRowNumber = PdfGridLayouter.repeatRowIndex;\n\n              if (row.grid.splitChildRowIndex !== -1) {\n                result_1.isFinish = false;\n              }\n            } else {\n              result_1.isFinish = false;\n              this.drawRow(row, result_1, calculatedHeight);\n            }\n          } else {\n            result_1.isFinish = false;\n          }\n        } else {\n          result_1.isFinish = true;\n          this.drawRow(row, result_1, calculatedHeight);\n          row.repeatFlag = false;\n        }\n      }\n\n      return result_1;\n    } else {\n      var skipcell = false;\n      var location_4 = new PointF(this.currentBounds.x, this.currentBounds.y); // if (row.grid.isChildGrid && row.grid.allowRowBreakAcrossPages && this.startLocation.x !== this.currentBounds.x && row.width <\n      //                 this.currentPage.getClientSize().width) {\n      //     location.x = this.startLocation.x;\n      // }\n\n      result.bounds = new RectangleF(location_4, new SizeF(0, 0));\n      height = this.ReCalculateHeight(row, height);\n\n      for (var i = this.cellStartIndex; i <= this.cellEndIndex; i++) {\n        var cancelSpans = i > this.cellEndIndex + 1 && row.cells.getCell(i).columnSpan > 1; // let cancelSpans : boolean = false;\n\n        if (!cancelSpans) {\n          for (var j = 1; j < row.cells.getCell(i).columnSpan; j++) {\n            row.cells.getCell(i + j).isCellMergeContinue = true;\n          }\n        }\n\n        var size = new SizeF(this.Grid.columns.getColumn(i).width, height); // if (size.width > this.currentGraphics.clientSize.width) {\n        //     size.width = this.currentGraphics.clientSize.width;\n        // }\n        // if (this.Grid.isChildGrid && this.Grid.style.allowHorizontalOverflow) {\n        //     if (size.width >= this.currentGraphics.clientSize.width) {\n        //         size.width -= 2 * this.currentBounds.x;\n        //     }\n        // }\n\n        /* tslint:disable */\n\n        if (!this.CheckIfDefaultFormat(this.Grid.columns.getColumn(i).format) && this.CheckIfDefaultFormat(row.cells.getCell(i).stringFormat)) {\n          row.cells.getCell(i).stringFormat = this.Grid.columns.getColumn(i).format;\n        }\n\n        var cellstyle = row.cells.getCell(i).style;\n        var tempValue = typeof row.cells.getCell(i).value === 'string' && row.cells.getCell(i).value !== null ? row.cells.getCell(i).value : '';\n        row.cells.getCell(i).style = this.RaiseBeforeCellDraw(this.currentGraphics, this.currentRowIndex, i, new RectangleF(location_4, size), tempValue, cellstyle); //row.cells.getCell(i).style = cellstyle;\n\n        if (!skipcell) {\n          if (row.cells.getCell(i).value instanceof PdfGrid) {\n            var grid = row.cells.getCell(i).value;\n            grid.parentCellIndex = i;\n          }\n\n          var stringResult = row.cells.getCell(i).draw(this.currentGraphics, new RectangleF(location_4, size), cancelSpans);\n\n          if (row.grid.style.allowHorizontalOverflow && (row.cells.getCell(i).columnSpan > this.cellEndIndex || i + row.cells.getCell(i).columnSpan > this.cellEndIndex + 1) && this.cellEndIndex < row.cells.count - 1) {\n            row.rowOverflowIndex = this.cellEndIndex;\n          }\n\n          if (row.grid.style.allowHorizontalOverflow && row.rowOverflowIndex > 0 && (row.cells.getCell(i).columnSpan > this.cellEndIndex || i + row.cells.getCell(i).columnSpan > this.cellEndIndex + 1) && row.cells.getCell(i).columnSpan - this.cellEndIndex + i - 1 > 0) {\n            row.cells.getCell(row.rowOverflowIndex + 1).value = stringResult !== null ? stringResult.remainder !== undefined ? stringResult.remainder : '' : '';\n            row.cells.getCell(row.rowOverflowIndex + 1).stringFormat = row.cells.getCell(i).stringFormat;\n            row.cells.getCell(row.rowOverflowIndex + 1).style = row.cells.getCell(i).style;\n            row.cells.getCell(row.rowOverflowIndex + 1).columnSpan = row.cells.getCell(i).columnSpan - this.cellEndIndex + i - 1;\n          }\n        }\n        /* tslint:enable */\n\n\n        tempValue = typeof row.cells.getCell(i).value === 'string' && row.cells.getCell(i).value !== null ? row.cells.getCell(i).value : '';\n\n        if (!cancelSpans) {\n          this.raiseAfterCellDraw(this.currentGraphics, this.currentRowIndex, i, new RectangleF(location_4, size), tempValue, row.cells.getCell(i).style);\n        }\n\n        if (row.cells.getCell(i).value instanceof PdfGrid) {\n          var grid = row.cells.getCell(i).value;\n\n          if (this.Grid.columns.getColumn(i).width >= this.currentGraphics.clientSize.width) {\n            location_4.x = grid.rowLayoutBoundsWidth;\n            location_4.x += grid.style.cellSpacing;\n          } else {\n            location_4.x += this.Grid.columns.getColumn(i).width;\n          }\n        } else {\n          location_4.x += this.Grid.columns.getColumn(i).width;\n        }\n      }\n\n      if (!row.rowMergeComplete || row.isRowHeightSet) {\n        this.currentBounds.y += height;\n      }\n\n      result.bounds = new RectangleF(new PointF(result.bounds.x, result.bounds.y), new SizeF(location_4.x, location_4.y));\n    }\n  };\n\n  PdfGridLayouter.prototype.isFitToCell = function (currentHeight, grid, gridRow) {\n    var isFit = false;\n    var layouter = new PdfStringLayouter();\n\n    for (var i = 0; i < gridRow.cells.count; i++) {\n      var cell = gridRow.cells.getCell(i);\n\n      if (typeof cell.value !== 'undefined' && cell.value !== null && typeof cell.value === 'string') {\n        var font = null;\n\n        if (typeof cell.style.font !== 'undefined' && cell.style.font != null) {\n          font = cell.style.font;\n        } else if (typeof cell.row.style.font !== 'undefined' && cell.row.style.font != null) {\n          font = cell.row.style.font;\n        } else if (typeof cell.row.grid.style.font !== 'undefined' && cell.row.grid.style.font != null) {\n          font = cell.row.grid.style.font;\n        } else {\n          font = PdfDocument.defaultFont;\n        }\n\n        this.remainderText = gridRow.cells.getCell(i).value;\n        var width = gridRow.cells.getCell(i).width;\n\n        if (grid.columns.getColumn(i).isCustomWidth && gridRow.cells.getCell(i).width > grid.columns.getColumn(i).width) {\n          width = grid.columns.getColumn(i).width;\n        }\n\n        this.slr = layouter.layout(gridRow.cells.getCell(i).value, font, gridRow.cells.getCell(i).stringFormat, new SizeF(width, currentHeight), false, this.currentPageBounds);\n        var height = this.slr.actualSize.height;\n\n        if (height == 0) {\n          isFit = false;\n          break;\n        }\n\n        if (gridRow.cells.getCell(i).style != null && gridRow.cells.getCell(i).style.borders != null && gridRow.cells.getCell(i).style.borders.top != null && gridRow.cells.getCell(i).style.borders.bottom != null) height += (gridRow.cells.getCell(i).style.borders.top.width + gridRow.cells.getCell(i).style.borders.bottom.width) * 2;\n        if (this.slr.lineCount > 1 && gridRow.cells.getCell(i).stringFormat != null && gridRow.cells.getCell(i).stringFormat.lineSpacing != 0) height += (this.slr.lineCount - 1) * gridRow.cells.getCell(i).style.stringFormat.lineSpacing;\n\n        if (gridRow.cells.getCell(i).style.cellPadding == null) {\n          height += grid.style.cellPadding.top + grid.style.cellPadding.bottom;\n        } else {\n          height += grid.style.cellPadding.top + grid.style.cellPadding.bottom;\n        }\n\n        height += grid.style.cellSpacing;\n\n        if (currentHeight > height || typeof this.slr.remainder !== 'undefined' && this.slr.remainder !== null) {\n          isFit = true;\n          break;\n        }\n      }\n    }\n\n    return isFit;\n  };\n\n  PdfGridLayouter.prototype.drawRowWithBreak = function (result, row, calculateHeight) {\n    var location = new PointF(this.currentBounds.x, this.currentBounds.y);\n\n    if (row.grid.isChildGrid && row.grid.allowRowBreakAcrossPages && this.startLocation.x !== this.currentBounds.x) {\n      location.x = this.startLocation.x;\n    }\n\n    result.bounds = new RectangleF(location, new SizeF(0, 0));\n    this.gridHeight = row.rowBreakHeight > 0 ? this.currentPageBounds.height : 0; // Calculate the remaining height.\n\n    if (row.grid.style.cellPadding.top + this.currentBounds.y + row.grid.style.cellPadding.bottom < this.currentPageBounds.height) {\n      row.rowBreakHeight = this.currentBounds.y + calculateHeight - this.currentPageBounds.height;\n    } // else {\n    //     row.rowBreakHeight = calculateHeight;\n    //     result.isFinish = false;\n    //     return;\n    // }\n    // No need to explicit break if the row height is equal to grid height.\n\n\n    for (var i = 0; i < row.cells.count; i++) {\n      var cell = row.cells.getCell(i);\n      var cellHeight = cell.measureHeight();\n\n      if (cellHeight === calculateHeight && cell.value instanceof PdfGrid) {\n        row.rowBreakHeight = 0;\n      } // else if (cellHeight === calculateHeight && (cell.value as PdfGrid) === null) {\n      //     row.rowBreakHeight = this.currentBounds.y + calculateHeight - this.currentPageBounds.height;\n      // }\n\n    }\n\n    for (var i = this.cellStartIndex; i <= this.cellEndIndex; i++) {\n      var cancelSpans = row.cells.getCell(i).columnSpan + i > this.cellEndIndex + 1 && row.cells.getCell(i).columnSpan > 1; // if (!cancelSpans) {\n      //     for (let k : number = 1; k < row.cells.getCell(i).columnSpan; k++) {\n      //         row.cells.getCell(i + k).isCellMergeContinue = true;\n      //     }\n      //}\n\n      var size = new SizeF(this.Grid.columns.getColumn(i).width, this.gridHeight > 0.0 ? this.gridHeight : this.currentPageBounds.height); // if (size.width === 0) {\n      //     size = new SizeF(row.cells.getCell(i).width, size.height);\n      // }\n      // if (!this.CheckIfDefaultFormat(this.Grid.columns.getColumn(i).format) &&\n      //         this.CheckIfDefaultFormat((row.cells.getCell(i).stringFormat))) {\n      //     row.cells.getCell(i).stringFormat = this.Grid.columns.getColumn(i).format;\n      // }\n\n      var cellstyle1 = row.cells.getCell(i).style;\n      row.cells.getCell(i).style = cellstyle1;\n      var skipcell = false;\n      var stringResult = null;\n\n      if (!skipcell) {\n        stringResult = row.cells.getCell(i).draw(this.currentGraphics, new RectangleF(location, size), cancelSpans);\n      } //If still row is to be drawn, set cell finished drawing cell as false and update the text to be drawn.\n\n\n      if (row.rowBreakHeight > 0.0) {\n        if (stringResult != null && typeof stringResult.remainder !== 'undefined') {\n          row.cells.getCell(i).FinishedDrawingCell = false;\n          row.cells.getCell(i).remainingString = stringResult.remainder == null ? ' ' : stringResult.remainder;\n          row.rowBreakHeight = calculateHeight - stringResult.actualSize.height;\n        }\n      }\n\n      result.isFinish = !result.isFinish ? result.isFinish : row.cells.getCell(i).FinishedDrawingCell; // let tempValue : string = ((typeof row.cells.getCell(i).value === 'string' &&\n      //row.cells.getCell(i).value !== null) ? row.cells.getCell(i).value : '') as string;\n      // if (!cancelSpans) {\n      //     // this.raiseAfterCellDraw(this.currentGraphics, this.currentRowIndex, i,\n      //     //           new RectangleF(location, size), tempValue, row.cells.getCell(i).style);            \n      //     this.raiseAfterCellDraw(this.currentGraphics, this.currentRowIndex, i, new RectangleF(location, size),\n      //                             (row.cells.getCell(i).value as string) ? row.cells.getCell(i).value.toString() : ' ',\n      //                             row.cells.getCell(i).style);\n      //     }                \n\n      if (row.cells.getCell(i).value instanceof PdfGrid) {\n        var grid = row.cells.getCell(i).value;\n        this.rowBreakPageHeightCellIndex = i; // row.cells.getCell(i).pageCount = grid.listOfNavigatePages.length;\n        // for (let j : number = 0;j<grid.listOfNavigatePages.length;j++){\n        //     let pageIndex : number =grid.listOfNavigatePages.indexOf(j);\n        //             this.Grid.listOfNavigatePages.push(pageIndex);\n        //     }\n\n        if (this.Grid.columns.getColumn(i).width >= this.currentGraphics.clientSize.width) {\n          location.x = this.rowLayoutBoundsWidth;\n          location.x += grid.style.cellSpacing;\n        } else {\n          location.x += this.Grid.columns.getColumn(i).width;\n        }\n      } else {\n        location.x += this.Grid.columns.getColumn(i).width;\n      }\n    }\n\n    this.currentBounds.y += this.gridHeight > 0.0 ? this.gridHeight : calculateHeight;\n    result.bounds = new RectangleF(new PointF(result.bounds.x, result.bounds.y), new SizeF(location.x, location.y));\n  };\n  /**\n   * @hidden\n   * @private\n   */\n\n\n  PdfGridLayouter.repeatRowIndex = -1;\n  return PdfGridLayouter;\n}(ElementLayouter);\n\nexport { PdfGridLayouter }; // recalculateBounds : boolean, clientSize : SizeF\n//Implementation\n\n/**\n * `Initializes` internal data.\n * @private\n */\n//Internal declaration\n\nvar PdfGridLayoutResult =\n/** @class */\nfunction (_super) {\n  __extends(PdfGridLayoutResult, _super);\n  /**\n   * Constructor\n   * @private\n   */\n\n\n  function PdfGridLayoutResult(page, bounds) {\n    return _super.call(this, page, bounds) || this;\n  }\n\n  return PdfGridLayoutResult;\n}(PdfLayoutResult);\n\nexport { PdfGridLayoutResult };\n/**\n * `PdfGridLayoutFormat` class represents a flexible grid that consists of columns and rows.\n */\n\nvar PdfGridLayoutFormat =\n/** @class */\nfunction (_super) {\n  __extends(PdfGridLayoutFormat, _super);\n  /**\n   * Initializes a new instance of the `PdfGridLayoutFormat` class.\n   * @private\n   */\n\n\n  function PdfGridLayoutFormat(baseFormat) {\n    return _super.call(this, baseFormat) || this;\n  }\n\n  return PdfGridLayoutFormat;\n}(PdfLayoutFormat);\n\nexport { PdfGridLayoutFormat };\n\nvar GridCellEventArgs =\n/** @class */\nfunction () {\n  // Constructors\n\n  /**\n   * Initialize a new instance for `GridCellEventArgs` class.\n   * @private\n   */\n  function GridCellEventArgs(graphics, rowIndex, cellIndex, bounds, value) {\n    this.gridRowIndex = rowIndex;\n    this.gridCellIndex = cellIndex;\n    this.internalValue = value;\n    this.gridBounds = bounds;\n    this.pdfGraphics = graphics;\n  }\n\n  Object.defineProperty(GridCellEventArgs.prototype, \"rowIndex\", {\n    // Properties\n\n    /**\n     * Gets the value of current `row index`.\n     * @private\n     */\n    get: function () {\n      return this.gridRowIndex;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(GridCellEventArgs.prototype, \"cellIndex\", {\n    /**\n     * Gets the value of current `cell index`.\n     * @private\n     */\n    get: function () {\n      return this.gridCellIndex;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(GridCellEventArgs.prototype, \"value\", {\n    /**\n     * Gets the actual `value` of current cell.\n     * @private\n     */\n    get: function () {\n      return this.internalValue;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(GridCellEventArgs.prototype, \"bounds\", {\n    /**\n     * Gets the `bounds` of current cell.\n     * @private\n     */\n    get: function () {\n      return this.gridBounds;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(GridCellEventArgs.prototype, \"graphics\", {\n    /**\n     * Gets the instance of `current graphics`.\n     * @private\n     */\n    get: function () {\n      return this.pdfGraphics;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return GridCellEventArgs;\n}();\n\nexport { GridCellEventArgs };\n\nvar PdfGridBeginCellDrawEventArgs =\n/** @class */\nfunction (_super) {\n  __extends(PdfGridBeginCellDrawEventArgs, _super); // Constructors\n\n  /**\n   * Initializes a new instance of the `StartCellLayoutEventArgs` class.\n   * @private\n   */\n\n\n  function PdfGridBeginCellDrawEventArgs(graphics, rowIndex, cellIndex, bounds, value, style) {\n    var _this = _super.call(this, graphics, rowIndex, cellIndex, bounds, value) || this;\n\n    _this.style = style;\n    return _this;\n  }\n\n  Object.defineProperty(PdfGridBeginCellDrawEventArgs.prototype, \"skip\", {\n    // Properties\n\n    /**\n     * Gets or sets a value indicating whether the value of this cell should be `skipped`.\n     * @private\n     */\n    get: function () {\n      return this.bSkip;\n    },\n    set: function (value) {\n      this.bSkip = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfGridBeginCellDrawEventArgs.prototype, \"style\", {\n    /**\n     * Gets or sets a `style` value of the cell.\n     * @private\n     */\n    get: function () {\n      return this.cellStyle;\n    },\n    set: function (value) {\n      this.cellStyle = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return PdfGridBeginCellDrawEventArgs;\n}(GridCellEventArgs);\n\nexport { PdfGridBeginCellDrawEventArgs };\n\nvar PdfGridEndCellDrawEventArgs =\n/** @class */\nfunction (_super) {\n  __extends(PdfGridEndCellDrawEventArgs, _super); // Constructors\n\n  /**\n   * Initializes a new instance of the `PdfGridEndCellLayoutEventArgs` class.\n   * @private\n   */\n\n\n  function PdfGridEndCellDrawEventArgs(graphics, rowIndex, cellIndex, bounds, value, style) {\n    var _this = _super.call(this, graphics, rowIndex, cellIndex, bounds, value) || this;\n\n    _this.cellStyle = style;\n    return _this;\n  }\n\n  Object.defineProperty(PdfGridEndCellDrawEventArgs.prototype, \"style\", {\n    // Propertise\n\n    /**\n     * Get the `PdfGridCellStyle`.\n     * @private\n     */\n    get: function () {\n      return this.cellStyle;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return PdfGridEndCellDrawEventArgs;\n}(GridCellEventArgs);\n\nexport { PdfGridEndCellDrawEventArgs };\n\nvar PdfCancelEventArgs =\n/** @class */\nfunction () {\n  function PdfCancelEventArgs() {}\n\n  Object.defineProperty(PdfCancelEventArgs.prototype, \"cancel\", {\n    // Properties\n\n    /**\n     * Gets and Sets the value of `cancel`.\n     * @private\n     */\n    get: function () {\n      return this.isCancel;\n    },\n    set: function (value) {\n      this.isCancel = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return PdfCancelEventArgs;\n}();\n\nexport { PdfCancelEventArgs };\n\nvar BeginPageLayoutEventArgs =\n/** @class */\nfunction (_super) {\n  __extends(BeginPageLayoutEventArgs, _super); // Constructors\n\n  /**\n   * Initializes a new instance of the `BeginPageLayoutEventArgs` class with the specified rectangle and page.\n   * @private\n   */\n\n\n  function BeginPageLayoutEventArgs(bounds, page) {\n    var _this = _super.call(this) || this;\n\n    _this.bounds = bounds;\n    _this.pdfPage = page;\n    return _this;\n  }\n\n  Object.defineProperty(BeginPageLayoutEventArgs.prototype, \"bounds\", {\n    // Properties\n\n    /**\n     * Gets or sets value that indicates the lay outing `bounds` on the page.\n     * @private\n     */\n    get: function () {\n      return this.cellBounds;\n    },\n    set: function (value) {\n      this.cellBounds = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(BeginPageLayoutEventArgs.prototype, \"page\", {\n    /**\n     * Gets the `page` where the lay outing should start.\n     * @private\n     */\n    get: function () {\n      return this.pdfPage;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return BeginPageLayoutEventArgs;\n}(PdfCancelEventArgs);\n\nexport { BeginPageLayoutEventArgs };\n/**\n * `EndPageLayoutEventArgs` class is alternate for end page layout events.\n */\n\nvar EndPageLayoutEventArgs =\n/** @class */\nfunction (_super) {\n  __extends(EndPageLayoutEventArgs, _super); // Constructors\n\n  /**\n   * Initializes a new instance of the `EndPageLayoutEventArgs` class. with the specified 'PdfLayoutResult'.\n   * @private\n   */\n\n\n  function EndPageLayoutEventArgs(result) {\n    var _this = _super.call(this) || this;\n\n    _this.layoutResult = result;\n    return _this;\n  }\n\n  Object.defineProperty(EndPageLayoutEventArgs.prototype, \"result\", {\n    // Properties\n\n    /**\n     * Gets the lay outing `result` of the page.\n     * @private\n     */\n    get: function () {\n      return this.layoutResult;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(EndPageLayoutEventArgs.prototype, \"nextPage\", {\n    /**\n     * Gets or sets a value indicating the `next page` where the element should be layout.\n     * @private\n     */\n    get: function () {\n      return this.nextPdfPage;\n    },\n    set: function (value) {\n      this.nextPdfPage = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return EndPageLayoutEventArgs;\n}(PdfCancelEventArgs);\n\nexport { EndPageLayoutEventArgs };\n/**\n * `PdfGridBeginPageLayoutEventArgs` class is alternate for begin page layout events.\n */\n\nvar PdfGridBeginPageLayoutEventArgs =\n/** @class */\nfunction (_super) {\n  __extends(PdfGridBeginPageLayoutEventArgs, _super); // Constructors\n\n  /**\n   * Initialize a new instance of `PdfGridBeginPageLayoutEventArgs` class.\n   * @private\n   */\n\n\n  function PdfGridBeginPageLayoutEventArgs(bounds, page, startRow) {\n    var _this = _super.call(this, bounds, page) || this;\n\n    _this.startRow = startRow;\n    return _this;\n  }\n\n  Object.defineProperty(PdfGridBeginPageLayoutEventArgs.prototype, \"startRowIndex\", {\n    // Properties\n\n    /**\n     * Gets the `start row index`.\n     * @private\n     */\n    get: function () {\n      return this.startRow;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return PdfGridBeginPageLayoutEventArgs;\n}(BeginPageLayoutEventArgs);\n\nexport { PdfGridBeginPageLayoutEventArgs };\n/**\n * `PdfGridEndPageLayoutEventArgs` class is alternate for begin page layout events.\n */\n\nvar PdfGridEndPageLayoutEventArgs =\n/** @class */\nfunction (_super) {\n  __extends(PdfGridEndPageLayoutEventArgs, _super); // Constructors\n\n  /**\n   * Initialize a new instance of `PdfGridEndPageLayoutEventArgs` class.\n   * @private\n   */\n\n\n  function PdfGridEndPageLayoutEventArgs(result) {\n    return _super.call(this, result) || this;\n  }\n\n  return PdfGridEndPageLayoutEventArgs;\n}(EndPageLayoutEventArgs);\n\nexport { PdfGridEndPageLayoutEventArgs };\n\nvar RowLayoutResult =\n/** @class */\nfunction () {\n  //Constructors\n\n  /**\n   * Initializes a new instance of the `RowLayoutResult` class.\n   * @private\n   */\n  function RowLayoutResult() {\n    this.layoutedBounds = new RectangleF(0, 0, 0, 0);\n  }\n\n  Object.defineProperty(RowLayoutResult.prototype, \"isFinish\", {\n    /**\n     * Gets or sets a value indicating whether this instance `is finish`.\n     * @private\n     */\n    get: function () {\n      return this.bIsFinished;\n    },\n    set: function (value) {\n      this.bIsFinished = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(RowLayoutResult.prototype, \"bounds\", {\n    /**\n     * Gets or sets the `bounds`.\n     * @private\n     */\n    get: function () {\n      return this.layoutedBounds;\n    },\n    set: function (value) {\n      this.layoutedBounds = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return RowLayoutResult;\n}();\n\nexport { RowLayoutResult };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","PdfGrid","PdfStringFormat","SizeF","RectangleF","PointF","PdfBorders","PdfLayoutType","PdfLayoutBreakType","PdfLayoutResult","PdfLayoutFormat","ElementLayouter","PdfHorizontalOverflowType","TemporaryDictionary","PdfStringLayouter","PdfDocument","PdfGridLayouter","_super","baseFormat","_this","call","gridInitialWidth","gridSize","parentCellIndex","tempWidth","childheight","isChildGrid","hasRowSpanSpan","isRearranged","pageBounds","listOfNavigatePages","flag","columnRanges","currentLocation","breakRow","slr","remainderText","isPaginate","isOverloadWithPosition","defineProperty","get","elements","enumerable","configurable","getFormat","format","f","layoutInternal","param","gridLayoutFormat","currentPage","page","pageHeight","getClientSize","height","pageWidth","width","currentPageBounds","Error","currentGraphics","graphics","index","section","indexOf","push","break","FitColumnsToPage","currentBounds","bounds","x","y","Grid","columns","clientSize","rows","count","getRow","cells","getCell","style","borders","left","headers","startLocation","hType","horizontalOverflowType","allowHorizontalOverflow","measureColumnsWidth","determineColumnDrawRanges","i","isRowHeightSet","result","layoutOnPage","startColumn","endColumn","cellWidths","availableWidth","getColumn","subWidths","j","endArgs","layoutedPages","startPage","isParentCell","cellBounds","length","range","cellStartIndex","cellEndIndex","returnObject","raiseBeforePageLayout","currentRowIndex","drawHeader","i_1","row","getHeader","headerHeight","isHeader","k","isCellMergeContinue","value","headerResult","drawRow","repeatRowIndex","isFinish","layout","OnePage","getNextPageformat","paginateBounds","length_1","repeatRow","startingHeight","originalHeight","grid","rowResult","splitChildRowIndex","isrowFinish","ParentCell","isGridSplit","rowIndex","rowCollection","tempResult","getLayoutResult","raisePageLayouted","cancel","allowRowBreakAcrossPages","location_1","default","right","top","cellPadding","rowBreakHeight","isRowBreaksNextPage","rowBreakHeightValue","bottom","i_2","noOfPageCount","border","newBound","repeatHeader","j_1","headerRepeat","temp","j_2","tempResult1","i_3","header","checkIsFisished","i_4","isAddNextPage","returnValue","usePaginateBounds","i_5","containsKey","add","NestedGridLayoutResult","recalHeight","ReCalculateHeight","secion","startIndex","endIndex","pageGraphics","location_2","c","cell","cellWidth","totalwidth","i_6","columnWidth","Math","max","drawCellBorders","columnSpan","isPdfGrid","maximumCellBoundsWidth","largeNavigatePage","rowLayoutBoundsWidth","pageIndex","pageindex","NextPage","reArrangePages","FinishedDrawingCell","nextPage","getPages","CheckIfDefaultFormat","defaultFormat","alignment","characterSpacing","clipPath","firstLineIndent","horizontalScalingFactor","lineAlignment","lineLimit","lineSpacing","measureTrailingSpaces","noClip","paragraphIndent","rightToLeft","subSuperScript","wordSpacing","wordWrap","RaiseBeforeCellDraw","cellIndex","args","raiseBeginCellDraw","PdfGridBeginCellDrawEventArgs","onBeginCellDraw","raiseAfterCellDraw","cellstyle","raiseEndCellDraw","PdfGridEndCellDrawEventArgs","onEndCellDraw","document","pages","keys","values","remove","size","count_1","repeatFlag","origin","isChanged","PdfGridLayoutResult","newHeight","remainingString","measureHeight","currentRow","raiseBeginPageLayout","PdfGridBeginPageLayoutEventArgs","onBeginPageLayout","startRowIndex","PdfGridEndPageLayoutEventArgs","raiseEndPageLayout","onEndPageLayout","result_1","RowLayoutResult","rowHeightWithSpan","location_3","rowSpanExists","maxSpan","currRowIndex","rowSpan","calculatedHeight","LayoutFormat","FitPage","drawRowWithBreak","repeatRowNumber","isFit","rowMergeComplete","isFitToCell","Paginate","FitElement","actualSize","remainder","lineCount","skipcell","location_4","cancelSpans","stringFormat","tempValue","stringResult","draw","rowOverflowIndex","undefined","cellSpacing","currentHeight","gridRow","layouter","font","defaultFont","isCustomWidth","calculateHeight","location","gridHeight","cellHeight","cellstyle1","rowBreakPageHeightCellIndex","PdfGridLayoutFormat","GridCellEventArgs","gridRowIndex","gridCellIndex","internalValue","gridBounds","pdfGraphics","bSkip","set","cellStyle","PdfCancelEventArgs","isCancel","BeginPageLayoutEventArgs","pdfPage","EndPageLayoutEventArgs","layoutResult","nextPdfPage","startRow","layoutedBounds","bIsFinished"],"sources":["C:/Users/shahj/OneDrive/Documents/GitHub/Multifunctional-React-Dashboard/node_modules/@syncfusion/ej2-pdf-export/src/implementation/structured-elements/grid/layout/grid-layouter.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { PdfGrid } from '../pdf-grid';\nimport { PdfStringFormat } from './../../../graphics/fonts/pdf-string-format';\nimport { SizeF, RectangleF, PointF } from './../../../drawing/pdf-drawing';\nimport { PdfBorders } from '../styles/pdf-borders';\nimport { PdfLayoutType, PdfLayoutBreakType } from './../../../graphics/figures/enum';\nimport { PdfLayoutResult, PdfLayoutFormat, ElementLayouter } from './../../../graphics/figures/base/element-layouter';\nimport { PdfHorizontalOverflowType } from '../styles/style';\nimport { TemporaryDictionary } from './../../../collections/object-object-pair/dictionary';\nimport { PdfStringLayouter } from './../../../graphics/fonts/string-layouter';\nimport { PdfDocument } from './../../../document/pdf-document';\n/**\n * Class `lay outing the text`.\n *\n */\nvar PdfGridLayouter = /** @class */ (function (_super) {\n    __extends(PdfGridLayouter, _super);\n    //constructor\n    /**\n     * Initialize a new instance for `PdfGrid` class.\n     * @private\n     */\n    function PdfGridLayouter(baseFormat) {\n        var _this = _super.call(this, baseFormat) || this;\n        /**\n         * @hidden\n         * @private\n         */\n        _this.gridInitialWidth = 0;\n        /**\n         * @hidden\n         * @private\n         */\n        _this.gridSize = new SizeF(0, 0);\n        _this.parentCellIndex = 0;\n        _this.tempWidth = 0;\n        _this.childheight = 0;\n        /**\n         * Check weather it is `child grid or not`.\n         * @private\n         */\n        _this.isChildGrid = false;\n        /**\n         * @hidden\n         * @private\n         */\n        _this.hasRowSpanSpan = false;\n        /**\n         * @hidden\n         * @private\n         */\n        _this.isRearranged = false;\n        /**\n         * @hidden\n         * @private\n         */\n        _this.pageBounds = new RectangleF();\n        /**\n         * @hidden\n         * @private\n         */\n        _this.listOfNavigatePages = [];\n        /**\n         * @hidden\n         * @private\n         */\n        _this.flag = true;\n        /**\n         * @hidden\n         * @private\n         */\n        _this.columnRanges = [];\n        /**\n         * @hidden\n         * @private\n         */\n        _this.currentLocation = new PointF(0, 0);\n        /**\n         * @hidden\n         * @private\n         */\n        _this.breakRow = true;\n        _this.slr = null;\n        _this.remainderText = null;\n        _this.isPaginate = false;\n        /**\n         * Checks whether the x co-ordinate is need to set as client size or not.\n         * @hidden\n         * @private\n         */\n        _this.isOverloadWithPosition = false;\n        return _this;\n    }\n    Object.defineProperty(PdfGridLayouter.prototype, \"Grid\", {\n        //Properties\n        get: function () {\n            return this.elements;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // Constructors\n    /**\n     * Initializes a new instance of the `StringLayouter` class.\n     * @private\n     */\n    //Public methods\n    /**\n     * `Layouts` the text.\n     * @private\n     */\n    /**\n     * `Layouts` the specified graphics.\n     * @private\n     */\n    /**\n     * `Layouts` the specified graphics.\n     * @private\n     */\n    /*public layout(graphics : PdfLayoutParams) : PdfLayoutResult\n    public layout(graphics : PdfGraphics, bounds : RectangleF) : void\n    public layout(graphics : PdfGraphics, bounds : PointF) : void\n    public layout(graphics ?: PdfGraphics | PdfLayoutParams, bounds ?: PointF | RectangleF) : void | PdfLayoutResult  {\n        if (graphics instanceof PdfGraphics) {\n        if (bounds instanceof PointF) {\n            if (bounds.x === 0) {\n                bounds.x = PdfBorders.default.right.width / 2;\n            }\n            if (bounds.y === 0) {\n                bounds.y = PdfBorders.default.top.width / 2;\n            }\n            let boundaries : RectangleF = new RectangleF(bounds, new SizeF(0, 0));\n            this.layout(graphics, boundaries);\n        } else {\n            let width : number = graphics.clientSize.width;\n            let parameter : PdfLayoutParams = new PdfLayoutParams();\n            parameter.bounds = bounds;\n            this.currentGraphics = graphics;\n            if (graphics.layer != null) {\n                let index : number = 0;\n                if (this.currentGraphics.page instanceof PdfPage) {\n                    index = (this.currentGraphics.page as PdfPage).section.indexOf(this.currentGraphics.page as PdfPage);\n                } else {\n                    index = (this.currentGraphics.page as PdfPageBase).defaultLayerIndex;\n                }\n            } else {\n                this.layoutInternal(parameter);\n            }\n        }\n    }\n    }*/\n    /**\n     * Gets the `format`.\n     * @private\n     */\n    PdfGridLayouter.prototype.getFormat = function (format) {\n        var f = format;\n        return f;\n    };\n    /**\n     * `Layouts` the element.\n     * @private\n     */\n    PdfGridLayouter.prototype.layoutInternal = function (param) {\n        var format = this.getFormat(param.format);\n        this.gridLayoutFormat = this.getFormat(param.format);\n        this.currentPage = param.page;\n        if (this.currentPage !== null) {\n            var pageHeight = this.currentPage.getClientSize().height;\n            var pageWidth = this.currentPage.getClientSize().width;\n            this.currentPageBounds = this.currentPage.getClientSize();\n        }\n        else {\n            throw Error('Can not set page as null');\n            //this.currentPageBounds = this.currentGraphics.clientSize;\n        }\n        this.currentGraphics = this.currentPage.graphics;\n        //this.currentGraphics = (this.currentPage != null ) ? this.currentPage.graphics : this.currentGraphics;\n        // if (this.currentGraphics.layer !== null) {\n        //     let index : number = 0;\n        //     if (this.currentGraphics.page instanceof PdfPage) {\n        //         index = (this.currentGraphics.page as PdfPage).section.indexOf(this.currentGraphics.page as PdfPage);\n        //     } else {\n        //         index = (this.currentGraphics.page as PdfPageBase).defaultLayerIndex;\n        //     }\n        //     this.listOfNavigatePages.push(index);\n        // }\n        var index = 0;\n        index = this.currentGraphics.page.section.indexOf(this.currentGraphics.page);\n        this.listOfNavigatePages.push(index);\n        if (format != null && format.break === PdfLayoutBreakType.FitColumnsToPage) {\n            this.currentBounds = new RectangleF(new PointF(param.bounds.x, param.bounds.y), new SizeF(this.Grid.columns.width, this.currentGraphics.clientSize.height));\n        }\n        else {\n            this.currentBounds = new RectangleF(new PointF(param.bounds.x, param.bounds.y), this.currentGraphics.clientSize);\n        }\n        //this.currentBounds = new RectangleF(new PointF(param.bounds.x, param.bounds.y), this.currentGraphics.clientSize);\n        if (this.Grid.rows.count !== 0) {\n            this.currentBounds.width = (param.bounds.width > 0) ? param.bounds.width :\n                (this.currentBounds.width - this.Grid.rows.getRow(0).cells.getCell(0).style.borders.left.width / 2);\n        }\n        else if (this.Grid.headers.count !== 0) {\n            // this.currentBounds.width = (param.bounds.width > 0) ? param.bounds.width : (this.currentBounds.width -\n            //                                 this.Grid.headers.getHeader(0).cells.getCell(0).style.borders.left.width / 2);\n            this.currentBounds.width = param.bounds.width;\n        }\n        else {\n            throw Error('Please add row or header into grid');\n        }\n        this.startLocation = new PointF(param.bounds.x, param.bounds.y);\n        // if (this.Grid.style.allowHorizontalOverflow && this.currentBounds.width > this.currentGraphics.clientSize.width) {\n        //     this.currentBounds.width = this.currentGraphics.clientSize.width;\n        //     this.currentBounds.width -= this.currentBounds.x;\n        // }\n        // if (this.Grid.isChildGrid) {\n        //     this.childheight = param.bounds.height;\n        // }\n        // if (param.format !== null && param.format.usePaginateBounds) {\n        //     if (param.format.paginateBounds.height > 0) {\n        //         this.currentBounds.height = param.format.paginateBounds.height;\n        //     }\n        //} else \n        if (param.bounds.height > 0 && !this.Grid.isChildGrid) {\n            this.currentBounds.height = param.bounds.height;\n        }\n        if (!this.Grid.isChildGrid) {\n            this.hType = this.Grid.style.horizontalOverflowType;\n        }\n        if (!this.Grid.style.allowHorizontalOverflow) {\n            this.columnRanges = [];\n            if (typeof this.Grid.isChildGrid !== 'undefined' && typeof this.Grid.isChildGrid) {\n                this.Grid.measureColumnsWidth(this.currentBounds);\n            }\n            else {\n                this.Grid.measureColumnsWidth(new RectangleF(this.currentBounds.x, this.currentBounds.y, this.currentBounds.x + this.currentBounds.width, this.currentBounds.height));\n            }\n            this.columnRanges.push([0, this.Grid.columns.count - 1]);\n        }\n        else {\n            this.Grid.measureColumnsWidth();\n            this.determineColumnDrawRanges();\n        }\n        if (this.Grid.hasRowSpanSpan) {\n            for (var i = 0; i < this.Grid.rows.count; i++) {\n                if (this.Grid.rows.getRow(i).height !== -1 && !this.Grid.rows.getRow(i).isRowHeightSet) {\n                    this.Grid.rows.getRow(i).isRowHeightSet = true;\n                }\n            }\n        }\n        var result = this.layoutOnPage(param);\n        return result;\n    };\n    // /* tslint:enable */\n    /**\n     * `Determines the column draw ranges`.\n     * @private\n     */\n    PdfGridLayouter.prototype.determineColumnDrawRanges = function () {\n        var startColumn = 0;\n        var endColumn = 0;\n        var cellWidths = 0;\n        var availableWidth = this.currentGraphics.clientSize.width - this.currentBounds.x;\n        for (var i = 0; i < this.Grid.columns.count; i++) {\n            cellWidths += this.Grid.columns.getColumn(i).width;\n            if (cellWidths >= availableWidth) {\n                var subWidths = 0;\n                for (var j = startColumn; j <= i; j++) {\n                    subWidths += this.Grid.columns.getColumn(j).width;\n                    if (subWidths > availableWidth) {\n                        break;\n                    }\n                    endColumn = j;\n                }\n                this.columnRanges.push([startColumn, endColumn]);\n                startColumn = endColumn + 1;\n                endColumn = startColumn;\n                cellWidths = (endColumn <= i) ? this.Grid.columns.getColumn(i).width : 0;\n            }\n        }\n        // if (startColumn !== this.columns.Count) {\n        this.columnRanges.push([startColumn, this.Grid.columns.count - 1]);\n        // }\n    };\n    /**\n     * `Layouts the on page`.\n     * @private\n     */\n    PdfGridLayouter.prototype.layoutOnPage = function (param) {\n        /* tslint:disable */\n        this.pageBounds.x = param.bounds.x;\n        this.pageBounds.y = param.bounds.y;\n        this.pageBounds.height = param.bounds.height;\n        var format = this.getFormat(param.format);\n        var endArgs = null;\n        var result = null;\n        var layoutedPages = new TemporaryDictionary();\n        var startPage = param.page;\n        var isParentCell = false;\n        var cellBounds = [];\n        for (var index = 0; index < this.columnRanges.length; index++) {\n            var range = this.columnRanges[index];\n            this.cellStartIndex = range[0];\n            this.cellEndIndex = range[1];\n            var returnObject = this.raiseBeforePageLayout(this.currentPage, this.currentBounds, this.currentRowIndex);\n            this.currentBounds = returnObject.currentBounds;\n            this.currentRowIndex = returnObject.currentRowIndex;\n            // if (returnObject.returnValue) {\n            //     result = new PdfGridLayoutResult(this.currentPage, this.currentBounds);\n            //     break;\n            // }\n            //Draw Headers.\n            var drawHeader = void 0;\n            for (var i_1 = 0; i_1 < this.Grid.headers.count; i_1++) {\n                var row = this.Grid.headers.getHeader(i_1);\n                var headerHeight = this.currentBounds.y;\n                this.isHeader = true;\n                if (startPage != this.currentPage) {\n                    for (var k = this.cellStartIndex; k <= this.cellEndIndex; k++) {\n                        if (row.cells.getCell(k).isCellMergeContinue) {\n                            row.cells.getCell(k).isCellMergeContinue = false;\n                            row.cells.getCell(k).value = \"\";\n                        }\n                    }\n                }\n                // RowLayoutResult\n                var headerResult = this.drawRow(row);\n                if (headerHeight === this.currentBounds.y) {\n                    drawHeader = true;\n                    if (PdfGridLayouter.repeatRowIndex === -1) {\n                        PdfGridLayouter.repeatRowIndex = i_1;\n                    }\n                }\n                else {\n                    drawHeader = false;\n                }\n                if (!headerResult.isFinish && startPage !== null\n                    && format.layout !== PdfLayoutType.OnePage && drawHeader) {\n                    this.startLocation.x = this.currentBounds.x;\n                    this.currentPage = this.getNextPageformat(format);\n                    this.startLocation.y = this.currentBounds.y;\n                    if (typeof format.paginateBounds !== 'undefined' && format.paginateBounds.x === 0 && format.paginateBounds.y === 0 && format.paginateBounds.width === 0 && format.paginateBounds.height === 0)\n                        this.currentBounds.x += this.startLocation.x;\n                    this.drawRow(row);\n                }\n                this.isHeader = false;\n            }\n            var i = 0;\n            var length_1 = this.Grid.rows.count;\n            var repeatRow = void 0;\n            var startingHeight = 0;\n            var flag = true;\n            //Here is to draw parent Grid and Cells\n            cellBounds = [];\n            //Draw row by row with the specified cell range.\n            for (var j = 0; j < this.Grid.rows.count; j++) {\n                var row = this.Grid.rows.getRow(j);\n                i++;\n                this.currentRowIndex = i - 1;\n                var originalHeight = this.currentBounds.y;\n                startPage = this.currentPage;\n                PdfGridLayouter.repeatRowIndex = -1;\n                if (flag && row.grid.isChildGrid) {\n                    startingHeight = originalHeight;\n                    flag = false;\n                }\n                var rowResult = null;\n                ///rowResult = this.drawRow(row);\n                /*if(!row.isrowFinish) {\n                    if(!row.grid.isgridSplit){\n                        rowResult = this.drawRow(row);\n                        row.isrowFinish = true;\n                        row.isrowDraw = true;\n                    } else {\n                        if(!row.isrowDraw){\n                            rowResult = this.drawRow(row);\n                            row.isrowFinish = true;\n                            row.isrowDraw = true;\n                            row.grid.isgridSplit = false;\n                        } else {\n                            rowResult =  null;\n                            break;\n                        }\n                    }\n                }\n                else {\n                    //row.isrowFinish = false;\n                    //rowResult = this.drawRow(row);\n                    rowResult = null;\n                    break;\n                    \n                }             */\n                if (this.Grid.splitChildRowIndex == -1) {\n                    rowResult = this.drawRow(row);\n                    row.isrowFinish = true;\n                }\n                else {\n                    if (row.grid.ParentCell.row.grid.isGridSplit && this.Grid.splitChildRowIndex <= row.rowIndex) {\n                        rowResult = this.drawRow(row);\n                        row.isrowFinish = true;\n                    }\n                    else if (row.isrowFinish) {\n                        continue;\n                    }\n                    else {\n                        break;\n                    }\n                }\n                //rowResult = this.drawRow(row);\n                cellBounds.push(rowResult.bounds.width);\n                /*if (row.isRowBreaksNextPage)\n                    {\n                        let x : number  = 0;\n                        for (let l : number = 0; l < row.cells.count; l++)\n                        {\n                            let isNestedRowBreak : boolean = false;\n                            if (row.height == row.cells.getCell(l).height)\n                            {\n                                let n : number;\n                                let grid : PdfGrid = row.cells.getCell(l).value as PdfGrid;\n                                for (let m : number = grid.rows.count; 0 < m; m--)\n                                {\n                                    if ((grid.rows.getRow(m - 1).rowBreakHeight > 0))\n                                    {\n                                        isNestedRowBreak = true;\n                                        break;\n                                    }\n                                    if (grid.rows.getRow(m - 1).isRowBreaksNextPage)\n                                    {\n                                        row.rowBreakHeightValue = grid.rows.getRow(m - 1).rowBreakHeightValue;\n                                        break;\n                                    }\n                                    row.rowBreakHeightValue += grid.rows.getRow(m - 1).height;\n                                }\n                            }\n                            if (isNestedRowBreak)\n                                break;\n                        }\n                        for (let j : number = 0; j < row.cells.count; j++)\n                        {\n\n                            if (row.height > row.cells.getCell(j).height)\n                            {\n                                row.cells.getCell(j).value = \" \";\n                                let rect : RectangleF ;\n                                let page : PdfPage = this.getNextPage(this.currentPage);\n                                let section : PdfSection = this.currentPage.section;\n                                let index : number = section.indexOf(page);\n                                for (let k : number = 0; k < (section.count - 1) - index; k++)\n                                {\n                                    rect = new RectangleF(x, 0, row.grid.columns.getColumn(j).width, page.getClientSize().height);\n                                    PdfGridLayouter.repeatRowIndex = -1;\n                                    row.cells.getCell(j).draw(page.graphics, rect, false);\n                                    page = this.getNextPage(page);\n                                }\n                                rect = new RectangleF(x, 0, row.grid.columns.getColumn(j).width, row.rowBreakHeightValue);\n\n                                row.cells.getCell(j).draw(page.graphics, rect, false);\n                            }\n                            x += row.grid.columns.getColumn(j).width;\n                        }\n                    }*/\n                //if height remains same, it is understood that row is not drawn in the page\n                if (originalHeight === this.currentBounds.y) {\n                    repeatRow = true;\n                    PdfGridLayouter.repeatRowIndex = this.Grid.rows.rowCollection.indexOf(row);\n                }\n                else {\n                    repeatRow = false;\n                    PdfGridLayouter.repeatRowIndex = -1;\n                }\n                while (!rowResult.isFinish && startPage != null) {\n                    var tempResult = this.getLayoutResult();\n                    /*if (startPage != this.currentPage)\n                        {\n                            if (row.grid.isChildGrid && row.grid.ParentCell != null)\n                            {\n                                let bounds : RectangleF= new RectangleF(new PointF(format.paginateBounds.x,format.paginateBounds.y), new SizeF(param.bounds.width, tempResult.bounds.height));\n                                bounds.x += param.bounds.x;\n                                if (row.grid.ParentCell.row.grid.style.cellPadding != null)\n                                {\n                                    bounds.y += row.grid.ParentCell.row.grid.style.cellPadding.top;\n                                    if (bounds.height > this.currentPageBounds.height)\n                                    {\n                                        bounds.height = this.currentPageBounds.height - bounds.y;\n                                        bounds.height -= (row.grid.ParentCell.row.grid.style.cellPadding.bottom);\n                                    }\n                                }\n                                // Draw border for cells in the nested grid cell's row.\n                                for (let c : number = 0; c < row.cells.count; c++)\n                                {\n                                    let cell : PdfGridCell = row.cells.getCell(c);\n                                    let cellWidth :  number= 0;\n                                    if (cell.columnSpan > 1)\n                                    {\n                                        for (; c < cell.columnSpan; c++)\n                                            cellWidth += row.grid.columns.getColumn(c).width;\n                                    }\n                                    else\n                                        cellWidth = Math.max(cell.width, row.grid.columns.getColumn(c).width);\n                                    cell.drawCellBorders(this.currentGraphics, new RectangleF(new PointF(bounds.x,bounds.y), new SizeF(cellWidth, bounds.height)));\n                                    bounds.x += cellWidth;\n                                    c += (cell.columnSpan - 1);\n                                }\n                            }\n                        }\n                        */\n                    endArgs = this.raisePageLayouted(tempResult);\n                    if (endArgs.cancel || repeatRow)\n                        break;\n                    else if (this.Grid.allowRowBreakAcrossPages) {\n                        //If there is no space in the current page, add new page and then draw the remaining row.\n                        this.currentPage = this.getNextPageformat(format);\n                        originalHeight = this.currentBounds.y;\n                        var location_1 = new PointF(PdfBorders.default.right.width / 2, PdfBorders.default.top.width / 2);\n                        if ((format.paginateBounds.x === 0 && format.paginateBounds.y === 0 && format.paginateBounds.width === 0 &&\n                            format.paginateBounds.height === 0) && (this.startLocation.x === location_1.x && this.startLocation.y === location_1.y)) {\n                            this.currentBounds.x += this.startLocation.x;\n                            this.currentBounds.y += this.startLocation.y;\n                        }\n                        if (this.isPaginate) {\n                            this.startLocation.y = this.currentBounds.y;\n                            this.isPaginate = false;\n                        }\n                        if (this.Grid.isChildGrid && row.grid.ParentCell != null) {\n                            if (this.Grid.ParentCell.row.grid.style.cellPadding != null) {\n                                if (row.rowBreakHeight + this.Grid.ParentCell.row.grid.style.cellPadding.top < this.currentBounds.height) {\n                                    this.currentBounds.y = this.Grid.ParentCell.row.grid.style.cellPadding.top;\n                                }\n                            }\n                        }\n                        if (row.grid.ParentCell != null) {\n                            row.grid.ParentCell.row.isRowBreaksNextPage = true;\n                            row.grid.ParentCell.row.rowBreakHeightValue = row.rowBreakHeight + this.Grid.ParentCell.row.grid.style.cellPadding.top + this.Grid.ParentCell.row.grid.style.cellPadding.bottom;\n                            for (var i_2 = row.rowIndex + 1; i_2 < row.grid.rows.count; i_2++) {\n                                row.grid.ParentCell.row.rowBreakHeightValue += row.grid.rows.getRow(i_2).height;\n                            }\n                            //row.rowBreakHeight = row.grid.ParentCell.row.rowBreakHeightValue;\n                        }\n                        /*if (row.noOfPageCount > 1)\n                        {\n                            let temp : number = row.rowBreakHeightValue;\n                            for (let j : number = 1; j < row.noOfPageCount; j++)\n                            {\n                                row.rowBreakHeightValue = 0;\n                                row.height = ((row.noOfPageCount - 1) * this.currentPage.getClientSize().height);\n                                this.drawRow(row);\n                                this.currentPage = this.getNextPageformat(format);\n                                startPage = this.currentPage;\n                            }\n                            row.rowBreakHeightValue = temp;\n                            row.noOfPageCount = 1;\n                            rowResult = this.drawRow(row);\n                        } else {\n                            rowResult = this.drawRow(row);\n                        }\n                        /*if(row.grid.isChildGrid){\n                            row.isrowFinish = false;\n                            row.isrowDraw = false;\n                            row.grid.isgridSplit = true;\n                            row.grid.ParentCell.row.grid.isgridSplit = true;\n                            //rowResult.isFinish = false;\n                            break;\n                        }*/\n                        if (row.grid.isChildGrid) {\n                            //row.grid.isgridSplit = true;\n                            row.isrowFinish = false;\n                            //row.grid.ParentCell.row.grid.isgridSplit = true;\n                            row.grid.splitChildRowIndex = row.rowIndex;\n                            row.grid.ParentCell.row.grid.splitChildRowIndex = row.grid.ParentCell.row.rowIndex;\n                            if (row.grid.ParentCell.row.grid.isGridSplit) {\n                                row.grid.ParentCell.row.noOfPageCount += 1;\n                                row.grid.ParentCell.row.grid.isGridSplit = false;\n                            }\n                            break;\n                        }\n                        if (row.noOfPageCount < 1) {\n                            if (row.grid.splitChildRowIndex != -1) {\n                                row.grid.isGridSplit = true;\n                            }\n                            if (row.style.border != null && ((row.style.border.left != null && row.style.border.left.width !== 1)\n                                || (row.style.border.top != null && row.style.border.top.width !== 1))) {\n                                var x = row.style.border.left.width / 2;\n                                var y = row.style.border.top.width / 2;\n                                if (this.currentBounds.x === PdfBorders.default.right.width / 2 && this.currentBounds.y === PdfBorders.default.right.width / 2) {\n                                    var newBound = new RectangleF(x, y, this.currentBounds.width, this.currentBounds.height);\n                                    this.currentBounds = newBound;\n                                }\n                            }\n                            if (this.Grid.repeatHeader) {\n                                for (var j_1 = 0; j_1 < this.Grid.headers.count; j_1++) {\n                                    var headerRepeat = this.Grid.headers.getHeader(j_1);\n                                    this.drawRow(headerRepeat);\n                                }\n                            }\n                            rowResult = this.drawRow(row);\n                            if (row.noOfPageCount >= 1) {\n                                var temp = row.rowBreakHeightValue;\n                                for (var j_2 = 0; j_2 < row.noOfPageCount; j_2++) {\n                                    //this.currentPage.section.add();\n                                    var tempResult1 = this.getLayoutResult();\n                                    endArgs = this.raisePageLayouted(tempResult1);\n                                    this.currentPage = this.getNextPageformat(format);\n                                    originalHeight = this.currentBounds.y;\n                                    //row.rowBreakHeightValue = 0;\n                                    if (row.grid.splitChildRowIndex != -1) {\n                                        row.grid.isGridSplit = true;\n                                    }\n                                    this.currentBounds.y = 0.5;\n                                    if (this.Grid.repeatHeader) {\n                                        for (var i_3 = 0; i_3 < this.Grid.headers.count; i_3++) {\n                                            var header = this.Grid.headers.getHeader(i_3);\n                                            this.drawRow(header);\n                                        }\n                                    }\n                                    //row.height = ((row.noOfPageCount - 1) * this.currentPage.getClientSize().height);\n                                    this.drawRow(row);\n                                }\n                                // row.rowBreakHeight = temp;\n                                // row.noOfPageCount = 1;\n                                // rowResult = this.drawRow(row);\n                            }\n                            row.grid.splitChildRowIndex = -1;\n                            row.grid.isGridSplit = false;\n                            rowResult.isFinish = this.checkIsFisished(row);\n                            //row.NestedGridLayoutResult.bounds.height = row.rowBreakHeightValue;\n                            //this.currentBounds.y = rowResult.bounds.y;\n                            for (var i_4 = 0; i_4 < row.cells.count; i_4++) {\n                                if (row.cells.getCell(i_4).value instanceof PdfGrid) {\n                                    row.cells.getCell(i_4).value.splitChildRowIndex = -1;\n                                }\n                            }\n                        }\n                    }\n                    // else if (!this.Grid.allowRowBreakAcrossPages && i < length)\n                    // {\n                    //     this.currentPage = this.getNextPageformat(format);\n                    //     break;\n                    // }\n                    // else if (i >= length)\n                    //     break;\n                }\n                if (!rowResult.isFinish && startPage !== null && format.layout !== PdfLayoutType.OnePage && repeatRow) {\n                    // During pagination, cell position is maintained here.\n                    this.startLocation.x = this.currentBounds.x;\n                    var isAddNextPage = false;\n                    this.currentPage = this.getNextPageformat(format);\n                    /*if (!this.Grid.isSingleGrid)\n                    {\n                        for ( let j : number= 0; j < this.Grid.rows.count; j++)\n                        {\n                            let isWidthGreaterthanParent : boolean = false;\n                            for (let k : number = 0; k < this.Grid.rows.getRow(j).cells.count; k++)\n                            {\n                                if (this.Grid.rows.getRow(j).cells.getCell(k).width > this.currentPageBounds.width)\n                                    isWidthGreaterthanParent = true;\n                            }\n                            if (isWidthGreaterthanParent && this.Grid.rows.getRow(j).cells.getCell(this.rowBreakPageHeightCellIndex).pageCount > 0)\n                            {\n                                isAddNextPage = true;\n                            }\n                        }\n                    }\n                    if (!this.Grid.isRearranged && isAddNextPage)\n                         {\n                             let section : PdfSection = this.currentPage.section;\n                             \n                             //this.currentPage = section.add();\n                         \n                             this.currentGraphics = this.currentPage.graphics;\n                             this.currentBounds = new RectangleF(new PointF(0,0), this.currentPage.getClientSize());\n                          \n                             let pageindex  : number = (this.currentGraphics.page as PdfPage).section.indexOf(this.currentGraphics.page as PdfPage);\n                         }\n                         else\n                         {\n                             this.currentPage = this.getNextPageformat(format);\n                         }\n                         if (format.paginateBounds.y == 0)\n                             this.currentBounds.y = PdfBorders.default.top.width/2;\n                         else\n                         {\n                             this.currentBounds.y = format == null ? 0 : format.paginateBounds.y;\n                             \n                         }*/\n                    if (this.raiseBeforePageLayout(this.currentPage, this.currentBounds, this.currentRowIndex).returnValue) {\n                        break;\n                    }\n                    if ((param.format !== null) && !param.format.usePaginateBounds && param.bounds !== null &&\n                        param.bounds.height > 0 && !this.Grid.isChildGrid) {\n                        this.currentBounds.height = param.bounds.height;\n                    }\n                    if (typeof param.format !== 'undefined' && param.format != null && typeof param.format.usePaginateBounds !== 'undefined' && !param.format.usePaginateBounds && !(param.format.paginateBounds.x === 0 && param.format.paginateBounds.y === 0 && param.format.paginateBounds.width === 0 && param.format.paginateBounds.height === 0) && param.format.paginateBounds.y === 0) {\n                        this.currentBounds.y = PdfBorders.default.top.width / 2;\n                    }\n                    else {\n                        this.currentBounds.y = format == null ? 0 : format.paginateBounds.y;\n                        if (format != null && (format.paginateBounds.x !== 0 || format.paginateBounds.y !== 0 || format.paginateBounds.height !== 0 || format.paginateBounds.width !== 0)) {\n                            this.currentBounds.x = format.paginateBounds.x;\n                            this.currentBounds.width = format.paginateBounds.width;\n                            this.currentBounds.height = format.paginateBounds.height;\n                        }\n                    }\n                    if (typeof param.format !== 'undefined' && (param.format !== null) && typeof param.format.usePaginateBounds !== 'undefined' && !param.format.usePaginateBounds && param.bounds !== null &&\n                        param.bounds.y > 0 && !this.Grid.isChildGrid) {\n                        this.currentBounds.y = param.bounds.y;\n                    }\n                    this.startLocation.y = this.currentBounds.y;\n                    if ((format.paginateBounds.x === format.paginateBounds.y) &&\n                        (format.paginateBounds.y === format.paginateBounds.height) &&\n                        (format.paginateBounds.height === format.paginateBounds.width) && (format.paginateBounds.width === 0)) {\n                        this.currentBounds.x += this.startLocation.x;\n                    }\n                    if (this.currentBounds.x === PdfBorders.default.left.width / 2) {\n                        this.currentBounds.y += this.startLocation.x;\n                    }\n                    if (this.Grid.repeatHeader) {\n                        for (var i_5 = 0; i_5 < this.Grid.headers.count; i_5++) {\n                            var header = this.Grid.headers.getHeader(i_5);\n                            this.drawRow(header);\n                        }\n                    }\n                    this.drawRow(row);\n                    if (this.currentPage !== null && !layoutedPages.containsKey(this.currentPage)) {\n                        layoutedPages.add(this.currentPage, range);\n                    }\n                }\n                if (row.NestedGridLayoutResult != null) {\n                    // Position for next row in the grid.\n                    this.currentPage = row.NestedGridLayoutResult.page;\n                    this.currentGraphics = this.currentPage.graphics; //If not, next row will not be drawn in the layouted page.\n                    this.startLocation = new PointF(row.NestedGridLayoutResult.bounds.x, row.NestedGridLayoutResult.bounds.y);\n                    var recalHeight = this.ReCalculateHeight(row, row.NestedGridLayoutResult.bounds.height);\n                    this.currentBounds.y = recalHeight;\n                    //this.currentBounds.y = row.NestedGridLayoutResult.bounds.height;\n                    if (startPage != this.currentPage) {\n                        var secion = this.currentPage.section;\n                        var startIndex = secion.indexOf(startPage) + 1;\n                        var endIndex = secion.indexOf(this.currentPage);\n                        for (var page = startIndex; page < endIndex + 1; page++) {\n                            var pageGraphics = this.currentPage.graphics;\n                            var location_2 = new PointF(format.paginateBounds.x, format.paginateBounds.y);\n                            var height = page == endIndex ? (row.NestedGridLayoutResult.bounds.height - param.bounds.y) :\n                                (this.currentBounds.height - location_2.y);\n                            if (height <= pageGraphics.clientSize.height)\n                                height += param.bounds.y;\n                            // if (row.grid.isChildGrid && row.grid.ParentCell != null)\n                            //     location.x += param.bounds.x;\n                            location_2.y = format == null ? 0.5 : format.paginateBounds.y;\n                            // Draw border for last paginated row containing nested grid.\n                            for (var c = 0; c < row.cells.count; c++) {\n                                var cell = row.cells.getCell(c);\n                                var cellWidth = 0;\n                                var totalwidth = 0;\n                                if (cell.value instanceof PdfGrid) {\n                                    for (var i_6 = 0; i_6 < cell.value.columns.count; i_6++) {\n                                        totalwidth += cell.value.columns.getColumn(i_6).columnWidth;\n                                    }\n                                }\n                                else {\n                                    totalwidth = cell.width;\n                                }\n                                // if (cell.columnSpan > 1)\n                                // {\n                                //     for (; c < cell.columnSpan; c++)\n                                //         cellWidth += row.grid.columns.getColumn(c).width;\n                                // }\n                                // else\n                                cellWidth = Math.max(totalwidth, row.grid.columns.getColumn(c).width);\n                                cell.drawCellBorders(pageGraphics, new RectangleF(location_2, new SizeF(cellWidth, height)));\n                                location_2.x += cellWidth;\n                                c += (cell.columnSpan - 1);\n                            }\n                        }\n                        // So, nested grid drawing is completed for the current row. Update page.\n                        // Otherwise, the next nested grid of the parent will draw borders from start.\n                        startPage = this.currentPage;\n                    }\n                }\n            }\n            var isPdfGrid = false;\n            var maximumCellBoundsWidth = 0;\n            if (cellBounds.length > 0) {\n                maximumCellBoundsWidth = cellBounds[0];\n            }\n            var largeNavigatePage = [[1, 2]];\n            for (var c = 0; c < this.Grid.rows.count; c++) {\n                if (this.cellEndIndex != -1 && this.Grid.rows.getRow(c).cells.getCell(this.cellEndIndex).value instanceof PdfGrid) {\n                    var grid = this.Grid.rows.getRow(c).cells.getCell(this.cellEndIndex).value;\n                    this.rowLayoutBoundsWidth = grid.rowLayoutBoundsWidth;\n                    isPdfGrid = true;\n                    // if (largeNavigatePage[0][0] < grid.listOfNavigatePages.length)\n                    // {\n                    //     largeNavigatePage[0][0] = grid.listOfNavigatePages.length;\n                    //     largeNavigatePage[0][1] = cellBounds[c];\n                    // }\n                    // else if ((largeNavigatePage[0][0] == grid.listOfNavigatePages.length) && (largeNavigatePage[0][1] < cellBounds[c]))\n                    // {\n                    //     largeNavigatePage[0][1] = cellBounds[c];\n                    // }\n                }\n            }\n            if (!isPdfGrid && cellBounds.length > 0) {\n                for (var c = 0; c < i - 1; c++) {\n                    if (maximumCellBoundsWidth < cellBounds[c]) {\n                        maximumCellBoundsWidth = cellBounds[c];\n                    }\n                }\n                this.rowLayoutBoundsWidth = maximumCellBoundsWidth;\n            }\n            else {\n                this.rowLayoutBoundsWidth = largeNavigatePage[0][1];\n            }\n            if (this.columnRanges.indexOf(range) < this.columnRanges.length - 1\n                && startPage != null && format.layout != PdfLayoutType.OnePage) {\n                isParentCell = this.Grid.isChildGrid;\n                if (largeNavigatePage[0][0] != 0) {\n                    var section = this.currentPage.section;\n                    var pageIndex = section.indexOf(this.currentPage);\n                    this.currentGraphics = this.currentPage.graphics;\n                    this.currentBounds = new RectangleF(new PointF(0, 0), this.currentPage.getClientSize());\n                    var pageindex = this.currentGraphics.page.section.indexOf(this.currentGraphics.page);\n                }\n                else {\n                    this.currentPage = this.getNextPageformat(format);\n                }\n                // let locationGrid : PointF= new PointF(PdfBorders.default.right.width / 2, PdfBorders.default.top.width / 2);\n                // if (format.paginateBounds == new RectangleF(0,0,0,0) && this.startLocation == locationGrid)\n                // {\n                //     this.currentBounds.x += this.startLocation.x;\n                //     this.currentBounds.y += this.startLocation.y;\n                // }\n            }\n            if (this.columnRanges.length - 1 !== index && this.columnRanges.length > 1 && format.layout !== PdfLayoutType.OnePage) {\n                this.currentPage = this.getNextPageformat(format);\n                if ((format.paginateBounds.x === format.paginateBounds.y) && (format.paginateBounds.y === format.paginateBounds.height)\n                    && (format.paginateBounds.height === format.paginateBounds.width) && (format.paginateBounds.width === 0)) {\n                    this.currentBounds.x += this.startLocation.x;\n                    this.currentBounds.y += this.startLocation.y;\n                    //this.currentBounds.height = this.pageBounds.height;\n                }\n            }\n        }\n        result = this.getLayoutResult();\n        if (this.Grid.style.allowHorizontalOverflow && this.Grid.style.horizontalOverflowType == PdfHorizontalOverflowType.NextPage) {\n            this.reArrangePages(layoutedPages);\n        }\n        this.raisePageLayouted(result);\n        return result;\n    };\n    PdfGridLayouter.prototype.checkIsFisished = function (row) {\n        var result = true;\n        for (var i = 0; i < row.cells.count; i++) {\n            if (!row.cells.getCell(i).FinishedDrawingCell) {\n                result = false;\n            }\n        }\n        return result;\n    };\n    /* tslint:enable */\n    /**\n     * Gets the `next page`.\n     * @private\n     */\n    PdfGridLayouter.prototype.getNextPageformat = function (format) {\n        var section = this.currentPage.section;\n        var nextPage = null;\n        var index = section.indexOf(this.currentPage);\n        this.flag = false;\n        if (index === section.count - 1) {\n            nextPage = section.add();\n        }\n        else {\n            nextPage = section.getPages()[index + 1];\n        }\n        this.currentGraphics = nextPage.graphics;\n        var pageindex = this.currentGraphics.page.section.indexOf(this.currentGraphics.page);\n        if (!(this.listOfNavigatePages.indexOf(pageindex) !== -1)) {\n            this.listOfNavigatePages.push(pageindex);\n        }\n        this.currentBounds = new RectangleF(new PointF(0, 0), nextPage.getClientSize());\n        if ((typeof format !== 'undefined') && format != null && format.usePaginateBounds && (typeof format.paginateBounds !== 'undefined') && format.paginateBounds != null && (format.paginateBounds.x !== format.paginateBounds.y) && (format.paginateBounds.y !== format.paginateBounds.height)\n            && (format.paginateBounds.height !== format.paginateBounds.width) && (format.paginateBounds.width !== 0)) {\n            this.currentBounds.x = format.paginateBounds.x;\n            this.currentBounds.y = format.paginateBounds.y;\n            this.currentBounds.height = format.paginateBounds.height;\n        }\n        return nextPage;\n    };\n    PdfGridLayouter.prototype.CheckIfDefaultFormat = function (format) {\n        var defaultFormat = new PdfStringFormat();\n        return (format.alignment === defaultFormat.alignment && format.characterSpacing === defaultFormat.characterSpacing &&\n            format.clipPath === defaultFormat.clipPath && format.firstLineIndent === defaultFormat.firstLineIndent &&\n            format.horizontalScalingFactor === defaultFormat.horizontalScalingFactor &&\n            format.lineAlignment === defaultFormat.lineAlignment\n            && format.lineLimit === defaultFormat.lineLimit && format.lineSpacing === defaultFormat.lineSpacing &&\n            format.measureTrailingSpaces === defaultFormat.measureTrailingSpaces && format.noClip === defaultFormat.noClip &&\n            format.paragraphIndent === defaultFormat.paragraphIndent && format.rightToLeft === defaultFormat.rightToLeft &&\n            format.subSuperScript === defaultFormat.subSuperScript && format.wordSpacing === defaultFormat.wordSpacing &&\n            format.wordWrap === defaultFormat.wordWrap);\n    };\n    /**\n     * `Raises BeforeCellDraw event`.\n     * @private\n     */\n    PdfGridLayouter.prototype.RaiseBeforeCellDraw = function (graphics, rowIndex, cellIndex, bounds, value, style) {\n        var args = null;\n        if (this.Grid.raiseBeginCellDraw) {\n            args = new PdfGridBeginCellDrawEventArgs(graphics, rowIndex, cellIndex, bounds, value, style);\n            this.Grid.onBeginCellDraw(args);\n            style = args.style;\n        }\n        return style;\n    };\n    /**\n     * `Raises AfterCellDraw event`.\n     * @private\n     */\n    PdfGridLayouter.prototype.raiseAfterCellDraw = function (graphics, rowIndex, cellIndex, bounds, value, cellstyle) {\n        var args = null;\n        if (this.Grid.raiseEndCellDraw) {\n            args = new PdfGridEndCellDrawEventArgs(graphics, rowIndex, cellIndex, bounds, value, cellstyle);\n            this.Grid.onEndCellDraw(args);\n        }\n    };\n    PdfGridLayouter.prototype.reArrangePages = function (layoutedPages) {\n        var document = this.currentPage.document;\n        var pages = [];\n        var keys = layoutedPages.keys();\n        var values = layoutedPages.values();\n        for (var i = 0; i < keys.length; i++) {\n            var page = keys[i];\n            page.section = null;\n            pages.push(page);\n            document.pages.remove(page);\n        }\n        /* tslint:disable */\n        for (var i = 0; i < layoutedPages.size(); i++) {\n            var count = 0;\n            for (var j = i, count_1 = (layoutedPages.size() / this.columnRanges.length); j < layoutedPages.size(); j += count_1) {\n                var page = pages[j];\n                if (typeof page !== 'undefined' && document.pages.indexOf(page) === -1) {\n                    document.pages.add(page);\n                }\n            }\n        }\n        /* tslint:enable */\n    };\n    /**\n     * Gets the `layout result`.\n     * @private\n     */\n    PdfGridLayouter.prototype.getLayoutResult = function () {\n        if (this.Grid.isChildGrid && this.Grid.allowRowBreakAcrossPages) {\n            for (var i = 0; i < this.Grid.rows.count; i++) {\n                var row = this.Grid.rows.getRow(i);\n                if (row.rowBreakHeight > 0 && row.repeatFlag) {\n                    this.startLocation.y = this.currentPage.origin.y;\n                }\n            }\n        }\n        var bounds;\n        if (!this.isChanged) {\n            bounds = new RectangleF(this.startLocation, new SizeF(this.currentBounds.width, this.currentBounds.y -\n                this.startLocation.y));\n        }\n        // else {\n        //     bounds = new RectangleF(this.currentLocation, new SizeF(this.currentBounds.width, this.currentBounds.y -\n        //                              this.currentLocation.y));\n        // }\n        /* tslint:enable */\n        return new PdfGridLayoutResult(this.currentPage, bounds);\n    };\n    /**\n     * `Recalculate row height` for the split cell to be drawn.\n     * @private\n     */\n    PdfGridLayouter.prototype.ReCalculateHeight = function (row, height) {\n        var newHeight = 0.0;\n        for (var i = this.cellStartIndex; i <= this.cellEndIndex; i++) {\n            if (!(row.cells.getCell(i).remainingString === null || row.cells.getCell(i).remainingString === '' ||\n                typeof row.cells.getCell(i).remainingString === 'undefined')) {\n                newHeight = Math.max(newHeight, row.cells.getCell(i).measureHeight());\n            }\n        }\n        return Math.max(height, newHeight);\n    };\n    /**\n     * `Raises BeforePageLayout event`.\n     * @private\n     */\n    PdfGridLayouter.prototype.raiseBeforePageLayout = function (currentPage, currentBounds, currentRow) {\n        var cancel = false;\n        if (this.Grid.raiseBeginPageLayout) {\n            var args = new PdfGridBeginPageLayoutEventArgs(currentBounds, currentPage, currentRow);\n            this.Grid.onBeginPageLayout(args);\n            // if (currentBounds !== args.Bounds) {\n            //     this.isChanged = true;\n            //     this.currentLocation = new PointF(args.Bounds.x, args.Bounds.y);\n            //     this.measureColumnsWidth(new RectangleF(new PointF(args.Bounds.x, args.Bounds.y) ,\n            //                                                  new SizeF(args.Bounds.width + args.Bounds.x ,\n            //                                                                 args.Bounds.height)));\n            // }\n            cancel = (typeof args.cancel === 'undefined' ? false : args.cancel);\n            currentBounds = args.bounds;\n            currentRow = args.startRowIndex;\n        }\n        return { returnValue: cancel, currentBounds: currentBounds, currentRowIndex: currentRow };\n    };\n    /**\n     * `Raises PageLayout event` if needed.\n     * @private\n     */\n    PdfGridLayouter.prototype.raisePageLayouted = function (result) {\n        var args = new PdfGridEndPageLayoutEventArgs(result);\n        if (this.Grid.raiseEndPageLayout) {\n            this.Grid.onEndPageLayout(args);\n        }\n        return args;\n    };\n    PdfGridLayouter.prototype.drawRow = function (row, result, height) {\n        if (typeof result === 'undefined') {\n            //.. Check if required space available.\n            //.....If the row conains spans which  falls through more than one page, then draw the row to next page.                        \n            var result_1 = new RowLayoutResult();\n            var rowHeightWithSpan = 0;\n            var location_3 = new PointF(0, 0);\n            var size = new SizeF(0, 0);\n            var isHeader = false;\n            if (row.rowSpanExists) {\n                var maxSpan = 0;\n                var currRowIndex = this.Grid.rows.rowCollection.indexOf(row);\n                if (currRowIndex === -1) {\n                    currRowIndex = this.Grid.headers.indexOf(row);\n                    if (currRowIndex !== -1) {\n                        isHeader = true;\n                    }\n                }\n                for (var i = 0; i < row.cells.count; i++) {\n                    var cell = row.cells.getCell(i);\n                    maxSpan = Math.max(maxSpan, cell.rowSpan);\n                }\n                for (var i = currRowIndex; i < currRowIndex + maxSpan; i++) {\n                    rowHeightWithSpan += (isHeader ? this.Grid.headers.getHeader(i).height : this.Grid.rows.getRow(i).height);\n                }\n                // let rowMaxHeight : number = rowHeightWithSpan;\n                // for (let i : number = 0; i < row.cells.count; i++ ) {\n                //     rowMaxHeight = rowMaxHeight > row.cells.getCell(i).height ? rowMaxHeight : row.cells.getCell(i).height;\n                // }\n                // let flag : boolean = true;\n                // let nextRow : PdfGridRow = this.Grid.headers.getHeader(this.Grid.headers.indexOf(row) + 1);\n                // for (let i : number = 0; i < nextRow.cells.count; i++ ) {\n                //     if (nextRow.cells.getCell(i).value !== '' && nextRow.cells.getCell(i).value !== undefined) {\n                //         flag = false;\n                //         break;\n                //     }\n                // }\n                // if ((rowMaxHeight > rowHeightWithSpan) && flag) {\n                //     row.height += (rowMaxHeight - rowHeightWithSpan);\n                // }                \n            }\n            var calculatedHeight = row.rowBreakHeight > 0.0 ? row.rowBreakHeight : row.height;\n            if (typeof this.Grid.isChildGrid !== 'undefined' && this.Grid.isChildGrid && typeof this.Grid.ParentCell !== 'undefined' && this.Grid.ParentCell != null) {\n                //Split row only if row height exceeds page height and AllowRowBreakAcrossPages is true.\n                // if (calculatedHeight + this.Grid.ParentCell.row.grid.style.cellPadding.bottom +\n                //             this.Grid.ParentCell.row.grid.style.cellPadding.top > this.currentPageBounds.height) {\n                //     if (this.Grid.allowRowBreakAcrossPages) {\n                //         result.isFinish = true;\n                //         if ( this.Grid.isChildGrid && row.rowBreakHeight > 0 ) {\n                //             if (this.Grid.ParentCell.row.grid.style.cellPadding !== null) {\n                //                 this.currentBounds.y += this.Grid.ParentCell.row.grid.style.cellPadding.top;\n                //             }\n                //             this.currentBounds.x = this.startLocation.x;\n                //         }\n                //         result.bounds = this.currentBounds ;\n                //         this.drawRowWithBreak(result, row, calculatedHeight);\n                //     } else {\n                //         //If AllowRowBreakAcrossPages is not true, draw the row till it fits the page.                       \n                //         if (this.Grid.ParentCell.row.grid.style.cellPadding != null) {\n                //             this.currentBounds.y += this.Grid.ParentCell.row.grid.style.cellPadding.top;\n                //             calculatedHeight = this.currentBounds.height - this.currentBounds.y -\n                //                     this.Grid.ParentCell.row.grid.style.cellPadding.bottom;\n                //         }\n                //         result.isFinish = false;\n                //         this.drawRow( row, result, calculatedHeight);\n                //     }\n                // } else\n                if (this.currentBounds.y + this.Grid.ParentCell.row.grid.style.cellPadding.bottom + calculatedHeight >\n                    this.currentPageBounds.height || this.currentBounds.y + this.Grid.ParentCell.row.grid.style.cellPadding.bottom\n                    + calculatedHeight > this.currentBounds.height || this.currentBounds.y +\n                    this.Grid.ParentCell.row.grid.style.cellPadding.bottom + rowHeightWithSpan > this.currentPageBounds.height) {\n                    //If a row is repeated and still cannot fit in page, proceed draw.\n                    if (typeof this.Grid.ParentCell.row.grid.LayoutFormat !== 'undefined' && this.Grid.ParentCell.row.grid.LayoutFormat.break === PdfLayoutBreakType.FitPage) {\n                        PdfGridLayouter.repeatRowIndex = this.Grid.rows.rowCollection.indexOf(row);\n                        this.Grid.splitChildRowIndex = this.Grid.rows.rowCollection.indexOf(row);\n                    }\n                    if (PdfGridLayouter.repeatRowIndex > -1 && PdfGridLayouter.repeatRowIndex === row.rowIndex) {\n                        if (this.Grid.allowRowBreakAcrossPages) {\n                            result_1.isFinish = true;\n                            // if (this.Grid.isChildGrid && row.rowBreakHeightValue > 0) {\n                            //     // if (this.Grid.ParentCell.row.grid.style.cellPadding != null) {\n                            //     //     this.currentBounds.y += this.Grid.ParentCell.row.grid.style.cellPadding.top;\n                            //     // }\n                            //     this.currentBounds.x = this.startLocation.x;\n                            // }\n                            result_1.bounds = this.currentBounds;\n                            this.drawRowWithBreak(result_1, row, calculatedHeight);\n                            row.repeatFlag = true;\n                            row.repeatRowNumber = PdfGridLayouter.repeatRowIndex;\n                        }\n                        // else {\n                        //     result.isFinish = false;\n                        //     row.repeatFlag = false;\n                        //     this.drawRow( row, result, calculatedHeight);\n                        // }\n                    }\n                    // else {\n                    //     result.isFinish = false;\n                    // }\n                }\n                else {\n                    result_1.isFinish = true;\n                    if (row.grid.ParentCell.row.rowBreakHeightValue > 0) {\n                        row.repeatFlag = true;\n                    }\n                    else {\n                        row.repeatFlag = false;\n                        calculatedHeight = row.height;\n                    }\n                    if (this.Grid.isChildGrid && row.rowBreakHeight > 0) {\n                        if (this.Grid.ParentCell.row.grid.style.cellPadding != null) {\n                            calculatedHeight += this.Grid.ParentCell.row.grid.style.cellPadding.bottom;\n                        }\n                    }\n                    this.drawRow(row, result_1, calculatedHeight);\n                }\n            }\n            else {\n                //Split row only if row height exceeds page height and AllowRowBreakAcrossPages is true.\n                if (calculatedHeight > this.currentPageBounds.height) {\n                    if (this.Grid.allowRowBreakAcrossPages) {\n                        result_1.isFinish = true;\n                        //result.bounds = this.currentBounds;\n                        this.drawRowWithBreak(result_1, row, calculatedHeight);\n                        row.isrowFinish = true;\n                        row.repeatFlag = true;\n                        if (row.grid.splitChildRowIndex !== -1) {\n                            result_1.isFinish = false;\n                        }\n                    }\n                    // else {\n                    //     //If AllowRowBreakAcrossPages is not true, draw the row till it fits the page.\n                    //     result.isFinish = false;\n                    //     this.drawRow( row, result, calculatedHeight);\n                    // }\n                }\n                else if (this.currentBounds.y + calculatedHeight > this.currentPageBounds.height ||\n                    this.currentBounds.y + calculatedHeight > (this.currentBounds.height + this.startLocation.y) ||\n                    this.currentBounds.y + rowHeightWithSpan > this.currentPageBounds.height) {\n                    // If a row is repeated and still cannot fit in page, proceed draw.\n                    var isFit = false;\n                    if ((this.Grid.allowRowBreakAcrossPages && !this.Grid.repeatHeader && !row.isRowHeightSet && !row.rowMergeComplete)) {\n                        if (this.Grid.LayoutFormat !== null && this.Grid.LayoutFormat.paginateBounds.height > 0) {\n                            isFit = this.isFitToCell((this.currentBounds.height + this.startLocation.y) - this.currentBounds.y, this.Grid, row);\n                        }\n                        else\n                            isFit = this.isFitToCell(this.currentPageBounds.height - this.currentBounds.y, this.Grid, row);\n                        if (isFit) {\n                            this.isPaginate = true;\n                        }\n                    }\n                    else if (this.Grid.allowRowBreakAcrossPages && this.Grid.LayoutFormat != null && this.Grid.LayoutFormat.layout == PdfLayoutType.Paginate && this.Grid.LayoutFormat.break != PdfLayoutBreakType.FitElement && row.isRowHeightSet && this.currentBounds.y + height > this.currentPageBounds.height) {\n                        isFit = this.isFitToCell(this.currentPageBounds.height - this.currentBounds.y, this.Grid, row);\n                        if (!isFit)\n                            isFit = !(this.slr !== null && this.slr.actualSize.height == 0 && this.slr.remainder != null && this.slr.remainder.length > 0 && this.remainderText == this.slr.remainder);\n                        if (isFit && this.slr != null && this.slr.lineCount > 1) {\n                            //It may text cutoff issue\n                            isFit = false;\n                        }\n                        this.remainderText = null;\n                    }\n                    if (PdfGridLayouter.repeatRowIndex > -1 && PdfGridLayouter.repeatRowIndex === row.rowIndex || isFit) {\n                        if (this.Grid.allowRowBreakAcrossPages) {\n                            result_1.isFinish = true;\n                            this.drawRowWithBreak(result_1, row, calculatedHeight);\n                            row.repeatFlag = true;\n                            row.repeatRowNumber = PdfGridLayouter.repeatRowIndex;\n                            if (row.grid.splitChildRowIndex !== -1) {\n                                result_1.isFinish = false;\n                            }\n                        }\n                        else {\n                            result_1.isFinish = false;\n                            this.drawRow(row, result_1, calculatedHeight);\n                        }\n                    }\n                    else {\n                        result_1.isFinish = false;\n                    }\n                }\n                else {\n                    result_1.isFinish = true;\n                    this.drawRow(row, result_1, calculatedHeight);\n                    row.repeatFlag = false;\n                }\n            }\n            return result_1;\n        }\n        else {\n            var skipcell = false;\n            var location_4 = new PointF(this.currentBounds.x, this.currentBounds.y);\n            // if (row.grid.isChildGrid && row.grid.allowRowBreakAcrossPages && this.startLocation.x !== this.currentBounds.x && row.width <\n            //                 this.currentPage.getClientSize().width) {\n            //     location.x = this.startLocation.x;\n            // }\n            result.bounds = new RectangleF(location_4, new SizeF(0, 0));\n            height = this.ReCalculateHeight(row, height);\n            for (var i = this.cellStartIndex; i <= this.cellEndIndex; i++) {\n                var cancelSpans = ((i > this.cellEndIndex + 1) && (row.cells.getCell(i).columnSpan > 1));\n                // let cancelSpans : boolean = false;\n                if (!cancelSpans) {\n                    for (var j = 1; j < row.cells.getCell(i).columnSpan; j++) {\n                        row.cells.getCell(i + j).isCellMergeContinue = true;\n                    }\n                }\n                var size = new SizeF(this.Grid.columns.getColumn(i).width, height);\n                // if (size.width > this.currentGraphics.clientSize.width) {\n                //     size.width = this.currentGraphics.clientSize.width;\n                // }\n                // if (this.Grid.isChildGrid && this.Grid.style.allowHorizontalOverflow) {\n                //     if (size.width >= this.currentGraphics.clientSize.width) {\n                //         size.width -= 2 * this.currentBounds.x;\n                //     }\n                // }\n                /* tslint:disable */\n                if (!this.CheckIfDefaultFormat(this.Grid.columns.getColumn(i).format) &&\n                    this.CheckIfDefaultFormat(row.cells.getCell(i).stringFormat)) {\n                    row.cells.getCell(i).stringFormat = this.Grid.columns.getColumn(i).format;\n                }\n                var cellstyle = row.cells.getCell(i).style;\n                var tempValue = ((typeof row.cells.getCell(i).value === 'string' &&\n                    row.cells.getCell(i).value !== null) ? row.cells.getCell(i).value : '');\n                row.cells.getCell(i).style = this.RaiseBeforeCellDraw(this.currentGraphics, this.currentRowIndex, i, new RectangleF(location_4, size), tempValue, cellstyle);\n                //row.cells.getCell(i).style = cellstyle;\n                if (!skipcell) {\n                    if (row.cells.getCell(i).value instanceof PdfGrid) {\n                        var grid = row.cells.getCell(i).value;\n                        grid.parentCellIndex = i;\n                    }\n                    var stringResult = row.cells.getCell(i).draw(this.currentGraphics, new RectangleF(location_4, size), cancelSpans);\n                    if (row.grid.style.allowHorizontalOverflow && (row.cells.getCell(i).columnSpan > this.cellEndIndex ||\n                        i + row.cells.getCell(i).columnSpan > this.cellEndIndex + 1) && this.cellEndIndex < row.cells.count - 1) {\n                        row.rowOverflowIndex = this.cellEndIndex;\n                    }\n                    if (row.grid.style.allowHorizontalOverflow && (row.rowOverflowIndex > 0 && (row.cells.getCell(i).columnSpan >\n                        this.cellEndIndex || i + row.cells.getCell(i).columnSpan > this.cellEndIndex + 1)) &&\n                        row.cells.getCell(i).columnSpan - this.cellEndIndex + i - 1 > 0) {\n                        row.cells.getCell(row.rowOverflowIndex + 1).value = stringResult !== null ? (stringResult.remainder !== undefined) ?\n                            stringResult.remainder : '' : '';\n                        row.cells.getCell(row.rowOverflowIndex + 1).stringFormat = row.cells.getCell(i).stringFormat;\n                        row.cells.getCell(row.rowOverflowIndex + 1).style = row.cells.getCell(i).style;\n                        row.cells.getCell(row.rowOverflowIndex + 1).columnSpan = row.cells.getCell(i).columnSpan - this.cellEndIndex + i - 1;\n                    }\n                }\n                /* tslint:enable */\n                tempValue = ((typeof row.cells.getCell(i).value === 'string' &&\n                    row.cells.getCell(i).value !== null) ? row.cells.getCell(i).value : '');\n                if (!cancelSpans) {\n                    this.raiseAfterCellDraw(this.currentGraphics, this.currentRowIndex, i, new RectangleF(location_4, size), tempValue, row.cells.getCell(i).style);\n                }\n                if (row.cells.getCell(i).value instanceof PdfGrid) {\n                    var grid = row.cells.getCell(i).value;\n                    if (this.Grid.columns.getColumn(i).width >= this.currentGraphics.clientSize.width) {\n                        location_4.x = grid.rowLayoutBoundsWidth;\n                        location_4.x += grid.style.cellSpacing;\n                    }\n                    else {\n                        location_4.x += this.Grid.columns.getColumn(i).width;\n                    }\n                }\n                else {\n                    location_4.x += this.Grid.columns.getColumn(i).width;\n                }\n            }\n            if (!row.rowMergeComplete || row.isRowHeightSet) {\n                this.currentBounds.y += height;\n            }\n            result.bounds = new RectangleF(new PointF(result.bounds.x, result.bounds.y), new SizeF(location_4.x, location_4.y));\n        }\n    };\n    PdfGridLayouter.prototype.isFitToCell = function (currentHeight, grid, gridRow) {\n        var isFit = false;\n        var layouter = new PdfStringLayouter();\n        for (var i = 0; i < gridRow.cells.count; i++) {\n            var cell = gridRow.cells.getCell(i);\n            if (typeof cell.value !== 'undefined' && cell.value !== null && typeof cell.value === 'string') {\n                var font = null;\n                if (typeof cell.style.font !== 'undefined' && cell.style.font != null) {\n                    font = cell.style.font;\n                }\n                else if (typeof cell.row.style.font !== 'undefined' && cell.row.style.font != null) {\n                    font = cell.row.style.font;\n                }\n                else if (typeof cell.row.grid.style.font !== 'undefined' && cell.row.grid.style.font != null) {\n                    font = cell.row.grid.style.font;\n                }\n                else {\n                    font = PdfDocument.defaultFont;\n                }\n                this.remainderText = gridRow.cells.getCell(i).value;\n                var width = gridRow.cells.getCell(i).width;\n                if (grid.columns.getColumn(i).isCustomWidth && gridRow.cells.getCell(i).width > grid.columns.getColumn(i).width) {\n                    width = grid.columns.getColumn(i).width;\n                }\n                this.slr = layouter.layout(gridRow.cells.getCell(i).value, font, gridRow.cells.getCell(i).stringFormat, new SizeF(width, currentHeight), false, this.currentPageBounds);\n                var height = this.slr.actualSize.height;\n                if (height == 0) {\n                    isFit = false;\n                    break;\n                }\n                if (gridRow.cells.getCell(i).style != null && gridRow.cells.getCell(i).style.borders != null && gridRow.cells.getCell(i).style.borders.top != null && gridRow.cells.getCell(i).style.borders.bottom != null)\n                    height += (gridRow.cells.getCell(i).style.borders.top.width + gridRow.cells.getCell(i).style.borders.bottom.width) * 2;\n                if (this.slr.lineCount > 1 && gridRow.cells.getCell(i).stringFormat != null && gridRow.cells.getCell(i).stringFormat.lineSpacing != 0)\n                    height += (this.slr.lineCount - 1) * (gridRow.cells.getCell(i).style.stringFormat.lineSpacing);\n                if (gridRow.cells.getCell(i).style.cellPadding == null) {\n                    height += (grid.style.cellPadding.top + grid.style.cellPadding.bottom);\n                }\n                else {\n                    height += (grid.style.cellPadding.top + grid.style.cellPadding.bottom);\n                }\n                height += grid.style.cellSpacing;\n                if (currentHeight > height || (typeof this.slr.remainder !== 'undefined' && this.slr.remainder !== null)) {\n                    isFit = true;\n                    break;\n                }\n            }\n        }\n        return isFit;\n    };\n    PdfGridLayouter.prototype.drawRowWithBreak = function (result, row, calculateHeight) {\n        var location = new PointF(this.currentBounds.x, this.currentBounds.y);\n        if (row.grid.isChildGrid && row.grid.allowRowBreakAcrossPages && this.startLocation.x !== this.currentBounds.x) {\n            location.x = this.startLocation.x;\n        }\n        result.bounds = new RectangleF(location, new SizeF(0, 0));\n        this.gridHeight = row.rowBreakHeight > 0 ? this.currentPageBounds.height : 0;\n        // Calculate the remaining height.\n        if (row.grid.style.cellPadding.top + this.currentBounds.y + row.grid.style.cellPadding.bottom < this.currentPageBounds.height) {\n            row.rowBreakHeight = this.currentBounds.y + calculateHeight - this.currentPageBounds.height;\n        }\n        // else {\n        //     row.rowBreakHeight = calculateHeight;\n        //     result.isFinish = false;\n        //     return;\n        // }\n        // No need to explicit break if the row height is equal to grid height.\n        for (var i = 0; i < row.cells.count; i++) {\n            var cell = row.cells.getCell(i);\n            var cellHeight = cell.measureHeight();\n            if (cellHeight === calculateHeight && cell.value instanceof PdfGrid) {\n                row.rowBreakHeight = 0;\n            }\n            // else if (cellHeight === calculateHeight && (cell.value as PdfGrid) === null) {\n            //     row.rowBreakHeight = this.currentBounds.y + calculateHeight - this.currentPageBounds.height;\n            // }\n        }\n        for (var i = this.cellStartIndex; i <= this.cellEndIndex; i++) {\n            var cancelSpans = ((row.cells.getCell(i).columnSpan + i > this.cellEndIndex + 1) &&\n                (row.cells.getCell(i).columnSpan > 1));\n            // if (!cancelSpans) {\n            //     for (let k : number = 1; k < row.cells.getCell(i).columnSpan; k++) {\n            //         row.cells.getCell(i + k).isCellMergeContinue = true;\n            //     }\n            //}\n            var size = new SizeF(this.Grid.columns.getColumn(i).width, this.gridHeight > 0.0 ? this.gridHeight :\n                this.currentPageBounds.height);\n            // if (size.width === 0) {\n            //     size = new SizeF(row.cells.getCell(i).width, size.height);\n            // }\n            // if (!this.CheckIfDefaultFormat(this.Grid.columns.getColumn(i).format) &&\n            //         this.CheckIfDefaultFormat((row.cells.getCell(i).stringFormat))) {\n            //     row.cells.getCell(i).stringFormat = this.Grid.columns.getColumn(i).format;\n            // }\n            var cellstyle1 = row.cells.getCell(i).style;\n            row.cells.getCell(i).style = cellstyle1;\n            var skipcell = false;\n            var stringResult = null;\n            if (!skipcell) {\n                stringResult = row.cells.getCell(i).draw(this.currentGraphics, new RectangleF(location, size), cancelSpans);\n            }\n            //If still row is to be drawn, set cell finished drawing cell as false and update the text to be drawn.\n            if (row.rowBreakHeight > 0.0) {\n                if (stringResult != null && typeof stringResult.remainder !== 'undefined') {\n                    row.cells.getCell(i).FinishedDrawingCell = false;\n                    row.cells.getCell(i).remainingString = stringResult.remainder == null ? ' ' : stringResult.remainder;\n                    row.rowBreakHeight = calculateHeight - stringResult.actualSize.height;\n                }\n            }\n            result.isFinish = (!result.isFinish) ? result.isFinish : row.cells.getCell(i).FinishedDrawingCell;\n            // let tempValue : string = ((typeof row.cells.getCell(i).value === 'string' &&\n            //row.cells.getCell(i).value !== null) ? row.cells.getCell(i).value : '') as string;\n            // if (!cancelSpans) {\n            //     // this.raiseAfterCellDraw(this.currentGraphics, this.currentRowIndex, i,\n            //     //           new RectangleF(location, size), tempValue, row.cells.getCell(i).style);            \n            //     this.raiseAfterCellDraw(this.currentGraphics, this.currentRowIndex, i, new RectangleF(location, size),\n            //                             (row.cells.getCell(i).value as string) ? row.cells.getCell(i).value.toString() : ' ',\n            //                             row.cells.getCell(i).style);\n            //     }                \n            if (row.cells.getCell(i).value instanceof PdfGrid) {\n                var grid = row.cells.getCell(i).value;\n                this.rowBreakPageHeightCellIndex = i;\n                // row.cells.getCell(i).pageCount = grid.listOfNavigatePages.length;\n                // for (let j : number = 0;j<grid.listOfNavigatePages.length;j++){\n                //     let pageIndex : number =grid.listOfNavigatePages.indexOf(j);\n                //             this.Grid.listOfNavigatePages.push(pageIndex);\n                //     }\n                if (this.Grid.columns.getColumn(i).width >= this.currentGraphics.clientSize.width) {\n                    location.x = this.rowLayoutBoundsWidth;\n                    location.x += grid.style.cellSpacing;\n                }\n                else {\n                    location.x += this.Grid.columns.getColumn(i).width;\n                }\n            }\n            else {\n                location.x += this.Grid.columns.getColumn(i).width;\n            }\n        }\n        this.currentBounds.y += this.gridHeight > 0.0 ? this.gridHeight : calculateHeight;\n        result.bounds = new RectangleF(new PointF(result.bounds.x, result.bounds.y), new SizeF(location.x, location.y));\n    };\n    /**\n     * @hidden\n     * @private\n     */\n    PdfGridLayouter.repeatRowIndex = -1;\n    return PdfGridLayouter;\n}(ElementLayouter));\nexport { PdfGridLayouter };\n// recalculateBounds : boolean, clientSize : SizeF\n//Implementation\n/**\n * `Initializes` internal data.\n * @private\n */\n//Internal declaration\nvar PdfGridLayoutResult = /** @class */ (function (_super) {\n    __extends(PdfGridLayoutResult, _super);\n    /**\n     * Constructor\n     * @private\n     */\n    function PdfGridLayoutResult(page, bounds) {\n        return _super.call(this, page, bounds) || this;\n    }\n    return PdfGridLayoutResult;\n}(PdfLayoutResult));\nexport { PdfGridLayoutResult };\n/**\n * `PdfGridLayoutFormat` class represents a flexible grid that consists of columns and rows.\n */\nvar PdfGridLayoutFormat = /** @class */ (function (_super) {\n    __extends(PdfGridLayoutFormat, _super);\n    /**\n     * Initializes a new instance of the `PdfGridLayoutFormat` class.\n     * @private\n     */\n    function PdfGridLayoutFormat(baseFormat) {\n        return _super.call(this, baseFormat) || this;\n    }\n    return PdfGridLayoutFormat;\n}(PdfLayoutFormat));\nexport { PdfGridLayoutFormat };\nvar GridCellEventArgs = /** @class */ (function () {\n    // Constructors\n    /**\n     * Initialize a new instance for `GridCellEventArgs` class.\n     * @private\n     */\n    function GridCellEventArgs(graphics, rowIndex, cellIndex, bounds, value) {\n        this.gridRowIndex = rowIndex;\n        this.gridCellIndex = cellIndex;\n        this.internalValue = value;\n        this.gridBounds = bounds;\n        this.pdfGraphics = graphics;\n    }\n    Object.defineProperty(GridCellEventArgs.prototype, \"rowIndex\", {\n        // Properties\n        /**\n         * Gets the value of current `row index`.\n         * @private\n         */\n        get: function () {\n            return this.gridRowIndex;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(GridCellEventArgs.prototype, \"cellIndex\", {\n        /**\n         * Gets the value of current `cell index`.\n         * @private\n         */\n        get: function () {\n            return this.gridCellIndex;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(GridCellEventArgs.prototype, \"value\", {\n        /**\n         * Gets the actual `value` of current cell.\n         * @private\n         */\n        get: function () {\n            return this.internalValue;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(GridCellEventArgs.prototype, \"bounds\", {\n        /**\n         * Gets the `bounds` of current cell.\n         * @private\n         */\n        get: function () {\n            return this.gridBounds;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(GridCellEventArgs.prototype, \"graphics\", {\n        /**\n         * Gets the instance of `current graphics`.\n         * @private\n         */\n        get: function () {\n            return this.pdfGraphics;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return GridCellEventArgs;\n}());\nexport { GridCellEventArgs };\nvar PdfGridBeginCellDrawEventArgs = /** @class */ (function (_super) {\n    __extends(PdfGridBeginCellDrawEventArgs, _super);\n    // Constructors\n    /**\n     * Initializes a new instance of the `StartCellLayoutEventArgs` class.\n     * @private\n     */\n    function PdfGridBeginCellDrawEventArgs(graphics, rowIndex, cellIndex, bounds, value, style) {\n        var _this = _super.call(this, graphics, rowIndex, cellIndex, bounds, value) || this;\n        _this.style = style;\n        return _this;\n    }\n    Object.defineProperty(PdfGridBeginCellDrawEventArgs.prototype, \"skip\", {\n        // Properties\n        /**\n         * Gets or sets a value indicating whether the value of this cell should be `skipped`.\n         * @private\n         */\n        get: function () {\n            return this.bSkip;\n        },\n        set: function (value) {\n            this.bSkip = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfGridBeginCellDrawEventArgs.prototype, \"style\", {\n        /**\n         * Gets or sets a `style` value of the cell.\n         * @private\n         */\n        get: function () {\n            return this.cellStyle;\n        },\n        set: function (value) {\n            this.cellStyle = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return PdfGridBeginCellDrawEventArgs;\n}(GridCellEventArgs));\nexport { PdfGridBeginCellDrawEventArgs };\nvar PdfGridEndCellDrawEventArgs = /** @class */ (function (_super) {\n    __extends(PdfGridEndCellDrawEventArgs, _super);\n    // Constructors\n    /**\n     * Initializes a new instance of the `PdfGridEndCellLayoutEventArgs` class.\n     * @private\n     */\n    function PdfGridEndCellDrawEventArgs(graphics, rowIndex, cellIndex, bounds, value, style) {\n        var _this = _super.call(this, graphics, rowIndex, cellIndex, bounds, value) || this;\n        _this.cellStyle = style;\n        return _this;\n    }\n    Object.defineProperty(PdfGridEndCellDrawEventArgs.prototype, \"style\", {\n        // Propertise\n        /**\n         * Get the `PdfGridCellStyle`.\n         * @private\n         */\n        get: function () {\n            return this.cellStyle;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return PdfGridEndCellDrawEventArgs;\n}(GridCellEventArgs));\nexport { PdfGridEndCellDrawEventArgs };\nvar PdfCancelEventArgs = /** @class */ (function () {\n    function PdfCancelEventArgs() {\n    }\n    Object.defineProperty(PdfCancelEventArgs.prototype, \"cancel\", {\n        // Properties\n        /**\n         * Gets and Sets the value of `cancel`.\n         * @private\n         */\n        get: function () {\n            return this.isCancel;\n        },\n        set: function (value) {\n            this.isCancel = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return PdfCancelEventArgs;\n}());\nexport { PdfCancelEventArgs };\nvar BeginPageLayoutEventArgs = /** @class */ (function (_super) {\n    __extends(BeginPageLayoutEventArgs, _super);\n    // Constructors\n    /**\n     * Initializes a new instance of the `BeginPageLayoutEventArgs` class with the specified rectangle and page.\n     * @private\n     */\n    function BeginPageLayoutEventArgs(bounds, page) {\n        var _this = _super.call(this) || this;\n        _this.bounds = bounds;\n        _this.pdfPage = page;\n        return _this;\n    }\n    Object.defineProperty(BeginPageLayoutEventArgs.prototype, \"bounds\", {\n        // Properties\n        /**\n         * Gets or sets value that indicates the lay outing `bounds` on the page.\n         * @private\n         */\n        get: function () {\n            return this.cellBounds;\n        },\n        set: function (value) {\n            this.cellBounds = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BeginPageLayoutEventArgs.prototype, \"page\", {\n        /**\n         * Gets the `page` where the lay outing should start.\n         * @private\n         */\n        get: function () {\n            return this.pdfPage;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return BeginPageLayoutEventArgs;\n}(PdfCancelEventArgs));\nexport { BeginPageLayoutEventArgs };\n/**\n * `EndPageLayoutEventArgs` class is alternate for end page layout events.\n */\nvar EndPageLayoutEventArgs = /** @class */ (function (_super) {\n    __extends(EndPageLayoutEventArgs, _super);\n    // Constructors\n    /**\n     * Initializes a new instance of the `EndPageLayoutEventArgs` class. with the specified 'PdfLayoutResult'.\n     * @private\n     */\n    function EndPageLayoutEventArgs(result) {\n        var _this = _super.call(this) || this;\n        _this.layoutResult = result;\n        return _this;\n    }\n    Object.defineProperty(EndPageLayoutEventArgs.prototype, \"result\", {\n        // Properties\n        /**\n         * Gets the lay outing `result` of the page.\n         * @private\n         */\n        get: function () {\n            return this.layoutResult;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EndPageLayoutEventArgs.prototype, \"nextPage\", {\n        /**\n         * Gets or sets a value indicating the `next page` where the element should be layout.\n         * @private\n         */\n        get: function () {\n            return this.nextPdfPage;\n        },\n        set: function (value) {\n            this.nextPdfPage = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return EndPageLayoutEventArgs;\n}(PdfCancelEventArgs));\nexport { EndPageLayoutEventArgs };\n/**\n * `PdfGridBeginPageLayoutEventArgs` class is alternate for begin page layout events.\n */\nvar PdfGridBeginPageLayoutEventArgs = /** @class */ (function (_super) {\n    __extends(PdfGridBeginPageLayoutEventArgs, _super);\n    // Constructors\n    /**\n     * Initialize a new instance of `PdfGridBeginPageLayoutEventArgs` class.\n     * @private\n     */\n    function PdfGridBeginPageLayoutEventArgs(bounds, page, startRow) {\n        var _this = _super.call(this, bounds, page) || this;\n        _this.startRow = startRow;\n        return _this;\n    }\n    Object.defineProperty(PdfGridBeginPageLayoutEventArgs.prototype, \"startRowIndex\", {\n        // Properties\n        /**\n         * Gets the `start row index`.\n         * @private\n         */\n        get: function () {\n            return this.startRow;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return PdfGridBeginPageLayoutEventArgs;\n}(BeginPageLayoutEventArgs));\nexport { PdfGridBeginPageLayoutEventArgs };\n/**\n * `PdfGridEndPageLayoutEventArgs` class is alternate for begin page layout events.\n */\nvar PdfGridEndPageLayoutEventArgs = /** @class */ (function (_super) {\n    __extends(PdfGridEndPageLayoutEventArgs, _super);\n    // Constructors\n    /**\n     * Initialize a new instance of `PdfGridEndPageLayoutEventArgs` class.\n     * @private\n     */\n    function PdfGridEndPageLayoutEventArgs(result) {\n        return _super.call(this, result) || this;\n    }\n    return PdfGridEndPageLayoutEventArgs;\n}(EndPageLayoutEventArgs));\nexport { PdfGridEndPageLayoutEventArgs };\nvar RowLayoutResult = /** @class */ (function () {\n    //Constructors\n    /**\n     * Initializes a new instance of the `RowLayoutResult` class.\n     * @private\n     */\n    function RowLayoutResult() {\n        this.layoutedBounds = new RectangleF(0, 0, 0, 0);\n    }\n    Object.defineProperty(RowLayoutResult.prototype, \"isFinish\", {\n        /**\n         * Gets or sets a value indicating whether this instance `is finish`.\n         * @private\n         */\n        get: function () {\n            return this.bIsFinished;\n        },\n        set: function (value) {\n            this.bIsFinished = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RowLayoutResult.prototype, \"bounds\", {\n        /**\n         * Gets or sets the `bounds`.\n         * @private\n         */\n        get: function () {\n            return this.layoutedBounds;\n        },\n        set: function (value) {\n            this.layoutedBounds = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return RowLayoutResult;\n}());\nexport { RowLayoutResult };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}