{"ast":null,"code":"import { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, closest as getClosest, remove } from '@syncfusion/ej2-base';\nimport { classList } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { RowRenderer } from './row-renderer';\nimport { Cell } from '../models/cell';\nimport { Row } from '../models/row';\nimport * as events from '../base/constant';\nimport { Draggable, Droppable } from '@syncfusion/ej2-base';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { parentsUntil, wrap, measureColumnDepth, appendChildren } from '../base/util';\nimport * as literals from '../base/string-literals'; // eslint-disable-next-line valid-jsdoc\n\n/**\n * Content module is used to render grid content\n *\n * @hidden\n */\n\nvar HeaderRender =\n/** @class */\nfunction () {\n  /**\n   * Constructor for header renderer module\n   *\n   * @param {IGrid} parent - specifies the IGrid\n   * @param {ServiceLocator} serviceLocator - specifies the serviceLocator\n   */\n  function HeaderRender(parent, serviceLocator) {\n    var _this = this;\n\n    this.frzIdx = 0;\n    this.notfrzIdx = 0;\n    this.isFirstCol = false;\n    this.isReplaceDragEle = true; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n    this.helper = function (e) {\n      var gObj = _this.parent;\n      var target = _this.draggable.currentStateTarget;\n      var parentEle = parentsUntil(target, 'e-headercell');\n\n      if (!(gObj.allowReordering || gObj.allowGrouping) || !isNullOrUndefined(parentEle) && parentEle.getElementsByClassName('e-checkselectall').length > 0) {\n        return false;\n      }\n\n      var visualElement = _this.parent.createElement('div', {\n        className: 'e-cloneproperties e-dragclone e-headerclone'\n      });\n\n      var element = target.classList.contains('e-headercell') ? target : parentEle;\n\n      if (!element || !gObj.allowReordering && element.classList.contains('e-stackedheadercell')) {\n        return false;\n      }\n\n      var height = element.offsetHeight;\n      var headercelldiv = element.querySelector('.e-headercelldiv') || element.querySelector('.e-stackedheadercelldiv');\n      var col;\n\n      if (headercelldiv) {\n        if (element.querySelector('.e-stackedheadercelldiv')) {\n          col = gObj.getStackedHeaderColumnByHeaderText(headercelldiv.innerText.trim(), gObj.columns);\n        } else {\n          col = gObj.getColumnByUid(headercelldiv.getAttribute('e-mappinguid'));\n        }\n\n        _this.column = col;\n\n        if (_this.column.lockColumn) {\n          return false;\n        }\n\n        visualElement.setAttribute('e-mappinguid', _this.column.uid);\n      }\n\n      if (col && !isNullOrUndefined(col.headerTemplate)) {\n        if (!isNullOrUndefined(col.headerTemplate)) {\n          var colIndex = gObj.getColumnIndexByField(col.field);\n          var result = col.getHeaderTemplate()(extend({\n            'index': colIndex\n          }, col), gObj, 'headerTemplate');\n          appendChildren(visualElement, result);\n        } else {\n          visualElement.innerHTML = col.headerTemplate;\n        }\n      } else {\n        visualElement.innerHTML = headercelldiv ? col.headerText : element.firstElementChild.innerHTML;\n      }\n\n      visualElement.style.width = element.offsetWidth + 'px';\n      visualElement.style.height = element.offsetHeight + 'px';\n      visualElement.style.lineHeight = (height - 6).toString() + 'px';\n      gObj.element.appendChild(visualElement);\n      return visualElement;\n    };\n\n    this.dragStart = function (e) {\n      var gObj = _this.parent;\n      gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n      gObj.notify(events.columnDragStart, {\n        target: _this.draggable.currentStateTarget,\n        column: _this.column,\n        event: e.event\n      });\n    };\n\n    this.drag = function (e) {\n      var gObj = _this.parent;\n      var target = e.target;\n\n      if (target) {\n        var closest = getClosest(target, '.e-grid');\n\n        var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n\n        if (!closest || closest.getAttribute('id') !== gObj.element.getAttribute('id')) {\n          classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n\n          if (gObj.allowReordering) {\n            gObj.element.querySelector('.e-reorderuparrow').style.display = 'none';\n            gObj.element.querySelector('.e-reorderdownarrow').style.display = 'none';\n          }\n\n          if (!gObj.groupSettings.allowReordering) {\n            return;\n          }\n        }\n\n        gObj.notify(events.columnDrag, {\n          target: e.target,\n          column: _this.column,\n          event: e.event\n        });\n      }\n    };\n\n    this.dragStop = function (e) {\n      var gObj = _this.parent;\n      var cancel;\n      gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n\n      if (!parentsUntil(e.target, 'e-headercell') && !parentsUntil(e.target, 'e-groupdroparea') || !gObj.allowReordering && parentsUntil(e.target, 'e-headercell') || !e.helper.getAttribute('e-mappinguid') && parentsUntil(e.target, 'e-groupdroparea')) {\n        remove(e.helper);\n        cancel = true;\n      }\n\n      gObj.notify(events.columnDragStop, {\n        target: e.target,\n        event: e.event,\n        column: _this.column,\n        cancel: cancel\n      });\n    };\n\n    this.drop = function (e) {\n      var gObj = _this.parent;\n      var uid = e.droppedElement.getAttribute('e-mappinguid');\n      var closest = getClosest(e.target, '.e-grid');\n      remove(e.droppedElement);\n\n      if (closest && closest.getAttribute('id') !== gObj.element.getAttribute('id') || !(gObj.allowReordering || gObj.allowGrouping)) {\n        return;\n      }\n\n      gObj.notify(events.headerDrop, {\n        target: e.target,\n        uid: uid,\n        droppedElement: e.droppedElement\n      });\n    };\n\n    this.parent = parent;\n    this.serviceLocator = serviceLocator;\n    this.ariaService = this.serviceLocator.getService('ariaService');\n    this.widthService = this.serviceLocator.getService('widthService');\n\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    if (!this.parent.enableColumnVirtualization && !this.parent.getFrozenLeftColumnsCount() && !this.parent.getFrozenRightColumnsCount()) {\n      this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n    }\n\n    this.parent.on(events.columnPositionChanged, this.colPosRefresh, this);\n    this.parent.on(events.initialEnd, this.renderCustomToolbar, this);\n\n    if (this.parent.rowRenderingMode === 'Vertical') {\n      this.parent.on(events.uiUpdate, this.updateCustomResponsiveToolbar, this);\n    }\n  }\n  /**\n   * The function is used to render grid header div\n   *\n   * @returns {void}\n   */\n\n\n  HeaderRender.prototype.renderPanel = function () {\n    var div = this.parent.element.querySelector('.' + literals.gridHeader);\n    var isRendered = div != null;\n    div = isRendered ? div : this.parent.createElement('div', {\n      className: 'e-gridheader'\n    });\n    var innerDiv = isRendered ? div.querySelector('.' + literals.headerContent) : this.parent.createElement('div', {\n      className: literals.headerContent\n    });\n    this.toggleStackClass(div);\n    div.appendChild(innerDiv);\n    this.setPanel(div);\n\n    if (!isRendered) {\n      this.parent.element.appendChild(div);\n    }\n  };\n  /**\n   * The function is used to render grid header div\n   *\n   * @returns {void}\n   */\n\n\n  HeaderRender.prototype.renderTable = function () {\n    var headerDiv = this.getPanel();\n    headerDiv.appendChild(this.createHeaderTable());\n    this.setTable(headerDiv.querySelector('.' + literals.table));\n\n    if (!this.parent.getFrozenColumns() && !this.parent.getFrozenRightColumnsCount() && !this.parent.getFrozenLeftColumnsCount()) {\n      this.initializeHeaderDrag();\n      this.initializeHeaderDrop();\n    }\n\n    this.parent.notify(events.headerRefreshed, {\n      rows: this.rows,\n      args: {\n        isFrozen: this.parent.isFrozenGrid()\n      }\n    });\n  };\n  /**\n   * Get the header content div element of grid\n   *\n   * @returns {Element} returns the element\n   */\n\n\n  HeaderRender.prototype.getPanel = function () {\n    return this.headerPanel;\n  };\n  /**\n   * Set the header content div element of grid\n   *\n   * @param  {Element} panel - specifies the panel element\n   * @returns {void}\n   */\n\n\n  HeaderRender.prototype.setPanel = function (panel) {\n    this.headerPanel = panel;\n  };\n  /**\n   * Get the header table element of grid\n   *\n   * @returns {Element} returns the element\n   */\n\n\n  HeaderRender.prototype.getTable = function () {\n    return this.headerTable;\n  };\n  /**\n   * Set the header table element of grid\n   *\n   * @param  {Element} table - specifies the table element\n   * @returns {void}\n   */\n\n\n  HeaderRender.prototype.setTable = function (table) {\n    this.headerTable = table;\n  };\n  /**\n   * Get the header colgroup element\n   *\n   * @returns {Element} returns the element\n   */\n\n\n  HeaderRender.prototype.getColGroup = function () {\n    return this.colgroup;\n  };\n  /**\n   * Set the header colgroup element\n   *\n   * @param {Element} colGroup - specifies the colgroup\n   * @returns {Element} returns the element\n   */\n\n\n  HeaderRender.prototype.setColGroup = function (colGroup) {\n    return this.colgroup = colGroup;\n  };\n  /**\n   * Get the header row element collection.\n   *\n   * @returns {Element[]} returns the element\n   */\n\n\n  HeaderRender.prototype.getRows = function () {\n    var table = this.getTable();\n    return table.tHead.rows;\n  };\n  /**\n   * The function is used to create header table elements\n   *\n   * @returns {Element} returns the element\n   * @hidden\n   */\n\n\n  HeaderRender.prototype.createHeaderTable = function () {\n    var table = this.createTable();\n    var innerDiv = this.getPanel().querySelector('.' + literals.headerContent);\n    innerDiv.appendChild(table);\n    return innerDiv;\n  };\n  /**\n   * The function is used to create header table elements\n   *\n   * @param {Element} tableEle - specifies the table Element\n   * @param {freezeTable} tableName - specifies the table name\n   * @returns {Element} returns the element\n   * @hidden\n   */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  HeaderRender.prototype.createHeader = function (tableEle, tableName) {\n    if (tableEle === void 0) {\n      tableEle = null;\n    }\n\n    var gObj = this.parent;\n    var isFrozen = gObj.isFrozenGrid();\n\n    if (this.getTable() && !isFrozen) {\n      remove(this.getTable());\n    }\n\n    var table = this.parent.createElement('table', {\n      className: literals.table,\n      attrs: {\n        cellspacing: '0.25px',\n        role: 'grid'\n      }\n    });\n    var tblName = tableName ? tableName : gObj.getFrozenLeftCount() ? 'frozen-left' : 'frozen-right';\n    var findHeaderRow = this.createHeaderContent(tblName);\n    var thead = findHeaderRow.thead;\n    var tbody = this.parent.createElement(literals.tbody, {\n      className: this.parent.frozenRows ? '' : 'e-hide'\n    });\n    this.caption = this.parent.createElement('caption', {\n      innerHTML: this.parent.element.id + '_header_table',\n      className: 'e-hide'\n    });\n    var colGroup = this.parent.createElement(literals.colGroup);\n    var rowBody = this.parent.createElement('tr');\n    var bodyCell;\n    var rows = this.rows = findHeaderRow.rows;\n\n    for (var i = 0, len = rows.length; i < len; i++) {\n      for (var j = 0, len_1 = rows[i].cells.length; j < len_1; j++) {\n        bodyCell = this.parent.createElement('td');\n        rowBody.appendChild(bodyCell);\n      }\n    }\n\n    if (gObj.allowFiltering || gObj.allowSorting || gObj.allowGrouping) {\n      table.classList.add('e-sortfilter');\n    }\n\n    this.updateColGroup(colGroup);\n    tbody.appendChild(rowBody);\n    table.appendChild(this.setColGroup(colGroup));\n    table.appendChild(thead);\n    table.appendChild(tbody);\n    table.appendChild(this.caption);\n    this.ariaService.setOptions(table, {\n      colcount: gObj.getColumns().length.toString()\n    });\n    return table;\n  };\n  /**\n   * @param {Element} tableEle - specifies the column\n   * @returns {Element} returns the element\n   * @hidden\n   */\n\n\n  HeaderRender.prototype.createTable = function (tableEle) {\n    if (tableEle === void 0) {\n      tableEle = null;\n    }\n\n    return this.createHeader(tableEle);\n  };\n\n  HeaderRender.prototype.createHeaderContent = function (tableName) {\n    var gObj = this.parent;\n    var index = 1;\n    var frozenMode = gObj.getFrozenMode();\n    var columns = gObj.getColumns();\n    var thead = this.parent.createElement('thead');\n    var colHeader = this.parent.createElement('tr', {\n      className: 'e-columnheader'\n    });\n    var rowRenderer = new RowRenderer(this.serviceLocator, CellType.Header, gObj);\n    rowRenderer.element = colHeader;\n    var rows = [];\n    var headerRow;\n    this.colDepth = measureColumnDepth(gObj.columns);\n\n    for (var i = 0, len = this.colDepth; i < len; i++) {\n      rows[i] = this.generateRow(i);\n      rows[i].cells = [];\n    }\n\n    if (frozenMode !== 'Right') {\n      rows = this.ensureColumns(rows);\n    }\n\n    rows = this.getHeaderCells(rows, tableName);\n\n    if (frozenMode === 'Right') {\n      index = 0;\n      rows = this.ensureColumns(rows);\n    }\n\n    var frzCols = this.parent.getFrozenColumns();\n\n    if (this.parent.isRowDragable() && this.parent.isFrozenGrid() && rows[0].cells[index]) {\n      var colFreezeMode = rows[0].cells[index].column.getFreezeTableName();\n\n      if (colFreezeMode === 'movable' || frozenMode === literals.leftRight && colFreezeMode === literals.frozenRight) {\n        if (frozenMode === 'Right') {\n          rows[0].cells.pop();\n        } else {\n          rows[0].cells.shift();\n        }\n      } else if (!frzCols && colFreezeMode === literals.frozenLeft) {\n        rows[0].cells[0].column.freeze = colFreezeMode === literals.frozenLeft ? 'Left' : 'Right';\n      } else if (frozenMode === 'Right' && colFreezeMode === literals.frozenRight) {\n        rows[0].cells[rows[0].cells.length - 1].column.freeze = 'Right';\n      }\n    }\n\n    for (var i = 0, len = this.colDepth; i < len; i++) {\n      headerRow = rowRenderer.render(rows[i], columns);\n\n      if (this.parent.rowHeight && headerRow.querySelector('.e-headercell')) {\n        headerRow.style.height = this.parent.rowHeight + 'px';\n      }\n\n      thead.appendChild(headerRow);\n    }\n\n    var findHeaderRow = {\n      thead: thead,\n      rows: rows\n    };\n    return findHeaderRow;\n  };\n\n  HeaderRender.prototype.updateColGroup = function (colGroup) {\n    var cols = this.parent.getColumns();\n    var col;\n    var indexes = this.parent.getColumnIndexesInView();\n\n    if (this.parent.enableColumnVirtualization && this.parent.getFrozenColumns() && this.parent.contentModule.isXaxis()) {\n      cols = extend([], this.parent.getColumns());\n      cols.splice(0, this.parent.getFrozenColumns());\n    }\n\n    colGroup.id = this.parent.element.id + literals.colGroup;\n\n    if (this.parent.allowGrouping) {\n      for (var i = 0, len = this.parent.groupSettings.columns.length; i < len; i++) {\n        if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n          continue;\n        }\n\n        col = this.parent.createElement('col', {\n          className: 'e-group-intent'\n        });\n        colGroup.appendChild(col);\n      }\n    }\n\n    if (this.parent.detailTemplate || this.parent.childGrid) {\n      col = this.parent.createElement('col', {\n        className: 'e-detail-intent'\n      });\n      colGroup.appendChild(col);\n    }\n\n    if (this.parent.isRowDragable() && this.parent.getFrozenMode() !== 'Right') {\n      col = this.parent.createElement('col', {\n        className: 'e-drag-intent'\n      });\n      colGroup.appendChild(col);\n    }\n\n    for (var i = 0, len = cols.length; i < len; i++) {\n      col = this.parent.createElement('col');\n\n      if (cols[i].visible === false) {\n        setStyleAttribute(col, {\n          'display': 'none'\n        });\n      }\n\n      colGroup.appendChild(col);\n    }\n\n    if (this.parent.isRowDragable() && this.parent.getFrozenMode() === 'Right') {\n      col = this.parent.createElement('col', {\n        className: 'e-drag-intent'\n      });\n      colGroup.appendChild(col);\n    }\n\n    return colGroup;\n  };\n\n  HeaderRender.prototype.ensureColumns = function (rows) {\n    //TODO: generate dummy column for group, detail, stacked row here; ensureColumns here\n    var gObj = this.parent;\n    var indexes = this.parent.getColumnIndexesInView();\n\n    for (var i = 0, len = rows.length; i < len; i++) {\n      if (gObj.allowGrouping) {\n        for (var c = 0, len_2 = gObj.groupSettings.columns.length; c < len_2; c++) {\n          if (this.parent.enableColumnVirtualization && indexes.indexOf(c) === -1) {\n            continue;\n          }\n\n          rows[i].cells.push(this.generateCell({}, CellType.HeaderIndent));\n        }\n      }\n\n      if (gObj.detailTemplate || gObj.childGrid) {\n        var args = {};\n        this.parent.notify(events.detailIndentCellInfo, args);\n        rows[i].cells.push(this.generateCell(args, CellType.DetailHeader));\n      }\n\n      if (gObj.isRowDragable()) {\n        rows[i].cells.push(this.generateCell({}, CellType.RowDragHIcon));\n      }\n    }\n\n    return rows;\n  };\n\n  HeaderRender.prototype.getHeaderCells = function (rows, tableName) {\n    var thead = this.parent.getHeaderTable() && this.parent.getHeaderTable().querySelector('thead');\n    var cols = this.parent.enableColumnVirtualization ? this.parent.getColumns(this.parent.enablePersistence) : this.parent.columns;\n    this.frzIdx = 0;\n    this.notfrzIdx = 0;\n\n    if (this.parent.lockcolPositionCount) {\n      for (var i = 0; i < cols.length; i++) {\n        this.lockColsRendered = false;\n        rows = this.appendCells(cols[i], rows, 0, i === 0, false, i === cols.length - 1, thead, tableName, false);\n      }\n    }\n\n    for (var i = 0, len = cols.length; i < len; i++) {\n      this.notfrzIdx = 0;\n      this.lockColsRendered = true;\n      rows = this.appendCells(cols[i], rows, 0, i === 0, false, i === len - 1, thead, tableName, false);\n    }\n\n    return rows;\n  };\n\n  HeaderRender.prototype.appendCells = function (cols, rows, index, isFirstObj, isFirstCol, isLastCol, isMovable, tableName, isStackLastCol) {\n    var lastCol = isLastCol ? isStackLastCol ? 'e-laststackcell' : 'e-lastcell' : '';\n    var isFrozen = this.parent.isFrozenGrid();\n    var isLockColumn = !this.parent.lockcolPositionCount || cols.lockColumn && !this.lockColsRendered || !cols.lockColumn && this.lockColsRendered;\n    var isFrozenLockColumn = !this.parent.lockcolPositionCount || cols.lockColumn && !this.lockColsRendered || !cols.lockColumn && this.lockColsRendered;\n    var scrollbar = this.parent.getContent().querySelector('.e-movablescrollbar');\n    var left;\n\n    if (isFrozen && scrollbar && this.parent.enableColumnVirtualization) {\n      left = scrollbar.scrollLeft;\n    }\n\n    if (!cols.columns) {\n      if (left && left > 0 && this.parent.contentModule.isXaxis() && this.parent.inViewIndexes[0] !== 0 && cols.getFreezeTableName() === 'movable') {\n        rows[index].cells.push(this.generateCell(cols, CellType.Header, this.colDepth - index, (isFirstObj ? '' : isFirstCol ? 'e-firstcell' : '') + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n      } else {\n        if (!isFrozen && isLockColumn || isFrozen && cols.getFreezeTableName() === tableName && isFrozenLockColumn) {\n          rows[index].cells.push(this.generateCell(cols, CellType.Header, this.colDepth - index, (isFirstObj ? '' : isFirstCol ? 'e-firstcell' : '') + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n        }\n      }\n\n      if (this.parent.lockcolPositionCount) {\n        if (this.frzIdx + this.notfrzIdx < this.parent.frozenColumns && (cols.lockColumn && !this.lockColsRendered || !cols.lockColumn && this.lockColsRendered)) {\n          this.frzIdx++;\n        } else {\n          this.notfrzIdx++;\n        }\n      } else {\n        this.frzIdx++;\n      }\n    } else {\n      this.isFirstCol = false;\n      var colSpan = this.getCellCnt(cols, 0);\n\n      if (colSpan) {\n        var stackedLockColsCount = this.getStackedLockColsCount(cols, 0);\n        var isStackedLockColumn = this.parent.lockcolPositionCount === 0 || !this.lockColsRendered && stackedLockColsCount !== 0 || this.lockColsRendered && colSpan - stackedLockColsCount !== 0;\n        var isFrozenStack = isFrozen && this.ensureStackedFrozen(cols.columns, tableName, false);\n\n        if (!isFrozen && isStackedLockColumn || isFrozenStack) {\n          rows[index].cells.push(new Cell({\n            cellType: CellType.StackedHeader,\n            column: cols,\n            colSpan: this.getColSpan(colSpan, stackedLockColsCount, cols.columns, tableName, isFrozen),\n            className: isFirstObj ? '' : isFirstCol ? 'e-firstcell' : ''\n          }));\n        }\n      }\n\n      if (this.parent.lockcolPositionCount && !this.lockColsRendered) {\n        for (var i = 0; i < cols.columns.length; i++) {\n          rows = this.appendCells(cols.columns[i], rows, index + 1, isFirstObj, i === 0, i === cols.columns.length - 1 && isLastCol, isMovable, tableName, false);\n        }\n      }\n\n      if (this.lockColsRendered) {\n        for (var i = 0, len = cols.columns.length; i < len; i++) {\n          isFirstObj = isFirstObj && i === 0;\n          var isFirstCol_1 = this.isFirstCol = cols.columns[i].visible && !isFirstObj;\n          var isLaststackedCol = i === len - 1 && isLastCol;\n          rows = this.appendCells(cols.columns[i], rows, index + 1, isFirstObj, isFirstCol_1 && !isLaststackedCol, isLaststackedCol, isMovable, tableName, true);\n        }\n      }\n    }\n\n    return rows;\n  };\n\n  HeaderRender.prototype.ensureStackedFrozen = function (columns, tableName, isTrue) {\n    var length = columns.length;\n\n    for (var i = 0; i < length; i++) {\n      if (columns[i].columns) {\n        isTrue = this.ensureStackedFrozen(columns[i].columns, tableName, isTrue);\n      } else if (columns[i].getFreezeTableName() === tableName) {\n        isTrue = true;\n        break;\n      }\n    }\n\n    return isTrue;\n  };\n\n  HeaderRender.prototype.getStackedLockColsCount = function (col, lockColsCount) {\n    if (col.columns) {\n      for (var i = 0; i < col.columns.length; i++) {\n        lockColsCount = this.getStackedLockColsCount(col.columns[i], lockColsCount);\n      }\n    } else if (col.lockColumn) {\n      lockColsCount++;\n    }\n\n    return lockColsCount;\n  };\n\n  HeaderRender.prototype.getColSpan = function (colSpan, stackedLockColsCount, columns, tableName, isFrozen) {\n    if (isFrozen) {\n      colSpan = this.getFrozenColSpan(columns, tableName, 0);\n    } else if (this.parent.lockcolPositionCount) {\n      colSpan = !this.lockColsRendered ? stackedLockColsCount : colSpan - stackedLockColsCount;\n    }\n\n    return colSpan;\n  };\n\n  HeaderRender.prototype.getFrozenColSpan = function (columns, tableName, count) {\n    var length = columns.length;\n\n    for (var i = 0; i < length; i++) {\n      if (columns[i].columns) {\n        count = this.getFrozenColSpan(columns[i].columns, tableName, count);\n      } else if (columns[i].getFreezeTableName() === tableName && columns[i].visible) {\n        count++;\n      }\n    }\n\n    return count;\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  HeaderRender.prototype.generateRow = function (index) {\n    return new Row({});\n  };\n\n  HeaderRender.prototype.generateCell = function (column, cellType, rowSpan, className, rowIndex, colIndex) {\n    var opt = {\n      'visible': column.visible,\n      'isDataCell': false,\n      'isTemplate': !isNullOrUndefined(column.headerTemplate),\n      'rowID': '',\n      'column': column,\n      'cellType': cellType,\n      'rowSpan': rowSpan,\n      'className': className,\n      'index': rowIndex,\n      'colIndex': colIndex\n    };\n\n    if (!opt.rowSpan || opt.rowSpan < 2) {\n      delete opt.rowSpan;\n    }\n\n    return new Cell(opt);\n  };\n  /**\n   * Function to hide header table column based on visible property\n   *\n   * @param {Column[]} columns - specifies the column\n   * @returns {void}\n   */\n\n\n  HeaderRender.prototype.setVisible = function (columns) {\n    var gObj = this.parent;\n    var displayVal;\n    var idx;\n    var frzCols = gObj.getFrozenColumns();\n\n    for (var c = 0, clen = columns.length; c < clen; c++) {\n      var column = columns[c];\n      idx = gObj.getNormalizedColumnIndex(column.uid);\n      displayVal = column.visible ? '' : 'none';\n\n      if (frzCols) {\n        var normalizedfrzCols = this.parent.isRowDragable() ? frzCols + 1 : frzCols;\n\n        if (idx < normalizedfrzCols) {\n          setStyleAttribute(this.getColGroup().children[idx], {\n            'display': displayVal\n          });\n        } else {\n          var mTblColGrp = gObj.getHeaderContent().querySelector('.' + literals.movableHeader).querySelector(literals.colGroup);\n          setStyleAttribute(mTblColGrp.children[idx - normalizedfrzCols], {\n            'display': displayVal\n          });\n        }\n      } else {\n        setStyleAttribute(this.getColGroup().children[idx], {\n          'display': displayVal\n        });\n      }\n    }\n\n    this.refreshUI();\n  };\n\n  HeaderRender.prototype.colPosRefresh = function () {\n    this.refreshUI();\n  };\n  /**\n   * Refresh the header of the Grid.\n   *\n   * @returns {void}\n   */\n\n\n  HeaderRender.prototype.refreshUI = function () {\n    var frzCols = this.parent.isFrozenGrid();\n    var isVFTable = this.parent.enableColumnVirtualization && frzCols;\n    var headerDiv = this.getPanel();\n    this.toggleStackClass(headerDiv);\n    var table = this.freezeReorder ? this.headerPanel.querySelector('.' + literals.movableHeader).querySelector('.' + literals.table) : this.getTable();\n    var tableName = this.parent.isFrozenGrid() ? this.parent.getFrozenLeftCount() ? 'frozen-left' : 'frozen-right' : undefined;\n\n    if (isVFTable) {\n      table = this.parent.contentModule.getVirtualFreezeHeader();\n      tableName = this.parent.contentModule.isXaxis() ? 'movable' : tableName;\n    }\n\n    if (table) {\n      remove(table);\n      table.removeChild(table.firstChild);\n      table.removeChild(table.childNodes[0]);\n      var colGroup = this.parent.createElement(literals.colGroup);\n      var findHeaderRow = this.createHeaderContent(tableName);\n      this.rows = findHeaderRow.rows;\n      table.insertBefore(findHeaderRow.thead, table.firstChild);\n      this.updateColGroup(colGroup);\n      table.insertBefore(this.setColGroup(colGroup), table.firstChild);\n\n      if (!isVFTable) {\n        this.setTable(table);\n      }\n\n      this.appendContent(table);\n      this.parent.notify(events.colGroupRefresh, {});\n      this.widthService.setWidthToColumns();\n      this.parent.updateDefaultCursor();\n\n      if (!frzCols || this.parent.enableColumnVirtualization && frzCols) {\n        this.initializeHeaderDrag();\n      }\n\n      var rows = [].slice.call(headerDiv.querySelectorAll('tr.e-columnheader'));\n\n      for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n        var row = rows_1[_i];\n        var gCells = [].slice.call(row.getElementsByClassName('e-grouptopleftcell'));\n\n        if (gCells.length) {\n          gCells[gCells.length - 1].classList.add('e-lastgrouptopleftcell');\n        }\n      }\n\n      if (!frzCols) {\n        this.parent.notify(events.headerRefreshed, {\n          rows: this.rows,\n          args: {\n            isFrozen: frzCols\n          }\n        });\n      }\n\n      if (this.parent.enableColumnVirtualization && parentsUntil(table, literals.movableHeader)) {\n        this.parent.notify(events.headerRefreshed, {\n          rows: this.rows,\n          args: {\n            isFrozen: false,\n            isXaxis: true\n          }\n        });\n      }\n\n      if (this.parent.allowTextWrap && this.parent.textWrapSettings.wrapMode === 'Header') {\n        wrap(rows, true);\n      }\n    }\n  };\n\n  HeaderRender.prototype.toggleStackClass = function (div) {\n    var column = this.parent.columns;\n    var stackedHdr = column.some(function (column) {\n      return !isNullOrUndefined(column.columns);\n    });\n\n    if (stackedHdr) {\n      div.classList.add('e-stackedheader');\n    } else {\n      div.classList.remove('e-stackedheader');\n    }\n  };\n\n  HeaderRender.prototype.appendContent = function (table) {\n    this.getPanel().querySelector('.' + literals.headerContent).appendChild(table);\n  };\n\n  HeaderRender.prototype.getCellCnt = function (col, cnt) {\n    if (col.columns) {\n      for (var i = 0, len = col.columns.length; i < len; i++) {\n        cnt = this.getCellCnt(col.columns[i], cnt);\n      }\n    } else {\n      if (col.visible) {\n        cnt++;\n      }\n    }\n\n    return cnt;\n  };\n\n  HeaderRender.prototype.initializeHeaderDrag = function () {\n    var gObj = this.parent;\n\n    if (!(this.parent.allowReordering || this.parent.allowGrouping && this.parent.groupSettings.showDropArea)) {\n      return;\n    }\n\n    this.draggable = new Draggable(gObj.getHeaderContent(), {\n      dragTarget: '.e-headercell',\n      distance: 5,\n      helper: this.helper,\n      dragStart: this.dragStart,\n      drag: this.drag,\n      dragStop: this.dragStop,\n      abort: '.e-rhandler',\n      isReplaceDragEle: this.isReplaceDragEle\n    });\n  };\n\n  HeaderRender.prototype.initializeHeaderDrop = function () {\n    var gObj = this.parent; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n    var drop = new Droppable(gObj.getHeaderContent(), {\n      accept: '.e-dragclone',\n      drop: this.drop\n    });\n  };\n\n  HeaderRender.prototype.renderCustomToolbar = function () {\n    var _this = this;\n\n    var gObj = this.parent;\n\n    if (gObj.rowRenderingMode === 'Vertical' && !gObj.toolbar && (gObj.allowSorting || gObj.allowFiltering && gObj.filterSettings.type !== 'FilterBar')) {\n      var div = gObj.createElement('div', {\n        className: 'e-res-toolbar e-toolbar'\n      });\n      var toolbarItems = gObj.createElement('div', {\n        className: 'e-toolbar-items'\n      });\n      var toolbarLeft = gObj.createElement('div', {\n        className: 'e-toolbar-left'\n      });\n      var count = this.parent.allowFiltering && this.parent.allowSorting ? 2 : 1;\n\n      for (var i = 0; i < count; i++) {\n        var toolbarItem = gObj.createElement('div', {\n          className: 'e-toolbar-item e-gridresponsiveicons e-icons e-tbtn-align'\n        });\n        var cls = count === 1 ? this.parent.allowSorting ? 'sort' : 'filter' : i === 1 ? 'sort' : 'filter';\n        var button = gObj.createElement('button', {\n          className: 'e-tbar-btn e-control e-btn e-lib e-icon-btn'\n        });\n        var span = gObj.createElement('span', {\n          className: 'e-btn-icon e-res' + cls + '-icon e-icons'\n        });\n        button.appendChild(span);\n        var btnObj = new Button({});\n        btnObj.appendTo(button);\n\n        button.onclick = function (e) {\n          if (e.target.classList.contains('e-ressort-btn') || e.target.classList.contains('e-ressort-icon')) {\n            _this.parent.showResponsiveCustomSort();\n          } else {\n            _this.parent.showResponsiveCustomFilter();\n          }\n        };\n\n        toolbarItem.appendChild(button);\n        toolbarLeft.appendChild(toolbarItem);\n      }\n\n      toolbarItems.appendChild(toolbarLeft);\n      div.appendChild(toolbarItems);\n      gObj.element.insertBefore(div, this.parent.element.querySelector('.' + literals.gridHeader));\n    } else {\n      if (gObj.enableAdaptiveUI && !gObj.toolbar) {\n        gObj.getContent().classList.add('e-responsive-header');\n      }\n    }\n  };\n\n  HeaderRender.prototype.updateCustomResponsiveToolbar = function (args) {\n    var resToolbar = this.parent.element.querySelector('.e-responsive-toolbar');\n\n    if (args.module === 'toolbar') {\n      if (resToolbar) {\n        remove(resToolbar);\n      } else {\n        this.renderCustomToolbar();\n      }\n    }\n  };\n\n  return HeaderRender;\n}();\n\nexport { HeaderRender };","map":{"version":3,"names":["isNullOrUndefined","extend","setStyleAttribute","closest","getClosest","remove","classList","CellType","RowRenderer","Cell","Row","events","Draggable","Droppable","Button","parentsUntil","wrap","measureColumnDepth","appendChildren","literals","HeaderRender","parent","serviceLocator","_this","frzIdx","notfrzIdx","isFirstCol","isReplaceDragEle","helper","e","gObj","target","draggable","currentStateTarget","parentEle","allowReordering","allowGrouping","getElementsByClassName","length","visualElement","createElement","className","element","contains","height","offsetHeight","headercelldiv","querySelector","col","getStackedHeaderColumnByHeaderText","innerText","trim","columns","getColumnByUid","getAttribute","column","lockColumn","setAttribute","uid","headerTemplate","colIndex","getColumnIndexByField","field","result","getHeaderTemplate","innerHTML","headerText","firstElementChild","style","width","offsetWidth","lineHeight","toString","appendChild","dragStart","display","notify","columnDragStart","event","drag","cloneElement","groupSettings","columnDrag","dragStop","cancel","columnDragStop","drop","droppedElement","headerDrop","ariaService","getService","widthService","isDestroyed","enableColumnVirtualization","getFrozenLeftColumnsCount","getFrozenRightColumnsCount","on","columnVisibilityChanged","setVisible","columnPositionChanged","colPosRefresh","initialEnd","renderCustomToolbar","rowRenderingMode","uiUpdate","updateCustomResponsiveToolbar","prototype","renderPanel","div","gridHeader","isRendered","innerDiv","headerContent","toggleStackClass","setPanel","renderTable","headerDiv","getPanel","createHeaderTable","setTable","table","getFrozenColumns","initializeHeaderDrag","initializeHeaderDrop","headerRefreshed","rows","args","isFrozen","isFrozenGrid","headerPanel","panel","getTable","headerTable","getColGroup","colgroup","setColGroup","colGroup","getRows","tHead","createTable","createHeader","tableEle","tableName","attrs","cellspacing","role","tblName","getFrozenLeftCount","findHeaderRow","createHeaderContent","thead","tbody","frozenRows","caption","id","rowBody","bodyCell","i","len","j","len_1","cells","allowFiltering","allowSorting","add","updateColGroup","setOptions","colcount","getColumns","index","frozenMode","getFrozenMode","colHeader","rowRenderer","Header","headerRow","colDepth","generateRow","ensureColumns","getHeaderCells","frzCols","isRowDragable","colFreezeMode","getFreezeTableName","leftRight","frozenRight","pop","shift","frozenLeft","freeze","render","rowHeight","cols","indexes","getColumnIndexesInView","contentModule","isXaxis","splice","indexOf","detailTemplate","childGrid","visible","c","len_2","push","generateCell","HeaderIndent","detailIndentCellInfo","DetailHeader","RowDragHIcon","getHeaderTable","enablePersistence","lockcolPositionCount","lockColsRendered","appendCells","isFirstObj","isLastCol","isMovable","isStackLastCol","lastCol","isLockColumn","isFrozenLockColumn","scrollbar","getContent","left","scrollLeft","inViewIndexes","getColumnIndexByUid","frozenColumns","colSpan","getCellCnt","stackedLockColsCount","getStackedLockColsCount","isStackedLockColumn","isFrozenStack","ensureStackedFrozen","cellType","StackedHeader","getColSpan","isFirstCol_1","isLaststackedCol","isTrue","lockColsCount","getFrozenColSpan","count","rowSpan","rowIndex","opt","displayVal","idx","clen","getNormalizedColumnIndex","normalizedfrzCols","children","mTblColGrp","getHeaderContent","movableHeader","refreshUI","isVFTable","freezeReorder","undefined","getVirtualFreezeHeader","removeChild","firstChild","childNodes","insertBefore","appendContent","colGroupRefresh","setWidthToColumns","updateDefaultCursor","slice","call","querySelectorAll","_i","rows_1","row","gCells","allowTextWrap","textWrapSettings","wrapMode","stackedHdr","some","cnt","showDropArea","dragTarget","distance","abort","accept","toolbar","filterSettings","type","toolbarItems","toolbarLeft","toolbarItem","cls","button","span","btnObj","appendTo","onclick","showResponsiveCustomSort","showResponsiveCustomFilter","enableAdaptiveUI","resToolbar","module"],"sources":["C:/Users/shahj/OneDrive/Documents/GitHub/Multifunctional-React-Dashboard/node_modules/@syncfusion/ej2-grids/src/grid/renderer/header-renderer.js"],"sourcesContent":["import { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, closest as getClosest, remove } from '@syncfusion/ej2-base';\nimport { classList } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { RowRenderer } from './row-renderer';\nimport { Cell } from '../models/cell';\nimport { Row } from '../models/row';\nimport * as events from '../base/constant';\nimport { Draggable, Droppable } from '@syncfusion/ej2-base';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { parentsUntil, wrap, measureColumnDepth, appendChildren } from '../base/util';\nimport * as literals from '../base/string-literals';\n// eslint-disable-next-line valid-jsdoc\n/**\n * Content module is used to render grid content\n *\n * @hidden\n */\nvar HeaderRender = /** @class */ (function () {\n    /**\n     * Constructor for header renderer module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @param {ServiceLocator} serviceLocator - specifies the serviceLocator\n     */\n    function HeaderRender(parent, serviceLocator) {\n        var _this = this;\n        this.frzIdx = 0;\n        this.notfrzIdx = 0;\n        this.isFirstCol = false;\n        this.isReplaceDragEle = true;\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        this.helper = function (e) {\n            var gObj = _this.parent;\n            var target = _this.draggable.currentStateTarget;\n            var parentEle = parentsUntil(target, 'e-headercell');\n            if (!(gObj.allowReordering || gObj.allowGrouping) || (!isNullOrUndefined(parentEle)\n                && parentEle.getElementsByClassName('e-checkselectall').length > 0)) {\n                return false;\n            }\n            var visualElement = _this.parent.createElement('div', { className: 'e-cloneproperties e-dragclone e-headerclone' });\n            var element = target.classList.contains('e-headercell') ? target : parentEle;\n            if (!element || (!gObj.allowReordering && element.classList.contains('e-stackedheadercell'))) {\n                return false;\n            }\n            var height = element.offsetHeight;\n            var headercelldiv = element.querySelector('.e-headercelldiv') || element.querySelector('.e-stackedheadercelldiv');\n            var col;\n            if (headercelldiv) {\n                if (element.querySelector('.e-stackedheadercelldiv')) {\n                    col = gObj.getStackedHeaderColumnByHeaderText(headercelldiv.innerText.trim(), gObj.columns);\n                }\n                else {\n                    col = gObj.getColumnByUid(headercelldiv.getAttribute('e-mappinguid'));\n                }\n                _this.column = col;\n                if (_this.column.lockColumn) {\n                    return false;\n                }\n                visualElement.setAttribute('e-mappinguid', _this.column.uid);\n            }\n            if (col && !isNullOrUndefined(col.headerTemplate)) {\n                if (!isNullOrUndefined(col.headerTemplate)) {\n                    var colIndex = gObj.getColumnIndexByField(col.field);\n                    var result = col.getHeaderTemplate()(extend({ 'index': colIndex }, col), gObj, 'headerTemplate');\n                    appendChildren(visualElement, result);\n                }\n                else {\n                    visualElement.innerHTML = col.headerTemplate;\n                }\n            }\n            else {\n                visualElement.innerHTML = headercelldiv ?\n                    col.headerText : element.firstElementChild.innerHTML;\n            }\n            visualElement.style.width = element.offsetWidth + 'px';\n            visualElement.style.height = element.offsetHeight + 'px';\n            visualElement.style.lineHeight = (height - 6).toString() + 'px';\n            gObj.element.appendChild(visualElement);\n            return visualElement;\n        };\n        this.dragStart = function (e) {\n            var gObj = _this.parent;\n            gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n            gObj.notify(events.columnDragStart, { target: _this.draggable.currentStateTarget, column: _this.column, event: e.event });\n        };\n        this.drag = function (e) {\n            var gObj = _this.parent;\n            var target = e.target;\n            if (target) {\n                var closest = getClosest(target, '.e-grid');\n                var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n                if (!closest || closest.getAttribute('id') !== gObj.element.getAttribute('id')) {\n                    classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n                    if (gObj.allowReordering) {\n                        gObj.element.querySelector('.e-reorderuparrow').style.display = 'none';\n                        gObj.element.querySelector('.e-reorderdownarrow').style.display = 'none';\n                    }\n                    if (!gObj.groupSettings.allowReordering) {\n                        return;\n                    }\n                }\n                gObj.notify(events.columnDrag, { target: e.target, column: _this.column, event: e.event });\n            }\n        };\n        this.dragStop = function (e) {\n            var gObj = _this.parent;\n            var cancel;\n            gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n            if ((!parentsUntil(e.target, 'e-headercell') && !parentsUntil(e.target, 'e-groupdroparea')) ||\n                (!gObj.allowReordering && parentsUntil(e.target, 'e-headercell')) ||\n                (!e.helper.getAttribute('e-mappinguid') && parentsUntil(e.target, 'e-groupdroparea'))) {\n                remove(e.helper);\n                cancel = true;\n            }\n            gObj.notify(events.columnDragStop, { target: e.target, event: e.event, column: _this.column, cancel: cancel });\n        };\n        this.drop = function (e) {\n            var gObj = _this.parent;\n            var uid = e.droppedElement.getAttribute('e-mappinguid');\n            var closest = getClosest(e.target, '.e-grid');\n            remove(e.droppedElement);\n            if (closest && closest.getAttribute('id') !== gObj.element.getAttribute('id') ||\n                !(gObj.allowReordering || gObj.allowGrouping)) {\n                return;\n            }\n            gObj.notify(events.headerDrop, { target: e.target, uid: uid, droppedElement: e.droppedElement });\n        };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.ariaService = this.serviceLocator.getService('ariaService');\n        this.widthService = this.serviceLocator.getService('widthService');\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (!this.parent.enableColumnVirtualization\n            && !this.parent.getFrozenLeftColumnsCount() && !this.parent.getFrozenRightColumnsCount()) {\n            this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n        }\n        this.parent.on(events.columnPositionChanged, this.colPosRefresh, this);\n        this.parent.on(events.initialEnd, this.renderCustomToolbar, this);\n        if (this.parent.rowRenderingMode === 'Vertical') {\n            this.parent.on(events.uiUpdate, this.updateCustomResponsiveToolbar, this);\n        }\n    }\n    /**\n     * The function is used to render grid header div\n     *\n     * @returns {void}\n     */\n    HeaderRender.prototype.renderPanel = function () {\n        var div = this.parent.element.querySelector('.' + literals.gridHeader);\n        var isRendered = (div != null);\n        div = isRendered ? div : this.parent.createElement('div', { className: 'e-gridheader' });\n        var innerDiv = isRendered ? div.querySelector('.' + literals.headerContent) :\n            this.parent.createElement('div', { className: literals.headerContent });\n        this.toggleStackClass(div);\n        div.appendChild(innerDiv);\n        this.setPanel(div);\n        if (!isRendered) {\n            this.parent.element.appendChild(div);\n        }\n    };\n    /**\n     * The function is used to render grid header div\n     *\n     * @returns {void}\n     */\n    HeaderRender.prototype.renderTable = function () {\n        var headerDiv = this.getPanel();\n        headerDiv.appendChild(this.createHeaderTable());\n        this.setTable(headerDiv.querySelector('.' + literals.table));\n        if (!this.parent.getFrozenColumns() && !this.parent.getFrozenRightColumnsCount() && !this.parent.getFrozenLeftColumnsCount()) {\n            this.initializeHeaderDrag();\n            this.initializeHeaderDrop();\n        }\n        this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: this.parent.isFrozenGrid() } });\n    };\n    /**\n     * Get the header content div element of grid\n     *\n     * @returns {Element} returns the element\n     */\n    HeaderRender.prototype.getPanel = function () {\n        return this.headerPanel;\n    };\n    /**\n     * Set the header content div element of grid\n     *\n     * @param  {Element} panel - specifies the panel element\n     * @returns {void}\n     */\n    HeaderRender.prototype.setPanel = function (panel) {\n        this.headerPanel = panel;\n    };\n    /**\n     * Get the header table element of grid\n     *\n     * @returns {Element} returns the element\n     */\n    HeaderRender.prototype.getTable = function () {\n        return this.headerTable;\n    };\n    /**\n     * Set the header table element of grid\n     *\n     * @param  {Element} table - specifies the table element\n     * @returns {void}\n     */\n    HeaderRender.prototype.setTable = function (table) {\n        this.headerTable = table;\n    };\n    /**\n     * Get the header colgroup element\n     *\n     * @returns {Element} returns the element\n     */\n    HeaderRender.prototype.getColGroup = function () {\n        return this.colgroup;\n    };\n    /**\n     * Set the header colgroup element\n     *\n     * @param {Element} colGroup - specifies the colgroup\n     * @returns {Element} returns the element\n     */\n    HeaderRender.prototype.setColGroup = function (colGroup) {\n        return this.colgroup = colGroup;\n    };\n    /**\n     * Get the header row element collection.\n     *\n     * @returns {Element[]} returns the element\n     */\n    HeaderRender.prototype.getRows = function () {\n        var table = this.getTable();\n        return table.tHead.rows;\n    };\n    /**\n     * The function is used to create header table elements\n     *\n     * @returns {Element} returns the element\n     * @hidden\n     */\n    HeaderRender.prototype.createHeaderTable = function () {\n        var table = this.createTable();\n        var innerDiv = this.getPanel().querySelector('.' + literals.headerContent);\n        innerDiv.appendChild(table);\n        return innerDiv;\n    };\n    /**\n     * The function is used to create header table elements\n     *\n     * @param {Element} tableEle - specifies the table Element\n     * @param {freezeTable} tableName - specifies the table name\n     * @returns {Element} returns the element\n     * @hidden\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    HeaderRender.prototype.createHeader = function (tableEle, tableName) {\n        if (tableEle === void 0) { tableEle = null; }\n        var gObj = this.parent;\n        var isFrozen = gObj.isFrozenGrid();\n        if (this.getTable() && !isFrozen) {\n            remove(this.getTable());\n        }\n        var table = this.parent.createElement('table', { className: literals.table, attrs: { cellspacing: '0.25px', role: 'grid' } });\n        var tblName = tableName ? tableName : gObj.getFrozenLeftCount() ? 'frozen-left' : 'frozen-right';\n        var findHeaderRow = this.createHeaderContent(tblName);\n        var thead = findHeaderRow.thead;\n        var tbody = this.parent.createElement(literals.tbody, { className: this.parent.frozenRows ? '' : 'e-hide' });\n        this.caption = this.parent.createElement('caption', { innerHTML: this.parent.element.id + '_header_table', className: 'e-hide' });\n        var colGroup = this.parent.createElement(literals.colGroup);\n        var rowBody = this.parent.createElement('tr');\n        var bodyCell;\n        var rows = this.rows = findHeaderRow.rows;\n        for (var i = 0, len = rows.length; i < len; i++) {\n            for (var j = 0, len_1 = rows[i].cells.length; j < len_1; j++) {\n                bodyCell = this.parent.createElement('td');\n                rowBody.appendChild(bodyCell);\n            }\n        }\n        if (gObj.allowFiltering || gObj.allowSorting || gObj.allowGrouping) {\n            table.classList.add('e-sortfilter');\n        }\n        this.updateColGroup(colGroup);\n        tbody.appendChild(rowBody);\n        table.appendChild(this.setColGroup(colGroup));\n        table.appendChild(thead);\n        table.appendChild(tbody);\n        table.appendChild(this.caption);\n        this.ariaService.setOptions(table, { colcount: gObj.getColumns().length.toString() });\n        return table;\n    };\n    /**\n     * @param {Element} tableEle - specifies the column\n     * @returns {Element} returns the element\n     * @hidden\n     */\n    HeaderRender.prototype.createTable = function (tableEle) {\n        if (tableEle === void 0) { tableEle = null; }\n        return this.createHeader(tableEle);\n    };\n    HeaderRender.prototype.createHeaderContent = function (tableName) {\n        var gObj = this.parent;\n        var index = 1;\n        var frozenMode = gObj.getFrozenMode();\n        var columns = gObj.getColumns();\n        var thead = this.parent.createElement('thead');\n        var colHeader = this.parent.createElement('tr', { className: 'e-columnheader' });\n        var rowRenderer = new RowRenderer(this.serviceLocator, CellType.Header, gObj);\n        rowRenderer.element = colHeader;\n        var rows = [];\n        var headerRow;\n        this.colDepth = measureColumnDepth(gObj.columns);\n        for (var i = 0, len = this.colDepth; i < len; i++) {\n            rows[i] = this.generateRow(i);\n            rows[i].cells = [];\n        }\n        if (frozenMode !== 'Right') {\n            rows = this.ensureColumns(rows);\n        }\n        rows = this.getHeaderCells(rows, tableName);\n        if (frozenMode === 'Right') {\n            index = 0;\n            rows = this.ensureColumns(rows);\n        }\n        var frzCols = this.parent.getFrozenColumns();\n        if (this.parent.isRowDragable() && this.parent.isFrozenGrid() && rows[0].cells[index]) {\n            var colFreezeMode = rows[0].cells[index].column.getFreezeTableName();\n            if (colFreezeMode === 'movable' || (frozenMode === literals.leftRight && colFreezeMode === literals.frozenRight)) {\n                if (frozenMode === 'Right') {\n                    rows[0].cells.pop();\n                }\n                else {\n                    rows[0].cells.shift();\n                }\n            }\n            else if (!frzCols && colFreezeMode === literals.frozenLeft) {\n                rows[0].cells[0].column.freeze = colFreezeMode === literals.frozenLeft ? 'Left' : 'Right';\n            }\n            else if (frozenMode === 'Right' && colFreezeMode === literals.frozenRight) {\n                rows[0].cells[rows[0].cells.length - 1].column.freeze = 'Right';\n            }\n        }\n        for (var i = 0, len = this.colDepth; i < len; i++) {\n            headerRow = rowRenderer.render(rows[i], columns);\n            if (this.parent.rowHeight && headerRow.querySelector('.e-headercell')) {\n                headerRow.style.height = this.parent.rowHeight + 'px';\n            }\n            thead.appendChild(headerRow);\n        }\n        var findHeaderRow = {\n            thead: thead,\n            rows: rows\n        };\n        return findHeaderRow;\n    };\n    HeaderRender.prototype.updateColGroup = function (colGroup) {\n        var cols = this.parent.getColumns();\n        var col;\n        var indexes = this.parent.getColumnIndexesInView();\n        if (this.parent.enableColumnVirtualization && this.parent.getFrozenColumns()\n            && this.parent.contentModule.isXaxis()) {\n            cols = extend([], this.parent.getColumns());\n            cols.splice(0, this.parent.getFrozenColumns());\n        }\n        colGroup.id = this.parent.element.id + literals.colGroup;\n        if (this.parent.allowGrouping) {\n            for (var i = 0, len = this.parent.groupSettings.columns.length; i < len; i++) {\n                if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n                    continue;\n                }\n                col = this.parent.createElement('col', { className: 'e-group-intent' });\n                colGroup.appendChild(col);\n            }\n        }\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            col = this.parent.createElement('col', { className: 'e-detail-intent' });\n            colGroup.appendChild(col);\n        }\n        if (this.parent.isRowDragable() && this.parent.getFrozenMode() !== 'Right') {\n            col = this.parent.createElement('col', { className: 'e-drag-intent' });\n            colGroup.appendChild(col);\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            col = this.parent.createElement('col');\n            if (cols[i].visible === false) {\n                setStyleAttribute(col, { 'display': 'none' });\n            }\n            colGroup.appendChild(col);\n        }\n        if (this.parent.isRowDragable() && this.parent.getFrozenMode() === 'Right') {\n            col = this.parent.createElement('col', { className: 'e-drag-intent' });\n            colGroup.appendChild(col);\n        }\n        return colGroup;\n    };\n    HeaderRender.prototype.ensureColumns = function (rows) {\n        //TODO: generate dummy column for group, detail, stacked row here; ensureColumns here\n        var gObj = this.parent;\n        var indexes = this.parent.getColumnIndexesInView();\n        for (var i = 0, len = rows.length; i < len; i++) {\n            if (gObj.allowGrouping) {\n                for (var c = 0, len_2 = gObj.groupSettings.columns.length; c < len_2; c++) {\n                    if (this.parent.enableColumnVirtualization && indexes.indexOf(c) === -1) {\n                        continue;\n                    }\n                    rows[i].cells.push(this.generateCell({}, CellType.HeaderIndent));\n                }\n            }\n            if (gObj.detailTemplate || gObj.childGrid) {\n                var args = {};\n                this.parent.notify(events.detailIndentCellInfo, args);\n                rows[i].cells.push(this.generateCell(args, CellType.DetailHeader));\n            }\n            if (gObj.isRowDragable()) {\n                rows[i].cells.push(this.generateCell({}, CellType.RowDragHIcon));\n            }\n        }\n        return rows;\n    };\n    HeaderRender.prototype.getHeaderCells = function (rows, tableName) {\n        var thead = this.parent.getHeaderTable() && this.parent.getHeaderTable().querySelector('thead');\n        var cols = this.parent.enableColumnVirtualization ?\n            this.parent.getColumns(this.parent.enablePersistence) : this.parent.columns;\n        this.frzIdx = 0;\n        this.notfrzIdx = 0;\n        if (this.parent.lockcolPositionCount) {\n            for (var i = 0; i < cols.length; i++) {\n                this.lockColsRendered = false;\n                rows = this.appendCells(cols[i], rows, 0, i === 0, false, i === (cols.length - 1), thead, tableName, false);\n            }\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            this.notfrzIdx = 0;\n            this.lockColsRendered = true;\n            rows = this.appendCells(cols[i], rows, 0, i === 0, false, i === (len - 1), thead, tableName, false);\n        }\n        return rows;\n    };\n    HeaderRender.prototype.appendCells = function (cols, rows, index, isFirstObj, isFirstCol, isLastCol, isMovable, tableName, isStackLastCol) {\n        var lastCol = isLastCol ? isStackLastCol ? 'e-laststackcell' : 'e-lastcell' : '';\n        var isFrozen = this.parent.isFrozenGrid();\n        var isLockColumn = !this.parent.lockcolPositionCount\n            || (cols.lockColumn && !this.lockColsRendered) || (!cols.lockColumn && this.lockColsRendered);\n        var isFrozenLockColumn = !this.parent.lockcolPositionCount || (cols.lockColumn && !this.lockColsRendered)\n            || (!cols.lockColumn && this.lockColsRendered);\n        var scrollbar = this.parent.getContent().querySelector('.e-movablescrollbar');\n        var left;\n        if (isFrozen && scrollbar && this.parent.enableColumnVirtualization) {\n            left = scrollbar.scrollLeft;\n        }\n        if (!cols.columns) {\n            if (left && left > 0 && this.parent.contentModule.isXaxis()\n                && this.parent.inViewIndexes[0] !== 0 && cols.getFreezeTableName() === 'movable') {\n                rows[index].cells.push(this.generateCell(cols, CellType.Header, this.colDepth - index, (isFirstObj ? '' : (isFirstCol ? 'e-firstcell' : '')) + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n            }\n            else {\n                if ((!isFrozen && isLockColumn) || (isFrozen && cols.getFreezeTableName() === tableName && isFrozenLockColumn)) {\n                    rows[index].cells.push(this.generateCell(cols, CellType.Header, this.colDepth - index, (isFirstObj ? '' : (isFirstCol ? 'e-firstcell' : '')) + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n                }\n            }\n            if (this.parent.lockcolPositionCount) {\n                if ((this.frzIdx + this.notfrzIdx < this.parent.frozenColumns) &&\n                    ((cols.lockColumn && !this.lockColsRendered) || (!cols.lockColumn && this.lockColsRendered))) {\n                    this.frzIdx++;\n                }\n                else {\n                    this.notfrzIdx++;\n                }\n            }\n            else {\n                this.frzIdx++;\n            }\n        }\n        else {\n            this.isFirstCol = false;\n            var colSpan = this.getCellCnt(cols, 0);\n            if (colSpan) {\n                var stackedLockColsCount = this.getStackedLockColsCount(cols, 0);\n                var isStackedLockColumn = this.parent.lockcolPositionCount === 0\n                    || (!this.lockColsRendered && stackedLockColsCount !== 0)\n                    || (this.lockColsRendered && (colSpan - stackedLockColsCount) !== 0);\n                var isFrozenStack = isFrozen && this.ensureStackedFrozen(cols.columns, tableName, false);\n                if ((!isFrozen && isStackedLockColumn) || isFrozenStack) {\n                    rows[index].cells.push(new Cell({\n                        cellType: CellType.StackedHeader, column: cols,\n                        colSpan: this.getColSpan(colSpan, stackedLockColsCount, cols.columns, tableName, isFrozen),\n                        className: isFirstObj ? '' : (isFirstCol ? 'e-firstcell' : '')\n                    }));\n                }\n            }\n            if (this.parent.lockcolPositionCount && !this.lockColsRendered) {\n                for (var i = 0; i < cols.columns.length; i++) {\n                    rows = this.appendCells(cols.columns[i], rows, index + 1, isFirstObj, i === 0, i === (cols.columns.length - 1) && isLastCol, isMovable, tableName, false);\n                }\n            }\n            if (this.lockColsRendered) {\n                for (var i = 0, len = cols.columns.length; i < len; i++) {\n                    isFirstObj = isFirstObj && i === 0;\n                    var isFirstCol_1 = this.isFirstCol = cols.columns[i].visible && !isFirstObj;\n                    var isLaststackedCol = i === (len - 1) && isLastCol;\n                    rows = this.appendCells(cols.columns[i], rows, index + 1, isFirstObj, isFirstCol_1 && !isLaststackedCol, isLaststackedCol, isMovable, tableName, true);\n                }\n            }\n        }\n        return rows;\n    };\n    HeaderRender.prototype.ensureStackedFrozen = function (columns, tableName, isTrue) {\n        var length = columns.length;\n        for (var i = 0; i < length; i++) {\n            if (columns[i].columns) {\n                isTrue = this.ensureStackedFrozen(columns[i].columns, tableName, isTrue);\n            }\n            else if (columns[i].getFreezeTableName() === tableName) {\n                isTrue = true;\n                break;\n            }\n        }\n        return isTrue;\n    };\n    HeaderRender.prototype.getStackedLockColsCount = function (col, lockColsCount) {\n        if (col.columns) {\n            for (var i = 0; i < col.columns.length; i++) {\n                lockColsCount = this.getStackedLockColsCount(col.columns[i], lockColsCount);\n            }\n        }\n        else if (col.lockColumn) {\n            lockColsCount++;\n        }\n        return lockColsCount;\n    };\n    HeaderRender.prototype.getColSpan = function (colSpan, stackedLockColsCount, columns, tableName, isFrozen) {\n        if (isFrozen) {\n            colSpan = this.getFrozenColSpan(columns, tableName, 0);\n        }\n        else if (this.parent.lockcolPositionCount) {\n            colSpan = !this.lockColsRendered ? stackedLockColsCount : colSpan - stackedLockColsCount;\n        }\n        return colSpan;\n    };\n    HeaderRender.prototype.getFrozenColSpan = function (columns, tableName, count) {\n        var length = columns.length;\n        for (var i = 0; i < length; i++) {\n            if (columns[i].columns) {\n                count = this.getFrozenColSpan(columns[i].columns, tableName, count);\n            }\n            else if (columns[i].getFreezeTableName() === tableName && columns[i].visible) {\n                count++;\n            }\n        }\n        return count;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    HeaderRender.prototype.generateRow = function (index) {\n        return new Row({});\n    };\n    HeaderRender.prototype.generateCell = function (column, cellType, rowSpan, className, rowIndex, colIndex) {\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': false,\n            'isTemplate': !isNullOrUndefined(column.headerTemplate),\n            'rowID': '',\n            'column': column,\n            'cellType': cellType,\n            'rowSpan': rowSpan,\n            'className': className,\n            'index': rowIndex,\n            'colIndex': colIndex\n        };\n        if (!opt.rowSpan || opt.rowSpan < 2) {\n            delete opt.rowSpan;\n        }\n        return new Cell(opt);\n    };\n    /**\n     * Function to hide header table column based on visible property\n     *\n     * @param {Column[]} columns - specifies the column\n     * @returns {void}\n     */\n    HeaderRender.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var displayVal;\n        var idx;\n        var frzCols = gObj.getFrozenColumns();\n        for (var c = 0, clen = columns.length; c < clen; c++) {\n            var column = columns[c];\n            idx = gObj.getNormalizedColumnIndex(column.uid);\n            displayVal = column.visible ? '' : 'none';\n            if (frzCols) {\n                var normalizedfrzCols = this.parent.isRowDragable() ? frzCols + 1 : frzCols;\n                if (idx < normalizedfrzCols) {\n                    setStyleAttribute(this.getColGroup().children[idx], { 'display': displayVal });\n                }\n                else {\n                    var mTblColGrp = gObj.getHeaderContent().querySelector('.' + literals.movableHeader).querySelector(literals.colGroup);\n                    setStyleAttribute(mTblColGrp.children[idx - normalizedfrzCols], { 'display': displayVal });\n                }\n            }\n            else {\n                setStyleAttribute(this.getColGroup().children[idx], { 'display': displayVal });\n            }\n        }\n        this.refreshUI();\n    };\n    HeaderRender.prototype.colPosRefresh = function () {\n        this.refreshUI();\n    };\n    /**\n     * Refresh the header of the Grid.\n     *\n     * @returns {void}\n     */\n    HeaderRender.prototype.refreshUI = function () {\n        var frzCols = this.parent.isFrozenGrid();\n        var isVFTable = this.parent.enableColumnVirtualization && frzCols;\n        var headerDiv = this.getPanel();\n        this.toggleStackClass(headerDiv);\n        var table = this.freezeReorder ? this.headerPanel.querySelector('.' + literals.movableHeader).querySelector('.' + literals.table)\n            : this.getTable();\n        var tableName = this.parent.isFrozenGrid() ? this.parent.getFrozenLeftCount() ? 'frozen-left'\n            : 'frozen-right' : undefined;\n        if (isVFTable) {\n            table = this.parent.contentModule.getVirtualFreezeHeader();\n            tableName = this.parent.contentModule.isXaxis() ? 'movable' : tableName;\n        }\n        if (table) {\n            remove(table);\n            table.removeChild(table.firstChild);\n            table.removeChild(table.childNodes[0]);\n            var colGroup = this.parent.createElement(literals.colGroup);\n            var findHeaderRow = this.createHeaderContent(tableName);\n            this.rows = findHeaderRow.rows;\n            table.insertBefore(findHeaderRow.thead, table.firstChild);\n            this.updateColGroup(colGroup);\n            table.insertBefore(this.setColGroup(colGroup), table.firstChild);\n            if (!isVFTable) {\n                this.setTable(table);\n            }\n            this.appendContent(table);\n            this.parent.notify(events.colGroupRefresh, {});\n            this.widthService.setWidthToColumns();\n            this.parent.updateDefaultCursor();\n            if (!frzCols || (this.parent.enableColumnVirtualization && frzCols)) {\n                this.initializeHeaderDrag();\n            }\n            var rows = [].slice.call(headerDiv.querySelectorAll('tr.e-columnheader'));\n            for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n                var row = rows_1[_i];\n                var gCells = [].slice.call(row.getElementsByClassName('e-grouptopleftcell'));\n                if (gCells.length) {\n                    gCells[gCells.length - 1].classList.add('e-lastgrouptopleftcell');\n                }\n            }\n            if (!frzCols) {\n                this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: frzCols } });\n            }\n            if (this.parent.enableColumnVirtualization && parentsUntil(table, literals.movableHeader)) {\n                this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: false, isXaxis: true } });\n            }\n            if (this.parent.allowTextWrap && this.parent.textWrapSettings.wrapMode === 'Header') {\n                wrap(rows, true);\n            }\n        }\n    };\n    HeaderRender.prototype.toggleStackClass = function (div) {\n        var column = this.parent.columns;\n        var stackedHdr = column.some(function (column) { return !isNullOrUndefined(column.columns); });\n        if (stackedHdr) {\n            div.classList.add('e-stackedheader');\n        }\n        else {\n            div.classList.remove('e-stackedheader');\n        }\n    };\n    HeaderRender.prototype.appendContent = function (table) {\n        this.getPanel().querySelector('.' + literals.headerContent).appendChild(table);\n    };\n    HeaderRender.prototype.getCellCnt = function (col, cnt) {\n        if (col.columns) {\n            for (var i = 0, len = col.columns.length; i < len; i++) {\n                cnt = this.getCellCnt(col.columns[i], cnt);\n            }\n        }\n        else {\n            if (col.visible) {\n                cnt++;\n            }\n        }\n        return cnt;\n    };\n    HeaderRender.prototype.initializeHeaderDrag = function () {\n        var gObj = this.parent;\n        if (!(this.parent.allowReordering || (this.parent.allowGrouping && this.parent.groupSettings.showDropArea))) {\n            return;\n        }\n        this.draggable = new Draggable(gObj.getHeaderContent(), {\n            dragTarget: '.e-headercell',\n            distance: 5,\n            helper: this.helper,\n            dragStart: this.dragStart,\n            drag: this.drag,\n            dragStop: this.dragStop,\n            abort: '.e-rhandler',\n            isReplaceDragEle: this.isReplaceDragEle\n        });\n    };\n    HeaderRender.prototype.initializeHeaderDrop = function () {\n        var gObj = this.parent;\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        var drop = new Droppable(gObj.getHeaderContent(), {\n            accept: '.e-dragclone',\n            drop: this.drop\n        });\n    };\n    HeaderRender.prototype.renderCustomToolbar = function () {\n        var _this = this;\n        var gObj = this.parent;\n        if (gObj.rowRenderingMode === 'Vertical' && !gObj.toolbar\n            && (gObj.allowSorting || (gObj.allowFiltering && gObj.filterSettings.type !== 'FilterBar'))) {\n            var div = gObj.createElement('div', { className: 'e-res-toolbar e-toolbar' });\n            var toolbarItems = gObj.createElement('div', { className: 'e-toolbar-items' });\n            var toolbarLeft = gObj.createElement('div', { className: 'e-toolbar-left' });\n            var count = this.parent.allowFiltering && this.parent.allowSorting ? 2 : 1;\n            for (var i = 0; i < count; i++) {\n                var toolbarItem = gObj.createElement('div', { className: 'e-toolbar-item e-gridresponsiveicons e-icons e-tbtn-align' });\n                var cls = count === 1 ? this.parent.allowSorting ? 'sort'\n                    : 'filter' : i === 1 ? 'sort' : 'filter';\n                var button = gObj.createElement('button', { className: 'e-tbar-btn e-control e-btn e-lib e-icon-btn' });\n                var span = gObj.createElement('span', { className: 'e-btn-icon e-res' + cls + '-icon e-icons' });\n                button.appendChild(span);\n                var btnObj = new Button({});\n                btnObj.appendTo(button);\n                button.onclick = function (e) {\n                    if (e.target.classList.contains('e-ressort-btn')\n                        || e.target.classList.contains('e-ressort-icon')) {\n                        _this.parent.showResponsiveCustomSort();\n                    }\n                    else {\n                        _this.parent.showResponsiveCustomFilter();\n                    }\n                };\n                toolbarItem.appendChild(button);\n                toolbarLeft.appendChild(toolbarItem);\n            }\n            toolbarItems.appendChild(toolbarLeft);\n            div.appendChild(toolbarItems);\n            gObj.element.insertBefore(div, this.parent.element.querySelector('.' + literals.gridHeader));\n        }\n        else {\n            if (gObj.enableAdaptiveUI && !gObj.toolbar) {\n                gObj.getContent().classList.add('e-responsive-header');\n            }\n        }\n    };\n    HeaderRender.prototype.updateCustomResponsiveToolbar = function (args) {\n        var resToolbar = this.parent.element.querySelector('.e-responsive-toolbar');\n        if (args.module === 'toolbar') {\n            if (resToolbar) {\n                remove(resToolbar);\n            }\n            else {\n                this.renderCustomToolbar();\n            }\n        }\n    };\n    return HeaderRender;\n}());\nexport { HeaderRender };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}