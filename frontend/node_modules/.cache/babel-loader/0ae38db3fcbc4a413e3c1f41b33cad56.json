{"ast":null,"code":"import { Grid, Resize, ContextMenu, Sort, VirtualScroll } from '@syncfusion/ej2-grids';\nimport { select, KeyboardEvents, EventHandler, getValue, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined as isNOU, Touch, setValue, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { Internationalization, closest, Draggable } from '@syncfusion/ej2-base';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nimport * as events from '../base/constant';\nimport * as CLS from '../base/classes';\nimport { createDialog, createImageDialog } from '../pop-up/dialog';\nimport { removeBlur, openAction, getImageUrl, fileType, getSortedData, getLocaleText, updateLayout } from '../common/utility';\nimport { createEmptyElement } from '../common/utility';\nimport { read, Download, GetDetails, Delete } from '../common/operations';\nimport { cutFiles, addBlur, openSearchFolder, copyFiles, removeActive, pasteHandler, getPathObject, getName } from '../common/index';\nimport { hasReadAccess, hasEditAccess, hasDownloadAccess, doRename, getAccessClass, createDeniedDialog, rename } from '../common/index';\nimport { createVirtualDragElement, dragStopHandler, dragStartHandler, draggingHandler, getModule, getFullPath } from '../common/index';\nimport { getDirectoryPath, updateRenamingData, getItemName, doDeleteFiles, doDownloadFiles } from '../common/index';\n/**\n * DetailsView module\n */\n\nvar DetailsView =\n/** @class */\nfunction () {\n  /**\n   * Constructor for the GridView module\n   *\n   * @param {FileManager} parent - specifies the parent.\n   * @hidden\n   */\n  function DetailsView(parent) {\n    this.isInteracted = true;\n    this.interaction = true;\n    this.isPasteOperation = false;\n    this.isColumnRefresh = false;\n    this.dragObj = null;\n    this.startIndex = null;\n    this.firstItemIndex = null;\n    this.isSelectionUpdate = false;\n    this.currentSelectedItem = [];\n    this.count = 0;\n    this.isRendered = true;\n    this.isLoaded = false;\n    this.isNameWidth = false;\n    this.pasteOperation = false;\n    this.uploadOperation = false;\n    Grid.Inject(Resize, ContextMenu, Sort, VirtualScroll);\n    this.parent = parent;\n    this.element = select('#' + this.parent.element.id + CLS.GRID_ID, this.parent.element);\n    this.addEventListener();\n    this.keyConfigs = {\n      altEnter: 'alt+enter',\n      esc: 'escape',\n      tab: 'tab',\n      moveDown: 'downarrow',\n      ctrlEnd: 'ctrl+end',\n      ctrlHome: 'ctrl+home',\n      ctrlDown: 'ctrl+downarrow',\n      ctrlLeft: 'ctrl+leftarrow',\n      ctrlRight: 'ctrl+rightarrow',\n      shiftEnd: 'shift+end',\n      shiftHome: 'shift+home',\n      shiftDown: 'shift+downarrow',\n      shiftUp: 'shift+uparrow',\n      ctrlUp: 'ctrl+uparrow',\n      csEnd: 'ctrl+shift+end',\n      csHome: 'ctrl+shift+home',\n      csDown: 'ctrl+shift+downarrow',\n      csUp: 'ctrl+shift+uparrow',\n      space: 'space',\n      ctrlSpace: 'ctrl+space',\n      shiftSpace: 'shift+space',\n      csSpace: 'ctrl+shift+space',\n      end: 'end',\n      home: 'home',\n      moveUp: 'uparrow',\n      del: 'delete',\n      ctrlX: 'ctrl+x',\n      ctrlC: 'ctrl+c',\n      ctrlV: 'ctrl+v',\n      ctrlShiftN: 'ctrl+shift+n',\n      shiftdel: 'shift+delete',\n      ctrlD: 'ctrl+d',\n      f2: 'f2',\n      ctrlA: 'ctrl+a',\n      enter: 'enter'\n    };\n  }\n  /* istanbul ignore next */\n\n\n  DetailsView.prototype.render = function (args) {\n    showSpinner(this.parent.element);\n\n    if (this.parent.view === 'Details') {\n      removeClass([this.parent.element], CLS.MULTI_SELECT); // eslint-disable-next-line\n\n      var items = getSortedData(this.parent, args.files);\n      this.checkNameWidth();\n      var columns = this.getColumns();\n      var sortSettings = void 0;\n\n      if (this.parent.isMobile) {\n        sortSettings = [];\n      } else {\n        if (this.parent.sortOrder !== 'None') {\n          sortSettings = [{\n            direction: this.parent.sortOrder,\n            field: this.parent.sortBy\n          }];\n        }\n      }\n\n      this.gridObj = new Grid({\n        dataSource: items,\n        allowSorting: true,\n        rowSelecting: this.onSelection.bind(this, 'select'),\n        rowDeselecting: this.onSelection.bind(this, 'unselect'),\n        rowSelected: this.onSelected.bind(this),\n        rowDeselected: this.onDeSelection.bind(this),\n        allowResizing: this.parent.detailsViewSettings.columnResizing,\n        selectionSettings: {\n          type: this.parent.allowMultiSelection ? 'Multiple' : 'Single',\n          checkboxMode: 'ResetOnRowClick'\n        },\n        enableRtl: this.parent.enableRtl,\n        pageSettings: {\n          pageSize: 20\n        },\n        sortSettings: {\n          allowUnsort: false,\n          columns: sortSettings\n        },\n        columns: columns,\n        recordDoubleClick: this.DblClickEvents.bind(this),\n        beforeDataBound: this.onBeforeDataBound.bind(this),\n        dataBound: this.onDataBound.bind(this),\n        rowDataBound: this.onRowDataBound.bind(this),\n        actionBegin: this.onActionBegin.bind(this),\n        headerCellInfo: this.onHeaderCellInfo.bind(this),\n        width: '100%',\n        beforeCopy: function (args) {\n          args.cancel = true;\n        },\n        // eslint-disable-next-line\n        load: function (args) {\n          this.focusModule.destroy();\n        },\n        locale: this.parent.locale\n      });\n      this.gridObj.isStringTemplate = true;\n      this.gridObj.appendTo('#' + this.parent.element.id + CLS.GRID_ID);\n      this.wireEvents();\n      this.adjustHeight();\n      this.emptyArgs = args;\n    }\n  };\n\n  DetailsView.prototype.checkNameWidth = function () {\n    var initialColumn = this.parent.detailsViewSettings.columns;\n    this.isNameWidth = false;\n\n    for (var i = 0; i < initialColumn.length; i++) {\n      if (initialColumn[i].field === 'name') {\n        this.isNameWidth = !isNOU(initialColumn[i].width);\n        return;\n      }\n    }\n  };\n\n  DetailsView.prototype.adjustWidth = function (columns, fieldName) {\n    if (this.isNameWidth && fieldName === 'name') {\n      return;\n    }\n\n    for (var i = 0; i < columns.length; i++) {\n      if (columns[i].field === fieldName) {\n        var nameWidth = void 0;\n\n        if (this.parent.breadcrumbbarModule.searchObj.element.value === '' && !this.parent.isFiltered) {\n          nameWidth = this.element.clientWidth <= 500 ? '120px' : 'auto';\n        } else {\n          nameWidth = this.element.clientWidth <= 680 ? fieldName === 'name' ? '120px' : '180px' : 'auto';\n        }\n\n        columns[i].width = nameWidth;\n      }\n    }\n  };\n\n  DetailsView.prototype.getColumns = function () {\n    var columns;\n\n    if (this.parent.isMobile) {\n      columns = [{\n        field: 'name',\n        headerText: getLocaleText(this.parent, 'Name'),\n        width: 'auto',\n        minWidth: 120,\n        headerTextAlign: 'Left',\n        template: '<div class=\"e-fe-text\">${name}</div><div class=\"e-fe-date\">${_fm_modified}</div>' + '<span class=\"e-fe-size\">${size}</span>'\n      }];\n    } else {\n      columns = JSON.parse(JSON.stringify(this.parent.detailsViewSettings.columns));\n      this.adjustWidth(columns, 'name');\n\n      for (var i = 0, len = columns.length; i < len; i++) {\n        columns[i].headerText = getLocaleText(this.parent, columns[i].headerText);\n      }\n    }\n\n    var iWidth = this.parent.isMobile || this.parent.isBigger ? '54' : '46';\n    var icon = {\n      field: 'type',\n      width: iWidth,\n      minWidth: iWidth,\n      template: '<span class=\"e-fe-icon ${_fm_iconClass}\"></span>',\n      allowResizing: false,\n      allowSorting: true,\n      customAttributes: {\n        class: 'e-fe-grid-icon'\n      },\n      headerTemplate: '<span class=\"e-fe-icon e-fe-folder\"></span>'\n    };\n    columns.unshift(icon);\n\n    if (this.parent.allowMultiSelection) {\n      var cWidth = this.parent.isBigger ? '36' : '26';\n      var cBox = {\n        type: 'checkbox',\n        width: cWidth,\n        minWidth: cWidth,\n        customAttributes: {\n          class: 'e-fe-checkbox'\n        },\n        allowResizing: false,\n        allowSorting: false\n      };\n\n      if (this.parent.isMobile) {\n        columns.push(cBox);\n      } else {\n        columns.unshift(cBox);\n      }\n    }\n\n    for (var i = 0, len = columns.length; i < len; i++) {\n      columns[i].disableHtmlEncode = !this.parent.enableHtmlSanitizer;\n    }\n\n    return columns;\n  };\n\n  DetailsView.prototype.adjustHeight = function () {\n    if (!this.gridObj) {\n      return;\n    }\n\n    var pane = select('#' + this.parent.element.id + CLS.CONTENT_ID, this.parent.element);\n    var bar = select('#' + this.parent.element.id + CLS.BREADCRUMBBAR_ID, this.parent.element);\n    var gridHeader = select('.' + CLS.GRID_HEADER, this.parent.element);\n    var height = pane.offsetHeight - bar.offsetHeight - gridHeader.offsetHeight;\n    this.gridObj.height = height;\n    this.gridObj.dataBind();\n  };\n\n  DetailsView.prototype.renderCheckBox = function () {\n    this.gridObj.columns = this.getColumns();\n    this.isColumnRefresh = true;\n    this.gridObj.refreshColumns();\n  };\n\n  DetailsView.prototype.onRowDataBound = function (args) {\n    var td = select('.e-fe-grid-name', args.row);\n\n    if (!td) {\n      var columns = this.parent.detailsViewSettings.columns;\n\n      for (var i = 0; i < columns.length; i++) {\n        if (columns[i].field === 'name') {\n          td = args.row.children[this.parent.allowMultiSelection ? i + 2 : i + 1];\n          break;\n        }\n      }\n    }\n\n    if (td) {\n      td.setAttribute('title', getValue('name', args.data));\n    }\n\n    if (this.parent.isLayoutChange && this.parent.isCut && this.parent.fileAction === 'move' && this.parent.selectedNodes && this.parent.selectedNodes.length !== 0) {\n      if (this.parent.selectedNodes.indexOf(getValue('name', args.data)) !== -1) {\n        addBlur(args.row);\n      }\n    }\n\n    if (!this.parent.showFileExtension && getValue('isFile', args.data)) {\n      var textEle = args.row.querySelector('.e-fe-text');\n\n      if (textEle) {\n        var name_1 = getValue('name', args.data);\n        var type = getValue('type', args.data);\n        textEle.innerHTML = name_1.substr(0, name_1.length - type.length);\n      }\n    }\n\n    if (getValue('size', args.data) !== undefined && args.row.querySelector('.e-fe-size')) {\n      var sizeEle = args.row.querySelector('.e-fe-size');\n      var modifiedSize = void 0;\n\n      if (!getValue('isFile', args.data)) {\n        modifiedSize = '';\n      } else {\n        var sizeValue = getValue('size', args.data);\n        var intl = new Internationalization(this.parent.locale);\n        var value = intl.formatNumber(sizeValue / 1024, {\n          format: 'n'\n        });\n        modifiedSize = value + ' ' + getLocaleText(this.parent, 'KB');\n      }\n\n      sizeEle.innerHTML = modifiedSize;\n    }\n\n    if (this.parent.isMobile) {\n      if (getValue('_fm_modified', args.data) !== undefined && args.row.querySelector('.e-fe-date')) {\n        var dateEle = args.row.querySelector('.e-fe-date');\n        var intl = new Internationalization(this.parent.locale);\n        var columns = this.parent.detailsViewSettings.columns; // eslint-disable-next-line\n\n        var format = void 0;\n\n        for (var i = 0; i < columns.length; i++) {\n          if (columns[i].field === 'dateModified') {\n            format = columns[i].format;\n            break;\n          }\n        }\n\n        var formattedString = intl.formatDate(new Date(getValue('_fm_modified', args.data)), format);\n        dateEle.innerHTML = formattedString;\n      }\n    }\n\n    var checkWrap = args.row.querySelector('.' + CLS.CB_WRAP);\n\n    if (checkWrap) {\n      checkWrap.classList.add('e-small');\n    }\n\n    if (!hasEditAccess(args.data)) {\n      args.row.className += ' ' + getAccessClass(args.data);\n    }\n\n    var eventArgs = {\n      element: args.row,\n      fileDetails: args.data,\n      module: 'DetailsView'\n    };\n    this.parent.trigger('fileLoad', eventArgs);\n  };\n\n  DetailsView.prototype.onActionBegin = function (args) {\n    if (args.requestType === 'sorting') {\n      this.parent.setProperties({\n        sortOrder: args.direction\n      }, true);\n      this.parent.setProperties({\n        sortBy: args.columnName\n      }, true);\n\n      if (this.parent.selectedItems.length !== 0) {\n        this.sortItem = true;\n        var rows = this.gridObj.getSelectedRowIndexes();\n        var len = rows.length;\n        this.sortSelectedNodes = [];\n\n        while (len > 0) {\n          // eslint-disable-next-line\n          var data = this.gridObj.getRowsObject()[rows[len - 1]].data;\n          this.sortSelectedNodes.push(getValue(this.parent.hasId ? 'id' : 'name', data));\n          len--;\n        }\n      }\n\n      this.parent.notify(events.sortByChange, {});\n    }\n  };\n\n  DetailsView.prototype.onHeaderCellInfo = function (args) {\n    var checkWrap = args.node.querySelector('.' + CLS.CB_WRAP);\n\n    if (checkWrap) {\n      checkWrap.classList.add('e-small');\n    }\n  };\n\n  DetailsView.prototype.onBeforeDataBound = function (args) {\n    showSpinner(this.parent.element); // eslint-disable-next-line\n\n    var items = getSortedData(this.parent, this.gridObj.dataSource);\n    args.result = items;\n  };\n  /* istanbul ignore next */\n\n\n  DetailsView.prototype.onDataBound = function () {\n    this.createDragObj();\n\n    if (this.parent.selectedItems.length !== 0) {\n      this.selectRecords(this.parent.selectedItems);\n    }\n\n    if (this.isPasteOperation === true) {\n      if (!this.isColumnRefresh) {\n        this.selectRecords(this.parent.pasteNodes);\n        this.isPasteOperation = false;\n      } else {\n        this.isColumnRefresh = false;\n      }\n    }\n\n    if (this.parent.createdItem) {\n      this.selectRecords([getValue(this.parent.hasId ? 'id' : 'name', this.parent.createdItem)]);\n      this.parent.createdItem = null;\n    }\n\n    if (this.parent.layoutSelectedItems.length) {\n      this.selectRecords(this.parent.layoutSelectedItems);\n    }\n\n    if (this.parent.renamedItem) {\n      this.addSelection(this.parent.renamedItem);\n      this.parent.renamedItem = null;\n    }\n\n    if (this.sortItem === true) {\n      this.selectRecords(this.sortSelectedNodes);\n      this.sortItem = false;\n    }\n\n    if (this.isSelectionUpdate) {\n      if (!this.isColumnRefresh) {\n        this.selectRecords(this.currentSelectedItem);\n        this.isSelectionUpdate = false;\n      } else {\n        this.isColumnRefresh = false;\n      }\n    }\n\n    if (this.uploadOperation === true) {\n      this.count++;\n      this.selectRecords(this.parent.uploadItem);\n\n      if (this.count === this.parent.uploadItem.length) {\n        this.uploadOperation = false;\n        this.parent.uploadItem = [];\n      }\n    }\n\n    if (this.gridObj.currentViewData.length * this.gridObj.getRowHeight() < this.gridObj.height) {\n      var hdTable = this.gridObj.getHeaderContent();\n      hdTable.style.paddingRight = '';\n      hdTable.style.paddingLeft = '';\n      var hdContent = select('.e-headercontent', hdTable);\n      hdContent.style.borderRightWidth = '0';\n      var cnTable = this.gridObj.getContent().querySelector('.e-content');\n      cnTable.style.overflowY = '';\n      cnTable.classList.add('e-scrollShow');\n    } else {\n      var hdTable = this.gridObj.getHeaderContent();\n\n      if (!this.parent.enableRtl) {\n        hdTable.style.paddingRight = '16px';\n      } else {\n        hdTable.style.paddingLeft = '16px';\n      }\n\n      var cnTable = this.gridObj.getContent().querySelector('.e-content');\n      cnTable.classList.remove('e-scrollShow');\n    }\n\n    this.isRendered = true;\n    this.parent.isLayoutChange = false;\n    hideSpinner(this.parent.element);\n    this.checkEmptyDiv(this.emptyArgs);\n    this.isInteracted = this.isLoaded ? true : this.isInteracted;\n    this.isLoaded = false;\n  };\n\n  DetailsView.prototype.selectRecords = function (nodes) {\n    // eslint-disable-next-line\n    var gridRecords = this.gridObj.getCurrentViewRecords();\n    var sRecords = [];\n\n    for (var i = 0, len = gridRecords.length; i < len; i++) {\n      var node = this.parent.hasId ? getValue('id', gridRecords[i]) : getName(this.parent, gridRecords[i]);\n\n      if (nodes.indexOf(node) !== -1) {\n        sRecords.push(i);\n      }\n    }\n\n    if (sRecords.length !== 0) {\n      this.gridObj.selectRows(sRecords);\n      this.addFocus(this.gridObj.selectedRowIndex);\n    }\n  }; // eslint-disable-next-line\n\n\n  DetailsView.prototype.addSelection = function (data) {\n    // eslint-disable-next-line\n    var items = this.gridObj.getCurrentViewRecords(); // eslint-disable-next-line\n\n    var rData = [];\n\n    if (this.parent.hasId) {\n      rData = new DataManager(items).executeLocal(new Query().where('id', 'equal', this.parent.renamedId, false));\n    } else {\n      // eslint-disable-next-line\n      var nData = new DataManager(items).executeLocal(new Query().where('name', 'equal', getValue('name', data), false));\n\n      if (nData.length > 0) {\n        rData = new DataManager(nData).executeLocal(new Query().where('filterPath', 'equal', this.parent.filterPath, false));\n      }\n    }\n\n    if (rData.length > 0) {\n      var index = items.indexOf(rData[0]);\n      this.gridObj.selectRows([index]);\n    }\n  };\n\n  DetailsView.prototype.onSortColumn = function () {\n    if (this.parent.sortOrder !== 'None') {\n      this.gridObj.sortModule.sortColumn(this.parent.sortBy, this.parent.sortOrder);\n    } else {\n      // eslint-disable-next-line\n      this.gridObj.dataSource = getSortedData(this.parent, this.gridObj.dataSource);\n    }\n  };\n\n  DetailsView.prototype.onPropertyChanged = function (e) {\n    if (e.module !== this.getModuleName() && e.module !== 'common') {\n      /* istanbul ignore next */\n      return;\n    }\n\n    for (var _i = 0, _a = Object.keys(e.newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'allowDragAndDrop':\n          this.createDragObj();\n          break;\n\n        case 'height':\n          this.adjustHeight();\n          break;\n\n        case 'detailsViewSettings':\n          if (!isNullOrUndefined(this.gridObj)) {\n            this.checkNameWidth();\n            var columns = this.getColumns();\n            this.gridObj.columns = columns;\n            this.gridObj.allowResizing = this.parent.detailsViewSettings.columnResizing;\n            this.gridObj.dataBind();\n            this.gridObj.refreshColumns();\n          }\n\n          break;\n\n        case 'selectedItems':\n          this.interaction = false;\n\n          if (this.parent.selectedItems.length !== 0) {\n            if (!this.parent.allowMultiSelection) {\n              var slItems = this.parent.selectedItems.slice(this.parent.selectedItems.length - 1);\n              this.parent.setProperties({\n                selectedItems: slItems\n              }, true);\n            }\n\n            this.selectRecords(this.parent.selectedItems);\n            this.parent.setProperties({\n              selectedItems: this.parent.selectedItems\n            }, true);\n          } else if (!isNOU(this.gridObj)) {\n            this.gridObj.clearSelection();\n          }\n\n          break;\n\n        case 'showFileExtension':\n          read(this.parent, events.pathChanged, this.parent.path);\n          break;\n\n        case 'showHiddenItems':\n          read(this.parent, events.pathChanged, this.parent.path);\n          break;\n\n        case 'allowMultiSelection':\n          if (!isNullOrUndefined(this.gridObj)) {\n            this.currentSelectedItem = this.parent.selectedItems;\n            this.gridObj.selectionSettings.type = e.newProp.allowMultiSelection ? 'Multiple' : 'Single';\n            this.isSelectionUpdate = true;\n            this.renderCheckBox();\n          }\n\n          break;\n\n        case 'view':\n          updateLayout(this.parent, 'Details');\n          break;\n\n        case 'width':\n          this.onDetailsResize();\n      }\n    }\n  };\n\n  DetailsView.prototype.onPathChanged = function (args) {\n    this.parent.isCut = false;\n\n    if (this.parent.breadcrumbbarModule.searchObj.element.value.trim() === '' && this.gridObj) {\n      this.parent.searchedItems = [];\n\n      if (!this.parent.isFiltered) {\n        this.removePathColumn(false);\n      } else {\n        this.updatePathColumn();\n      }\n    }\n\n    removeBlur(this.parent);\n\n    if (this.parent.view === 'Details') {\n      /* istanbul ignore next */\n      this.isInteracted = false;\n      showSpinner(this.parent.element);\n      this.parent.setProperties({\n        selectedItems: []\n      }, true);\n      this.gridObj.dataSource = getSortedData(this.parent, args.files);\n    }\n\n    this.emptyArgs = args;\n  };\n\n  DetailsView.prototype.updatePathColumn = function () {\n    var len = this.gridObj.columns.length;\n    var columnData = JSON.parse(JSON.stringify(this.gridObj.columns));\n\n    if (columnData[len - 1].field && columnData[len - 1].field !== 'filterPath' && !this.parent.isMobile) {\n      var pathColumn = {\n        field: 'filterPath',\n        headerText: getLocaleText(this.parent, 'Path'),\n        minWidth: 180,\n        width: 'auto'\n      };\n      this.gridObj.columns.push(pathColumn);\n      this.adjustWidth(this.gridObj.columns, 'filterPath');\n      this.adjustWidth(this.gridObj.columns, 'name');\n      this.isColumnRefresh = true;\n      this.gridObj.refreshColumns();\n    }\n  };\n\n  DetailsView.prototype.checkEmptyDiv = function (args) {\n    // eslint-disable-next-line\n    var items = getSortedData(this.parent, args.files);\n\n    if (items.length === 0 && !isNOU(this.element.querySelector('.' + CLS.GRID_VIEW))) {\n      createEmptyElement(this.parent, this.element, args);\n    } else if (items.length !== 0 && this.element.querySelector('.' + CLS.EMPTY)) {\n      if (this.element.querySelector('.' + CLS.GRID_VIEW).querySelector('.' + CLS.EMPTY)) {\n        var emptyDiv = this.element.querySelector('.' + CLS.GRID_VIEW).querySelector('.' + CLS.EMPTY);\n        this.element.querySelector('.' + CLS.GRID_VIEW).removeChild(emptyDiv);\n      } else {\n        this.element.removeChild(this.element.querySelector('.' + CLS.EMPTY));\n      }\n    }\n  };\n\n  DetailsView.prototype.onOpenInit = function () {\n    if (this.parent.activeModule === 'detailsview') {\n      // eslint-disable-next-line\n      var data = this.gridObj.getSelectedRecords()[0];\n      this.openContent(data);\n    }\n  };\n\n  DetailsView.prototype.DblClickEvents = function (args) {\n    this.gridObj.selectRows([args.rowIndex]); // eslint-disable-next-line\n\n    var data;\n\n    if (args.rowData) {\n      data = JSON.parse(JSON.stringify(args.rowData));\n      this.openContent(data);\n    }\n  }; // eslint-disable-next-line\n\n\n  DetailsView.prototype.openContent = function (data) {\n    var _this = this;\n\n    if (!hasReadAccess(data)) {\n      createDeniedDialog(this.parent, data, events.permissionRead);\n      return;\n    }\n\n    var eventArgs = {\n      cancel: false,\n      fileDetails: data,\n      module: 'DetailsView'\n    };\n    this.parent.trigger('fileOpen', eventArgs, function (fileOpenArgs) {\n      if (!fileOpenArgs.cancel) {\n        var name_2 = getValue('name', data);\n\n        if (getValue('isFile', data)) {\n          var icon = fileType(data);\n\n          if (icon === CLS.ICON_IMAGE) {\n            var imgUrl = getImageUrl(_this.parent, data);\n            createImageDialog(_this.parent, name_2, imgUrl);\n          }\n        } else {\n          var val = _this.parent.breadcrumbbarModule.searchObj.element.value;\n\n          if (val === '' && !_this.parent.isFiltered) {\n            var id = getValue('id', data);\n            var newPath = _this.parent.path + (isNOU(id) ? name_2 : id) + '/';\n\n            _this.parent.setProperties({\n              path: newPath\n            }, true);\n\n            _this.parent.pathNames.push(name_2);\n\n            _this.parent.pathId.push(getValue('_fm_id', data));\n\n            _this.parent.itemData = [data];\n            openAction(_this.parent);\n          } else {\n            openSearchFolder(_this.parent, data);\n          }\n\n          _this.parent.isFiltered = false;\n        }\n\n        _this.element.focus();\n      }\n    });\n  };\n  /* istanbul ignore next */\n\n\n  DetailsView.prototype.onLayoutChange = function (args) {\n    if (this.parent.view === 'Details') {\n      if (!this.gridObj) {\n        this.render(args);\n      } else {\n        this.isLoaded = true;\n      }\n\n      if (this.parent.isFiltered) {\n        this.updatePathColumn();\n        this.parent.setProperties({\n          selectedItems: []\n        }, true);\n      }\n\n      this.gridObj.dataSource = getSortedData(this.parent, args.files);\n      this.parent.notify(events.hideLayout, {});\n      this.gridObj.element.classList.remove(CLS.DISPLAY_NONE);\n      this.isInteracted = false;\n      this.gridObj.clearSelection();\n\n      if (this.parent.breadcrumbbarModule.searchObj.element.value.trim() !== '') {\n        this.onSearchFiles(args);\n      }\n\n      this.adjustHeight();\n\n      if (this.gridObj.sortSettings.columns.length > 0 && this.gridObj.sortSettings.columns[0].field !== this.parent.sortBy) {\n        if (this.parent.sortOrder !== 'None') {\n          this.gridObj.sortColumn(this.parent.sortBy, this.parent.sortOrder);\n        }\n      }\n    }\n  };\n  /* istanbul ignore next */\n\n\n  DetailsView.prototype.onSearchFiles = function (args) {\n    if (this.parent.view === 'Details') {\n      this.parent.setProperties({\n        selectedItems: []\n      }, true);\n      this.parent.notify(events.selectionChanged, {});\n\n      if (!this.parent.isLayoutChange) {\n        this.parent.layoutSelectedItems = [];\n      }\n\n      this.updatePathColumn();\n      this.parent.searchedItems = args.files;\n      this.onPathChanged(args);\n    }\n  };\n\n  DetailsView.prototype.removePathColumn = function (isRefresh) {\n    var len = this.gridObj.columns.length;\n    var columnData = JSON.parse(JSON.stringify(this.gridObj.columns));\n\n    if (columnData[len - 1].field && columnData[len - 1].field === 'filterPath') {\n      /* istanbul ignore next */\n      if (this.gridObj.sortSettings.columns[0].field === 'filterPath') {\n        if (this.parent.sortOrder !== 'None') {\n          this.gridObj.sortColumn('name', this.parent.sortOrder);\n        } else {\n          // eslint-disable-next-line\n          this.gridObj.dataSource = getSortedData(this.parent, this.gridObj.dataSource);\n        }\n\n        this.parent.notify(events.sortByChange, {});\n      }\n\n      this.gridObj.columns.pop();\n\n      if (!isRefresh) {\n        this.isColumnRefresh = true;\n        this.gridObj.refreshColumns();\n      }\n    }\n  };\n\n  DetailsView.prototype.onFinalizeEnd = function (args) {\n    if (this.parent.view !== 'Details') {\n      return;\n    }\n\n    if (!this.gridObj) {\n      this.render(args);\n    } else {\n      this.onPathChanged(args);\n    }\n  };\n\n  DetailsView.prototype.onCreateEnd = function (args) {\n    if (this.parent.view !== 'Details') {\n      return;\n    }\n\n    this.onPathChanged(args);\n  };\n\n  DetailsView.prototype.onRenameInit = function () {\n    if (this.parent.activeModule === 'detailsview' && this.parent.selectedItems.length === 1) {\n      this.updateRenameData();\n    }\n  };\n\n  DetailsView.prototype.onSelectedData = function () {\n    if (this.parent.activeModule === 'detailsview') {\n      this.parent.itemData = this.gridObj.getSelectedRecords();\n    }\n  };\n\n  DetailsView.prototype.onDeleteInit = function () {\n    if (this.parent.activeModule === 'detailsview') {\n      Delete(this.parent, this.parent.selectedItems, this.parent.path, 'delete');\n    }\n  };\n  /* istanbul ignore next */\n\n\n  DetailsView.prototype.onDeleteEnd = function (args) {\n    if (this.parent.view !== 'Details') {\n      return;\n    }\n\n    this.onPathChanged(args);\n    this.parent.setProperties({\n      selectedItems: []\n    }, true);\n  };\n\n  DetailsView.prototype.onRefreshEnd = function (args) {\n    if (this.parent.view !== 'Details') {\n      return;\n    }\n\n    this.isInteracted = false;\n    this.removePathColumn(false);\n    this.gridObj.dataSource = getSortedData(this.parent, args.files);\n    this.emptyArgs = args;\n  };\n\n  DetailsView.prototype.onHideLayout = function () {\n    if (this.parent.view !== 'Details' && this.gridObj) {\n      this.gridObj.element.classList.add(CLS.DISPLAY_NONE);\n    }\n  };\n\n  DetailsView.prototype.onSelectAllInit = function () {\n    if (this.parent.view === 'Details') {\n      this.isInteracted = false;\n\n      if (this.parent.allowMultiSelection) {\n        this.gridObj.selectionModule.selectRowsByRange(0, this.gridObj.getRows().length);\n      } else {\n        this.gridObj.selectRow(this.gridObj.getRows().length - 1);\n      }\n\n      this.isInteracted = true;\n      this.interaction = true;\n    }\n  };\n\n  DetailsView.prototype.onClearAllInit = function () {\n    if (this.parent.view === 'Details') {\n      this.removeSelection();\n      this.interaction = true;\n    }\n  };\n  /* istanbul ignore next */\n\n\n  DetailsView.prototype.onSelectionChanged = function () {\n    removeClass([this.element], CLS.HEADER_CHECK);\n\n    if (this.parent.selectedItems.length > 0) {\n      addClass([this.element], CLS.HEADER_CHECK);\n    }\n  };\n\n  DetailsView.prototype.onLayoutRefresh = function () {\n    if (this.parent.view !== 'Details') {\n      return;\n    }\n\n    this.adjustHeight();\n  };\n\n  DetailsView.prototype.onBeforeRequest = function () {\n    this.isRendered = false;\n  };\n\n  DetailsView.prototype.onAfterRequest = function () {\n    this.isRendered = true;\n  };\n\n  DetailsView.prototype.onUpdateSelectionData = function () {\n    if (this.parent.view !== 'Details') {\n      return;\n    }\n\n    this.parent.itemData = this.gridObj.getSelectedRecords();\n  };\n\n  DetailsView.prototype.addEventListener = function () {\n    this.parent.on(events.finalizeEnd, this.onFinalizeEnd, this);\n    this.parent.on(events.destroy, this.destroy, this);\n    this.parent.on(events.layoutChange, this.onLayoutChange, this);\n    this.parent.on(events.pathChanged, this.onPathChanged, this);\n    this.parent.on(events.createEnd, this.onCreateEnd, this);\n    this.parent.on(events.dropInit, this.onDropInit, this);\n    this.parent.on(events.detailsInit, this.onDetailsInit, this);\n    this.parent.on(events.refreshEnd, this.onRefreshEnd, this);\n    this.parent.on(events.search, this.onSearchFiles, this);\n    this.parent.on(events.methodCall, this.onMethodCall, this);\n    this.parent.on(events.actionFailure, this.onActionFailure, this);\n    this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n    this.parent.on(events.deleteInit, this.onDeleteInit, this);\n    this.parent.on(events.deleteEnd, this.onDeleteEnd, this);\n    this.parent.on(events.selectedData, this.onSelectedData, this);\n    this.parent.on(events.renameInit, this.onRenameInit, this);\n    this.parent.on(events.renameEnd, this.onPathChanged, this);\n    this.parent.on(events.openInit, this.onOpenInit, this);\n    this.parent.on(events.sortColumn, this.onSortColumn, this);\n    this.parent.on(events.openEnd, this.onPathChanged, this);\n    this.parent.on(events.filterEnd, this.onPathChanged, this);\n    this.parent.on(events.pasteInit, this.onPasteInit, this);\n    this.parent.on(events.hideLayout, this.onHideLayout, this);\n    this.parent.on(events.selectAllInit, this.onSelectAllInit, this);\n    this.parent.on(events.clearAllInit, this.onClearAllInit, this);\n    this.parent.on(events.pathColumn, this.onPathColumn, this);\n    this.parent.on(events.selectionChanged, this.onSelectionChanged, this);\n    this.parent.on(events.beforeRequest, this.onBeforeRequest, this);\n    this.parent.on(events.afterRequest, this.onAfterRequest, this);\n    this.parent.on(events.pasteEnd, this.onpasteEnd, this);\n    this.parent.on(events.cutCopyInit, this.oncutCopyInit, this);\n    this.parent.on(events.menuItemData, this.onMenuItemData, this);\n    this.parent.on(events.resizeEnd, this.onDetailsResizeHandler, this);\n    this.parent.on(events.splitterResize, this.onDetailsResize, this);\n    this.parent.on(events.layoutRefresh, this.onLayoutRefresh, this);\n    this.parent.on(events.dropPath, this.onDropPath, this);\n    this.parent.on(events.updateSelectionData, this.onUpdateSelectionData, this);\n  };\n\n  DetailsView.prototype.removeEventListener = function () {\n    this.parent.off(events.finalizeEnd, this.onFinalizeEnd);\n    this.parent.off(events.destroy, this.destroy);\n    this.parent.off(events.layoutChange, this.onLayoutChange);\n    this.parent.off(events.pathChanged, this.onPathChanged);\n    this.parent.off(events.pasteInit, this.onPasteInit);\n    this.parent.off(events.createEnd, this.onCreateEnd);\n    this.parent.off(events.refreshEnd, this.onRefreshEnd);\n    this.parent.off(events.search, this.onSearchFiles);\n    this.parent.off(events.methodCall, this.onMethodCall);\n    this.parent.off(events.actionFailure, this.onActionFailure);\n    this.parent.off(events.modelChanged, this.onPropertyChanged);\n    this.parent.off(events.renameInit, this.onRenameInit);\n    this.parent.off(events.renameEnd, this.onPathChanged);\n    this.parent.off(events.filterEnd, this.onPathChanged);\n    this.parent.off(events.openInit, this.onOpenInit);\n    this.parent.off(events.sortColumn, this.onSortColumn);\n    this.parent.off(events.openEnd, this.onPathChanged);\n    this.parent.off(events.hideLayout, this.onHideLayout);\n    this.parent.off(events.selectAllInit, this.onSelectAllInit);\n    this.parent.off(events.clearAllInit, this.onClearAllInit);\n    this.parent.off(events.deleteInit, this.onDeleteInit);\n    this.parent.off(events.deleteEnd, this.onDeleteEnd);\n    this.parent.off(events.pathColumn, this.onPathColumn);\n    this.parent.off(events.selectionChanged, this.onSelectionChanged);\n    this.parent.off(events.beforeRequest, this.onBeforeRequest);\n    this.parent.off(events.afterRequest, this.onAfterRequest);\n    this.parent.off(events.pasteEnd, this.onpasteEnd);\n    this.parent.off(events.cutCopyInit, this.oncutCopyInit);\n    this.parent.off(events.dropInit, this.onDropInit);\n    this.parent.off(events.selectedData, this.onSelectedData);\n    this.parent.off(events.detailsInit, this.onDetailsInit);\n    this.parent.off(events.menuItemData, this.onMenuItemData);\n    this.parent.off(events.resizeEnd, this.onDetailsResizeHandler);\n    this.parent.off(events.splitterResize, this.onDetailsResize);\n    this.parent.off(events.layoutRefresh, this.onLayoutRefresh);\n    this.parent.off(events.dropPath, this.onDropPath);\n    this.parent.off(events.updateSelectionData, this.onUpdateSelectionData);\n  };\n\n  DetailsView.prototype.onActionFailure = function () {\n    this.interaction = true;\n  }; // eslint-disable-next-line\n\n\n  DetailsView.prototype.onMenuItemData = function (args) {\n    if (this.parent.activeModule === this.getModuleName()) {\n      this.parent.itemData = [this.gridObj.getRowInfo(args.target).rowData];\n    }\n  };\n\n  DetailsView.prototype.onPasteInit = function () {\n    if (this.parent.activeModule === this.getModuleName()) {\n      this.parent.itemData = this.parent.folderPath !== '' ? this.gridObj.getSelectedRecords() : [getPathObject(this.parent)];\n    }\n  };\n\n  DetailsView.prototype.onDetailsInit = function () {\n    if (this.parent.activeModule === this.getModuleName()) {\n      if (this.parent.selectedItems.length !== 0) {\n        this.parent.itemData = this.gridObj.getSelectedRecords();\n      } else {\n        this.parent.itemData = [getValue(this.parent.pathId[this.parent.pathId.length - 1], this.parent.feParent)];\n      }\n    }\n  };\n\n  DetailsView.prototype.dragHelper = function (args) {\n    var dragTarget = args.sender.target;\n    var dragLi = dragTarget.closest('tr.e-row');\n\n    if (!dragLi) {\n      return null;\n    }\n\n    var name = dragLi.getElementsByClassName('e-fe-text')[0].innerText;\n\n    if (dragLi && !dragLi.querySelector('.e-active')) {\n      this.selectRecords([name]);\n    }\n\n    getModule(this.parent, dragLi);\n    this.parent.activeElements = [];\n    this.parent.dragData = []; // eslint-disable-next-line\n\n    this.parent.dragData = this.gridObj.getSelectedRecords();\n    var dragRow;\n\n    if (this.parent.dragData.length === 0 && dragLi) {\n      dragRow = this.gridObj.getRowInfo(dragLi);\n    }\n\n    if (dragRow) {\n      this.parent.dragData.push(dragRow.rowData);\n    }\n\n    this.parent.dragPath = this.parent.path;\n    this.parent.activeElements = this.gridObj.getSelectedRows();\n    createVirtualDragElement(this.parent);\n    return this.parent.virtualDragElement;\n  };\n  /* istanbul ignore next */\n\n\n  DetailsView.prototype.onDetailsResize = function () {\n    if (this.parent.view === 'Details' && !this.parent.isMobile && !isNOU(this.gridObj)) {\n      var gridHeader = this.gridObj.getHeaderContent().querySelector('.e-headercontent');\n      var gridHeaderColGroup = gridHeader.firstChild.childNodes[0];\n      var gridContentColGroup = this.gridObj.getContent().querySelector('.e-content .e-table').children[0];\n      var gridHeaderColNames = this.gridObj.getColumns();\n\n      for (var i = 0; i < gridHeaderColNames.length; i++) {\n        if (!this.isNameWidth && gridHeaderColNames[i].field === 'name' || gridHeaderColNames[i].field === 'filterPath') {\n          if (this.parent.breadcrumbbarModule.searchObj.element.value === '' && !this.parent.isFiltered) {\n            if (this.element.clientWidth <= 500) {\n              gridHeaderColGroup.children[i].setAttribute('style', 'width: 120px');\n              gridContentColGroup.children[i].setAttribute('style', 'width: 120px');\n            } else if (this.element.clientWidth > 500) {\n              gridHeaderColGroup.children[i].setAttribute('style', 'width: auto');\n              gridContentColGroup.children[i].setAttribute('style', 'width: auto');\n            }\n          } else {\n            if (this.element.clientWidth <= 680) {\n              if (gridHeaderColNames[i].field === 'name') {\n                gridHeaderColGroup.children[i].setAttribute('style', 'width: 120px');\n                gridContentColGroup.children[i].setAttribute('style', 'width: 120px');\n              } else {\n                gridHeaderColGroup.children[i].setAttribute('style', 'width: 180px');\n                gridContentColGroup.children[i].setAttribute('style', 'width: 180px');\n              }\n            } else if (this.element.clientWidth > 680) {\n              gridHeaderColGroup.children[i].setAttribute('style', 'width: auto');\n              gridContentColGroup.children[i].setAttribute('style', 'width: auto');\n            }\n          }\n        }\n      }\n    }\n  };\n\n  DetailsView.prototype.onDetailsResizeHandler = function () {\n    this.onDetailsResize();\n\n    if (this.parent.view === 'Details' && !this.parent.isMobile && !isNOU(this.gridObj)) {\n      this.adjustHeight();\n    }\n  };\n\n  DetailsView.prototype.createDragObj = function () {\n    var _this = this;\n\n    if (!this.parent.isMobile && this.gridObj) {\n      if (this.parent.allowDragAndDrop) {\n        if (this.dragObj) {\n          this.dragObj.destroy();\n        }\n\n        this.dragObj = new Draggable(this.gridObj.element, {\n          cursorAt: this.parent.dragCursorPosition,\n          distance: 5,\n          enableTailMode: true,\n          dragArea: this.parent.element,\n          dragTarget: '.' + CLS.ROW,\n          drag: draggingHandler.bind(this, this.parent),\n          dragStart: function (args) {\n            dragStartHandler(_this.parent, args, _this.dragObj);\n          },\n          dragStop: dragStopHandler.bind(this, this.parent),\n          enableAutoScroll: true,\n          helper: this.dragHelper.bind(this)\n        });\n      } else if (!this.parent.allowDragAndDrop && this.dragObj) {\n        this.dragObj.destroy();\n      }\n    }\n  };\n\n  DetailsView.prototype.onDropInit = function (args) {\n    if (this.parent.targetModule === this.getModuleName()) {\n      /* istanbul ignore next */\n      // eslint-disable-next-line\n      var cwdData = getValue(this.parent.pathId[this.parent.pathId.length - 1], this.parent.feParent);\n\n      if (!args.target.closest('tr')) {\n        this.parent.dropPath = this.parent.path;\n        this.parent.dropData = cwdData;\n      } else {\n        // eslint-disable-next-line\n        var info = null; // eslint-disable-next-line\n\n        info = this.gridObj.getRowInfo(args.target).rowData;\n        this.parent.dropPath = info.isFile ? this.parent.path : getFullPath(this.parent, info, this.parent.path);\n        this.parent.dropData = info.isFile ? cwdData : info;\n      }\n    }\n  };\n\n  DetailsView.prototype.oncutCopyInit = function () {\n    if (this.parent.activeModule === this.getModuleName()) {\n      this.parent.activeRecords = this.gridObj.getSelectedRecords();\n      this.parent.activeElements = this.gridObj.getSelectedRows();\n    }\n  };\n\n  DetailsView.prototype.onpasteEnd = function (args) {\n    if (this.parent.view === 'Details') {\n      this.isPasteOperation = true;\n\n      if (this.parent.path === this.parent.destinationPath || this.parent.path === getDirectoryPath(this.parent, args)) {\n        this.onPathChanged(args);\n      }\n    }\n  };\n\n  DetailsView.prototype.onDropPath = function (args) {\n    if (this.parent.view === 'Details') {\n      this.isPasteOperation = true;\n      this.onPathChanged(args);\n    }\n  };\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {string} - returns modules name.\n   * @private\n   */\n\n\n  DetailsView.prototype.getModuleName = function () {\n    return 'detailsview';\n  };\n\n  DetailsView.prototype.destroy = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.removeEventListener();\n\n    if (this.gridObj) {\n      this.unWireEvents();\n      this.gridObj.destroy();\n    }\n  };\n\n  DetailsView.prototype.updateType = function (item) {\n    var folder = select('.' + CLS.FOLDER, item);\n    this.parent.isFile = isNOU(folder) ? true : false;\n  };\n  /* istanbul ignore next */\n\n\n  DetailsView.prototype.onSelection = function (action, args) {\n    var eventArgs = {\n      action: action,\n      fileDetails: args.data,\n      isInteracted: this.interaction,\n      cancel: false,\n      target: args.target\n    };\n    this.parent.trigger('fileSelection', eventArgs);\n    args.cancel = eventArgs.cancel;\n  };\n  /* istanbul ignore next */\n\n\n  DetailsView.prototype.onSelected = function (args) {\n    this.parent.activeModule = 'detailsview';\n\n    if (!this.parent.isLayoutChange || this.parent.isFiltered) {\n      this.selectedRecords();\n    }\n\n    this.parent.notify(events.selectionChanged, {});\n\n    if (this.gridObj.getSelectedRowIndexes().length === 1) {\n      this.firstItemIndex = this.gridObj.selectedRowIndex;\n    }\n\n    this.gridObj.element.setAttribute('tabindex', '-1');\n    this.triggerSelect('select', args);\n    var item = this.gridObj.getRowByIndex(this.gridObj.selectedRowIndex);\n    this.updateType(item);\n\n    if (!isNOU(item) && !isNOU(item.querySelector('.e-checkselect'))) {\n      if (this.gridObj.getSelectedRowIndexes().length !== 1) {\n        var lastItemIndex = this.gridObj.getSelectedRowIndexes()[this.gridObj.getSelectedRowIndexes().length - 2];\n        var lastItem = this.gridObj.getRowByIndex(lastItemIndex);\n        lastItem.querySelector('.e-checkselect').setAttribute('tabindex', '-1');\n      }\n\n      item.querySelector('.e-rowcell.e-fe-checkbox').removeAttribute('tabindex');\n    }\n\n    if (!isNOU(this.gridObj) && !isNOU(this.gridObj.element.querySelector('.e-checkselectall'))) {\n      this.gridObj.element.querySelector('.e-checkselectall').setAttribute('tabindex', '-1');\n    }\n\n    var rows = this.gridObj.getSelectedRowIndexes();\n\n    if (!this.parent.allowMultiSelection) {\n      for (var i = 0; i < rows.length; i++) {\n        if (rows[i] === this.gridObj.selectedRowIndex) {\n          this.gridObj.getRowByIndex(rows[i]).setAttribute('tabindex', '0');\n        } else {\n          this.gridObj.getRowByIndex(rows[i]).removeAttribute('tabindex');\n        }\n      }\n    }\n\n    var len = rows.length;\n\n    if (len > 0) {\n      // eslint-disable-next-line\n      var data = this.gridObj.getRowsObject()[rows[len - 1]].data;\n      this.parent.currentItemText = getValue('name', data);\n    }\n\n    var indexes = getValue('rowIndexes', args);\n    var multiSelect = getValue('enableSelectMultiTouch', this.gridObj.selectionModule);\n\n    if (this.parent.isDevice && isNOU(indexes) && args.target && !multiSelect && !args.target.closest('.e-headercell')) {\n      this.parent.isFile = getValue('isFile', args.data);\n\n      if (!this.parent.isFile) {\n        this.openContent(args.data);\n      }\n    }\n\n    this.parent.visitedItem = args.row;\n\n    if (this.parent.allowMultiSelection && !isNOU(item) && !isNOU(item.querySelector('.e-checkselect'))) {\n      var checkItem = item.querySelector('.e-checkselect');\n      checkItem.focus();\n    }\n\n    this.addFocus(this.gridObj.selectedRowIndex);\n\n    if (!this.parent.isLayoutChange) {\n      this.isInteracted = true;\n    }\n  };\n  /* istanbul ignore next */\n\n\n  DetailsView.prototype.onPathColumn = function () {\n    if (this.parent.view === 'Details' && !isNOU(this.gridObj)) {\n      if (this.parent.breadcrumbbarModule.searchObj.element.value === '' && !this.parent.isFiltered) {\n        this.removePathColumn(false);\n      }\n    }\n  };\n\n  DetailsView.prototype.selectedRecords = function () {\n    this.parent.setProperties({\n      selectedItems: []\n    }, true); // eslint-disable-next-line\n\n    var selectedRecords = this.gridSelectNodes();\n    var selectSize = 0;\n\n    while (selectSize < selectedRecords.length) {\n      var record = selectedRecords[selectSize];\n      var name_3 = getItemName(this.parent, record);\n      this.parent.selectedItems.push(name_3);\n      selectSize++;\n    }\n\n    this.parent.setProperties({\n      selectedItems: this.parent.selectedItems\n    }, true);\n  };\n\n  DetailsView.prototype.onDeSelection = function (args) {\n    /* istanbul ignore next */\n    if (!this.parent.allowMultiSelection && isNOU(args.data)) {\n      this.gridObj.getRowByIndex(args.rowIndex).removeAttribute('tabindex');\n    } else if (this.gridObj.getSelectedRowIndexes().length > 1) {\n      var lastItemIndex = this.gridObj.getSelectedRowIndexes()[this.gridObj.getSelectedRowIndexes().length - 2];\n      this.gridObj.getRowByIndex(lastItemIndex).querySelector('.e-checkselect').removeAttribute('tabindex');\n    }\n\n    if (this.gridObj.selectedRowIndex === -1) {\n      this.gridObj.element.setAttribute('tabindex', '0');\n    }\n\n    if (!this.isInteracted) {\n      this.isInteracted = true;\n      return;\n    }\n\n    this.selectedRecords();\n\n    if (this.parent.selectedItems.length === 0) {\n      setValue('enableSelectMultiTouch', false, this.gridObj.selectionModule);\n      removeClass([this.parent.element], CLS.MULTI_SELECT);\n    }\n\n    this.parent.notify(events.selectionChanged, {});\n    this.triggerSelect('unselect', args);\n    this.parent.visitedItem = null;\n  };\n\n  DetailsView.prototype.triggerSelect = function (action, args) {\n    var eventArgs = {\n      action: action,\n      fileDetails: args.data,\n      isInteracted: this.interaction\n    };\n    this.parent.trigger('fileSelect', eventArgs);\n    this.interaction = true;\n  };\n\n  DetailsView.prototype.wireEvents = function () {\n    this.wireClickEvent(true);\n    this.keyboardModule = new KeyboardEvents(this.gridObj.element, {\n      keyAction: this.keyupHandler.bind(this),\n      keyConfigs: this.keyConfigs,\n      eventName: 'keyup'\n    });\n    this.keyboardDownModule = new KeyboardEvents(this.element, {\n      keyAction: this.keydownHandler.bind(this),\n      keyConfigs: this.keyConfigs,\n      eventName: 'keydown'\n    });\n    EventHandler.add(this.gridObj.element, 'blur', this.removeFocus, this);\n  };\n\n  DetailsView.prototype.unWireEvents = function () {\n    this.wireClickEvent(false);\n    this.keyboardModule.destroy();\n    this.keyboardDownModule.destroy();\n    EventHandler.remove(this.gridObj.element, 'blur', this.removeFocus);\n  };\n\n  DetailsView.prototype.wireClickEvent = function (toBind) {\n    if (toBind) {\n      // eslint-disable-next-line\n      var proxy_1 = this;\n      var ele = this.gridObj.getContent();\n      this.clickObj = new Touch(ele, {\n        tap: function (eve) {\n          if (eve.tapCount === 1 && eve.originalEvent.target.classList.contains('e-content')) {\n            proxy_1.onClearAllInit();\n          }\n        },\n        tapHold: function (e) {\n          if (proxy_1.parent.isDevice) {\n            e.originalEvent.preventDefault();\n\n            if (proxy_1.parent.allowMultiSelection) {\n              setValue('enableSelectMultiTouch', proxy_1.parent.allowMultiSelection, proxy_1.gridObj.selectionModule);\n              addClass([proxy_1.parent.element], CLS.MULTI_SELECT);\n            }\n\n            var target = e.originalEvent.target;\n\n            if (target) {\n              var row = closest(target, '.' + CLS.ROW);\n              var index = proxy_1.gridObj.getRows().indexOf(row);\n              proxy_1.gridObj.selectRow(index);\n            }\n          }\n        }\n      });\n    } else {\n      if (this.clickObj) {\n        this.clickObj.destroy();\n      }\n    }\n  };\n  /* istanbul ignore next */\n\n\n  DetailsView.prototype.removeSelection = function () {\n    removeClass([this.parent.element], CLS.MULTI_SELECT);\n    this.gridObj.clearSelection();\n    this.parent.setProperties({\n      selectedItems: []\n    }, true);\n    this.parent.notify(events.selectionChanged, {});\n\n    if (this.gridObj.selectedRowIndex === -1) {\n      this.startIndex = null;\n    }\n\n    this.isInteracted = true;\n  };\n\n  DetailsView.prototype.removeFocus = function () {\n    this.addFocus(null);\n  };\n\n  DetailsView.prototype.getFocusedItemIndex = function () {\n    return !isNOU(this.getFocusedItem()) ? parseInt(this.getFocusedItem().getAttribute('aria-rowindex'), 10) : null;\n  };\n  /* istanbul ignore next */\n  // eslint:disable-next-line\n\n\n  DetailsView.prototype.keydownHandler = function (e) {\n    if (!this.isRendered) {\n      return;\n    }\n\n    switch (e.action) {\n      case 'end':\n      case 'home':\n      case 'space':\n      case 'ctrlSpace':\n      case 'shiftSpace':\n      case 'csSpace':\n      case 'ctrlA':\n      case 'enter':\n      case 'altEnter':\n      case 'ctrlEnd':\n      case 'shiftEnd':\n      case 'csEnd':\n      case 'ctrlHome':\n      case 'shiftHome':\n      case 'csHome':\n      case 'ctrlDown':\n      case 'shiftDown':\n      case 'csDown':\n      case 'ctrlLeft':\n      case 'shiftLeft':\n      case 'csLeft':\n      case 'esc':\n      case 'del':\n      case 'shiftdel':\n      case 'ctrlC':\n      case 'ctrlV':\n      case 'ctrlX':\n      case 'f2':\n      case 'moveDown':\n      case 'moveUp':\n        e.preventDefault();\n        break;\n\n      default:\n        break;\n    }\n  };\n  /* istanbul ignore next */\n  // eslint:disable-next-line\n\n\n  DetailsView.prototype.keyupHandler = function (e) {\n    if (!this.isRendered) {\n      return;\n    }\n\n    e.preventDefault();\n    var action = e.action; // eslint-disable-next-line\n\n    var gridItems = getSortedData(this.parent, this.gridObj.dataSource);\n    var gridLength = gridItems.length;\n    var focItem = this.getFocusedItem();\n    var focIndex = this.getFocusedItemIndex();\n    var selIndex = this.gridObj.selectedRowIndex;\n    var selRowIndeces = this.gridObj.getSelectedRowIndexes(); // eslint-disable-next-line\n\n    var rowData;\n    var firstItem;\n    var lastItem;\n\n    switch (action) {\n      case 'altEnter':\n        GetDetails(this.parent, this.parent.selectedItems, this.parent.path, 'details');\n        break;\n\n      case 'esc':\n        removeActive(this.parent);\n        break;\n\n      case 'del':\n      case 'shiftdel':\n        this.performDelete();\n        break;\n\n      case 'enter':\n        if (this.gridObj.selectedRowIndex === -1) {\n          break;\n        }\n\n        rowData = this.gridObj.getRowsObject()[this.gridObj.selectedRowIndex].data;\n\n        if (rowData) {\n          // eslint-disable-next-line\n          var data = JSON.parse(JSON.stringify(rowData));\n          this.openContent(data);\n        }\n\n        break;\n\n      case 'ctrlC':\n        copyFiles(this.parent);\n        break;\n\n      case 'ctrlV':\n        this.parent.folderPath = '';\n        pasteHandler(this.parent);\n        break;\n\n      case 'ctrlX':\n        cutFiles(this.parent);\n        break;\n\n      case 'ctrlD':\n        this.doDownload();\n        break;\n\n      case 'f2':\n        this.performRename();\n        break;\n\n      case 'ctrlA':\n        if (!isNOU(gridItems[0]) && this.parent.allowMultiSelection) {\n          var cnTable = this.gridObj.getContent().querySelector('.e-content');\n          var crtSrlPos = cnTable.scrollTop;\n          var crtFocusIndex = this.gridObj.selectedRowIndex;\n          this.gridObj.selectionModule.selectRowsByRange(0, gridItems.length - 1);\n          cnTable.scrollTop = crtSrlPos;\n\n          if (crtFocusIndex !== -1) {\n            this.addFocus(crtFocusIndex);\n          }\n        }\n\n        break;\n\n      case 'ctrlHome':\n      case 'tab':\n        if (!isNOU(gridItems[0])) {\n          if (!this.parent.allowMultiSelection && e.action === 'ctrlHome') {\n            this.gridObj.selectRow(0);\n          } else if (this.gridObj.selectedRowIndex !== -1 && e.action === 'tab') {\n            return;\n          } else {\n            this.addFocus(0);\n          }\n        }\n\n        break;\n\n      case 'ctrlEnd':\n        if (!isNOU(gridItems[0])) {\n          if (!this.parent.allowMultiSelection) {\n            this.gridObj.selectRow(gridLength - 1);\n          } else {\n            this.addFocus(gridLength - 1);\n          }\n        }\n\n        break;\n\n      case 'shiftHome':\n      case 'shiftEnd':\n      case 'csHome':\n      case 'csEnd':\n        if (!this.parent.allowMultiSelection) {\n          this.gridObj.selectRow(e.action === 'shiftHome' || e.action === 'csHome' ? 0 : gridItems.length - 1);\n        } else {\n          if (!isNOU(gridItems[0])) {\n            if (!isNOU(selIndex) && selIndex !== -1) {\n              this.checkRowsKey(gridItems, selIndex, null, e);\n            } else {\n              if (e.action === 'csHome' || e.action === 'shiftHome') {\n                this.gridObj.selectRow(0);\n              } else {\n                this.gridObj.selectionModule.selectRowsByRange(0, gridItems.length - 1);\n              }\n            }\n          }\n        }\n\n        break;\n\n      case 'space':\n      case 'csSpace':\n      case 'shiftSpace':\n      case 'ctrlSpace':\n        this.spaceSelection(selRowIndeces, focIndex, selIndex, e);\n        break;\n\n      case 'csUp':\n      case 'csDown':\n      case 'shiftUp':\n      case 'shiftDown':\n        this.shiftMoveMethod(gridItems, selIndex, focIndex, selRowIndeces, e);\n        break;\n\n      case 'ctrlUp':\n      case 'ctrlDown':\n        if (!this.parent.allowMultiSelection) {\n          this.moveFunction(gridItems, e, selIndex);\n        } else {\n          this.ctrlMoveFunction(gridItems, e, selIndex);\n        }\n\n        break;\n\n      case 'home':\n        firstItem = [getValue(this.parent.hasId ? 'id' : 'name', gridItems[0])];\n        this.parent.setProperties({\n          selectedItems: firstItem\n        }, true);\n        this.selectRecords(firstItem);\n        break;\n\n      case 'moveUp':\n      case 'moveDown':\n        this.moveFunction(gridItems, e, selIndex);\n        break;\n\n      case 'end':\n        lastItem = [getValue(this.parent.hasId ? 'id' : 'name', gridItems[gridLength - 1])];\n        this.parent.setProperties({\n          selectedItems: lastItem\n        }, true);\n        this.selectRecords(lastItem);\n        break;\n    }\n  }; // eslint-disable-next-line\n\n\n  DetailsView.prototype.gridSelectNodes = function () {\n    return this.gridObj.getSelectedRecords();\n  };\n\n  DetailsView.prototype.doDownload = function () {\n    if (this.parent.selectedItems.length !== 0) {\n      this.parent.itemData = this.gridObj.getSelectedRecords(); // eslint-disable-next-line\n\n      var items = this.parent.itemData;\n\n      for (var i = 0; i < items.length; i++) {\n        if (!hasDownloadAccess(items[i])) {\n          createDeniedDialog(this.parent, items[i], events.permissionDownload);\n          return;\n        }\n      }\n\n      Download(this.parent, this.parent.path, this.parent.selectedItems);\n    }\n  };\n\n  DetailsView.prototype.performDelete = function () {\n    if (this.parent.selectedItems && this.parent.selectedItems.length > 0) {\n      this.parent.itemData = this.gridObj.getSelectedRecords(); // eslint-disable-next-line\n\n      var items = this.parent.itemData;\n\n      for (var i = 0; i < items.length; i++) {\n        if (!hasEditAccess(items[i])) {\n          createDeniedDialog(this.parent, items[i], events.permissionEdit);\n          return;\n        }\n      }\n\n      createDialog(this.parent, 'Delete');\n    }\n  };\n\n  DetailsView.prototype.performRename = function () {\n    if (this.parent.selectedItems.length === 1) {\n      this.updateRenameData();\n      doRename(this.parent);\n    }\n  };\n\n  DetailsView.prototype.updateRenameData = function () {\n    // eslint-disable-next-line\n    var data = this.gridSelectNodes()[0];\n    updateRenamingData(this.parent, data);\n  }; // eslint-disable-next-line\n\n\n  DetailsView.prototype.shiftMoveMethod = function (gridItems, selIndex, focIndex, selRowIndeces, e) {\n    if (!this.parent.allowMultiSelection) {\n      this.moveFunction(gridItems, e, selIndex);\n    } else {\n      if (selIndex === -1 && (e.action === 'csUp' || e.action === 'csDown')) {\n        this.ctrlMoveFunction(gridItems, e, selIndex);\n      } else if (selIndex !== -1 && focIndex !== selIndex && !((e.action === 'csUp' || e.action === 'csDown') && this.isSelected(selRowIndeces, focIndex))) {\n        this.shiftSelectFocusItem(selIndex, focIndex, selRowIndeces, e);\n      } else {\n        this.shiftSelectedItem(selIndex, selRowIndeces, gridItems, e);\n      }\n    }\n  }; // eslint-disable-next-line\n\n\n  DetailsView.prototype.moveFunction = function (selectedItems, e, rowIndex) {\n    if (!isNOU(this.getFocusedItem()) && this.parent.allowMultiSelection) {\n      if (e.action === 'moveDown') {\n        this.gridObj.selectRow(this.getFocusedItemIndex() + 1);\n      } else {\n        this.gridObj.selectRow(this.getFocusedItemIndex() - 1);\n      }\n    } else if (!isNOU(rowIndex) && rowIndex !== -1) {\n      if (e.action === 'moveDown' || e.action === 'ctrlDown' || e.action === 'shiftDown' || e.action === 'csDown') {\n        this.gridObj.selectRow(rowIndex + (rowIndex !== selectedItems.length - 1 ? 1 : 0));\n      } else {\n        this.gridObj.selectRow(rowIndex - (rowIndex !== 0 ? 1 : 0));\n      }\n    } else {\n      if (!isNOU(selectedItems[0])) {\n        this.gridObj.selectRow(0);\n      }\n    }\n  };\n\n  DetailsView.prototype.spaceSelection = function (selRowIndeces, focIndex, selIndex, e) {\n    if (!this.isSelected(selRowIndeces, focIndex) && selIndex !== -1 && (e.action === 'shiftSpace' || e.action === 'csSpace')) {\n      if (focIndex < selIndex) {\n        this.gridObj.selectionModule.selectRowsByRange(focIndex, selIndex);\n      } else {\n        this.gridObj.selectionModule.selectRowsByRange(selIndex, focIndex);\n      }\n    } else if (!isNOU(this.getFocusedItem()) && focIndex !== selIndex) {\n      selRowIndeces.push(this.getFocusedItemIndex());\n      this.gridObj.selectRows(selRowIndeces);\n    } else if (selIndex !== -1 && e.action === 'ctrlSpace' && this.parent.allowMultiSelection) {\n      var lItem = selIndex;\n      selRowIndeces.pop();\n      this.gridObj.selectRows(selRowIndeces);\n      this.addFocus(lItem);\n    } else if (e.action === 'shiftSpace') {\n      this.gridObj.selectRow(selIndex);\n    }\n  }; // eslint-disable-next-line\n\n\n  DetailsView.prototype.ctrlMoveFunction = function (items, e, rowIndex) {\n    var nextItem;\n\n    if (!isNOU(this.getFocusedItem())) {\n      var nextIndex = this.getFocusedItemIndex();\n      nextItem = e.action === 'ctrlDown' || e.action === 'csDown' ? nextIndex + (nextIndex < items.length - 1 ? 1 : 0) : nextIndex - (nextIndex < 1 ? 0 : 1);\n    } else if (!isNOU(rowIndex) && rowIndex !== -1) {\n      nextItem = e.action === 'ctrlDown' || e.action === 'csDown' ? rowIndex + (rowIndex < items.length ? 1 : 0) : rowIndex - (rowIndex < 1 ? 0 : 1);\n    } else {\n      if (!isNOU(items[0])) {\n        nextItem = 0;\n      }\n    }\n\n    this.addFocus(nextItem);\n  }; // eslint-disable-next-line\n\n\n  DetailsView.prototype.checkRowsKey = function (items, indexValue, focIndex, e) {\n    if (this.gridObj.checkAllRows === 'Uncheck' || this.gridObj.checkAllRows === 'Intermediate') {\n      if (e.action !== 'csHome' && e.action !== 'csEnd') {\n        if (isNOU(this.startIndex) && this.firstItemIndex !== indexValue) {\n          this.firstItemIndex = indexValue;\n        }\n\n        if (e.action === 'shiftEnd') {\n          this.gridObj.selectionModule.selectRowsByRange(this.firstItemIndex, items.length - 1);\n        } else {\n          this.gridObj.selectionModule.selectRowsByRange(0, this.firstItemIndex);\n        }\n\n        this.startIndex = indexValue;\n      } else {\n        if (e.action === 'csEnd') {\n          this.gridObj.selectRows(this.InnerItems(isNOU(indexValue) ? 0 : indexValue, isNOU(focIndex) ? items.length - 1 : focIndex, e));\n        } else {\n          if (isNOU(indexValue)) {\n            this.gridObj.selectRow(0);\n          } else {\n            this.gridObj.selectRows(this.InnerItems(isNOU(focIndex) ? 0 : focIndex, indexValue, e));\n          }\n        }\n      }\n    } else {\n      this.gridObj.selectionModule.selectRow(e.action === 'shiftHome' || e.action === 'csHome' ? 0 : items.length - 1);\n    }\n  };\n\n  DetailsView.prototype.InnerItems = function (fItem, lItem, e) {\n    var itemArr = this.gridObj.getSelectedRowIndexes();\n\n    if (e.action === 'csEnd') {\n      for (var i = fItem + 1; i <= lItem; i++) {\n        itemArr.push(i);\n      }\n    } else {\n      for (var i = lItem - 1; fItem <= i; i--) {\n        itemArr.push(i);\n      }\n    }\n\n    return itemArr;\n  };\n\n  DetailsView.prototype.shiftSelectFocusItem = function (selIndex, fIndex, selRowIndexes, e) {\n    var lItem = fIndex + (e.action === 'shiftDown' || e.action === 'csDown' ? 1 : -1);\n    var fItem = isNOU(this.startIndex) ? selIndex : selRowIndexes[0];\n\n    if (fItem === lItem) {\n      this.gridObj.selectRow(fItem);\n    } else {\n      if (fItem < lItem) {\n        if (e.action === 'shiftDown' || e.action === 'csDown') {\n          this.gridObj.selectionModule.selectRowsByRange(fItem, lItem);\n        } else {\n          this.gridObj.selectionModule.selectRowsByRange(lItem, fItem);\n        }\n      } else if (e.action === 'shiftDown' || e.action === 'csDown') {\n        this.gridObj.selectionModule.selectRowsByRange(lItem, fItem);\n      } else {\n        this.gridObj.selectionModule.selectRowsByRange(fItem, lItem);\n      }\n    }\n\n    this.startIndex = this.gridObj.selectedRowIndex;\n  };\n\n  DetailsView.prototype.addFocus = function (item) {\n    var fItem = this.getFocusedItem();\n    var itemElement = this.gridObj.getRowByIndex(item);\n\n    if (fItem) {\n      fItem.removeAttribute('tabindex');\n      removeClass([fItem], [CLS.FOCUS, CLS.FOCUSED]);\n    }\n\n    if (!isNOU(itemElement)) {\n      this.gridObj.element.setAttribute('tabindex', '-1');\n      itemElement.setAttribute('tabindex', '0');\n      itemElement.focus();\n      addClass([itemElement], [CLS.FOCUS, CLS.FOCUSED]);\n    }\n  };\n\n  DetailsView.prototype.getFocusedItem = function () {\n    return select('.' + CLS.FOCUSED, this.element);\n  };\n\n  DetailsView.prototype.isSelected = function (selRowIndexes, focIndex) {\n    var check = false;\n\n    for (var i = 0; i <= selRowIndexes.length - 1; i++) {\n      if (selRowIndexes[i] === focIndex) {\n        check = true;\n        break;\n      }\n    }\n\n    return check;\n  }; // eslint-disable-next-line\n\n\n  DetailsView.prototype.shiftSelectedItem = function (selIndex, selRowIndexes, gridItems, e) {\n    if (selIndex === -1) {\n      this.gridObj.selectRow(0);\n    } else {\n      if (isNOU(this.startIndex) && e.shiftKey) {\n        this.startIndex = this.gridObj.selectedRowIndex;\n        this.gridObj.selectRows([selIndex, e.action === 'shiftDown' || e.action === 'csDown' ? selIndex + (selIndex !== gridItems.length - 1 ? 1 : 0) : selIndex - (selIndex !== 0 ? 1 : 0)]);\n      } else {\n        if (e.action === 'shiftDown' || e.action === 'shiftUp') {\n          if (e.action === 'shiftDown' && selRowIndexes.indexOf(selIndex + 1) === -1) {\n            if (selIndex !== gridItems.length - 1) {\n              selRowIndexes.push(selIndex + 1);\n            }\n          } else if (e.action === 'shiftUp' && selRowIndexes.indexOf(selIndex - 1) === -1) {\n            if (selIndex !== 0) {\n              selRowIndexes.push(selIndex - 1);\n            }\n          } else {\n            selRowIndexes.pop();\n          }\n\n          this.gridObj.selectRows(selRowIndexes);\n        } else {\n          if (e.action === 'csDown') {\n            if (!this.isSelected(selRowIndexes, this.getFocusedItemIndex() + 1)) {\n              selRowIndexes.push(this.getFocusedItemIndex() + 1);\n              this.gridObj.selectRows(selRowIndexes);\n            } else {\n              this.addFocus(this.getFocusedItemIndex() + 1);\n            }\n          } else if (!this.isSelected(selRowIndexes, this.getFocusedItemIndex() - 1)) {\n            selRowIndexes.push(this.getFocusedItemIndex() - 1);\n            this.gridObj.selectRows(selRowIndexes);\n          } else {\n            this.addFocus(this.getFocusedItemIndex() - 1);\n          }\n        }\n      }\n    }\n  }; // eslint-disable-next-line\n\n\n  DetailsView.prototype.onMethodCall = function (e) {\n    if (this.parent.view !== 'Details') {\n      return;\n    }\n\n    var action = getValue('action', e);\n\n    switch (action) {\n      case 'deleteFiles':\n        this.deleteFiles(getValue('ids', e));\n        break;\n\n      case 'downloadFiles':\n        this.downloadFiles(getValue('ids', e));\n        break;\n\n      case 'openFile':\n        this.openFile(getValue('id', e));\n        break;\n\n      case 'createFolder':\n        this.interaction = false;\n        break;\n\n      case 'renameFile':\n        this.interaction = false;\n        this.renameFile(getValue('id', e), getValue('newName', e));\n        break;\n\n      case 'selectAll':\n        this.interaction = false;\n        this.onSelectAllInit();\n        break;\n\n      case 'clearSelection':\n        this.interaction = false;\n        this.onClearAllInit();\n        break;\n    }\n  }; // eslint-disable-next-line\n\n\n  DetailsView.prototype.getRecords = function (nodes) {\n    // eslint-disable-next-line\n    var gridRecords = this.gridObj.getCurrentViewRecords(); // eslint-disable-next-line\n\n    var records = [];\n    var hasFilter = this.parent.breadcrumbbarModule.searchObj.element.value !== '' || this.parent.isFiltered ? true : false;\n    var filter = this.parent.hasId ? 'id' : 'name';\n\n    if (this.parent.hasId || !hasFilter) {\n      for (var i = 0, len = gridRecords.length; i < len; i++) {\n        if (nodes.indexOf(getValue(filter, gridRecords[i])) !== -1) {\n          records.push(gridRecords[i]);\n        }\n      }\n    } else {\n      for (var i = 0, len = gridRecords.length; i < len; i++) {\n        var name_4 = getValue('filterPath', gridRecords[i]) + getValue('name', gridRecords[i]);\n\n        if (nodes.indexOf(name_4) !== -1) {\n          records.push(gridRecords[i]);\n        }\n      }\n    }\n\n    return records;\n  };\n\n  DetailsView.prototype.deleteFiles = function (ids) {\n    this.parent.activeModule = 'detailsview';\n\n    if (isNOU(ids)) {\n      this.performDelete();\n      return;\n    } // eslint-disable-next-line\n\n\n    var records = this.getRecords(ids);\n\n    if (records.length === 0) {\n      return;\n    } // eslint-disable-next-line\n\n\n    var data = [];\n    var newIds = [];\n\n    for (var i = 0; i < records.length; i++) {\n      data[i] = records[i];\n      newIds[i] = getItemName(this.parent, data[i]);\n    }\n\n    doDeleteFiles(this.parent, data, newIds);\n  };\n\n  DetailsView.prototype.downloadFiles = function (ids) {\n    if (isNOU(ids)) {\n      this.doDownload();\n      return;\n    } // eslint-disable-next-line\n\n\n    var dRecords = this.getRecords(ids);\n\n    if (dRecords.length === 0) {\n      return;\n    } // eslint-disable-next-line\n\n\n    var data = [];\n    var newIds = [];\n\n    for (var i = 0; i < dRecords.length; i++) {\n      data[i] = dRecords[i];\n      newIds[i] = getItemName(this.parent, data[i]);\n    }\n\n    doDownloadFiles(this.parent, data, newIds);\n  };\n\n  DetailsView.prototype.openFile = function (id) {\n    if (isNOU(id)) {\n      return;\n    } // eslint-disable-next-line\n\n\n    var records = this.getRecords([id]);\n\n    if (records.length > 0) {\n      this.openContent(records[0]);\n    }\n  };\n\n  DetailsView.prototype.renameFile = function (id, name) {\n    this.parent.activeModule = 'detailsview';\n\n    if (isNOU(id)) {\n      this.performRename();\n      return;\n    } // eslint-disable-next-line\n\n\n    var records = this.getRecords([id]);\n\n    if (records.length > 0) {\n      updateRenamingData(this.parent, records[0]);\n\n      if (!isNOU(name)) {\n        if (hasEditAccess(this.parent.itemData[0])) {\n          rename(this.parent, this.parent.path, name);\n        } else {\n          createDeniedDialog(this.parent, this.parent.itemData[0], events.permissionEdit);\n        }\n      } else {\n        doRename(this.parent);\n      }\n    }\n  };\n\n  return DetailsView;\n}();\n\nexport { DetailsView };","map":{"version":3,"names":["Grid","Resize","ContextMenu","Sort","VirtualScroll","select","KeyboardEvents","EventHandler","getValue","isNullOrUndefined","isNOU","Touch","setValue","addClass","removeClass","Internationalization","closest","Draggable","DataManager","Query","hideSpinner","showSpinner","events","CLS","createDialog","createImageDialog","removeBlur","openAction","getImageUrl","fileType","getSortedData","getLocaleText","updateLayout","createEmptyElement","read","Download","GetDetails","Delete","cutFiles","addBlur","openSearchFolder","copyFiles","removeActive","pasteHandler","getPathObject","getName","hasReadAccess","hasEditAccess","hasDownloadAccess","doRename","getAccessClass","createDeniedDialog","rename","createVirtualDragElement","dragStopHandler","dragStartHandler","draggingHandler","getModule","getFullPath","getDirectoryPath","updateRenamingData","getItemName","doDeleteFiles","doDownloadFiles","DetailsView","parent","isInteracted","interaction","isPasteOperation","isColumnRefresh","dragObj","startIndex","firstItemIndex","isSelectionUpdate","currentSelectedItem","count","isRendered","isLoaded","isNameWidth","pasteOperation","uploadOperation","Inject","element","id","GRID_ID","addEventListener","keyConfigs","altEnter","esc","tab","moveDown","ctrlEnd","ctrlHome","ctrlDown","ctrlLeft","ctrlRight","shiftEnd","shiftHome","shiftDown","shiftUp","ctrlUp","csEnd","csHome","csDown","csUp","space","ctrlSpace","shiftSpace","csSpace","end","home","moveUp","del","ctrlX","ctrlC","ctrlV","ctrlShiftN","shiftdel","ctrlD","f2","ctrlA","enter","prototype","render","args","view","MULTI_SELECT","items","files","checkNameWidth","columns","getColumns","sortSettings","isMobile","sortOrder","direction","field","sortBy","gridObj","dataSource","allowSorting","rowSelecting","onSelection","bind","rowDeselecting","rowSelected","onSelected","rowDeselected","onDeSelection","allowResizing","detailsViewSettings","columnResizing","selectionSettings","type","allowMultiSelection","checkboxMode","enableRtl","pageSettings","pageSize","allowUnsort","recordDoubleClick","DblClickEvents","beforeDataBound","onBeforeDataBound","dataBound","onDataBound","rowDataBound","onRowDataBound","actionBegin","onActionBegin","headerCellInfo","onHeaderCellInfo","width","beforeCopy","cancel","load","focusModule","destroy","locale","isStringTemplate","appendTo","wireEvents","adjustHeight","emptyArgs","initialColumn","i","length","adjustWidth","fieldName","nameWidth","breadcrumbbarModule","searchObj","value","isFiltered","clientWidth","headerText","minWidth","headerTextAlign","template","JSON","parse","stringify","len","iWidth","isBigger","icon","customAttributes","class","headerTemplate","unshift","cWidth","cBox","push","disableHtmlEncode","enableHtmlSanitizer","pane","CONTENT_ID","bar","BREADCRUMBBAR_ID","gridHeader","GRID_HEADER","height","offsetHeight","dataBind","renderCheckBox","refreshColumns","td","row","children","setAttribute","data","isLayoutChange","isCut","fileAction","selectedNodes","indexOf","showFileExtension","textEle","querySelector","name_1","innerHTML","substr","undefined","sizeEle","modifiedSize","sizeValue","intl","formatNumber","format","dateEle","formattedString","formatDate","Date","checkWrap","CB_WRAP","classList","add","className","eventArgs","fileDetails","module","trigger","requestType","setProperties","columnName","selectedItems","sortItem","rows","getSelectedRowIndexes","sortSelectedNodes","getRowsObject","hasId","notify","sortByChange","node","result","createDragObj","selectRecords","pasteNodes","createdItem","layoutSelectedItems","renamedItem","addSelection","uploadItem","currentViewData","getRowHeight","hdTable","getHeaderContent","style","paddingRight","paddingLeft","hdContent","borderRightWidth","cnTable","getContent","overflowY","remove","checkEmptyDiv","nodes","gridRecords","getCurrentViewRecords","sRecords","selectRows","addFocus","selectedRowIndex","rData","executeLocal","where","renamedId","nData","filterPath","index","onSortColumn","sortModule","sortColumn","onPropertyChanged","e","getModuleName","_i","_a","Object","keys","newProp","prop","slItems","slice","clearSelection","pathChanged","path","onDetailsResize","onPathChanged","trim","searchedItems","removePathColumn","updatePathColumn","columnData","pathColumn","GRID_VIEW","EMPTY","emptyDiv","removeChild","onOpenInit","activeModule","getSelectedRecords","openContent","rowIndex","rowData","_this","permissionRead","fileOpenArgs","name_2","ICON_IMAGE","imgUrl","val","newPath","pathNames","pathId","itemData","focus","onLayoutChange","hideLayout","DISPLAY_NONE","onSearchFiles","selectionChanged","isRefresh","pop","onFinalizeEnd","onCreateEnd","onRenameInit","updateRenameData","onSelectedData","onDeleteInit","onDeleteEnd","onRefreshEnd","onHideLayout","onSelectAllInit","selectionModule","selectRowsByRange","getRows","selectRow","onClearAllInit","removeSelection","onSelectionChanged","HEADER_CHECK","onLayoutRefresh","onBeforeRequest","onAfterRequest","onUpdateSelectionData","on","finalizeEnd","layoutChange","createEnd","dropInit","onDropInit","detailsInit","onDetailsInit","refreshEnd","search","methodCall","onMethodCall","actionFailure","onActionFailure","modelChanged","deleteInit","deleteEnd","selectedData","renameInit","renameEnd","openInit","openEnd","filterEnd","pasteInit","onPasteInit","selectAllInit","clearAllInit","onPathColumn","beforeRequest","afterRequest","pasteEnd","onpasteEnd","cutCopyInit","oncutCopyInit","menuItemData","onMenuItemData","resizeEnd","onDetailsResizeHandler","splitterResize","layoutRefresh","dropPath","onDropPath","updateSelectionData","removeEventListener","off","getRowInfo","target","folderPath","feParent","dragHelper","dragTarget","sender","dragLi","name","getElementsByClassName","innerText","activeElements","dragData","dragRow","dragPath","getSelectedRows","virtualDragElement","gridHeaderColGroup","firstChild","childNodes","gridContentColGroup","gridHeaderColNames","allowDragAndDrop","cursorAt","dragCursorPosition","distance","enableTailMode","dragArea","ROW","drag","dragStart","dragStop","enableAutoScroll","helper","targetModule","cwdData","dropData","info","isFile","activeRecords","destinationPath","isDestroyed","unWireEvents","updateType","item","folder","FOLDER","action","selectedRecords","triggerSelect","getRowByIndex","lastItemIndex","lastItem","removeAttribute","currentItemText","indexes","multiSelect","isDevice","visitedItem","checkItem","gridSelectNodes","selectSize","record","name_3","wireClickEvent","keyboardModule","keyAction","keyupHandler","eventName","keyboardDownModule","keydownHandler","removeFocus","toBind","proxy_1","ele","clickObj","tap","eve","tapCount","originalEvent","contains","tapHold","preventDefault","getFocusedItemIndex","getFocusedItem","parseInt","getAttribute","gridItems","gridLength","focItem","focIndex","selIndex","selRowIndeces","firstItem","performDelete","doDownload","performRename","crtSrlPos","scrollTop","crtFocusIndex","checkRowsKey","spaceSelection","shiftMoveMethod","moveFunction","ctrlMoveFunction","permissionDownload","permissionEdit","isSelected","shiftSelectFocusItem","shiftSelectedItem","lItem","nextItem","nextIndex","indexValue","checkAllRows","InnerItems","fItem","itemArr","fIndex","selRowIndexes","itemElement","FOCUS","FOCUSED","check","shiftKey","deleteFiles","downloadFiles","openFile","renameFile","getRecords","records","hasFilter","filter","name_4","ids","newIds","dRecords"],"sources":["C:/Users/shahj/OneDrive/Documents/GitHub/Multifunctional-React-Dashboard/node_modules/@syncfusion/ej2-filemanager/src/file-manager/layout/details-view.js"],"sourcesContent":["import { Grid, Resize, ContextMenu, Sort, VirtualScroll } from '@syncfusion/ej2-grids';\nimport { select, KeyboardEvents, EventHandler, getValue, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined as isNOU, Touch, setValue, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { Internationalization, closest, Draggable } from '@syncfusion/ej2-base';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nimport * as events from '../base/constant';\nimport * as CLS from '../base/classes';\nimport { createDialog, createImageDialog } from '../pop-up/dialog';\nimport { removeBlur, openAction, getImageUrl, fileType, getSortedData, getLocaleText, updateLayout } from '../common/utility';\nimport { createEmptyElement } from '../common/utility';\nimport { read, Download, GetDetails, Delete } from '../common/operations';\nimport { cutFiles, addBlur, openSearchFolder, copyFiles, removeActive, pasteHandler, getPathObject, getName } from '../common/index';\nimport { hasReadAccess, hasEditAccess, hasDownloadAccess, doRename, getAccessClass, createDeniedDialog, rename } from '../common/index';\nimport { createVirtualDragElement, dragStopHandler, dragStartHandler, draggingHandler, getModule, getFullPath } from '../common/index';\nimport { getDirectoryPath, updateRenamingData, getItemName, doDeleteFiles, doDownloadFiles } from '../common/index';\n/**\n * DetailsView module\n */\nvar DetailsView = /** @class */ (function () {\n    /**\n     * Constructor for the GridView module\n     *\n     * @param {FileManager} parent - specifies the parent.\n     * @hidden\n     */\n    function DetailsView(parent) {\n        this.isInteracted = true;\n        this.interaction = true;\n        this.isPasteOperation = false;\n        this.isColumnRefresh = false;\n        this.dragObj = null;\n        this.startIndex = null;\n        this.firstItemIndex = null;\n        this.isSelectionUpdate = false;\n        this.currentSelectedItem = [];\n        this.count = 0;\n        this.isRendered = true;\n        this.isLoaded = false;\n        this.isNameWidth = false;\n        this.pasteOperation = false;\n        this.uploadOperation = false;\n        Grid.Inject(Resize, ContextMenu, Sort, VirtualScroll);\n        this.parent = parent;\n        this.element = select('#' + this.parent.element.id + CLS.GRID_ID, this.parent.element);\n        this.addEventListener();\n        this.keyConfigs = {\n            altEnter: 'alt+enter',\n            esc: 'escape',\n            tab: 'tab',\n            moveDown: 'downarrow',\n            ctrlEnd: 'ctrl+end',\n            ctrlHome: 'ctrl+home',\n            ctrlDown: 'ctrl+downarrow',\n            ctrlLeft: 'ctrl+leftarrow',\n            ctrlRight: 'ctrl+rightarrow',\n            shiftEnd: 'shift+end',\n            shiftHome: 'shift+home',\n            shiftDown: 'shift+downarrow',\n            shiftUp: 'shift+uparrow',\n            ctrlUp: 'ctrl+uparrow',\n            csEnd: 'ctrl+shift+end',\n            csHome: 'ctrl+shift+home',\n            csDown: 'ctrl+shift+downarrow',\n            csUp: 'ctrl+shift+uparrow',\n            space: 'space',\n            ctrlSpace: 'ctrl+space',\n            shiftSpace: 'shift+space',\n            csSpace: 'ctrl+shift+space',\n            end: 'end',\n            home: 'home',\n            moveUp: 'uparrow',\n            del: 'delete',\n            ctrlX: 'ctrl+x',\n            ctrlC: 'ctrl+c',\n            ctrlV: 'ctrl+v',\n            ctrlShiftN: 'ctrl+shift+n',\n            shiftdel: 'shift+delete',\n            ctrlD: 'ctrl+d',\n            f2: 'f2',\n            ctrlA: 'ctrl+a',\n            enter: 'enter'\n        };\n    }\n    /* istanbul ignore next */\n    DetailsView.prototype.render = function (args) {\n        showSpinner(this.parent.element);\n        if (this.parent.view === 'Details') {\n            removeClass([this.parent.element], CLS.MULTI_SELECT);\n            // eslint-disable-next-line\n            var items = getSortedData(this.parent, args.files);\n            this.checkNameWidth();\n            var columns = this.getColumns();\n            var sortSettings = void 0;\n            if (this.parent.isMobile) {\n                sortSettings = [];\n            }\n            else {\n                if (this.parent.sortOrder !== 'None') {\n                    sortSettings = [{ direction: this.parent.sortOrder, field: this.parent.sortBy }];\n                }\n            }\n            this.gridObj = new Grid({\n                dataSource: items,\n                allowSorting: true,\n                rowSelecting: this.onSelection.bind(this, 'select'),\n                rowDeselecting: this.onSelection.bind(this, 'unselect'),\n                rowSelected: this.onSelected.bind(this),\n                rowDeselected: this.onDeSelection.bind(this),\n                allowResizing: this.parent.detailsViewSettings.columnResizing,\n                selectionSettings: {\n                    type: this.parent.allowMultiSelection ? 'Multiple' : 'Single',\n                    checkboxMode: 'ResetOnRowClick'\n                },\n                enableRtl: this.parent.enableRtl,\n                pageSettings: { pageSize: 20 },\n                sortSettings: { allowUnsort: false, columns: sortSettings },\n                columns: columns,\n                recordDoubleClick: this.DblClickEvents.bind(this),\n                beforeDataBound: this.onBeforeDataBound.bind(this),\n                dataBound: this.onDataBound.bind(this),\n                rowDataBound: this.onRowDataBound.bind(this),\n                actionBegin: this.onActionBegin.bind(this),\n                headerCellInfo: this.onHeaderCellInfo.bind(this),\n                width: '100%',\n                beforeCopy: function (args) { args.cancel = true; },\n                // eslint-disable-next-line\n                load: function (args) {\n                    this.focusModule.destroy();\n                },\n                locale: this.parent.locale\n            });\n            this.gridObj.isStringTemplate = true;\n            this.gridObj.appendTo('#' + this.parent.element.id + CLS.GRID_ID);\n            this.wireEvents();\n            this.adjustHeight();\n            this.emptyArgs = args;\n        }\n    };\n    DetailsView.prototype.checkNameWidth = function () {\n        var initialColumn = this.parent.detailsViewSettings.columns;\n        this.isNameWidth = false;\n        for (var i = 0; i < initialColumn.length; i++) {\n            if (initialColumn[i].field === 'name') {\n                this.isNameWidth = !isNOU(initialColumn[i].width);\n                return;\n            }\n        }\n    };\n    DetailsView.prototype.adjustWidth = function (columns, fieldName) {\n        if (this.isNameWidth && (fieldName === 'name')) {\n            return;\n        }\n        for (var i = 0; i < columns.length; i++) {\n            if (columns[i].field === fieldName) {\n                var nameWidth = void 0;\n                if (this.parent.breadcrumbbarModule.searchObj.element.value === '' && !this.parent.isFiltered) {\n                    nameWidth = (this.element.clientWidth <= 500) ? '120px' : 'auto';\n                }\n                else {\n                    nameWidth = (this.element.clientWidth <= 680) ? ((fieldName === 'name') ? '120px' : '180px') : 'auto';\n                }\n                columns[i].width = nameWidth;\n            }\n        }\n    };\n    DetailsView.prototype.getColumns = function () {\n        var columns;\n        if (this.parent.isMobile) {\n            columns = [\n                {\n                    field: 'name', headerText: getLocaleText(this.parent, 'Name'), width: 'auto', minWidth: 120, headerTextAlign: 'Left',\n                    template: '<div class=\"e-fe-text\">${name}</div><div class=\"e-fe-date\">${_fm_modified}</div>' +\n                        '<span class=\"e-fe-size\">${size}</span>'\n                }\n            ];\n        }\n        else {\n            columns = JSON.parse(JSON.stringify(this.parent.detailsViewSettings.columns));\n            this.adjustWidth(columns, 'name');\n            for (var i = 0, len = columns.length; i < len; i++) {\n                columns[i].headerText = getLocaleText(this.parent, columns[i].headerText);\n            }\n        }\n        var iWidth = ((this.parent.isMobile || this.parent.isBigger) ? '54' : '46');\n        var icon = {\n            field: 'type', width: iWidth, minWidth: iWidth, template: '<span class=\"e-fe-icon ${_fm_iconClass}\"></span>',\n            allowResizing: false, allowSorting: true, customAttributes: { class: 'e-fe-grid-icon' },\n            headerTemplate: '<span class=\"e-fe-icon e-fe-folder\"></span>'\n        };\n        columns.unshift(icon);\n        if (this.parent.allowMultiSelection) {\n            var cWidth = (this.parent.isBigger ? '36' : '26');\n            var cBox = {\n                type: 'checkbox', width: cWidth, minWidth: cWidth, customAttributes: { class: 'e-fe-checkbox' },\n                allowResizing: false, allowSorting: false\n            };\n            if (this.parent.isMobile) {\n                columns.push(cBox);\n            }\n            else {\n                columns.unshift(cBox);\n            }\n        }\n        for (var i = 0, len = columns.length; i < len; i++) {\n            columns[i].disableHtmlEncode = !this.parent.enableHtmlSanitizer;\n        }\n        return columns;\n    };\n    DetailsView.prototype.adjustHeight = function () {\n        if (!this.gridObj) {\n            return;\n        }\n        var pane = select('#' + this.parent.element.id + CLS.CONTENT_ID, this.parent.element);\n        var bar = select('#' + this.parent.element.id + CLS.BREADCRUMBBAR_ID, this.parent.element);\n        var gridHeader = select('.' + CLS.GRID_HEADER, this.parent.element);\n        var height = (pane.offsetHeight - bar.offsetHeight - gridHeader.offsetHeight);\n        this.gridObj.height = height;\n        this.gridObj.dataBind();\n    };\n    DetailsView.prototype.renderCheckBox = function () {\n        this.gridObj.columns = this.getColumns();\n        this.isColumnRefresh = true;\n        this.gridObj.refreshColumns();\n    };\n    DetailsView.prototype.onRowDataBound = function (args) {\n        var td = select('.e-fe-grid-name', args.row);\n        if (!td) {\n            var columns = this.parent.detailsViewSettings.columns;\n            for (var i = 0; i < columns.length; i++) {\n                if (columns[i].field === 'name') {\n                    td = args.row.children[this.parent.allowMultiSelection ? (i + 2) : (i + 1)];\n                    break;\n                }\n            }\n        }\n        if (td) {\n            td.setAttribute('title', getValue('name', args.data));\n        }\n        if (this.parent.isLayoutChange && this.parent.isCut && this.parent.fileAction === 'move' &&\n            this.parent.selectedNodes && this.parent.selectedNodes.length !== 0) {\n            if (this.parent.selectedNodes.indexOf(getValue('name', args.data)) !== -1) {\n                addBlur(args.row);\n            }\n        }\n        if (!this.parent.showFileExtension && getValue('isFile', args.data)) {\n            var textEle = args.row.querySelector('.e-fe-text');\n            if (textEle) {\n                var name_1 = getValue('name', args.data);\n                var type = getValue('type', args.data);\n                textEle.innerHTML = name_1.substr(0, name_1.length - type.length);\n            }\n        }\n        if (getValue('size', args.data) !== undefined && args.row.querySelector('.e-fe-size')) {\n            var sizeEle = args.row.querySelector('.e-fe-size');\n            var modifiedSize = void 0;\n            if (!getValue('isFile', args.data)) {\n                modifiedSize = '';\n            }\n            else {\n                var sizeValue = getValue('size', args.data);\n                var intl = new Internationalization(this.parent.locale);\n                var value = intl.formatNumber((sizeValue / 1024), { format: 'n' });\n                modifiedSize = value + ' ' + getLocaleText(this.parent, 'KB');\n            }\n            sizeEle.innerHTML = modifiedSize;\n        }\n        if (this.parent.isMobile) {\n            if (getValue('_fm_modified', args.data) !== undefined && args.row.querySelector('.e-fe-date')) {\n                var dateEle = args.row.querySelector('.e-fe-date');\n                var intl = new Internationalization(this.parent.locale);\n                var columns = this.parent.detailsViewSettings.columns;\n                // eslint-disable-next-line\n                var format = void 0;\n                for (var i = 0; i < columns.length; i++) {\n                    if (columns[i].field === 'dateModified') {\n                        format = columns[i].format;\n                        break;\n                    }\n                }\n                var formattedString = intl.formatDate(new Date(getValue('_fm_modified', args.data)), format);\n                dateEle.innerHTML = formattedString;\n            }\n        }\n        var checkWrap = args.row.querySelector('.' + CLS.CB_WRAP);\n        if (checkWrap) {\n            checkWrap.classList.add('e-small');\n        }\n        if (!hasEditAccess(args.data)) {\n            args.row.className += ' ' + getAccessClass(args.data);\n        }\n        var eventArgs = {\n            element: args.row,\n            fileDetails: args.data,\n            module: 'DetailsView'\n        };\n        this.parent.trigger('fileLoad', eventArgs);\n    };\n    DetailsView.prototype.onActionBegin = function (args) {\n        if (args.requestType === 'sorting') {\n            this.parent.setProperties({ sortOrder: args.direction }, true);\n            this.parent.setProperties({ sortBy: args.columnName }, true);\n            if (this.parent.selectedItems.length !== 0) {\n                this.sortItem = true;\n                var rows = this.gridObj.getSelectedRowIndexes();\n                var len = rows.length;\n                this.sortSelectedNodes = [];\n                while (len > 0) {\n                    // eslint-disable-next-line\n                    var data = this.gridObj.getRowsObject()[rows[len - 1]].data;\n                    this.sortSelectedNodes.push(getValue(this.parent.hasId ? 'id' : 'name', data));\n                    len--;\n                }\n            }\n            this.parent.notify(events.sortByChange, {});\n        }\n    };\n    DetailsView.prototype.onHeaderCellInfo = function (args) {\n        var checkWrap = args.node.querySelector('.' + CLS.CB_WRAP);\n        if (checkWrap) {\n            checkWrap.classList.add('e-small');\n        }\n    };\n    DetailsView.prototype.onBeforeDataBound = function (args) {\n        showSpinner(this.parent.element);\n        // eslint-disable-next-line\n        var items = getSortedData(this.parent, this.gridObj.dataSource);\n        args.result = items;\n    };\n    /* istanbul ignore next */\n    DetailsView.prototype.onDataBound = function () {\n        this.createDragObj();\n        if (this.parent.selectedItems.length !== 0) {\n            this.selectRecords(this.parent.selectedItems);\n        }\n        if (this.isPasteOperation === true) {\n            if (!this.isColumnRefresh) {\n                this.selectRecords(this.parent.pasteNodes);\n                this.isPasteOperation = false;\n            }\n            else {\n                this.isColumnRefresh = false;\n            }\n        }\n        if (this.parent.createdItem) {\n            this.selectRecords([getValue(this.parent.hasId ? 'id' : 'name', this.parent.createdItem)]);\n            this.parent.createdItem = null;\n        }\n        if (this.parent.layoutSelectedItems.length) {\n            this.selectRecords(this.parent.layoutSelectedItems);\n        }\n        if (this.parent.renamedItem) {\n            this.addSelection(this.parent.renamedItem);\n            this.parent.renamedItem = null;\n        }\n        if (this.sortItem === true) {\n            this.selectRecords(this.sortSelectedNodes);\n            this.sortItem = false;\n        }\n        if (this.isSelectionUpdate) {\n            if (!this.isColumnRefresh) {\n                this.selectRecords(this.currentSelectedItem);\n                this.isSelectionUpdate = false;\n            }\n            else {\n                this.isColumnRefresh = false;\n            }\n        }\n        if (this.uploadOperation === true) {\n            this.count++;\n            this.selectRecords(this.parent.uploadItem);\n            if (this.count === this.parent.uploadItem.length) {\n                this.uploadOperation = false;\n                this.parent.uploadItem = [];\n            }\n        }\n        if (this.gridObj.currentViewData.length * this.gridObj.getRowHeight() < this.gridObj.height) {\n            var hdTable = this.gridObj.getHeaderContent();\n            hdTable.style.paddingRight = '';\n            hdTable.style.paddingLeft = '';\n            var hdContent = select('.e-headercontent', hdTable);\n            hdContent.style.borderRightWidth = '0';\n            var cnTable = this.gridObj.getContent().querySelector('.e-content');\n            cnTable.style.overflowY = '';\n            cnTable.classList.add('e-scrollShow');\n        }\n        else {\n            var hdTable = this.gridObj.getHeaderContent();\n            if (!this.parent.enableRtl) {\n                hdTable.style.paddingRight = '16px';\n            }\n            else {\n                hdTable.style.paddingLeft = '16px';\n            }\n            var cnTable = this.gridObj.getContent().querySelector('.e-content');\n            cnTable.classList.remove('e-scrollShow');\n        }\n        this.isRendered = true;\n        this.parent.isLayoutChange = false;\n        hideSpinner(this.parent.element);\n        this.checkEmptyDiv(this.emptyArgs);\n        this.isInteracted = this.isLoaded ? true : this.isInteracted;\n        this.isLoaded = false;\n    };\n    DetailsView.prototype.selectRecords = function (nodes) {\n        // eslint-disable-next-line\n        var gridRecords = this.gridObj.getCurrentViewRecords();\n        var sRecords = [];\n        for (var i = 0, len = gridRecords.length; i < len; i++) {\n            var node = this.parent.hasId ? getValue('id', gridRecords[i]) : getName(this.parent, gridRecords[i]);\n            if (nodes.indexOf(node) !== -1) {\n                sRecords.push(i);\n            }\n        }\n        if (sRecords.length !== 0) {\n            this.gridObj.selectRows(sRecords);\n            this.addFocus(this.gridObj.selectedRowIndex);\n        }\n    };\n    // eslint-disable-next-line\n    DetailsView.prototype.addSelection = function (data) {\n        // eslint-disable-next-line\n        var items = this.gridObj.getCurrentViewRecords();\n        // eslint-disable-next-line\n        var rData = [];\n        if (this.parent.hasId) {\n            rData = new DataManager(items).\n                executeLocal(new Query().where('id', 'equal', this.parent.renamedId, false));\n        }\n        else {\n            // eslint-disable-next-line\n            var nData = new DataManager(items).\n                executeLocal(new Query().where('name', 'equal', getValue('name', data), false));\n            if (nData.length > 0) {\n                rData = new DataManager(nData).\n                    executeLocal(new Query().where('filterPath', 'equal', this.parent.filterPath, false));\n            }\n        }\n        if (rData.length > 0) {\n            var index = items.indexOf(rData[0]);\n            this.gridObj.selectRows([index]);\n        }\n    };\n    DetailsView.prototype.onSortColumn = function () {\n        if (this.parent.sortOrder !== 'None') {\n            this.gridObj.sortModule.sortColumn(this.parent.sortBy, this.parent.sortOrder);\n        }\n        else {\n            // eslint-disable-next-line\n            this.gridObj.dataSource = getSortedData(this.parent, this.gridObj.dataSource);\n        }\n    };\n    DetailsView.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName() && e.module !== 'common') {\n            /* istanbul ignore next */\n            return;\n        }\n        for (var _i = 0, _a = Object.keys(e.newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'allowDragAndDrop':\n                    this.createDragObj();\n                    break;\n                case 'height':\n                    this.adjustHeight();\n                    break;\n                case 'detailsViewSettings':\n                    if (!isNullOrUndefined(this.gridObj)) {\n                        this.checkNameWidth();\n                        var columns = this.getColumns();\n                        this.gridObj.columns = columns;\n                        this.gridObj.allowResizing = this.parent.detailsViewSettings.columnResizing;\n                        this.gridObj.dataBind();\n                        this.gridObj.refreshColumns();\n                    }\n                    break;\n                case 'selectedItems':\n                    this.interaction = false;\n                    if (this.parent.selectedItems.length !== 0) {\n                        if (!this.parent.allowMultiSelection) {\n                            var slItems = this.parent.selectedItems.slice(this.parent.selectedItems.length - 1);\n                            this.parent.setProperties({ selectedItems: slItems }, true);\n                        }\n                        this.selectRecords(this.parent.selectedItems);\n                        this.parent.setProperties({ selectedItems: this.parent.selectedItems }, true);\n                    }\n                    else if (!isNOU(this.gridObj)) {\n                        this.gridObj.clearSelection();\n                    }\n                    break;\n                case 'showFileExtension':\n                    read(this.parent, events.pathChanged, this.parent.path);\n                    break;\n                case 'showHiddenItems':\n                    read(this.parent, events.pathChanged, this.parent.path);\n                    break;\n                case 'allowMultiSelection':\n                    if (!isNullOrUndefined(this.gridObj)) {\n                        this.currentSelectedItem = this.parent.selectedItems;\n                        this.gridObj.selectionSettings.type = e.newProp.allowMultiSelection ? 'Multiple' : 'Single';\n                        this.isSelectionUpdate = true;\n                        this.renderCheckBox();\n                    }\n                    break;\n                case 'view':\n                    updateLayout(this.parent, 'Details');\n                    break;\n                case 'width':\n                    this.onDetailsResize();\n            }\n        }\n    };\n    DetailsView.prototype.onPathChanged = function (args) {\n        this.parent.isCut = false;\n        if (this.parent.breadcrumbbarModule.searchObj.element.value.trim() === '' && this.gridObj) {\n            this.parent.searchedItems = [];\n            if (!this.parent.isFiltered) {\n                this.removePathColumn(false);\n            }\n            else {\n                this.updatePathColumn();\n            }\n        }\n        removeBlur(this.parent);\n        if (this.parent.view === 'Details') {\n            /* istanbul ignore next */\n            this.isInteracted = false;\n            showSpinner(this.parent.element);\n            this.parent.setProperties({ selectedItems: [] }, true);\n            this.gridObj.dataSource = getSortedData(this.parent, args.files);\n        }\n        this.emptyArgs = args;\n    };\n    DetailsView.prototype.updatePathColumn = function () {\n        var len = this.gridObj.columns.length;\n        var columnData = JSON.parse(JSON.stringify(this.gridObj.columns));\n        if (columnData[len - 1].field && columnData[len - 1].field !== 'filterPath' && !this.parent.isMobile) {\n            var pathColumn = {\n                field: 'filterPath', headerText: getLocaleText(this.parent, 'Path'), minWidth: 180, width: 'auto'\n            };\n            this.gridObj.columns.push(pathColumn);\n            this.adjustWidth(this.gridObj.columns, 'filterPath');\n            this.adjustWidth(this.gridObj.columns, 'name');\n            this.isColumnRefresh = true;\n            this.gridObj.refreshColumns();\n        }\n    };\n    DetailsView.prototype.checkEmptyDiv = function (args) {\n        // eslint-disable-next-line\n        var items = getSortedData(this.parent, args.files);\n        if (items.length === 0 && !isNOU(this.element.querySelector('.' + CLS.GRID_VIEW))) {\n            createEmptyElement(this.parent, this.element, args);\n        }\n        else if (items.length !== 0 && this.element.querySelector('.' + CLS.EMPTY)) {\n            if (this.element.querySelector('.' + CLS.GRID_VIEW).querySelector('.' + CLS.EMPTY)) {\n                var emptyDiv = this.element.querySelector('.' + CLS.GRID_VIEW).querySelector('.' + CLS.EMPTY);\n                this.element.querySelector('.' + CLS.GRID_VIEW).removeChild(emptyDiv);\n            }\n            else {\n                this.element.removeChild(this.element.querySelector('.' + CLS.EMPTY));\n            }\n        }\n    };\n    DetailsView.prototype.onOpenInit = function () {\n        if (this.parent.activeModule === 'detailsview') {\n            // eslint-disable-next-line\n            var data = this.gridObj.getSelectedRecords()[0];\n            this.openContent(data);\n        }\n    };\n    DetailsView.prototype.DblClickEvents = function (args) {\n        this.gridObj.selectRows([args.rowIndex]);\n        // eslint-disable-next-line\n        var data;\n        if (args.rowData) {\n            data = JSON.parse(JSON.stringify(args.rowData));\n            this.openContent(data);\n        }\n    };\n    // eslint-disable-next-line\n    DetailsView.prototype.openContent = function (data) {\n        var _this = this;\n        if (!hasReadAccess(data)) {\n            createDeniedDialog(this.parent, data, events.permissionRead);\n            return;\n        }\n        var eventArgs = { cancel: false, fileDetails: data, module: 'DetailsView' };\n        this.parent.trigger('fileOpen', eventArgs, function (fileOpenArgs) {\n            if (!fileOpenArgs.cancel) {\n                var name_2 = getValue('name', data);\n                if (getValue('isFile', data)) {\n                    var icon = fileType(data);\n                    if (icon === CLS.ICON_IMAGE) {\n                        var imgUrl = getImageUrl(_this.parent, data);\n                        createImageDialog(_this.parent, name_2, imgUrl);\n                    }\n                }\n                else {\n                    var val = _this.parent.breadcrumbbarModule.searchObj.element.value;\n                    if (val === '' && !_this.parent.isFiltered) {\n                        var id = getValue('id', data);\n                        var newPath = _this.parent.path + (isNOU(id) ? name_2 : id) + '/';\n                        _this.parent.setProperties({ path: newPath }, true);\n                        _this.parent.pathNames.push(name_2);\n                        _this.parent.pathId.push(getValue('_fm_id', data));\n                        _this.parent.itemData = [data];\n                        openAction(_this.parent);\n                    }\n                    else {\n                        openSearchFolder(_this.parent, data);\n                    }\n                    _this.parent.isFiltered = false;\n                }\n                _this.element.focus();\n            }\n        });\n    };\n    /* istanbul ignore next */\n    DetailsView.prototype.onLayoutChange = function (args) {\n        if (this.parent.view === 'Details') {\n            if (!this.gridObj) {\n                this.render(args);\n            }\n            else {\n                this.isLoaded = true;\n            }\n            if (this.parent.isFiltered) {\n                this.updatePathColumn();\n                this.parent.setProperties({ selectedItems: [] }, true);\n            }\n            this.gridObj.dataSource = getSortedData(this.parent, args.files);\n            this.parent.notify(events.hideLayout, {});\n            this.gridObj.element.classList.remove(CLS.DISPLAY_NONE);\n            this.isInteracted = false;\n            this.gridObj.clearSelection();\n            if (this.parent.breadcrumbbarModule.searchObj.element.value.trim() !== '') {\n                this.onSearchFiles(args);\n            }\n            this.adjustHeight();\n            if (this.gridObj.sortSettings.columns.length > 0 && this.gridObj.sortSettings.columns[0].field !== this.parent.sortBy) {\n                if (this.parent.sortOrder !== 'None') {\n                    this.gridObj.sortColumn(this.parent.sortBy, this.parent.sortOrder);\n                }\n            }\n        }\n    };\n    /* istanbul ignore next */\n    DetailsView.prototype.onSearchFiles = function (args) {\n        if (this.parent.view === 'Details') {\n            this.parent.setProperties({ selectedItems: [] }, true);\n            this.parent.notify(events.selectionChanged, {});\n            if (!this.parent.isLayoutChange) {\n                this.parent.layoutSelectedItems = [];\n            }\n            this.updatePathColumn();\n            this.parent.searchedItems = args.files;\n            this.onPathChanged(args);\n        }\n    };\n    DetailsView.prototype.removePathColumn = function (isRefresh) {\n        var len = this.gridObj.columns.length;\n        var columnData = JSON.parse(JSON.stringify(this.gridObj.columns));\n        if (columnData[len - 1].field && (columnData[len - 1].field === 'filterPath')) {\n            /* istanbul ignore next */\n            if (this.gridObj.sortSettings.columns[0].field === 'filterPath') {\n                if (this.parent.sortOrder !== 'None') {\n                    this.gridObj.sortColumn('name', this.parent.sortOrder);\n                }\n                else {\n                    // eslint-disable-next-line\n                    this.gridObj.dataSource = getSortedData(this.parent, this.gridObj.dataSource);\n                }\n                this.parent.notify(events.sortByChange, {});\n            }\n            this.gridObj.columns.pop();\n            if (!isRefresh) {\n                this.isColumnRefresh = true;\n                this.gridObj.refreshColumns();\n            }\n        }\n    };\n    DetailsView.prototype.onFinalizeEnd = function (args) {\n        if (this.parent.view !== 'Details') {\n            return;\n        }\n        if (!this.gridObj) {\n            this.render(args);\n        }\n        else {\n            this.onPathChanged(args);\n        }\n    };\n    DetailsView.prototype.onCreateEnd = function (args) {\n        if (this.parent.view !== 'Details') {\n            return;\n        }\n        this.onPathChanged(args);\n    };\n    DetailsView.prototype.onRenameInit = function () {\n        if (this.parent.activeModule === 'detailsview' && this.parent.selectedItems.length === 1) {\n            this.updateRenameData();\n        }\n    };\n    DetailsView.prototype.onSelectedData = function () {\n        if (this.parent.activeModule === 'detailsview') {\n            this.parent.itemData = this.gridObj.getSelectedRecords();\n        }\n    };\n    DetailsView.prototype.onDeleteInit = function () {\n        if (this.parent.activeModule === 'detailsview') {\n            Delete(this.parent, this.parent.selectedItems, this.parent.path, 'delete');\n        }\n    };\n    /* istanbul ignore next */\n    DetailsView.prototype.onDeleteEnd = function (args) {\n        if (this.parent.view !== 'Details') {\n            return;\n        }\n        this.onPathChanged(args);\n        this.parent.setProperties({ selectedItems: [] }, true);\n    };\n    DetailsView.prototype.onRefreshEnd = function (args) {\n        if (this.parent.view !== 'Details') {\n            return;\n        }\n        this.isInteracted = false;\n        this.removePathColumn(false);\n        this.gridObj.dataSource = getSortedData(this.parent, args.files);\n        this.emptyArgs = args;\n    };\n    DetailsView.prototype.onHideLayout = function () {\n        if (this.parent.view !== 'Details' && this.gridObj) {\n            this.gridObj.element.classList.add(CLS.DISPLAY_NONE);\n        }\n    };\n    DetailsView.prototype.onSelectAllInit = function () {\n        if (this.parent.view === 'Details') {\n            this.isInteracted = false;\n            if (this.parent.allowMultiSelection) {\n                this.gridObj.selectionModule.selectRowsByRange(0, this.gridObj.getRows().length);\n            }\n            else {\n                this.gridObj.selectRow(this.gridObj.getRows().length - 1);\n            }\n            this.isInteracted = true;\n            this.interaction = true;\n        }\n    };\n    DetailsView.prototype.onClearAllInit = function () {\n        if (this.parent.view === 'Details') {\n            this.removeSelection();\n            this.interaction = true;\n        }\n    };\n    /* istanbul ignore next */\n    DetailsView.prototype.onSelectionChanged = function () {\n        removeClass([this.element], CLS.HEADER_CHECK);\n        if (this.parent.selectedItems.length > 0) {\n            addClass([this.element], CLS.HEADER_CHECK);\n        }\n    };\n    DetailsView.prototype.onLayoutRefresh = function () {\n        if (this.parent.view !== 'Details') {\n            return;\n        }\n        this.adjustHeight();\n    };\n    DetailsView.prototype.onBeforeRequest = function () {\n        this.isRendered = false;\n    };\n    DetailsView.prototype.onAfterRequest = function () {\n        this.isRendered = true;\n    };\n    DetailsView.prototype.onUpdateSelectionData = function () {\n        if (this.parent.view !== 'Details') {\n            return;\n        }\n        this.parent.itemData = this.gridObj.getSelectedRecords();\n    };\n    DetailsView.prototype.addEventListener = function () {\n        this.parent.on(events.finalizeEnd, this.onFinalizeEnd, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.layoutChange, this.onLayoutChange, this);\n        this.parent.on(events.pathChanged, this.onPathChanged, this);\n        this.parent.on(events.createEnd, this.onCreateEnd, this);\n        this.parent.on(events.dropInit, this.onDropInit, this);\n        this.parent.on(events.detailsInit, this.onDetailsInit, this);\n        this.parent.on(events.refreshEnd, this.onRefreshEnd, this);\n        this.parent.on(events.search, this.onSearchFiles, this);\n        this.parent.on(events.methodCall, this.onMethodCall, this);\n        this.parent.on(events.actionFailure, this.onActionFailure, this);\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.deleteInit, this.onDeleteInit, this);\n        this.parent.on(events.deleteEnd, this.onDeleteEnd, this);\n        this.parent.on(events.selectedData, this.onSelectedData, this);\n        this.parent.on(events.renameInit, this.onRenameInit, this);\n        this.parent.on(events.renameEnd, this.onPathChanged, this);\n        this.parent.on(events.openInit, this.onOpenInit, this);\n        this.parent.on(events.sortColumn, this.onSortColumn, this);\n        this.parent.on(events.openEnd, this.onPathChanged, this);\n        this.parent.on(events.filterEnd, this.onPathChanged, this);\n        this.parent.on(events.pasteInit, this.onPasteInit, this);\n        this.parent.on(events.hideLayout, this.onHideLayout, this);\n        this.parent.on(events.selectAllInit, this.onSelectAllInit, this);\n        this.parent.on(events.clearAllInit, this.onClearAllInit, this);\n        this.parent.on(events.pathColumn, this.onPathColumn, this);\n        this.parent.on(events.selectionChanged, this.onSelectionChanged, this);\n        this.parent.on(events.beforeRequest, this.onBeforeRequest, this);\n        this.parent.on(events.afterRequest, this.onAfterRequest, this);\n        this.parent.on(events.pasteEnd, this.onpasteEnd, this);\n        this.parent.on(events.cutCopyInit, this.oncutCopyInit, this);\n        this.parent.on(events.menuItemData, this.onMenuItemData, this);\n        this.parent.on(events.resizeEnd, this.onDetailsResizeHandler, this);\n        this.parent.on(events.splitterResize, this.onDetailsResize, this);\n        this.parent.on(events.layoutRefresh, this.onLayoutRefresh, this);\n        this.parent.on(events.dropPath, this.onDropPath, this);\n        this.parent.on(events.updateSelectionData, this.onUpdateSelectionData, this);\n    };\n    DetailsView.prototype.removeEventListener = function () {\n        this.parent.off(events.finalizeEnd, this.onFinalizeEnd);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.layoutChange, this.onLayoutChange);\n        this.parent.off(events.pathChanged, this.onPathChanged);\n        this.parent.off(events.pasteInit, this.onPasteInit);\n        this.parent.off(events.createEnd, this.onCreateEnd);\n        this.parent.off(events.refreshEnd, this.onRefreshEnd);\n        this.parent.off(events.search, this.onSearchFiles);\n        this.parent.off(events.methodCall, this.onMethodCall);\n        this.parent.off(events.actionFailure, this.onActionFailure);\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n        this.parent.off(events.renameInit, this.onRenameInit);\n        this.parent.off(events.renameEnd, this.onPathChanged);\n        this.parent.off(events.filterEnd, this.onPathChanged);\n        this.parent.off(events.openInit, this.onOpenInit);\n        this.parent.off(events.sortColumn, this.onSortColumn);\n        this.parent.off(events.openEnd, this.onPathChanged);\n        this.parent.off(events.hideLayout, this.onHideLayout);\n        this.parent.off(events.selectAllInit, this.onSelectAllInit);\n        this.parent.off(events.clearAllInit, this.onClearAllInit);\n        this.parent.off(events.deleteInit, this.onDeleteInit);\n        this.parent.off(events.deleteEnd, this.onDeleteEnd);\n        this.parent.off(events.pathColumn, this.onPathColumn);\n        this.parent.off(events.selectionChanged, this.onSelectionChanged);\n        this.parent.off(events.beforeRequest, this.onBeforeRequest);\n        this.parent.off(events.afterRequest, this.onAfterRequest);\n        this.parent.off(events.pasteEnd, this.onpasteEnd);\n        this.parent.off(events.cutCopyInit, this.oncutCopyInit);\n        this.parent.off(events.dropInit, this.onDropInit);\n        this.parent.off(events.selectedData, this.onSelectedData);\n        this.parent.off(events.detailsInit, this.onDetailsInit);\n        this.parent.off(events.menuItemData, this.onMenuItemData);\n        this.parent.off(events.resizeEnd, this.onDetailsResizeHandler);\n        this.parent.off(events.splitterResize, this.onDetailsResize);\n        this.parent.off(events.layoutRefresh, this.onLayoutRefresh);\n        this.parent.off(events.dropPath, this.onDropPath);\n        this.parent.off(events.updateSelectionData, this.onUpdateSelectionData);\n    };\n    DetailsView.prototype.onActionFailure = function () { this.interaction = true; };\n    // eslint-disable-next-line\n    DetailsView.prototype.onMenuItemData = function (args) {\n        if (this.parent.activeModule === this.getModuleName()) {\n            this.parent.itemData = [this.gridObj.getRowInfo(args.target).rowData];\n        }\n    };\n    DetailsView.prototype.onPasteInit = function () {\n        if (this.parent.activeModule === this.getModuleName()) {\n            this.parent.itemData = (this.parent.folderPath !== '') ? this.gridObj.getSelectedRecords() :\n                [getPathObject(this.parent)];\n        }\n    };\n    DetailsView.prototype.onDetailsInit = function () {\n        if (this.parent.activeModule === this.getModuleName()) {\n            if (this.parent.selectedItems.length !== 0) {\n                this.parent.itemData = this.gridObj.getSelectedRecords();\n            }\n            else {\n                this.parent.itemData = [getValue(this.parent.pathId[this.parent.pathId.length - 1], this.parent.feParent)];\n            }\n        }\n    };\n    DetailsView.prototype.dragHelper = function (args) {\n        var dragTarget = args.sender.target;\n        var dragLi = dragTarget.closest('tr.e-row');\n        if (!dragLi) {\n            return null;\n        }\n        var name = dragLi.getElementsByClassName('e-fe-text')[0].innerText;\n        if (dragLi && !dragLi.querySelector('.e-active')) {\n            this.selectRecords([name]);\n        }\n        getModule(this.parent, dragLi);\n        this.parent.activeElements = [];\n        this.parent.dragData = [];\n        // eslint-disable-next-line\n        this.parent.dragData = this.gridObj.getSelectedRecords();\n        var dragRow;\n        if (this.parent.dragData.length === 0 && dragLi) {\n            dragRow = this.gridObj.getRowInfo(dragLi);\n        }\n        if (dragRow) {\n            this.parent.dragData.push(dragRow.rowData);\n        }\n        this.parent.dragPath = this.parent.path;\n        this.parent.activeElements = this.gridObj.getSelectedRows();\n        createVirtualDragElement(this.parent);\n        return this.parent.virtualDragElement;\n    };\n    /* istanbul ignore next */\n    DetailsView.prototype.onDetailsResize = function () {\n        if (this.parent.view === 'Details' && !this.parent.isMobile && !isNOU(this.gridObj)) {\n            var gridHeader = this.gridObj.getHeaderContent().querySelector('.e-headercontent');\n            var gridHeaderColGroup = gridHeader.firstChild.childNodes[0];\n            var gridContentColGroup = this.gridObj.getContent().querySelector('.e-content .e-table').children[0];\n            var gridHeaderColNames = this.gridObj.getColumns();\n            for (var i = 0; i < gridHeaderColNames.length; i++) {\n                if ((!this.isNameWidth && gridHeaderColNames[i].field === 'name') || gridHeaderColNames[i].field === 'filterPath') {\n                    if (this.parent.breadcrumbbarModule.searchObj.element.value === '' && !this.parent.isFiltered) {\n                        if (this.element.clientWidth <= 500) {\n                            gridHeaderColGroup.children[i].setAttribute('style', 'width: 120px');\n                            gridContentColGroup.children[i].setAttribute('style', 'width: 120px');\n                        }\n                        else if (this.element.clientWidth > 500) {\n                            gridHeaderColGroup.children[i].setAttribute('style', 'width: auto');\n                            gridContentColGroup.children[i].setAttribute('style', 'width: auto');\n                        }\n                    }\n                    else {\n                        if (this.element.clientWidth <= 680) {\n                            if (gridHeaderColNames[i].field === 'name') {\n                                gridHeaderColGroup.children[i].setAttribute('style', 'width: 120px');\n                                gridContentColGroup.children[i].setAttribute('style', 'width: 120px');\n                            }\n                            else {\n                                gridHeaderColGroup.children[i].setAttribute('style', 'width: 180px');\n                                gridContentColGroup.children[i].setAttribute('style', 'width: 180px');\n                            }\n                        }\n                        else if (this.element.clientWidth > 680) {\n                            gridHeaderColGroup.children[i].setAttribute('style', 'width: auto');\n                            gridContentColGroup.children[i].setAttribute('style', 'width: auto');\n                        }\n                    }\n                }\n            }\n        }\n    };\n    DetailsView.prototype.onDetailsResizeHandler = function () {\n        this.onDetailsResize();\n        if (this.parent.view === 'Details' && !this.parent.isMobile && !isNOU(this.gridObj)) {\n            this.adjustHeight();\n        }\n    };\n    DetailsView.prototype.createDragObj = function () {\n        var _this = this;\n        if (!this.parent.isMobile && this.gridObj) {\n            if (this.parent.allowDragAndDrop) {\n                if (this.dragObj) {\n                    this.dragObj.destroy();\n                }\n                this.dragObj = new Draggable(this.gridObj.element, {\n                    cursorAt: this.parent.dragCursorPosition,\n                    distance: 5,\n                    enableTailMode: true,\n                    dragArea: this.parent.element,\n                    dragTarget: '.' + CLS.ROW,\n                    drag: draggingHandler.bind(this, this.parent),\n                    dragStart: function (args) {\n                        dragStartHandler(_this.parent, args, _this.dragObj);\n                    },\n                    dragStop: dragStopHandler.bind(this, this.parent),\n                    enableAutoScroll: true,\n                    helper: this.dragHelper.bind(this)\n                });\n            }\n            else if (!this.parent.allowDragAndDrop && this.dragObj) {\n                this.dragObj.destroy();\n            }\n        }\n    };\n    DetailsView.prototype.onDropInit = function (args) {\n        if (this.parent.targetModule === this.getModuleName()) {\n            /* istanbul ignore next */\n            // eslint-disable-next-line\n            var cwdData = getValue(this.parent.pathId[this.parent.pathId.length - 1], this.parent.feParent);\n            if (!args.target.closest('tr')) {\n                this.parent.dropPath = this.parent.path;\n                this.parent.dropData = cwdData;\n            }\n            else {\n                // eslint-disable-next-line\n                var info = null;\n                // eslint-disable-next-line\n                info = this.gridObj.getRowInfo(args.target).rowData;\n                this.parent.dropPath = info.isFile ? this.parent.path : getFullPath(this.parent, info, this.parent.path);\n                this.parent.dropData = info.isFile ? cwdData : info;\n            }\n        }\n    };\n    DetailsView.prototype.oncutCopyInit = function () {\n        if (this.parent.activeModule === this.getModuleName()) {\n            this.parent.activeRecords = this.gridObj.getSelectedRecords();\n            this.parent.activeElements = this.gridObj.getSelectedRows();\n        }\n    };\n    DetailsView.prototype.onpasteEnd = function (args) {\n        if (this.parent.view === 'Details') {\n            this.isPasteOperation = true;\n            if (this.parent.path === this.parent.destinationPath || this.parent.path === getDirectoryPath(this.parent, args)) {\n                this.onPathChanged(args);\n            }\n        }\n    };\n    DetailsView.prototype.onDropPath = function (args) {\n        if (this.parent.view === 'Details') {\n            this.isPasteOperation = true;\n            this.onPathChanged(args);\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} - returns modules name.\n     * @private\n     */\n    DetailsView.prototype.getModuleName = function () {\n        return 'detailsview';\n    };\n    DetailsView.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n        if (this.gridObj) {\n            this.unWireEvents();\n            this.gridObj.destroy();\n        }\n    };\n    DetailsView.prototype.updateType = function (item) {\n        var folder = select('.' + CLS.FOLDER, item);\n        this.parent.isFile = isNOU(folder) ? true : false;\n    };\n    /* istanbul ignore next */\n    DetailsView.prototype.onSelection = function (action, args) {\n        var eventArgs = {\n            action: action, fileDetails: args.data, isInteracted: this.interaction, cancel: false, target: args.target\n        };\n        this.parent.trigger('fileSelection', eventArgs);\n        args.cancel = eventArgs.cancel;\n    };\n    /* istanbul ignore next */\n    DetailsView.prototype.onSelected = function (args) {\n        this.parent.activeModule = 'detailsview';\n        if (!this.parent.isLayoutChange || this.parent.isFiltered) {\n            this.selectedRecords();\n        }\n        this.parent.notify(events.selectionChanged, {});\n        if (this.gridObj.getSelectedRowIndexes().length === 1) {\n            this.firstItemIndex = this.gridObj.selectedRowIndex;\n        }\n        this.gridObj.element.setAttribute('tabindex', '-1');\n        this.triggerSelect('select', args);\n        var item = this.gridObj.getRowByIndex(this.gridObj.selectedRowIndex);\n        this.updateType(item);\n        if (!isNOU(item) && !isNOU(item.querySelector('.e-checkselect'))) {\n            if (this.gridObj.getSelectedRowIndexes().length !== 1) {\n                var lastItemIndex = this.gridObj.getSelectedRowIndexes()[this.gridObj.getSelectedRowIndexes().length - 2];\n                var lastItem = this.gridObj.getRowByIndex(lastItemIndex);\n                lastItem.querySelector('.e-checkselect').setAttribute('tabindex', '-1');\n            }\n            item.querySelector('.e-rowcell.e-fe-checkbox').removeAttribute('tabindex');\n        }\n        if (!isNOU(this.gridObj) && !isNOU(this.gridObj.element.querySelector('.e-checkselectall'))) {\n            this.gridObj.element.querySelector('.e-checkselectall').setAttribute('tabindex', '-1');\n        }\n        var rows = this.gridObj.getSelectedRowIndexes();\n        if (!this.parent.allowMultiSelection) {\n            for (var i = 0; i < rows.length; i++) {\n                if (rows[i] === this.gridObj.selectedRowIndex) {\n                    this.gridObj.getRowByIndex(rows[i]).setAttribute('tabindex', '0');\n                }\n                else {\n                    this.gridObj.getRowByIndex(rows[i]).removeAttribute('tabindex');\n                }\n            }\n        }\n        var len = rows.length;\n        if (len > 0) {\n            // eslint-disable-next-line\n            var data = this.gridObj.getRowsObject()[rows[len - 1]].data;\n            this.parent.currentItemText = getValue('name', data);\n        }\n        var indexes = getValue('rowIndexes', args);\n        var multiSelect = getValue('enableSelectMultiTouch', this.gridObj.selectionModule);\n        if (this.parent.isDevice && isNOU(indexes) && args.target && !multiSelect && !args.target.closest('.e-headercell')) {\n            this.parent.isFile = getValue('isFile', args.data);\n            if (!this.parent.isFile) {\n                this.openContent(args.data);\n            }\n        }\n        this.parent.visitedItem = args.row;\n        if (this.parent.allowMultiSelection && !isNOU(item) && !isNOU(item.querySelector('.e-checkselect'))) {\n            var checkItem = item.querySelector('.e-checkselect');\n            checkItem.focus();\n        }\n        this.addFocus(this.gridObj.selectedRowIndex);\n        if (!this.parent.isLayoutChange) {\n            this.isInteracted = true;\n        }\n    };\n    /* istanbul ignore next */\n    DetailsView.prototype.onPathColumn = function () {\n        if (this.parent.view === 'Details' && !isNOU(this.gridObj)) {\n            if (this.parent.breadcrumbbarModule.searchObj.element.value === '' && !this.parent.isFiltered) {\n                this.removePathColumn(false);\n            }\n        }\n    };\n    DetailsView.prototype.selectedRecords = function () {\n        this.parent.setProperties({ selectedItems: [] }, true);\n        // eslint-disable-next-line\n        var selectedRecords = this.gridSelectNodes();\n        var selectSize = 0;\n        while (selectSize < selectedRecords.length) {\n            var record = selectedRecords[selectSize];\n            var name_3 = getItemName(this.parent, record);\n            this.parent.selectedItems.push(name_3);\n            selectSize++;\n        }\n        this.parent.setProperties({ selectedItems: this.parent.selectedItems }, true);\n    };\n    DetailsView.prototype.onDeSelection = function (args) {\n        /* istanbul ignore next */\n        if (!this.parent.allowMultiSelection && isNOU(args.data)) {\n            this.gridObj.getRowByIndex(args.rowIndex).removeAttribute('tabindex');\n        }\n        else if (this.gridObj.getSelectedRowIndexes().length > 1) {\n            var lastItemIndex = this.gridObj.getSelectedRowIndexes()[this.gridObj.getSelectedRowIndexes().length - 2];\n            this.gridObj.getRowByIndex(lastItemIndex).querySelector('.e-checkselect').removeAttribute('tabindex');\n        }\n        if (this.gridObj.selectedRowIndex === -1) {\n            this.gridObj.element.setAttribute('tabindex', '0');\n        }\n        if (!this.isInteracted) {\n            this.isInteracted = true;\n            return;\n        }\n        this.selectedRecords();\n        if (this.parent.selectedItems.length === 0) {\n            setValue('enableSelectMultiTouch', false, this.gridObj.selectionModule);\n            removeClass([this.parent.element], CLS.MULTI_SELECT);\n        }\n        this.parent.notify(events.selectionChanged, {});\n        this.triggerSelect('unselect', args);\n        this.parent.visitedItem = null;\n    };\n    DetailsView.prototype.triggerSelect = function (action, args) {\n        var eventArgs = { action: action, fileDetails: args.data, isInteracted: this.interaction };\n        this.parent.trigger('fileSelect', eventArgs);\n        this.interaction = true;\n    };\n    DetailsView.prototype.wireEvents = function () {\n        this.wireClickEvent(true);\n        this.keyboardModule = new KeyboardEvents(this.gridObj.element, {\n            keyAction: this.keyupHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keyup'\n        });\n        this.keyboardDownModule = new KeyboardEvents(this.element, {\n            keyAction: this.keydownHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n        EventHandler.add(this.gridObj.element, 'blur', this.removeFocus, this);\n    };\n    DetailsView.prototype.unWireEvents = function () {\n        this.wireClickEvent(false);\n        this.keyboardModule.destroy();\n        this.keyboardDownModule.destroy();\n        EventHandler.remove(this.gridObj.element, 'blur', this.removeFocus);\n    };\n    DetailsView.prototype.wireClickEvent = function (toBind) {\n        if (toBind) {\n            // eslint-disable-next-line\n            var proxy_1 = this;\n            var ele = this.gridObj.getContent();\n            this.clickObj = new Touch(ele, {\n                tap: function (eve) {\n                    if (eve.tapCount === 1 && eve.originalEvent.target.classList.contains('e-content')) {\n                        proxy_1.onClearAllInit();\n                    }\n                },\n                tapHold: function (e) {\n                    if (proxy_1.parent.isDevice) {\n                        e.originalEvent.preventDefault();\n                        if (proxy_1.parent.allowMultiSelection) {\n                            setValue('enableSelectMultiTouch', proxy_1.parent.allowMultiSelection, proxy_1.gridObj.selectionModule);\n                            addClass([proxy_1.parent.element], CLS.MULTI_SELECT);\n                        }\n                        var target = e.originalEvent.target;\n                        if (target) {\n                            var row = closest(target, '.' + CLS.ROW);\n                            var index = proxy_1.gridObj.getRows().indexOf(row);\n                            proxy_1.gridObj.selectRow(index);\n                        }\n                    }\n                }\n            });\n        }\n        else {\n            if (this.clickObj) {\n                this.clickObj.destroy();\n            }\n        }\n    };\n    /* istanbul ignore next */\n    DetailsView.prototype.removeSelection = function () {\n        removeClass([this.parent.element], CLS.MULTI_SELECT);\n        this.gridObj.clearSelection();\n        this.parent.setProperties({ selectedItems: [] }, true);\n        this.parent.notify(events.selectionChanged, {});\n        if (this.gridObj.selectedRowIndex === -1) {\n            this.startIndex = null;\n        }\n        this.isInteracted = true;\n    };\n    DetailsView.prototype.removeFocus = function () {\n        this.addFocus(null);\n    };\n    DetailsView.prototype.getFocusedItemIndex = function () {\n        return (!isNOU(this.getFocusedItem())) ?\n            parseInt(this.getFocusedItem().getAttribute('aria-rowindex'), 10) : null;\n    };\n    /* istanbul ignore next */\n    // eslint:disable-next-line\n    DetailsView.prototype.keydownHandler = function (e) {\n        if (!this.isRendered) {\n            return;\n        }\n        switch (e.action) {\n            case 'end':\n            case 'home':\n            case 'space':\n            case 'ctrlSpace':\n            case 'shiftSpace':\n            case 'csSpace':\n            case 'ctrlA':\n            case 'enter':\n            case 'altEnter':\n            case 'ctrlEnd':\n            case 'shiftEnd':\n            case 'csEnd':\n            case 'ctrlHome':\n            case 'shiftHome':\n            case 'csHome':\n            case 'ctrlDown':\n            case 'shiftDown':\n            case 'csDown':\n            case 'ctrlLeft':\n            case 'shiftLeft':\n            case 'csLeft':\n            case 'esc':\n            case 'del':\n            case 'shiftdel':\n            case 'ctrlC':\n            case 'ctrlV':\n            case 'ctrlX':\n            case 'f2':\n            case 'moveDown':\n            case 'moveUp':\n                e.preventDefault();\n                break;\n            default:\n                break;\n        }\n    };\n    /* istanbul ignore next */\n    // eslint:disable-next-line\n    DetailsView.prototype.keyupHandler = function (e) {\n        if (!this.isRendered) {\n            return;\n        }\n        e.preventDefault();\n        var action = e.action;\n        // eslint-disable-next-line\n        var gridItems = getSortedData(this.parent, this.gridObj.dataSource);\n        var gridLength = gridItems.length;\n        var focItem = this.getFocusedItem();\n        var focIndex = this.getFocusedItemIndex();\n        var selIndex = this.gridObj.selectedRowIndex;\n        var selRowIndeces = this.gridObj.getSelectedRowIndexes();\n        // eslint-disable-next-line\n        var rowData;\n        var firstItem;\n        var lastItem;\n        switch (action) {\n            case 'altEnter':\n                GetDetails(this.parent, this.parent.selectedItems, this.parent.path, 'details');\n                break;\n            case 'esc':\n                removeActive(this.parent);\n                break;\n            case 'del':\n            case 'shiftdel':\n                this.performDelete();\n                break;\n            case 'enter':\n                if (this.gridObj.selectedRowIndex === -1) {\n                    break;\n                }\n                rowData = this.gridObj.getRowsObject()[this.gridObj.selectedRowIndex].data;\n                if (rowData) {\n                    // eslint-disable-next-line\n                    var data = JSON.parse(JSON.stringify(rowData));\n                    this.openContent(data);\n                }\n                break;\n            case 'ctrlC':\n                copyFiles(this.parent);\n                break;\n            case 'ctrlV':\n                this.parent.folderPath = '';\n                pasteHandler(this.parent);\n                break;\n            case 'ctrlX':\n                cutFiles(this.parent);\n                break;\n            case 'ctrlD':\n                this.doDownload();\n                break;\n            case 'f2':\n                this.performRename();\n                break;\n            case 'ctrlA':\n                if (!isNOU(gridItems[0]) && this.parent.allowMultiSelection) {\n                    var cnTable = this.gridObj.getContent().querySelector('.e-content');\n                    var crtSrlPos = cnTable.scrollTop;\n                    var crtFocusIndex = this.gridObj.selectedRowIndex;\n                    this.gridObj.selectionModule.selectRowsByRange(0, gridItems.length - 1);\n                    cnTable.scrollTop = crtSrlPos;\n                    if (crtFocusIndex !== -1) {\n                        this.addFocus(crtFocusIndex);\n                    }\n                }\n                break;\n            case 'ctrlHome':\n            case 'tab':\n                if (!isNOU(gridItems[0])) {\n                    if (!this.parent.allowMultiSelection && e.action === 'ctrlHome') {\n                        this.gridObj.selectRow(0);\n                    }\n                    else if (this.gridObj.selectedRowIndex !== -1 && e.action === 'tab') {\n                        return;\n                    }\n                    else {\n                        this.addFocus(0);\n                    }\n                }\n                break;\n            case 'ctrlEnd':\n                if (!isNOU(gridItems[0])) {\n                    if (!this.parent.allowMultiSelection) {\n                        this.gridObj.selectRow(gridLength - 1);\n                    }\n                    else {\n                        this.addFocus(gridLength - 1);\n                    }\n                }\n                break;\n            case 'shiftHome':\n            case 'shiftEnd':\n            case 'csHome':\n            case 'csEnd':\n                if (!this.parent.allowMultiSelection) {\n                    this.gridObj.selectRow((e.action === 'shiftHome' || e.action === 'csHome') ? 0 : gridItems.length - 1);\n                }\n                else {\n                    if (!isNOU(gridItems[0])) {\n                        if (!isNOU(selIndex) && selIndex !== -1) {\n                            this.checkRowsKey(gridItems, selIndex, null, e);\n                        }\n                        else {\n                            if (e.action === 'csHome' || e.action === 'shiftHome') {\n                                this.gridObj.selectRow(0);\n                            }\n                            else {\n                                this.gridObj.selectionModule.selectRowsByRange(0, gridItems.length - 1);\n                            }\n                        }\n                    }\n                }\n                break;\n            case 'space':\n            case 'csSpace':\n            case 'shiftSpace':\n            case 'ctrlSpace':\n                this.spaceSelection(selRowIndeces, focIndex, selIndex, e);\n                break;\n            case 'csUp':\n            case 'csDown':\n            case 'shiftUp':\n            case 'shiftDown':\n                this.shiftMoveMethod(gridItems, selIndex, focIndex, selRowIndeces, e);\n                break;\n            case 'ctrlUp':\n            case 'ctrlDown':\n                if (!this.parent.allowMultiSelection) {\n                    this.moveFunction(gridItems, e, selIndex);\n                }\n                else {\n                    this.ctrlMoveFunction(gridItems, e, selIndex);\n                }\n                break;\n            case 'home':\n                firstItem = [getValue(this.parent.hasId ? 'id' : 'name', gridItems[0])];\n                this.parent.setProperties({ selectedItems: firstItem }, true);\n                this.selectRecords(firstItem);\n                break;\n            case 'moveUp':\n            case 'moveDown':\n                this.moveFunction(gridItems, e, selIndex);\n                break;\n            case 'end':\n                lastItem = [getValue(this.parent.hasId ? 'id' : 'name', gridItems[gridLength - 1])];\n                this.parent.setProperties({ selectedItems: lastItem }, true);\n                this.selectRecords(lastItem);\n                break;\n        }\n    };\n    // eslint-disable-next-line\n    DetailsView.prototype.gridSelectNodes = function () {\n        return this.gridObj.getSelectedRecords();\n    };\n    DetailsView.prototype.doDownload = function () {\n        if (this.parent.selectedItems.length !== 0) {\n            this.parent.itemData = this.gridObj.getSelectedRecords();\n            // eslint-disable-next-line\n            var items = this.parent.itemData;\n            for (var i = 0; i < items.length; i++) {\n                if (!hasDownloadAccess(items[i])) {\n                    createDeniedDialog(this.parent, items[i], events.permissionDownload);\n                    return;\n                }\n            }\n            Download(this.parent, this.parent.path, this.parent.selectedItems);\n        }\n    };\n    DetailsView.prototype.performDelete = function () {\n        if (this.parent.selectedItems && this.parent.selectedItems.length > 0) {\n            this.parent.itemData = this.gridObj.getSelectedRecords();\n            // eslint-disable-next-line\n            var items = this.parent.itemData;\n            for (var i = 0; i < items.length; i++) {\n                if (!hasEditAccess(items[i])) {\n                    createDeniedDialog(this.parent, items[i], events.permissionEdit);\n                    return;\n                }\n            }\n            createDialog(this.parent, 'Delete');\n        }\n    };\n    DetailsView.prototype.performRename = function () {\n        if (this.parent.selectedItems.length === 1) {\n            this.updateRenameData();\n            doRename(this.parent);\n        }\n    };\n    DetailsView.prototype.updateRenameData = function () {\n        // eslint-disable-next-line\n        var data = this.gridSelectNodes()[0];\n        updateRenamingData(this.parent, data);\n    };\n    // eslint-disable-next-line\n    DetailsView.prototype.shiftMoveMethod = function (gridItems, selIndex, focIndex, selRowIndeces, e) {\n        if (!this.parent.allowMultiSelection) {\n            this.moveFunction(gridItems, e, selIndex);\n        }\n        else {\n            if (selIndex === -1 && (e.action === 'csUp' || e.action === 'csDown')) {\n                this.ctrlMoveFunction(gridItems, e, selIndex);\n            }\n            else if (selIndex !== -1 && focIndex !== selIndex &&\n                !((e.action === 'csUp' || e.action === 'csDown') && this.isSelected(selRowIndeces, focIndex))) {\n                this.shiftSelectFocusItem(selIndex, focIndex, selRowIndeces, e);\n            }\n            else {\n                this.shiftSelectedItem(selIndex, selRowIndeces, gridItems, e);\n            }\n        }\n    };\n    // eslint-disable-next-line\n    DetailsView.prototype.moveFunction = function (selectedItems, e, rowIndex) {\n        if (!isNOU(this.getFocusedItem()) && this.parent.allowMultiSelection) {\n            if (e.action === 'moveDown') {\n                this.gridObj.selectRow(this.getFocusedItemIndex() + 1);\n            }\n            else {\n                this.gridObj.selectRow(this.getFocusedItemIndex() - 1);\n            }\n        }\n        else if (!isNOU(rowIndex) && rowIndex !== -1) {\n            if (e.action === 'moveDown' || e.action === 'ctrlDown' || e.action === 'shiftDown' || e.action === 'csDown') {\n                this.gridObj.selectRow(rowIndex + ((rowIndex !== selectedItems.length - 1) ? 1 : 0));\n            }\n            else {\n                this.gridObj.selectRow(rowIndex - ((rowIndex !== 0) ? 1 : 0));\n            }\n        }\n        else {\n            if (!isNOU(selectedItems[0])) {\n                this.gridObj.selectRow(0);\n            }\n        }\n    };\n    DetailsView.prototype.spaceSelection = function (selRowIndeces, focIndex, selIndex, e) {\n        if (!this.isSelected(selRowIndeces, focIndex) && selIndex !== -1 && (e.action === 'shiftSpace' || e.action === 'csSpace')) {\n            if (focIndex < selIndex) {\n                this.gridObj.selectionModule.selectRowsByRange(focIndex, selIndex);\n            }\n            else {\n                this.gridObj.selectionModule.selectRowsByRange(selIndex, focIndex);\n            }\n        }\n        else if (!isNOU(this.getFocusedItem()) && focIndex !== selIndex) {\n            selRowIndeces.push(this.getFocusedItemIndex());\n            this.gridObj.selectRows(selRowIndeces);\n        }\n        else if (selIndex !== -1 && e.action === 'ctrlSpace' && this.parent.allowMultiSelection) {\n            var lItem = selIndex;\n            selRowIndeces.pop();\n            this.gridObj.selectRows(selRowIndeces);\n            this.addFocus(lItem);\n        }\n        else if (e.action === 'shiftSpace') {\n            this.gridObj.selectRow(selIndex);\n        }\n    };\n    // eslint-disable-next-line\n    DetailsView.prototype.ctrlMoveFunction = function (items, e, rowIndex) {\n        var nextItem;\n        if (!isNOU(this.getFocusedItem())) {\n            var nextIndex = this.getFocusedItemIndex();\n            nextItem = (e.action === 'ctrlDown' || e.action === 'csDown') ?\n                nextIndex + ((nextIndex < items.length - 1) ? 1 : 0) : nextIndex - ((nextIndex < 1) ? 0 : 1);\n        }\n        else if (!isNOU(rowIndex) && rowIndex !== -1) {\n            nextItem = (e.action === 'ctrlDown' || e.action === 'csDown') ?\n                rowIndex + ((rowIndex < items.length) ? 1 : 0) : rowIndex - ((rowIndex < 1) ? 0 : 1);\n        }\n        else {\n            if (!isNOU(items[0])) {\n                nextItem = 0;\n            }\n        }\n        this.addFocus(nextItem);\n    };\n    // eslint-disable-next-line\n    DetailsView.prototype.checkRowsKey = function (items, indexValue, focIndex, e) {\n        if (this.gridObj.checkAllRows === 'Uncheck' || this.gridObj.checkAllRows === 'Intermediate') {\n            if (e.action !== 'csHome' && e.action !== 'csEnd') {\n                if (isNOU(this.startIndex) && this.firstItemIndex !== indexValue) {\n                    this.firstItemIndex = indexValue;\n                }\n                if (e.action === 'shiftEnd') {\n                    this.gridObj.selectionModule.selectRowsByRange(this.firstItemIndex, items.length - 1);\n                }\n                else {\n                    this.gridObj.selectionModule.selectRowsByRange(0, this.firstItemIndex);\n                }\n                this.startIndex = indexValue;\n            }\n            else {\n                if (e.action === 'csEnd') {\n                    this.gridObj.\n                        selectRows(this.InnerItems(isNOU(indexValue) ? 0 : indexValue, isNOU(focIndex) ? items.length - 1 : focIndex, e));\n                }\n                else {\n                    if (isNOU(indexValue)) {\n                        this.gridObj.selectRow(0);\n                    }\n                    else {\n                        this.gridObj.selectRows(this.InnerItems(isNOU(focIndex) ? 0 : focIndex, indexValue, e));\n                    }\n                }\n            }\n        }\n        else {\n            this.gridObj.selectionModule.selectRow(((e.action === 'shiftHome' || e.action === 'csHome') ? 0 : items.length - 1));\n        }\n    };\n    DetailsView.prototype.InnerItems = function (fItem, lItem, e) {\n        var itemArr = this.gridObj.getSelectedRowIndexes();\n        if (e.action === 'csEnd') {\n            for (var i = fItem + 1; i <= lItem; i++) {\n                itemArr.push(i);\n            }\n        }\n        else {\n            for (var i = lItem - 1; fItem <= i; i--) {\n                itemArr.push(i);\n            }\n        }\n        return itemArr;\n    };\n    DetailsView.prototype.shiftSelectFocusItem = function (selIndex, fIndex, selRowIndexes, e) {\n        var lItem = fIndex + ((e.action === 'shiftDown' || e.action === 'csDown') ? 1 : -1);\n        var fItem = isNOU(this.startIndex) ? selIndex : selRowIndexes[0];\n        if (fItem === lItem) {\n            this.gridObj.selectRow(fItem);\n        }\n        else {\n            if (fItem < lItem) {\n                if (e.action === 'shiftDown' || e.action === 'csDown') {\n                    this.gridObj.selectionModule.selectRowsByRange(fItem, lItem);\n                }\n                else {\n                    this.gridObj.selectionModule.selectRowsByRange(lItem, fItem);\n                }\n            }\n            else if (e.action === 'shiftDown' || e.action === 'csDown') {\n                this.gridObj.selectionModule.selectRowsByRange(lItem, fItem);\n            }\n            else {\n                this.gridObj.selectionModule.selectRowsByRange(fItem, lItem);\n            }\n        }\n        this.startIndex = this.gridObj.selectedRowIndex;\n    };\n    DetailsView.prototype.addFocus = function (item) {\n        var fItem = this.getFocusedItem();\n        var itemElement = this.gridObj.getRowByIndex(item);\n        if (fItem) {\n            fItem.removeAttribute('tabindex');\n            removeClass([fItem], [CLS.FOCUS, CLS.FOCUSED]);\n        }\n        if (!isNOU(itemElement)) {\n            this.gridObj.element.setAttribute('tabindex', '-1');\n            itemElement.setAttribute('tabindex', '0');\n            itemElement.focus();\n            addClass([itemElement], [CLS.FOCUS, CLS.FOCUSED]);\n        }\n    };\n    DetailsView.prototype.getFocusedItem = function () {\n        return select('.' + CLS.FOCUSED, this.element);\n    };\n    DetailsView.prototype.isSelected = function (selRowIndexes, focIndex) {\n        var check = false;\n        for (var i = 0; i <= selRowIndexes.length - 1; i++) {\n            if (selRowIndexes[i] === focIndex) {\n                check = true;\n                break;\n            }\n        }\n        return check;\n    };\n    // eslint-disable-next-line\n    DetailsView.prototype.shiftSelectedItem = function (selIndex, selRowIndexes, gridItems, e) {\n        if (selIndex === -1) {\n            this.gridObj.selectRow(0);\n        }\n        else {\n            if (isNOU(this.startIndex) && e.shiftKey) {\n                this.startIndex = this.gridObj.selectedRowIndex;\n                this.gridObj.selectRows([selIndex, (e.action === 'shiftDown' || e.action === 'csDown') ?\n                        (selIndex + ((selIndex !== gridItems.length - 1) ? 1 : 0)) : (selIndex - ((selIndex !== 0) ? 1 : 0))]);\n            }\n            else {\n                if (e.action === 'shiftDown' || e.action === 'shiftUp') {\n                    if (e.action === 'shiftDown' && selRowIndexes.indexOf(selIndex + 1) === -1) {\n                        if (selIndex !== gridItems.length - 1) {\n                            selRowIndexes.push(selIndex + 1);\n                        }\n                    }\n                    else if (e.action === 'shiftUp' && selRowIndexes.indexOf(selIndex - 1) === -1) {\n                        if (selIndex !== 0) {\n                            selRowIndexes.push(selIndex - 1);\n                        }\n                    }\n                    else {\n                        selRowIndexes.pop();\n                    }\n                    this.gridObj.selectRows(selRowIndexes);\n                }\n                else {\n                    if (e.action === 'csDown') {\n                        if (!this.isSelected(selRowIndexes, this.getFocusedItemIndex() + 1)) {\n                            selRowIndexes.push((this.getFocusedItemIndex() + 1));\n                            this.gridObj.selectRows(selRowIndexes);\n                        }\n                        else {\n                            this.addFocus(this.getFocusedItemIndex() + 1);\n                        }\n                    }\n                    else if (!this.isSelected(selRowIndexes, this.getFocusedItemIndex() - 1)) {\n                        selRowIndexes.push((this.getFocusedItemIndex() - 1));\n                        this.gridObj.selectRows(selRowIndexes);\n                    }\n                    else {\n                        this.addFocus(this.getFocusedItemIndex() - 1);\n                    }\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    DetailsView.prototype.onMethodCall = function (e) {\n        if (this.parent.view !== 'Details') {\n            return;\n        }\n        var action = getValue('action', e);\n        switch (action) {\n            case 'deleteFiles':\n                this.deleteFiles(getValue('ids', e));\n                break;\n            case 'downloadFiles':\n                this.downloadFiles(getValue('ids', e));\n                break;\n            case 'openFile':\n                this.openFile(getValue('id', e));\n                break;\n            case 'createFolder':\n                this.interaction = false;\n                break;\n            case 'renameFile':\n                this.interaction = false;\n                this.renameFile(getValue('id', e), getValue('newName', e));\n                break;\n            case 'selectAll':\n                this.interaction = false;\n                this.onSelectAllInit();\n                break;\n            case 'clearSelection':\n                this.interaction = false;\n                this.onClearAllInit();\n                break;\n        }\n    };\n    // eslint-disable-next-line\n    DetailsView.prototype.getRecords = function (nodes) {\n        // eslint-disable-next-line\n        var gridRecords = this.gridObj.getCurrentViewRecords();\n        // eslint-disable-next-line\n        var records = [];\n        var hasFilter = (this.parent.breadcrumbbarModule.searchObj.element.value !== '' || this.parent.isFiltered) ? true : false;\n        var filter = this.parent.hasId ? 'id' : 'name';\n        if (this.parent.hasId || !hasFilter) {\n            for (var i = 0, len = gridRecords.length; i < len; i++) {\n                if (nodes.indexOf(getValue(filter, gridRecords[i])) !== -1) {\n                    records.push(gridRecords[i]);\n                }\n            }\n        }\n        else {\n            for (var i = 0, len = gridRecords.length; i < len; i++) {\n                var name_4 = getValue('filterPath', gridRecords[i]) + getValue('name', gridRecords[i]);\n                if (nodes.indexOf(name_4) !== -1) {\n                    records.push(gridRecords[i]);\n                }\n            }\n        }\n        return records;\n    };\n    DetailsView.prototype.deleteFiles = function (ids) {\n        this.parent.activeModule = 'detailsview';\n        if (isNOU(ids)) {\n            this.performDelete();\n            return;\n        }\n        // eslint-disable-next-line\n        var records = this.getRecords(ids);\n        if (records.length === 0) {\n            return;\n        }\n        // eslint-disable-next-line\n        var data = [];\n        var newIds = [];\n        for (var i = 0; i < records.length; i++) {\n            data[i] = records[i];\n            newIds[i] = getItemName(this.parent, data[i]);\n        }\n        doDeleteFiles(this.parent, data, newIds);\n    };\n    DetailsView.prototype.downloadFiles = function (ids) {\n        if (isNOU(ids)) {\n            this.doDownload();\n            return;\n        }\n        // eslint-disable-next-line\n        var dRecords = this.getRecords(ids);\n        if (dRecords.length === 0) {\n            return;\n        }\n        // eslint-disable-next-line\n        var data = [];\n        var newIds = [];\n        for (var i = 0; i < dRecords.length; i++) {\n            data[i] = dRecords[i];\n            newIds[i] = getItemName(this.parent, data[i]);\n        }\n        doDownloadFiles(this.parent, data, newIds);\n    };\n    DetailsView.prototype.openFile = function (id) {\n        if (isNOU(id)) {\n            return;\n        }\n        // eslint-disable-next-line\n        var records = this.getRecords([id]);\n        if (records.length > 0) {\n            this.openContent(records[0]);\n        }\n    };\n    DetailsView.prototype.renameFile = function (id, name) {\n        this.parent.activeModule = 'detailsview';\n        if (isNOU(id)) {\n            this.performRename();\n            return;\n        }\n        // eslint-disable-next-line\n        var records = this.getRecords([id]);\n        if (records.length > 0) {\n            updateRenamingData(this.parent, records[0]);\n            if (!isNOU(name)) {\n                if (hasEditAccess(this.parent.itemData[0])) {\n                    rename(this.parent, this.parent.path, name);\n                }\n                else {\n                    createDeniedDialog(this.parent, this.parent.itemData[0], events.permissionEdit);\n                }\n            }\n            else {\n                doRename(this.parent);\n            }\n        }\n    };\n    return DetailsView;\n}());\nexport { DetailsView };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}