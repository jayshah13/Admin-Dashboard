{"ast":null,"code":"/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { addClass, createElement, extend, isNullOrUndefined, closest, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { formatUnit, remove, removeClass } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * Base class for the common drag and resize related actions\n */\n\nvar ActionBase =\n/** @class */\nfunction () {\n  function ActionBase(parent) {\n    this.daysVariation = 0;\n    this.parent = parent;\n    this.actionObj = {\n      X: 0,\n      Y: 0,\n      groupIndex: 0,\n      cellWidth: 0,\n      cellHeight: 0,\n      slotInterval: 0,\n      interval: 0,\n      actionIndex: 0,\n      cloneElement: [],\n      originalElement: [],\n      action: null,\n      isAllDay: null,\n      excludeSelectors: null,\n      index: 0,\n      navigationInterval: null,\n      scrollInterval: null\n    };\n    this.scrollArgs = {\n      element: null,\n      width: 0,\n      height: 0\n    };\n    this.resizeEdges = {\n      left: false,\n      right: false,\n      top: false,\n      bottom: false\n    };\n    this.scrollEdges = {\n      left: false,\n      right: false,\n      top: false,\n      bottom: false\n    };\n  }\n\n  ActionBase.prototype.getChangedData = function (multiData) {\n    var _this = this;\n\n    var eventObj = extend({}, this.actionObj.event, null, true);\n    eventObj[this.parent.eventFields.startTime] = this.actionObj.start;\n    eventObj[this.parent.eventFields.endTime] = this.actionObj.end;\n\n    if (!isNullOrUndefined(this.actionObj.isAllDay)) {\n      eventObj[this.parent.eventFields.isAllDay] = this.actionObj.isAllDay;\n    }\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      var originalElement = this.getOriginalElement(this.actionObj.element);\n\n      if (originalElement) {\n        var indexCol_1 = originalElement.map(function (element) {\n          return parseInt(element.getAttribute('data-group-index'), 10);\n        });\n\n        if (indexCol_1.indexOf(this.actionObj.groupIndex) === -1 || !isNullOrUndefined(multiData) && multiData.length > 0) {\n          var cloneIndex_1 = parseInt(this.actionObj.clone.getAttribute('data-group-index'), 10);\n          indexCol_1 = indexCol_1.filter(function (index) {\n            return index !== cloneIndex_1;\n          });\n          indexCol_1.push(this.actionObj.groupIndex);\n\n          if (multiData && multiData.length > 0) {\n            multiData.forEach(function (data) {\n              _this.parent.resourceBase.getResourceData(data, _this.actionObj.groupIndex, indexCol_1);\n            });\n          } else {\n            this.parent.resourceBase.getResourceData(eventObj, this.actionObj.groupIndex, indexCol_1);\n          }\n        }\n      }\n    }\n\n    return eventObj;\n  };\n\n  ActionBase.prototype.saveChangedData = function (eventArgs, isMultiSelect) {\n    if (isMultiSelect === void 0) {\n      isMultiSelect = false;\n    }\n\n    this.parent.activeEventData.event = this.actionObj.event;\n    this.parent.currentAction = 'Save';\n    var currentAction;\n    var eventsCollection = [eventArgs.data];\n\n    if (isMultiSelect) {\n      eventsCollection = eventArgs.selectedData;\n    }\n\n    for (var _i = 0, eventsCollection_1 = eventsCollection; _i < eventsCollection_1.length; _i++) {\n      var eventObj = eventsCollection_1[_i];\n      var isSameResource = this.parent.activeViewOptions.group.resources.length > 0 ? parseInt(this.actionObj.element.getAttribute('data-group-index'), 10) === this.actionObj.groupIndex : true;\n\n      if (+eventObj[this.parent.eventFields.startTime] === +this.actionObj.event[this.parent.eventFields.startTime] && +eventObj[this.parent.eventFields.endTime] === +this.actionObj.event[this.parent.eventFields.endTime] && isSameResource) {\n        return;\n      }\n\n      if (eventObj[this.parent.eventFields.recurrenceRule]) {\n        var eveId = eventObj[this.parent.eventFields.recurrenceID] || eventObj[this.parent.eventFields.id];\n\n        if (eventObj[this.parent.eventFields.id] === eventObj[this.parent.eventFields.recurrenceID]) {\n          eventObj[this.parent.eventFields.id] = this.parent.eventBase.getEventMaxID();\n          currentAction = 'EditOccurrence';\n        }\n\n        if (this.parent.enableRecurrenceValidation && this.parent.eventWindow.editOccurrenceValidation(eveId, eventObj, this.actionObj.event)) {\n          return;\n        }\n      } else {\n        currentAction = null;\n      }\n\n      if (eventObj[this.parent.eventFields.startTimezone] || eventObj[this.parent.eventFields.endTimezone]) {\n        this.parent.eventBase.timezoneConvert(eventObj);\n      }\n\n      this.parent.crudModule.saveEvent(eventObj, currentAction);\n    }\n  };\n\n  ActionBase.prototype.calculateIntervalTime = function (date) {\n    var intervalTime = new Date(+date);\n    intervalTime.setMinutes(Math.floor(intervalTime.getMinutes() / this.actionObj.interval) * this.actionObj.interval);\n    return intervalTime;\n  };\n\n  ActionBase.prototype.getContentAreaDimension = function () {\n    var viewElement = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n    var trElement = [].slice.call(viewElement.querySelector('tr').children);\n\n    if (!this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.isAdaptive && !this.parent.enableAdaptiveUI) {\n      trElement = this.getResourceElements(trElement);\n    }\n\n    var leftOffset = trElement[0].getBoundingClientRect();\n    var rightOffset = trElement.slice(-1)[0].getBoundingClientRect();\n    var viewDimension = {\n      bottom: viewElement.scrollHeight - 5,\n      left: this.parent.enableRtl ? rightOffset.left : leftOffset.left,\n      right: this.parent.enableRtl ? leftOffset.right : rightOffset.right,\n      top: 0,\n      leftOffset: this.parent.enableRtl ? rightOffset.right : leftOffset.right,\n      rightOffset: this.parent.enableRtl ? leftOffset.left : rightOffset.left\n    };\n    return viewDimension;\n  };\n\n  ActionBase.prototype.getPageCoordinates = function (e) {\n    var eventArgs = e.event;\n    return eventArgs && eventArgs.changedTouches ? eventArgs.changedTouches[0] : e.changedTouches ? e.changedTouches[0] : eventArgs || e;\n  };\n\n  ActionBase.prototype.getIndex = function (index) {\n    var contentElements = [].slice.call(this.parent.getContentTable().querySelector('tr').children);\n    var indexes = {\n      minIndex: 0,\n      maxIndex: contentElements.length - 1\n    };\n\n    if (this.actionObj.action === 'resize' && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive && !this.parent.activeView.isTimelineView()) {\n      var groupElements = this.getResourceElements(contentElements);\n      indexes.minIndex = groupElements[0].cellIndex;\n      indexes.maxIndex = groupElements.slice(-1)[0].cellIndex;\n    }\n\n    if (index < indexes.minIndex) {\n      index = indexes.minIndex;\n    }\n\n    if (index > indexes.maxIndex) {\n      index = indexes.maxIndex;\n    }\n\n    return index;\n  };\n\n  ActionBase.prototype.updateTimePosition = function (date, multiData) {\n    var index = 0;\n\n    for (var _i = 0, _a = this.actionObj.cloneElement; _i < _a.length; _i++) {\n      var cloneElement = _a[_i];\n      var timeElement = cloneElement.querySelector('.' + cls.APPOINTMENT_TIME);\n\n      if (timeElement) {\n        var startTime = this.actionObj.start;\n        var endTime = this.actionObj.end;\n\n        if (multiData && multiData.length > 0) {\n          startTime = multiData[index][this.parent.eventFields.startTime];\n          endTime = multiData[index][this.parent.eventFields.endTime];\n        }\n\n        timeElement.innerHTML = this.parent.getTimeString(startTime) + ' - ' + this.parent.getTimeString(endTime);\n      }\n\n      index++;\n    }\n\n    if (!this.parent.activeViewOptions.timeScale.enable || !this.parent.isAdaptive || this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineMonth') {\n      return;\n    }\n\n    var timeIndicator = this.parent.element.querySelector('.' + cls.CLONE_TIME_INDICATOR_CLASS);\n\n    if (!timeIndicator) {\n      timeIndicator = createElement('div', {\n        className: cls.CLONE_TIME_INDICATOR_CLASS\n      });\n      var wrapperClass = this.parent.activeView.isTimelineView() ? cls.DATE_HEADER_WRAP_CLASS : cls.TIME_CELLS_WRAP_CLASS;\n      this.parent.element.querySelector('.' + wrapperClass).appendChild(timeIndicator);\n    }\n\n    timeIndicator.innerHTML = this.parent.getTimeString(date);\n    var offsetValue = 0;\n\n    if (this.parent.activeView.isTimelineView()) {\n      if (this.parent.enableRtl) {\n        var rightValue = parseInt(this.actionObj.clone.style.right, 10);\n        offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.left ? rightValue + this.actionObj.clone.offsetWidth : rightValue;\n        timeIndicator.style.right = formatUnit(offsetValue);\n      } else {\n        var leftValue = parseInt(this.actionObj.clone.style.left, 10);\n        offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.left ? leftValue : leftValue + this.actionObj.clone.offsetWidth;\n        timeIndicator.style.left = formatUnit(offsetValue);\n      }\n    } else {\n      offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.top ? this.actionObj.clone.offsetTop : this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight;\n      timeIndicator.style.top = formatUnit(offsetValue);\n    }\n  };\n\n  ActionBase.prototype.getResourceElements = function (table) {\n    var _this = this;\n\n    return table.filter(function (element) {\n      return parseInt(element.getAttribute('data-group-index'), 10) === _this.actionObj.groupIndex;\n    });\n  };\n\n  ActionBase.prototype.getOriginalElement = function (element) {\n    var originalElement;\n    var guid = element.getAttribute('data-guid');\n    var isMorePopup = element.offsetParent && element.offsetParent.classList.contains(cls.MORE_EVENT_POPUP_CLASS);\n\n    if (isMorePopup || this.parent.activeView.isTimelineView()) {\n      originalElement = [].slice.call(this.parent.element.querySelectorAll('[data-guid=\"' + guid + '\"]'));\n    } else {\n      var tr = closest(element, 'tr');\n\n      if (tr) {\n        originalElement = [].slice.call(tr.querySelectorAll('[data-guid=\"' + guid + '\"]'));\n      }\n    }\n\n    return originalElement;\n  };\n\n  ActionBase.prototype.createCloneElement = function (element) {\n    var cloneWrapper = createElement('div', {\n      innerHTML: element.outerHTML\n    });\n    var cloneElement = cloneWrapper.children[0];\n    var cloneClassLists = [cls.CLONE_ELEMENT_CLASS];\n    cloneClassLists.push(this.actionObj.action === 'drag' ? cls.DRAG_CLONE_CLASS : cls.RESIZE_CLONE_CLASS);\n\n    if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineMonth') {\n      cloneClassLists.push(cls.MONTH_CLONE_ELEMENT_CLASS);\n    }\n\n    addClass([cloneElement], cloneClassLists);\n    addClass([element], cls.EVENT_ACTION_CLASS);\n\n    if (!isNullOrUndefined(element.parentElement)) {\n      element.parentElement.appendChild(cloneElement);\n    }\n\n    cloneElement.style.width = formatUnit(cloneElement.offsetWidth - 2);\n    var dragElement = document.querySelector(this.parent.eventDragArea);\n\n    if (this.parent.eventDragArea && this.actionObj.action === 'drag' && dragElement) {\n      dragElement.appendChild(cloneElement);\n    }\n\n    setStyleAttribute(cloneElement, {\n      border: '0px'\n    });\n    return cloneElement;\n  };\n\n  ActionBase.prototype.removeCloneElementClasses = function () {\n    var elements = this.actionObj.originalElement;\n\n    if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineYear' || this.parent.currentView === 'Day' || this.parent.currentView === 'Week' || this.parent.currentView === 'WorkWeek') {\n      elements = [].slice.call(this.parent.element.querySelectorAll('.' + cls.EVENT_ACTION_CLASS));\n    }\n\n    removeClass(elements, cls.EVENT_ACTION_CLASS);\n  };\n\n  ActionBase.prototype.removeCloneElement = function () {\n    this.actionObj.originalElement = [];\n    var dynamicEle = [].slice.call(this.parent.element.querySelectorAll('.e-dynamic-clone'));\n\n    for (var _i = 0, dynamicEle_1 = dynamicEle; _i < dynamicEle_1.length; _i++) {\n      var cloneEle = dynamicEle_1[_i];\n      remove(cloneEle);\n    }\n\n    for (var _a = 0, _b = this.actionObj.cloneElement; _a < _b.length; _a++) {\n      var cloneElement = _b[_a];\n\n      if (!isNullOrUndefined(cloneElement.parentNode)) {\n        remove(cloneElement);\n      }\n    }\n\n    this.actionObj.cloneElement = [];\n    var timeIndicator = this.parent.element.querySelector('.' + cls.CLONE_TIME_INDICATOR_CLASS);\n\n    if (timeIndicator) {\n      remove(timeIndicator);\n    }\n  };\n\n  ActionBase.prototype.getCursorElement = function (e) {\n    var pages = this.getPageCoordinates(e);\n    return document.elementFromPoint(pages.clientX, pages.clientY);\n  };\n\n  ActionBase.prototype.autoScroll = function () {\n    var parent = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n    var yIsScrollable = parent.offsetHeight <= parent.scrollHeight;\n    var xIsScrollable = parent.offsetWidth <= parent.scrollWidth;\n    var yInBounds = yIsScrollable && parent.scrollTop >= 0 && parent.scrollTop + parent.offsetHeight <= parent.scrollHeight;\n    var xInBounds = xIsScrollable && parent.scrollLeft >= 0 && parent.scrollLeft + parent.offsetWidth <= parent.scrollWidth;\n\n    if (this.actionObj.action === 'resize' && this.scrollEdges.right && parent.scrollLeft + parent.offsetWidth > parent.scrollWidth) {\n      var tdCollections = [].slice.call(this.parent.getContentTable().querySelector('tr').children).length - 1;\n      var cellIndex = Math.ceil((this.actionObj.clone.offsetLeft + this.actionObj.clone.offsetWidth) / this.actionObj.cellWidth);\n      xInBounds = cellIndex === tdCollections;\n    }\n\n    if (yInBounds && (this.scrollEdges.top || this.scrollEdges.bottom)) {\n      parent.scrollTop += this.scrollEdges.top ? -this.actionObj.scroll.scrollBy : this.actionObj.scroll.scrollBy;\n\n      if (this.actionObj.action === 'resize') {\n        if (parent.scrollHeight !== parent.offsetHeight + parent.scrollTop && parent.scrollTop > 0) {\n          this.actionObj.Y += this.scrollEdges.top ? this.actionObj.scroll.scrollBy : -this.actionObj.scroll.scrollBy;\n        }\n      }\n    }\n\n    if (xInBounds && (this.scrollEdges.left || this.scrollEdges.right)) {\n      parent.scrollLeft += this.scrollEdges.left ? -this.actionObj.scroll.scrollBy : this.actionObj.scroll.scrollBy;\n\n      if (this.actionObj.action === 'resize') {\n        if (parent.scrollWidth !== parent.offsetWidth + parent.scrollLeft && parent.scrollLeft > 0) {\n          this.actionObj.X += this.scrollEdges.left ? this.actionObj.scroll.scrollBy : -this.actionObj.scroll.scrollBy;\n        }\n      }\n    }\n  };\n\n  ActionBase.prototype.autoScrollValidation = function () {\n    if (!this.actionObj.scroll.enable) {\n      return false;\n    }\n\n    var res = this.parent.boundaryValidation(this.actionObj.pageY, this.actionObj.pageX);\n    this.scrollEdges = res;\n    return res.bottom || res.top || res.left || res.right;\n  };\n\n  ActionBase.prototype.actionClass = function (type) {\n    if (type === 'addClass') {\n      addClass([this.parent.element], cls.EVENT_ACTION_CLASS);\n    } else {\n      removeClass([this.parent.element], cls.EVENT_ACTION_CLASS);\n    }\n  };\n\n  ActionBase.prototype.updateScrollPosition = function (e) {\n    var _this = this;\n\n    if (this.actionObj.scroll.enable && isNullOrUndefined(this.actionObj.scrollInterval)) {\n      this.actionObj.scrollInterval = window.setInterval(function () {\n        if (_this.autoScrollValidation() && !_this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n          if (_this.parent.activeView.isTimelineView() && _this.parent.activeViewOptions.group.resources.length > 0 && _this.actionObj.groupIndex < 0) {\n            return;\n          }\n\n          _this.autoScroll();\n\n          if (_this.actionObj.action === 'drag') {\n            _this.parent.dragAndDropModule.updateDraggingDateTime(e);\n          } else {\n            _this.parent.resizeModule.updateResizingDirection(e);\n          }\n        }\n      }, this.actionObj.scroll.timeDelay);\n    }\n  };\n\n  ActionBase.prototype.updateOriginalElement = function (cloneElement) {\n    var query = '[data-id=\"' + cloneElement.getAttribute('data-id') + '\"]';\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      query = query.concat('[data-group-index = \"' + cloneElement.getAttribute('data-group-index') + '\"]');\n    }\n\n    var elements = [].slice.call(this.parent.element.querySelectorAll(query));\n    addClass(elements, cls.EVENT_ACTION_CLASS);\n    var eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CLONE_ELEMENT_CLASS));\n    removeClass(eventWrappers, cls.EVENT_ACTION_CLASS);\n  };\n\n  ActionBase.prototype.getUpdatedEvent = function (startTime, endTime, eventObj) {\n    var event = JSON.parse(JSON.stringify(eventObj));\n    event[this.parent.eventFields.startTime] = startTime;\n    event[this.parent.eventFields.endTime] = endTime;\n    return event;\n  };\n\n  ActionBase.prototype.dynamicYearlyEventsRendering = function (event, isResize) {\n    if (isResize === void 0) {\n      isResize = false;\n    }\n\n    var appWidth = this.actionObj.cellWidth - 7;\n\n    if (isResize && (this.resizeEdges.left || this.resizeEdges.right)) {\n      appWidth = this.actionObj.cellWidth * event.count;\n    }\n\n    if (!isResize && this.parent.activeViewOptions.orientation === 'Horizontal' && this.parent.activeViewOptions.group.resources.length === 0) {\n      var eventObj = this.yearEvent.isSpannedEvent(event, event[this.parent.eventFields.startTime]);\n\n      if (eventObj[this.parent.eventFields.startTime].getTime() === eventObj[this.parent.eventFields.endTime].getTime()) {\n        eventObj.isSpanned.count = 1;\n      }\n\n      appWidth = eventObj.isSpanned.count * this.actionObj.cellWidth;\n    }\n\n    var appointmentElement = this.createAppointmentElement(this.actionObj.groupIndex, event[this.parent.eventFields.subject]);\n    appointmentElement.setAttribute('drag', 'true');\n    addClass([appointmentElement], cls.CLONE_ELEMENT_CLASS);\n    setStyleAttribute(appointmentElement, {\n      'width': appWidth + 'px',\n      'border': '0px',\n      'pointer-events': 'none',\n      'position': 'absolute',\n      'overflow': 'hidden',\n      'padding': '3px'\n    });\n\n    if (this.actionObj.clone.style.backgroundColor !== '') {\n      setStyleAttribute(appointmentElement, {\n        'backgroundColor': this.actionObj.clone.style.backgroundColor\n      });\n    }\n\n    var date = util.resetTime(event[this.parent.eventFields.startTime]).getTime();\n    var query = '.' + cls.WORK_CELLS_CLASS + '[data-date=\"' + date + '\"]';\n\n    if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      query = '.' + cls.WORK_CELLS_CLASS + '[data-date=\"' + date + '\"][data-group-index=\"' + this.actionObj.groupIndex + '\"]';\n    }\n\n    var cellTd = this.parent.element.querySelector(query);\n\n    if (isNullOrUndefined(cellTd)) {\n      return;\n    }\n\n    if (isResize) {\n      var dateHeader = cellTd.querySelector('.' + cls.DATE_HEADER_CLASS);\n      var appHeight = this.actionObj.cellHeight * event.count - (dateHeader ? dateHeader.offsetHeight : 0) - 7;\n\n      if (this.resizeEdges.right || this.resizeEdges.left) {\n        appHeight = parseInt(this.actionObj.clone.style.height, 10);\n      }\n\n      setStyleAttribute(appointmentElement, {\n        'height': appHeight + 'px'\n      });\n    }\n\n    this.renderDynamicElement(cellTd, appointmentElement, true);\n    this.actionObj.cloneElement.push(appointmentElement);\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  ActionBase.prototype.renderDynamicElement = function (cellTd, element, isAppointment) {\n    if (isAppointment === void 0) {\n      isAppointment = false;\n    }\n\n    if (cellTd.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS)) {\n      cellTd.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS).appendChild(element);\n    } else {\n      var wrapper = createElement('div', {\n        className: cls.APPOINTMENT_WRAPPER_CLASS\n      });\n      wrapper.appendChild(element);\n      cellTd.appendChild(wrapper);\n    }\n  };\n\n  ActionBase.prototype.createAppointmentElement = function (resIndex, innerText) {\n    var appointmentWrapper = createElement('div', {\n      className: cls.APPOINTMENT_CLASS,\n      innerHTML: innerText\n    });\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      appointmentWrapper.setAttribute('data-group-index', resIndex.toString());\n    }\n\n    return appointmentWrapper;\n  };\n\n  ActionBase.prototype.dynamicEventsRendering = function (event) {\n    var _this = this;\n\n    var dateRender = this.parent.activeView.renderDates;\n    var workCells = [].slice.call(this.parent.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n    var workDays = this.parent.activeViewOptions.workDays;\n    var groupOrder;\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      var resources = this.parent.resourceBase.lastResourceLevel.filter(function (res) {\n        return res.groupIndex === _this.actionObj.groupIndex;\n      });\n      dateRender = resources[0].renderDates;\n      var elementSelector = \".\" + cls.WORK_CELLS_CLASS + \"[data-group-index=\\\"\" + this.actionObj.groupIndex + \"\\\"]\";\n      workCells = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n      workDays = resources[0].workDays;\n      groupOrder = resources[0].groupOrder;\n    }\n\n    this.monthEvent.dateRender = dateRender;\n    this.monthEvent.getSlotDates(workDays);\n\n    if (this.resizeEdges.left || this.resizeEdges.right) {\n      var eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CLONE_ELEMENT_CLASS));\n\n      for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {\n        var wrapper = eventWrappers_1[_i];\n        remove(wrapper);\n      }\n    }\n\n    var spannedEvents = this.monthEvent.splitEvent(event, dateRender);\n\n    for (var _a = 0, spannedEvents_1 = spannedEvents; _a < spannedEvents_1.length; _a++) {\n      var event_1 = spannedEvents_1[_a];\n      var day = this.parent.getIndexOfDate(dateRender, util.resetTime(event_1[this.monthEvent.fields.startTime]));\n      var diffInDays = event_1.data.count;\n      var appWidth = diffInDays * this.actionObj.cellWidth - 7;\n      var appointmentElement = this.monthEvent.createAppointmentElement(event_1, this.actionObj.groupIndex, true);\n      appointmentElement.setAttribute('drag', 'true');\n      addClass([appointmentElement], cls.CLONE_ELEMENT_CLASS);\n      this.monthEvent.applyResourceColor(appointmentElement, event_1, 'backgroundColor', groupOrder);\n      setStyleAttribute(appointmentElement, {\n        'width': appWidth + 'px',\n        'border': '0px',\n        'pointer-events': 'none'\n      });\n      var cellTd = workCells[day];\n\n      if (cellTd && isNullOrUndefined(this.parent.eventDragArea)) {\n        this.monthEvent.renderElement(cellTd, appointmentElement, true);\n        this.actionObj.cloneElement.push(appointmentElement);\n      }\n    }\n  };\n\n  ActionBase.prototype.destroy = function () {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n\n    this.actionObj = {};\n    this.scrollArgs = {};\n    this.resizeEdges = {\n      left: false,\n      right: false,\n      top: false,\n      bottom: false\n    };\n    this.scrollEdges = {\n      left: false,\n      right: false,\n      top: false,\n      bottom: false\n    };\n  };\n\n  return ActionBase;\n}();\n\nexport { ActionBase };","map":{"version":3,"names":["addClass","createElement","extend","isNullOrUndefined","closest","setStyleAttribute","formatUnit","remove","removeClass","cls","util","ActionBase","parent","daysVariation","actionObj","X","Y","groupIndex","cellWidth","cellHeight","slotInterval","interval","actionIndex","cloneElement","originalElement","action","isAllDay","excludeSelectors","index","navigationInterval","scrollInterval","scrollArgs","element","width","height","resizeEdges","left","right","top","bottom","scrollEdges","prototype","getChangedData","multiData","_this","eventObj","event","eventFields","startTime","start","endTime","end","activeViewOptions","group","resources","length","getOriginalElement","indexCol_1","map","parseInt","getAttribute","indexOf","cloneIndex_1","clone","filter","push","forEach","data","resourceBase","getResourceData","saveChangedData","eventArgs","isMultiSelect","activeEventData","currentAction","eventsCollection","selectedData","_i","eventsCollection_1","isSameResource","recurrenceRule","eveId","recurrenceID","id","eventBase","getEventMaxID","enableRecurrenceValidation","eventWindow","editOccurrenceValidation","startTimezone","endTimezone","timezoneConvert","crudModule","saveEvent","calculateIntervalTime","date","intervalTime","Date","setMinutes","Math","floor","getMinutes","getContentAreaDimension","viewElement","querySelector","CONTENT_WRAP_CLASS","trElement","slice","call","children","activeView","isTimelineView","isAdaptive","enableAdaptiveUI","getResourceElements","leftOffset","getBoundingClientRect","rightOffset","viewDimension","scrollHeight","enableRtl","getPageCoordinates","e","changedTouches","getIndex","contentElements","getContentTable","indexes","minIndex","maxIndex","uiStateValues","isGroupAdaptive","groupElements","cellIndex","updateTimePosition","_a","timeElement","APPOINTMENT_TIME","innerHTML","getTimeString","timeScale","enable","currentView","timeIndicator","CLONE_TIME_INDICATOR_CLASS","className","wrapperClass","DATE_HEADER_WRAP_CLASS","TIME_CELLS_WRAP_CLASS","appendChild","offsetValue","rightValue","style","offsetWidth","leftValue","offsetTop","offsetHeight","table","guid","isMorePopup","offsetParent","classList","contains","MORE_EVENT_POPUP_CLASS","querySelectorAll","tr","createCloneElement","cloneWrapper","outerHTML","cloneClassLists","CLONE_ELEMENT_CLASS","DRAG_CLONE_CLASS","RESIZE_CLONE_CLASS","MONTH_CLONE_ELEMENT_CLASS","EVENT_ACTION_CLASS","parentElement","dragElement","document","eventDragArea","border","removeCloneElementClasses","elements","removeCloneElement","dynamicEle","dynamicEle_1","cloneEle","_b","parentNode","getCursorElement","pages","elementFromPoint","clientX","clientY","autoScroll","yIsScrollable","xIsScrollable","scrollWidth","yInBounds","scrollTop","xInBounds","scrollLeft","tdCollections","ceil","offsetLeft","scroll","scrollBy","autoScrollValidation","res","boundaryValidation","pageY","pageX","actionClass","type","updateScrollPosition","window","setInterval","ALLDAY_APPOINTMENT_CLASS","dragAndDropModule","updateDraggingDateTime","resizeModule","updateResizingDirection","timeDelay","updateOriginalElement","query","concat","eventWrappers","getUpdatedEvent","JSON","parse","stringify","dynamicYearlyEventsRendering","isResize","appWidth","count","orientation","yearEvent","isSpannedEvent","getTime","isSpanned","appointmentElement","createAppointmentElement","subject","setAttribute","backgroundColor","resetTime","WORK_CELLS_CLASS","cellTd","dateHeader","DATE_HEADER_CLASS","appHeight","renderDynamicElement","isAppointment","APPOINTMENT_WRAPPER_CLASS","wrapper","resIndex","innerText","appointmentWrapper","APPOINTMENT_CLASS","toString","dynamicEventsRendering","dateRender","renderDates","workCells","workDays","groupOrder","lastResourceLevel","elementSelector","monthEvent","getSlotDates","eventWrappers_1","spannedEvents","splitEvent","spannedEvents_1","event_1","day","getIndexOfDate","fields","diffInDays","applyResourceColor","renderElement","destroy","isDestroyed"],"sources":["C:/Users/shahj/OneDrive/Documents/GitHub/Multifunctional-React-Dashboard/node_modules/@syncfusion/ej2-schedule/src/schedule/actions/action-base.js"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { addClass, createElement, extend, isNullOrUndefined, closest, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { formatUnit, remove, removeClass } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * Base class for the common drag and resize related actions\n */\nvar ActionBase = /** @class */ (function () {\n    function ActionBase(parent) {\n        this.daysVariation = 0;\n        this.parent = parent;\n        this.actionObj = {\n            X: 0, Y: 0, groupIndex: 0, cellWidth: 0, cellHeight: 0, slotInterval: 0, interval: 0, actionIndex: 0,\n            cloneElement: [], originalElement: [], action: null, isAllDay: null, excludeSelectors: null,\n            index: 0, navigationInterval: null, scrollInterval: null\n        };\n        this.scrollArgs = { element: null, width: 0, height: 0 };\n        this.resizeEdges = { left: false, right: false, top: false, bottom: false };\n        this.scrollEdges = { left: false, right: false, top: false, bottom: false };\n    }\n    ActionBase.prototype.getChangedData = function (multiData) {\n        var _this = this;\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        eventObj[this.parent.eventFields.startTime] = this.actionObj.start;\n        eventObj[this.parent.eventFields.endTime] = this.actionObj.end;\n        if (!isNullOrUndefined(this.actionObj.isAllDay)) {\n            eventObj[this.parent.eventFields.isAllDay] = this.actionObj.isAllDay;\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var originalElement = this.getOriginalElement(this.actionObj.element);\n            if (originalElement) {\n                var indexCol_1 = originalElement.map(function (element) { return parseInt(element.getAttribute('data-group-index'), 10); });\n                if (indexCol_1.indexOf(this.actionObj.groupIndex) === -1 || (!isNullOrUndefined(multiData) && multiData.length > 0)) {\n                    var cloneIndex_1 = parseInt(this.actionObj.clone.getAttribute('data-group-index'), 10);\n                    indexCol_1 = indexCol_1.filter(function (index) { return index !== cloneIndex_1; });\n                    indexCol_1.push(this.actionObj.groupIndex);\n                    if (multiData && multiData.length > 0) {\n                        multiData.forEach(function (data) {\n                            _this.parent.resourceBase.getResourceData(data, _this.actionObj.groupIndex, indexCol_1);\n                        });\n                    }\n                    else {\n                        this.parent.resourceBase.getResourceData(eventObj, this.actionObj.groupIndex, indexCol_1);\n                    }\n                }\n            }\n        }\n        return eventObj;\n    };\n    ActionBase.prototype.saveChangedData = function (eventArgs, isMultiSelect) {\n        if (isMultiSelect === void 0) { isMultiSelect = false; }\n        this.parent.activeEventData.event = this.actionObj.event;\n        this.parent.currentAction = 'Save';\n        var currentAction;\n        var eventsCollection = [eventArgs.data];\n        if (isMultiSelect) {\n            eventsCollection = eventArgs.selectedData;\n        }\n        for (var _i = 0, eventsCollection_1 = eventsCollection; _i < eventsCollection_1.length; _i++) {\n            var eventObj = eventsCollection_1[_i];\n            var isSameResource = (this.parent.activeViewOptions.group.resources.length > 0) ?\n                parseInt(this.actionObj.element.getAttribute('data-group-index'), 10) === this.actionObj.groupIndex : true;\n            if (+eventObj[this.parent.eventFields.startTime] === +this.actionObj.event[this.parent.eventFields.startTime] &&\n                +eventObj[this.parent.eventFields.endTime] === +this.actionObj.event[this.parent.eventFields.endTime] && isSameResource) {\n                return;\n            }\n            if (eventObj[this.parent.eventFields.recurrenceRule]) {\n                var eveId = (eventObj[this.parent.eventFields.recurrenceID] || eventObj[this.parent.eventFields.id]);\n                if (eventObj[this.parent.eventFields.id] === eventObj[this.parent.eventFields.recurrenceID]) {\n                    eventObj[this.parent.eventFields.id] = this.parent.eventBase.getEventMaxID();\n                    currentAction = 'EditOccurrence';\n                }\n                if (this.parent.enableRecurrenceValidation\n                    && this.parent.eventWindow.editOccurrenceValidation(eveId, eventObj, this.actionObj.event)) {\n                    return;\n                }\n            }\n            else {\n                currentAction = null;\n            }\n            if (eventObj[this.parent.eventFields.startTimezone] || eventObj[this.parent.eventFields.endTimezone]) {\n                this.parent.eventBase.timezoneConvert(eventObj);\n            }\n            this.parent.crudModule.saveEvent(eventObj, currentAction);\n        }\n    };\n    ActionBase.prototype.calculateIntervalTime = function (date) {\n        var intervalTime = new Date(+date);\n        intervalTime.setMinutes(Math.floor(intervalTime.getMinutes() / this.actionObj.interval) * this.actionObj.interval);\n        return intervalTime;\n    };\n    ActionBase.prototype.getContentAreaDimension = function () {\n        var viewElement = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var trElement = [].slice.call(viewElement.querySelector('tr').children);\n        if (!this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0 &&\n            !this.parent.isAdaptive && !this.parent.enableAdaptiveUI) {\n            trElement = this.getResourceElements(trElement);\n        }\n        var leftOffset = trElement[0].getBoundingClientRect();\n        var rightOffset = trElement.slice(-1)[0].getBoundingClientRect();\n        var viewDimension = {\n            bottom: viewElement.scrollHeight - 5,\n            left: this.parent.enableRtl ? rightOffset.left : leftOffset.left,\n            right: this.parent.enableRtl ? leftOffset.right : rightOffset.right,\n            top: 0,\n            leftOffset: this.parent.enableRtl ? rightOffset.right : leftOffset.right,\n            rightOffset: this.parent.enableRtl ? leftOffset.left : rightOffset.left\n        };\n        return viewDimension;\n    };\n    ActionBase.prototype.getPageCoordinates = function (e) {\n        var eventArgs = e.event;\n        return eventArgs && eventArgs.changedTouches ? eventArgs.changedTouches[0] : e.changedTouches ? e.changedTouches[0] :\n            eventArgs || e;\n    };\n    ActionBase.prototype.getIndex = function (index) {\n        var contentElements = [].slice.call(this.parent.getContentTable().querySelector('tr').children);\n        var indexes = { minIndex: 0, maxIndex: contentElements.length - 1 };\n        if (this.actionObj.action === 'resize' && this.parent.activeViewOptions.group.resources.length > 0 &&\n            !this.parent.uiStateValues.isGroupAdaptive && !this.parent.activeView.isTimelineView()) {\n            var groupElements = this.getResourceElements(contentElements);\n            indexes.minIndex = groupElements[0].cellIndex;\n            indexes.maxIndex = groupElements.slice(-1)[0].cellIndex;\n        }\n        if (index < indexes.minIndex) {\n            index = indexes.minIndex;\n        }\n        if (index > indexes.maxIndex) {\n            index = indexes.maxIndex;\n        }\n        return index;\n    };\n    ActionBase.prototype.updateTimePosition = function (date, multiData) {\n        var index = 0;\n        for (var _i = 0, _a = this.actionObj.cloneElement; _i < _a.length; _i++) {\n            var cloneElement = _a[_i];\n            var timeElement = cloneElement.querySelector('.' + cls.APPOINTMENT_TIME);\n            if (timeElement) {\n                var startTime = this.actionObj.start;\n                var endTime = this.actionObj.end;\n                if (multiData && multiData.length > 0) {\n                    startTime = multiData[index][this.parent.eventFields.startTime];\n                    endTime = multiData[index][this.parent.eventFields.endTime];\n                }\n                timeElement.innerHTML = this.parent.getTimeString(startTime) + ' - ' +\n                    this.parent.getTimeString(endTime);\n            }\n            index++;\n        }\n        if (!this.parent.activeViewOptions.timeScale.enable || !this.parent.isAdaptive || this.parent.currentView === 'Month' ||\n            this.parent.currentView === 'TimelineMonth') {\n            return;\n        }\n        var timeIndicator = this.parent.element.querySelector('.' + cls.CLONE_TIME_INDICATOR_CLASS);\n        if (!timeIndicator) {\n            timeIndicator = createElement('div', { className: cls.CLONE_TIME_INDICATOR_CLASS });\n            var wrapperClass = this.parent.activeView.isTimelineView() ? cls.DATE_HEADER_WRAP_CLASS : cls.TIME_CELLS_WRAP_CLASS;\n            this.parent.element.querySelector('.' + wrapperClass).appendChild(timeIndicator);\n        }\n        timeIndicator.innerHTML = this.parent.getTimeString(date);\n        var offsetValue = 0;\n        if (this.parent.activeView.isTimelineView()) {\n            if (this.parent.enableRtl) {\n                var rightValue = parseInt(this.actionObj.clone.style.right, 10);\n                offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.left ?\n                    rightValue + this.actionObj.clone.offsetWidth : rightValue;\n                timeIndicator.style.right = formatUnit(offsetValue);\n            }\n            else {\n                var leftValue = parseInt(this.actionObj.clone.style.left, 10);\n                offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.left ?\n                    leftValue : leftValue + this.actionObj.clone.offsetWidth;\n                timeIndicator.style.left = formatUnit(offsetValue);\n            }\n        }\n        else {\n            offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.top ? this.actionObj.clone.offsetTop :\n                this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight;\n            timeIndicator.style.top = formatUnit(offsetValue);\n        }\n    };\n    ActionBase.prototype.getResourceElements = function (table) {\n        var _this = this;\n        return table.filter(function (element) {\n            return parseInt(element.getAttribute('data-group-index'), 10) === _this.actionObj.groupIndex;\n        });\n    };\n    ActionBase.prototype.getOriginalElement = function (element) {\n        var originalElement;\n        var guid = element.getAttribute('data-guid');\n        var isMorePopup = element.offsetParent && element.offsetParent.classList.contains(cls.MORE_EVENT_POPUP_CLASS);\n        if (isMorePopup || this.parent.activeView.isTimelineView()) {\n            originalElement = [].slice.call(this.parent.element.querySelectorAll('[data-guid=\"' + guid + '\"]'));\n        }\n        else {\n            var tr = closest(element, 'tr');\n            if (tr) {\n                originalElement = [].slice.call(tr.querySelectorAll('[data-guid=\"' + guid + '\"]'));\n            }\n        }\n        return originalElement;\n    };\n    ActionBase.prototype.createCloneElement = function (element) {\n        var cloneWrapper = createElement('div', { innerHTML: element.outerHTML });\n        var cloneElement = cloneWrapper.children[0];\n        var cloneClassLists = [cls.CLONE_ELEMENT_CLASS];\n        cloneClassLists.push((this.actionObj.action === 'drag') ? cls.DRAG_CLONE_CLASS : cls.RESIZE_CLONE_CLASS);\n        if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineMonth') {\n            cloneClassLists.push(cls.MONTH_CLONE_ELEMENT_CLASS);\n        }\n        addClass([cloneElement], cloneClassLists);\n        addClass([element], cls.EVENT_ACTION_CLASS);\n        if (!isNullOrUndefined(element.parentElement)) {\n            element.parentElement.appendChild(cloneElement);\n        }\n        cloneElement.style.width = formatUnit(cloneElement.offsetWidth - 2);\n        var dragElement = document.querySelector(this.parent.eventDragArea);\n        if (this.parent.eventDragArea && this.actionObj.action === 'drag' && dragElement) {\n            dragElement.appendChild(cloneElement);\n        }\n        setStyleAttribute(cloneElement, { border: '0px' });\n        return cloneElement;\n    };\n    ActionBase.prototype.removeCloneElementClasses = function () {\n        var elements = this.actionObj.originalElement;\n        if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineYear' ||\n            this.parent.currentView === 'Day' || this.parent.currentView === 'Week' || this.parent.currentView === 'WorkWeek') {\n            elements = [].slice.call(this.parent.element.querySelectorAll('.' + cls.EVENT_ACTION_CLASS));\n        }\n        removeClass(elements, cls.EVENT_ACTION_CLASS);\n    };\n    ActionBase.prototype.removeCloneElement = function () {\n        this.actionObj.originalElement = [];\n        var dynamicEle = [].slice.call(this.parent.element.querySelectorAll('.e-dynamic-clone'));\n        for (var _i = 0, dynamicEle_1 = dynamicEle; _i < dynamicEle_1.length; _i++) {\n            var cloneEle = dynamicEle_1[_i];\n            remove(cloneEle);\n        }\n        for (var _a = 0, _b = this.actionObj.cloneElement; _a < _b.length; _a++) {\n            var cloneElement = _b[_a];\n            if (!isNullOrUndefined(cloneElement.parentNode)) {\n                remove(cloneElement);\n            }\n        }\n        this.actionObj.cloneElement = [];\n        var timeIndicator = this.parent.element.querySelector('.' + cls.CLONE_TIME_INDICATOR_CLASS);\n        if (timeIndicator) {\n            remove(timeIndicator);\n        }\n    };\n    ActionBase.prototype.getCursorElement = function (e) {\n        var pages = this.getPageCoordinates(e);\n        return document.elementFromPoint(pages.clientX, pages.clientY);\n    };\n    ActionBase.prototype.autoScroll = function () {\n        var parent = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var yIsScrollable = parent.offsetHeight <= parent.scrollHeight;\n        var xIsScrollable = parent.offsetWidth <= parent.scrollWidth;\n        var yInBounds = yIsScrollable && parent.scrollTop >= 0 && parent.scrollTop + parent.offsetHeight <= parent.scrollHeight;\n        var xInBounds = xIsScrollable && parent.scrollLeft >= 0 && parent.scrollLeft + parent.offsetWidth <= parent.scrollWidth;\n        if (this.actionObj.action === 'resize' && this.scrollEdges.right && (parent.scrollLeft + parent.offsetWidth) > parent.scrollWidth) {\n            var tdCollections = ([].slice.call(this.parent.getContentTable().querySelector('tr').children)).length - 1;\n            var cellIndex = Math.ceil((this.actionObj.clone.offsetLeft + (this.actionObj.clone.offsetWidth)) /\n                this.actionObj.cellWidth);\n            xInBounds = cellIndex === tdCollections;\n        }\n        if (yInBounds && (this.scrollEdges.top || this.scrollEdges.bottom)) {\n            parent.scrollTop += this.scrollEdges.top ? -this.actionObj.scroll.scrollBy : this.actionObj.scroll.scrollBy;\n            if (this.actionObj.action === 'resize') {\n                if (parent.scrollHeight !== parent.offsetHeight + parent.scrollTop && parent.scrollTop > 0) {\n                    this.actionObj.Y += this.scrollEdges.top ? this.actionObj.scroll.scrollBy : -this.actionObj.scroll.scrollBy;\n                }\n            }\n        }\n        if (xInBounds && (this.scrollEdges.left || this.scrollEdges.right)) {\n            parent.scrollLeft += this.scrollEdges.left ? -this.actionObj.scroll.scrollBy : this.actionObj.scroll.scrollBy;\n            if (this.actionObj.action === 'resize') {\n                if (parent.scrollWidth !== parent.offsetWidth + parent.scrollLeft && parent.scrollLeft > 0) {\n                    this.actionObj.X += this.scrollEdges.left ? this.actionObj.scroll.scrollBy : -this.actionObj.scroll.scrollBy;\n                }\n            }\n        }\n    };\n    ActionBase.prototype.autoScrollValidation = function () {\n        if (!this.actionObj.scroll.enable) {\n            return false;\n        }\n        var res = this.parent.boundaryValidation(this.actionObj.pageY, this.actionObj.pageX);\n        this.scrollEdges = res;\n        return res.bottom || res.top || res.left || res.right;\n    };\n    ActionBase.prototype.actionClass = function (type) {\n        if (type === 'addClass') {\n            addClass([this.parent.element], cls.EVENT_ACTION_CLASS);\n        }\n        else {\n            removeClass([this.parent.element], cls.EVENT_ACTION_CLASS);\n        }\n    };\n    ActionBase.prototype.updateScrollPosition = function (e) {\n        var _this = this;\n        if (this.actionObj.scroll.enable && isNullOrUndefined(this.actionObj.scrollInterval)) {\n            this.actionObj.scrollInterval = window.setInterval(function () {\n                if (_this.autoScrollValidation() && !_this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n                    if (_this.parent.activeView.isTimelineView() && _this.parent.activeViewOptions.group.resources.length > 0\n                        && _this.actionObj.groupIndex < 0) {\n                        return;\n                    }\n                    _this.autoScroll();\n                    if (_this.actionObj.action === 'drag') {\n                        _this.parent.dragAndDropModule.updateDraggingDateTime(e);\n                    }\n                    else {\n                        _this.parent.resizeModule.updateResizingDirection(e);\n                    }\n                }\n            }, this.actionObj.scroll.timeDelay);\n        }\n    };\n    ActionBase.prototype.updateOriginalElement = function (cloneElement) {\n        var query = '[data-id=\"' + cloneElement.getAttribute('data-id') + '\"]';\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            query = query.concat('[data-group-index = \"' + cloneElement.getAttribute('data-group-index') + '\"]');\n        }\n        var elements = [].slice.call(this.parent.element.querySelectorAll(query));\n        addClass(elements, cls.EVENT_ACTION_CLASS);\n        var eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CLONE_ELEMENT_CLASS));\n        removeClass(eventWrappers, cls.EVENT_ACTION_CLASS);\n    };\n    ActionBase.prototype.getUpdatedEvent = function (startTime, endTime, eventObj) {\n        var event = JSON.parse(JSON.stringify(eventObj));\n        event[this.parent.eventFields.startTime] = startTime;\n        event[this.parent.eventFields.endTime] = endTime;\n        return event;\n    };\n    ActionBase.prototype.dynamicYearlyEventsRendering = function (event, isResize) {\n        if (isResize === void 0) { isResize = false; }\n        var appWidth = this.actionObj.cellWidth - 7;\n        if (isResize && (this.resizeEdges.left || this.resizeEdges.right)) {\n            appWidth = this.actionObj.cellWidth * event.count;\n        }\n        if (!isResize && (this.parent.activeViewOptions.orientation === 'Horizontal' && this.parent.activeViewOptions.group.resources.length === 0)) {\n            var eventObj = this.yearEvent.isSpannedEvent(event, event[this.parent.eventFields.startTime]);\n            if (eventObj[this.parent.eventFields.startTime].getTime() ===\n                eventObj[this.parent.eventFields.endTime].getTime()) {\n                eventObj.isSpanned.count = 1;\n            }\n            appWidth = eventObj.isSpanned.count * this.actionObj.cellWidth;\n        }\n        var appointmentElement = this.createAppointmentElement(this.actionObj.groupIndex, event[this.parent.eventFields.subject]);\n        appointmentElement.setAttribute('drag', 'true');\n        addClass([appointmentElement], cls.CLONE_ELEMENT_CLASS);\n        setStyleAttribute(appointmentElement, {\n            'width': appWidth + 'px', 'border': '0px', 'pointer-events': 'none',\n            'position': 'absolute', 'overflow': 'hidden', 'padding': '3px'\n        });\n        if (this.actionObj.clone.style.backgroundColor !== '') {\n            setStyleAttribute(appointmentElement, { 'backgroundColor': this.actionObj.clone.style.backgroundColor });\n        }\n        var date = util.resetTime(event[this.parent.eventFields.startTime]).getTime();\n        var query = '.' + cls.WORK_CELLS_CLASS + '[data-date=\"' + date + '\"]';\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            query = '.' + cls.WORK_CELLS_CLASS + '[data-date=\"' + date + '\"][data-group-index=\"' + this.actionObj.groupIndex + '\"]';\n        }\n        var cellTd = this.parent.element.querySelector(query);\n        if (isNullOrUndefined(cellTd)) {\n            return;\n        }\n        if (isResize) {\n            var dateHeader = cellTd.querySelector('.' + cls.DATE_HEADER_CLASS);\n            var appHeight = this.actionObj.cellHeight * event.count -\n                (dateHeader ? dateHeader.offsetHeight : 0) - 7;\n            if (this.resizeEdges.right || this.resizeEdges.left) {\n                appHeight = parseInt(this.actionObj.clone.style.height, 10);\n            }\n            setStyleAttribute(appointmentElement, { 'height': appHeight + 'px' });\n        }\n        this.renderDynamicElement(cellTd, appointmentElement, true);\n        this.actionObj.cloneElement.push(appointmentElement);\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    ActionBase.prototype.renderDynamicElement = function (cellTd, element, isAppointment) {\n        if (isAppointment === void 0) { isAppointment = false; }\n        if (cellTd.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS)) {\n            cellTd.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS).appendChild(element);\n        }\n        else {\n            var wrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n            wrapper.appendChild(element);\n            cellTd.appendChild(wrapper);\n        }\n    };\n    ActionBase.prototype.createAppointmentElement = function (resIndex, innerText) {\n        var appointmentWrapper = createElement('div', {\n            className: cls.APPOINTMENT_CLASS,\n            innerHTML: innerText\n        });\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            appointmentWrapper.setAttribute('data-group-index', resIndex.toString());\n        }\n        return appointmentWrapper;\n    };\n    ActionBase.prototype.dynamicEventsRendering = function (event) {\n        var _this = this;\n        var dateRender = this.parent.activeView.renderDates;\n        var workCells = [].slice.call(this.parent.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n        var workDays = this.parent.activeViewOptions.workDays;\n        var groupOrder;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var resources = this.parent.resourceBase.lastResourceLevel.\n                filter(function (res) { return res.groupIndex === _this.actionObj.groupIndex; });\n            dateRender = resources[0].renderDates;\n            var elementSelector = \".\" + cls.WORK_CELLS_CLASS + \"[data-group-index=\\\"\" + this.actionObj.groupIndex + \"\\\"]\";\n            workCells = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n            workDays = resources[0].workDays;\n            groupOrder = resources[0].groupOrder;\n        }\n        this.monthEvent.dateRender = dateRender;\n        this.monthEvent.getSlotDates(workDays);\n        if (this.resizeEdges.left || this.resizeEdges.right) {\n            var eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CLONE_ELEMENT_CLASS));\n            for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {\n                var wrapper = eventWrappers_1[_i];\n                remove(wrapper);\n            }\n        }\n        var spannedEvents = this.monthEvent.splitEvent(event, dateRender);\n        for (var _a = 0, spannedEvents_1 = spannedEvents; _a < spannedEvents_1.length; _a++) {\n            var event_1 = spannedEvents_1[_a];\n            var day = this.parent.getIndexOfDate(dateRender, util.resetTime(event_1[this.monthEvent.fields.startTime]));\n            var diffInDays = event_1.data.count;\n            var appWidth = (diffInDays * this.actionObj.cellWidth) - 7;\n            var appointmentElement = this.monthEvent.createAppointmentElement(event_1, this.actionObj.groupIndex, true);\n            appointmentElement.setAttribute('drag', 'true');\n            addClass([appointmentElement], cls.CLONE_ELEMENT_CLASS);\n            this.monthEvent.applyResourceColor(appointmentElement, event_1, 'backgroundColor', groupOrder);\n            setStyleAttribute(appointmentElement, { 'width': appWidth + 'px', 'border': '0px', 'pointer-events': 'none' });\n            var cellTd = workCells[day];\n            if (cellTd && isNullOrUndefined(this.parent.eventDragArea)) {\n                this.monthEvent.renderElement(cellTd, appointmentElement, true);\n                this.actionObj.cloneElement.push(appointmentElement);\n            }\n        }\n    };\n    ActionBase.prototype.destroy = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.actionObj = {};\n        this.scrollArgs = {};\n        this.resizeEdges = { left: false, right: false, top: false, bottom: false };\n        this.scrollEdges = { left: false, right: false, top: false, bottom: false };\n    };\n    return ActionBase;\n}());\nexport { ActionBase };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}