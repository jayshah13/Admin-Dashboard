{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { extend, remove, isNullOrUndefined, setStyleAttribute, removeClass, addClass } from '@syncfusion/ej2-base';\nimport { ContentRender } from './content-renderer';\nimport * as events from '../base/constant';\nimport { isRowEnteredInGrid, parentsUntil, setDisplayValue, generateExpandPredicates, getPredicates, getGroupKeysAndFields } from '../base/util';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { GroupModelGenerator } from '../services/group-model-generator';\nimport { GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport * as literals from '../base/string-literals';\n/**\n * GroupLazyLoadRenderer is used to perform lazy load grouping\n *\n * @hidden\n */\n\nvar GroupLazyLoadRenderer =\n/** @class */\nfunction (_super) {\n  __extends(GroupLazyLoadRenderer, _super);\n\n  function GroupLazyLoadRenderer(parent, locator) {\n    var _this = _super.call(this, parent, locator) || this;\n\n    _this.childCount = 0;\n    _this.scrollData = [];\n    _this.isFirstChildRow = false;\n    _this.isScrollDown = false;\n    _this.isScrollUp = false;\n    _this.groupCache = {};\n    _this.startIndexes = {};\n    _this.captionCounts = {};\n    _this.rowsByUid = {};\n    _this.objIdxByUid = {};\n    _this.initialGroupCaptions = {};\n    _this.requestType = ['paging', 'columnstate', 'reorder', 'cancel', 'save', 'beginEdit', 'add', 'delete', 'filterbeforeopen', 'filterchoicerequest'];\n    /** @hidden */\n\n    _this.cacheMode = false;\n    /** @hidden */\n\n    _this.cacheBlockSize = 5;\n    /** @hidden */\n\n    _this.ignoreAccent = _this.parent.allowFiltering ? _this.parent.filterSettings.ignoreAccent : false;\n    /** @hidden */\n\n    _this.allowCaseSensitive = false;\n    _this.locator = locator;\n    _this.groupGenerator = new GroupModelGenerator(_this.parent);\n    _this.summaryModelGen = new GroupSummaryModelGenerator(_this.parent);\n    _this.captionModelGen = new CaptionSummaryModelGenerator(_this.parent);\n    _this.rowRenderer = new RowRenderer(_this.locator, null, _this.parent);\n\n    _this.eventListener();\n\n    return _this;\n  }\n\n  GroupLazyLoadRenderer.prototype.eventListener = function () {\n    this.parent.addEventListener(events.actionBegin, this.actionBegin.bind(this));\n    this.parent.addEventListener(events.actionComplete, this.actionComplete.bind(this));\n    this.parent.on(events.initialEnd, this.setLazyLoadPageSize, this);\n    this.parent.on(events.setGroupCache, this.setCache, this);\n    this.parent.on(events.lazyLoadScrollHandler, this.scrollHandler, this);\n    this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n    this.parent.on(events.groupCollapse, this.collapseShortcut, this);\n  };\n  /**\n   * @param {HTMLTableRowElement} tr - specifies the table row element\n   * @returns {void}\n   * @hidden\n   */\n\n\n  GroupLazyLoadRenderer.prototype.captionExpand = function (tr) {\n    var _this = this;\n\n    var page = this.parent.pageSettings.currentPage;\n    var rowsObject = this.groupCache[page];\n    var uid = tr.getAttribute('data-uid');\n    var oriIndex = this.getRowObjectIndexByUid(uid);\n    var isRowExist = rowsObject[oriIndex + 1] ? rowsObject[oriIndex].indent < rowsObject[oriIndex + 1].indent : false;\n    var data = rowsObject[oriIndex];\n    var key = getGroupKeysAndFields(oriIndex, rowsObject);\n    var e = {\n      captionRowElement: tr,\n      groupInfo: data,\n      enableCaching: true,\n      cancel: false\n    };\n    this.parent.trigger(events.lazyLoadGroupExpand, e, function (args) {\n      if (args.cancel) {\n        return;\n      }\n\n      args.keys = key.keys;\n      args.fields = key.fields;\n      args.rowIndex = tr.rowIndex;\n      args.makeRequest = !args.enableCaching || !isRowExist;\n\n      if (!args.enableCaching && isRowExist) {\n        _this.clearCache([uid]);\n      }\n\n      args.skip = 0;\n      args.take = _this.pageSize;\n      data.isExpand = _this.rowsByUid[page][data.uid].isExpand = true;\n\n      _this.captionRowExpand(args);\n    });\n  };\n  /**\n   * @param {HTMLTableRowElement} tr - specifies the table row element\n   * @returns {void}\n   * @hidden\n   */\n\n\n  GroupLazyLoadRenderer.prototype.captionCollapse = function (tr) {\n    var _this = this;\n\n    var cache = this.groupCache[this.parent.pageSettings.currentPage];\n    var rowIdx = tr.rowIndex;\n    var uid = tr.getAttribute('data-uid');\n    var captionIndex = this.getRowObjectIndexByUid(uid);\n    var e = {\n      captionRowElement: tr,\n      groupInfo: cache[captionIndex],\n      cancel: false\n    };\n    this.parent.trigger(events.lazyLoadGroupCollapse, e, function (args) {\n      if (args.cancel) {\n        return;\n      }\n\n      args.isExpand = false;\n\n      _this.removeRows(captionIndex, rowIdx);\n    });\n  };\n  /**\n   * @returns {void}\n   * @hidden */\n\n\n  GroupLazyLoadRenderer.prototype.setLazyLoadPageSize = function () {\n    var scrollEle = this.parent.getContent().firstElementChild;\n    var blockSize = Math.floor(scrollEle.offsetHeight / this.parent.getRowHeight()) - 1;\n    this.pageSize = this.pageSize ? this.pageSize : blockSize * 3;\n    this.blockSize = Math.ceil(this.pageSize / 2);\n  };\n  /**\n   * @returns {void}\n   * @hidden */\n\n\n  GroupLazyLoadRenderer.prototype.clearLazyGroupCache = function () {\n    this.clearCache();\n  };\n\n  GroupLazyLoadRenderer.prototype.clearCache = function (uids) {\n    uids = uids ? uids : this.getInitialCaptionIndexes();\n    var cache = this.groupCache[this.parent.pageSettings.currentPage];\n\n    if (uids.length) {\n      for (var i = 0; i < uids.length; i++) {\n        var capIdx = this.getRowObjectIndexByUid(uids[i]);\n        var capRow = cache[capIdx];\n\n        if (!capRow) {\n          continue;\n        }\n\n        if (this.captionCounts[this.parent.pageSettings.currentPage][capRow.uid]) {\n          for (var i_1 = capIdx + 1; i_1 < cache.length; i_1++) {\n            if (cache[i_1].indent === capRow.indent || cache[i_1].indent < capRow.indent) {\n              delete this.captionCounts[this.parent.pageSettings.currentPage][capRow.uid];\n              break;\n            }\n\n            if (cache[i_1].isCaptionRow) {\n              delete this.captionCounts[this.parent.pageSettings.currentPage][cache[i_1].uid];\n            }\n          }\n        }\n\n        if (capRow.isExpand) {\n          var tr = this.parent.getRowElementByUID(capRow.uid);\n\n          if (!tr) {\n            return;\n          }\n\n          this.parent.groupModule.expandCollapseRows(tr.querySelector('.e-recordplusexpand'));\n        }\n\n        var child = this.getNextChilds(capIdx);\n\n        if (!child.length) {\n          continue;\n        }\n\n        var subChild = [];\n\n        if (child[child.length - 1].isCaptionRow) {\n          subChild = this.getChildRowsByParentIndex(cache.indexOf(child[child.length - 1]), false, false, null, true, true);\n        }\n\n        var start = cache.indexOf(child[0]);\n        var end = subChild.length ? cache.indexOf(subChild[subChild.length - 1]) : cache.indexOf(child[child.length - 1]);\n        cache.splice(start, end - (start - 1));\n        this.refreshCaches();\n      }\n    }\n  };\n\n  GroupLazyLoadRenderer.prototype.refreshCaches = function () {\n    var page = this.parent.pageSettings.currentPage;\n    var cache = this.groupCache[page];\n    this.rowsByUid = {};\n    this.objIdxByUid = {};\n\n    for (var i = 0; i < cache.length; i++) {\n      this.maintainRows(cache[i], i);\n    }\n  };\n\n  GroupLazyLoadRenderer.prototype.getInitialCaptionIndexes = function () {\n    var page = this.parent.pageSettings.currentPage;\n    var uids = [];\n\n    for (var i = 0; i < this.initialGroupCaptions[page].length; i++) {\n      uids.push(this.initialGroupCaptions[page][i].uid);\n    }\n\n    return uids;\n  };\n  /**\n   * @param {string} uid - specifies the uid\n   * @returns {number} returns the row object uid\n   * @hidden\n   */\n\n\n  GroupLazyLoadRenderer.prototype.getRowObjectIndexByUid = function (uid) {\n    return this.objIdxByUid[this.parent.pageSettings.currentPage][uid];\n  };\n\n  GroupLazyLoadRenderer.prototype.collapseShortcut = function (args) {\n    if (this.parent.groupSettings.columns.length && args.target && parentsUntil(args.target, literals.content) && args.target.parentElement.tagName === 'TR') {\n      if (!args.collapse && parentsUntil(args.target, literals.row)) {\n        return;\n      }\n\n      var row = args.target.parentElement;\n      var uid = row.getAttribute('data-uid');\n\n      if (args.collapse) {\n        var rowObj = this.getRowByUid(uid);\n        var capRow = this.getRowByUid(rowObj.parentUid);\n\n        if (capRow.isCaptionRow && capRow.isExpand) {\n          var capEle = this.getRowElementByUid(rowObj.parentUid);\n          this.parent.groupModule.expandCollapseRows(capEle.cells[rowObj.indent - 1]);\n        }\n      } else {\n        var capRow = this.getRowByUid(uid);\n\n        if (capRow.isCaptionRow && !capRow.isExpand) {\n          var capEle = this.getRowElementByUid(uid);\n          this.parent.groupModule.expandCollapseRows(capEle.cells[capRow.indent]);\n        }\n      }\n    }\n  };\n\n  GroupLazyLoadRenderer.prototype.getRowByUid = function (uid) {\n    return this.rowsByUid[this.parent.pageSettings.currentPage][uid];\n  };\n\n  GroupLazyLoadRenderer.prototype.actionBegin = function (args) {\n    if (!args.cancel) {\n      if (!this.requestType.some(function (value) {\n        return value === args.requestType;\n      })) {\n        this.groupCache = {};\n        this.resetRowMaintenance();\n      }\n\n      if (args.requestType === 'reorder' && this.parent.groupSettings.columns.length) {\n        var keys = Object.keys(this.groupCache);\n\n        for (var j = 0; j < keys.length; j++) {\n          var cache = this.groupCache[keys[j]];\n\n          for (var i = 0; i < cache.length; i++) {\n            if (cache[i].isCaptionRow && !this.captionModelGen.isEmpty()) {\n              this.changeCaptionRow(cache[i], null, keys[j]);\n            }\n\n            if (cache[i].isDataRow) {\n              var from = args.fromIndex + cache[i].indent;\n              var to = args.toIndex + cache[i].indent;\n              this.moveCells(cache[i].cells, from, to);\n            }\n          }\n        }\n      }\n\n      if (args.requestType === 'delete' || args.action === 'add' && args.requestType === 'save') {\n        this.groupCache = {};\n        this.resetRowMaintenance();\n      }\n    }\n  };\n\n  GroupLazyLoadRenderer.prototype.actionComplete = function (args) {\n    if (!args.cancel && args.requestType !== 'columnstate' && args.requestType !== 'beginEdit' && args.requestType !== 'delete' && args.requestType !== 'save' && args.requestType !== 'reorder') {\n      this.scrollReset();\n    }\n  };\n\n  GroupLazyLoadRenderer.prototype.resetRowMaintenance = function () {\n    this.startIndexes = {};\n    this.captionCounts = {};\n    this.rowsByUid = {};\n    this.objIdxByUid = {};\n    this.initialGroupCaptions = {};\n  };\n\n  GroupLazyLoadRenderer.prototype.moveCells = function (arr, from, to) {\n    if (from >= arr.length) {\n      var k = from - arr.length;\n\n      while (k-- + 1) {\n        arr.push(undefined);\n      }\n    }\n\n    arr.splice(from, 0, arr.splice(to, 1)[0]);\n  };\n\n  GroupLazyLoadRenderer.prototype.removeRows = function (idx, trIdx) {\n    var page = this.parent.pageSettings.currentPage;\n    var rows = this.groupCache[page];\n    var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n    var aggUid;\n\n    if (this.parent.aggregates.length) {\n      var agg = this.getAggregateByCaptionIndex(idx);\n      aggUid = agg.length ? agg[agg.length - 1].uid : undefined;\n    }\n\n    var indent = rows[idx].indent;\n    this.addClass(this.getNextChilds(idx));\n    rows[idx].isExpand = this.rowsByUid[page][rows[idx].uid].isExpand = false;\n    var capUid;\n\n    for (var i = idx + 1; i < rows.length; i++) {\n      if (rows[i].indent === indent || rows[i].indent < indent) {\n        capUid = rows[i].uid;\n        break;\n      }\n\n      if (rows[i].isCaptionRow && rows[i].isExpand) {\n        this.addClass(this.getNextChilds(i));\n      }\n    }\n\n    for (var i = trIdx + 1; i < trs.length; i++) {\n      if (trs[i].getAttribute('data-uid') === capUid) {\n        break;\n      } else if (trs[i].getAttribute('data-uid') === aggUid) {\n        remove(trs[i]);\n        break;\n      } else {\n        remove(trs[i]);\n      }\n    }\n  };\n\n  GroupLazyLoadRenderer.prototype.addClass = function (rows) {\n    var last = rows[this.blockSize];\n\n    if (last) {\n      last.lazyLoadCssClass = 'e-lazyload-middle-down';\n    }\n  };\n\n  GroupLazyLoadRenderer.prototype.getNextChilds = function (index, rowObjects) {\n    var group = this.groupCache[this.parent.pageSettings.currentPage];\n    var rows = rowObjects ? rowObjects : group;\n    var indent = group[index].indent + 1;\n    var childRows = [];\n\n    for (var i = rowObjects ? 0 : index + 1; i < rows.length; i++) {\n      if (rows[i].indent < indent) {\n        break;\n      }\n\n      if (rows[i].indent === indent) {\n        childRows.push(rows[i]);\n      }\n    }\n\n    return childRows;\n  };\n\n  GroupLazyLoadRenderer.prototype.lazyLoadHandler = function (args) {\n    this.setStartIndexes();\n    var tr = this.parent.getContent().querySelectorAll('tr')[args.index];\n    var uid = tr.getAttribute('data-uid');\n    var captionIndex = this.getRowObjectIndexByUid(uid);\n    var captionRow = this.groupCache[this.parent.pageSettings.currentPage][captionIndex];\n    var rows = args.isRowExist ? args.isScroll ? this.scrollData : this.getChildRowsByParentIndex(captionIndex, true, true, null, true) : [];\n    this.scrollData = [];\n\n    if (!args.isRowExist) {\n      this.setRowIndexes(captionIndex, captionRow);\n      this.refreshCaptionRowCount(this.groupCache[this.parent.pageSettings.currentPage][captionIndex], args.count);\n\n      if (Object.keys(args.data).indexOf('GroupGuid') !== -1) {\n        for (var i = 0; i < args.data.length; i++) {\n          var data = this.groupGenerator.generateCaptionRow(args.data[i], args.level, captionRow.parentGid, undefined, 0, captionRow.uid);\n          rows.push(data);\n\n          if (this.parent.aggregates.length) {\n            rows = rows.concat(this.summaryModelGen.generateRows(args.data[i], {\n              level: args.level + 1,\n              parentUid: data.uid\n            }));\n          }\n        }\n      } else {\n        this.groupGenerator.index = this.getStartIndex(captionIndex, args.isScroll);\n        rows = this.groupGenerator.generateDataRows(args.data, args.level, captionRow.parentGid, 0, captionRow.uid);\n      }\n    }\n\n    var trIdx = args.isScroll ? this.rowIndex : args.index;\n    var nxtChild = this.getNextChilds(captionIndex, rows);\n    var lastRow = !args.up ? this.hasLastChildRow(args.isScroll, args.count, nxtChild.length) : true;\n\n    if (!args.isRowExist && !lastRow) {\n      nxtChild[this.blockSize].lazyLoadCssClass = 'e-lazyload-middle-down';\n    }\n\n    if (!lastRow) {\n      nxtChild[nxtChild.length - 1].lazyLoadCssClass = 'e-not-lazyload-end';\n    }\n\n    var aggregates = !args.isScroll && !args.isRowExist ? this.getAggregateByCaptionIndex(captionIndex) : [];\n\n    if (!args.up) {\n      if (!args.isRowExist) {\n        this.refreshRowObjects(rows, args.isScroll ? this.rowObjectIndex : captionIndex);\n      }\n    }\n\n    this.render(trIdx, rows, lastRow, aggregates);\n\n    if (this.isFirstChildRow && !args.up) {\n      this.parent.getContent().firstElementChild.scrollTop = rows.length * this.parent.getRowHeight();\n    }\n\n    this.isFirstChildRow = false;\n    this.rowIndex = undefined;\n    this.rowObjectIndex = undefined;\n    this.childCount = 0;\n  };\n\n  GroupLazyLoadRenderer.prototype.setRowIndexes = function (capIdx, row) {\n    if (!this.captionCounts[this.parent.pageSettings.currentPage]) {\n      this.captionCounts[this.parent.pageSettings.currentPage] = {};\n    }\n\n    if (row.isCaptionRow) {\n      this.captionCounts[this.parent.pageSettings.currentPage][row.uid] = row.data.count;\n    }\n  };\n\n  GroupLazyLoadRenderer.prototype.getStartIndex = function (capIdx, isScroll) {\n    var page = this.parent.pageSettings.currentPage;\n    var cache = this.groupCache[page];\n\n    if (isScroll) {\n      return cache[this.rowObjectIndex].index + 1;\n    }\n\n    var count = 0;\n    var idx = 0;\n    var prevCapRow = this.getRowByUid(cache[capIdx].parentUid);\n\n    if (prevCapRow) {\n      idx = this.prevCaptionCount(prevCapRow);\n    }\n\n    if (cache[capIdx].indent > 0) {\n      for (var i = capIdx - 1; i >= 0; i--) {\n        if (cache[i].indent < cache[capIdx].indent) {\n          break;\n        }\n\n        if (cache[i].isCaptionRow && cache[i].indent === cache[capIdx].indent) {\n          count = count + cache[i].data.count;\n        }\n      }\n    }\n\n    var index = count + idx + this.startIndexes[page][cache[capIdx].parentGid];\n    return index;\n  };\n\n  GroupLazyLoadRenderer.prototype.prevCaptionCount = function (prevCapRow) {\n    var page = this.parent.pageSettings.currentPage;\n    var cache = this.groupCache[page];\n    var idx = 0;\n\n    for (var i = cache.indexOf(prevCapRow) - 1; i >= 0; i--) {\n      if (cache[i].indent === 0) {\n        break;\n      }\n\n      if (cache[i].indent < prevCapRow.indent) {\n        break;\n      }\n\n      if (cache[i].isCaptionRow && cache[i].indent === prevCapRow.indent) {\n        var count = this.captionCounts[page][cache[i].uid];\n        idx = idx + (count ? count : cache[i].data.count);\n      }\n    }\n\n    var capRow = this.getRowByUid(prevCapRow.parentUid);\n\n    if (capRow) {\n      idx = idx + this.prevCaptionCount(capRow);\n    }\n\n    return idx;\n  };\n\n  GroupLazyLoadRenderer.prototype.setStartIndexes = function () {\n    var cache = this.groupCache[this.parent.pageSettings.currentPage];\n\n    if (!this.startIndexes[this.parent.pageSettings.currentPage]) {\n      var indexes = [];\n      var idx = void 0;\n\n      for (var i = 0; i < cache.length; i++) {\n        if (cache[i].isCaptionRow) {\n          if (!indexes.length) {\n            indexes.push(0);\n          } else {\n            indexes.push(cache[idx].data.count + indexes[indexes.length - 1]);\n          }\n\n          idx = i;\n        }\n      }\n\n      this.startIndexes[this.parent.pageSettings.currentPage] = indexes;\n    }\n  };\n\n  GroupLazyLoadRenderer.prototype.hasLastChildRow = function (isScroll, captionCount, rowCount) {\n    return isScroll ? captionCount === this.childCount + rowCount : captionCount === rowCount;\n  };\n\n  GroupLazyLoadRenderer.prototype.refreshCaptionRowCount = function (row, count) {\n    row.data.count = count;\n  };\n\n  GroupLazyLoadRenderer.prototype.render = function (trIdx, rows, hasLastChildRow, aggregates) {\n    var tr = this.parent.getContent().querySelectorAll('tr')[trIdx];\n    var scrollEle = this.parent.getContent().firstElementChild;\n    var rowHeight = this.parent.getRowHeight();\n\n    if (tr && aggregates.length) {\n      for (var i = aggregates.length - 1; i >= 0; i--) {\n        tr.insertAdjacentElement('afterend', this.rowRenderer.render(aggregates[i], this.parent.getColumns()));\n      }\n    }\n\n    if (tr && rows.length) {\n      for (var i = rows.length - 1; i >= 0; i--) {\n        if (this.confirmRowRendering(rows[i])) {\n          tr.insertAdjacentElement('afterend', this.rowRenderer.render(rows[i], this.parent.getColumns()));\n\n          if (this.isScrollDown) {\n            scrollEle.scrollTop = scrollEle.scrollTop - rowHeight;\n          }\n\n          if (this.isScrollUp) {\n            scrollEle.scrollTop = scrollEle.scrollTop + rowHeight;\n          }\n        }\n      }\n    }\n\n    this.isScrollDown = false;\n    this.isScrollUp = false;\n  };\n  /**\n   * @param {Row<Column>} row - specifies the row\n   * @param {number} index - specifies the index\n   * @returns {void}\n   * @hidden\n   */\n\n\n  GroupLazyLoadRenderer.prototype.maintainRows = function (row, index) {\n    var page = this.parent.pageSettings.currentPage;\n\n    if (!this.rowsByUid[page]) {\n      this.rowsByUid[page] = {};\n      this.objIdxByUid[page] = {};\n    }\n\n    if (row.uid) {\n      this.rowsByUid[page][row.uid] = row;\n    }\n\n    this.objIdxByUid[page][row.uid] = index;\n  };\n\n  GroupLazyLoadRenderer.prototype.confirmRowRendering = function (row) {\n    var check = true;\n\n    if (isNullOrUndefined(row.indent) && !row.isDataRow && !row.isCaptionRow) {\n      var cap = this.getRowByUid(row.parentUid);\n\n      if (cap.isCaptionRow && !cap.isExpand) {\n        check = false;\n      }\n    }\n\n    return check;\n  };\n\n  GroupLazyLoadRenderer.prototype.refreshRowObjects = function (newRows, index) {\n    var page = this.parent.pageSettings.currentPage;\n    var rowsObject = this.groupCache[page];\n    this.rowsByUid[page] = {};\n    this.objIdxByUid[page] = {};\n    var newRowsObject = [];\n    var k = 0;\n\n    for (var i = 0; i < rowsObject.length; i++) {\n      if (i === index) {\n        this.maintainRows(rowsObject[i], k);\n        newRowsObject.push(rowsObject[i]);\n        k++;\n\n        for (var j = 0; j < newRows.length; j++) {\n          this.maintainRows(newRows[j], k);\n          newRowsObject.push(newRows[j]);\n          k++;\n        }\n      } else {\n        this.maintainRows(rowsObject[i], k);\n        newRowsObject.push(rowsObject[i]);\n        k++;\n      }\n    }\n\n    this.groupCache[this.parent.pageSettings.currentPage] = extend([], newRowsObject);\n    this.updateCurrentViewData();\n  };\n\n  GroupLazyLoadRenderer.prototype.getAggregateByCaptionIndex = function (index) {\n    var cache = this.groupCache[this.parent.pageSettings.currentPage];\n    var parent = cache[index];\n    var indent = parent.indent;\n    var uid = parent.uid;\n    var agg = [];\n\n    for (var i = index + 1; i < cache.length; i++) {\n      if (cache[i].indent === indent) {\n        break;\n      }\n\n      if (isNullOrUndefined(cache[i].indent) && cache[i].parentUid === uid) {\n        agg.push(cache[i]);\n      }\n    }\n\n    return agg;\n  };\n\n  GroupLazyLoadRenderer.prototype.getChildRowsByParentIndex = function (index, deep, block, data, includeAgg, includeCollapseAgg) {\n    var cache = data ? data : this.groupCache[this.parent.pageSettings.currentPage];\n    var parentRow = cache[index];\n    var agg = [];\n\n    if (!parentRow.isCaptionRow || parentRow.isCaptionRow && !parentRow.isExpand && !includeCollapseAgg) {\n      return [];\n    }\n\n    if (includeAgg && this.parent.aggregates.length) {\n      agg = this.getAggregateByCaptionIndex(index);\n    }\n\n    var indent = parentRow.indent;\n    var uid = parentRow.uid;\n    var rows = [];\n    var count = 0;\n\n    for (var i = index + 1; i < cache.length; i++) {\n      if (cache[i].parentUid === uid) {\n        if (isNullOrUndefined(cache[i].indent)) {\n          continue;\n        }\n\n        count++;\n        rows.push(cache[i]);\n\n        if (deep && cache[i].isCaptionRow) {\n          rows = rows.concat(this.getChildRowsByParentIndex(i, deep, block, data, includeAgg));\n        }\n\n        if (block && count === this.pageSize) {\n          break;\n        }\n      }\n\n      if (cache[i].indent === indent) {\n        break;\n      }\n    }\n\n    return rows.concat(agg);\n  };\n  /**\n   * @param {boolean} isReorder - specifies the isreorder\n   * @returns {Row<Column>[]} returns the row\n   * @hidden\n   */\n\n\n  GroupLazyLoadRenderer.prototype.initialGroupRows = function (isReorder) {\n    var rows = [];\n    var cache = this.groupCache[this.parent.pageSettings.currentPage];\n\n    if (isReorder) {\n      return this.getRenderedRowsObject();\n    }\n\n    for (var i = 0; i < cache.length; i++) {\n      if (cache[i].indent === 0) {\n        rows.push(cache[i]);\n        rows = rows.concat(this.getChildRowsByParentIndex(i, true, true, cache, true));\n      }\n    }\n\n    return rows;\n  };\n  /**\n   * @returns {Row<Column>[]} retruns the row\n   * @hidden */\n\n\n  GroupLazyLoadRenderer.prototype.getRenderedRowsObject = function () {\n    var rows = [];\n    var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n\n    for (var i = 0; i < trs.length; i++) {\n      rows.push(this.getRowByUid(trs[i].getAttribute('data-uid')));\n    }\n\n    return rows;\n  };\n\n  GroupLazyLoadRenderer.prototype.getCacheRowsOnDownScroll = function (index) {\n    var rows = [];\n    var rowsObject = this.groupCache[this.parent.pageSettings.currentPage];\n    var k = index;\n\n    for (var i = 0; i < this.pageSize; i++) {\n      if (!rowsObject[k] || rowsObject[k].indent < rowsObject[index].indent) {\n        break;\n      }\n\n      if (rowsObject[k].indent === rowsObject[index].indent) {\n        rows.push(rowsObject[k]);\n\n        if (rowsObject[k].isCaptionRow && rowsObject[k].isExpand) {\n          rows = rows.concat(this.getChildRowsByParentIndex(k, true, true, null, true));\n        }\n      }\n\n      if (rowsObject[k].indent > rowsObject[index].indent || isNullOrUndefined(rowsObject[k].indent)) {\n        i--;\n      }\n\n      k++;\n    }\n\n    return rows;\n  };\n\n  GroupLazyLoadRenderer.prototype.getCacheRowsOnUpScroll = function (start, end, index) {\n    var rows = [];\n    var rowsObject = this.groupCache[this.parent.pageSettings.currentPage];\n    var str = false;\n\n    for (var i = 0; i < rowsObject.length; i++) {\n      if (str && (!rowsObject[i] || rowsObject[i].indent < rowsObject[index].indent || rowsObject[i].uid === end)) {\n        break;\n      }\n\n      if (!str && rowsObject[i].uid === start) {\n        str = true;\n      }\n\n      if (str && rowsObject[i].indent === rowsObject[index].indent) {\n        rows.push(rowsObject[i]);\n\n        if (rowsObject[i].isCaptionRow && rowsObject[i].isExpand) {\n          rows = rows.concat(this.getChildRowsByParentIndex(i, true, true, null, true));\n        }\n      }\n    }\n\n    return rows;\n  };\n\n  GroupLazyLoadRenderer.prototype.scrollHandler = function (e) {\n    if (this.parent.isDestroyed || this.childCount) {\n      return;\n    }\n\n    var downTrs = [].slice.call(this.parent.getContent().getElementsByClassName('e-lazyload-middle-down'));\n    var upTrs = [].slice.call(this.parent.getContent().getElementsByClassName('e-lazyload-middle-up'));\n    var endTrs = [].slice.call(this.parent.getContent().getElementsByClassName('e-not-lazyload-end'));\n    var tr;\n    var lazyLoadDown = false;\n    var lazyLoadUp = false;\n    var lazyLoadEnd = false;\n\n    if (e.scrollDown && downTrs.length) {\n      var result = this.findRowElements(downTrs);\n      tr = result.tr;\n      lazyLoadDown = result.entered;\n    }\n\n    if (!e.scrollDown && endTrs) {\n      for (var i = 0; i < endTrs.length; i++) {\n        var top_1 = endTrs[i].getBoundingClientRect().top;\n        var scrollHeight = this.parent.getContent().scrollHeight;\n\n        if (top_1 > 0 && top_1 < scrollHeight) {\n          tr = endTrs[i];\n          lazyLoadEnd = true;\n          this.rowIndex = tr.rowIndex;\n          break;\n        }\n      }\n    }\n\n    if (!e.scrollDown && upTrs.length && !lazyLoadEnd) {\n      var result = this.findRowElements(upTrs);\n      tr = result.tr;\n      lazyLoadUp = result.entered;\n    }\n\n    if (tr) {\n      if (lazyLoadDown && e.scrollDown && lazyLoadDown && tr) {\n        this.scrollDownHandler(tr);\n      }\n\n      if (!e.scrollDown && lazyLoadEnd && tr) {\n        this.scrollUpEndRowHandler(tr);\n      }\n\n      if (this.cacheMode && !e.scrollDown && !lazyLoadEnd && lazyLoadUp && tr) {\n        this.scrollUpHandler(tr);\n      }\n    }\n  };\n\n  GroupLazyLoadRenderer.prototype.scrollUpEndRowHandler = function (tr) {\n    var page = this.parent.pageSettings.currentPage;\n    var rows = this.groupCache[page];\n    var uid = tr.getAttribute('data-uid');\n    var index = this.rowObjectIndex = this.getRowObjectIndexByUid(uid);\n    var idx = index;\n    var childRow = rows[index];\n    var parentCapRow = this.getRowByUid(childRow.parentUid);\n    var capRowObjIdx = this.getRowObjectIndexByUid(parentCapRow.uid);\n    var captionRowEle = this.parent.getContent().querySelector('tr[data-uid=' + parentCapRow.uid + ']');\n    var capRowEleIndex = captionRowEle.rowIndex;\n    var child = this.getChildRowsByParentIndex(capRowObjIdx);\n    var childIdx = child.indexOf(childRow);\n    var currentPage = Math.ceil(childIdx / this.pageSize);\n\n    if (currentPage === 1) {\n      return;\n    }\n\n    this.childCount = currentPage * this.pageSize;\n    index = this.getCurrentBlockEndIndex(childRow, index);\n\n    if (this.childCount < parentCapRow.data.count) {\n      tr.classList.remove('e-not-lazyload-end');\n      childRow.lazyLoadCssClass = '';\n      var isRowExist = rows[index + 1] ? childRow.indent === rows[index + 1].indent : false;\n      this.scrollData = isRowExist ? this.getCacheRowsOnDownScroll(index + 1) : [];\n      var key = getGroupKeysAndFields(capRowObjIdx, rows);\n      var args = {\n        rowIndex: capRowEleIndex,\n        makeRequest: !isRowExist,\n        groupInfo: parentCapRow,\n        fields: key.fields,\n        keys: key.keys,\n        skip: this.childCount,\n        take: this.pageSize,\n        isScroll: true\n      };\n\n      if (this.cacheMode && this.childCount >= this.pageSize * this.cacheBlockSize) {\n        var child_1 = this.getChildRowsByParentIndex(capRowObjIdx);\n        var currenBlock = Math.ceil(child_1.indexOf(rows[idx]) / this.pageSize);\n        var removeBlock = currenBlock - (this.cacheBlockSize - 1);\n        this.removeBlock(uid, isRowExist, removeBlock, child_1);\n        args.cachedRowIndex = removeBlock * this.pageSize;\n      }\n\n      this.captionRowExpand(args);\n    } else {\n      this.childCount = 0;\n    }\n  };\n\n  GroupLazyLoadRenderer.prototype.scrollDownHandler = function (tr) {\n    var page = this.parent.pageSettings.currentPage;\n    var rows = this.groupCache[page];\n    var uid = tr.getAttribute('data-uid');\n    var index = this.getRowObjectIndexByUid(uid);\n    var idx = index;\n    var childRow = rows[index];\n    var parentCapRow = this.getRowByUid(childRow.parentUid);\n    var capRowObjIdx = this.getRowObjectIndexByUid(parentCapRow.uid);\n    var captionRowEle = this.getRowElementByUid(parentCapRow.uid);\n    var capRowEleIndex = captionRowEle.rowIndex;\n    var child = this.getChildRowsByParentIndex(capRowObjIdx);\n    var childIdx = child.indexOf(childRow);\n    var currentPage = Math.ceil(childIdx / this.pageSize);\n    this.childCount = currentPage * this.pageSize;\n    index = this.rowObjectIndex = this.getRowObjectIndexByUid(child[this.childCount - 1].uid);\n    var lastchild = rows[index];\n    var lastRow = this.getRowElementByUid(lastchild.uid);\n    this.rowIndex = lastRow.rowIndex;\n    index = this.getCurrentBlockEndIndex(lastchild, index);\n\n    if (this.childCount < parentCapRow.data.count) {\n      var isRowExist = rows[index + 1] ? childRow.indent === rows[index + 1].indent : false;\n\n      if (isRowExist && !isNullOrUndefined(this.getRowElementByUid(rows[index + 1].uid))) {\n        this.childCount = 0;\n        return;\n      }\n\n      if (currentPage > 1 || !this.cacheMode) {\n        tr.classList.remove('e-lazyload-middle-down');\n        lastRow.classList.remove('e-not-lazyload-end');\n        lastchild.lazyLoadCssClass = '';\n      }\n\n      this.scrollData = isRowExist ? this.getCacheRowsOnDownScroll(this.rowObjectIndex + 1) : [];\n      var query = getGroupKeysAndFields(capRowObjIdx, rows);\n      var args = {\n        rowIndex: capRowEleIndex,\n        makeRequest: !isRowExist,\n        groupInfo: parentCapRow,\n        fields: query.fields,\n        keys: query.keys,\n        skip: this.childCount,\n        take: this.pageSize,\n        isScroll: true\n      };\n\n      if (this.cacheMode && this.childCount - this.pageSize >= this.pageSize * this.cacheBlockSize) {\n        this.isScrollDown = true;\n        var child_2 = this.getChildRowsByParentIndex(capRowObjIdx);\n        var currenBlock = Math.ceil(child_2.indexOf(rows[idx]) / this.pageSize) - 1;\n        var removeBlock = currenBlock - (this.cacheBlockSize - 1) + 1;\n        this.removeBlock(uid, isRowExist, removeBlock, child_2, lastchild);\n        args.cachedRowIndex = removeBlock * this.pageSize;\n      }\n\n      this.captionRowExpand(args);\n    } else {\n      this.childCount = 0;\n    }\n  };\n\n  GroupLazyLoadRenderer.prototype.getCurrentBlockEndIndex = function (row, index) {\n    var page = this.parent.pageSettings.currentPage;\n    var rows = this.groupCache[page];\n\n    if (row.isCaptionRow) {\n      if (row.isExpand) {\n        var childCount = this.getChildRowsByParentIndex(index, true).length;\n        this.rowIndex = this.rowIndex + childCount;\n      }\n\n      var agg = this.getAggregateByCaptionIndex(index);\n      this.rowObjectIndex = this.rowObjectIndex + agg.length;\n      var idx = index;\n\n      for (var i = idx + 1; i < rows.length; i++) {\n        if (rows[i].indent === rows[index].indent || rows[i].indent < rows[index].indent) {\n          index = idx;\n          break;\n        } else {\n          idx++;\n        }\n      }\n    }\n\n    return index;\n  };\n\n  GroupLazyLoadRenderer.prototype.removeBlock = function (uid, isRowExist, removeBlock, child, lastchild) {\n    var page = this.parent.pageSettings.currentPage;\n    var rows = this.groupCache[page];\n    var uid1 = child[(removeBlock + 1) * this.pageSize - 1 - this.blockSize].uid;\n    var uid2 = child[removeBlock * this.pageSize - this.pageSize].uid;\n    var uid3 = child[removeBlock * this.pageSize].uid;\n    var firstIdx = this.getRowObjectIndexByUid(uid1);\n    rows[firstIdx].lazyLoadCssClass = 'e-lazyload-middle-up';\n    this.getRowElementByUid(uid1).classList.add('e-lazyload-middle-up');\n\n    if (lastchild) {\n      this.getRowElementByUid(uid3).classList.add('e-not-lazyload-first');\n      this.getRowByUid(uid3).lazyLoadCssClass = 'e-not-lazyload-first';\n      this.getRowByUid(uid2).lazyLoadCssClass = '';\n    }\n\n    if (isRowExist) {\n      this.removeTopRows(lastchild ? lastchild.uid : uid, uid2, uid3);\n    } else {\n      this.uid1 = uid2;\n      this.uid2 = uid3;\n      this.uid3 = lastchild ? lastchild.uid : uid;\n    }\n  };\n\n  GroupLazyLoadRenderer.prototype.scrollUpHandler = function (tr) {\n    var page = this.parent.pageSettings.currentPage;\n    var rows = this.groupCache[page];\n    var uid = tr.getAttribute('data-uid');\n    var row = this.getRowByUid(uid);\n    var index = this.rowObjectIndex = this.getRowObjectIndexByUid(uid);\n    var parentCapRow = this.getRowByUid(row.parentUid);\n    var capRowObjIdx = this.rowIndex = this.getRowObjectIndexByUid(parentCapRow.uid);\n    var captionRowEle = this.parent.getRowElementByUID(parentCapRow.uid);\n    var capRowEleIndex = captionRowEle.rowIndex;\n    var child = this.getChildRowsByParentIndex(capRowObjIdx);\n    var childIdx = child.indexOf(rows[index]);\n    var currenBlock = Math.floor(childIdx / this.pageSize);\n    var idx = this.blockSize;\n\n    if (this.blockSize * 2 > this.pageSize) {\n      idx = this.blockSize * 2 - this.pageSize;\n      idx = this.blockSize - idx;\n    }\n\n    var start = child[childIdx - (idx - 1) - this.pageSize].uid;\n    var end = child[childIdx - (idx - 1)].uid;\n    this.scrollData = this.getCacheRowsOnUpScroll(start, end, index - (idx - 1));\n    this.isFirstChildRow = currenBlock > 1;\n\n    if (this.isFirstChildRow) {\n      this.scrollData[0].lazyLoadCssClass = 'e-not-lazyload-first';\n    }\n\n    this.getRowByUid(end).lazyLoadCssClass = '';\n    this.getRowElementByUid(end).classList.remove('e-not-lazyload-first');\n    var removeBlock = currenBlock + this.cacheBlockSize;\n\n    if (child.length !== parentCapRow.data.count && removeBlock * this.pageSize > child.length) {\n      this.isFirstChildRow = false;\n      this.scrollData[0].lazyLoadCssClass = '';\n      this.getRowElementByUid(end).classList.add('e-not-lazyload-first');\n      return;\n    }\n\n    var count = removeBlock * this.pageSize > parentCapRow.data.count ? parentCapRow.data.count : removeBlock * this.pageSize;\n    var size = removeBlock * this.pageSize > parentCapRow.data.count ? this.pageSize - (this.pageSize * removeBlock - parentCapRow.data.count) : this.pageSize;\n    var childRows = this.getChildRowsByParentIndex(rows.indexOf(child[count - 1]), true, false, null, true);\n    var uid1 = childRows.length ? childRows[childRows.length - 1].uid : child[count - 1].uid;\n    var uid2 = child[count - size].uid;\n    var uid3 = child[count - size - 1].uid;\n    var lastIdx = this.objIdxByUid[page][uid2] - idx;\n\n    if (rows[lastIdx].lazyLoadCssClass === 'e-lazyload-middle-down') {\n      var trEle = this.getRowElementByUid(rows[lastIdx].uid);\n\n      if (trEle) {\n        trEle.classList.add('e-lazyload-middle-down');\n      }\n    }\n\n    this.getRowByUid(uid1).lazyLoadCssClass = '';\n    this.getRowByUid(uid3).lazyLoadCssClass = 'e-not-lazyload-end';\n    this.getRowElementByUid(uid3).classList.add('e-not-lazyload-end');\n    this.removeBottomRows(uid1, uid2, uid3);\n    this.rowIndex = tr.rowIndex - idx;\n\n    if (tr.classList.length > 1) {\n      tr.classList.remove('e-lazyload-middle-up');\n    } else {\n      tr.removeAttribute('class');\n    }\n\n    if (!isNullOrUndefined(this.getRowElementByUid(start))) {\n      this.childCount = 0;\n      this.scrollData = [];\n      return;\n    }\n\n    var key = getGroupKeysAndFields(this.getRowObjectIndexByUid(parentCapRow.uid), rows);\n    var args = {\n      rowIndex: capRowEleIndex,\n      makeRequest: false,\n      groupInfo: parentCapRow,\n      fields: key.fields,\n      keys: key.keys,\n      skip: this.childCount,\n      take: this.pageSize,\n      isScroll: true,\n      scrollUp: true\n    };\n    this.isScrollUp = true;\n    this.captionRowExpand(args);\n  };\n\n  GroupLazyLoadRenderer.prototype.findRowElements = function (rows) {\n    var entered = false;\n    var tr;\n\n    for (var i = 0; i < rows.length; i++) {\n      var rowIdx = rows[i].rowIndex;\n\n      if (isRowEnteredInGrid(rowIdx, this.parent)) {\n        entered = true;\n        this.rowIndex = rowIdx;\n        tr = rows[i];\n        break;\n      }\n    }\n\n    return {\n      entered: entered,\n      tr: tr\n    };\n  };\n\n  GroupLazyLoadRenderer.prototype.getRowElementByUid = function (uid) {\n    return this.parent.getContent().querySelector('tr[data-uid=' + uid + ']');\n  };\n\n  GroupLazyLoadRenderer.prototype.removeTopRows = function (uid1, uid2, uid3) {\n    var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n    var start = false;\n\n    for (var i = 0; i < trs.length; i++) {\n      if (trs[i].getAttribute('data-uid') === uid3) {\n        var tr = this.parent.getContent().querySelector('tr[data-uid=' + uid1 + ']');\n\n        if (tr) {\n          this.rowIndex = tr.rowIndex;\n        }\n\n        break;\n      }\n\n      if (trs[i].getAttribute('data-uid') === uid2) {\n        start = true;\n      }\n\n      if (start) {\n        remove(trs[i]);\n      }\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  GroupLazyLoadRenderer.prototype.removeBottomRows = function (uid1, uid2, uid3) {\n    var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n    var trigger = false;\n\n    for (var i = 0; i < trs.length; i++) {\n      if (trs[i].getAttribute('data-uid') === uid2) {\n        trigger = true;\n      }\n\n      if (trigger) {\n        remove(trs[i]);\n\n        if (trs[i].getAttribute('data-uid') === uid1) {\n          break;\n        }\n      }\n    }\n  };\n\n  GroupLazyLoadRenderer.prototype.setCache = function (e) {\n    var page = this.parent.pageSettings.currentPage;\n    this.groupCache[page] = this.initialGroupCaptions[page] = extend([], e.data);\n  };\n\n  GroupLazyLoadRenderer.prototype.captionRowExpand = function (args) {\n    var _this = this;\n\n    var captionRow = args.groupInfo;\n    var level = this.parent.groupSettings.columns.indexOf(captionRow.data.field) + 1;\n    var pred = generateExpandPredicates(args.fields, args.keys, this);\n    var predicateList = getPredicates(pred);\n    var lazyLoad = {\n      level: level,\n      skip: args.skip,\n      take: args.take,\n      where: predicateList\n    };\n\n    if (args.makeRequest) {\n      var query = this.parent.renderModule.data.generateQuery(true);\n\n      if (!query.isCountRequired) {\n        query.isCountRequired = true;\n      }\n\n      query.lazyLoad.push({\n        key: 'onDemandGroupInfo',\n        value: lazyLoad\n      });\n      this.parent.showSpinner();\n      this.parent.renderModule.data.getData({}, query).then(function (e) {\n        _this.parent.hideSpinner();\n\n        if (e.result.length === 0) {\n          return;\n        }\n\n        if (_this.cacheMode && _this.uid1 && _this.uid2) {\n          _this.removeTopRows(_this.uid3, _this.uid1, _this.uid2);\n\n          _this.uid1 = _this.uid2 = _this.uid3 = undefined;\n        }\n\n        _this.lazyLoadHandler({\n          data: e.result,\n          count: e.count,\n          level: level,\n          index: args.rowIndex,\n          isRowExist: false,\n          isScroll: args.isScroll,\n          up: false,\n          rowIndex: args.cachedRowIndex\n        });\n      }).catch(function (e) {\n        return _this.parent.renderModule.dataManagerFailure(e, {\n          requestType: 'grouping'\n        });\n      });\n    } else {\n      this.lazyLoadHandler({\n        data: null,\n        count: args.groupInfo.data.count,\n        level: level,\n        index: args.rowIndex,\n        isRowExist: true,\n        isScroll: args.isScroll,\n        up: args.scrollUp,\n        rowIndex: args.cachedRowIndex\n      });\n    }\n  };\n\n  GroupLazyLoadRenderer.prototype.scrollReset = function (top) {\n    this.parent.getContent().firstElementChild.scrollTop = top ? this.parent.getContent().firstElementChild.scrollTop + top : 0;\n  };\n\n  GroupLazyLoadRenderer.prototype.updateCurrentViewData = function () {\n    var records = [];\n    this.getRows().filter(function (row) {\n      if (row.isDataRow) {\n        records[row.index] = row.data;\n      }\n    });\n    this.parent.currentViewData = records.length ? records : this.parent.currentViewData;\n  };\n  /**\n   * @returns {Row<Column>[]} returns the row\n   * @hidden */\n\n\n  GroupLazyLoadRenderer.prototype.getGroupCache = function () {\n    return this.groupCache;\n  };\n  /**\n   * @returns {Row<Column>[]} returns the row\n   * @hidden */\n\n\n  GroupLazyLoadRenderer.prototype.getRows = function () {\n    return this.groupCache[this.parent.pageSettings.currentPage] || [];\n  };\n  /**\n   * @returns {Element} returns the element\n   * @hidden */\n\n\n  GroupLazyLoadRenderer.prototype.getRowElements = function () {\n    return [].slice.call(this.parent.getContent().getElementsByClassName(literals.row));\n  };\n  /**\n   * @param {number} index - specifies the index\n   * @returns {Element} returns the element\n   * @hidden\n   */\n\n\n  GroupLazyLoadRenderer.prototype.getRowByIndex = function (index) {\n    var tr = [].slice.call(this.parent.getContent().getElementsByClassName(literals.row));\n    var row;\n\n    for (var i = 0; !isNullOrUndefined(index) && i < tr.length; i++) {\n      if (tr[i].getAttribute(literals.ariaRowIndex) === index.toString()) {\n        row = tr[i];\n        break;\n      }\n    }\n\n    return row;\n  };\n  /**\n   * Tucntion to set the column visibility\n   *\n   * @param {Column[]} columns - specifies the column\n   * @returns {void}\n   * @hidden\n   */\n\n\n  GroupLazyLoadRenderer.prototype.setVisible = function (columns) {\n    var gObj = this.parent;\n    var rows = this.getRows();\n    var testRow;\n    rows.some(function (r) {\n      if (r.isDataRow) {\n        testRow = r;\n      }\n\n      return r.isDataRow;\n    });\n    var contentrows = this.getRows().filter(function (row) {\n      return !row.isDetailRow;\n    });\n\n    for (var i = 0; i < columns.length; i++) {\n      var column = columns[i];\n      var idx = this.parent.getNormalizedColumnIndex(column.uid);\n      var colIdx = this.parent.getColumnIndexByUid(column.uid);\n      var displayVal = column.visible === true ? '' : 'none';\n\n      if (idx !== -1 && testRow && idx < testRow.cells.length) {\n        setStyleAttribute(this.getColGroup().childNodes[idx], {\n          'display': displayVal\n        });\n      }\n\n      this.setDisplayNone(gObj.getDataRows(), colIdx, displayVal, contentrows, idx);\n\n      if (!this.parent.invokedFromMedia && column.hideAtMedia) {\n        this.parent.updateMediaColumns(column);\n      }\n\n      this.parent.invokedFromMedia = false;\n    }\n  };\n  /**\n   * Function to set display.\n   *\n   * @param {Object} tr - specifies the row object\n   * @param {number} idx - specifies the index\n   * @param {string} displayVal - specifies the display value\n   * @param {Row<Column>[]} rows - specifies the array of rows\n   * @param {number} oriIdx - specifies the index\n   * @returns {void}\n   * @hidden\n   */\n\n\n  GroupLazyLoadRenderer.prototype.setDisplayNone = function (tr, idx, displayVal, rows, oriIdx) {\n    if (!this.parent.groupSettings.columns.length) {\n      setDisplayValue(tr, idx, displayVal, rows);\n    } else {\n      var keys = Object.keys(this.groupCache);\n\n      for (var j = 0; j < keys.length; j++) {\n        var uids = this.rowsByUid[keys[j]];\n        var idxs = Object.keys(uids);\n\n        for (var i = 0; i < idxs.length; i++) {\n          var tr_1 = this.parent.getContent().querySelector('tr[data-uid=' + idxs[i] + ']');\n          var row = uids[idxs[i]];\n\n          if (row.isCaptionRow) {\n            if (!this.captionModelGen.isEmpty()) {\n              this.changeCaptionRow(row, tr_1, keys[j]);\n            } else {\n              row.cells[row.indent + 1].colSpan = displayVal === '' ? row.cells[row.indent + 1].colSpan + 1 : row.cells[row.indent + 1].colSpan - 1;\n\n              if (tr_1) {\n                tr_1.cells[row.indent + 1].colSpan = row.cells[row.indent + 1].colSpan;\n              }\n            }\n          }\n\n          if (row.isDataRow) {\n            this.showAndHideCells(tr_1, idx, displayVal, false);\n            row.cells[oriIdx].visible = displayVal === '' ? true : false;\n          }\n\n          if (!row.isCaptionRow && !row.isDataRow && isNullOrUndefined(row.indent)) {\n            row.cells[oriIdx].visible = displayVal === '' ? true : false;\n            row.visible = row.cells.some(function (cell) {\n              return cell.isDataCell && cell.visible;\n            });\n            this.showAndHideCells(tr_1, idx, displayVal, true, row);\n          }\n        }\n      }\n    }\n  };\n\n  GroupLazyLoadRenderer.prototype.changeCaptionRow = function (row, tr, index) {\n    var capRow = row;\n    var captionData = row.data;\n    var data = this.groupGenerator.generateCaptionRow(captionData, capRow.indent, capRow.parentGid, undefined, capRow.tIndex, capRow.parentUid);\n    data.uid = row.uid;\n    data.isExpand = row.isExpand;\n    data.lazyLoadCssClass = row.lazyLoadCssClass;\n    this.rowsByUid[index][row.uid] = data;\n    this.groupCache[index][this.objIdxByUid[index][row.uid]] = data;\n\n    if (tr) {\n      var tbody = this.parent.getContentTable().querySelector(literals.tbody);\n      tbody.replaceChild(this.rowRenderer.render(data, this.parent.getColumns()), tr);\n    }\n  };\n\n  GroupLazyLoadRenderer.prototype.showAndHideCells = function (tr, idx, displayVal, isSummary, row) {\n    if (tr) {\n      var cls = isSummary ? 'td.e-summarycell' : 'td.e-rowcell';\n      setStyleAttribute(tr.querySelectorAll(cls)[idx], {\n        'display': displayVal\n      });\n\n      if (tr.querySelectorAll(cls)[idx].classList.contains('e-hide')) {\n        removeClass([tr.querySelectorAll(cls)[idx]], ['e-hide']);\n      }\n\n      if (isSummary) {\n        if (row.visible && tr.classList.contains('e-hide')) {\n          removeClass([tr], ['e-hide']);\n        } else if (!row.visible) {\n          addClass([tr], ['e-hide']);\n        }\n      }\n    }\n  };\n\n  return GroupLazyLoadRenderer;\n}(ContentRender);\n\nexport { GroupLazyLoadRenderer };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","extend","remove","isNullOrUndefined","setStyleAttribute","removeClass","addClass","ContentRender","events","isRowEnteredInGrid","parentsUntil","setDisplayValue","generateExpandPredicates","getPredicates","getGroupKeysAndFields","RowRenderer","GroupModelGenerator","GroupSummaryModelGenerator","CaptionSummaryModelGenerator","literals","GroupLazyLoadRenderer","_super","parent","locator","_this","call","childCount","scrollData","isFirstChildRow","isScrollDown","isScrollUp","groupCache","startIndexes","captionCounts","rowsByUid","objIdxByUid","initialGroupCaptions","requestType","cacheMode","cacheBlockSize","ignoreAccent","allowFiltering","filterSettings","allowCaseSensitive","groupGenerator","summaryModelGen","captionModelGen","rowRenderer","eventListener","addEventListener","actionBegin","bind","actionComplete","on","initialEnd","setLazyLoadPageSize","setGroupCache","setCache","lazyLoadScrollHandler","scrollHandler","columnVisibilityChanged","setVisible","groupCollapse","collapseShortcut","captionExpand","tr","page","pageSettings","currentPage","rowsObject","uid","getAttribute","oriIndex","getRowObjectIndexByUid","isRowExist","indent","data","key","e","captionRowElement","groupInfo","enableCaching","cancel","trigger","lazyLoadGroupExpand","args","keys","fields","rowIndex","makeRequest","clearCache","skip","take","pageSize","isExpand","captionRowExpand","captionCollapse","cache","rowIdx","captionIndex","lazyLoadGroupCollapse","removeRows","scrollEle","getContent","firstElementChild","blockSize","Math","floor","offsetHeight","getRowHeight","ceil","clearLazyGroupCache","uids","getInitialCaptionIndexes","length","i","capIdx","capRow","i_1","isCaptionRow","getRowElementByUID","groupModule","expandCollapseRows","querySelector","child","getNextChilds","subChild","getChildRowsByParentIndex","indexOf","start","end","splice","refreshCaches","maintainRows","push","groupSettings","columns","target","content","parentElement","tagName","collapse","row","rowObj","getRowByUid","parentUid","capEle","getRowElementByUid","cells","some","value","resetRowMaintenance","j","isEmpty","changeCaptionRow","isDataRow","from","fromIndex","to","toIndex","moveCells","action","scrollReset","arr","k","undefined","idx","trIdx","rows","trs","slice","querySelectorAll","aggUid","aggregates","agg","getAggregateByCaptionIndex","capUid","last","lazyLoadCssClass","index","rowObjects","group","childRows","lazyLoadHandler","setStartIndexes","captionRow","isScroll","setRowIndexes","refreshCaptionRowCount","count","generateCaptionRow","level","parentGid","concat","generateRows","getStartIndex","generateDataRows","nxtChild","lastRow","up","hasLastChildRow","refreshRowObjects","rowObjectIndex","render","scrollTop","prevCapRow","prevCaptionCount","indexes","captionCount","rowCount","rowHeight","insertAdjacentElement","getColumns","confirmRowRendering","check","cap","newRows","newRowsObject","updateCurrentViewData","deep","block","includeAgg","includeCollapseAgg","parentRow","initialGroupRows","isReorder","getRenderedRowsObject","getCacheRowsOnDownScroll","getCacheRowsOnUpScroll","str","isDestroyed","downTrs","getElementsByClassName","upTrs","endTrs","lazyLoadDown","lazyLoadUp","lazyLoadEnd","scrollDown","result","findRowElements","entered","top_1","getBoundingClientRect","top","scrollHeight","scrollDownHandler","scrollUpEndRowHandler","scrollUpHandler","childRow","parentCapRow","capRowObjIdx","captionRowEle","capRowEleIndex","childIdx","getCurrentBlockEndIndex","classList","child_1","currenBlock","removeBlock","cachedRowIndex","lastchild","query","child_2","uid1","uid2","uid3","firstIdx","add","removeTopRows","size","lastIdx","trEle","removeBottomRows","removeAttribute","scrollUp","field","pred","predicateList","lazyLoad","where","renderModule","generateQuery","isCountRequired","showSpinner","getData","then","hideSpinner","catch","dataManagerFailure","records","getRows","filter","currentViewData","getGroupCache","getRowElements","getRowByIndex","ariaRowIndex","toString","gObj","testRow","r","contentrows","isDetailRow","column","getNormalizedColumnIndex","colIdx","getColumnIndexByUid","displayVal","visible","getColGroup","childNodes","setDisplayNone","getDataRows","invokedFromMedia","hideAtMedia","updateMediaColumns","oriIdx","idxs","tr_1","colSpan","showAndHideCells","cell","isDataCell","captionData","tIndex","tbody","getContentTable","replaceChild","isSummary","cls","contains"],"sources":["C:/Users/shahj/OneDrive/Documents/GitHub/Admin-Dashboard/frontend/node_modules/@syncfusion/ej2-grids/src/grid/renderer/group-lazy-load-renderer.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { extend, remove, isNullOrUndefined, setStyleAttribute, removeClass, addClass } from '@syncfusion/ej2-base';\nimport { ContentRender } from './content-renderer';\nimport * as events from '../base/constant';\nimport { isRowEnteredInGrid, parentsUntil, setDisplayValue, generateExpandPredicates, getPredicates, getGroupKeysAndFields } from '../base/util';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { GroupModelGenerator } from '../services/group-model-generator';\nimport { GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport * as literals from '../base/string-literals';\n/**\n * GroupLazyLoadRenderer is used to perform lazy load grouping\n *\n * @hidden\n */\nvar GroupLazyLoadRenderer = /** @class */ (function (_super) {\n    __extends(GroupLazyLoadRenderer, _super);\n    function GroupLazyLoadRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.childCount = 0;\n        _this.scrollData = [];\n        _this.isFirstChildRow = false;\n        _this.isScrollDown = false;\n        _this.isScrollUp = false;\n        _this.groupCache = {};\n        _this.startIndexes = {};\n        _this.captionCounts = {};\n        _this.rowsByUid = {};\n        _this.objIdxByUid = {};\n        _this.initialGroupCaptions = {};\n        _this.requestType = ['paging', 'columnstate', 'reorder', 'cancel', 'save', 'beginEdit', 'add', 'delete',\n            'filterbeforeopen', 'filterchoicerequest'];\n        /** @hidden */\n        _this.cacheMode = false;\n        /** @hidden */\n        _this.cacheBlockSize = 5;\n        /** @hidden */\n        _this.ignoreAccent = _this.parent.allowFiltering ? _this.parent.filterSettings.ignoreAccent : false;\n        /** @hidden */\n        _this.allowCaseSensitive = false;\n        _this.locator = locator;\n        _this.groupGenerator = new GroupModelGenerator(_this.parent);\n        _this.summaryModelGen = new GroupSummaryModelGenerator(_this.parent);\n        _this.captionModelGen = new CaptionSummaryModelGenerator(_this.parent);\n        _this.rowRenderer = new RowRenderer(_this.locator, null, _this.parent);\n        _this.eventListener();\n        return _this;\n    }\n    GroupLazyLoadRenderer.prototype.eventListener = function () {\n        this.parent.addEventListener(events.actionBegin, this.actionBegin.bind(this));\n        this.parent.addEventListener(events.actionComplete, this.actionComplete.bind(this));\n        this.parent.on(events.initialEnd, this.setLazyLoadPageSize, this);\n        this.parent.on(events.setGroupCache, this.setCache, this);\n        this.parent.on(events.lazyLoadScrollHandler, this.scrollHandler, this);\n        this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n        this.parent.on(events.groupCollapse, this.collapseShortcut, this);\n    };\n    /**\n     * @param {HTMLTableRowElement} tr - specifies the table row element\n     * @returns {void}\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.captionExpand = function (tr) {\n        var _this = this;\n        var page = this.parent.pageSettings.currentPage;\n        var rowsObject = this.groupCache[page];\n        var uid = tr.getAttribute('data-uid');\n        var oriIndex = this.getRowObjectIndexByUid(uid);\n        var isRowExist = rowsObject[oriIndex + 1] ? rowsObject[oriIndex].indent < rowsObject[oriIndex + 1].indent : false;\n        var data = rowsObject[oriIndex];\n        var key = getGroupKeysAndFields(oriIndex, rowsObject);\n        var e = { captionRowElement: tr, groupInfo: data, enableCaching: true, cancel: false };\n        this.parent.trigger(events.lazyLoadGroupExpand, e, function (args) {\n            if (args.cancel) {\n                return;\n            }\n            args.keys = key.keys;\n            args.fields = key.fields;\n            args.rowIndex = tr.rowIndex;\n            args.makeRequest = !args.enableCaching || !isRowExist;\n            if (!args.enableCaching && isRowExist) {\n                _this.clearCache([uid]);\n            }\n            args.skip = 0;\n            args.take = _this.pageSize;\n            data.isExpand = _this.rowsByUid[page][data.uid].isExpand = true;\n            _this.captionRowExpand(args);\n        });\n    };\n    /**\n     * @param {HTMLTableRowElement} tr - specifies the table row element\n     * @returns {void}\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.captionCollapse = function (tr) {\n        var _this = this;\n        var cache = this.groupCache[this.parent.pageSettings.currentPage];\n        var rowIdx = tr.rowIndex;\n        var uid = tr.getAttribute('data-uid');\n        var captionIndex = this.getRowObjectIndexByUid(uid);\n        var e = {\n            captionRowElement: tr, groupInfo: cache[captionIndex], cancel: false\n        };\n        this.parent.trigger(events.lazyLoadGroupCollapse, e, function (args) {\n            if (args.cancel) {\n                return;\n            }\n            args.isExpand = false;\n            _this.removeRows(captionIndex, rowIdx);\n        });\n    };\n    /**\n     * @returns {void}\n     * @hidden */\n    GroupLazyLoadRenderer.prototype.setLazyLoadPageSize = function () {\n        var scrollEle = this.parent.getContent().firstElementChild;\n        var blockSize = Math.floor(scrollEle.offsetHeight / this.parent.getRowHeight()) - 1;\n        this.pageSize = this.pageSize ? this.pageSize : blockSize * 3;\n        this.blockSize = Math.ceil(this.pageSize / 2);\n    };\n    /**\n     * @returns {void}\n     * @hidden */\n    GroupLazyLoadRenderer.prototype.clearLazyGroupCache = function () {\n        this.clearCache();\n    };\n    GroupLazyLoadRenderer.prototype.clearCache = function (uids) {\n        uids = uids ? uids : this.getInitialCaptionIndexes();\n        var cache = this.groupCache[this.parent.pageSettings.currentPage];\n        if (uids.length) {\n            for (var i = 0; i < uids.length; i++) {\n                var capIdx = this.getRowObjectIndexByUid(uids[i]);\n                var capRow = cache[capIdx];\n                if (!capRow) {\n                    continue;\n                }\n                if (this.captionCounts[this.parent.pageSettings.currentPage][capRow.uid]) {\n                    for (var i_1 = capIdx + 1; i_1 < cache.length; i_1++) {\n                        if (cache[i_1].indent === capRow.indent || cache[i_1].indent < capRow.indent) {\n                            delete this.captionCounts[this.parent.pageSettings.currentPage][capRow.uid];\n                            break;\n                        }\n                        if (cache[i_1].isCaptionRow) {\n                            delete this.captionCounts[this.parent.pageSettings.currentPage][cache[i_1].uid];\n                        }\n                    }\n                }\n                if (capRow.isExpand) {\n                    var tr = this.parent.getRowElementByUID(capRow.uid);\n                    if (!tr) {\n                        return;\n                    }\n                    this.parent.groupModule.expandCollapseRows(tr.querySelector('.e-recordplusexpand'));\n                }\n                var child = this.getNextChilds(capIdx);\n                if (!child.length) {\n                    continue;\n                }\n                var subChild = [];\n                if (child[child.length - 1].isCaptionRow) {\n                    subChild = this.getChildRowsByParentIndex(cache.indexOf(child[child.length - 1]), false, false, null, true, true);\n                }\n                var start = cache.indexOf(child[0]);\n                var end = subChild.length ? cache.indexOf(subChild[subChild.length - 1]) : cache.indexOf(child[child.length - 1]);\n                cache.splice(start, end - (start - 1));\n                this.refreshCaches();\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.refreshCaches = function () {\n        var page = this.parent.pageSettings.currentPage;\n        var cache = this.groupCache[page];\n        this.rowsByUid = {};\n        this.objIdxByUid = {};\n        for (var i = 0; i < cache.length; i++) {\n            this.maintainRows(cache[i], i);\n        }\n    };\n    GroupLazyLoadRenderer.prototype.getInitialCaptionIndexes = function () {\n        var page = this.parent.pageSettings.currentPage;\n        var uids = [];\n        for (var i = 0; i < this.initialGroupCaptions[page].length; i++) {\n            uids.push(this.initialGroupCaptions[page][i].uid);\n        }\n        return uids;\n    };\n    /**\n     * @param {string} uid - specifies the uid\n     * @returns {number} returns the row object uid\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.getRowObjectIndexByUid = function (uid) {\n        return this.objIdxByUid[this.parent.pageSettings.currentPage][uid];\n    };\n    GroupLazyLoadRenderer.prototype.collapseShortcut = function (args) {\n        if (this.parent.groupSettings.columns.length &&\n            args.target && parentsUntil(args.target, literals.content) && args.target.parentElement.tagName === 'TR') {\n            if (!args.collapse && parentsUntil(args.target, literals.row)) {\n                return;\n            }\n            var row = args.target.parentElement;\n            var uid = row.getAttribute('data-uid');\n            if (args.collapse) {\n                var rowObj = this.getRowByUid(uid);\n                var capRow = this.getRowByUid(rowObj.parentUid);\n                if (capRow.isCaptionRow && capRow.isExpand) {\n                    var capEle = this.getRowElementByUid(rowObj.parentUid);\n                    this.parent.groupModule.expandCollapseRows(capEle.cells[rowObj.indent - 1]);\n                }\n            }\n            else {\n                var capRow = this.getRowByUid(uid);\n                if (capRow.isCaptionRow && !capRow.isExpand) {\n                    var capEle = this.getRowElementByUid(uid);\n                    this.parent.groupModule.expandCollapseRows(capEle.cells[capRow.indent]);\n                }\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.getRowByUid = function (uid) {\n        return this.rowsByUid[this.parent.pageSettings.currentPage][uid];\n    };\n    GroupLazyLoadRenderer.prototype.actionBegin = function (args) {\n        if (!args.cancel) {\n            if (!this.requestType.some(function (value) { return value === args.requestType; })) {\n                this.groupCache = {};\n                this.resetRowMaintenance();\n            }\n            if (args.requestType === 'reorder' && this.parent.groupSettings.columns.length) {\n                var keys = Object.keys(this.groupCache);\n                for (var j = 0; j < keys.length; j++) {\n                    var cache = this.groupCache[keys[j]];\n                    for (var i = 0; i < cache.length; i++) {\n                        if (cache[i].isCaptionRow && !this.captionModelGen.isEmpty()) {\n                            this.changeCaptionRow(cache[i], null, keys[j]);\n                        }\n                        if (cache[i].isDataRow) {\n                            var from = args.fromIndex + cache[i].indent;\n                            var to = args.toIndex + cache[i].indent;\n                            this.moveCells(cache[i].cells, from, to);\n                        }\n                    }\n                }\n            }\n            if (args.requestType === 'delete'\n                || (args.action === 'add' && args.requestType === 'save')) {\n                this.groupCache = {};\n                this.resetRowMaintenance();\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.actionComplete = function (args) {\n        if (!args.cancel && args.requestType !== 'columnstate' && args.requestType !== 'beginEdit'\n            && args.requestType !== 'delete' && args.requestType !== 'save' && args.requestType !== 'reorder') {\n            this.scrollReset();\n        }\n    };\n    GroupLazyLoadRenderer.prototype.resetRowMaintenance = function () {\n        this.startIndexes = {};\n        this.captionCounts = {};\n        this.rowsByUid = {};\n        this.objIdxByUid = {};\n        this.initialGroupCaptions = {};\n    };\n    GroupLazyLoadRenderer.prototype.moveCells = function (arr, from, to) {\n        if (from >= arr.length) {\n            var k = from - arr.length;\n            while ((k--) + 1) {\n                arr.push(undefined);\n            }\n        }\n        arr.splice(from, 0, arr.splice(to, 1)[0]);\n    };\n    GroupLazyLoadRenderer.prototype.removeRows = function (idx, trIdx) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[page];\n        var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n        var aggUid;\n        if (this.parent.aggregates.length) {\n            var agg = this.getAggregateByCaptionIndex(idx);\n            aggUid = agg.length ? agg[agg.length - 1].uid : undefined;\n        }\n        var indent = rows[idx].indent;\n        this.addClass(this.getNextChilds(idx));\n        rows[idx].isExpand = this.rowsByUid[page][rows[idx].uid].isExpand = false;\n        var capUid;\n        for (var i = idx + 1; i < rows.length; i++) {\n            if (rows[i].indent === indent || rows[i].indent < indent) {\n                capUid = rows[i].uid;\n                break;\n            }\n            if (rows[i].isCaptionRow && rows[i].isExpand) {\n                this.addClass(this.getNextChilds(i));\n            }\n        }\n        for (var i = trIdx + 1; i < trs.length; i++) {\n            if (trs[i].getAttribute('data-uid') === capUid) {\n                break;\n            }\n            else if (trs[i].getAttribute('data-uid') === aggUid) {\n                remove(trs[i]);\n                break;\n            }\n            else {\n                remove(trs[i]);\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.addClass = function (rows) {\n        var last = rows[this.blockSize];\n        if (last) {\n            last.lazyLoadCssClass = 'e-lazyload-middle-down';\n        }\n    };\n    GroupLazyLoadRenderer.prototype.getNextChilds = function (index, rowObjects) {\n        var group = this.groupCache[this.parent.pageSettings.currentPage];\n        var rows = rowObjects ? rowObjects : group;\n        var indent = group[index].indent + 1;\n        var childRows = [];\n        for (var i = rowObjects ? 0 : index + 1; i < rows.length; i++) {\n            if (rows[i].indent < indent) {\n                break;\n            }\n            if (rows[i].indent === indent) {\n                childRows.push(rows[i]);\n            }\n        }\n        return childRows;\n    };\n    GroupLazyLoadRenderer.prototype.lazyLoadHandler = function (args) {\n        this.setStartIndexes();\n        var tr = this.parent.getContent().querySelectorAll('tr')[args.index];\n        var uid = tr.getAttribute('data-uid');\n        var captionIndex = this.getRowObjectIndexByUid(uid);\n        var captionRow = this.groupCache[this.parent.pageSettings.currentPage][captionIndex];\n        var rows = args.isRowExist ? args.isScroll ? this.scrollData\n            : this.getChildRowsByParentIndex(captionIndex, true, true, null, true) : [];\n        this.scrollData = [];\n        if (!args.isRowExist) {\n            this.setRowIndexes(captionIndex, captionRow);\n            this.refreshCaptionRowCount(this.groupCache[this.parent.pageSettings.currentPage][captionIndex], args.count);\n            if (Object.keys(args.data).indexOf('GroupGuid') !== -1) {\n                for (var i = 0; i < args.data.length; i++) {\n                    var data = this.groupGenerator.generateCaptionRow(args.data[i], args.level, captionRow.parentGid, undefined, 0, captionRow.uid);\n                    rows.push(data);\n                    if (this.parent.aggregates.length) {\n                        rows = rows.concat((this.summaryModelGen.generateRows(args.data[i], { level: args.level + 1, parentUid: data.uid })));\n                    }\n                }\n            }\n            else {\n                this.groupGenerator.index = this.getStartIndex(captionIndex, args.isScroll);\n                rows = this.groupGenerator.generateDataRows(args.data, args.level, captionRow.parentGid, 0, captionRow.uid);\n            }\n        }\n        var trIdx = args.isScroll ? this.rowIndex : args.index;\n        var nxtChild = this.getNextChilds(captionIndex, rows);\n        var lastRow = !args.up ? this.hasLastChildRow(args.isScroll, args.count, nxtChild.length) : true;\n        if (!args.isRowExist && !lastRow) {\n            nxtChild[this.blockSize].lazyLoadCssClass = 'e-lazyload-middle-down';\n        }\n        if (!lastRow) {\n            nxtChild[nxtChild.length - 1].lazyLoadCssClass = 'e-not-lazyload-end';\n        }\n        var aggregates = !args.isScroll && !args.isRowExist ? this.getAggregateByCaptionIndex(captionIndex) : [];\n        if (!args.up) {\n            if (!args.isRowExist) {\n                this.refreshRowObjects(rows, args.isScroll ? this.rowObjectIndex : captionIndex);\n            }\n        }\n        this.render(trIdx, rows, lastRow, aggregates);\n        if (this.isFirstChildRow && !args.up) {\n            this.parent.getContent().firstElementChild.scrollTop = rows.length * this.parent.getRowHeight();\n        }\n        this.isFirstChildRow = false;\n        this.rowIndex = undefined;\n        this.rowObjectIndex = undefined;\n        this.childCount = 0;\n    };\n    GroupLazyLoadRenderer.prototype.setRowIndexes = function (capIdx, row) {\n        if (!this.captionCounts[this.parent.pageSettings.currentPage]) {\n            this.captionCounts[this.parent.pageSettings.currentPage] = {};\n        }\n        if (row.isCaptionRow) {\n            this.captionCounts[this.parent.pageSettings.currentPage][row.uid] = row.data.count;\n        }\n    };\n    GroupLazyLoadRenderer.prototype.getStartIndex = function (capIdx, isScroll) {\n        var page = this.parent.pageSettings.currentPage;\n        var cache = this.groupCache[page];\n        if (isScroll) {\n            return cache[this.rowObjectIndex].index + 1;\n        }\n        var count = 0;\n        var idx = 0;\n        var prevCapRow = this.getRowByUid(cache[capIdx].parentUid);\n        if (prevCapRow) {\n            idx = this.prevCaptionCount(prevCapRow);\n        }\n        if (cache[capIdx].indent > 0) {\n            for (var i = capIdx - 1; i >= 0; i--) {\n                if (cache[i].indent < cache[capIdx].indent) {\n                    break;\n                }\n                if (cache[i].isCaptionRow && cache[i].indent === cache[capIdx].indent) {\n                    count = count + cache[i].data.count;\n                }\n            }\n        }\n        var index = count + idx + this.startIndexes[page][cache[capIdx].parentGid];\n        return index;\n    };\n    GroupLazyLoadRenderer.prototype.prevCaptionCount = function (prevCapRow) {\n        var page = this.parent.pageSettings.currentPage;\n        var cache = this.groupCache[page];\n        var idx = 0;\n        for (var i = cache.indexOf(prevCapRow) - 1; i >= 0; i--) {\n            if (cache[i].indent === 0) {\n                break;\n            }\n            if (cache[i].indent < prevCapRow.indent) {\n                break;\n            }\n            if (cache[i].isCaptionRow && cache[i].indent === prevCapRow.indent) {\n                var count = this.captionCounts[page][cache[i].uid];\n                idx = idx + (count ? count : cache[i].data.count);\n            }\n        }\n        var capRow = this.getRowByUid(prevCapRow.parentUid);\n        if (capRow) {\n            idx = idx + this.prevCaptionCount(capRow);\n        }\n        return idx;\n    };\n    GroupLazyLoadRenderer.prototype.setStartIndexes = function () {\n        var cache = this.groupCache[this.parent.pageSettings.currentPage];\n        if (!this.startIndexes[this.parent.pageSettings.currentPage]) {\n            var indexes = [];\n            var idx = void 0;\n            for (var i = 0; i < cache.length; i++) {\n                if (cache[i].isCaptionRow) {\n                    if (!indexes.length) {\n                        indexes.push(0);\n                    }\n                    else {\n                        indexes.push(cache[idx].data.count + indexes[indexes.length - 1]);\n                    }\n                    idx = i;\n                }\n            }\n            this.startIndexes[this.parent.pageSettings.currentPage] = indexes;\n        }\n    };\n    GroupLazyLoadRenderer.prototype.hasLastChildRow = function (isScroll, captionCount, rowCount) {\n        return isScroll ? captionCount === this.childCount + rowCount : captionCount === rowCount;\n    };\n    GroupLazyLoadRenderer.prototype.refreshCaptionRowCount = function (row, count) {\n        row.data.count = count;\n    };\n    GroupLazyLoadRenderer.prototype.render = function (trIdx, rows, hasLastChildRow, aggregates) {\n        var tr = this.parent.getContent().querySelectorAll('tr')[trIdx];\n        var scrollEle = this.parent.getContent().firstElementChild;\n        var rowHeight = this.parent.getRowHeight();\n        if (tr && aggregates.length) {\n            for (var i = aggregates.length - 1; i >= 0; i--) {\n                tr.insertAdjacentElement('afterend', this.rowRenderer.render(aggregates[i], this.parent.getColumns()));\n            }\n        }\n        if (tr && rows.length) {\n            for (var i = rows.length - 1; i >= 0; i--) {\n                if (this.confirmRowRendering(rows[i])) {\n                    tr.insertAdjacentElement('afterend', this.rowRenderer.render(rows[i], this.parent.getColumns()));\n                    if (this.isScrollDown) {\n                        scrollEle.scrollTop = scrollEle.scrollTop - rowHeight;\n                    }\n                    if (this.isScrollUp) {\n                        scrollEle.scrollTop = scrollEle.scrollTop + rowHeight;\n                    }\n                }\n            }\n        }\n        this.isScrollDown = false;\n        this.isScrollUp = false;\n    };\n    /**\n     * @param {Row<Column>} row - specifies the row\n     * @param {number} index - specifies the index\n     * @returns {void}\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.maintainRows = function (row, index) {\n        var page = this.parent.pageSettings.currentPage;\n        if (!this.rowsByUid[page]) {\n            this.rowsByUid[page] = {};\n            this.objIdxByUid[page] = {};\n        }\n        if (row.uid) {\n            this.rowsByUid[page][row.uid] = row;\n        }\n        this.objIdxByUid[page][row.uid] = index;\n    };\n    GroupLazyLoadRenderer.prototype.confirmRowRendering = function (row) {\n        var check = true;\n        if (isNullOrUndefined(row.indent) && !row.isDataRow && !row.isCaptionRow) {\n            var cap = this.getRowByUid(row.parentUid);\n            if (cap.isCaptionRow && !cap.isExpand) {\n                check = false;\n            }\n        }\n        return check;\n    };\n    GroupLazyLoadRenderer.prototype.refreshRowObjects = function (newRows, index) {\n        var page = this.parent.pageSettings.currentPage;\n        var rowsObject = this.groupCache[page];\n        this.rowsByUid[page] = {};\n        this.objIdxByUid[page] = {};\n        var newRowsObject = [];\n        var k = 0;\n        for (var i = 0; i < rowsObject.length; i++) {\n            if (i === index) {\n                this.maintainRows(rowsObject[i], k);\n                newRowsObject.push(rowsObject[i]);\n                k++;\n                for (var j = 0; j < newRows.length; j++) {\n                    this.maintainRows(newRows[j], k);\n                    newRowsObject.push(newRows[j]);\n                    k++;\n                }\n            }\n            else {\n                this.maintainRows(rowsObject[i], k);\n                newRowsObject.push(rowsObject[i]);\n                k++;\n            }\n        }\n        this.groupCache[this.parent.pageSettings.currentPage] = extend([], newRowsObject);\n        this.updateCurrentViewData();\n    };\n    GroupLazyLoadRenderer.prototype.getAggregateByCaptionIndex = function (index) {\n        var cache = this.groupCache[this.parent.pageSettings.currentPage];\n        var parent = cache[index];\n        var indent = parent.indent;\n        var uid = parent.uid;\n        var agg = [];\n        for (var i = index + 1; i < cache.length; i++) {\n            if (cache[i].indent === indent) {\n                break;\n            }\n            if (isNullOrUndefined(cache[i].indent) && cache[i].parentUid === uid) {\n                agg.push(cache[i]);\n            }\n        }\n        return agg;\n    };\n    GroupLazyLoadRenderer.prototype.getChildRowsByParentIndex = function (index, deep, block, data, includeAgg, includeCollapseAgg) {\n        var cache = data ? data : this.groupCache[this.parent.pageSettings.currentPage];\n        var parentRow = cache[index];\n        var agg = [];\n        if (!parentRow.isCaptionRow || (parentRow.isCaptionRow && !parentRow.isExpand && !includeCollapseAgg)) {\n            return [];\n        }\n        if (includeAgg && this.parent.aggregates.length) {\n            agg = this.getAggregateByCaptionIndex(index);\n        }\n        var indent = parentRow.indent;\n        var uid = parentRow.uid;\n        var rows = [];\n        var count = 0;\n        for (var i = index + 1; i < cache.length; i++) {\n            if (cache[i].parentUid === uid) {\n                if (isNullOrUndefined(cache[i].indent)) {\n                    continue;\n                }\n                count++;\n                rows.push(cache[i]);\n                if (deep && cache[i].isCaptionRow) {\n                    rows = rows.concat(this.getChildRowsByParentIndex(i, deep, block, data, includeAgg));\n                }\n                if (block && count === this.pageSize) {\n                    break;\n                }\n            }\n            if (cache[i].indent === indent) {\n                break;\n            }\n        }\n        return rows.concat(agg);\n    };\n    /**\n     * @param {boolean} isReorder - specifies the isreorder\n     * @returns {Row<Column>[]} returns the row\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.initialGroupRows = function (isReorder) {\n        var rows = [];\n        var cache = this.groupCache[this.parent.pageSettings.currentPage];\n        if (isReorder) {\n            return this.getRenderedRowsObject();\n        }\n        for (var i = 0; i < cache.length; i++) {\n            if (cache[i].indent === 0) {\n                rows.push(cache[i]);\n                rows = rows.concat(this.getChildRowsByParentIndex(i, true, true, cache, true));\n            }\n        }\n        return rows;\n    };\n    /**\n     * @returns {Row<Column>[]} retruns the row\n     * @hidden */\n    GroupLazyLoadRenderer.prototype.getRenderedRowsObject = function () {\n        var rows = [];\n        var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n        for (var i = 0; i < trs.length; i++) {\n            rows.push(this.getRowByUid(trs[i].getAttribute('data-uid')));\n        }\n        return rows;\n    };\n    GroupLazyLoadRenderer.prototype.getCacheRowsOnDownScroll = function (index) {\n        var rows = [];\n        var rowsObject = this.groupCache[this.parent.pageSettings.currentPage];\n        var k = index;\n        for (var i = 0; i < this.pageSize; i++) {\n            if (!rowsObject[k] || rowsObject[k].indent < rowsObject[index].indent) {\n                break;\n            }\n            if (rowsObject[k].indent === rowsObject[index].indent) {\n                rows.push(rowsObject[k]);\n                if (rowsObject[k].isCaptionRow && rowsObject[k].isExpand) {\n                    rows = rows.concat(this.getChildRowsByParentIndex(k, true, true, null, true));\n                }\n            }\n            if (rowsObject[k].indent > rowsObject[index].indent || isNullOrUndefined(rowsObject[k].indent)) {\n                i--;\n            }\n            k++;\n        }\n        return rows;\n    };\n    GroupLazyLoadRenderer.prototype.getCacheRowsOnUpScroll = function (start, end, index) {\n        var rows = [];\n        var rowsObject = this.groupCache[this.parent.pageSettings.currentPage];\n        var str = false;\n        for (var i = 0; i < rowsObject.length; i++) {\n            if (str && (!rowsObject[i] || rowsObject[i].indent < rowsObject[index].indent || rowsObject[i].uid === end)) {\n                break;\n            }\n            if (!str && rowsObject[i].uid === start) {\n                str = true;\n            }\n            if (str && rowsObject[i].indent === rowsObject[index].indent) {\n                rows.push(rowsObject[i]);\n                if (rowsObject[i].isCaptionRow && rowsObject[i].isExpand) {\n                    rows = rows.concat(this.getChildRowsByParentIndex(i, true, true, null, true));\n                }\n            }\n        }\n        return rows;\n    };\n    GroupLazyLoadRenderer.prototype.scrollHandler = function (e) {\n        if (this.parent.isDestroyed || this.childCount) {\n            return;\n        }\n        var downTrs = [].slice.call(this.parent.getContent().getElementsByClassName('e-lazyload-middle-down'));\n        var upTrs = [].slice.call(this.parent.getContent().getElementsByClassName('e-lazyload-middle-up'));\n        var endTrs = [].slice.call(this.parent.getContent().getElementsByClassName('e-not-lazyload-end'));\n        var tr;\n        var lazyLoadDown = false;\n        var lazyLoadUp = false;\n        var lazyLoadEnd = false;\n        if (e.scrollDown && downTrs.length) {\n            var result = this.findRowElements(downTrs);\n            tr = result.tr;\n            lazyLoadDown = result.entered;\n        }\n        if (!e.scrollDown && endTrs) {\n            for (var i = 0; i < endTrs.length; i++) {\n                var top_1 = endTrs[i].getBoundingClientRect().top;\n                var scrollHeight = this.parent.getContent().scrollHeight;\n                if (top_1 > 0 && top_1 < scrollHeight) {\n                    tr = endTrs[i];\n                    lazyLoadEnd = true;\n                    this.rowIndex = tr.rowIndex;\n                    break;\n                }\n            }\n        }\n        if (!e.scrollDown && upTrs.length && !lazyLoadEnd) {\n            var result = this.findRowElements(upTrs);\n            tr = result.tr;\n            lazyLoadUp = result.entered;\n        }\n        if (tr) {\n            if (lazyLoadDown && e.scrollDown && lazyLoadDown && tr) {\n                this.scrollDownHandler(tr);\n            }\n            if (!e.scrollDown && lazyLoadEnd && tr) {\n                this.scrollUpEndRowHandler(tr);\n            }\n            if (this.cacheMode && !e.scrollDown && !lazyLoadEnd && lazyLoadUp && tr) {\n                this.scrollUpHandler(tr);\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.scrollUpEndRowHandler = function (tr) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[page];\n        var uid = tr.getAttribute('data-uid');\n        var index = this.rowObjectIndex = this.getRowObjectIndexByUid(uid);\n        var idx = index;\n        var childRow = rows[index];\n        var parentCapRow = this.getRowByUid(childRow.parentUid);\n        var capRowObjIdx = this.getRowObjectIndexByUid(parentCapRow.uid);\n        var captionRowEle = this.parent.getContent().querySelector('tr[data-uid=' + parentCapRow.uid + ']');\n        var capRowEleIndex = captionRowEle.rowIndex;\n        var child = this.getChildRowsByParentIndex(capRowObjIdx);\n        var childIdx = child.indexOf(childRow);\n        var currentPage = Math.ceil(childIdx / this.pageSize);\n        if (currentPage === 1) {\n            return;\n        }\n        this.childCount = currentPage * this.pageSize;\n        index = this.getCurrentBlockEndIndex(childRow, index);\n        if (this.childCount < parentCapRow.data.count) {\n            tr.classList.remove('e-not-lazyload-end');\n            childRow.lazyLoadCssClass = '';\n            var isRowExist = rows[index + 1] ? childRow.indent === rows[index + 1].indent : false;\n            this.scrollData = isRowExist ? this.getCacheRowsOnDownScroll(index + 1) : [];\n            var key = getGroupKeysAndFields(capRowObjIdx, rows);\n            var args = {\n                rowIndex: capRowEleIndex, makeRequest: !isRowExist, groupInfo: parentCapRow, fields: key.fields,\n                keys: key.keys, skip: this.childCount, take: this.pageSize, isScroll: true\n            };\n            if (this.cacheMode && this.childCount >= (this.pageSize * this.cacheBlockSize)) {\n                var child_1 = this.getChildRowsByParentIndex(capRowObjIdx);\n                var currenBlock = Math.ceil((child_1.indexOf(rows[idx]) / this.pageSize));\n                var removeBlock = currenBlock - (this.cacheBlockSize - 1);\n                this.removeBlock(uid, isRowExist, removeBlock, child_1);\n                args.cachedRowIndex = (removeBlock * this.pageSize);\n            }\n            this.captionRowExpand(args);\n        }\n        else {\n            this.childCount = 0;\n        }\n    };\n    GroupLazyLoadRenderer.prototype.scrollDownHandler = function (tr) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[page];\n        var uid = tr.getAttribute('data-uid');\n        var index = this.getRowObjectIndexByUid(uid);\n        var idx = index;\n        var childRow = rows[index];\n        var parentCapRow = this.getRowByUid(childRow.parentUid);\n        var capRowObjIdx = this.getRowObjectIndexByUid(parentCapRow.uid);\n        var captionRowEle = this.getRowElementByUid(parentCapRow.uid);\n        var capRowEleIndex = captionRowEle.rowIndex;\n        var child = this.getChildRowsByParentIndex(capRowObjIdx);\n        var childIdx = child.indexOf(childRow);\n        var currentPage = Math.ceil(childIdx / this.pageSize);\n        this.childCount = currentPage * this.pageSize;\n        index = this.rowObjectIndex = this.getRowObjectIndexByUid(child[this.childCount - 1].uid);\n        var lastchild = rows[index];\n        var lastRow = this.getRowElementByUid(lastchild.uid);\n        this.rowIndex = lastRow.rowIndex;\n        index = this.getCurrentBlockEndIndex(lastchild, index);\n        if (this.childCount < parentCapRow.data.count) {\n            var isRowExist = rows[index + 1] ? childRow.indent === rows[index + 1].indent : false;\n            if (isRowExist && !isNullOrUndefined(this.getRowElementByUid(rows[index + 1].uid))) {\n                this.childCount = 0;\n                return;\n            }\n            if (currentPage > 1 || !this.cacheMode) {\n                tr.classList.remove('e-lazyload-middle-down');\n                lastRow.classList.remove('e-not-lazyload-end');\n                lastchild.lazyLoadCssClass = '';\n            }\n            this.scrollData = isRowExist ? this.getCacheRowsOnDownScroll(this.rowObjectIndex + 1) : [];\n            var query = getGroupKeysAndFields(capRowObjIdx, rows);\n            var args = {\n                rowIndex: capRowEleIndex, makeRequest: !isRowExist, groupInfo: parentCapRow, fields: query.fields,\n                keys: query.keys, skip: this.childCount, take: this.pageSize, isScroll: true\n            };\n            if (this.cacheMode && (this.childCount - this.pageSize) >= (this.pageSize * this.cacheBlockSize)) {\n                this.isScrollDown = true;\n                var child_2 = this.getChildRowsByParentIndex(capRowObjIdx);\n                var currenBlock = Math.ceil((child_2.indexOf(rows[idx]) / this.pageSize)) - 1;\n                var removeBlock = (currenBlock - (this.cacheBlockSize - 1)) + 1;\n                this.removeBlock(uid, isRowExist, removeBlock, child_2, lastchild);\n                args.cachedRowIndex = (removeBlock * this.pageSize);\n            }\n            this.captionRowExpand(args);\n        }\n        else {\n            this.childCount = 0;\n        }\n    };\n    GroupLazyLoadRenderer.prototype.getCurrentBlockEndIndex = function (row, index) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[page];\n        if (row.isCaptionRow) {\n            if (row.isExpand) {\n                var childCount = this.getChildRowsByParentIndex(index, true).length;\n                this.rowIndex = this.rowIndex + childCount;\n            }\n            var agg = this.getAggregateByCaptionIndex(index);\n            this.rowObjectIndex = this.rowObjectIndex + agg.length;\n            var idx = index;\n            for (var i = idx + 1; i < rows.length; i++) {\n                if (rows[i].indent === rows[index].indent || rows[i].indent < rows[index].indent) {\n                    index = idx;\n                    break;\n                }\n                else {\n                    idx++;\n                }\n            }\n        }\n        return index;\n    };\n    GroupLazyLoadRenderer.prototype.removeBlock = function (uid, isRowExist, removeBlock, child, lastchild) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[page];\n        var uid1 = child[(((removeBlock + 1) * this.pageSize) - 1) - this.blockSize].uid;\n        var uid2 = child[(removeBlock * this.pageSize) - this.pageSize].uid;\n        var uid3 = child[(removeBlock * this.pageSize)].uid;\n        var firstIdx = this.getRowObjectIndexByUid(uid1);\n        rows[firstIdx].lazyLoadCssClass = 'e-lazyload-middle-up';\n        this.getRowElementByUid(uid1).classList.add('e-lazyload-middle-up');\n        if (lastchild) {\n            this.getRowElementByUid(uid3).classList.add('e-not-lazyload-first');\n            this.getRowByUid(uid3).lazyLoadCssClass = 'e-not-lazyload-first';\n            this.getRowByUid(uid2).lazyLoadCssClass = '';\n        }\n        if (isRowExist) {\n            this.removeTopRows(lastchild ? lastchild.uid : uid, uid2, uid3);\n        }\n        else {\n            this.uid1 = uid2;\n            this.uid2 = uid3;\n            this.uid3 = lastchild ? lastchild.uid : uid;\n        }\n    };\n    GroupLazyLoadRenderer.prototype.scrollUpHandler = function (tr) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[page];\n        var uid = tr.getAttribute('data-uid');\n        var row = this.getRowByUid(uid);\n        var index = this.rowObjectIndex = this.getRowObjectIndexByUid(uid);\n        var parentCapRow = this.getRowByUid(row.parentUid);\n        var capRowObjIdx = this.rowIndex = this.getRowObjectIndexByUid(parentCapRow.uid);\n        var captionRowEle = this.parent.getRowElementByUID(parentCapRow.uid);\n        var capRowEleIndex = captionRowEle.rowIndex;\n        var child = this.getChildRowsByParentIndex(capRowObjIdx);\n        var childIdx = child.indexOf(rows[index]);\n        var currenBlock = Math.floor((childIdx / this.pageSize));\n        var idx = this.blockSize;\n        if ((this.blockSize * 2) > this.pageSize) {\n            idx = (this.blockSize * 2) - this.pageSize;\n            idx = this.blockSize - idx;\n        }\n        var start = child[(childIdx - (idx - 1)) - this.pageSize].uid;\n        var end = child[childIdx - (idx - 1)].uid;\n        this.scrollData = this.getCacheRowsOnUpScroll(start, end, index - (idx - 1));\n        this.isFirstChildRow = currenBlock > 1;\n        if (this.isFirstChildRow) {\n            this.scrollData[0].lazyLoadCssClass = 'e-not-lazyload-first';\n        }\n        this.getRowByUid(end).lazyLoadCssClass = '';\n        this.getRowElementByUid(end).classList.remove('e-not-lazyload-first');\n        var removeBlock = currenBlock + this.cacheBlockSize;\n        if (child.length !== parentCapRow.data.count && (removeBlock * this.pageSize > child.length)) {\n            this.isFirstChildRow = false;\n            this.scrollData[0].lazyLoadCssClass = '';\n            this.getRowElementByUid(end).classList.add('e-not-lazyload-first');\n            return;\n        }\n        var count = removeBlock * this.pageSize > parentCapRow.data.count\n            ? parentCapRow.data.count : removeBlock * this.pageSize;\n        var size = removeBlock * this.pageSize > parentCapRow.data.count\n            ? (this.pageSize - ((this.pageSize * removeBlock) - parentCapRow.data.count)) : this.pageSize;\n        var childRows = this.getChildRowsByParentIndex(rows.indexOf(child[count - 1]), true, false, null, true);\n        var uid1 = childRows.length ? childRows[childRows.length - 1].uid : child[(count - 1)].uid;\n        var uid2 = child[count - size].uid;\n        var uid3 = child[(count - size) - 1].uid;\n        var lastIdx = this.objIdxByUid[page][uid2] - idx;\n        if (rows[lastIdx].lazyLoadCssClass === 'e-lazyload-middle-down') {\n            var trEle = this.getRowElementByUid(rows[lastIdx].uid);\n            if (trEle) {\n                trEle.classList.add('e-lazyload-middle-down');\n            }\n        }\n        this.getRowByUid(uid1).lazyLoadCssClass = '';\n        this.getRowByUid(uid3).lazyLoadCssClass = 'e-not-lazyload-end';\n        this.getRowElementByUid(uid3).classList.add('e-not-lazyload-end');\n        this.removeBottomRows(uid1, uid2, uid3);\n        this.rowIndex = tr.rowIndex - idx;\n        if (tr.classList.length > 1) {\n            tr.classList.remove('e-lazyload-middle-up');\n        }\n        else {\n            tr.removeAttribute('class');\n        }\n        if (!isNullOrUndefined(this.getRowElementByUid(start))) {\n            this.childCount = 0;\n            this.scrollData = [];\n            return;\n        }\n        var key = getGroupKeysAndFields(this.getRowObjectIndexByUid(parentCapRow.uid), rows);\n        var args = {\n            rowIndex: capRowEleIndex, makeRequest: false, groupInfo: parentCapRow, fields: key.fields,\n            keys: key.keys, skip: this.childCount, take: this.pageSize, isScroll: true, scrollUp: true\n        };\n        this.isScrollUp = true;\n        this.captionRowExpand(args);\n    };\n    GroupLazyLoadRenderer.prototype.findRowElements = function (rows) {\n        var entered = false;\n        var tr;\n        for (var i = 0; i < rows.length; i++) {\n            var rowIdx = rows[i].rowIndex;\n            if (isRowEnteredInGrid(rowIdx, this.parent)) {\n                entered = true;\n                this.rowIndex = rowIdx;\n                tr = rows[i];\n                break;\n            }\n        }\n        return { entered: entered, tr: tr };\n    };\n    GroupLazyLoadRenderer.prototype.getRowElementByUid = function (uid) {\n        return this.parent.getContent().querySelector('tr[data-uid=' + uid + ']');\n    };\n    GroupLazyLoadRenderer.prototype.removeTopRows = function (uid1, uid2, uid3) {\n        var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n        var start = false;\n        for (var i = 0; i < trs.length; i++) {\n            if (trs[i].getAttribute('data-uid') === uid3) {\n                var tr = this.parent.getContent().querySelector('tr[data-uid=' + uid1 + ']');\n                if (tr) {\n                    this.rowIndex = tr.rowIndex;\n                }\n                break;\n            }\n            if (trs[i].getAttribute('data-uid') === uid2) {\n                start = true;\n            }\n            if (start) {\n                remove(trs[i]);\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    GroupLazyLoadRenderer.prototype.removeBottomRows = function (uid1, uid2, uid3) {\n        var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n        var trigger = false;\n        for (var i = 0; i < trs.length; i++) {\n            if (trs[i].getAttribute('data-uid') === uid2) {\n                trigger = true;\n            }\n            if (trigger) {\n                remove(trs[i]);\n                if (trs[i].getAttribute('data-uid') === uid1) {\n                    break;\n                }\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.setCache = function (e) {\n        var page = this.parent.pageSettings.currentPage;\n        this.groupCache[page] = this.initialGroupCaptions[page] = extend([], e.data);\n    };\n    GroupLazyLoadRenderer.prototype.captionRowExpand = function (args) {\n        var _this = this;\n        var captionRow = args.groupInfo;\n        var level = this.parent.groupSettings.columns.indexOf(captionRow.data.field) + 1;\n        var pred = generateExpandPredicates(args.fields, args.keys, this);\n        var predicateList = getPredicates(pred);\n        var lazyLoad = { level: level, skip: args.skip, take: args.take, where: predicateList };\n        if (args.makeRequest) {\n            var query = this.parent.renderModule.data.generateQuery(true);\n            if (!query.isCountRequired) {\n                query.isCountRequired = true;\n            }\n            query.lazyLoad.push({ key: 'onDemandGroupInfo', value: lazyLoad });\n            this.parent.showSpinner();\n            this.parent.renderModule.data.getData({}, query).then(function (e) {\n                _this.parent.hideSpinner();\n                if (e.result.length === 0) {\n                    return;\n                }\n                if (_this.cacheMode && _this.uid1 && _this.uid2) {\n                    _this.removeTopRows(_this.uid3, _this.uid1, _this.uid2);\n                    _this.uid1 = _this.uid2 = _this.uid3 = undefined;\n                }\n                _this.lazyLoadHandler({\n                    data: e.result, count: e.count, level: level, index: args.rowIndex,\n                    isRowExist: false, isScroll: args.isScroll, up: false, rowIndex: args.cachedRowIndex\n                });\n            })\n                .catch(function (e) { return _this.parent.renderModule.dataManagerFailure(e, { requestType: 'grouping' }); });\n        }\n        else {\n            this.lazyLoadHandler({\n                data: null, count: args.groupInfo.data.count, level: level, index: args.rowIndex,\n                isRowExist: true, isScroll: args.isScroll, up: args.scrollUp, rowIndex: args.cachedRowIndex\n            });\n        }\n    };\n    GroupLazyLoadRenderer.prototype.scrollReset = function (top) {\n        this.parent.getContent().firstElementChild.scrollTop = top ? this.parent.getContent().firstElementChild.scrollTop + top : 0;\n    };\n    GroupLazyLoadRenderer.prototype.updateCurrentViewData = function () {\n        var records = [];\n        this.getRows().filter(function (row) {\n            if (row.isDataRow) {\n                records[row.index] = row.data;\n            }\n        });\n        this.parent.currentViewData = records.length ? records : this.parent.currentViewData;\n    };\n    /**\n     * @returns {Row<Column>[]} returns the row\n     * @hidden */\n    GroupLazyLoadRenderer.prototype.getGroupCache = function () {\n        return this.groupCache;\n    };\n    /**\n     * @returns {Row<Column>[]} returns the row\n     * @hidden */\n    GroupLazyLoadRenderer.prototype.getRows = function () {\n        return this.groupCache[this.parent.pageSettings.currentPage] || [];\n    };\n    /**\n     * @returns {Element} returns the element\n     * @hidden */\n    GroupLazyLoadRenderer.prototype.getRowElements = function () {\n        return [].slice.call(this.parent.getContent().getElementsByClassName(literals.row));\n    };\n    /**\n     * @param {number} index - specifies the index\n     * @returns {Element} returns the element\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.getRowByIndex = function (index) {\n        var tr = [].slice.call(this.parent.getContent().getElementsByClassName(literals.row));\n        var row;\n        for (var i = 0; !isNullOrUndefined(index) && i < tr.length; i++) {\n            if (tr[i].getAttribute(literals.ariaRowIndex) === index.toString()) {\n                row = tr[i];\n                break;\n            }\n        }\n        return row;\n    };\n    /**\n     * Tucntion to set the column visibility\n     *\n     * @param {Column[]} columns - specifies the column\n     * @returns {void}\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var rows = this.getRows();\n        var testRow;\n        rows.some(function (r) { if (r.isDataRow) {\n            testRow = r;\n        } return r.isDataRow; });\n        var contentrows = this.getRows().filter(function (row) { return !row.isDetailRow; });\n        for (var i = 0; i < columns.length; i++) {\n            var column = columns[i];\n            var idx = this.parent.getNormalizedColumnIndex(column.uid);\n            var colIdx = this.parent.getColumnIndexByUid(column.uid);\n            var displayVal = column.visible === true ? '' : 'none';\n            if (idx !== -1 && testRow && idx < testRow.cells.length) {\n                setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n            }\n            this.setDisplayNone(gObj.getDataRows(), colIdx, displayVal, contentrows, idx);\n            if (!this.parent.invokedFromMedia && column.hideAtMedia) {\n                this.parent.updateMediaColumns(column);\n            }\n            this.parent.invokedFromMedia = false;\n        }\n    };\n    /**\n     * Function to set display.\n     *\n     * @param {Object} tr - specifies the row object\n     * @param {number} idx - specifies the index\n     * @param {string} displayVal - specifies the display value\n     * @param {Row<Column>[]} rows - specifies the array of rows\n     * @param {number} oriIdx - specifies the index\n     * @returns {void}\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.setDisplayNone = function (tr, idx, displayVal, rows, oriIdx) {\n        if (!this.parent.groupSettings.columns.length) {\n            setDisplayValue(tr, idx, displayVal, rows);\n        }\n        else {\n            var keys = Object.keys(this.groupCache);\n            for (var j = 0; j < keys.length; j++) {\n                var uids = this.rowsByUid[keys[j]];\n                var idxs = Object.keys(uids);\n                for (var i = 0; i < idxs.length; i++) {\n                    var tr_1 = this.parent.getContent().querySelector('tr[data-uid=' + idxs[i] + ']');\n                    var row = uids[idxs[i]];\n                    if (row.isCaptionRow) {\n                        if (!this.captionModelGen.isEmpty()) {\n                            this.changeCaptionRow(row, tr_1, keys[j]);\n                        }\n                        else {\n                            row.cells[row.indent + 1].colSpan = displayVal === '' ? row.cells[row.indent + 1].colSpan + 1\n                                : row.cells[row.indent + 1].colSpan - 1;\n                            if (tr_1) {\n                                tr_1.cells[row.indent + 1].colSpan = row.cells[row.indent + 1].colSpan;\n                            }\n                        }\n                    }\n                    if (row.isDataRow) {\n                        this.showAndHideCells(tr_1, idx, displayVal, false);\n                        row.cells[oriIdx].visible = displayVal === '' ? true : false;\n                    }\n                    if (!row.isCaptionRow && !row.isDataRow && isNullOrUndefined(row.indent)) {\n                        row.cells[oriIdx].visible = displayVal === '' ? true : false;\n                        row.visible = row.cells.some(function (cell) { return cell.isDataCell && cell.visible; });\n                        this.showAndHideCells(tr_1, idx, displayVal, true, row);\n                    }\n                }\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.changeCaptionRow = function (row, tr, index) {\n        var capRow = row;\n        var captionData = row.data;\n        var data = this.groupGenerator.generateCaptionRow(captionData, capRow.indent, capRow.parentGid, undefined, capRow.tIndex, capRow.parentUid);\n        data.uid = row.uid;\n        data.isExpand = row.isExpand;\n        data.lazyLoadCssClass = row.lazyLoadCssClass;\n        this.rowsByUid[index][row.uid] = data;\n        this.groupCache[index][this.objIdxByUid[index][row.uid]] = data;\n        if (tr) {\n            var tbody = this.parent.getContentTable().querySelector(literals.tbody);\n            tbody.replaceChild(this.rowRenderer.render(data, this.parent.getColumns()), tr);\n        }\n    };\n    GroupLazyLoadRenderer.prototype.showAndHideCells = function (tr, idx, displayVal, isSummary, row) {\n        if (tr) {\n            var cls = isSummary ? 'td.e-summarycell' : 'td.e-rowcell';\n            setStyleAttribute(tr.querySelectorAll(cls)[idx], { 'display': displayVal });\n            if (tr.querySelectorAll(cls)[idx].classList.contains('e-hide')) {\n                removeClass([tr.querySelectorAll(cls)[idx]], ['e-hide']);\n            }\n            if (isSummary) {\n                if (row.visible && tr.classList.contains('e-hide')) {\n                    removeClass([tr], ['e-hide']);\n                }\n                else if (!row.visible) {\n                    addClass([tr], ['e-hide']);\n                }\n            }\n        }\n    };\n    return GroupLazyLoadRenderer;\n}(ContentRender));\nexport { GroupLazyLoadRenderer };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}