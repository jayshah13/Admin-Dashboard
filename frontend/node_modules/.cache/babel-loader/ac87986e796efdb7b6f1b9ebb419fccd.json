{"ast":null,"code":"import { isNullOrUndefined, addClass, extend, closest } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { appendChildren, alignFrozenEditForm, getMovableTbody, getFrozenRightTbody, setStyleAndAttributes } from '../base/util';\nimport * as literals from '../base/string-literals';\n/**\n * Edit render module is used to render grid edit row.\n *\n * @hidden\n */\n\nvar InlineEditRender =\n/** @class */\nfunction () {\n  /**\n   * Constructor for render module\n   *\n   * @param {IGrid} parent - returns the IGrid\n   */\n  function InlineEditRender(parent) {\n    this.parent = parent;\n  }\n\n  InlineEditRender.prototype.addNew = function (elements, args) {\n    this.isEdit = false;\n    var tbody;\n    var mTbody = getMovableTbody(this.parent);\n    var frTbody = getFrozenRightTbody(this.parent);\n    var isFrozenGrid = this.parent.isFrozenGrid();\n    var isVirtualFrozen = isFrozenGrid && this.parent.enableColumnVirtualization && args.isScroll;\n\n    if (this.parent.frozenRows && this.parent.editSettings.newRowPosition === 'Top') {\n      tbody = isVirtualFrozen ? this.parent.getMovableHeaderTbody() : this.parent.getHeaderTable().querySelector(literals.tbody);\n    } else {\n      tbody = isVirtualFrozen ? this.parent.getMovableContentTbody() : this.parent.getContentTable().querySelector(literals.tbody);\n    }\n\n    args.row = this.parent.createElement('tr', {\n      className: 'e-row e-addedrow'\n    });\n\n    if (tbody.querySelector('.e-emptyrow')) {\n      var emptyRow = tbody.querySelector('.e-emptyrow');\n      emptyRow.parentNode.removeChild(emptyRow);\n\n      if (isFrozenGrid && !isVirtualFrozen) {\n        var moveTbody = this.parent.getContent().querySelector('.' + literals.movableContent).querySelector(literals.tbody);\n        moveTbody.firstElementChild.parentNode.removeChild(moveTbody.firstElementChild);\n\n        if (this.parent.getFrozenMode() === literals.leftRight) {\n          var frTbody_1 = this.parent.getContent().querySelector('.e-frozen-right-content').querySelector(literals.tbody);\n          frTbody_1.firstElementChild.parentNode.removeChild(frTbody_1.firstElementChild);\n        }\n      }\n    }\n\n    if (this.parent.editSettings.newRowPosition === 'Top') {\n      tbody.insertBefore(args.row, tbody.firstChild);\n    } else {\n      tbody.appendChild(args.row);\n    }\n\n    args.row.appendChild(this.getEditElement(elements, false, undefined, args, true));\n    this.parent.editModule.checkLastRow(args.row, args);\n\n    if (isFrozenGrid && !isVirtualFrozen) {\n      var mEle = this.renderMovableform(args.row, args);\n\n      if (this.parent.editSettings.newRowPosition === 'Top') {\n        mTbody.insertBefore(mEle, mTbody.firstChild);\n      } else {\n        mTbody.appendChild(mEle);\n      }\n\n      args.row.querySelector('.e-normaledit').setAttribute('colspan', this.parent.getVisibleFrozenColumns() + '');\n      mEle.setAttribute('colspan', '' + (this.parent.getVisibleColumns().length - this.parent.getVisibleFrozenColumns()));\n\n      if (frTbody) {\n        var frEle = this.renderFrozenRightForm(args.row, args);\n\n        if (this.parent.editSettings.newRowPosition === 'Top') {\n          frTbody.insertBefore(frEle, frTbody.firstChild);\n        } else {\n          frTbody.appendChild(frEle);\n        }\n\n        var colSpan = this.parent.getVisibleFrozenColumns() - this.parent.getFrozenRightColumnsCount();\n        args.row.querySelector('.e-normaledit').setAttribute('colspan', colSpan + '');\n        frEle.querySelector('.e-normaledit').setAttribute('colspan', '' + this.parent.getFrozenRightColumnsCount());\n      }\n\n      if (this.parent.height === 'auto') {\n        this.parent.notify(events.frozenHeight, {});\n      }\n    }\n  };\n\n  InlineEditRender.prototype.renderFrozenRightForm = function (ele, args) {\n    var frEle = ele.cloneNode(true);\n    var form = args.frozenRightForm = frEle.querySelector('form');\n\n    if (this.parent.editSettings.template) {\n      form.innerHTML = '';\n      this.appendChildren(form, args.rowData, false);\n      return frEle;\n    }\n\n    this.renderRightFrozen(ele, frEle);\n    frEle.querySelector(literals.colGroup).innerHTML = this.parent.getHeaderContent().querySelector('.e-frozen-right-header').querySelector(literals.colGroup).innerHTML;\n    return frEle;\n  };\n\n  InlineEditRender.prototype.renderMovableform = function (ele, args) {\n    var mEle = ele.cloneNode(true);\n    var form = args.movableForm = mEle.querySelector('form');\n\n    if (this.parent.editSettings.template) {\n      form.innerHTML = '';\n      this.appendChildren(form, args.rowData, false);\n      return mEle;\n    }\n\n    this.renderMovable(ele, mEle);\n    mEle.querySelector(literals.colGroup).innerHTML = this.parent.getHeaderContent().querySelector('.' + literals.movableHeader).querySelector(literals.colGroup).innerHTML;\n    return mEle;\n  };\n\n  InlineEditRender.prototype.updateFreezeEdit = function (row, td) {\n    td = td.concat([].slice.call(this.getFreezeRow(row).querySelectorAll('td.e-rowcell')));\n\n    if (this.parent.getFrozenMode() === literals.leftRight) {\n      td = td.concat([].slice.call(this.getFreezeRightRow(row).querySelectorAll('td.e-rowcell')));\n    }\n\n    return td;\n  };\n\n  InlineEditRender.prototype.getFreezeRightRow = function (row) {\n    var idx = parseInt(row.getAttribute(literals.ariaRowIndex), 10);\n    var fCont = this.parent.getFrozenLeftContentTbody();\n    var fHdr = this.parent.getFrozenHeaderTbody();\n    var frHdr = this.parent.getFrozenRightHeaderTbody();\n    var frCont = this.parent.getFrozenRightContentTbody();\n\n    if (fCont.contains(row) || fHdr.contains(row)) {\n      return this.parent.getFrozenRightRowByIndex(idx);\n    } else if (frCont.contains(row) || frHdr.contains(row)) {\n      return this.parent.getRowByIndex(idx);\n    }\n\n    return row;\n  };\n\n  InlineEditRender.prototype.getFreezeRow = function (row) {\n    if (this.parent.isFrozenGrid()) {\n      var idx = parseInt(row.getAttribute(literals.ariaRowIndex), 10);\n      var fCont = this.parent.getFrozenLeftContentTbody();\n      var mCont = this.parent.getMovableContentTbody();\n      var fHdr = this.parent.getFrozenHeaderTbody();\n      var mHdr = this.parent.getMovableHeaderTbody();\n\n      if (fCont.contains(row) || fHdr.contains(row)) {\n        return this.parent.getMovableRowByIndex(idx);\n      } else if (mCont.contains(row) || mHdr.contains(row)) {\n        return this.parent.getRowByIndex(idx);\n      }\n    }\n\n    return row;\n  };\n\n  InlineEditRender.prototype.update = function (elements, args) {\n    this.isEdit = true;\n    var isCustomFormValidation = args.isCustomFormValidation;\n    var isScroll = args.isScroll;\n\n    if (!isScroll && (closest(args.row, '.' + literals.movableContent) || closest(args.row, '.' + literals.movableHeader))) {\n      args.row = this.getFreezeRow(args.row);\n    }\n\n    if (closest(args.row, '.e-frozen-right-content') || closest(args.row, '.e-frozen-right-header')) {\n      args.row = this.getFreezeRightRow(args.row);\n    }\n\n    var isVirtualFrozen = this.parent.isFrozenGrid() && this.parent.enableColumnVirtualization && isScroll;\n    var tdElement = [].slice.call(args.row.querySelectorAll('td.e-rowcell'));\n    args.row.innerHTML = '';\n\n    if (!isVirtualFrozen && !isCustomFormValidation) {\n      tdElement = this.updateFreezeEdit(args.row, tdElement);\n    }\n\n    args.row.appendChild(this.getEditElement(elements, true, tdElement, args, true));\n    args.row.classList.add(literals.editedRow);\n    this.parent.editModule.checkLastRow(args.row, args);\n\n    if (!isVirtualFrozen && !isCustomFormValidation) {\n      this.refreshFreezeEdit(args.row, args);\n    }\n  };\n\n  InlineEditRender.prototype.refreshFreezeEdit = function (row, args) {\n    var td = row.firstChild;\n\n    if (this.parent.getVisibleFrozenColumns() && this.parent.editSettings.template) {\n      td.querySelector(literals.colGroup).innerHTML = this.parent.getHeaderContent().querySelector('.' + literals.frozenHeader).querySelector(literals.colGroup).innerHTML;\n    }\n\n    var fCls;\n    var cont;\n    var idx = parseInt(row.getAttribute(literals.ariaRowIndex), 10);\n\n    if (this.parent.isFrozenGrid()) {\n      if (idx < this.parent.frozenRows) {\n        cont = this.parent.getHeaderContent();\n        fCls = '.' + literals.frozenHeader;\n      } else {\n        cont = this.parent.getContent();\n        fCls = '.' + literals.frozenContent;\n      }\n\n      var mTd = td.cloneNode(true);\n      var frTd = td.cloneNode(true);\n      var form = args.movableForm = mTd.querySelector('form');\n\n      if (this.parent.editSettings.template) {\n        this.refreshEditForm(form, args.rowData);\n      }\n\n      var fRows = void 0;\n      var frRows = void 0;\n\n      if (cont.querySelector(fCls).contains(row)) {\n        fRows = this.parent.getMovableRowByIndex(idx);\n        this.updateFrozenCont(fRows, td, mTd);\n\n        if (this.parent.getFrozenMode() === literals.leftRight) {\n          args.frozenRightForm = frTd.querySelector('form');\n          this.refreshEditForm(args.frozenRightForm, args.rowData);\n          frRows = this.parent.getFrozenRightRowByIndex(idx);\n          this.updateFrozenRightCont(frRows, td, frTd);\n        }\n      } else {\n        fRows = this.parent.getRowByIndex(idx);\n        this.updateFrozenCont(fRows, mTd, td);\n\n        if (this.parent.getFrozenMode() === literals.leftRight) {\n          args.frozenRightForm = frTd.querySelector('form');\n          this.refreshEditForm(args.frozenRightForm, args.rowData);\n          frRows = this.parent.getFrozenRightRowByIndex(idx);\n          this.updateFrozenRightCont(frRows, frTd, td);\n        }\n      }\n\n      fRows.appendChild(mTd);\n      fRows.classList.add(literals.editedRow);\n\n      if (this.parent.getFrozenMode() === literals.leftRight) {\n        frRows.appendChild(frTd);\n        frRows.classList.add(literals.editedRow);\n        alignFrozenEditForm(args.frozenRightForm.querySelector('td:not(.e-hide)'), args.form.querySelector('td:not(.e-hide)'));\n      }\n\n      alignFrozenEditForm(args.movableForm.querySelector('td:not(.e-hide)'), args.form.querySelector('td:not(.e-hide)'));\n    }\n  };\n\n  InlineEditRender.prototype.refreshEditForm = function (form, data) {\n    if (this.parent.editSettings.template) {\n      form.innerHTML = '';\n      this.appendChildren(form, data, false);\n    }\n  };\n\n  InlineEditRender.prototype.updateFrozenRightCont = function (row, ele, frEle) {\n    row.innerHTML = '';\n    this.renderRightFrozen(ele, frEle);\n    frEle.querySelector(literals.colGroup).innerHTML = this.parent.getHeaderContent().querySelector('.e-frozen-right-header').querySelector(literals.colGroup).innerHTML;\n    ele.setAttribute('colspan', this.parent.getVisibleFrozenColumns() - this.parent.getFrozenRightColumnsCount() + '');\n    frEle.setAttribute('colspan', this.parent.getFrozenRightColumnsCount() + '');\n  };\n\n  InlineEditRender.prototype.updateFrozenCont = function (row, ele, mEle) {\n    row.innerHTML = '';\n    this.renderMovable(ele, mEle);\n    mEle.querySelector(literals.colGroup).innerHTML = this.parent.getHeaderContent().querySelector('.' + literals.movableHeader).querySelector(literals.colGroup).innerHTML;\n    ele.setAttribute('colspan', this.parent.getVisibleFrozenColumns() + '');\n    mEle.setAttribute('colspan', this.parent.getCurrentVisibleColumns(this.parent.enableColumnVirtualization).length - this.parent.getVisibleFrozenColumns() + '');\n  };\n\n  InlineEditRender.prototype.renderRightFrozen = function (ele, frEle) {\n    frEle.querySelector('tr').innerHTML = '';\n    var cols = this.parent.getColumns();\n    var k = 0;\n\n    for (var i = 0; i < cols.length; i++, k++) {\n      if (cols[i].getFreezeTableName() === literals.frozenRight) {\n        var index = k - this.parent.getMovableColumnsCount();\n        frEle.querySelector('tr').appendChild(ele.querySelector('tr').removeChild(ele.querySelector('tr').children[index]));\n        k--;\n      }\n    }\n  };\n\n  InlineEditRender.prototype.renderMovable = function (ele, mEle) {\n    mEle.querySelector('tr').innerHTML = '';\n    var cols = this.parent.getColumns();\n    var k = this.parent.isRowDragable() ? 1 : 0;\n\n    for (var i = 0; i < cols.length; i++, k++) {\n      if (cols[i].getFreezeTableName() === 'movable') {\n        mEle.querySelector('tr').appendChild(ele.querySelector('tr').removeChild(ele.querySelector('tr').children[k]));\n        k--;\n      }\n    }\n  }; // eslint-disable-next-line max-len\n\n\n  InlineEditRender.prototype.getEditElement = function (elements, isEdit, tdElement, args, isFrozen) {\n    var gObj = this.parent;\n    var gLen = 0;\n    var isDetail = !isNullOrUndefined(gObj.detailTemplate) || !isNullOrUndefined(gObj.childGrid) ? 1 : 0;\n\n    if (gObj.allowGrouping) {\n      gLen = gObj.groupSettings.columns.length;\n    }\n\n    var td = this.parent.createElement('td', {\n      className: 'e-editcell e-normaledit',\n      attrs: {\n        colspan: (gObj.getCurrentVisibleColumns(this.parent.enableColumnVirtualization).length - gObj.getVisibleFrozenColumns() + this.parent.getIndentCount()).toString()\n      }\n    });\n    var form = args.form = this.parent.createElement('form', {\n      id: gObj.element.id + 'EditForm',\n      className: 'e-gridform'\n    });\n\n    if (this.parent.editSettings.template) {\n      this.appendChildren(form, args.rowData, isFrozen);\n      td.appendChild(form);\n      return td;\n    }\n\n    var table = this.parent.createElement('table', {\n      className: 'e-table e-inline-edit',\n      attrs: {\n        cellspacing: '0.25'\n      }\n    });\n    table.appendChild(gObj.getContentTable().querySelector(literals.colGroup).cloneNode(true));\n    var tbody = this.parent.createElement(literals.tbody);\n    var tr = this.parent.createElement('tr');\n    var i = 0;\n\n    if (isDetail) {\n      tr.insertBefore(this.parent.createElement('td', {\n        className: 'e-detailrowcollapse'\n      }), tr.firstChild);\n    }\n\n    if (gObj.isRowDragable()) {\n      tr.appendChild(this.parent.createElement('td', {\n        className: 'e-dragindentcell'\n      }));\n    }\n\n    while (i < gLen) {\n      tr.appendChild(this.parent.createElement('td', {\n        className: 'e-indentcell'\n      }));\n      i++;\n    }\n\n    var m = 0;\n    i = 0;\n    var isVirtualFrozen = gObj.isFrozenGrid() && gObj.enableColumnVirtualization && args.isScroll;\n    var cols = args.isCustomFormValidation ? this.parent.columnModel : gObj.getColumns();\n\n    while (isEdit && m < tdElement.length && i < cols.length || i < cols.length) {\n      var span = isEdit ? tdElement[m].getAttribute('colspan') : null;\n      var col = cols[i];\n\n      if (isVirtualFrozen && col.getFreezeTableName() !== 'movable' || args.isCustomFormValidation && (col.commands || col.commandsTemplate || !col.field)) {\n        i++;\n        continue;\n      }\n\n      var td_1 = this.parent.createElement('td', {\n        className: literals.rowCell,\n        attrs: {\n          style: 'text-align:' + (col.textAlign ? col.textAlign : ''),\n          'colspan': span ? span : ''\n        }\n      });\n\n      if (col.visible) {\n        td_1.appendChild(elements[col.uid]);\n\n        if (this.parent.rowRenderingMode === 'Vertical') {\n          setStyleAndAttributes(td_1, {\n            'data-cell': col.headerText\n          });\n\n          if (i === 0) {\n            td_1.classList.add('e-responsive-editcell');\n          }\n        }\n\n        if (col.editType === 'booleanedit') {\n          td_1.classList.add('e-boolcell');\n        } else if (col.commands || col.commandsTemplate) {\n          addClass([td_1], 'e-unboundcell');\n        }\n      } else {\n        td_1.classList.add('e-hide');\n      }\n\n      tr.appendChild(td_1);\n      i = span ? i + parseInt(span, 10) : i + 1;\n      m++;\n    }\n\n    tbody.appendChild(tr);\n    table.appendChild(tbody);\n    form.appendChild(table);\n    td.appendChild(form);\n    return td;\n  };\n\n  InlineEditRender.prototype.removeEventListener = function () {//To destroy the renderer\n  };\n\n  InlineEditRender.prototype.appendChildren = function (form, data, isFrozen) {\n    var _this = this;\n\n    var dummyData = extend({}, data, {\n      isAdd: !this.isEdit,\n      isFrozen: isFrozen\n    }, true);\n    var editTemplateID = this.parent.element.id + 'editSettingsTemplate';\n\n    if (this.parent.isReact && typeof this.parent.editSettings.template !== 'string') {\n      this.parent.getEditTemplate()(dummyData, this.parent, 'editSettingsTemplate', editTemplateID, null, null, form);\n      this.parent.renderTemplates();\n    } else {\n      appendChildren(form, this.parent.getEditTemplate()(dummyData, this.parent, 'editSettingsTemplate', editTemplateID));\n    } // eslint-disable-next-line\n\n\n    var setRules = function () {\n      var cols = _this.parent.getColumns();\n\n      for (var i = 0; i < cols.length; i++) {\n        if (cols[i].validationRules) {\n          _this.parent.editModule.formObj.rules[cols[i].field] = cols[i].validationRules;\n        }\n      }\n    };\n  };\n\n  return InlineEditRender;\n}();\n\nexport { InlineEditRender };","map":{"version":3,"names":["isNullOrUndefined","addClass","extend","closest","events","appendChildren","alignFrozenEditForm","getMovableTbody","getFrozenRightTbody","setStyleAndAttributes","literals","InlineEditRender","parent","prototype","addNew","elements","args","isEdit","tbody","mTbody","frTbody","isFrozenGrid","isVirtualFrozen","enableColumnVirtualization","isScroll","frozenRows","editSettings","newRowPosition","getMovableHeaderTbody","getHeaderTable","querySelector","getMovableContentTbody","getContentTable","row","createElement","className","emptyRow","parentNode","removeChild","moveTbody","getContent","movableContent","firstElementChild","getFrozenMode","leftRight","frTbody_1","insertBefore","firstChild","appendChild","getEditElement","undefined","editModule","checkLastRow","mEle","renderMovableform","setAttribute","getVisibleFrozenColumns","getVisibleColumns","length","frEle","renderFrozenRightForm","colSpan","getFrozenRightColumnsCount","height","notify","frozenHeight","ele","cloneNode","form","frozenRightForm","template","innerHTML","rowData","renderRightFrozen","colGroup","getHeaderContent","movableForm","renderMovable","movableHeader","updateFreezeEdit","td","concat","slice","call","getFreezeRow","querySelectorAll","getFreezeRightRow","idx","parseInt","getAttribute","ariaRowIndex","fCont","getFrozenLeftContentTbody","fHdr","getFrozenHeaderTbody","frHdr","getFrozenRightHeaderTbody","frCont","getFrozenRightContentTbody","contains","getFrozenRightRowByIndex","getRowByIndex","mCont","mHdr","getMovableRowByIndex","update","isCustomFormValidation","tdElement","classList","add","editedRow","refreshFreezeEdit","frozenHeader","fCls","cont","frozenContent","mTd","frTd","refreshEditForm","fRows","frRows","updateFrozenCont","updateFrozenRightCont","data","getCurrentVisibleColumns","cols","getColumns","k","i","getFreezeTableName","frozenRight","index","getMovableColumnsCount","children","isRowDragable","isFrozen","gObj","gLen","isDetail","detailTemplate","childGrid","allowGrouping","groupSettings","columns","attrs","colspan","getIndentCount","toString","id","element","table","cellspacing","tr","m","columnModel","span","col","commands","commandsTemplate","field","td_1","rowCell","style","textAlign","visible","uid","rowRenderingMode","headerText","editType","removeEventListener","_this","dummyData","isAdd","editTemplateID","isReact","getEditTemplate","renderTemplates","setRules","validationRules","formObj","rules"],"sources":["C:/Users/shahj/OneDrive/Documents/GitHub/Admin-Dashboard/frontend/node_modules/@syncfusion/ej2-grids/src/grid/renderer/inline-edit-renderer.js"],"sourcesContent":["import { isNullOrUndefined, addClass, extend, closest } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { appendChildren, alignFrozenEditForm, getMovableTbody, getFrozenRightTbody, setStyleAndAttributes } from '../base/util';\nimport * as literals from '../base/string-literals';\n/**\n * Edit render module is used to render grid edit row.\n *\n * @hidden\n */\nvar InlineEditRender = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     *\n     * @param {IGrid} parent - returns the IGrid\n     */\n    function InlineEditRender(parent) {\n        this.parent = parent;\n    }\n    InlineEditRender.prototype.addNew = function (elements, args) {\n        this.isEdit = false;\n        var tbody;\n        var mTbody = getMovableTbody(this.parent);\n        var frTbody = getFrozenRightTbody(this.parent);\n        var isFrozenGrid = this.parent.isFrozenGrid();\n        var isVirtualFrozen = isFrozenGrid && this.parent.enableColumnVirtualization && args.isScroll;\n        if (this.parent.frozenRows && this.parent.editSettings.newRowPosition === 'Top') {\n            tbody = isVirtualFrozen ? this.parent.getMovableHeaderTbody() : this.parent.getHeaderTable().querySelector(literals.tbody);\n        }\n        else {\n            tbody = isVirtualFrozen ? this.parent.getMovableContentTbody() : this.parent.getContentTable().querySelector(literals.tbody);\n        }\n        args.row = this.parent.createElement('tr', { className: 'e-row e-addedrow' });\n        if (tbody.querySelector('.e-emptyrow')) {\n            var emptyRow = tbody.querySelector('.e-emptyrow');\n            emptyRow.parentNode.removeChild(emptyRow);\n            if (isFrozenGrid && !isVirtualFrozen) {\n                var moveTbody = this.parent.getContent().querySelector('.' + literals.movableContent).querySelector(literals.tbody);\n                (moveTbody.firstElementChild).parentNode.removeChild(moveTbody.firstElementChild);\n                if (this.parent.getFrozenMode() === literals.leftRight) {\n                    var frTbody_1 = this.parent.getContent().querySelector('.e-frozen-right-content').querySelector(literals.tbody);\n                    (frTbody_1.firstElementChild).parentNode.removeChild(frTbody_1.firstElementChild);\n                }\n            }\n        }\n        if (this.parent.editSettings.newRowPosition === 'Top') {\n            tbody.insertBefore(args.row, tbody.firstChild);\n        }\n        else {\n            tbody.appendChild(args.row);\n        }\n        args.row.appendChild(this.getEditElement(elements, false, undefined, args, true));\n        this.parent.editModule.checkLastRow(args.row, args);\n        if (isFrozenGrid && !isVirtualFrozen) {\n            var mEle = this.renderMovableform(args.row, args);\n            if (this.parent.editSettings.newRowPosition === 'Top') {\n                mTbody.insertBefore(mEle, mTbody.firstChild);\n            }\n            else {\n                mTbody.appendChild(mEle);\n            }\n            args.row.querySelector('.e-normaledit').setAttribute('colspan', this.parent.getVisibleFrozenColumns() + '');\n            mEle.setAttribute('colspan', '' + (this.parent.getVisibleColumns().length - this.parent.getVisibleFrozenColumns()));\n            if (frTbody) {\n                var frEle = this.renderFrozenRightForm(args.row, args);\n                if (this.parent.editSettings.newRowPosition === 'Top') {\n                    frTbody.insertBefore(frEle, frTbody.firstChild);\n                }\n                else {\n                    frTbody.appendChild(frEle);\n                }\n                var colSpan = this.parent.getVisibleFrozenColumns() - this.parent.getFrozenRightColumnsCount();\n                args.row.querySelector('.e-normaledit').setAttribute('colspan', colSpan + '');\n                frEle.querySelector('.e-normaledit').setAttribute('colspan', '' + this.parent.getFrozenRightColumnsCount());\n            }\n            if (this.parent.height === 'auto') {\n                this.parent.notify(events.frozenHeight, {});\n            }\n        }\n    };\n    InlineEditRender.prototype.renderFrozenRightForm = function (ele, args) {\n        var frEle = ele.cloneNode(true);\n        var form = args.frozenRightForm = frEle.querySelector('form');\n        if (this.parent.editSettings.template) {\n            form.innerHTML = '';\n            this.appendChildren(form, args.rowData, false);\n            return frEle;\n        }\n        this.renderRightFrozen(ele, frEle);\n        frEle.querySelector(literals.colGroup).innerHTML = this.parent.getHeaderContent()\n            .querySelector('.e-frozen-right-header').querySelector(literals.colGroup).innerHTML;\n        return frEle;\n    };\n    InlineEditRender.prototype.renderMovableform = function (ele, args) {\n        var mEle = ele.cloneNode(true);\n        var form = args.movableForm = mEle.querySelector('form');\n        if (this.parent.editSettings.template) {\n            form.innerHTML = '';\n            this.appendChildren(form, args.rowData, false);\n            return mEle;\n        }\n        this.renderMovable(ele, mEle);\n        mEle.querySelector(literals.colGroup).innerHTML = this.parent.getHeaderContent()\n            .querySelector('.' + literals.movableHeader).querySelector(literals.colGroup).innerHTML;\n        return mEle;\n    };\n    InlineEditRender.prototype.updateFreezeEdit = function (row, td) {\n        td = td.concat([].slice.call(this.getFreezeRow(row).querySelectorAll('td.e-rowcell')));\n        if (this.parent.getFrozenMode() === literals.leftRight) {\n            td = td.concat([].slice.call(this.getFreezeRightRow(row).querySelectorAll('td.e-rowcell')));\n        }\n        return td;\n    };\n    InlineEditRender.prototype.getFreezeRightRow = function (row) {\n        var idx = parseInt(row.getAttribute(literals.ariaRowIndex), 10);\n        var fCont = this.parent.getFrozenLeftContentTbody();\n        var fHdr = this.parent.getFrozenHeaderTbody();\n        var frHdr = this.parent.getFrozenRightHeaderTbody();\n        var frCont = this.parent.getFrozenRightContentTbody();\n        if (fCont.contains(row) || fHdr.contains(row)) {\n            return this.parent.getFrozenRightRowByIndex(idx);\n        }\n        else if (frCont.contains(row) || frHdr.contains(row)) {\n            return this.parent.getRowByIndex(idx);\n        }\n        return row;\n    };\n    InlineEditRender.prototype.getFreezeRow = function (row) {\n        if (this.parent.isFrozenGrid()) {\n            var idx = parseInt(row.getAttribute(literals.ariaRowIndex), 10);\n            var fCont = this.parent.getFrozenLeftContentTbody();\n            var mCont = this.parent.getMovableContentTbody();\n            var fHdr = this.parent.getFrozenHeaderTbody();\n            var mHdr = this.parent.getMovableHeaderTbody();\n            if (fCont.contains(row) || fHdr.contains(row)) {\n                return this.parent.getMovableRowByIndex(idx);\n            }\n            else if (mCont.contains(row) || mHdr.contains(row)) {\n                return this.parent.getRowByIndex(idx);\n            }\n        }\n        return row;\n    };\n    InlineEditRender.prototype.update = function (elements, args) {\n        this.isEdit = true;\n        var isCustomFormValidation = args.isCustomFormValidation;\n        var isScroll = args.isScroll;\n        if (!isScroll && (closest(args.row, '.' + literals.movableContent) || closest(args.row, '.' + literals.movableHeader))) {\n            args.row = this.getFreezeRow(args.row);\n        }\n        if (closest(args.row, '.e-frozen-right-content') || closest(args.row, '.e-frozen-right-header')) {\n            args.row = this.getFreezeRightRow(args.row);\n        }\n        var isVirtualFrozen = this.parent.isFrozenGrid() && this.parent.enableColumnVirtualization && isScroll;\n        var tdElement = [].slice.call(args.row.querySelectorAll('td.e-rowcell'));\n        args.row.innerHTML = '';\n        if (!isVirtualFrozen && !isCustomFormValidation) {\n            tdElement = this.updateFreezeEdit(args.row, tdElement);\n        }\n        args.row.appendChild(this.getEditElement(elements, true, tdElement, args, true));\n        args.row.classList.add(literals.editedRow);\n        this.parent.editModule.checkLastRow(args.row, args);\n        if (!isVirtualFrozen && !isCustomFormValidation) {\n            this.refreshFreezeEdit(args.row, args);\n        }\n    };\n    InlineEditRender.prototype.refreshFreezeEdit = function (row, args) {\n        var td = row.firstChild;\n        if (this.parent.getVisibleFrozenColumns() && this.parent.editSettings.template) {\n            td.querySelector(literals.colGroup).innerHTML = this.parent.getHeaderContent().querySelector('.' + literals.frozenHeader).\n                querySelector(literals.colGroup).innerHTML;\n        }\n        var fCls;\n        var cont;\n        var idx = parseInt(row.getAttribute(literals.ariaRowIndex), 10);\n        if (this.parent.isFrozenGrid()) {\n            if (idx < this.parent.frozenRows) {\n                cont = this.parent.getHeaderContent();\n                fCls = '.' + literals.frozenHeader;\n            }\n            else {\n                cont = this.parent.getContent();\n                fCls = '.' + literals.frozenContent;\n            }\n            var mTd = td.cloneNode(true);\n            var frTd = td.cloneNode(true);\n            var form = args.movableForm = mTd.querySelector('form');\n            if (this.parent.editSettings.template) {\n                this.refreshEditForm(form, args.rowData);\n            }\n            var fRows = void 0;\n            var frRows = void 0;\n            if (cont.querySelector(fCls).contains(row)) {\n                fRows = this.parent.getMovableRowByIndex(idx);\n                this.updateFrozenCont(fRows, td, mTd);\n                if (this.parent.getFrozenMode() === literals.leftRight) {\n                    args.frozenRightForm = frTd.querySelector('form');\n                    this.refreshEditForm(args.frozenRightForm, args.rowData);\n                    frRows = this.parent.getFrozenRightRowByIndex(idx);\n                    this.updateFrozenRightCont(frRows, td, frTd);\n                }\n            }\n            else {\n                fRows = this.parent.getRowByIndex(idx);\n                this.updateFrozenCont(fRows, mTd, td);\n                if (this.parent.getFrozenMode() === literals.leftRight) {\n                    args.frozenRightForm = frTd.querySelector('form');\n                    this.refreshEditForm(args.frozenRightForm, args.rowData);\n                    frRows = this.parent.getFrozenRightRowByIndex(idx);\n                    this.updateFrozenRightCont(frRows, frTd, td);\n                }\n            }\n            fRows.appendChild(mTd);\n            fRows.classList.add(literals.editedRow);\n            if (this.parent.getFrozenMode() === literals.leftRight) {\n                frRows.appendChild(frTd);\n                frRows.classList.add(literals.editedRow);\n                alignFrozenEditForm(args.frozenRightForm.querySelector('td:not(.e-hide)'), args.form.querySelector('td:not(.e-hide)'));\n            }\n            alignFrozenEditForm(args.movableForm.querySelector('td:not(.e-hide)'), args.form.querySelector('td:not(.e-hide)'));\n        }\n    };\n    InlineEditRender.prototype.refreshEditForm = function (form, data) {\n        if (this.parent.editSettings.template) {\n            form.innerHTML = '';\n            this.appendChildren(form, data, false);\n        }\n    };\n    InlineEditRender.prototype.updateFrozenRightCont = function (row, ele, frEle) {\n        row.innerHTML = '';\n        this.renderRightFrozen(ele, frEle);\n        frEle.querySelector(literals.colGroup).innerHTML = this.parent.getHeaderContent()\n            .querySelector('.e-frozen-right-header').querySelector(literals.colGroup).innerHTML;\n        ele.setAttribute('colspan', this.parent.getVisibleFrozenColumns() - this.parent.getFrozenRightColumnsCount() + '');\n        frEle.setAttribute('colspan', this.parent.getFrozenRightColumnsCount() + '');\n    };\n    InlineEditRender.prototype.updateFrozenCont = function (row, ele, mEle) {\n        row.innerHTML = '';\n        this.renderMovable(ele, mEle);\n        mEle.querySelector(literals.colGroup).innerHTML = this.parent.getHeaderContent()\n            .querySelector('.' + literals.movableHeader).querySelector(literals.colGroup).innerHTML;\n        ele.setAttribute('colspan', this.parent.getVisibleFrozenColumns() + '');\n        mEle.setAttribute('colspan', this.parent.getCurrentVisibleColumns(this.parent.enableColumnVirtualization).length - this.parent.getVisibleFrozenColumns() + '');\n    };\n    InlineEditRender.prototype.renderRightFrozen = function (ele, frEle) {\n        frEle.querySelector('tr').innerHTML = '';\n        var cols = this.parent.getColumns();\n        var k = 0;\n        for (var i = 0; i < cols.length; i++, k++) {\n            if (cols[i].getFreezeTableName() === literals.frozenRight) {\n                var index = k - this.parent.getMovableColumnsCount();\n                frEle.querySelector('tr').appendChild(ele.querySelector('tr').removeChild(ele.querySelector('tr').children[index]));\n                k--;\n            }\n        }\n    };\n    InlineEditRender.prototype.renderMovable = function (ele, mEle) {\n        mEle.querySelector('tr').innerHTML = '';\n        var cols = this.parent.getColumns();\n        var k = this.parent.isRowDragable() ? 1 : 0;\n        for (var i = 0; i < cols.length; i++, k++) {\n            if (cols[i].getFreezeTableName() === 'movable') {\n                mEle.querySelector('tr').appendChild(ele.querySelector('tr').removeChild(ele.querySelector('tr').children[k]));\n                k--;\n            }\n        }\n    };\n    // eslint-disable-next-line max-len\n    InlineEditRender.prototype.getEditElement = function (elements, isEdit, tdElement, args, isFrozen) {\n        var gObj = this.parent;\n        var gLen = 0;\n        var isDetail = !isNullOrUndefined(gObj.detailTemplate) || !isNullOrUndefined(gObj.childGrid) ? 1 : 0;\n        if (gObj.allowGrouping) {\n            gLen = gObj.groupSettings.columns.length;\n        }\n        var td = this.parent.createElement('td', {\n            className: 'e-editcell e-normaledit',\n            attrs: {\n                colspan: (gObj.getCurrentVisibleColumns(this.parent.enableColumnVirtualization).length - gObj.getVisibleFrozenColumns()\n                    + this.parent.getIndentCount()).toString()\n            }\n        });\n        var form = args.form =\n            this.parent.createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n        if (this.parent.editSettings.template) {\n            this.appendChildren(form, args.rowData, isFrozen);\n            td.appendChild(form);\n            return td;\n        }\n        var table = this.parent.createElement('table', { className: 'e-table e-inline-edit', attrs: { cellspacing: '0.25' } });\n        table.appendChild(gObj.getContentTable().querySelector(literals.colGroup).cloneNode(true));\n        var tbody = this.parent.createElement(literals.tbody);\n        var tr = this.parent.createElement('tr');\n        var i = 0;\n        if (isDetail) {\n            tr.insertBefore(this.parent.createElement('td', { className: 'e-detailrowcollapse' }), tr.firstChild);\n        }\n        if (gObj.isRowDragable()) {\n            tr.appendChild(this.parent.createElement('td', { className: 'e-dragindentcell' }));\n        }\n        while (i < gLen) {\n            tr.appendChild(this.parent.createElement('td', { className: 'e-indentcell' }));\n            i++;\n        }\n        var m = 0;\n        i = 0;\n        var isVirtualFrozen = gObj.isFrozenGrid() && gObj.enableColumnVirtualization && args.isScroll;\n        var cols = args.isCustomFormValidation ? this.parent.columnModel : gObj.getColumns();\n        while ((isEdit && m < tdElement.length && i < cols.length) || i < cols.length) {\n            var span = isEdit ? tdElement[m].getAttribute('colspan') : null;\n            var col = cols[i];\n            if ((isVirtualFrozen && col.getFreezeTableName() !== 'movable')\n                || (args.isCustomFormValidation && (col.commands || col.commandsTemplate || !col.field))) {\n                i++;\n                continue;\n            }\n            var td_1 = this.parent.createElement('td', {\n                className: literals.rowCell, attrs: { style: 'text-align:' + (col.textAlign ? col.textAlign : ''), 'colspan': span ? span : '' }\n            });\n            if (col.visible) {\n                td_1.appendChild(elements[col.uid]);\n                if (this.parent.rowRenderingMode === 'Vertical') {\n                    setStyleAndAttributes(td_1, { 'data-cell': col.headerText });\n                    if (i === 0) {\n                        td_1.classList.add('e-responsive-editcell');\n                    }\n                }\n                if (col.editType === 'booleanedit') {\n                    td_1.classList.add('e-boolcell');\n                }\n                else if (col.commands || col.commandsTemplate) {\n                    addClass([td_1], 'e-unboundcell');\n                }\n            }\n            else {\n                td_1.classList.add('e-hide');\n            }\n            tr.appendChild(td_1);\n            i = span ? i + parseInt(span, 10) : i + 1;\n            m++;\n        }\n        tbody.appendChild(tr);\n        table.appendChild(tbody);\n        form.appendChild(table);\n        td.appendChild(form);\n        return td;\n    };\n    InlineEditRender.prototype.removeEventListener = function () {\n        //To destroy the renderer\n    };\n    InlineEditRender.prototype.appendChildren = function (form, data, isFrozen) {\n        var _this = this;\n        var dummyData = extend({}, data, { isAdd: !this.isEdit, isFrozen: isFrozen }, true);\n        var editTemplateID = this.parent.element.id + 'editSettingsTemplate';\n        if (this.parent.isReact && typeof (this.parent.editSettings.template) !== 'string') {\n            this.parent.getEditTemplate()(dummyData, this.parent, 'editSettingsTemplate', editTemplateID, null, null, form);\n            this.parent.renderTemplates();\n        }\n        else {\n            appendChildren(form, this.parent.getEditTemplate()(dummyData, this.parent, 'editSettingsTemplate', editTemplateID));\n        }\n        // eslint-disable-next-line\n        var setRules = function () {\n            var cols = _this.parent.getColumns();\n            for (var i = 0; i < cols.length; i++) {\n                if (cols[i].validationRules) {\n                    _this.parent.editModule.formObj.rules[cols[i].field] =\n                        cols[i].validationRules;\n                }\n            }\n        };\n    };\n    return InlineEditRender;\n}());\nexport { InlineEditRender };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}