{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable valid-jsdoc */\n\n/* eslint-disable jsdoc/require-param */\n\n/* eslint-disable @typescript-eslint/no-inferrable-types */\n\n\nimport { Property, Complex, ChildProperty } from '@syncfusion/ej2-base';\nimport { measureText, Rect, TextOption, Size, PathOption } from '@syncfusion/ej2-svg-base';\nimport { Font, Border, Margin, ContainerPadding } from '../model/base';\nimport { Theme } from '../model/theme';\nimport { subtractThickness, Thickness, drawSymbol, ChartLocation, titlePositionX, getTitle, textTrim, getTextAnchor } from '../utils/helper';\nimport { RectOption, textElement, stringToNumber } from '../utils/helper';\nimport { removeElement, showTooltip, getElement, appendChildElement } from '../utils/helper';\n/**\n * Configures the location for the legend.\n */\n\nvar Location =\n/** @class */\nfunction (_super) {\n  __extends(Location, _super);\n\n  function Location() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate([Property(0)], Location.prototype, \"x\", void 0);\n\n  __decorate([Property(0)], Location.prototype, \"y\", void 0);\n\n  return Location;\n}(ChildProperty);\n\nexport { Location };\n/**\n * Configures the legends in charts.\n */\n\nvar LegendSettings =\n/** @class */\nfunction (_super) {\n  __extends(LegendSettings, _super);\n\n  function LegendSettings() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate([Property(true)], LegendSettings.prototype, \"visible\", void 0);\n\n  __decorate([Property(null)], LegendSettings.prototype, \"height\", void 0);\n\n  __decorate([Property(null)], LegendSettings.prototype, \"width\", void 0);\n\n  __decorate([Complex({\n    x: 0,\n    y: 0\n  }, Location)], LegendSettings.prototype, \"location\", void 0);\n\n  __decorate([Property('Auto')], LegendSettings.prototype, \"position\", void 0);\n\n  __decorate([Property('Series')], LegendSettings.prototype, \"mode\", void 0);\n\n  __decorate([Property(8)], LegendSettings.prototype, \"padding\", void 0);\n\n  __decorate([Property('Center')], LegendSettings.prototype, \"alignment\", void 0);\n\n  __decorate([Complex(Theme.legendLabelFont, Font)], LegendSettings.prototype, \"textStyle\", void 0);\n\n  __decorate([Property(10)], LegendSettings.prototype, \"shapeHeight\", void 0);\n\n  __decorate([Property(10)], LegendSettings.prototype, \"shapeWidth\", void 0);\n\n  __decorate([Complex({}, Border)], LegendSettings.prototype, \"border\", void 0);\n\n  __decorate([Complex({\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0\n  }, Margin)], LegendSettings.prototype, \"margin\", void 0);\n\n  __decorate([Complex({\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0\n  }, ContainerPadding)], LegendSettings.prototype, \"containerPadding\", void 0);\n\n  __decorate([Property(5)], LegendSettings.prototype, \"shapePadding\", void 0);\n\n  __decorate([Property('transparent')], LegendSettings.prototype, \"background\", void 0);\n\n  __decorate([Property(1)], LegendSettings.prototype, \"opacity\", void 0);\n\n  __decorate([Property(true)], LegendSettings.prototype, \"toggleVisibility\", void 0);\n\n  __decorate([Property(null)], LegendSettings.prototype, \"description\", void 0);\n\n  __decorate([Property(3)], LegendSettings.prototype, \"tabIndex\", void 0);\n\n  __decorate([Property(null)], LegendSettings.prototype, \"title\", void 0);\n\n  __decorate([Complex(Theme.legendTitleFont, Font)], LegendSettings.prototype, \"titleStyle\", void 0);\n\n  __decorate([Property('Top')], LegendSettings.prototype, \"titlePosition\", void 0);\n\n  __decorate([Property(100)], LegendSettings.prototype, \"maximumTitleWidth\", void 0);\n\n  __decorate([Property(true)], LegendSettings.prototype, \"enablePages\", void 0);\n\n  __decorate([Property(false)], LegendSettings.prototype, \"isInversed\", void 0);\n\n  __decorate([Property(false)], LegendSettings.prototype, \"reverse\", void 0);\n\n  return LegendSettings;\n}(ChildProperty);\n\nexport { LegendSettings };\n/**\n * Legend base class for Chart and Accumulation chart.\n *\n * @private\n */\n\nvar BaseLegend =\n/** @class */\nfunction () {\n  /**\n   * Constructor for the dateTime module.\n   *\n   * @private\n   */\n  function BaseLegend(chart) {\n    this.pageXCollections = []; // pages of x locations\n\n    this.legendTitleCollections = [];\n    this.legendRegions = [];\n    this.pagingRegions = [];\n    this.chart = chart;\n    this.legend = chart.legendSettings;\n    this.legendID = chart.element.id + '_chart_legend';\n    this.isChartControl = chart.getModuleName() === 'chart';\n    this.isBulletChartControl = chart.getModuleName() === 'bulletChart';\n    this.isStockChartControl = chart.getModuleName() === 'stockChart';\n    this.bulletChart = this.chart;\n    this.fivePixel = 5;\n    this.rowCount = 0;\n    this.pageButtonSize = 8;\n    this.maxColumns = 0;\n    this.maxWidth = 0;\n    this.currentPage = 1;\n    this.backwardArrowOpacity = 0;\n    this.forwardArrowOpacity = 1;\n    this.arrowWidth = 2 * (this.fivePixel + this.pageButtonSize + this.fivePixel);\n    this.arrowHeight = this.arrowWidth;\n    this.isTop = false;\n    this.isTitle = false;\n    this.currentPageNumber = 1;\n  }\n  /**\n   * Calculate the bounds for the legends.\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  BaseLegend.prototype.calculateLegendBounds = function (rect, availableSize, maxLabelSize) {\n    var legend = this.legend;\n    var defaultValue = this.isBulletChartControl ? '40%' : '20%';\n    this.getPosition(legend.position, availableSize);\n    this.legendBounds = new Rect(rect.x, rect.y, 0, 0);\n    this.isVertical = this.position === 'Left' || this.position === 'Right';\n\n    if (this.isVertical) {\n      this.legendBounds.height = stringToNumber(legend.height, availableSize.height - (rect.y - this.chart.margin.top)) || rect.height;\n      this.legendBounds.width = stringToNumber(legend.width || defaultValue, availableSize.width);\n    } else {\n      this.legendBounds.width = stringToNumber(legend.width, availableSize.width) || rect.width;\n      this.legendBounds.height = stringToNumber(legend.height || defaultValue, availableSize.height);\n    }\n\n    this.library.getLegendBounds(availableSize, this.legendBounds, legend);\n\n    if (!this.isBulletChartControl) {\n      this.legendBounds.width += this.legend.containerPadding.left + this.legend.containerPadding.right;\n      this.legendBounds.height += this.legend.containerPadding.top + this.legend.containerPadding.bottom;\n    }\n\n    this.getLocation(this.position, legend.alignment, this.legendBounds, rect, availableSize, maxLabelSize);\n  };\n  /**\n   * To find legend position based on available size for chart and accumulation chart\n   *\n   * @param position\n   * @param availableSize\n   * @param position\n   * @param availableSize\n   * @returns {void}\n   */\n\n\n  BaseLegend.prototype.getPosition = function (position, availableSize) {\n    var chart = this.chart;\n    var accumulation = this.chart;\n\n    if (this.isChartControl || this.isBulletChartControl || this.isStockChartControl) {\n      this.position = position !== 'Auto' ? position : 'Bottom';\n    } else {\n      if (position === 'Auto' && ((chart || accumulation).visibleSeries && (chart || accumulation).visibleSeries[0].type === 'Funnel' || (chart || accumulation).visibleSeries[0].type === 'Pyramid')) {\n        position = 'Top';\n      }\n\n      this.position = position !== 'Auto' ? position : availableSize.width > availableSize.height ? 'Right' : 'Bottom';\n    }\n  };\n  /**\n   * To set bounds for chart and accumulation chart\n   *\n   * @param computedWidth\n   * @param computedHeight\n   * @param legend\n   * @param legendBounds\n   * @param computedWidth\n   * @param computedHeight\n   * @param legend\n   * @param legendBounds\n   * @param computedWidth\n   * @param computedHeight\n   * @param legend\n   * @param legendBounds\n   * @param computedWidth\n   * @param computedHeight\n   * @param legend\n   * @param legendBounds\n   * @returns {void}\n   */\n\n\n  BaseLegend.prototype.setBounds = function (computedWidth, computedHeight, legend, legendBounds) {\n    var titleHeight = legend.title && legend.titlePosition === 'Top' ? this.legendTitleSize.height + this.fivePixel : 0;\n\n    if (this.isVertical && this.isPaging && !legend.enablePages && !this.isBulletChartControl) {\n      titleHeight = legend.title && legend.titlePosition === 'Top' ? this.legendTitleSize.height + this.fivePixel : 0;\n      titleHeight += this.pageButtonSize + this.fivePixel;\n    }\n\n    computedWidth = Math.min(computedWidth, legendBounds.width);\n    computedHeight = Math.min(computedHeight, legendBounds.height);\n\n    if (legend.mode === 'Gradient') {\n      legendBounds.width = legend.width ? legendBounds.width : this.isVertical ? computedWidth : 0.75 * legendBounds.width;\n      legendBounds.height = legend.height ? legendBounds.height : this.isVertical ? 0.75 * legendBounds.height : computedHeight;\n    } else {\n      legendBounds.width = !legend.width ? computedWidth : legendBounds.width;\n      legendBounds.height = !legend.height ? computedHeight : legendBounds.height;\n    }\n\n    if (!this.isBulletChartControl) {\n      if (this.isTop && legend.titleStyle.textOverflow !== 'None') {\n        this.calculateLegendTitle(legend, legendBounds);\n        legendBounds.height += legend.titleStyle.textOverflow === 'Wrap' && this.legendTitleCollections.length > 1 ? this.legendTitleSize.height - this.legendTitleSize.height / this.legendTitleCollections.length : 0;\n      }\n    }\n\n    this.rowCount = Math.max(1, Math.ceil((legendBounds.height - legend.padding - titleHeight) / (this.maxItemHeight + legend.padding)));\n  };\n  /**\n   * To find legend location based on position, alignment for chart and accumulation chart\n   *\n   * @param position\n   * @param alignment\n   * @param legendBounds\n   * @param rect\n   * @param availableSize\n   * @param maxLabelSize\n   * @param position\n   * @param alignment\n   * @param legendBounds\n   * @param rect\n   * @param availableSize\n   * @param maxLabelSize\n   * @param position\n   * @param alignment\n   * @param legendBounds\n   * @param rect\n   * @param availableSize\n   * @param maxLabelSize\n   * @param position\n   * @param alignment\n   * @param legendBounds\n   * @param rect\n   * @param availableSize\n   * @param maxLabelSize\n   * @param position\n   * @param alignment\n   * @param legendBounds\n   * @param rect\n   * @param availableSize\n   * @param maxLabelSize\n   * @param position\n   * @param alignment\n   * @param legendBounds\n   * @param rect\n   * @param availableSize\n   * @param maxLabelSize\n   */\n\n\n  BaseLegend.prototype.getLocation = function (position, alignment, legendBounds, rect, availableSize, maxLabelSize) {\n    var padding = this.legend.border.width;\n    var isBulletChart = this.isBulletChartControl;\n    var bulletChart = this.bulletChart;\n    var labelIns = bulletChart.labelPosition === 'Inside';\n    var ticklIns = bulletChart.tickPosition === 'Inside';\n    var isVertical = bulletChart.orientation === 'Vertical';\n    var categoryFieldValue = isBulletChart && bulletChart.categoryField !== '' ? maxLabelSize.width + this.chart.border.width + padding * 3 : 0;\n    var marginBottom = this.chart.margin.bottom;\n    var legendHeight = legendBounds.height + padding + this.legend.margin.top + this.legend.margin.bottom;\n    var legendWidth = legendBounds.width + padding + this.legend.margin.left + this.legend.margin.right;\n\n    if (position === 'Bottom') {\n      legendBounds.x = this.alignLegend(legendBounds.x, availableSize.width, legendBounds.width, alignment);\n      legendBounds.y = rect.y + (rect.height - legendHeight) + padding + this.legend.margin.top;\n      legendBounds.y += isBulletChart && !bulletChart.opposedPosition && !labelIns && !ticklIns && !isVertical ? bulletChart.majorTickLines.height + marginBottom + this.legend.border.width + padding * 2 : isVertical && bulletChart.categoryField !== '' ? maxLabelSize.height + padding * 2 : 0;\n      subtractThickness(rect, new Thickness(0, 0, 0, legendHeight));\n    } else if (position === 'Top') {\n      legendBounds.x = this.alignLegend(legendBounds.x, availableSize.width, legendBounds.width, alignment);\n      legendBounds.y = rect.y + padding + this.legend.margin.top;\n      legendBounds.y -= isBulletChart && bulletChart.opposedPosition && !labelIns && !ticklIns && !isVertical ? bulletChart.majorTickLines.height + this.chart.margin.top : 0;\n      legendHeight -= isBulletChart ? -padding * 2 : 0;\n      subtractThickness(rect, new Thickness(0, 0, legendHeight, 0));\n    } else if (position === 'Right') {\n      legendBounds.x = rect.x + (rect.width - legendBounds.width) - this.legend.margin.right;\n      legendBounds.y = rect.y + this.alignLegend(0, availableSize.height - (rect.y + marginBottom), legendBounds.height, alignment);\n      legendWidth += isBulletChart && bulletChart.opposedPosition && !labelIns && !ticklIns && isVertical ? this.chart.margin.left + this.chart.margin.right + bulletChart.majorTickLines.height : 0;\n      subtractThickness(rect, new Thickness(0, legendWidth, 0, 0));\n    } else if (position === 'Left') {\n      legendBounds.x = legendBounds.x + this.legend.margin.left;\n      legendBounds.y = rect.y + this.alignLegend(0, availableSize.height - (rect.y + marginBottom), legendBounds.height, alignment);\n      legendWidth += isBulletChart && !bulletChart.opposedPosition && !labelIns && !ticklIns && isVertical ? legendBounds.x - this.chart.margin.left + padding + bulletChart.majorTickLines.height : bulletChart.orientation !== 'Vertical' && bulletChart.categoryField !== '' ? categoryFieldValue : 0;\n      subtractThickness(rect, new Thickness(legendWidth, 0, 0, 0));\n    } else {\n      legendBounds.x = this.legend.location.x;\n      legendBounds.y = this.legend.location.y;\n      subtractThickness(rect, new Thickness(0, 0, 0, 0));\n    }\n  };\n  /**\n   * To find legend alignment for chart and accumulation chart\n   *\n   * @param start\n   * @param size\n   * @param legendSize\n   * @param alignment\n   * @param start\n   * @param size\n   * @param legendSize\n   * @param alignment\n   * @param start\n   * @param size\n   * @param legendSize\n   * @param alignment\n   * @param start\n   * @param size\n   * @param legendSize\n   * @param alignment\n   */\n\n\n  BaseLegend.prototype.alignLegend = function (start, size, legendSize, alignment) {\n    switch (alignment) {\n      case 'Far':\n        start = size - legendSize - start;\n        break;\n\n      case 'Center':\n        start = (size - legendSize) / 2;\n        break;\n    }\n\n    return start;\n  };\n  /**\n   * Renders the legend.\n   *\n   * @param chart\n   * @param legend\n   * @param legendBounds\n   * @param redraw\n   * @param chart\n   * @param legend\n   * @param legendBounds\n   * @param redraw\n   * @param chart\n   * @param legend\n   * @param legendBounds\n   * @param redraw\n   * @param chart\n   * @param legend\n   * @param legendBounds\n   * @param redraw\n   * @returns {void}\n   * @private\n   */\n\n\n  BaseLegend.prototype.renderLegend = function (chart, legend, legendBounds, redraw) {\n    var titleHeight = 0;\n    var titlePlusArrowWidth = 0;\n    var pagingLegendBounds = new Rect(0, 0, 0, 0);\n    var requireLegendBounds = new Rect(0, 0, 0, 0);\n    var firstLegend = this.findFirstLegendPosition(this.legendCollections);\n    var padding = legend.padding;\n    var isPaging = legend.enablePages;\n    var titlePosition = legend.titlePosition;\n    var upArrowHeight = this.isPaging && !legend.enablePages && this.isVertical ? this.pageButtonSize : 0;\n    var legendGroup = chart.renderer.createGroup({\n      id: this.legendID + '_g'\n    });\n    var legendTranslateGroup = this.createLegendElements(chart, legendBounds, legendGroup, legend, this.legendID, redraw);\n    this.legendRegions = [];\n    var maxHeight = 0;\n\n    for (var i = 0; i < this.legendCollections.length; i++) {\n      if (this.legendCollections[i].text !== '') {\n        maxHeight = Math.max(this.legendCollections[i].textSize.height, maxHeight);\n        break;\n      } else {\n        continue;\n      }\n    }\n\n    this.maxItemHeight = Math.max(maxHeight, legend.shapeHeight); // For new legend navigation\n\n    if (!isPaging && this.isPaging && !this.isVertical) {\n      titlePlusArrowWidth = !this.isTitle ? 0 : titlePosition === 'Left' ? this.legendTitleSize.width : 0;\n      titlePlusArrowWidth += this.pageButtonSize + 2 * this.fivePixel;\n    } else if (this.isTitle && !this.isPaging && !this.isVertical) {\n      titlePlusArrowWidth = titlePosition === (!this.isRtlEnable ? 'Left' : 'Right') ? this.fivePixel + this.legendTitleSize.width : 0;\n    }\n\n    titleHeight = !this.isTitle ? 0 : this.isTop || this.isVertical ? this.legendTitleSize.height : 0;\n\n    if (chart.legendSettings.mode === 'Gradient' && this.legendCollections.length > 1) {\n      this.getLinearLegend(legendBounds, chart, legend, legendTranslateGroup);\n      this.totalPages = 1;\n    } else if (firstLegend !== this.legendCollections.length) {\n      var legendSeriesGroup = void 0; // legendItem group for each series group element\n\n      var count = 0;\n      var previousLegend = this.legendCollections[firstLegend]; // starting shape center x,y position && to resolve lint error used new line for declaration\n\n      var startPadding = this.isBulletChartControl ? 0 : titlePlusArrowWidth + padding + legend.shapeWidth / 2 + legend.containerPadding.left;\n      var x_Location = this.isBulletChartControl ? legendBounds.x + titlePlusArrowWidth + padding + legend.shapeWidth / 2 : !this.isRtlEnable ? legendBounds.x + startPadding : legendBounds.x + (this.chart.getModuleName() === 'accumulationchart' && this.isVertical ? this.maxWidth : legendBounds.width) - startPadding;\n      var start = new ChartLocation(x_Location, this.isBulletChartControl ? legendBounds.y + titleHeight + upArrowHeight + padding + this.maxItemHeight / 2 : legendBounds.y + titleHeight + upArrowHeight + padding + this.maxItemHeight / 2 + legend.containerPadding.top);\n      var anchor = chart.isRtlEnabled || chart.enableRtl ? 'end' : 'start';\n      var textOptions = new TextOption('', start.x, start.y, anchor);\n      var textPadding = legend.shapePadding + padding + legend.shapeWidth; //  initialization for totalPages legend click totalpage again calculate\n\n      this.totalPages = this.totalPages = this.isChartControl || this.isBulletChartControl || this.isStockChartControl ? this.totalPages : 0;\n      this.pageXCollections = [];\n      this.legendCollections[firstLegend].location = start;\n      var legendIndex = void 0;\n\n      if (!legend.enablePages && this.isPaging) {\n        var x = start.x - this.fivePixel;\n        var y = start.y - this.fivePixel;\n        var leftSpace = this.isTitle && !this.isVertical && titlePosition === 'Left' ? this.legendTitleSize.width + this.fivePixel : 0;\n        var bottomSapce = this.isVertical ? this.pageButtonSize + Math.abs(y - legendBounds.y) : 0;\n        var rightSpace = this.isTitle && !this.isVertical && titlePosition === 'Right' ? this.legendTitleSize.width + this.fivePixel : 0;\n        rightSpace += this.isVertical ? 0 : this.fivePixel + this.pageButtonSize + this.fivePixel;\n        pagingLegendBounds = new Rect(x, y, legendBounds.width - rightSpace - leftSpace, legendBounds.height - bottomSapce);\n        requireLegendBounds = pagingLegendBounds;\n      } else {\n        requireLegendBounds = legendBounds;\n      }\n\n      for (var _i = 0, _a = this.legendCollections; _i < _a.length; _i++) {\n        var legendOption = _a[_i];\n        legendIndex = !this.isReverse ? count : this.legendCollections.length - 1 - count;\n\n        if (this.chart.getModuleName() === 'accumulationchart') {\n          // eslint-disable-next-line max-len\n          legendOption.fill = (this.chart || this.chart || this.chart).visibleSeries[0].points[legendOption.pointIndex].color;\n        }\n\n        if (this.chart.getModuleName() === 'stockChart') {\n          legendOption.type = this.chart.visibleSeries[count].type;\n        }\n\n        this.accessbilityText = this.isBulletChartControl ? 'Legend of bullet chart' + '' + legendOption.text : 'Click to show or hide the ' + legendOption.text + ' series';\n\n        if (legendOption.render && legendOption.text !== '') {\n          legendSeriesGroup = chart.renderer.createGroup({\n            id: this.legendID + this.generateId(legendOption, '_g_', legendIndex)\n          });\n\n          if (legendSeriesGroup) {\n            legendSeriesGroup.setAttribute('tabindex', legend.tabIndex.toString());\n            legendSeriesGroup.setAttribute('aria-label', legend.description || this.accessbilityText);\n          }\n\n          this.library.getRenderPoint(legendOption, start, textPadding, previousLegend, requireLegendBounds, count, firstLegend);\n          this.renderSymbol(legendOption, legendSeriesGroup, legendIndex);\n          this.renderText(chart, legendOption, legendSeriesGroup, textOptions, count, legendIndex);\n\n          if (legendSeriesGroup) {\n            legendSeriesGroup.style.cssText = 'outline: none; cursor: ' + (!legend.toggleVisibility && (chart.selectionMode === 'None' || chart.highlightMode === 'None' || chart.selectionMode === 'None') || this.isBulletChartControl ? 'auto' : 'pointer');\n          }\n\n          if (legendTranslateGroup) {\n            legendTranslateGroup.appendChild(legendSeriesGroup);\n          }\n\n          previousLegend = legendOption;\n        }\n\n        count++;\n      }\n\n      if (this.isPaging) {\n        this.renderPagingElements(chart, legendBounds, textOptions, legendGroup);\n      } else {\n        this.totalPages = 1;\n      }\n    }\n\n    appendChildElement(chart.enableCanvas, chart.svgObject, legendGroup, redraw);\n  };\n  /** @private */\n\n\n  BaseLegend.prototype.getLinearLegend = function (legendBounds, chart, legend, legendTranslateGroup) {\n    var xmlns = 'http://www.w3.org/2000/svg';\n    var previousLegend = this.legendCollections[0];\n    var nextLegend = this.legendCollections[1];\n    var defElement = this.chart.renderer.createDefs();\n    var gradientLegendCount = 0;\n    var linerGradientEle = document.createElementNS(xmlns, 'linearGradient');\n    var opacity = 1;\n    var fillColors = [];\n    var numberItems = [];\n\n    if (legend.title) {\n      if (!this.isVertical) {\n        if (legend.titlePosition === 'Left') {\n          legendBounds.x += this.legendTitleSize.width;\n          legendBounds.width -= this.legendTitleSize.width;\n        } else if (legend.titlePosition === 'Right') {\n          legendBounds.width -= this.legendTitleSize.width;\n        } else if (legend.titlePosition === 'Top') {\n          legendBounds.y += this.legendTitleSize.height;\n          legendBounds.height -= this.legendTitleSize.height;\n        }\n      } else {\n        legendBounds.y += this.legendTitleSize.height;\n        legendBounds.height -= this.legendTitleSize.height;\n      }\n    }\n\n    for (var _i = 0, _a = this.chart.rangeColorSettings; _i < _a.length; _i++) {\n      var colorMap = _a[_i];\n\n      if (numberItems.indexOf(colorMap.start) < 0) {\n        numberItems.push(colorMap.start);\n      }\n\n      if (colorMap.colors.length > 2) {\n        var diffValue = colorMap.end - colorMap.start;\n        var colorsLength = colorMap.colors.length - 1;\n\n        if (diffValue > 0) {\n          diffValue = diffValue / colorsLength;\n\n          for (var index = 1; index < colorsLength; index++) {\n            var calculatedValue = colorMap.start + diffValue * index;\n            numberItems.push(calculatedValue);\n          }\n        } else {\n          for (var index = 1; index < colorsLength; index++) {\n            numberItems.push(colorMap.start);\n          }\n        }\n      }\n\n      if (numberItems.indexOf(colorMap.end) < 0) {\n        numberItems.push(colorMap.end);\n      }\n\n      for (var _b = 0, _c = colorMap.colors; _b < _c.length; _b++) {\n        var fillColor = _c[_b];\n\n        if (fillColors.indexOf(fillColor) < 0) {\n          fillColors.push(fillColor);\n        }\n      }\n\n      if (colorMap.colors.length > 0 && colorMap.colors.length < 2) {\n        fillColors.push(colorMap.colors[0]);\n      }\n    }\n\n    var x1 = this.isRtlEnable && !this.isVertical ? '100%' : '0%';\n    var x2 = this.isVertical || this.isRtlEnable ? '0%' : '100%';\n    var y2 = this.isVertical ? '100%' : '0%';\n    linerGradientEle.setAttribute('id', this.generateId(previousLegend, 'linearGradient', gradientLegendCount));\n    linerGradientEle.setAttribute('x1', x1);\n    linerGradientEle.setAttribute('y1', '0%');\n    linerGradientEle.setAttribute('x2', x2);\n    linerGradientEle.setAttribute('y2', y2);\n    var full = numberItems[numberItems.length - 1] - numberItems[0];\n\n    for (var b = 0; b < fillColors.length; b++) {\n      var offsetValue = numberItems[b] - numberItems[0];\n      offsetValue = offsetValue / full;\n      var stopEle = document.createElementNS(xmlns, 'stop');\n      stopEle.setAttribute('offset', offsetValue.toString());\n      stopEle.setAttribute('stop-color', fillColors[b]);\n      stopEle.setAttribute('stop-opacity', opacity.toString());\n      linerGradientEle.appendChild(stopEle);\n    }\n\n    var startLabel = previousLegend.text.toString();\n    var endLabel = nextLegend.text.toString();\n    var startTextSize = measureText(startLabel, legend.textStyle);\n    var endTextSize = measureText(endLabel, legend.textStyle);\n    var textWidth = startTextSize.width > endTextSize.width ? startTextSize.width : endTextSize.width;\n    var textHeight = startTextSize.height > endTextSize.height ? startTextSize.height : endTextSize.height;\n    var otherSpaces = 2 * textWidth + 4 * legend.padding;\n    var linearBarWidth = legendBounds.width;\n    var linearBarHeight = legendBounds.height;\n    var xValue = legendBounds.x + textWidth + 2 * legend.padding;\n    var yValue = legendBounds.y + legend.padding;\n    var startLabelY;\n    var endLabelY;\n    var startLabelX;\n    var endLabelX;\n\n    if (this.isVertical) {\n      otherSpaces = 2 * textHeight + 4 * legend.padding;\n      linearBarWidth = legendBounds.width - 2 * legend.padding;\n      linearBarHeight = legendBounds.height - otherSpaces;\n      xValue = legendBounds.x + legend.padding;\n      yValue = legendBounds.y + textHeight + 2 * legend.padding;\n      startLabelY = legendBounds.y + legend.padding + textHeight;\n      endLabelY = yValue + linearBarHeight + textHeight;\n      startLabelX = legendBounds.x + legendBounds.width * 0.5 - textWidth * 0.5;\n      endLabelX = startLabelX;\n\n      if (linearBarWidth > 30) {\n        var diffWidth = linearBarWidth - 30;\n        linearBarWidth = 30;\n        xValue = xValue + diffWidth / 2;\n      }\n    } else {\n      linearBarWidth = legendBounds.width - otherSpaces;\n      linearBarHeight = legendBounds.height - 2 * legend.padding;\n      startLabelX = legendBounds.x + (!this.isRtlEnable ? legend.padding + (textWidth - startTextSize.width) : linearBarWidth + 3 * legend.padding + textWidth);\n      endLabelX = legendBounds.x + (!this.isRtlEnable ? linearBarWidth + 3 * legend.padding + textWidth : legend.padding + (textWidth - endTextSize.width));\n      startLabelY = legendBounds.y + legendBounds.height * 0.5 + textHeight * 0.25;\n      endLabelY = startLabelY;\n\n      if (linearBarHeight > 30) {\n        var diffHeight = linearBarHeight - 30;\n        linearBarHeight = 30;\n        yValue = yValue + diffHeight / 2;\n      }\n    }\n\n    var anchor = chart.enableRtl ? 'end' : '';\n    var textOptions = new TextOption('', startLabelX, startLabelY, anchor, startLabel);\n    var hiddenColor = '#D3D3D3';\n    textOptions.id = this.legendID + this.generateId(previousLegend, '_text_', 1);\n    var fontcolor = previousLegend.visible ? legend.textStyle.color || chart.themeStyle.legendLabel : hiddenColor;\n    var isCanvas = this.isStockChartControl ? false : this.chart.enableCanvas;\n    textElement(chart.renderer, textOptions, legend.textStyle, fontcolor, legendTranslateGroup, false, false, false, false, // tslint:disable-next-line:align\n    null, this.currentPageNumber && isCanvas ? new Rect(0, -this.translatePage(null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) : null);\n    textOptions = new TextOption('', endLabelX, endLabelY, anchor, endLabel);\n    textOptions.id = this.legendID + this.generateId(previousLegend, '_text_', 2);\n    textElement(chart.renderer, textOptions, legend.textStyle, fontcolor, legendTranslateGroup, false, false, false, false, // tslint:disable-next-line:align\n    null, this.currentPageNumber && isCanvas ? new Rect(0, -this.translatePage(null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) : null);\n    var gradientLegend = chart.renderer.drawRectangle({\n      width: linearBarWidth,\n      height: linearBarHeight,\n      x: xValue,\n      y: yValue,\n      fill: 'url(#' + this.generateId(previousLegend, 'linearGradient', gradientLegendCount) + ')'\n    });\n    defElement.appendChild(linerGradientEle);\n    legendTranslateGroup.appendChild(defElement);\n    legendTranslateGroup.appendChild(gradientLegend);\n  };\n  /**\n   * To find first valid legend text index for chart and accumulation chart\n   *\n   * @param legendCollection\n   * @returns {number}\n   * @private\n   */\n\n\n  BaseLegend.prototype.findFirstLegendPosition = function (legendCollection) {\n    var count = 0;\n\n    for (var _i = 0, legendCollection_1 = legendCollection; _i < legendCollection_1.length; _i++) {\n      var legend = legendCollection_1[_i];\n\n      if (legend.render && legend.text !== '') {\n        break;\n      }\n\n      count++;\n    }\n\n    return count;\n  };\n  /**\n   * To get the legend title text width and height.\n   *\n   * @param legend\n   * @param legendBounds\n   */\n\n\n  BaseLegend.prototype.calculateLegendTitle = function (legend, legendBounds) {\n    if (legend.title) {\n      this.isTop = legend.titlePosition === 'Top';\n      var padding = legend.titleStyle.textOverflow === 'Trim' ? 2 * legend.padding : 0;\n\n      if (this.isTop || this.isVertical) {\n        this.legendTitleCollections = getTitle(legend.title, legend.titleStyle, legendBounds.width - padding);\n      } else {\n        this.legendTitleCollections[0] = textTrim(legend.maximumTitleWidth, legend.title, legend.titleStyle);\n      }\n\n      var text = this.isTop ? legend.title : this.legendTitleCollections[0];\n      this.legendTitleSize = measureText(text, legend.titleStyle);\n      this.legendTitleSize.height *= this.legendTitleCollections.length;\n    } else {\n      this.legendTitleSize = new Size(0, 0);\n    }\n  };\n  /**\n   * Render the legend title\n   *\n   * @param chart\n   * @param legend\n   * @param legendBounds\n   * @param legendGroup\n   */\n\n\n  BaseLegend.prototype.renderLegendTitle = function (chart, legend, legendBounds, legendGroup) {\n    var padding = legend.padding;\n    var alignment = legend.titleStyle.textAlignment;\n    this.isTop = legend.titlePosition === 'Top';\n    var anchor = getTextAnchor(legend.titleStyle.textAlignment, chart.enableRtl);\n    var x = titlePositionX(legendBounds, legend.titleStyle);\n    anchor = this.isTop || this.isVertical ? anchor : chart.enableRtl ? 'end' : '';\n    x = alignment === 'Near' ? x + padding : alignment === 'Far' ? x - padding : x;\n    x = this.isTop || this.isVertical ? x : legendBounds.x + (legend.titlePosition === 'Left' ? 5 : legendBounds.width - this.legendTitleSize.width - 5);\n    var topPadding = legendBounds.height / 2 + this.legendTitleSize.height / 4;\n    var y = legendBounds.y + (!this.isTop && !this.isVertical ? topPadding : this.legendTitleSize.height / this.legendTitleCollections.length);\n    var legendTitleTextOptions = new TextOption(this.legendID + '_title', x, y, anchor, this.legendTitleCollections);\n    textElement(chart.renderer, legendTitleTextOptions, legend.titleStyle, legend.titleStyle.color, legendGroup);\n  };\n  /**\n   * To create legend rendering elements for chart and accumulation chart\n   *\n   * @param chart\n   * @param legendBounds\n   * @param legendGroup\n   * @param legend\n   * @param id\n   * @param redraw\n   */\n\n\n  BaseLegend.prototype.createLegendElements = function (chart, legendBounds, legendGroup, legend, id, redraw) {\n    var padding = legend.padding;\n    var options = new RectOption(id + '_element', legend.background, legend.border, legend.opacity, legendBounds);\n    var legendItemsGroup = chart.renderer.createGroup({\n      id: id + '_collections'\n    });\n    var isCanvas = this.isStockChartControl ? false : chart.enableCanvas;\n    var clippath = chart.renderer.createClipPath({\n      id: id + '_clipPath'\n    });\n    options.width = this.isRtlEnable && this.chart.getModuleName() === 'accumulationchart' && this.isVertical ? this.maxWidth : legendBounds.width;\n\n    if (legendGroup) {\n      legendGroup.appendChild(chart.renderer.drawRectangle(options));\n    } else {\n      chart.renderer.drawRectangle(options);\n    }\n\n    if (legend.title) {\n      this.renderLegendTitle(chart, legend, legendBounds, legendGroup);\n    }\n\n    if (!isCanvas) {\n      legendGroup.appendChild(legendItemsGroup);\n    }\n\n    this.legendTranslateGroup = chart.renderer.createGroup({\n      id: id + '_translate_g'\n    });\n\n    if (!isCanvas) {\n      legendItemsGroup.appendChild(this.legendTranslateGroup);\n    }\n\n    options.y += padding + (this.isTop ? this.legendTitleSize.height : 0);\n    options.id += '_clipPath_rect';\n    options.width = !this.isChartControl && chart.getModuleName() !== 'bulletChart' && !this.isStockChartControl && this.isVertical ? this.maxWidth - padding + legend.containerPadding.left + legend.containerPadding.right : legendBounds.width;\n\n    if (!isCanvas) {\n      this.clipRect = chart.renderer.drawRectangle(options);\n      clippath.appendChild(this.clipRect);\n    } else {\n      this.pagingClipRect = options;\n    }\n\n    appendChildElement(isCanvas, chart.svgObject, clippath, redraw);\n\n    if (!isCanvas) {\n      legendItemsGroup.style.cssText = 'clip-path:url(#' + clippath.id + ')';\n    }\n\n    return this.legendTranslateGroup;\n  };\n  /**\n   * To render legend symbols for chart and accumulation chart\n   *\n   * @param legendOption\n   * @param group\n   * @param i\n   * @param legendOption\n   * @param group\n   * @param i\n   * @param legendOption\n   * @param group\n   * @param i\n   */\n\n\n  BaseLegend.prototype.renderSymbol = function (legendOption, group, legendIndex) {\n    var control = this.isBulletChartControl ? this.chart : null;\n    var symbolColor = legendOption.visible ? legendOption.fill : '#D3D3D3';\n    var isStrokeWidth = (this.chart.getModuleName() === 'chart' || this.chart.getModuleName() === 'stockChart') && legendOption.shape === 'SeriesType' && legendOption.type.toLowerCase().indexOf('line') > -1 && legendOption.type.toLowerCase().indexOf('area') === -1;\n    var isCustomBorder = (this.chart.getModuleName() === 'chart' || this.chart.getModuleName() === 'stockChart') && (legendOption.type === 'Scatter' || legendOption.type === 'Bubble');\n    var isCanvas = this.isStockChartControl ? false : this.chart.enableCanvas;\n    var borderColor;\n    var shape = legendOption.shape === 'SeriesType' ? legendOption.type : legendOption.shape;\n    var strokewidth = isStrokeWidth ? this.legend.mode === 'Series' ? this.chart.visibleSeries[legendIndex].width : this.chart.visibleSeries[0].width : this.isBulletChartControl && legendOption.shape === 'Multiply' ? 4 : 1;\n    var regionPadding;\n    shape = shape === 'Scatter' ? legendOption.markerShape : shape;\n\n    if (isCustomBorder && legendIndex < this.chart.visibleSeries.length) {\n      var seriesBorder = this.chart.visibleSeries[legendIndex].border;\n      borderColor = seriesBorder.color ? seriesBorder.color : symbolColor;\n      strokewidth = seriesBorder.width ? seriesBorder.width : 1;\n    }\n\n    var symbolOption = new PathOption(this.legendID + this.generateId(legendOption, '_shape_', legendIndex), symbolColor, strokewidth, isCustomBorder ? borderColor : symbolColor, 1, '', '');\n    var textSize = measureText(legendOption.text, this.legend.textStyle);\n    var x = this.legend.isInversed && !this.isRtlEnable ? legendOption.location.x + textSize.width + this.legend.shapePadding : legendOption.location.x;\n    var y = legendOption.location.y;\n\n    if (!isCanvas) {\n      group.appendChild(drawSymbol({\n        x: x,\n        y: y\n      }, shape, new Size(this.legend.shapeWidth, this.legend.shapeHeight), legendOption.url, symbolOption, this.accessbilityText, this.chart.renderer, null, this.isBulletChartControl, control));\n    } else {\n      regionPadding = -this.translatePage(null, this.currentPageNumber - 1, this.currentPageNumber);\n      drawSymbol({\n        x: x,\n        y: y\n      }, shape, new Size(this.legend.shapeWidth, this.legend.shapeHeight), '', symbolOption, this.accessbilityText, this.chart.renderer, this.currentPageNumber ? new Rect(0, regionPadding, 0, 0) : null, this.isBulletChartControl, control);\n      this.legendRegions.push({\n        rect: new Rect(legendOption.location.x, legendOption.location.y, this.legend.shapeWidth, this.legend.shapeHeight + regionPadding),\n        index: legendIndex\n      });\n    }\n\n    if (shape === 'Line' && legendOption.markerVisibility && legendOption.markerShape !== 'Image' || legendOption.type === 'Doughnut' && shape === 'Doughnut') {\n      symbolOption.id = this.legendID + this.generateId(legendOption, '_shape_marker_', legendIndex);\n      shape = legendOption.type === 'Doughnut' ? 'Circle' : legendOption.markerShape;\n      symbolOption.fill = legendOption.type === 'Doughnut' ? '#FFFFFF' : symbolOption.fill;\n\n      if (!isCanvas) {\n        // eslint-disable-next-line max-len\n        group.appendChild(drawSymbol({\n          x: x,\n          y: y\n        }, shape, new Size(this.legend.shapeWidth / 2, this.legend.shapeHeight / 2), '', symbolOption, this.accessbilityText, null, null, this.isBulletChartControl, control));\n      } else {\n        drawSymbol({\n          x: x,\n          y: y\n        }, shape, new Size(this.legend.shapeWidth / 2, this.legend.shapeHeight / 2), '', symbolOption, this.accessbilityText, this.chart.renderer, this.currentPageNumber ? new Rect(0, -this.translatePage(null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) : null, this.isBulletChartControl, control);\n      }\n    }\n  };\n  /**\n   * To render legend text for chart and accumulation chart\n   *\n   * @param chart\n   * @param legendOption\n   * @param group\n   * @param textOptions\n   * @param i\n   * @param chart\n   * @param legendOption\n   * @param group\n   * @param textOptions\n   * @param i\n   * @param chart\n   * @param legendOption\n   * @param group\n   * @param textOptions\n   * @param i\n   * @param chart\n   * @param legendOption\n   * @param group\n   * @param textOptions\n   * @param i\n   * @param chart\n   * @param legendOption\n   * @param group\n   * @param textOptions\n   * @param i\n   */\n\n\n  BaseLegend.prototype.renderText = function (chart, legendOption, group, textOptions, i, legendIndex) {\n    var legend = chart.legendSettings;\n    var hiddenColor = '#D3D3D3';\n    var fontcolor = legendOption.visible ? legend.textStyle.color || chart.themeStyle.legendLabel : hiddenColor;\n    var isCanvas = this.isStockChartControl ? false : this.chart.enableCanvas;\n    textOptions.id = this.legendID + this.generateId(legendOption, '_text_', legendIndex);\n    textOptions.text = legendOption.text;\n\n    if (legend.isInversed && !this.isRtlEnable) {\n      textOptions.x = legendOption.location.x - legend.shapeWidth / 2;\n    } else if (this.isRtlEnable) {\n      textOptions.x = legendOption.location.x - (measureText(legendOption.text, legend.textStyle).width + legend.shapeWidth / 2 + legend.shapePadding);\n    } else {\n      textOptions.x = legendOption.location.x + legend.shapeWidth / 2 + legend.shapePadding;\n    }\n\n    textOptions.y = legendOption.location.y + this.maxItemHeight / 4;\n    var element = textElement(chart.renderer, textOptions, legend.textStyle, fontcolor, group, false, false, false, false, null, this.currentPageNumber && isCanvas ? new Rect(0, -this.translatePage(null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) : null);\n\n    if (element) {\n      element.setAttribute('aria-label', legend.description || this.accessbilityText);\n    }\n\n    if (isCanvas) {\n      var textSize = measureText(textOptions.text, legend.textStyle);\n      this.legendRegions[i].rect.y = textOptions.y < this.legendRegions[i].rect.y ? textOptions.y : this.legendRegions[i].rect.y;\n      this.legendRegions[i].rect.width += textSize.width;\n      this.legendRegions[i].rect.height = textSize.height;\n      this.legendRegions[i].rect.y -= textSize.height * 0.5;\n      this.legendRegions[i].rect.x -= this.isRtlEnable ? this.legendRegions[i].rect.width : 0;\n    }\n  };\n  /**\n   * To render legend paging elements for chart and accumulation chart\n   *\n   * @param chart\n   * @param bounds\n   * @param textOption\n   * @param legendGroup\n   * @param chart\n   * @param bounds\n   * @param textOption\n   * @param legendGroup\n   * @param chart\n   * @param bounds\n   * @param textOption\n   * @param legendGroup\n   * @param chart\n   * @param bounds\n   * @param textOption\n   * @param legendGroup\n   */\n  // tslint:disable-next-line:max-func-body-length\n\n\n  BaseLegend.prototype.renderPagingElements = function (chart, bounds, textOption, legendGroup) {\n    var paginggroup = chart.renderer.createGroup({\n      id: this.legendID + '_navigation'\n    });\n    var isCanvas = this.isStockChartControl ? false : chart.enableCanvas;\n    var titleHeight = this.isBulletChartControl ? 0 : this.legendTitleSize.height;\n    var grayColor = this.chart.theme.indexOf('Dark') > -1 ? '#FFFFFF' : '#545454';\n    var legend = chart.legendSettings; // to solve parameter lint error, legend declaration is here\n\n    var padding = 8; // const padding for paging elements\n\n    var pageUp = this.legendID + (!this.isRtlEnable ? '_pageup' : '_pagedown');\n    var pageDown = this.legendID + (!this.isRtlEnable ? '_pagedown' : '_pageup');\n    var symbolOption = new PathOption(pageUp, 'transparent', 5, grayColor, 1, '', '');\n    var iconSize = this.pageButtonSize; // Page left arrow drawing calculation started here\n\n    var rowCount = !legend.enablePages && this.isPaging && !this.isVertical && !this.isBulletChartControl ? 1 : this.rowCount - 1;\n    var titleWidth = this.isTitle && legend.titlePosition === 'Left' ? this.legendTitleSize.width : 0;\n    this.pagingRegions = [];\n    this.backwardArrowOpacity = this.currentPage !== 1 ? 1 : 0;\n    this.forwardArrowOpacity = this.currentPage === this.totalPages ? 0 : 1;\n\n    if (!isCanvas) {\n      legendGroup.appendChild(paginggroup);\n    }\n\n    if (this.isChartControl || this.isBulletChartControl || this.isStockChartControl || !this.isVertical) {\n      this.totalPages = Math.ceil(this.totalPages / Math.max(1, this.rowCount - 1));\n    } else {\n      this.totalPages = Math.ceil(this.totalPages / this.maxColumns);\n    }\n\n    if (paginggroup) {\n      paginggroup.style.cursor = 'pointer';\n    }\n\n    this.clipPathHeight = rowCount * (this.maxItemHeight + legend.padding);\n\n    if (!isCanvas) {\n      this.clipRect.setAttribute('height', this.clipPathHeight.toString());\n    } else {\n      //paging clipRect only for canvas mode\n      this.pagingClipRect.height = this.legendBounds.height - this.clipPathHeight - (this.pagingClipRect.y - this.legendBounds.y) - legend.border.width;\n      this.pagingClipRect.y = this.pagingClipRect.y + this.clipPathHeight;\n      this.pagingClipRect.x += legend.border.width;\n      this.pagingClipRect.width -= legend.border.width + legend.border.width / 2;\n      this.chart.renderer.clearRect(new Rect(this.pagingClipRect.x, this.pagingClipRect.y, this.pagingClipRect.width, this.pagingClipRect.height));\n    }\n\n    var pageTextElement;\n    var x = bounds.x + iconSize / 2;\n    var y = bounds.y + this.clipPathHeight + (titleHeight + bounds.height - this.clipPathHeight) / 2;\n\n    if (this.isPaging && !legend.enablePages && !this.isVertical && !this.isBulletChartControl) {\n      x = bounds.x + this.fivePixel + this.pageButtonSize + titleWidth;\n      y = legend.title && this.isTop ? bounds.y + padding + titleHeight + iconSize / 1 + 0.5 : bounds.y + padding + iconSize + 0.5;\n    }\n\n    var size = measureText(this.totalPages + '/' + this.totalPages, legend.textStyle);\n    var translateX = this.isRtlEnable ? legend.border.width + iconSize / 2 : bounds.width - (2 * (iconSize + padding) + padding + size.width);\n\n    if (!isCanvas) {\n      if (this.isVertical && !legend.enablePages && !this.isBulletChartControl) {\n        x = bounds.x + bounds.width / 2;\n        y = bounds.y + iconSize / 2 + padding + titleHeight;\n        symbolOption.opacity = this.backwardArrowOpacity;\n        paginggroup.appendChild(drawSymbol({\n          x: x,\n          y: y\n        }, 'UpArrow', new Size(iconSize, iconSize), '', symbolOption, 'UpArrow'));\n      } else {\n        symbolOption.opacity = this.isBulletChartControl ? symbolOption.opacity : legend.enablePages ? 1 : !this.isRtlEnable ? this.backwardArrowOpacity : this.forwardArrowOpacity;\n        paginggroup.appendChild(drawSymbol({\n          x: x,\n          y: y\n        }, 'LeftArrow', new Size(iconSize, iconSize), '', symbolOption, 'LeftArrow'));\n      }\n    } else {\n      drawSymbol({\n        x: x,\n        y: y\n      }, 'LeftArrow', new Size(iconSize, iconSize), '', symbolOption, 'LeftArrow', this.chart.renderer, new Rect(translateX, 0, 0, 0));\n    }\n\n    this.pagingRegions.push(new Rect(!this.isRtlEnable ? x + bounds.width - (2 * (iconSize + padding) + padding + size.width) - iconSize * 0.5 : x, y - iconSize * 0.5, iconSize, iconSize)); // Page numbering rendering calculation started here\n\n    textOption.x = x + iconSize / 2 + padding;\n    textOption.y = y + size.height / 4;\n    textOption.id = this.legendID + '_pagenumber';\n    textOption.text = !this.isRtlEnable ? '1/' + this.totalPages : this.totalPages + '/1';\n    var color = this.chart.theme.indexOf('Dark') > -1 ? '#FFFFFF' : legend.textStyle.color;\n\n    if (isCanvas && this.totalNoOfPages) {\n      textOption.text = !this.isRtlEnable ? this.currentPageNumber + '/' + this.totalNoOfPages : this.totalNoOfPages + '/' + this.currentPageNumber;\n    }\n\n    if (legend.enablePages || this.isBulletChartControl) {\n      pageTextElement = textElement(chart.renderer, textOption, legend.textStyle, color, paginggroup, false, false, false, false, null, new Rect(translateX, 0, 0, 0));\n    } // Page right arrow rendering calculation started here\n\n\n    x = textOption.x + padding + iconSize / 2 + size.width;\n\n    if (this.isPaging && !legend.enablePages && !this.isVertical) {\n      x = bounds.x + bounds.width - this.fivePixel - this.pageButtonSize - (legend.title && legend.titlePosition === 'Right' ? this.legendTitleSize.width + this.fivePixel : 0);\n    }\n\n    symbolOption.id = pageDown;\n    symbolOption.opacity = !legend.enablePages ? !this.isRtlEnable ? this.forwardArrowOpacity : this.backwardArrowOpacity : 1;\n\n    if (!isCanvas) {\n      if (this.isVertical && !legend.enablePages && !this.isBulletChartControl) {\n        x = bounds.x + bounds.width / 2;\n        y = bounds.y + bounds.height - iconSize / 2 - padding;\n        paginggroup.appendChild(drawSymbol({\n          x: x,\n          y: y\n        }, 'DownArrow', new Size(iconSize, iconSize), '', symbolOption, 'DownArrow'));\n      } else {\n        paginggroup.appendChild(drawSymbol({\n          x: x,\n          y: y\n        }, 'RightArrow', new Size(iconSize, iconSize), '', symbolOption, 'RightArrow'));\n      }\n    } else {\n      drawSymbol({\n        x: x,\n        y: y\n      }, 'RightArrow', new Size(iconSize, iconSize), '', symbolOption, 'RightArrow', this.chart.renderer, new Rect(translateX, 0, 0, 0));\n    }\n\n    this.pagingRegions.push(new Rect(!this.isRtlEnable ? x + (bounds.width - (2 * (iconSize + padding) + padding + size.width) - iconSize * 0.5) : x, y - iconSize * 0.5, iconSize, iconSize));\n\n    if (!isCanvas && (legend.enablePages || this.isBulletChartControl)) {\n      //placing the navigation buttons and page numbering in legend right corner\n      paginggroup.setAttribute('transform', 'translate(' + translateX + ', ' + 0 + ')');\n    } else {\n      if (this.currentPageNumber === 1 && this.calTotalPage && (legend.enablePages || this.isBulletChartControl)) {\n        this.totalNoOfPages = this.totalPages;\n        this.calTotalPage = false;\n      }\n\n      if (!legend.enablePages && !this.isBulletChartControl) {\n        // For new legend page navigation\n        this.translatePage(null, this.currentPage - 1, this.currentPage, legend);\n      }\n    }\n\n    if (legend.enablePages || this.isBulletChartControl) {\n      this.translatePage(pageTextElement, this.currentPage - 1, this.currentPage, legend);\n    }\n  };\n  /**\n   * To translate legend pages for chart and accumulation chart\n   *\n   * @param pagingText\n   * @param page\n   * @param pageNumber\n   * @param legend\n   * @param pagingText\n   * @param page\n   * @param pageNumber\n   * @param legend\n   * @param pagingText\n   * @param page\n   * @param pageNumber\n   * @param legend\n   * @param pagingText\n   * @param page\n   * @param pageNumber\n   * @param legend\n   */\n\n\n  BaseLegend.prototype.translatePage = function (pagingText, page, pageNumber, legend) {\n    var size = this.clipPathHeight * page;\n    var translate = 'translate(0,-' + size + ')';\n\n    if (!this.isChartControl && !this.isBulletChartControl && !this.isStockChartControl && this.isVertical) {\n      var pageX = this.pageXCollections[page * this.maxColumns];\n      size = !this.isRtlEnable ? pageX - this.legendBounds.x : this.legendBounds.x + this.maxWidth - pageX;\n      size = size < 0 ? 0 : size; // to avoid small pixel variation\n\n      translate = (!this.isRtlEnable ? 'translate(-' : 'translate(') + size + ',0)';\n    }\n\n    if (!this.chart.enableCanvas) {\n      this.legendTranslateGroup.setAttribute('transform', translate);\n    }\n\n    if (!this.chart.enableCanvas && (legend.enablePages || this.isBulletChartControl)) {\n      pagingText.textContent = !this.isRtlEnable ? pageNumber + '/' + this.totalPages : this.totalPages + '/' + pageNumber;\n    }\n\n    this.currentPage = pageNumber;\n    return size;\n  };\n  /**\n   * To change legend pages for chart and accumulation chart\n   *\n   * @param event\n   * @param pageUp\n   * @param event\n   * @param pageUp\n   */\n\n\n  BaseLegend.prototype.changePage = function (event, pageUp) {\n    var legend = this.chart.legendSettings;\n    var backwardArrow = document.getElementById(this.legendID + '_pageup');\n    var forwardArrow = document.getElementById(this.legendID + '_pagedown');\n    var pageText = legend.enablePages || this.isBulletChartControl ? document.getElementById(this.legendID + '_pagenumber') : null;\n    var page = legend.enablePages || this.isBulletChartControl ? parseInt(pageText.textContent.split('/')[!this.isRtlEnable ? 0 : 1], 10) : this.currentPage;\n\n    if (pageUp && page > 1) {\n      this.translatePage(pageText, page - 2, page - 1, legend);\n    } else if (!pageUp && page < this.totalPages) {\n      this.translatePage(pageText, page, page + 1, legend);\n    }\n\n    if (this.isPaging && !legend.enablePages && !this.isBulletChartControl) {\n      // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n      this.currentPage === this.totalPages ? this.hideArrow(forwardArrow) : this.showArrow(forwardArrow); // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n\n      this.currentPage === 1 ? this.hideArrow(backwardArrow) : this.showArrow(backwardArrow);\n    }\n  };\n  /**\n   * To hide the backward and forward arrow\n   *\n   * @param arrowElement\n   */\n\n\n  BaseLegend.prototype.hideArrow = function (arrowElement) {\n    arrowElement.setAttribute('opacity', '0');\n  };\n  /**\n   * To show the  backward and forward arrow\n   *\n   * @param arrowElement\n   */\n\n\n  BaseLegend.prototype.showArrow = function (arrowElement) {\n    arrowElement.setAttribute('opacity', '1');\n  };\n  /**\n   * To find legend elements id based on chart or accumulation chart\n   *\n   * @param option\n   * @param prefix\n   * @param count\n   * @param option\n   * @param prefix\n   * @param count\n   * @param option\n   * @param prefix\n   * @param count\n   * @private\n   */\n\n\n  BaseLegend.prototype.generateId = function (option, prefix, count) {\n    if (this.isChartControl || this.isStockChartControl) {\n      return prefix + count;\n    } else {\n      return prefix + option.pointIndex;\n    }\n  };\n  /**\n   * To show or hide trimmed text tooltip for legend.\n   *\n   * @param event\n   * @returns {void}\n   * @private\n   */\n\n\n  BaseLegend.prototype.move = function (event) {\n    var _this = this;\n\n    var x = this.chart.mouseX;\n    var y = this.chart.mouseY;\n\n    if (event.target.textContent.indexOf('...') > -1) {\n      var targetId = event.target.id.split(this.legendID + '_text_');\n\n      if (targetId.length === 2) {\n        var index = parseInt(targetId[1], 10);\n        var element = this.chart.element;\n\n        if (!isNaN(index)) {\n          if (this.chart.isTouch) {\n            removeElement(this.chart.element.id + '_EJ2_Legend_Tooltip');\n          }\n\n          if (this.isChartControl) {\n            showTooltip(this.chart.series[index].name, x, y, element.offsetWidth, element.id + '_EJ2_Legend_Tooltip', getElement(this.chart.element.id + '_Secondary_Element'));\n          } else {\n            showTooltip(this.chart.visibleSeries[0].points[index].x.toString(), x + 10, y + 10, element.offsetWidth, element.id + '_EJ2_Legend_Tooltip', getElement(this.chart.element.id + '_Secondary_Element'));\n          }\n        }\n      }\n    } else {\n      removeElement(this.chart.element.id + '_EJ2_Legend_Tooltip');\n    }\n\n    if (this.chart.isTouch) {\n      clearTimeout(this.clearTooltip);\n      this.clearTooltip = +setTimeout(function () {\n        removeElement(_this.chart.element.id + '_EJ2_Legend_Tooltip');\n      }, 1000);\n    }\n  };\n\n  return BaseLegend;\n}();\n\nexport { BaseLegend };\n/**\n * Class for legend options\n *\n * @private\n */\n\nvar LegendOptions =\n/** @class */\nfunction () {\n  function LegendOptions(text, fill, shape, visible, type, url, markerShape, markerVisibility, pointIndex, seriesIndex) {\n    this.location = {\n      x: 0,\n      y: 0\n    };\n    this.text = text;\n    this.fill = fill;\n    this.shape = shape;\n    this.url = url;\n    this.visible = visible;\n    this.type = type;\n    this.markerVisibility = markerVisibility;\n    this.markerShape = markerShape;\n    this.pointIndex = pointIndex;\n    this.seriesIndex = seriesIndex;\n  }\n\n  return LegendOptions;\n}();\n\nexport { LegendOptions };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","Property","Complex","ChildProperty","measureText","Rect","TextOption","Size","PathOption","Font","Border","Margin","ContainerPadding","Theme","subtractThickness","Thickness","drawSymbol","ChartLocation","titlePositionX","getTitle","textTrim","getTextAnchor","RectOption","textElement","stringToNumber","removeElement","showTooltip","getElement","appendChildElement","Location","_super","apply","LegendSettings","x","y","legendLabelFont","left","right","top","bottom","legendTitleFont","BaseLegend","chart","pageXCollections","legendTitleCollections","legendRegions","pagingRegions","legend","legendSettings","legendID","element","id","isChartControl","getModuleName","isBulletChartControl","isStockChartControl","bulletChart","fivePixel","rowCount","pageButtonSize","maxColumns","maxWidth","currentPage","backwardArrowOpacity","forwardArrowOpacity","arrowWidth","arrowHeight","isTop","isTitle","currentPageNumber","calculateLegendBounds","rect","availableSize","maxLabelSize","defaultValue","getPosition","position","legendBounds","isVertical","height","margin","width","library","getLegendBounds","containerPadding","getLocation","alignment","accumulation","visibleSeries","type","setBounds","computedWidth","computedHeight","titleHeight","title","titlePosition","legendTitleSize","isPaging","enablePages","Math","min","mode","titleStyle","textOverflow","calculateLegendTitle","max","ceil","padding","maxItemHeight","border","isBulletChart","labelIns","labelPosition","ticklIns","tickPosition","orientation","categoryFieldValue","categoryField","marginBottom","legendHeight","legendWidth","alignLegend","opposedPosition","majorTickLines","location","start","size","legendSize","renderLegend","redraw","titlePlusArrowWidth","pagingLegendBounds","requireLegendBounds","firstLegend","findFirstLegendPosition","legendCollections","upArrowHeight","legendGroup","renderer","createGroup","legendTranslateGroup","createLegendElements","maxHeight","text","textSize","shapeHeight","isRtlEnable","getLinearLegend","totalPages","legendSeriesGroup","count","previousLegend","startPadding","shapeWidth","x_Location","anchor","isRtlEnabled","enableRtl","textOptions","textPadding","shapePadding","legendIndex","leftSpace","bottomSapce","abs","rightSpace","_i","_a","legendOption","isReverse","fill","points","pointIndex","color","accessbilityText","render","generateId","setAttribute","tabIndex","toString","description","getRenderPoint","renderSymbol","renderText","style","cssText","toggleVisibility","selectionMode","highlightMode","appendChild","renderPagingElements","enableCanvas","svgObject","xmlns","nextLegend","defElement","createDefs","gradientLegendCount","linerGradientEle","document","createElementNS","opacity","fillColors","numberItems","rangeColorSettings","colorMap","indexOf","push","colors","diffValue","end","colorsLength","index","calculatedValue","_b","_c","fillColor","x1","x2","y2","full","offsetValue","stopEle","startLabel","endLabel","startTextSize","textStyle","endTextSize","textWidth","textHeight","otherSpaces","linearBarWidth","linearBarHeight","xValue","yValue","startLabelY","endLabelY","startLabelX","endLabelX","diffWidth","diffHeight","hiddenColor","fontcolor","visible","themeStyle","legendLabel","isCanvas","translatePage","gradientLegend","drawRectangle","legendCollection","legendCollection_1","maximumTitleWidth","renderLegendTitle","textAlignment","topPadding","legendTitleTextOptions","options","background","legendItemsGroup","clippath","createClipPath","clipRect","pagingClipRect","group","control","symbolColor","isStrokeWidth","shape","toLowerCase","isCustomBorder","borderColor","strokewidth","regionPadding","markerShape","seriesBorder","symbolOption","isInversed","url","markerVisibility","bounds","textOption","paginggroup","grayColor","theme","pageUp","pageDown","iconSize","titleWidth","cursor","clipPathHeight","clearRect","pageTextElement","translateX","totalNoOfPages","calTotalPage","pagingText","page","pageNumber","translate","pageX","textContent","changePage","event","backwardArrow","getElementById","forwardArrow","pageText","parseInt","split","hideArrow","showArrow","arrowElement","option","prefix","move","_this","mouseX","mouseY","targetId","isNaN","isTouch","series","name","offsetWidth","clearTimeout","clearTooltip","setTimeout","LegendOptions","seriesIndex"],"sources":["C:/Users/shahj/OneDrive/Documents/GitHub/Multifunctional-React-Dashboard/node_modules/@syncfusion/ej2-charts/src/common/legend/legend.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable valid-jsdoc */\n/* eslint-disable jsdoc/require-param */\n/* eslint-disable @typescript-eslint/no-inferrable-types */\nimport { Property, Complex, ChildProperty } from '@syncfusion/ej2-base';\nimport { measureText, Rect, TextOption, Size, PathOption } from '@syncfusion/ej2-svg-base';\nimport { Font, Border, Margin, ContainerPadding } from '../model/base';\nimport { Theme } from '../model/theme';\nimport { subtractThickness, Thickness, drawSymbol, ChartLocation, titlePositionX, getTitle, textTrim, getTextAnchor } from '../utils/helper';\nimport { RectOption, textElement, stringToNumber } from '../utils/helper';\nimport { removeElement, showTooltip, getElement, appendChildElement } from '../utils/helper';\n/**\n * Configures the location for the legend.\n */\nvar Location = /** @class */ (function (_super) {\n    __extends(Location, _super);\n    function Location() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(0)\n    ], Location.prototype, \"x\", void 0);\n    __decorate([\n        Property(0)\n    ], Location.prototype, \"y\", void 0);\n    return Location;\n}(ChildProperty));\nexport { Location };\n/**\n * Configures the legends in charts.\n */\nvar LegendSettings = /** @class */ (function (_super) {\n    __extends(LegendSettings, _super);\n    function LegendSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], LegendSettings.prototype, \"visible\", void 0);\n    __decorate([\n        Property(null)\n    ], LegendSettings.prototype, \"height\", void 0);\n    __decorate([\n        Property(null)\n    ], LegendSettings.prototype, \"width\", void 0);\n    __decorate([\n        Complex({ x: 0, y: 0 }, Location)\n    ], LegendSettings.prototype, \"location\", void 0);\n    __decorate([\n        Property('Auto')\n    ], LegendSettings.prototype, \"position\", void 0);\n    __decorate([\n        Property('Series')\n    ], LegendSettings.prototype, \"mode\", void 0);\n    __decorate([\n        Property(8)\n    ], LegendSettings.prototype, \"padding\", void 0);\n    __decorate([\n        Property('Center')\n    ], LegendSettings.prototype, \"alignment\", void 0);\n    __decorate([\n        Complex(Theme.legendLabelFont, Font)\n    ], LegendSettings.prototype, \"textStyle\", void 0);\n    __decorate([\n        Property(10)\n    ], LegendSettings.prototype, \"shapeHeight\", void 0);\n    __decorate([\n        Property(10)\n    ], LegendSettings.prototype, \"shapeWidth\", void 0);\n    __decorate([\n        Complex({}, Border)\n    ], LegendSettings.prototype, \"border\", void 0);\n    __decorate([\n        Complex({ left: 0, right: 0, top: 0, bottom: 0 }, Margin)\n    ], LegendSettings.prototype, \"margin\", void 0);\n    __decorate([\n        Complex({ left: 0, right: 0, top: 0, bottom: 0 }, ContainerPadding)\n    ], LegendSettings.prototype, \"containerPadding\", void 0);\n    __decorate([\n        Property(5)\n    ], LegendSettings.prototype, \"shapePadding\", void 0);\n    __decorate([\n        Property('transparent')\n    ], LegendSettings.prototype, \"background\", void 0);\n    __decorate([\n        Property(1)\n    ], LegendSettings.prototype, \"opacity\", void 0);\n    __decorate([\n        Property(true)\n    ], LegendSettings.prototype, \"toggleVisibility\", void 0);\n    __decorate([\n        Property(null)\n    ], LegendSettings.prototype, \"description\", void 0);\n    __decorate([\n        Property(3)\n    ], LegendSettings.prototype, \"tabIndex\", void 0);\n    __decorate([\n        Property(null)\n    ], LegendSettings.prototype, \"title\", void 0);\n    __decorate([\n        Complex(Theme.legendTitleFont, Font)\n    ], LegendSettings.prototype, \"titleStyle\", void 0);\n    __decorate([\n        Property('Top')\n    ], LegendSettings.prototype, \"titlePosition\", void 0);\n    __decorate([\n        Property(100)\n    ], LegendSettings.prototype, \"maximumTitleWidth\", void 0);\n    __decorate([\n        Property(true)\n    ], LegendSettings.prototype, \"enablePages\", void 0);\n    __decorate([\n        Property(false)\n    ], LegendSettings.prototype, \"isInversed\", void 0);\n    __decorate([\n        Property(false)\n    ], LegendSettings.prototype, \"reverse\", void 0);\n    return LegendSettings;\n}(ChildProperty));\nexport { LegendSettings };\n/**\n * Legend base class for Chart and Accumulation chart.\n *\n * @private\n */\nvar BaseLegend = /** @class */ (function () {\n    /**\n     * Constructor for the dateTime module.\n     *\n     * @private\n     */\n    function BaseLegend(chart) {\n        this.pageXCollections = []; // pages of x locations\n        this.legendTitleCollections = [];\n        this.legendRegions = [];\n        this.pagingRegions = [];\n        this.chart = chart;\n        this.legend = chart.legendSettings;\n        this.legendID = chart.element.id + '_chart_legend';\n        this.isChartControl = (chart.getModuleName() === 'chart');\n        this.isBulletChartControl = (chart.getModuleName() === 'bulletChart');\n        this.isStockChartControl = (chart.getModuleName() === 'stockChart');\n        this.bulletChart = this.chart;\n        this.fivePixel = 5;\n        this.rowCount = 0;\n        this.pageButtonSize = 8;\n        this.maxColumns = 0;\n        this.maxWidth = 0;\n        this.currentPage = 1;\n        this.backwardArrowOpacity = 0;\n        this.forwardArrowOpacity = 1;\n        this.arrowWidth = (2 * (this.fivePixel + this.pageButtonSize + this.fivePixel));\n        this.arrowHeight = this.arrowWidth;\n        this.isTop = false;\n        this.isTitle = false;\n        this.currentPageNumber = 1;\n    }\n    /**\n     * Calculate the bounds for the legends.\n     *\n     * @returns {void}\n     * @private\n     */\n    BaseLegend.prototype.calculateLegendBounds = function (rect, availableSize, maxLabelSize) {\n        var legend = this.legend;\n        var defaultValue = (this.isBulletChartControl) ? '40%' : '20%';\n        this.getPosition(legend.position, availableSize);\n        this.legendBounds = new Rect(rect.x, rect.y, 0, 0);\n        this.isVertical = (this.position === 'Left' || this.position === 'Right');\n        if (this.isVertical) {\n            this.legendBounds.height = stringToNumber(legend.height, availableSize.height - (rect.y - this.chart.margin.top)) || rect.height;\n            this.legendBounds.width = stringToNumber(legend.width || defaultValue, availableSize.width);\n        }\n        else {\n            this.legendBounds.width = stringToNumber(legend.width, availableSize.width) || rect.width;\n            this.legendBounds.height = stringToNumber(legend.height || defaultValue, availableSize.height);\n        }\n        this.library.getLegendBounds(availableSize, this.legendBounds, legend);\n        if (!this.isBulletChartControl) {\n            this.legendBounds.width += (this.legend.containerPadding.left + this.legend.containerPadding.right);\n            this.legendBounds.height += (this.legend.containerPadding.top + this.legend.containerPadding.bottom);\n        }\n        this.getLocation(this.position, legend.alignment, this.legendBounds, rect, availableSize, maxLabelSize);\n    };\n    /**\n     * To find legend position based on available size for chart and accumulation chart\n     *\n     * @param position\n     * @param availableSize\n     * @param position\n     * @param availableSize\n     * @returns {void}\n     */\n    BaseLegend.prototype.getPosition = function (position, availableSize) {\n        var chart = this.chart;\n        var accumulation = this.chart;\n        if (this.isChartControl || this.isBulletChartControl || this.isStockChartControl) {\n            this.position = (position !== 'Auto') ? position : 'Bottom';\n        }\n        else {\n            if (position === 'Auto' && ((chart || accumulation).visibleSeries && (chart || accumulation).visibleSeries[0].type === 'Funnel' || (chart || accumulation).visibleSeries[0].type === 'Pyramid')) {\n                position = 'Top';\n            }\n            this.position = (position !== 'Auto') ? position :\n                (availableSize.width > availableSize.height ? 'Right' : 'Bottom');\n        }\n    };\n    /**\n     * To set bounds for chart and accumulation chart\n     *\n     * @param computedWidth\n     * @param computedHeight\n     * @param legend\n     * @param legendBounds\n     * @param computedWidth\n     * @param computedHeight\n     * @param legend\n     * @param legendBounds\n     * @param computedWidth\n     * @param computedHeight\n     * @param legend\n     * @param legendBounds\n     * @param computedWidth\n     * @param computedHeight\n     * @param legend\n     * @param legendBounds\n     * @returns {void}\n     */\n    BaseLegend.prototype.setBounds = function (computedWidth, computedHeight, legend, legendBounds) {\n        var titleHeight = legend.title && legend.titlePosition === 'Top' ? this.legendTitleSize.height + this.fivePixel : 0;\n        if (this.isVertical && this.isPaging && !legend.enablePages && !this.isBulletChartControl) {\n            titleHeight = legend.title && legend.titlePosition === 'Top' ? this.legendTitleSize.height + this.fivePixel : 0;\n            titleHeight += (this.pageButtonSize + this.fivePixel);\n        }\n        computedWidth = Math.min(computedWidth, legendBounds.width);\n        computedHeight = Math.min(computedHeight, legendBounds.height);\n        if (legend.mode === 'Gradient') {\n            legendBounds.width = legend.width ? legendBounds.width : this.isVertical ? computedWidth : 0.75 * legendBounds.width;\n            legendBounds.height = legend.height ? legendBounds.height : this.isVertical ? 0.75 * legendBounds.height : computedHeight;\n        }\n        else {\n            legendBounds.width = !legend.width ? computedWidth : legendBounds.width;\n            legendBounds.height = !legend.height ? computedHeight : legendBounds.height;\n        }\n        if (!this.isBulletChartControl) {\n            if (this.isTop && legend.titleStyle.textOverflow !== 'None') {\n                this.calculateLegendTitle(legend, legendBounds);\n                legendBounds.height += legend.titleStyle.textOverflow === 'Wrap' && this.legendTitleCollections.length > 1 ?\n                    (this.legendTitleSize.height - (this.legendTitleSize.height / this.legendTitleCollections.length)) : 0;\n            }\n        }\n        this.rowCount = Math.max(1, Math.ceil((legendBounds.height - legend.padding - titleHeight) /\n            (this.maxItemHeight + legend.padding)));\n    };\n    /**\n     * To find legend location based on position, alignment for chart and accumulation chart\n     *\n     * @param position\n     * @param alignment\n     * @param legendBounds\n     * @param rect\n     * @param availableSize\n     * @param maxLabelSize\n     * @param position\n     * @param alignment\n     * @param legendBounds\n     * @param rect\n     * @param availableSize\n     * @param maxLabelSize\n     * @param position\n     * @param alignment\n     * @param legendBounds\n     * @param rect\n     * @param availableSize\n     * @param maxLabelSize\n     * @param position\n     * @param alignment\n     * @param legendBounds\n     * @param rect\n     * @param availableSize\n     * @param maxLabelSize\n     * @param position\n     * @param alignment\n     * @param legendBounds\n     * @param rect\n     * @param availableSize\n     * @param maxLabelSize\n     * @param position\n     * @param alignment\n     * @param legendBounds\n     * @param rect\n     * @param availableSize\n     * @param maxLabelSize\n     */\n    BaseLegend.prototype.getLocation = function (position, alignment, legendBounds, rect, availableSize, maxLabelSize) {\n        var padding = this.legend.border.width;\n        var isBulletChart = this.isBulletChartControl;\n        var bulletChart = this.bulletChart;\n        var labelIns = bulletChart.labelPosition === 'Inside';\n        var ticklIns = bulletChart.tickPosition === 'Inside';\n        var isVertical = bulletChart.orientation === 'Vertical';\n        var categoryFieldValue = (isBulletChart && bulletChart.categoryField !== '') ?\n            maxLabelSize.width + this.chart.border.width + padding * 3 : 0;\n        var marginBottom = this.chart.margin.bottom;\n        var legendHeight = legendBounds.height + padding + this.legend.margin.top + this.legend.margin.bottom;\n        var legendWidth = legendBounds.width + padding + this.legend.margin.left + this.legend.margin.right;\n        if (position === 'Bottom') {\n            legendBounds.x = this.alignLegend(legendBounds.x, availableSize.width, legendBounds.width, alignment);\n            legendBounds.y = rect.y + (rect.height - legendHeight) + padding + this.legend.margin.top;\n            legendBounds.y += (isBulletChart && !bulletChart.opposedPosition && !labelIns && !ticklIns\n                && !isVertical) ? bulletChart.majorTickLines.height + marginBottom + this.legend.border.width + padding * 2 :\n                (isVertical && bulletChart.categoryField !== '') ? maxLabelSize.height + padding * 2 : 0;\n            subtractThickness(rect, new Thickness(0, 0, 0, legendHeight));\n        }\n        else if (position === 'Top') {\n            legendBounds.x = this.alignLegend(legendBounds.x, availableSize.width, legendBounds.width, alignment);\n            legendBounds.y = rect.y + padding + this.legend.margin.top;\n            legendBounds.y -= (isBulletChart && bulletChart.opposedPosition && !labelIns && !ticklIns &&\n                !isVertical) ? bulletChart.majorTickLines.height + this.chart.margin.top : 0;\n            legendHeight -= (isBulletChart) ? -padding * 2 : 0;\n            subtractThickness(rect, new Thickness(0, 0, legendHeight, 0));\n        }\n        else if (position === 'Right') {\n            legendBounds.x = rect.x + (rect.width - legendBounds.width) - this.legend.margin.right;\n            legendBounds.y = rect.y + this.alignLegend(0, availableSize.height - (rect.y + marginBottom), legendBounds.height, alignment);\n            legendWidth += (isBulletChart && bulletChart.opposedPosition && !labelIns && !ticklIns &&\n                isVertical) ? (this.chart.margin.left + this.chart.margin.right + bulletChart.majorTickLines.height) : 0;\n            subtractThickness(rect, new Thickness(0, legendWidth, 0, 0));\n        }\n        else if (position === 'Left') {\n            legendBounds.x = legendBounds.x + this.legend.margin.left;\n            legendBounds.y = rect.y + this.alignLegend(0, availableSize.height - (rect.y + marginBottom), legendBounds.height, alignment);\n            legendWidth += (isBulletChart && !bulletChart.opposedPosition && !labelIns && !ticklIns &&\n                isVertical) ? (legendBounds.x - this.chart.margin.left + padding + bulletChart.majorTickLines.height) :\n                (bulletChart.orientation !== 'Vertical' && bulletChart.categoryField !== '') ? categoryFieldValue : 0;\n            subtractThickness(rect, new Thickness(legendWidth, 0, 0, 0));\n        }\n        else {\n            legendBounds.x = this.legend.location.x;\n            legendBounds.y = this.legend.location.y;\n            subtractThickness(rect, new Thickness(0, 0, 0, 0));\n        }\n    };\n    /**\n     * To find legend alignment for chart and accumulation chart\n     *\n     * @param start\n     * @param size\n     * @param legendSize\n     * @param alignment\n     * @param start\n     * @param size\n     * @param legendSize\n     * @param alignment\n     * @param start\n     * @param size\n     * @param legendSize\n     * @param alignment\n     * @param start\n     * @param size\n     * @param legendSize\n     * @param alignment\n     */\n    BaseLegend.prototype.alignLegend = function (start, size, legendSize, alignment) {\n        switch (alignment) {\n            case 'Far':\n                start = (size - legendSize) - start;\n                break;\n            case 'Center':\n                start = ((size - legendSize) / 2);\n                break;\n        }\n        return start;\n    };\n    /**\n     * Renders the legend.\n     *\n     * @param chart\n     * @param legend\n     * @param legendBounds\n     * @param redraw\n     * @param chart\n     * @param legend\n     * @param legendBounds\n     * @param redraw\n     * @param chart\n     * @param legend\n     * @param legendBounds\n     * @param redraw\n     * @param chart\n     * @param legend\n     * @param legendBounds\n     * @param redraw\n     * @returns {void}\n     * @private\n     */\n    BaseLegend.prototype.renderLegend = function (chart, legend, legendBounds, redraw) {\n        var titleHeight = 0;\n        var titlePlusArrowWidth = 0;\n        var pagingLegendBounds = new Rect(0, 0, 0, 0);\n        var requireLegendBounds = new Rect(0, 0, 0, 0);\n        var firstLegend = this.findFirstLegendPosition(this.legendCollections);\n        var padding = legend.padding;\n        var isPaging = legend.enablePages;\n        var titlePosition = legend.titlePosition;\n        var upArrowHeight = this.isPaging && !legend.enablePages && this.isVertical ? this.pageButtonSize : 0;\n        var legendGroup = chart.renderer.createGroup({ id: this.legendID + '_g' });\n        var legendTranslateGroup = this.createLegendElements(chart, legendBounds, legendGroup, legend, this.legendID, redraw);\n        this.legendRegions = [];\n        var maxHeight = 0;\n        for (var i = 0; i < this.legendCollections.length; i++) {\n            if (this.legendCollections[i].text !== '') {\n                maxHeight = Math.max(this.legendCollections[i].textSize.height, maxHeight);\n                break;\n            }\n            else {\n                continue;\n            }\n        }\n        this.maxItemHeight = Math.max(maxHeight, legend.shapeHeight);\n        // For new legend navigation\n        if (!isPaging && this.isPaging && !this.isVertical) {\n            titlePlusArrowWidth = !this.isTitle ? 0 : titlePosition === 'Left' ? this.legendTitleSize.width : 0;\n            titlePlusArrowWidth += (this.pageButtonSize + (2 * this.fivePixel));\n        }\n        else if (this.isTitle && !this.isPaging && !this.isVertical) {\n            titlePlusArrowWidth = titlePosition === ((!this.isRtlEnable) ? 'Left' : 'Right') ? (this.fivePixel + this.legendTitleSize.width) : 0;\n        }\n        titleHeight = !this.isTitle ? 0 : (this.isTop || this.isVertical ? this.legendTitleSize.height : 0);\n        if (chart.legendSettings.mode === 'Gradient' && this.legendCollections.length > 1) {\n            this.getLinearLegend(legendBounds, chart, legend, legendTranslateGroup);\n            this.totalPages = 1;\n        }\n        else if (firstLegend !== this.legendCollections.length) {\n            var legendSeriesGroup = void 0; // legendItem group for each series group element\n            var count = 0;\n            var previousLegend = this.legendCollections[firstLegend];\n            // starting shape center x,y position && to resolve lint error used new line for declaration\n            var startPadding = this.isBulletChartControl ? 0 : titlePlusArrowWidth + padding + (legend.shapeWidth / 2) + legend.containerPadding.left;\n            var x_Location = this.isBulletChartControl ? legendBounds.x + titlePlusArrowWidth + padding + (legend.shapeWidth / 2) :\n                (!this.isRtlEnable) ? legendBounds.x + startPadding : legendBounds.x + ((this.chart.getModuleName() === 'accumulationchart' && this.isVertical) ? this.maxWidth : legendBounds.width) - startPadding;\n            var start = new ChartLocation(x_Location, this.isBulletChartControl ? legendBounds.y + titleHeight + upArrowHeight + padding + (this.maxItemHeight / 2) :\n                legendBounds.y + titleHeight + upArrowHeight + padding + (this.maxItemHeight / 2) + legend.containerPadding.top);\n            var anchor = chart.isRtlEnabled || chart.enableRtl ? 'end' : 'start';\n            var textOptions = new TextOption('', start.x, start.y, anchor);\n            var textPadding = legend.shapePadding + padding + legend.shapeWidth;\n            //  initialization for totalPages legend click totalpage again calculate\n            this.totalPages = this.totalPages = (this.isChartControl || this.isBulletChartControl || this.isStockChartControl) ? this.totalPages : 0;\n            this.pageXCollections = [];\n            this.legendCollections[firstLegend].location = start;\n            var legendIndex = void 0;\n            if (!legend.enablePages && this.isPaging) {\n                var x = start.x - this.fivePixel;\n                var y = start.y - this.fivePixel;\n                var leftSpace = this.isTitle && !this.isVertical && titlePosition === 'Left' ?\n                    this.legendTitleSize.width + this.fivePixel : 0;\n                var bottomSapce = this.isVertical ? (this.pageButtonSize) + Math.abs(y - legendBounds.y) : 0;\n                var rightSpace = this.isTitle && !this.isVertical && titlePosition === 'Right' ?\n                    this.legendTitleSize.width + this.fivePixel : 0;\n                rightSpace += this.isVertical ? 0 : (this.fivePixel + this.pageButtonSize + this.fivePixel);\n                pagingLegendBounds = new Rect(x, y, legendBounds.width - rightSpace - leftSpace, legendBounds.height - bottomSapce);\n                requireLegendBounds = pagingLegendBounds;\n            }\n            else {\n                requireLegendBounds = legendBounds;\n            }\n            for (var _i = 0, _a = this.legendCollections; _i < _a.length; _i++) {\n                var legendOption = _a[_i];\n                legendIndex = !this.isReverse ? count : (this.legendCollections.length - 1) - count;\n                if (this.chart.getModuleName() === 'accumulationchart') {\n                    // eslint-disable-next-line max-len\n                    legendOption.fill = (this.chart || this.chart || this.chart).visibleSeries[0].points[legendOption.pointIndex].color;\n                }\n                if (this.chart.getModuleName() === 'stockChart') {\n                    legendOption.type = this.chart.visibleSeries[count].type;\n                }\n                this.accessbilityText = (this.isBulletChartControl) ? 'Legend of bullet chart' + '' + legendOption.text\n                    : 'Click to show or hide the ' + legendOption.text + ' series';\n                if (legendOption.render && legendOption.text !== '') {\n                    legendSeriesGroup = chart.renderer.createGroup({\n                        id: this.legendID + this.generateId(legendOption, '_g_', legendIndex)\n                    });\n                    if (legendSeriesGroup) {\n                        legendSeriesGroup.setAttribute('tabindex', legend.tabIndex.toString());\n                        legendSeriesGroup.setAttribute('aria-label', legend.description ||\n                            this.accessbilityText);\n                    }\n                    this.library.getRenderPoint(legendOption, start, textPadding, previousLegend, requireLegendBounds, count, firstLegend);\n                    this.renderSymbol(legendOption, legendSeriesGroup, legendIndex);\n                    this.renderText(chart, legendOption, legendSeriesGroup, textOptions, count, legendIndex);\n                    if (legendSeriesGroup) {\n                        legendSeriesGroup.style.cssText = 'outline: none; cursor: ' + ((!legend.toggleVisibility && (chart.selectionMode === 'None' ||\n                            chart.highlightMode === 'None' ||\n                            chart.selectionMode === 'None') || this.isBulletChartControl) ? 'auto' : 'pointer');\n                    }\n                    if (legendTranslateGroup) {\n                        legendTranslateGroup.appendChild(legendSeriesGroup);\n                    }\n                    previousLegend = legendOption;\n                }\n                count++;\n            }\n            if (this.isPaging) {\n                this.renderPagingElements(chart, legendBounds, textOptions, legendGroup);\n            }\n            else {\n                this.totalPages = 1;\n            }\n        }\n        appendChildElement(chart.enableCanvas, chart.svgObject, legendGroup, redraw);\n    };\n    /** @private */\n    BaseLegend.prototype.getLinearLegend = function (legendBounds, chart, legend, legendTranslateGroup) {\n        var xmlns = 'http://www.w3.org/2000/svg';\n        var previousLegend = this.legendCollections[0];\n        var nextLegend = this.legendCollections[1];\n        var defElement = this.chart.renderer.createDefs();\n        var gradientLegendCount = 0;\n        var linerGradientEle = document.createElementNS(xmlns, 'linearGradient');\n        var opacity = 1;\n        var fillColors = [];\n        var numberItems = [];\n        if (legend.title) {\n            if (!this.isVertical) {\n                if (legend.titlePosition === 'Left') {\n                    legendBounds.x += this.legendTitleSize.width;\n                    legendBounds.width -= this.legendTitleSize.width;\n                }\n                else if (legend.titlePosition === 'Right') {\n                    legendBounds.width -= this.legendTitleSize.width;\n                }\n                else if (legend.titlePosition === 'Top') {\n                    legendBounds.y += this.legendTitleSize.height;\n                    legendBounds.height -= this.legendTitleSize.height;\n                }\n            }\n            else {\n                legendBounds.y += this.legendTitleSize.height;\n                legendBounds.height -= this.legendTitleSize.height;\n            }\n        }\n        for (var _i = 0, _a = this.chart.rangeColorSettings; _i < _a.length; _i++) {\n            var colorMap = _a[_i];\n            if (numberItems.indexOf(colorMap.start) < 0) {\n                numberItems.push(colorMap.start);\n            }\n            if (colorMap.colors.length > 2) {\n                var diffValue = (colorMap.end - colorMap.start);\n                var colorsLength = colorMap.colors.length - 1;\n                if (diffValue > 0) {\n                    diffValue = diffValue / colorsLength;\n                    for (var index = 1; index < colorsLength; index++) {\n                        var calculatedValue = colorMap.start + (diffValue * index);\n                        numberItems.push(calculatedValue);\n                    }\n                }\n                else {\n                    for (var index = 1; index < colorsLength; index++) {\n                        numberItems.push(colorMap.start);\n                    }\n                }\n            }\n            if (numberItems.indexOf(colorMap.end) < 0) {\n                numberItems.push(colorMap.end);\n            }\n            for (var _b = 0, _c = colorMap.colors; _b < _c.length; _b++) {\n                var fillColor = _c[_b];\n                if (fillColors.indexOf(fillColor) < 0) {\n                    fillColors.push(fillColor);\n                }\n            }\n            if (colorMap.colors.length > 0 && colorMap.colors.length < 2) {\n                fillColors.push(colorMap.colors[0]);\n            }\n        }\n        var x1 = this.isRtlEnable && !this.isVertical ? '100%' : '0%';\n        var x2 = this.isVertical || this.isRtlEnable ? '0%' : '100%';\n        var y2 = this.isVertical ? '100%' : '0%';\n        linerGradientEle.setAttribute('id', this.generateId(previousLegend, 'linearGradient', gradientLegendCount));\n        linerGradientEle.setAttribute('x1', x1);\n        linerGradientEle.setAttribute('y1', '0%');\n        linerGradientEle.setAttribute('x2', x2);\n        linerGradientEle.setAttribute('y2', y2);\n        var full = numberItems[numberItems.length - 1] - numberItems[0];\n        for (var b = 0; b < fillColors.length; b++) {\n            var offsetValue = numberItems[b] - numberItems[0];\n            offsetValue = offsetValue / full;\n            var stopEle = document.createElementNS(xmlns, 'stop');\n            stopEle.setAttribute('offset', offsetValue.toString());\n            stopEle.setAttribute('stop-color', fillColors[b]);\n            stopEle.setAttribute('stop-opacity', opacity.toString());\n            linerGradientEle.appendChild(stopEle);\n        }\n        var startLabel = previousLegend.text.toString();\n        var endLabel = nextLegend.text.toString();\n        var startTextSize = measureText(startLabel, legend.textStyle);\n        var endTextSize = measureText(endLabel, legend.textStyle);\n        var textWidth = startTextSize.width > endTextSize.width ? startTextSize.width : endTextSize.width;\n        var textHeight = startTextSize.height > endTextSize.height ? startTextSize.height : endTextSize.height;\n        var otherSpaces = (2 * textWidth) + (4 * legend.padding);\n        var linearBarWidth = legendBounds.width;\n        var linearBarHeight = legendBounds.height;\n        var xValue = legendBounds.x + textWidth + (2 * legend.padding);\n        var yValue = legendBounds.y + legend.padding;\n        var startLabelY;\n        var endLabelY;\n        var startLabelX;\n        var endLabelX;\n        if (this.isVertical) {\n            otherSpaces = (2 * textHeight) + (4 * legend.padding);\n            linearBarWidth = legendBounds.width - (2 * legend.padding);\n            linearBarHeight = legendBounds.height - otherSpaces;\n            xValue = legendBounds.x + legend.padding;\n            yValue = legendBounds.y + textHeight + (2 * legend.padding);\n            startLabelY = legendBounds.y + legend.padding + textHeight;\n            endLabelY = yValue + linearBarHeight + textHeight;\n            startLabelX = (legendBounds.x + (legendBounds.width * 0.5)) - (textWidth * 0.5);\n            endLabelX = startLabelX;\n            if (linearBarWidth > 30) {\n                var diffWidth = linearBarWidth - 30;\n                linearBarWidth = 30;\n                xValue = xValue + (diffWidth / 2);\n            }\n        }\n        else {\n            linearBarWidth = legendBounds.width - otherSpaces;\n            linearBarHeight = legendBounds.height - (2 * legend.padding);\n            startLabelX = legendBounds.x + ((!this.isRtlEnable) ? legend.padding + (textWidth - startTextSize.width) :\n                linearBarWidth + (3 * legend.padding) + textWidth);\n            endLabelX = legendBounds.x + ((!this.isRtlEnable) ? linearBarWidth + (3 * legend.padding) + textWidth :\n                legend.padding + (textWidth - endTextSize.width));\n            startLabelY = legendBounds.y + (legendBounds.height * 0.5) + (textHeight * 0.25);\n            endLabelY = startLabelY;\n            if (linearBarHeight > 30) {\n                var diffHeight = linearBarHeight - 30;\n                linearBarHeight = 30;\n                yValue = yValue + (diffHeight / 2);\n            }\n        }\n        var anchor = chart.enableRtl ? 'end' : '';\n        var textOptions = new TextOption('', startLabelX, startLabelY, anchor, startLabel);\n        var hiddenColor = '#D3D3D3';\n        textOptions.id = this.legendID + this.generateId(previousLegend, '_text_', 1);\n        var fontcolor = previousLegend.visible ? legend.textStyle.color || chart.themeStyle.legendLabel : hiddenColor;\n        var isCanvas = this.isStockChartControl ? false : this.chart.enableCanvas;\n        textElement(chart.renderer, textOptions, legend.textStyle, fontcolor, legendTranslateGroup, false, false, false, false, \n        // tslint:disable-next-line:align\n        null, this.currentPageNumber && isCanvas ?\n            new Rect(0, -this.translatePage(null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) : null);\n        textOptions = new TextOption('', endLabelX, endLabelY, anchor, endLabel);\n        textOptions.id = this.legendID + this.generateId(previousLegend, '_text_', 2);\n        textElement(chart.renderer, textOptions, legend.textStyle, fontcolor, legendTranslateGroup, false, false, false, false, \n        // tslint:disable-next-line:align\n        null, this.currentPageNumber && isCanvas ?\n            new Rect(0, -this.translatePage(null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) : null);\n        var gradientLegend = chart.renderer.drawRectangle({\n            width: linearBarWidth,\n            height: linearBarHeight,\n            x: xValue,\n            y: yValue,\n            fill: 'url(#' + this.generateId(previousLegend, 'linearGradient', gradientLegendCount) + ')'\n        });\n        defElement.appendChild(linerGradientEle);\n        legendTranslateGroup.appendChild(defElement);\n        legendTranslateGroup.appendChild(gradientLegend);\n    };\n    /**\n     * To find first valid legend text index for chart and accumulation chart\n     *\n     * @param legendCollection\n     * @returns {number}\n     * @private\n     */\n    BaseLegend.prototype.findFirstLegendPosition = function (legendCollection) {\n        var count = 0;\n        for (var _i = 0, legendCollection_1 = legendCollection; _i < legendCollection_1.length; _i++) {\n            var legend = legendCollection_1[_i];\n            if (legend.render && legend.text !== '') {\n                break;\n            }\n            count++;\n        }\n        return count;\n    };\n    /**\n     * To get the legend title text width and height.\n     *\n     * @param legend\n     * @param legendBounds\n     */\n    BaseLegend.prototype.calculateLegendTitle = function (legend, legendBounds) {\n        if (legend.title) {\n            this.isTop = legend.titlePosition === 'Top';\n            var padding = legend.titleStyle.textOverflow === 'Trim' ? 2 * legend.padding : 0;\n            if (this.isTop || this.isVertical) {\n                this.legendTitleCollections = getTitle(legend.title, legend.titleStyle, (legendBounds.width - padding));\n            }\n            else {\n                this.legendTitleCollections[0] = textTrim(legend.maximumTitleWidth, legend.title, legend.titleStyle);\n            }\n            var text = this.isTop ? legend.title : this.legendTitleCollections[0];\n            this.legendTitleSize = measureText(text, legend.titleStyle);\n            this.legendTitleSize.height *= this.legendTitleCollections.length;\n        }\n        else {\n            this.legendTitleSize = new Size(0, 0);\n        }\n    };\n    /**\n     * Render the legend title\n     *\n     * @param chart\n     * @param legend\n     * @param legendBounds\n     * @param legendGroup\n     */\n    BaseLegend.prototype.renderLegendTitle = function (chart, legend, legendBounds, legendGroup) {\n        var padding = legend.padding;\n        var alignment = legend.titleStyle.textAlignment;\n        this.isTop = legend.titlePosition === 'Top';\n        var anchor = getTextAnchor(legend.titleStyle.textAlignment, chart.enableRtl);\n        var x = titlePositionX(legendBounds, legend.titleStyle);\n        anchor = this.isTop || this.isVertical ? anchor : (chart.enableRtl) ? 'end' : '';\n        x = alignment === 'Near' ? (x + padding) : alignment === 'Far' ? (x - padding) : x;\n        x = (this.isTop || this.isVertical) ? x : ((legendBounds.x) + (legend.titlePosition === 'Left' ? 5 :\n            (legendBounds.width - this.legendTitleSize.width - 5)));\n        var topPadding = (legendBounds.height / 2) + (this.legendTitleSize.height / 4);\n        var y = legendBounds.y + (!this.isTop && !this.isVertical ? topPadding :\n            (this.legendTitleSize.height / this.legendTitleCollections.length));\n        var legendTitleTextOptions = new TextOption(this.legendID + '_title', x, y, anchor, this.legendTitleCollections);\n        textElement(chart.renderer, legendTitleTextOptions, legend.titleStyle, legend.titleStyle.color, legendGroup);\n    };\n    /**\n     * To create legend rendering elements for chart and accumulation chart\n     *\n     * @param chart\n     * @param legendBounds\n     * @param legendGroup\n     * @param legend\n     * @param id\n     * @param redraw\n     */\n    BaseLegend.prototype.createLegendElements = function (chart, legendBounds, legendGroup, legend, id, redraw) {\n        var padding = legend.padding;\n        var options = new RectOption(id + '_element', legend.background, legend.border, legend.opacity, legendBounds);\n        var legendItemsGroup = chart.renderer.createGroup({ id: id + '_collections' });\n        var isCanvas = this.isStockChartControl ? false : chart.enableCanvas;\n        var clippath = chart.renderer.createClipPath({ id: id + '_clipPath' });\n        options.width = (this.isRtlEnable && this.chart.getModuleName() === 'accumulationchart' && this.isVertical) ? this.maxWidth : legendBounds.width;\n        if (legendGroup) {\n            legendGroup.appendChild(chart.renderer.drawRectangle(options));\n        }\n        else {\n            chart.renderer.drawRectangle(options);\n        }\n        if (legend.title) {\n            this.renderLegendTitle(chart, legend, legendBounds, legendGroup);\n        }\n        if (!isCanvas) {\n            legendGroup.appendChild(legendItemsGroup);\n        }\n        this.legendTranslateGroup = chart.renderer.createGroup({ id: id + '_translate_g' });\n        if (!isCanvas) {\n            legendItemsGroup.appendChild(this.legendTranslateGroup);\n        }\n        options.y += padding + (this.isTop ? this.legendTitleSize.height : 0);\n        options.id += '_clipPath_rect';\n        options.width = ((!this.isChartControl && chart.getModuleName() !== 'bulletChart' && !this.isStockChartControl) && this.isVertical) ? this.maxWidth - padding + legend.containerPadding.left + legend.containerPadding.right\n            : legendBounds.width;\n        if (!isCanvas) {\n            this.clipRect = chart.renderer.drawRectangle(options);\n            clippath.appendChild(this.clipRect);\n        }\n        else {\n            this.pagingClipRect = options;\n        }\n        appendChildElement(isCanvas, chart.svgObject, clippath, redraw);\n        if (!isCanvas) {\n            legendItemsGroup.style.cssText = 'clip-path:url(#' + clippath.id + ')';\n        }\n        return this.legendTranslateGroup;\n    };\n    /**\n     * To render legend symbols for chart and accumulation chart\n     *\n     * @param legendOption\n     * @param group\n     * @param i\n     * @param legendOption\n     * @param group\n     * @param i\n     * @param legendOption\n     * @param group\n     * @param i\n     */\n    BaseLegend.prototype.renderSymbol = function (legendOption, group, legendIndex) {\n        var control = this.isBulletChartControl ? this.chart : null;\n        var symbolColor = legendOption.visible ? legendOption.fill : '#D3D3D3';\n        var isStrokeWidth = ((this.chart.getModuleName() === 'chart' || this.chart.getModuleName() === 'stockChart') && (legendOption.shape === 'SeriesType') &&\n            (legendOption.type.toLowerCase().indexOf('line') > -1) && (legendOption.type.toLowerCase().indexOf('area') === -1));\n        var isCustomBorder = (this.chart.getModuleName() === 'chart' || this.chart.getModuleName() === 'stockChart') &&\n            (legendOption.type === 'Scatter' || legendOption.type === 'Bubble');\n        var isCanvas = this.isStockChartControl ? false : this.chart.enableCanvas;\n        var borderColor;\n        var shape = (legendOption.shape === 'SeriesType') ? legendOption.type : legendOption.shape;\n        var strokewidth = isStrokeWidth ? (this.legend.mode === 'Series' ?\n            this.chart.visibleSeries[legendIndex].width : this.chart.visibleSeries[0].width) :\n            (this.isBulletChartControl && legendOption.shape === 'Multiply') ? 4 : 1;\n        var regionPadding;\n        shape = shape === 'Scatter' ? legendOption.markerShape : shape;\n        if (isCustomBorder && legendIndex < this.chart.visibleSeries.length) {\n            var seriesBorder = this.chart.visibleSeries[legendIndex].border;\n            borderColor = seriesBorder.color ? seriesBorder.color : symbolColor;\n            strokewidth = seriesBorder.width ? seriesBorder.width : 1;\n        }\n        var symbolOption = new PathOption(this.legendID + this.generateId(legendOption, '_shape_', legendIndex), symbolColor, strokewidth, (isCustomBorder ? borderColor : symbolColor), 1, '', '');\n        var textSize = measureText(legendOption.text, this.legend.textStyle);\n        var x = this.legend.isInversed && !this.isRtlEnable ? legendOption.location.x + textSize.width + this.legend.shapePadding\n            : legendOption.location.x;\n        var y = legendOption.location.y;\n        if (!isCanvas) {\n            group.appendChild(drawSymbol({ x: x, y: y }, shape, new Size(this.legend.shapeWidth, this.legend.shapeHeight), legendOption.url, symbolOption, this.accessbilityText, this.chart.renderer, null, this.isBulletChartControl, control));\n        }\n        else {\n            regionPadding = -this.translatePage(null, this.currentPageNumber - 1, this.currentPageNumber);\n            drawSymbol({ x: x, y: y }, shape, new Size(this.legend.shapeWidth, this.legend.shapeHeight), '', symbolOption, this.accessbilityText, this.chart.renderer, this.currentPageNumber ? new Rect(0, regionPadding, 0, 0) : null, this.isBulletChartControl, control);\n            this.legendRegions.push({\n                rect: new Rect(legendOption.location.x, legendOption.location.y, this.legend.shapeWidth, this.legend.shapeHeight + regionPadding), index: legendIndex\n            });\n        }\n        if (shape === 'Line' && legendOption.markerVisibility && legendOption.markerShape !== 'Image' ||\n            (legendOption.type === 'Doughnut' && shape === 'Doughnut')) {\n            symbolOption.id = this.legendID + this.generateId(legendOption, '_shape_marker_', legendIndex);\n            shape = legendOption.type === 'Doughnut' ? 'Circle' : legendOption.markerShape;\n            symbolOption.fill = legendOption.type === 'Doughnut' ? '#FFFFFF' : symbolOption.fill;\n            if (!isCanvas) {\n                // eslint-disable-next-line max-len\n                group.appendChild(drawSymbol({ x: x, y: y }, shape, new Size(this.legend.shapeWidth / 2, this.legend.shapeHeight / 2), '', symbolOption, this.accessbilityText, null, null, this.isBulletChartControl, control));\n            }\n            else {\n                drawSymbol({ x: x, y: y }, shape, new Size(this.legend.shapeWidth / 2, this.legend.shapeHeight / 2), '', symbolOption, this.accessbilityText, this.chart.renderer, this.currentPageNumber ?\n                    new Rect(0, -this.translatePage(null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) : null, this.isBulletChartControl, control);\n            }\n        }\n    };\n    /**\n     * To render legend text for chart and accumulation chart\n     *\n     * @param chart\n     * @param legendOption\n     * @param group\n     * @param textOptions\n     * @param i\n     * @param chart\n     * @param legendOption\n     * @param group\n     * @param textOptions\n     * @param i\n     * @param chart\n     * @param legendOption\n     * @param group\n     * @param textOptions\n     * @param i\n     * @param chart\n     * @param legendOption\n     * @param group\n     * @param textOptions\n     * @param i\n     * @param chart\n     * @param legendOption\n     * @param group\n     * @param textOptions\n     * @param i\n     */\n    BaseLegend.prototype.renderText = function (chart, legendOption, group, textOptions, i, legendIndex) {\n        var legend = chart.legendSettings;\n        var hiddenColor = '#D3D3D3';\n        var fontcolor = legendOption.visible ? legend.textStyle.color || chart.themeStyle.legendLabel : hiddenColor;\n        var isCanvas = this.isStockChartControl ? false : this.chart.enableCanvas;\n        textOptions.id = this.legendID + this.generateId(legendOption, '_text_', legendIndex);\n        textOptions.text = legendOption.text;\n        if (legend.isInversed && !this.isRtlEnable) {\n            textOptions.x = legendOption.location.x - (legend.shapeWidth / 2);\n        }\n        else if (this.isRtlEnable) {\n            textOptions.x = legendOption.location.x - (measureText(legendOption.text, legend.textStyle).width + legend.shapeWidth / 2 + legend.shapePadding);\n        }\n        else {\n            textOptions.x = legendOption.location.x + (legend.shapeWidth / 2) + legend.shapePadding;\n        }\n        textOptions.y = legendOption.location.y + this.maxItemHeight / 4;\n        var element = textElement(chart.renderer, textOptions, legend.textStyle, fontcolor, group, false, false, false, false, null, this.currentPageNumber && isCanvas ?\n            new Rect(0, -this.translatePage(null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) : null);\n        if (element) {\n            element.setAttribute('aria-label', legend.description || this.accessbilityText);\n        }\n        if (isCanvas) {\n            var textSize = measureText(textOptions.text, legend.textStyle);\n            this.legendRegions[i].rect.y = textOptions.y < this.legendRegions[i].rect.y ? textOptions.y : this.legendRegions[i].rect.y;\n            this.legendRegions[i].rect.width += textSize.width;\n            this.legendRegions[i].rect.height = textSize.height;\n            this.legendRegions[i].rect.y -= textSize.height * 0.5;\n            this.legendRegions[i].rect.x -= (this.isRtlEnable) ? this.legendRegions[i].rect.width : 0;\n        }\n    };\n    /**\n     * To render legend paging elements for chart and accumulation chart\n     *\n     * @param chart\n     * @param bounds\n     * @param textOption\n     * @param legendGroup\n     * @param chart\n     * @param bounds\n     * @param textOption\n     * @param legendGroup\n     * @param chart\n     * @param bounds\n     * @param textOption\n     * @param legendGroup\n     * @param chart\n     * @param bounds\n     * @param textOption\n     * @param legendGroup\n     */\n    // tslint:disable-next-line:max-func-body-length\n    BaseLegend.prototype.renderPagingElements = function (chart, bounds, textOption, legendGroup) {\n        var paginggroup = chart.renderer.createGroup({ id: this.legendID + '_navigation' });\n        var isCanvas = this.isStockChartControl ? false : chart.enableCanvas;\n        var titleHeight = this.isBulletChartControl ? 0 : this.legendTitleSize.height;\n        var grayColor = this.chart.theme.indexOf('Dark') > -1 ? '#FFFFFF' : '#545454';\n        var legend = chart.legendSettings; // to solve parameter lint error, legend declaration is here\n        var padding = 8; // const padding for paging elements\n        var pageUp = this.legendID + (!this.isRtlEnable ? '_pageup' : '_pagedown');\n        var pageDown = this.legendID + (!this.isRtlEnable ? '_pagedown' : '_pageup');\n        var symbolOption = new PathOption(pageUp, 'transparent', 5, grayColor, 1, '', '');\n        var iconSize = this.pageButtonSize;\n        // Page left arrow drawing calculation started here\n        var rowCount = !legend.enablePages && this.isPaging && !this.isVertical && !this.isBulletChartControl ? 1 :\n            (this.rowCount - 1);\n        var titleWidth = this.isTitle && legend.titlePosition === 'Left' ? this.legendTitleSize.width : 0;\n        this.pagingRegions = [];\n        this.backwardArrowOpacity = this.currentPage !== 1 ? 1 : 0;\n        this.forwardArrowOpacity = this.currentPage === this.totalPages ? 0 : 1;\n        if (!isCanvas) {\n            legendGroup.appendChild(paginggroup);\n        }\n        if (this.isChartControl || this.isBulletChartControl || this.isStockChartControl || !this.isVertical) {\n            this.totalPages = Math.ceil(this.totalPages / Math.max(1, this.rowCount - 1));\n        }\n        else {\n            this.totalPages = Math.ceil(this.totalPages / this.maxColumns);\n        }\n        if (paginggroup) {\n            paginggroup.style.cursor = 'pointer';\n        }\n        this.clipPathHeight = rowCount * (this.maxItemHeight + legend.padding);\n        if (!isCanvas) {\n            this.clipRect.setAttribute('height', this.clipPathHeight.toString());\n        }\n        else {\n            //paging clipRect only for canvas mode\n            this.pagingClipRect.height = this.legendBounds.height - this.clipPathHeight -\n                (this.pagingClipRect.y - this.legendBounds.y) - legend.border.width;\n            this.pagingClipRect.y = this.pagingClipRect.y + this.clipPathHeight;\n            this.pagingClipRect.x += legend.border.width;\n            this.pagingClipRect.width -= (legend.border.width + legend.border.width / 2);\n            this.chart.renderer.clearRect(new Rect(this.pagingClipRect.x, this.pagingClipRect.y, this.pagingClipRect.width, this.pagingClipRect.height));\n        }\n        var pageTextElement;\n        var x = (bounds.x + iconSize / 2);\n        var y = bounds.y + this.clipPathHeight + ((titleHeight + bounds.height - this.clipPathHeight) / 2);\n        if (this.isPaging && !legend.enablePages && !this.isVertical && !this.isBulletChartControl) {\n            x = (bounds.x + this.fivePixel + this.pageButtonSize + titleWidth);\n            y = legend.title && this.isTop ? (bounds.y + padding + titleHeight + (iconSize / 1) + 0.5) :\n                (bounds.y + padding + iconSize + 0.5);\n        }\n        var size = measureText(this.totalPages + '/' + this.totalPages, legend.textStyle);\n        var translateX = (this.isRtlEnable) ? legend.border.width + (iconSize / 2) : bounds.width - (2 * (iconSize + padding) + padding + size.width);\n        if (!isCanvas) {\n            if (this.isVertical && !legend.enablePages && !this.isBulletChartControl) {\n                x = bounds.x + (bounds.width / 2);\n                y = bounds.y + (iconSize / 2) + padding + titleHeight;\n                symbolOption.opacity = this.backwardArrowOpacity;\n                paginggroup.appendChild(drawSymbol({ x: x, y: y }, 'UpArrow', new Size(iconSize, iconSize), '', symbolOption, 'UpArrow'));\n            }\n            else {\n                symbolOption.opacity = this.isBulletChartControl ? symbolOption.opacity :\n                    (legend.enablePages ? 1 : !this.isRtlEnable ? this.backwardArrowOpacity : this.forwardArrowOpacity);\n                paginggroup.appendChild(drawSymbol({ x: x, y: y }, 'LeftArrow', new Size(iconSize, iconSize), '', symbolOption, 'LeftArrow'));\n            }\n        }\n        else {\n            drawSymbol({ x: x, y: y }, 'LeftArrow', new Size(iconSize, iconSize), '', symbolOption, 'LeftArrow', this.chart.renderer, new Rect(translateX, 0, 0, 0));\n        }\n        this.pagingRegions.push(new Rect(!this.isRtlEnable ? x + bounds.width - (2 * (iconSize + padding) + padding + size.width) - iconSize * 0.5 : x, y - iconSize * 0.5, iconSize, iconSize));\n        // Page numbering rendering calculation started here\n        textOption.x = x + (iconSize / 2) + padding;\n        textOption.y = y + (size.height / 4);\n        textOption.id = this.legendID + '_pagenumber';\n        textOption.text = !this.isRtlEnable ? '1/' + this.totalPages : this.totalPages + '/1';\n        var color = this.chart.theme.indexOf('Dark') > -1 ? '#FFFFFF' : legend.textStyle.color;\n        if (isCanvas && this.totalNoOfPages) {\n            textOption.text = !this.isRtlEnable ? this.currentPageNumber + '/' + this.totalNoOfPages : this.totalNoOfPages + '/' + this.currentPageNumber;\n        }\n        if (legend.enablePages || this.isBulletChartControl) {\n            pageTextElement = textElement(chart.renderer, textOption, legend.textStyle, color, paginggroup, false, false, false, false, null, new Rect(translateX, 0, 0, 0));\n        }\n        // Page right arrow rendering calculation started here\n        x = textOption.x + padding + (iconSize / 2) + size.width;\n        if (this.isPaging && !legend.enablePages && !this.isVertical) {\n            x = (bounds.x + bounds.width - this.fivePixel - this.pageButtonSize - (legend.title && legend.titlePosition === 'Right' ?\n                this.legendTitleSize.width + this.fivePixel : 0));\n        }\n        symbolOption.id = pageDown;\n        symbolOption.opacity = !legend.enablePages ? !this.isRtlEnable ? this.forwardArrowOpacity : this.backwardArrowOpacity : 1;\n        if (!isCanvas) {\n            if (this.isVertical && !legend.enablePages && !this.isBulletChartControl) {\n                x = bounds.x + (bounds.width / 2);\n                y = bounds.y + bounds.height - (iconSize / 2) - padding;\n                paginggroup.appendChild(drawSymbol({ x: x, y: y }, 'DownArrow', new Size(iconSize, iconSize), '', symbolOption, 'DownArrow'));\n            }\n            else {\n                paginggroup.appendChild(drawSymbol({ x: x, y: y }, 'RightArrow', new Size(iconSize, iconSize), '', symbolOption, 'RightArrow'));\n            }\n        }\n        else {\n            drawSymbol({ x: x, y: y }, 'RightArrow', new Size(iconSize, iconSize), '', symbolOption, 'RightArrow', this.chart.renderer, new Rect(translateX, 0, 0, 0));\n        }\n        this.pagingRegions.push(new Rect(!this.isRtlEnable ? x + (bounds.width - (2 * (iconSize + padding) + padding + size.width) - iconSize * 0.5) : x, y - iconSize * 0.5, iconSize, iconSize));\n        if (!isCanvas && (legend.enablePages || this.isBulletChartControl)) {\n            //placing the navigation buttons and page numbering in legend right corner\n            paginggroup.setAttribute('transform', 'translate(' + translateX + ', ' + 0 + ')');\n        }\n        else {\n            if (this.currentPageNumber === 1 && this.calTotalPage && (legend.enablePages || this.isBulletChartControl)) {\n                this.totalNoOfPages = this.totalPages;\n                this.calTotalPage = false;\n            }\n            if (!legend.enablePages && !this.isBulletChartControl) { // For new legend page navigation\n                this.translatePage(null, this.currentPage - 1, this.currentPage, legend);\n            }\n        }\n        if (legend.enablePages || this.isBulletChartControl) {\n            this.translatePage(pageTextElement, this.currentPage - 1, this.currentPage, legend);\n        }\n    };\n    /**\n     * To translate legend pages for chart and accumulation chart\n     *\n     * @param pagingText\n     * @param page\n     * @param pageNumber\n     * @param legend\n     * @param pagingText\n     * @param page\n     * @param pageNumber\n     * @param legend\n     * @param pagingText\n     * @param page\n     * @param pageNumber\n     * @param legend\n     * @param pagingText\n     * @param page\n     * @param pageNumber\n     * @param legend\n     */\n    BaseLegend.prototype.translatePage = function (pagingText, page, pageNumber, legend) {\n        var size = (this.clipPathHeight) * page;\n        var translate = 'translate(0,-' + size + ')';\n        if (!this.isChartControl && !this.isBulletChartControl && !this.isStockChartControl && this.isVertical) {\n            var pageX = this.pageXCollections[page * this.maxColumns];\n            size = (!this.isRtlEnable) ? pageX - this.legendBounds.x : (this.legendBounds.x + this.maxWidth) - pageX;\n            size = size < 0 ? 0 : size; // to avoid small pixel variation\n            translate = ((!this.isRtlEnable) ? 'translate(-' : 'translate(') + size + ',0)';\n        }\n        if (!this.chart.enableCanvas) {\n            this.legendTranslateGroup.setAttribute('transform', translate);\n        }\n        if (!this.chart.enableCanvas && (legend.enablePages || this.isBulletChartControl)) {\n            pagingText.textContent = !this.isRtlEnable ? (pageNumber) + '/' + this.totalPages : this.totalPages + '/' + pageNumber;\n        }\n        this.currentPage = pageNumber;\n        return size;\n    };\n    /**\n     * To change legend pages for chart and accumulation chart\n     *\n     * @param event\n     * @param pageUp\n     * @param event\n     * @param pageUp\n     */\n    BaseLegend.prototype.changePage = function (event, pageUp) {\n        var legend = this.chart.legendSettings;\n        var backwardArrow = document.getElementById(this.legendID + '_pageup');\n        var forwardArrow = document.getElementById(this.legendID + '_pagedown');\n        var pageText = (legend.enablePages || this.isBulletChartControl) ?\n            document.getElementById(this.legendID + '_pagenumber') : null;\n        var page = (legend.enablePages || this.isBulletChartControl) ? parseInt(pageText.textContent.split('/')[!this.isRtlEnable ? 0 : 1], 10) :\n            this.currentPage;\n        if (pageUp && page > 1) {\n            this.translatePage(pageText, (page - 2), (page - 1), legend);\n        }\n        else if (!pageUp && page < this.totalPages) {\n            this.translatePage(pageText, page, (page + 1), legend);\n        }\n        if (this.isPaging && !legend.enablePages && !this.isBulletChartControl) {\n            // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n            this.currentPage === this.totalPages ? this.hideArrow(forwardArrow) : this.showArrow(forwardArrow);\n            // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n            this.currentPage === 1 ? this.hideArrow(backwardArrow) : this.showArrow(backwardArrow);\n        }\n    };\n    /**\n     * To hide the backward and forward arrow\n     *\n     * @param arrowElement\n     */\n    BaseLegend.prototype.hideArrow = function (arrowElement) {\n        arrowElement.setAttribute('opacity', '0');\n    };\n    /**\n     * To show the  backward and forward arrow\n     *\n     * @param arrowElement\n     */\n    BaseLegend.prototype.showArrow = function (arrowElement) {\n        arrowElement.setAttribute('opacity', '1');\n    };\n    /**\n     * To find legend elements id based on chart or accumulation chart\n     *\n     * @param option\n     * @param prefix\n     * @param count\n     * @param option\n     * @param prefix\n     * @param count\n     * @param option\n     * @param prefix\n     * @param count\n     * @private\n     */\n    BaseLegend.prototype.generateId = function (option, prefix, count) {\n        if (this.isChartControl || this.isStockChartControl) {\n            return prefix + count;\n        }\n        else {\n            return prefix + option.pointIndex;\n        }\n    };\n    /**\n     * To show or hide trimmed text tooltip for legend.\n     *\n     * @param event\n     * @returns {void}\n     * @private\n     */\n    BaseLegend.prototype.move = function (event) {\n        var _this = this;\n        var x = this.chart.mouseX;\n        var y = this.chart.mouseY;\n        if (event.target.textContent.indexOf('...') > -1) {\n            var targetId = event.target.id.split(this.legendID + '_text_');\n            if (targetId.length === 2) {\n                var index = parseInt(targetId[1], 10);\n                var element = this.chart.element;\n                if (!isNaN(index)) {\n                    if (this.chart.isTouch) {\n                        removeElement(this.chart.element.id + '_EJ2_Legend_Tooltip');\n                    }\n                    if (this.isChartControl) {\n                        showTooltip(this.chart.series[index].name, x, y, element.offsetWidth, element.id + '_EJ2_Legend_Tooltip', getElement(this.chart.element.id + '_Secondary_Element'));\n                    }\n                    else {\n                        showTooltip(this.chart.visibleSeries[0].points[index].x.toString(), x + 10, y + 10, element.offsetWidth, element.id + '_EJ2_Legend_Tooltip', getElement(this.chart.element.id + '_Secondary_Element'));\n                    }\n                }\n            }\n        }\n        else {\n            removeElement(this.chart.element.id + '_EJ2_Legend_Tooltip');\n        }\n        if (this.chart.isTouch) {\n            clearTimeout(this.clearTooltip);\n            this.clearTooltip = +setTimeout(function () { removeElement(_this.chart.element.id + '_EJ2_Legend_Tooltip'); }, 1000);\n        }\n    };\n    return BaseLegend;\n}());\nexport { BaseLegend };\n/**\n * Class for legend options\n *\n * @private\n */\nvar LegendOptions = /** @class */ (function () {\n    function LegendOptions(text, fill, shape, visible, type, url, markerShape, markerVisibility, pointIndex, seriesIndex) {\n        this.location = { x: 0, y: 0 };\n        this.text = text;\n        this.fill = fill;\n        this.shape = shape;\n        this.url = url;\n        this.visible = visible;\n        this.type = type;\n        this.markerVisibility = markerVisibility;\n        this.markerShape = markerShape;\n        this.pointIndex = pointIndex;\n        this.seriesIndex = seriesIndex;\n    }\n    return LegendOptions;\n}());\nexport { LegendOptions };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}