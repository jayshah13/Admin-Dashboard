{"ast":null,"code":"import { addClass, Browser, removeClass, EventHandler, formatUnit, isNullOrUndefined, isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport { getInstance, closest, selectAll, detach } from '@syncfusion/ej2-base';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport * as classes from '../base/classes';\nimport * as events from '../base/constant';\nimport { CLS_TOOLBAR, CLS_DROPDOWN_BTN, CLS_RTE_ELEMENTS, CLS_TB_BTN, CLS_INLINE_DROPDOWN, CLS_COLOR_CONTENT, CLS_FONT_COLOR_DROPDOWN, CLS_BACKGROUND_COLOR_DROPDOWN, CLS_COLOR_PALETTE, CLS_FONT_COLOR_PICKER, CLS_BACKGROUND_COLOR_PICKER, CLS_CUSTOM_TILE, CLS_NOCOLOR_ITEM, CLS_BULLETFORMATLIST_TB_BTN, CLS_NUMBERFORMATLIST_TB_BTN, CLS_LIST_PRIMARY_CONTENT } from '../base/classes';\nimport { ColorPicker } from '@syncfusion/ej2-inputs';\nimport { hasClass } from '../base/util';\n/**\n * `Toolbar renderer` module is used to render toolbar in RichTextEditor.\n *\n * @hidden\n\n */\n\nvar ToolbarRenderer =\n/** @class */\nfunction () {\n  /**\n   * Constructor for toolbar renderer module\n   *\n   * @param {IRichTextEditor} parent - specifies the parent element.\n   */\n  function ToolbarRenderer(parent) {\n    this.parent = parent;\n    this.wireEvent();\n  }\n\n  ToolbarRenderer.prototype.wireEvent = function () {\n    this.parent.on(events.destroy, this.unWireEvent, this);\n  };\n\n  ToolbarRenderer.prototype.unWireEvent = function () {\n    this.parent.off(events.destroy, this.unWireEvent);\n\n    if (this.popupOverlay) {\n      EventHandler.remove(this.popupOverlay, 'click touchmove', this.onPopupOverlay);\n    }\n\n    this.removePopupContainer();\n  };\n\n  ToolbarRenderer.prototype.toolbarBeforeCreate = function (e) {\n    if (this.mode === 'Extended') {\n      e.enableCollision = false;\n    }\n  };\n\n  ToolbarRenderer.prototype.toolbarCreated = function () {\n    this.parent.notify(events.toolbarCreated, this);\n  };\n\n  ToolbarRenderer.prototype.toolbarClicked = function (args) {\n    if (!this.parent.enabled) {\n      return;\n    }\n\n    if (!this.parent.readonly || isNullOrUndefined(args.item)) {\n      this.parent.notify(events.toolbarClick, args);\n    }\n\n    this.parent.trigger('toolbarClick', args);\n  };\n\n  ToolbarRenderer.prototype.dropDownSelected = function (args) {\n    this.parent.notify(events.dropDownSelect, args);\n    this.onPopupOverlay();\n  };\n\n  ToolbarRenderer.prototype.beforeDropDownItemRender = function (args) {\n    if (this.parent.readonly || !this.parent.enabled) {\n      return;\n    }\n\n    this.parent.notify(events.beforeDropDownItemRender, args);\n  };\n\n  ToolbarRenderer.prototype.dropDownOpen = function (args) {\n    if (args.element.parentElement.getAttribute('id').indexOf('TableCell') > -1 && !isNOU(args.element.parentElement.querySelector('.e-cell-merge')) && (!isNOU(args.element.parentElement.querySelector('.e-cell-horizontal-split')) || !isNOU(args.element.parentElement.querySelector('.e-cell-vertical-split')))) {\n      var listEle = args.element.querySelectorAll('li');\n\n      if (this.parent.inputElement.querySelectorAll('.e-cell-select').length === 1) {\n        addClass([listEle[0]], 'e-disabled');\n        removeClass([listEle[1], listEle[2]], 'e-disabled');\n      } else if (this.parent.inputElement.querySelectorAll('.e-cell-select').length > 1) {\n        removeClass([listEle[0]], 'e-disabled');\n        addClass([listEle[1], listEle[2]], 'e-disabled');\n      }\n    }\n\n    if (Browser.isDevice && !args.element.parentElement.classList.contains(classes.CLS_QUICK_DROPDOWN)) {\n      this.popupModal(args.element.parentElement);\n    }\n\n    this.parent.notify(events.selectionSave, args);\n  };\n\n  ToolbarRenderer.prototype.dropDownClose = function (args) {\n    this.removePopupContainer();\n    this.parent.notify(events.selectionRestore, args);\n  };\n\n  ToolbarRenderer.prototype.removePopupContainer = function () {\n    if (Browser.isDevice && !isNullOrUndefined(this.popupContainer)) {\n      var popupEle = this.popupContainer.querySelector('.e-dropdown-popup.e-tbar-btn.e-control');\n\n      if (popupEle) {\n        this.popupContainer.parentNode.insertBefore(popupEle, this.popupContainer.nextSibling);\n        popupEle.style.removeProperty('position');\n        removeClass([popupEle], 'e-popup-modal');\n      }\n\n      detach(this.popupContainer);\n      this.popupContainer = undefined;\n    }\n  };\n  /**\n   * renderToolbar method\n   *\n   * @param {IToolbarOptions} args - specifies the arguments.\n   * @returns {void}\n   * @hidden\n    */\n\n\n  ToolbarRenderer.prototype.renderToolbar = function (args) {\n    this.setPanel(args.target);\n    this.renderPanel();\n    this.mode = args.overflowMode;\n    args.rteToolbarObj.toolbarObj = new Toolbar({\n      items: args.items,\n      width: '100%',\n      overflowMode: args.overflowMode,\n      beforeCreate: this.toolbarBeforeCreate.bind(this),\n      created: this.toolbarCreated.bind(this),\n      clicked: this.toolbarClicked.bind(this),\n      enablePersistence: args.enablePersistence,\n      enableRtl: args.enableRtl\n    });\n    args.rteToolbarObj.toolbarObj.isStringTemplate = true;\n    args.rteToolbarObj.toolbarObj.createElement = this.parent.createElement;\n    args.rteToolbarObj.toolbarObj.appendTo(args.target);\n  };\n  /**\n   * renderDropDownButton method\n   *\n   * @param {IDropDownModel} args - specifies the the arguments.\n   * @returns {void}\n   * @hidden\n    */\n\n\n  ToolbarRenderer.prototype.renderDropDownButton = function (args) {\n    var _this = this;\n\n    var css;\n    args.element.classList.add(CLS_DROPDOWN_BTN);\n    css = args.cssClass + ' ' + CLS_RTE_ELEMENTS + ' ' + CLS_TB_BTN;\n\n    if (this.parent.inlineMode.enable && Browser.isDevice) {\n      css = css + ' ' + CLS_INLINE_DROPDOWN;\n    } // eslint-disable-next-line\n\n\n    var proxy = this;\n    var dropDown = new DropDownButton({\n      items: args.items,\n      iconCss: args.iconCss,\n      cssClass: css,\n      content: args.content,\n      enablePersistence: this.parent.enablePersistence,\n      enableRtl: this.parent.enableRtl,\n      select: this.dropDownSelected.bind(this),\n      beforeOpen: function (args) {\n        if (proxy.parent.readonly || !proxy.parent.enabled) {\n          args.cancel = true;\n          return;\n        } // eslint-disable-next-line\n\n\n        for (var index = 0; index < args.element.childNodes.length; index++) {\n          var divNode = _this.parent.createElement('div');\n\n          divNode.innerHTML = dropDown.content.trim();\n\n          if (divNode.textContent.trim() !== '' && args.element.childNodes[index].textContent.trim() === divNode.textContent.trim()) {\n            if (!args.element.childNodes[index].classList.contains('e-active')) {\n              addClass([args.element.childNodes[index]], 'e-active');\n            }\n          } else {\n            removeClass([args.element.childNodes[index]], 'e-active');\n          }\n        }\n\n        proxy.parent.notify(events.beforeDropDownOpen, args);\n      },\n      close: this.dropDownClose.bind(this),\n      open: this.dropDownOpen.bind(this),\n      beforeItemRender: this.beforeDropDownItemRender.bind(this)\n    });\n    dropDown.isStringTemplate = true;\n    dropDown.createElement = proxy.parent.createElement;\n    dropDown.appendTo(args.element);\n    args.element.tabIndex = -1;\n    var popupElement = document.getElementById(dropDown.element.id + '-popup');\n    popupElement.setAttribute('aria-owns', this.parent.getID());\n    return dropDown;\n  };\n  /**\n   * renderListDropDown method\n   *\n   * @param {IDropDownModel} args - specifies the the arguments.\n   * @returns {void}\n   * @hidden\n    */\n\n\n  ToolbarRenderer.prototype.renderListDropDown = function (args) {\n    // eslint-disable-next-line\n    var proxy = this;\n    var css = CLS_RTE_ELEMENTS + ' ' + CLS_TB_BTN + (this.parent.inlineMode ? ' ' + CLS_INLINE_DROPDOWN : '');\n    css += ' ' + (args.itemName === 'NumberFormatList' ? CLS_NUMBERFORMATLIST_TB_BTN : CLS_BULLETFORMATLIST_TB_BTN);\n    var content = proxy.parent.createElement('span', {\n      className: CLS_LIST_PRIMARY_CONTENT\n    });\n    var inlineEle = proxy.parent.createElement('span', {\n      className: args.cssClass\n    });\n    content.appendChild(inlineEle);\n    var dropDown = new DropDownButton({\n      items: args.items,\n      cssClass: css,\n      content: args.content,\n      enablePersistence: this.parent.enablePersistence,\n      enableRtl: this.parent.enableRtl,\n      select: this.dropDownSelected.bind(this),\n      beforeOpen: function (args) {\n        if (proxy.parent.readonly || !proxy.parent.enabled) {\n          args.cancel = true;\n          return;\n        }\n\n        var element = args.event ? args.event.target : null;\n        proxy.currentElement = dropDown.element;\n        proxy.currentDropdown = dropDown;\n\n        if (args.event && args.event.type === 'click' && (element.classList.contains(CLS_LIST_PRIMARY_CONTENT) || element.parentElement.classList.contains(CLS_LIST_PRIMARY_CONTENT))) {\n          args.cancel = true;\n          return;\n        }\n\n        proxy.parent.notify(events.beforeDropDownOpen, args);\n      },\n      close: this.dropDownClose.bind(this),\n      open: this.dropDownOpen.bind(this),\n      beforeItemRender: this.beforeDropDownItemRender.bind(this)\n    });\n    dropDown.isStringTemplate = true;\n    dropDown.createElement = proxy.parent.createElement;\n    dropDown.appendTo(args.element);\n    args.element.tabIndex = -1;\n    var popupElement = document.getElementById(dropDown.element.id + '-popup');\n    popupElement.setAttribute('aria-owns', this.parent.getID());\n\n    if (args.element.childElementCount === 1) {\n      dropDown.element.insertBefore(content, dropDown.element.querySelector('.e-caret'));\n    }\n\n    args.element.tabIndex = -1;\n    dropDown.element.removeAttribute('type');\n    return dropDown;\n  }; // eslint-disable-next-line\n\n\n  ToolbarRenderer.prototype.onPopupOverlay = function (args) {\n    if (!isNullOrUndefined(this.popupOverlay)) {\n      closest(this.popupOverlay, '.e-popup-container').style.display = 'none';\n      this.popupOverlay.style.display = 'none';\n      removeClass([this.popupOverlay], 'e-popup-overlay');\n    }\n  };\n\n  ToolbarRenderer.prototype.setIsModel = function (element) {\n    if (!closest(element, '.e-popup-container')) {\n      this.popupContainer = this.parent.createElement('div', {\n        className: 'e-rte-modal-popup e-popup-container e-center'\n      });\n      element.parentNode.insertBefore(this.popupContainer, element);\n      this.popupContainer.appendChild(element);\n      this.popupContainer.style.zIndex = element.style.zIndex;\n      this.popupContainer.style.display = 'flex';\n      element.style.position = 'relative';\n      addClass([element], 'e-popup-modal');\n      this.popupOverlay = this.parent.createElement('div', {\n        className: 'e-popup-overlay'\n      }); // eslint-disable-next-line\n\n      this.popupOverlay.style.zIndex = (parseInt(element.style.zIndex, null) - 1).toString();\n      this.popupOverlay.style.display = 'block';\n      this.popupContainer.appendChild(this.popupOverlay);\n      EventHandler.add(this.popupOverlay, 'click touchmove', this.onPopupOverlay, this);\n    } else {\n      element.parentElement.style.display = 'flex';\n      this.popupOverlay = element.nextElementSibling;\n      this.popupOverlay.style.display = 'block';\n      addClass([this.popupOverlay], 'e-popup-overlay');\n    }\n  };\n\n  ToolbarRenderer.prototype.paletteSelection = function (dropDownArgs, currentElement) {\n    var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n    var colorbox = [].slice.call(selectAll('.e-tile', ele.parentElement));\n    removeClass(colorbox, 'e-selected');\n    var style = currentElement.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n    colorbox.filter(function (colorbox) {\n      if (colorbox.style.backgroundColor === style) {\n        addClass([colorbox], 'e-selected');\n      }\n    });\n  };\n  /**\n   * renderColorPickerDropDown method\n   *\n   * @param {IColorPickerModel} args - specifies the arguments.\n   * @param {string} item - specifies the item.\n   * @param {ColorPicker} colorPicker - specifies the colorpicker.\n   * @returns {void}\n   * @hidden\n    */\n\n\n  ToolbarRenderer.prototype.renderColorPickerDropDown = function (args, item, colorPicker, defaultColor) {\n    var _this = this; // eslint-disable-next-line\n\n\n    var proxy = this;\n    var css = CLS_RTE_ELEMENTS + ' ' + CLS_TB_BTN + (this.parent.inlineMode ? ' ' + CLS_INLINE_DROPDOWN : '');\n    css += ' ' + (item === 'backgroundcolor' ? CLS_BACKGROUND_COLOR_DROPDOWN : CLS_FONT_COLOR_DROPDOWN);\n    var content = proxy.parent.createElement('span', {\n      className: CLS_COLOR_CONTENT\n    });\n    var inlineEle = proxy.parent.createElement('span', {\n      className: args.cssClass\n    });\n    var range;\n    var initialBackgroundColor = isNullOrUndefined(defaultColor) ? proxy.parent.backgroundColor.default : defaultColor;\n    inlineEle.style.borderBottomColor = item === 'backgroundcolor' ? initialBackgroundColor : proxy.parent.fontColor.default;\n    content.appendChild(inlineEle);\n    var dropDown = new DropDownButton({\n      target: colorPicker.element.parentElement,\n      cssClass: css,\n      enablePersistence: this.parent.enablePersistence,\n      enableRtl: this.parent.enableRtl,\n      beforeOpen: function (dropDownArgs) {\n        if (proxy.parent.readonly || !proxy.parent.enabled) {\n          dropDownArgs.cancel = true;\n          return;\n        }\n\n        var element = dropDownArgs.event ? dropDownArgs.event.target : null;\n        proxy.currentElement = dropDown.element;\n        proxy.currentDropdown = dropDown;\n        proxy.paletteSelection(dropDownArgs, proxy.currentElement);\n\n        if (dropDownArgs.event && dropDownArgs.event.type === 'click' && (element.classList.contains(CLS_COLOR_CONTENT) || element.parentElement.classList.contains(CLS_COLOR_CONTENT))) {\n          dropDownArgs.cancel = true;\n          var colorpickerValue = element.classList.contains(CLS_RTE_ELEMENTS) ? element.style.borderBottomColor : element.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n          proxy.parent.notify(events.selectionRestore, {});\n          range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n          var parentNode = range.startContainer.parentNode;\n\n          if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' || closest(range.startContainer.parentNode, 'td,th') || proxy.parent.iframeSettings.enable && !hasClass(parentNode.ownerDocument.querySelector('body'), 'e-lib')) && range.collapsed && args.subCommand === 'BackgroundColor') {\n            proxy.parent.notify(events.tableColorPickerChanged, {\n              item: {\n                command: args.command,\n                subCommand: args.subCommand,\n                value: colorpickerValue\n              }\n            });\n          } else {\n            proxy.parent.notify(events.colorPickerChanged, {\n              item: {\n                command: args.command,\n                subCommand: args.subCommand,\n                value: colorpickerValue\n              }\n            });\n          }\n\n          return;\n        } else {\n          var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n          var inst = getInstance(ele, ColorPicker);\n          inst.showButtons = dropDownArgs.element.querySelector('.e-color-palette') ? false : true;\n          inst.dataBind();\n        }\n\n        dropDownArgs.element.onclick = function (args) {\n          if (args.target.classList.contains('e-cancel')) {\n            dropDown.toggle();\n          }\n        };\n      },\n      open: function (dropDownArgs) {\n        _this.setColorPickerContentWidth(colorPicker);\n\n        var focusEle;\n        var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n\n        if (dropDownArgs.element.querySelector('.e-color-palette')) {\n          focusEle = ele.parentElement.querySelector('.e-palette');\n        } else {\n          focusEle = ele.parentElement.querySelector('e-handler');\n        }\n\n        if (focusEle) {\n          focusEle.focus();\n        }\n\n        if (Browser.isDevice) {\n          _this.popupModal(dropDownArgs.element.parentElement);\n        }\n\n        _this.pickerRefresh(dropDownArgs);\n      },\n      beforeClose: function (dropDownArgs) {\n        var element = dropDownArgs.event ? dropDownArgs.event.target : null;\n\n        if (dropDownArgs.event && dropDownArgs.event.type === 'click' && (element.classList.contains(CLS_COLOR_CONTENT) || element.parentElement.classList.contains(CLS_COLOR_CONTENT))) {\n          var colorpickerValue = element.classList.contains(CLS_RTE_ELEMENTS) ? element.style.borderBottomColor : element.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n          range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n\n          if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' || closest(range.startContainer.parentNode, 'td,th')) && range.collapsed) {\n            proxy.parent.notify(events.tableColorPickerChanged, {\n              item: {\n                command: args.command,\n                subCommand: args.subCommand,\n                value: colorpickerValue\n              }\n            });\n          } else {\n            proxy.parent.notify(events.colorPickerChanged, {\n              item: {\n                command: args.command,\n                subCommand: args.subCommand,\n                value: colorpickerValue\n              }\n            });\n          }\n\n          return;\n        }\n      },\n      close: function (dropDownArgs) {\n        proxy.parent.notify(events.selectionRestore, {});\n        var dropElement = closest(dropDownArgs.element.parentElement, '.e-popup-container');\n\n        if (dropElement) {\n          dropElement.style.display = 'none';\n          dropElement.lastElementChild.style.display = 'none';\n          removeClass([dropElement.lastElementChild], 'e-popup-overlay');\n        }\n\n        if (Browser.isDevice && !isNullOrUndefined(dropElement)) {\n          var popupEle = dropElement.querySelector('.e-dropdown-popup.e-tbar-btn.e-control');\n\n          if (popupEle) {\n            dropElement.parentNode.insertBefore(popupEle, dropElement.nextSibling);\n            popupEle.style.removeProperty('position');\n            removeClass([popupEle], 'e-popup-modal');\n          }\n\n          detach(dropElement);\n          proxy.popupContainer = undefined;\n        }\n      }\n    });\n    dropDown.isStringTemplate = true;\n    dropDown.createElement = proxy.parent.createElement;\n    args.element.setAttribute('role', 'button');\n    dropDown.appendTo(args.element);\n    var popupElement = document.getElementById(dropDown.element.id + '-popup');\n    popupElement.setAttribute('aria-owns', this.parent.getID());\n    dropDown.element.insertBefore(content, dropDown.element.querySelector('.e-caret'));\n    args.element.tabIndex = -1;\n    dropDown.element.removeAttribute('type');\n\n    dropDown.element.onmousedown = function () {\n      proxy.parent.notify(events.selectionSave, {});\n    };\n\n    dropDown.element.onkeydown = function () {\n      proxy.parent.notify(events.selectionSave, {});\n    };\n\n    return dropDown;\n  };\n\n  ToolbarRenderer.prototype.pickerRefresh = function (dropDownArgs) {\n    if (this.parent.backgroundColor.mode === 'Picker') {\n      var popupElem = dropDownArgs.element.parentElement;\n      popupElem.style.width = (popupElem.offsetWidth + 5).toString() + 'px';\n      getInstance(popupElem, Popup).refreshPosition(popupElem);\n      popupElem.style.width = (popupElem.offsetWidth - 5).toString() + 'px';\n    }\n  };\n\n  ToolbarRenderer.prototype.popupModal = function (element) {\n    var popupInst = getInstance(element, Popup);\n    popupInst.relateTo = document.body;\n    popupInst.position = {\n      X: 0,\n      Y: 0\n    };\n    popupInst.targetType = 'container';\n    popupInst.collision = {\n      X: 'fit',\n      Y: 'fit'\n    };\n    popupInst.offsetY = 4;\n    popupInst.dataBind();\n    this.setIsModel(element);\n  };\n\n  ToolbarRenderer.prototype.setColorPickerContentWidth = function (colorPicker) {\n    var colorPickerContent = colorPicker.element.nextSibling;\n\n    if (colorPickerContent.style.width === '0px') {\n      colorPickerContent.style.width = '';\n      var borderWidth = parseInt(getComputedStyle(colorPickerContent).borderBottomWidth, 10);\n      colorPickerContent.style.width = formatUnit(colorPickerContent.children[0].offsetWidth + borderWidth + borderWidth);\n    }\n  };\n  /**\n   * renderColorPicker method\n   *\n   * @param {IColorPickerModel} args - specifies the arguments\n   * @param {string} item - specifies the string values\n   * @returns {void}\n   * @hidden\n    */\n\n\n  ToolbarRenderer.prototype.renderColorPicker = function (args, item) {\n    // eslint-disable-next-line\n    var proxy = this;\n    var value;\n    var colorPicker = new ColorPicker({\n      enablePersistence: this.parent.enablePersistence,\n      enableRtl: this.parent.enableRtl,\n      inline: true,\n      value: '#fff',\n      created: function () {\n        var value = item === 'backgroundcolor' ? proxy.parent.backgroundColor.default : proxy.parent.fontColor.default;\n        colorPicker.setProperties({\n          value: value\n        });\n      },\n      mode: item === 'backgroundcolor' ? proxy.parent.backgroundColor.mode : proxy.parent.fontColor.mode,\n      modeSwitcher: item === 'backgroundcolor' ? proxy.parent.backgroundColor.modeSwitcher : proxy.parent.fontColor.modeSwitcher,\n      beforeTileRender: function (args) {\n        args.element.classList.add(CLS_COLOR_PALETTE);\n        args.element.classList.add(CLS_CUSTOM_TILE);\n\n        if (args.value === '') {\n          args.element.classList.add(CLS_NOCOLOR_ITEM);\n        }\n      },\n      change: function (colorPickerArgs) {\n        var colorpickerValue = colorPickerArgs.currentValue.rgba;\n        colorPickerArgs.item = {\n          command: args.command,\n          subCommand: args.subCommand,\n          value: colorpickerValue\n        };\n        proxy.parent.notify(events.selectionRestore, {});\n        proxy.currentElement.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor = colorpickerValue;\n        var range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n\n        if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' || range.startContainer.nodeName === 'BODY' || closest(range.startContainer.parentNode, 'td,th')) && range.collapsed && args.subCommand === 'BackgroundColor') {\n          proxy.parent.notify(events.tableColorPickerChanged, colorPickerArgs);\n        } else {\n          proxy.parent.notify(events.colorPickerChanged, colorPickerArgs);\n        }\n\n        proxy.currentDropdown.toggle();\n      },\n      beforeModeSwitch: function (args) {\n        value = colorPicker.value;\n\n        if (value === '') {\n          colorPicker.setProperties({\n            value: args.mode === 'Picker' ? '#008000ff' : ''\n          }, true);\n        }\n\n        colorPicker.showButtons = args.mode === 'Palette' ? false : true;\n      }\n    });\n    colorPicker.isStringTemplate = true;\n    colorPicker.columns = item === 'backgroundcolor' ? this.parent.backgroundColor.columns : this.parent.fontColor.columns;\n    colorPicker.presetColors = item === 'backgroundcolor' ? this.parent.backgroundColor.colorCode : this.parent.fontColor.colorCode;\n    colorPicker.cssClass = item === 'backgroundcolor' ? CLS_BACKGROUND_COLOR_PICKER : CLS_FONT_COLOR_PICKER;\n    colorPicker.createElement = this.parent.createElement;\n    colorPicker.appendTo(document.getElementById(args.target));\n    return colorPicker;\n  };\n  /**\n   * The function is used to render Rich Text Editor toolbar\n   *\n   * @returns {void}\n   * @hidden\n    */\n\n\n  ToolbarRenderer.prototype.renderPanel = function () {\n    this.getPanel().classList.add(CLS_TOOLBAR);\n  };\n  /**\n   * Get the toolbar element of RichTextEditor\n   *\n   * @returns {Element} - specifies the element.\n   * @hidden\n    */\n\n\n  ToolbarRenderer.prototype.getPanel = function () {\n    return this.toolbarPanel;\n  };\n  /**\n   * Set the toolbar element of RichTextEditor\n   *\n   * @returns {void}\n   * @param  {Element} panel - specifies the element.\n   * @hidden\n    */\n\n\n  ToolbarRenderer.prototype.setPanel = function (panel) {\n    this.toolbarPanel = panel;\n  };\n\n  return ToolbarRenderer;\n}();\n\nexport { ToolbarRenderer };","map":{"version":3,"names":["addClass","Browser","removeClass","EventHandler","formatUnit","isNullOrUndefined","isNOU","getInstance","closest","selectAll","detach","Toolbar","DropDownButton","Popup","classes","events","CLS_TOOLBAR","CLS_DROPDOWN_BTN","CLS_RTE_ELEMENTS","CLS_TB_BTN","CLS_INLINE_DROPDOWN","CLS_COLOR_CONTENT","CLS_FONT_COLOR_DROPDOWN","CLS_BACKGROUND_COLOR_DROPDOWN","CLS_COLOR_PALETTE","CLS_FONT_COLOR_PICKER","CLS_BACKGROUND_COLOR_PICKER","CLS_CUSTOM_TILE","CLS_NOCOLOR_ITEM","CLS_BULLETFORMATLIST_TB_BTN","CLS_NUMBERFORMATLIST_TB_BTN","CLS_LIST_PRIMARY_CONTENT","ColorPicker","hasClass","ToolbarRenderer","parent","wireEvent","prototype","on","destroy","unWireEvent","off","popupOverlay","remove","onPopupOverlay","removePopupContainer","toolbarBeforeCreate","e","mode","enableCollision","toolbarCreated","notify","toolbarClicked","args","enabled","readonly","item","toolbarClick","trigger","dropDownSelected","dropDownSelect","beforeDropDownItemRender","dropDownOpen","element","parentElement","getAttribute","indexOf","querySelector","listEle","querySelectorAll","inputElement","length","isDevice","classList","contains","CLS_QUICK_DROPDOWN","popupModal","selectionSave","dropDownClose","selectionRestore","popupContainer","popupEle","parentNode","insertBefore","nextSibling","style","removeProperty","undefined","renderToolbar","setPanel","target","renderPanel","overflowMode","rteToolbarObj","toolbarObj","items","width","beforeCreate","bind","created","clicked","enablePersistence","enableRtl","isStringTemplate","createElement","appendTo","renderDropDownButton","_this","css","add","cssClass","inlineMode","enable","proxy","dropDown","iconCss","content","select","beforeOpen","cancel","index","childNodes","divNode","innerHTML","trim","textContent","beforeDropDownOpen","close","open","beforeItemRender","tabIndex","popupElement","document","getElementById","id","setAttribute","getID","renderListDropDown","itemName","className","inlineEle","appendChild","event","currentElement","currentDropdown","type","childElementCount","removeAttribute","display","setIsModel","zIndex","position","parseInt","toString","nextElementSibling","paletteSelection","dropDownArgs","ele","colorbox","slice","call","borderBottomColor","filter","backgroundColor","renderColorPickerDropDown","colorPicker","defaultColor","range","initialBackgroundColor","default","fontColor","colorpickerValue","formatter","editorManager","nodeSelection","getRange","contentModule","getDocument","startContainer","nodeName","iframeSettings","ownerDocument","collapsed","subCommand","tableColorPickerChanged","command","value","colorPickerChanged","inst","showButtons","dataBind","onclick","toggle","setColorPickerContentWidth","focusEle","focus","pickerRefresh","beforeClose","dropElement","lastElementChild","onmousedown","onkeydown","popupElem","offsetWidth","refreshPosition","popupInst","relateTo","body","X","Y","targetType","collision","offsetY","colorPickerContent","borderWidth","getComputedStyle","borderBottomWidth","children","renderColorPicker","inline","setProperties","modeSwitcher","beforeTileRender","change","colorPickerArgs","currentValue","rgba","beforeModeSwitch","columns","presetColors","colorCode","getPanel","toolbarPanel","panel"],"sources":["C:/Users/shahj/OneDrive/Documents/GitHub/Multifunctional-React-Dashboard/node_modules/@syncfusion/ej2-richtexteditor/src/rich-text-editor/renderer/toolbar-renderer.js"],"sourcesContent":["import { addClass, Browser, removeClass, EventHandler, formatUnit, isNullOrUndefined, isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport { getInstance, closest, selectAll, detach } from '@syncfusion/ej2-base';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport * as classes from '../base/classes';\nimport * as events from '../base/constant';\nimport { CLS_TOOLBAR, CLS_DROPDOWN_BTN, CLS_RTE_ELEMENTS, CLS_TB_BTN, CLS_INLINE_DROPDOWN, CLS_COLOR_CONTENT, CLS_FONT_COLOR_DROPDOWN, CLS_BACKGROUND_COLOR_DROPDOWN, CLS_COLOR_PALETTE, CLS_FONT_COLOR_PICKER, CLS_BACKGROUND_COLOR_PICKER, CLS_CUSTOM_TILE, CLS_NOCOLOR_ITEM, CLS_BULLETFORMATLIST_TB_BTN, CLS_NUMBERFORMATLIST_TB_BTN, CLS_LIST_PRIMARY_CONTENT } from '../base/classes';\nimport { ColorPicker } from '@syncfusion/ej2-inputs';\nimport { hasClass } from '../base/util';\n/**\n * `Toolbar renderer` module is used to render toolbar in RichTextEditor.\n *\n * @hidden\n\n */\nvar ToolbarRenderer = /** @class */ (function () {\n    /**\n     * Constructor for toolbar renderer module\n     *\n     * @param {IRichTextEditor} parent - specifies the parent element.\n     */\n    function ToolbarRenderer(parent) {\n        this.parent = parent;\n        this.wireEvent();\n    }\n    ToolbarRenderer.prototype.wireEvent = function () {\n        this.parent.on(events.destroy, this.unWireEvent, this);\n    };\n    ToolbarRenderer.prototype.unWireEvent = function () {\n        this.parent.off(events.destroy, this.unWireEvent);\n        if (this.popupOverlay) {\n            EventHandler.remove(this.popupOverlay, 'click touchmove', this.onPopupOverlay);\n        }\n        this.removePopupContainer();\n    };\n    ToolbarRenderer.prototype.toolbarBeforeCreate = function (e) {\n        if (this.mode === 'Extended') {\n            e.enableCollision = false;\n        }\n    };\n    ToolbarRenderer.prototype.toolbarCreated = function () {\n        this.parent.notify(events.toolbarCreated, this);\n    };\n    ToolbarRenderer.prototype.toolbarClicked = function (args) {\n        if (!this.parent.enabled) {\n            return;\n        }\n        if (!this.parent.readonly || isNullOrUndefined(args.item)) {\n            this.parent.notify(events.toolbarClick, args);\n        }\n        this.parent.trigger('toolbarClick', args);\n    };\n    ToolbarRenderer.prototype.dropDownSelected = function (args) {\n        this.parent.notify(events.dropDownSelect, args);\n        this.onPopupOverlay();\n    };\n    ToolbarRenderer.prototype.beforeDropDownItemRender = function (args) {\n        if (this.parent.readonly || !this.parent.enabled) {\n            return;\n        }\n        this.parent.notify(events.beforeDropDownItemRender, args);\n    };\n    ToolbarRenderer.prototype.dropDownOpen = function (args) {\n        if (args.element.parentElement.getAttribute('id').indexOf('TableCell') > -1 && !isNOU(args.element.parentElement.querySelector('.e-cell-merge')) &&\n            (!isNOU(args.element.parentElement.querySelector('.e-cell-horizontal-split')) || !isNOU(args.element.parentElement.querySelector('.e-cell-vertical-split')))) {\n            var listEle = args.element.querySelectorAll('li');\n            if (this.parent.inputElement.querySelectorAll('.e-cell-select').length === 1) {\n                addClass([listEle[0]], 'e-disabled');\n                removeClass([listEle[1], listEle[2]], 'e-disabled');\n            }\n            else if (this.parent.inputElement.querySelectorAll('.e-cell-select').length > 1) {\n                removeClass([listEle[0]], 'e-disabled');\n                addClass([listEle[1], listEle[2]], 'e-disabled');\n            }\n        }\n        if (Browser.isDevice && !args.element.parentElement.classList.contains(classes.CLS_QUICK_DROPDOWN)) {\n            this.popupModal(args.element.parentElement);\n        }\n        this.parent.notify(events.selectionSave, args);\n    };\n    ToolbarRenderer.prototype.dropDownClose = function (args) {\n        this.removePopupContainer();\n        this.parent.notify(events.selectionRestore, args);\n    };\n    ToolbarRenderer.prototype.removePopupContainer = function () {\n        if (Browser.isDevice && !isNullOrUndefined(this.popupContainer)) {\n            var popupEle = this.popupContainer.querySelector('.e-dropdown-popup.e-tbar-btn.e-control');\n            if (popupEle) {\n                this.popupContainer.parentNode.insertBefore(popupEle, this.popupContainer.nextSibling);\n                popupEle.style.removeProperty('position');\n                removeClass([popupEle], 'e-popup-modal');\n            }\n            detach(this.popupContainer);\n            this.popupContainer = undefined;\n        }\n    };\n    /**\n     * renderToolbar method\n     *\n     * @param {IToolbarOptions} args - specifies the arguments.\n     * @returns {void}\n     * @hidden\n\n     */\n    ToolbarRenderer.prototype.renderToolbar = function (args) {\n        this.setPanel(args.target);\n        this.renderPanel();\n        this.mode = args.overflowMode;\n        args.rteToolbarObj.toolbarObj = new Toolbar({\n            items: args.items,\n            width: '100%',\n            overflowMode: args.overflowMode,\n            beforeCreate: this.toolbarBeforeCreate.bind(this),\n            created: this.toolbarCreated.bind(this),\n            clicked: this.toolbarClicked.bind(this),\n            enablePersistence: args.enablePersistence,\n            enableRtl: args.enableRtl\n        });\n        args.rteToolbarObj.toolbarObj.isStringTemplate = true;\n        args.rteToolbarObj.toolbarObj.createElement = this.parent.createElement;\n        args.rteToolbarObj.toolbarObj.appendTo(args.target);\n    };\n    /**\n     * renderDropDownButton method\n     *\n     * @param {IDropDownModel} args - specifies the the arguments.\n     * @returns {void}\n     * @hidden\n\n     */\n    ToolbarRenderer.prototype.renderDropDownButton = function (args) {\n        var _this = this;\n        var css;\n        args.element.classList.add(CLS_DROPDOWN_BTN);\n        css = args.cssClass + ' ' + CLS_RTE_ELEMENTS + ' ' + CLS_TB_BTN;\n        if (this.parent.inlineMode.enable && Browser.isDevice) {\n            css = css + ' ' + CLS_INLINE_DROPDOWN;\n        }\n        // eslint-disable-next-line\n        var proxy = this;\n        var dropDown = new DropDownButton({\n            items: args.items,\n            iconCss: args.iconCss,\n            cssClass: css,\n            content: args.content,\n            enablePersistence: this.parent.enablePersistence,\n            enableRtl: this.parent.enableRtl,\n            select: this.dropDownSelected.bind(this),\n            beforeOpen: function (args) {\n                if (proxy.parent.readonly || !proxy.parent.enabled) {\n                    args.cancel = true;\n                    return;\n                }\n                // eslint-disable-next-line\n                for (var index = 0; index < args.element.childNodes.length; index++) {\n                    var divNode = _this.parent.createElement('div');\n                    divNode.innerHTML = dropDown.content.trim();\n                    if (divNode.textContent.trim() !== ''\n                        && args.element.childNodes[index].textContent.trim() === divNode.textContent.trim()) {\n                        if (!args.element.childNodes[index].classList.contains('e-active')) {\n                            addClass([args.element.childNodes[index]], 'e-active');\n                        }\n                    }\n                    else {\n                        removeClass([args.element.childNodes[index]], 'e-active');\n                    }\n                }\n                proxy.parent.notify(events.beforeDropDownOpen, args);\n            },\n            close: this.dropDownClose.bind(this),\n            open: this.dropDownOpen.bind(this),\n            beforeItemRender: this.beforeDropDownItemRender.bind(this)\n        });\n        dropDown.isStringTemplate = true;\n        dropDown.createElement = proxy.parent.createElement;\n        dropDown.appendTo(args.element);\n        args.element.tabIndex = -1;\n        var popupElement = document.getElementById(dropDown.element.id + '-popup');\n        popupElement.setAttribute('aria-owns', this.parent.getID());\n        return dropDown;\n    };\n    /**\n     * renderListDropDown method\n     *\n     * @param {IDropDownModel} args - specifies the the arguments.\n     * @returns {void}\n     * @hidden\n\n     */\n    ToolbarRenderer.prototype.renderListDropDown = function (args) {\n        // eslint-disable-next-line\n        var proxy = this;\n        var css = CLS_RTE_ELEMENTS + ' ' + CLS_TB_BTN + ((this.parent.inlineMode) ? (' ' + CLS_INLINE_DROPDOWN) : '');\n        css += (' ' + ((args.itemName === 'NumberFormatList') ? CLS_NUMBERFORMATLIST_TB_BTN : CLS_BULLETFORMATLIST_TB_BTN));\n        var content = proxy.parent.createElement('span', { className: CLS_LIST_PRIMARY_CONTENT });\n        var inlineEle = proxy.parent.createElement('span', { className: args.cssClass });\n        content.appendChild(inlineEle);\n        var dropDown = new DropDownButton({\n            items: args.items,\n            cssClass: css,\n            content: args.content,\n            enablePersistence: this.parent.enablePersistence,\n            enableRtl: this.parent.enableRtl,\n            select: this.dropDownSelected.bind(this),\n            beforeOpen: function (args) {\n                if (proxy.parent.readonly || !proxy.parent.enabled) {\n                    args.cancel = true;\n                    return;\n                }\n                var element = (args.event) ? args.event.target : null;\n                proxy.currentElement = dropDown.element;\n                proxy.currentDropdown = dropDown;\n                if (args.event && args.event.type === 'click' && (element.classList.contains(CLS_LIST_PRIMARY_CONTENT)\n                    || element.parentElement.classList.contains(CLS_LIST_PRIMARY_CONTENT))) {\n                    args.cancel = true;\n                    return;\n                }\n                proxy.parent.notify(events.beforeDropDownOpen, args);\n            },\n            close: this.dropDownClose.bind(this),\n            open: this.dropDownOpen.bind(this),\n            beforeItemRender: this.beforeDropDownItemRender.bind(this)\n        });\n        dropDown.isStringTemplate = true;\n        dropDown.createElement = proxy.parent.createElement;\n        dropDown.appendTo(args.element);\n        args.element.tabIndex = -1;\n        var popupElement = document.getElementById(dropDown.element.id + '-popup');\n        popupElement.setAttribute('aria-owns', this.parent.getID());\n        if (args.element.childElementCount === 1) {\n            dropDown.element.insertBefore(content, dropDown.element.querySelector('.e-caret'));\n        }\n        args.element.tabIndex = -1;\n        dropDown.element.removeAttribute('type');\n        return dropDown;\n    };\n    // eslint-disable-next-line\n    ToolbarRenderer.prototype.onPopupOverlay = function (args) {\n        if (!isNullOrUndefined(this.popupOverlay)) {\n            closest(this.popupOverlay, '.e-popup-container').style.display = 'none';\n            this.popupOverlay.style.display = 'none';\n            removeClass([this.popupOverlay], 'e-popup-overlay');\n        }\n    };\n    ToolbarRenderer.prototype.setIsModel = function (element) {\n        if (!closest(element, '.e-popup-container')) {\n            this.popupContainer = this.parent.createElement('div', {\n                className: 'e-rte-modal-popup e-popup-container e-center'\n            });\n            element.parentNode.insertBefore(this.popupContainer, element);\n            this.popupContainer.appendChild(element);\n            this.popupContainer.style.zIndex = element.style.zIndex;\n            this.popupContainer.style.display = 'flex';\n            element.style.position = 'relative';\n            addClass([element], 'e-popup-modal');\n            this.popupOverlay = this.parent.createElement('div', { className: 'e-popup-overlay' });\n            // eslint-disable-next-line\n            this.popupOverlay.style.zIndex = (parseInt(element.style.zIndex, null) - 1).toString();\n            this.popupOverlay.style.display = 'block';\n            this.popupContainer.appendChild(this.popupOverlay);\n            EventHandler.add(this.popupOverlay, 'click touchmove', this.onPopupOverlay, this);\n        }\n        else {\n            element.parentElement.style.display = 'flex';\n            this.popupOverlay = element.nextElementSibling;\n            this.popupOverlay.style.display = 'block';\n            addClass([this.popupOverlay], 'e-popup-overlay');\n        }\n    };\n    ToolbarRenderer.prototype.paletteSelection = function (dropDownArgs, currentElement) {\n        var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n        var colorbox = [].slice.call(selectAll('.e-tile', ele.parentElement));\n        removeClass(colorbox, 'e-selected');\n        var style = currentElement.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n        (colorbox.filter(function (colorbox) {\n            if (colorbox.style.backgroundColor === style) {\n                addClass([colorbox], 'e-selected');\n            }\n        }));\n    };\n    /**\n     * renderColorPickerDropDown method\n     *\n     * @param {IColorPickerModel} args - specifies the arguments.\n     * @param {string} item - specifies the item.\n     * @param {ColorPicker} colorPicker - specifies the colorpicker.\n     * @returns {void}\n     * @hidden\n\n     */\n    ToolbarRenderer.prototype.renderColorPickerDropDown = function (args, item, colorPicker, defaultColor) {\n        var _this = this;\n        // eslint-disable-next-line\n        var proxy = this;\n        var css = CLS_RTE_ELEMENTS + ' ' + CLS_TB_BTN + ((this.parent.inlineMode) ? (' ' + CLS_INLINE_DROPDOWN) : '');\n        css += (' ' + ((item === 'backgroundcolor') ? CLS_BACKGROUND_COLOR_DROPDOWN : CLS_FONT_COLOR_DROPDOWN));\n        var content = proxy.parent.createElement('span', { className: CLS_COLOR_CONTENT });\n        var inlineEle = proxy.parent.createElement('span', { className: args.cssClass });\n        var range;\n        var initialBackgroundColor = (isNullOrUndefined(defaultColor)) ? proxy.parent.backgroundColor.default : defaultColor;\n        inlineEle.style.borderBottomColor = (item === 'backgroundcolor') ?\n            initialBackgroundColor : proxy.parent.fontColor.default;\n        content.appendChild(inlineEle);\n        var dropDown = new DropDownButton({\n            target: colorPicker.element.parentElement, cssClass: css,\n            enablePersistence: this.parent.enablePersistence, enableRtl: this.parent.enableRtl,\n            beforeOpen: function (dropDownArgs) {\n                if (proxy.parent.readonly || !proxy.parent.enabled) {\n                    dropDownArgs.cancel = true;\n                    return;\n                }\n                var element = (dropDownArgs.event) ? dropDownArgs.event.target : null;\n                proxy.currentElement = dropDown.element;\n                proxy.currentDropdown = dropDown;\n                proxy.paletteSelection(dropDownArgs, proxy.currentElement);\n                if (dropDownArgs.event && dropDownArgs.event.type === 'click' && (element.classList.contains(CLS_COLOR_CONTENT)\n                    || element.parentElement.classList.contains(CLS_COLOR_CONTENT))) {\n                    dropDownArgs.cancel = true;\n                    var colorpickerValue = element.classList.contains(CLS_RTE_ELEMENTS) ? element.style.borderBottomColor :\n                        element.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n                    proxy.parent.notify(events.selectionRestore, {});\n                    range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n                    var parentNode = range.startContainer.parentNode;\n                    if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' ||\n                        (closest(range.startContainer.parentNode, 'td,th')) ||\n                        (proxy.parent.iframeSettings.enable && !hasClass(parentNode.ownerDocument.querySelector('body'), 'e-lib')))\n                        && range.collapsed && args.subCommand === 'BackgroundColor') {\n                        proxy.parent.notify(events.tableColorPickerChanged, {\n                            item: { command: args.command, subCommand: args.subCommand,\n                                value: colorpickerValue }\n                        });\n                    }\n                    else {\n                        proxy.parent.notify(events.colorPickerChanged, { item: { command: args.command, subCommand: args.subCommand,\n                                value: colorpickerValue }\n                        });\n                    }\n                    return;\n                }\n                else {\n                    var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n                    var inst = getInstance(ele, ColorPicker);\n                    inst.showButtons = (dropDownArgs.element.querySelector('.e-color-palette')) ? false : true;\n                    inst.dataBind();\n                }\n                dropDownArgs.element.onclick = function (args) {\n                    if (args.target.classList.contains('e-cancel')) {\n                        dropDown.toggle();\n                    }\n                };\n            },\n            open: function (dropDownArgs) {\n                _this.setColorPickerContentWidth(colorPicker);\n                var focusEle;\n                var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n                if (dropDownArgs.element.querySelector('.e-color-palette')) {\n                    focusEle = ele.parentElement.querySelector('.e-palette');\n                }\n                else {\n                    focusEle = ele.parentElement.querySelector('e-handler');\n                }\n                if (focusEle) {\n                    focusEle.focus();\n                }\n                if (Browser.isDevice) {\n                    _this.popupModal(dropDownArgs.element.parentElement);\n                }\n                _this.pickerRefresh(dropDownArgs);\n            },\n            beforeClose: function (dropDownArgs) {\n                var element = (dropDownArgs.event) ? dropDownArgs.event.target : null;\n                if (dropDownArgs.event && dropDownArgs.event.type === 'click' && (element.classList.contains(CLS_COLOR_CONTENT)\n                    || element.parentElement.classList.contains(CLS_COLOR_CONTENT))) {\n                    var colorpickerValue = element.classList.contains(CLS_RTE_ELEMENTS) ? element.style.borderBottomColor :\n                        element.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n                    range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n                    if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' ||\n                        closest(range.startContainer.parentNode, 'td,th')) && range.collapsed) {\n                        proxy.parent.notify(events.tableColorPickerChanged, { item: {\n                                command: args.command, subCommand: args.subCommand,\n                                value: colorpickerValue\n                            }\n                        });\n                    }\n                    else {\n                        proxy.parent.notify(events.colorPickerChanged, { item: { command: args.command, subCommand: args.subCommand,\n                                value: colorpickerValue }\n                        });\n                    }\n                    return;\n                }\n            },\n            close: function (dropDownArgs) {\n                proxy.parent.notify(events.selectionRestore, {});\n                var dropElement = closest(dropDownArgs.element.parentElement, '.e-popup-container');\n                if (dropElement) {\n                    dropElement.style.display = 'none';\n                    dropElement.lastElementChild.style.display = 'none';\n                    removeClass([dropElement.lastElementChild], 'e-popup-overlay');\n                }\n                if (Browser.isDevice && !isNullOrUndefined(dropElement)) {\n                    var popupEle = dropElement.querySelector('.e-dropdown-popup.e-tbar-btn.e-control');\n                    if (popupEle) {\n                        dropElement.parentNode.insertBefore(popupEle, dropElement.nextSibling);\n                        popupEle.style.removeProperty('position');\n                        removeClass([popupEle], 'e-popup-modal');\n                    }\n                    detach(dropElement);\n                    proxy.popupContainer = undefined;\n                }\n            }\n        });\n        dropDown.isStringTemplate = true;\n        dropDown.createElement = proxy.parent.createElement;\n        args.element.setAttribute('role', 'button');\n        dropDown.appendTo(args.element);\n        var popupElement = document.getElementById(dropDown.element.id + '-popup');\n        popupElement.setAttribute('aria-owns', this.parent.getID());\n        dropDown.element.insertBefore(content, dropDown.element.querySelector('.e-caret'));\n        args.element.tabIndex = -1;\n        dropDown.element.removeAttribute('type');\n        dropDown.element.onmousedown = function () {\n            proxy.parent.notify(events.selectionSave, {});\n        };\n        dropDown.element.onkeydown = function () {\n            proxy.parent.notify(events.selectionSave, {});\n        };\n        return dropDown;\n    };\n    ToolbarRenderer.prototype.pickerRefresh = function (dropDownArgs) {\n        if (this.parent.backgroundColor.mode === 'Picker') {\n            var popupElem = dropDownArgs.element.parentElement;\n            popupElem.style.width = (popupElem.offsetWidth + 5).toString() + 'px';\n            getInstance(popupElem, Popup).refreshPosition(popupElem);\n            popupElem.style.width = (popupElem.offsetWidth - 5).toString() + 'px';\n        }\n    };\n    ToolbarRenderer.prototype.popupModal = function (element) {\n        var popupInst = getInstance(element, Popup);\n        popupInst.relateTo = document.body;\n        popupInst.position = { X: 0, Y: 0 };\n        popupInst.targetType = 'container';\n        popupInst.collision = { X: 'fit', Y: 'fit' };\n        popupInst.offsetY = 4;\n        popupInst.dataBind();\n        this.setIsModel(element);\n    };\n    ToolbarRenderer.prototype.setColorPickerContentWidth = function (colorPicker) {\n        var colorPickerContent = colorPicker.element.nextSibling;\n        if (colorPickerContent.style.width === '0px') {\n            colorPickerContent.style.width = '';\n            var borderWidth = parseInt(getComputedStyle(colorPickerContent).borderBottomWidth, 10);\n            colorPickerContent.style.width = formatUnit(colorPickerContent.children[0].offsetWidth\n                + borderWidth + borderWidth);\n        }\n    };\n    /**\n     * renderColorPicker method\n     *\n     * @param {IColorPickerModel} args - specifies the arguments\n     * @param {string} item - specifies the string values\n     * @returns {void}\n     * @hidden\n\n     */\n    ToolbarRenderer.prototype.renderColorPicker = function (args, item) {\n        // eslint-disable-next-line\n        var proxy = this;\n        var value;\n        var colorPicker = new ColorPicker({\n            enablePersistence: this.parent.enablePersistence,\n            enableRtl: this.parent.enableRtl,\n            inline: true,\n            value: '#fff',\n            created: function () {\n                var value = (item === 'backgroundcolor') ? proxy.parent.backgroundColor.default : proxy.parent.fontColor.default;\n                colorPicker.setProperties({ value: value });\n            },\n            mode: ((item === 'backgroundcolor') ? proxy.parent.backgroundColor.mode : proxy.parent.fontColor.mode),\n            modeSwitcher: ((item === 'backgroundcolor') ? proxy.parent.backgroundColor.modeSwitcher : proxy.parent.fontColor.modeSwitcher),\n            beforeTileRender: function (args) {\n                args.element.classList.add(CLS_COLOR_PALETTE);\n                args.element.classList.add(CLS_CUSTOM_TILE);\n                if (args.value === '') {\n                    args.element.classList.add(CLS_NOCOLOR_ITEM);\n                }\n            },\n            change: function (colorPickerArgs) {\n                var colorpickerValue = colorPickerArgs.currentValue.rgba;\n                colorPickerArgs.item = {\n                    command: args.command,\n                    subCommand: args.subCommand,\n                    value: colorpickerValue\n                };\n                proxy.parent.notify(events.selectionRestore, {});\n                proxy.currentElement.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor = colorpickerValue;\n                var range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n                if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' || range.startContainer.nodeName === 'BODY' ||\n                    closest(range.startContainer.parentNode, 'td,th')) && range.collapsed && args.subCommand === 'BackgroundColor') {\n                    proxy.parent.notify(events.tableColorPickerChanged, colorPickerArgs);\n                }\n                else {\n                    proxy.parent.notify(events.colorPickerChanged, colorPickerArgs);\n                }\n                proxy.currentDropdown.toggle();\n            },\n            beforeModeSwitch: function (args) {\n                value = colorPicker.value;\n                if (value === '') {\n                    colorPicker.setProperties({ value: ((args.mode === 'Picker') ? '#008000ff' : '') }, true);\n                }\n                colorPicker.showButtons = args.mode === 'Palette' ? false : true;\n            }\n        });\n        colorPicker.isStringTemplate = true;\n        colorPicker.columns = (item === 'backgroundcolor') ? this.parent.backgroundColor.columns : this.parent.fontColor.columns;\n        colorPicker.presetColors = (item === 'backgroundcolor') ? this.parent.backgroundColor.colorCode :\n            this.parent.fontColor.colorCode;\n        colorPicker.cssClass = (item === 'backgroundcolor') ? CLS_BACKGROUND_COLOR_PICKER : CLS_FONT_COLOR_PICKER;\n        colorPicker.createElement = this.parent.createElement;\n        colorPicker.appendTo(document.getElementById(args.target));\n        return colorPicker;\n    };\n    /**\n     * The function is used to render Rich Text Editor toolbar\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    ToolbarRenderer.prototype.renderPanel = function () {\n        this.getPanel().classList.add(CLS_TOOLBAR);\n    };\n    /**\n     * Get the toolbar element of RichTextEditor\n     *\n     * @returns {Element} - specifies the element.\n     * @hidden\n\n     */\n    ToolbarRenderer.prototype.getPanel = function () {\n        return this.toolbarPanel;\n    };\n    /**\n     * Set the toolbar element of RichTextEditor\n     *\n     * @returns {void}\n     * @param  {Element} panel - specifies the element.\n     * @hidden\n\n     */\n    ToolbarRenderer.prototype.setPanel = function (panel) {\n        this.toolbarPanel = panel;\n    };\n    return ToolbarRenderer;\n}());\nexport { ToolbarRenderer };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}