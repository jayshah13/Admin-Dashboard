{"ast":null,"code":"import { titlePositionX, textElement, appendChildElement, getElement } from '../../common/utils/helper';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { Rect, TextOption, measureText, SvgRenderer } from '@syncfusion/ej2-svg-base';\nimport { remove } from '@syncfusion/ej2-base';\n/**\n * Period selector for range navigator\n */\n\n/** @private */\n\nvar ToolBarSelector =\n/** @class */\nfunction () {\n  function ToolBarSelector(chart) {\n    this.selectedSeries = '';\n    this.selectedIndicator = '';\n    this.selectedTrendLine = '';\n    this.indicators = [];\n    this.secondayIndicators = [];\n    this.stockChart = chart;\n    this.selectedSeries = this.stockChart.series[0].type;\n  }\n\n  ToolBarSelector.prototype.initializePeriodSelector = function () {\n    var periods = this.stockChart.tempPeriods;\n    this.stockChart.periods = periods;\n    this.stockChart.periodSelector.rootControl = this.stockChart;\n    var rect = this.stockChart.chart.chartAxisLayoutPanel.seriesClipRect;\n    var htmlElement = getElement(this.stockChart.element.id + '_Secondary_Element');\n    var height = this.stockChart.toolbarHeight;\n    this.stockChart.periodSelector.appendSelector({\n      thumbSize: 0,\n      element: htmlElement,\n      width: rect.width,\n      height: height\n    }, rect.x);\n    this.initializeSeriesSelector();\n    this.initializeIndicatorSelector();\n    this.initializeTrendlineSelector();\n    this.exportButton();\n    this.printButton();\n    this.resetButton();\n  };\n  /**\n   * This method returns itemModel for dropdown button\n   */\n\n\n  ToolBarSelector.prototype.getDropDownItems = function (type) {\n    var result = [];\n\n    if (type === this.stockChart.seriesType) {\n      for (var i = 0; i < type.length; i++) {\n        result.push({\n          text: '&nbsp;&nbsp;&nbsp;' + type[i].toString()\n        });\n      }\n\n      for (var i = 0; i < this.stockChart.series.length; i++) {\n        for (var j = 0; j < result.length; j++) {\n          var text = result[j].text.replace('&nbsp;&nbsp;&nbsp;', '');\n          text = text === 'OHLC' ? 'HiloOpenClose' : text;\n\n          if (text === this.stockChart.series[i].type) {\n            result[j].text = result[j].text.replace('&nbsp;&nbsp;&nbsp;', '&#10004&nbsp;');\n          }\n        }\n      }\n    } else if (type === this.stockChart.exportType) {\n      for (var i = 0; i < type.length; i++) {\n        result.push({\n          text: type[i].toString()\n        });\n      }\n    } else {\n      for (var i = 0; i < type.length; i++) {\n        if (type[i].toString() !== 'Print') {\n          result.push({\n            text: '&nbsp;&nbsp;&nbsp;' + type[i].toString()\n          });\n        }\n      }\n    }\n\n    return result;\n  };\n  /**\n   * This method changes the type of series while selectind series in dropdown button\n   */\n\n\n  ToolBarSelector.prototype.addedSeries = function (seriesType) {\n    var series = this.stockChart.series;\n\n    for (var i = 0; i < series.length; i++) {\n      if (series[i].yName === 'volume') {\n        continue;\n      }\n\n      series[i].type = seriesType.indexOf('Candle') > -1 ? 'Candle' : seriesType.indexOf('OHLC') > -1 ? 'HiloOpenClose' : seriesType;\n      series[i].enableSolidCandles = seriesType === 'Candle';\n\n      for (var index = 0; index < series[i].trendlines.length; index++) {\n        var trendLine = series[i].trendlines[index];\n        trendLine.animation.enable = false;\n        trendLine.enableTooltip = false;\n      }\n    }\n  };\n\n  ToolBarSelector.prototype.initializeSeriesSelector = function () {\n    var _this = this;\n\n    var seriesType = new DropDownButton({\n      items: this.getDropDownItems(this.stockChart.seriesType),\n      select: function (args) {\n        _this.selectedSeries = args.item.text;\n\n        var text = _this.tickMark(args);\n\n        _this.addedSeries(text);\n\n        _this.stockChart.cartesianChart.initializeChart();\n\n        if (_this.stockChart.stockLegendModule && _this.stockChart.stockLegendModule.legendCollections.length && _this.stockChart.legendSettings.visible) {\n          var bounds = _this.stockChart.stockLegendModule.legendBounds;\n\n          _this.stockChart.stockLegendModule.renderLegend(_this.stockChart, _this.stockChart.legendSettings, bounds);\n        }\n      }\n    });\n    seriesType.appendTo('#' + this.stockChart.element.id + '_seriesType');\n  };\n\n  ToolBarSelector.prototype.resetButton = function () {\n    var _this = this;\n\n    var isProtect = 'isProtectedOnChange';\n    this.stockChart[isProtect] = true;\n    var reset = new Button();\n    reset.appendTo('#' + this.stockChart.element.id + '_reset');\n\n    document.getElementById(this.stockChart.element.id + '_reset').onclick = function () {\n      var indicatorlength = _this.indicators.length;\n\n      while (indicatorlength) {\n        _this.stockChart.indicators.pop();\n\n        indicatorlength--;\n      }\n\n      _this.indicators = [];\n      _this.secondayIndicators = [];\n\n      if (!_this.stockChart.isSingleAxis) {\n        if (_this.stockChart.rows.length > 2) {\n          _this.stockChart.rows.splice(2, _this.stockChart.rows.length - 1);\n        }\n\n        if (_this.stockChart.axes.length > 2) {\n          _this.stockChart.axes.splice(1, _this.stockChart.axes.length - 1);\n\n          _this.stockChart.axes[0].rowIndex = 1;\n        }\n      } else {\n        _this.stockChart.rows = [{}];\n      }\n\n      for (var i = 0; i < _this.stockChart.series.length; i++) {\n        if (_this.stockChart.series[i].yName === 'volume') {\n          continue;\n        }\n\n        _this.stockChart.series[i].type = _this.stockChart.tempSeriesType[i];\n\n        if (_this.stockChart.series[i].trendlines.length !== 0) {\n          _this.stockChart.series[i].trendlines[0].width = 0;\n        }\n      }\n\n      _this.stockChart.indicatorElements = null;\n      _this.stockChart.resizeTo = null;\n      _this.stockChart.zoomChange = false;\n\n      _this.stockChart.refresh();\n\n      _this.stockChart[isProtect] = true;\n    };\n  };\n\n  ToolBarSelector.prototype.initializeTrendlineSelector = function () {\n    var _this = this;\n\n    this.trendlineDropDown = new DropDownButton({\n      items: this.stockChart.resizeTo ? this.trendlineDropDown.items : this.getDropDownItems(this.stockChart.trendlineType),\n      select: function (args) {\n        var text = _this.tickMark(args);\n\n        text = text.split(' ')[0].toLocaleLowerCase() + (text.split(' ')[1] ? text.split(' ')[1] : '');\n        text = text.substr(0, 1).toUpperCase() + text.substr(1);\n        var type = text;\n        _this.selectedTrendLine = _this.selectedTrendLine === '' ? type : _this.selectedTrendLine + ',' + type;\n\n        if (_this.trendline !== type) {\n          _this.trendline = type;\n\n          for (var i = 0; i < _this.stockChart.series.length; i++) {\n            if (_this.stockChart.series[i].yName === 'volume') {\n              continue;\n            }\n\n            if (_this.stockChart.series[0].trendlines.length === 0) {\n              var trendlines = void 0;\n\n              if (_this.stockChart.trendlinetriggered) {\n                trendlines = [{\n                  type: type,\n                  width: 1,\n                  enableTooltip: false\n                }];\n                _this.stockChart.trendlinetriggered = false;\n              }\n\n              _this.stockChart.series[0].trendlines = trendlines;\n            } else {\n              _this.stockChart.series[0].trendlines[0].width = 1;\n              _this.stockChart.series[0].trendlines[0].type = type;\n              _this.stockChart.series[0].trendlines[0].animation.enable = _this.stockChart.trendlinetriggered ? true : false;\n            }\n          }\n\n          _this.stockChart.cartesianChart.initializeChart();\n        } else {\n          args.item.text = '&nbsp;&nbsp;&nbsp;' + args.item.text.replace('&#10004&nbsp;', '');\n          _this.stockChart.series[0].trendlines[0].width = 0;\n          _this.trendline = null;\n\n          _this.stockChart.cartesianChart.initializeChart();\n        }\n      }\n    });\n    this.trendlineDropDown.appendTo('#' + this.stockChart.element.id + '_trendType');\n  };\n\n  ToolBarSelector.prototype.initializeIndicatorSelector = function () {\n    var _this = this;\n\n    this.indicatorDropDown = new DropDownButton({\n      items: this.stockChart.resizeTo ? this.indicatorDropDown.items : this.getDropDownItems(this.stockChart.indicatorType),\n      select: function (args) {\n        for (var l = 0; l < _this.stockChart.series.length; l++) {\n          if (_this.stockChart.series[l].trendlines.length !== 0) {\n            _this.stockChart.series[l].trendlines[0].animation.enable = false;\n          }\n        }\n\n        args.item.text = args.item.text.indexOf('&#10004&nbsp;') >= 0 ? args.item.text.substr(args.item.text.indexOf(';') + 1) : args.item.text;\n        var text = args.item.text.replace('&nbsp;&nbsp;&nbsp;', '');\n        text = text.split(' ')[0].toLocaleLowerCase() + (text.split(' ')[1] ? text.split(' ')[1] : '');\n        text = text.substr(0, 1).toUpperCase() + text.substr(1);\n        var type = text;\n        _this.selectedIndicator = _this.selectedIndicator.indexOf(type) === -1 ? _this.selectedIndicator + ' ' + type : _this.selectedIndicator.replace(type, '');\n\n        if (type === 'Tma' || type === 'BollingerBands' || type === 'Sma' || type === 'Ema') {\n          if (_this.indicators.indexOf(type) === -1) {\n            args.item.text = '&#10004&nbsp;' + args.item.text.replace('&nbsp;&nbsp;&nbsp;', '');\n\n            var indicator = _this.getIndicator(type, _this.stockChart.series[0].yAxisName);\n\n            _this.indicators.push(type);\n\n            _this.stockChart.indicators = _this.stockChart.indicators.concat(indicator);\n\n            _this.stockChart.cartesianChart.initializeChart();\n          } else {\n            args.item.text = '&nbsp;&nbsp;&nbsp;' + args.item.text;\n\n            for (var z = 0; z < _this.stockChart.indicators.length; z++) {\n              if (_this.stockChart.indicators[z].type === type) {\n                _this.stockChart.indicators.splice(z, 1);\n              }\n            }\n\n            _this.indicators.splice(_this.indicators.indexOf(type), 1);\n\n            _this.stockChart.cartesianChart.initializeChart();\n          }\n        } else {\n          _this.createIndicatorAxes(type, args);\n        }\n      }\n    });\n    this.indicatorDropDown.appendTo('#' + this.stockChart.element.id + '_indicatorType');\n  };\n\n  ToolBarSelector.prototype.getIndicator = function (type, yAxisName) {\n    var currentSeries = this.stockChart.series[0];\n    var indicator = [{\n      type: type,\n      period: 3,\n      yAxisName: yAxisName,\n      dataSource: currentSeries.localData,\n      xName: currentSeries.xName,\n      open: currentSeries.open,\n      close: currentSeries.close,\n      high: currentSeries.high,\n      low: currentSeries.low,\n      volume: currentSeries.volume,\n      fill: type === 'Sma' ? '#32CD32' : '#6063ff',\n      animation: {\n        enable: false\n      },\n      upperLine: {\n        color: '#FFE200',\n        width: 1\n      },\n      periodLine: {\n        width: 2\n      },\n      lowerLine: {\n        color: '#FAA512',\n        width: 1\n      },\n      fastPeriod: 8,\n      slowPeriod: 5,\n      macdType: 'Both',\n      width: 1,\n      macdPositiveColor: '#6EC992',\n      macdNegativeColor: '#FF817F',\n      bandColor: 'rgba(245, 203, 35, 0.12)'\n    }];\n    return indicator;\n  };\n\n  ToolBarSelector.prototype.createIndicatorAxes = function (type, args) {\n    if (this.indicators.indexOf(type) === -1) {\n      args.item.text = '&#10004&nbsp;' + args.item.text.replace('&nbsp;&nbsp;&nbsp;', '');\n      this.indicators.push(type);\n      var len = this.stockChart.rows.length;\n      this.stockChart.rows[this.stockChart.rows.length - 1].height = '15%';\n      var row = [{\n        height: '' + (100 - len * 15) + 'px'\n      }];\n\n      if (this.stockChart.rows.length === 1) {\n        this.stockChart.isSingleAxis = true;\n      }\n\n      this.stockChart.rows = this.stockChart.rows.concat(row);\n\n      if (!this.stockChart.isSingleAxis) {\n        this.stockChart.axes[0].rowIndex += 1;\n      } else {\n        for (var i = 0; i < this.stockChart.axes.length; i++) {\n          this.stockChart.axes[i].rowIndex += 1;\n        }\n      }\n\n      var axis = [{\n        plotOffset: 10,\n        opposedPosition: true,\n        rowIndex: !this.stockChart.isSingleAxis ? this.stockChart.axes.length : 0,\n        desiredIntervals: 1,\n        labelFormat: 'n2',\n        majorGridLines: this.stockChart.primaryYAxis.majorGridLines,\n        lineStyle: this.stockChart.primaryYAxis.lineStyle,\n        labelPosition: this.stockChart.primaryYAxis.labelPosition,\n        majorTickLines: this.stockChart.primaryYAxis.majorTickLines,\n        rangePadding: 'None',\n        name: type.toString()\n      }];\n      this.stockChart.axes = this.stockChart.axes.concat(axis);\n      this.stockChart.primaryYAxis.rowIndex = !this.stockChart.isSingleAxis ? 0 : len + 1;\n      var indicator = this.getIndicator(type, type.toString());\n      this.stockChart.indicators = this.stockChart.indicators.concat(indicator);\n      this.stockChart.cartesianChart.initializeChart();\n    } else {\n      args.item.text = '&nbsp;&nbsp;&nbsp;' + args.item.text;\n\n      for (var i = 0; i < this.stockChart.indicators.length; i++) {\n        if (this.stockChart.indicators[i].type === type) {\n          this.stockChart.indicators.splice(i, 1);\n        }\n      }\n\n      this.indicators.splice(this.indicators.indexOf(type), 1);\n      var removedIndex = 0;\n\n      for (var z = 0; z < this.stockChart.axes.length; z++) {\n        if (this.stockChart.axes[z].name === type) {\n          removedIndex = this.stockChart.axes[z].rowIndex;\n          this.stockChart.rows.splice(z, 1);\n          this.stockChart.axes.splice(z, 1);\n        }\n      }\n\n      for (var z = 0; z < this.stockChart.axes.length; z++) {\n        if (this.stockChart.axes[z].rowIndex !== 0 && this.stockChart.axes[z].rowIndex > removedIndex) {\n          this.stockChart.axes[z].rowIndex = this.stockChart.axes[z].rowIndex - 1;\n        }\n      }\n\n      this.stockChart.cartesianChart.initializeChart();\n    }\n  };\n\n  ToolBarSelector.prototype.tickMark = function (args) {\n    var text;\n    var items = args.item['parentObj'].items;\n\n    for (var i = 0; i < items.length; i++) {\n      items[i].text = items[i].text.indexOf('&#10004&nbsp;') >= 0 ? items[i].text.substr(items[i].text.indexOf(';') + 1) : items[i].text;\n\n      if (!(items[i].text.indexOf('&nbsp;&nbsp;&nbsp;') >= 0)) {\n        items[i].text = '&nbsp;&nbsp;&nbsp;' + items[i].text;\n      }\n    }\n\n    if (args.item.text.indexOf('&nbsp;&nbsp;&nbsp;') >= 0) {\n      text = args.item.text.replace('&nbsp;&nbsp;&nbsp;', '');\n      args.item.text = args.item.text.replace('&nbsp;&nbsp;&nbsp;', '&#10004&nbsp;');\n    } else {\n      text = args.item.text.replace('&#10004&nbsp;', '');\n    }\n\n    return text;\n  };\n\n  ToolBarSelector.prototype.printButton = function () {\n    var _this = this;\n\n    if (this.stockChart.exportType.indexOf('Print') > -1) {\n      var print_1 = new Button();\n      print_1.appendTo('#' + this.stockChart.element.id + '_print');\n\n      document.getElementById(this.stockChart.element.id + '_print').onclick = function () {\n        _this.stockChart.chart.print(_this.stockChart.element.id);\n      };\n    }\n  };\n\n  ToolBarSelector.prototype.exportButton = function () {\n    var _this = this;\n\n    var exportChart = new DropDownButton({\n      items: this.getDropDownItems(this.stockChart.exportType),\n      select: function (args) {\n        var type = args.item.text;\n        var stockChart = _this.stockChart;\n        var stockID = stockChart.element.id + '_stockChart_';\n        var additionalRect;\n        var svgHeight = stockChart.svgObject.getBoundingClientRect();\n\n        if (stockChart.chart.exportModule) {\n          _this.stockChart.svgObject.insertAdjacentElement('afterbegin', _this.addExportSettings());\n\n          additionalRect = stockChart.svgObject.firstElementChild.getBoundingClientRect();\n\n          _this.stockChart.svgObject.setAttribute('height', (svgHeight.height + additionalRect.height).toString());\n\n          getElement(stockID + 'chart').style.transform = 'translateY(' + additionalRect.height + 'px)';\n\n          if (stockChart.enableSelector) {\n            getElement(stockID + 'rangeSelector').setAttribute('transform', // eslint-disable-next-line @typescript-eslint/indent\n            'translate(' + 0 + ',' + (stockChart.cartesianChart.cartesianChartSize.height + additionalRect.height) + ')');\n          }\n\n          if (_this.stockChart.legendSettings.visible && _this.stockChart.stockLegendModule) {\n            getElement(stockChart.element.id + '_chart_legend_g').style.transform = 'translateY(' + additionalRect.height + 'px)';\n          }\n\n          stockChart.chart.exportModule.export(type, 'StockChart', null, [stockChart], null, stockChart.svgObject.clientHeight);\n          remove(getElement(_this.stockChart.element.id + '_additionalExport'));\n          getElement(stockID + 'chart').style.transform = 'translateY(0px)';\n\n          if (stockChart.enableSelector) {\n            getElement(stockID + 'rangeSelector').setAttribute('transform', // eslint-disable-next-line @typescript-eslint/indent\n            'translate(' + 0 + ',' + stockChart.cartesianChart.cartesianChartSize.height + ')');\n          }\n\n          if (_this.stockChart.legendSettings.visible && _this.stockChart.stockLegendModule) {\n            getElement(stockChart.element.id + '_chart_legend_g').style.transform = 'translateY(0px)';\n          }\n\n          _this.stockChart.svgObject.setAttribute('height', svgHeight.height.toString());\n        }\n      }\n    });\n    exportChart.appendTo('#' + this.stockChart.element.id + '_export');\n  };\n\n  ToolBarSelector.prototype.calculateAutoPeriods = function () {\n    var defaultPeriods = [];\n    defaultPeriods = this.findRange(this.stockChart.seriesXMin, this.stockChart.seriesXMax);\n    defaultPeriods.push({\n      text: 'YTD',\n      selected: true\n    }, {\n      text: 'All'\n    });\n    return defaultPeriods;\n  };\n\n  ToolBarSelector.prototype.findRange = function (min, max) {\n    var defaultPeriods = [];\n\n    if ((max - min) / 3.154e+10 >= 1) {\n      defaultPeriods.push({\n        text: '1M',\n        interval: 1,\n        intervalType: 'Months'\n      }, {\n        text: '3M',\n        interval: 3,\n        intervalType: 'Months'\n      }, {\n        text: '6M',\n        interval: 6,\n        intervalType: 'Months'\n      }, {\n        text: '1Y',\n        interval: 1,\n        intervalType: 'Years'\n      });\n    } else if ((max - min) / 1.577e+10 >= 1) {\n      defaultPeriods.push({\n        text: '1M',\n        interval: 1,\n        intervalType: 'Months'\n      }, {\n        text: '3M',\n        interval: 3,\n        intervalType: 'Months'\n      }, {\n        text: '6M',\n        interval: 6,\n        intervalType: 'Months'\n      });\n    } else if ((max - min) / 2.628e+9 >= 1) {\n      defaultPeriods.push({\n        text: '1D',\n        interval: 1,\n        intervalType: 'Days'\n      }, {\n        text: '3W',\n        interval: 3,\n        intervalType: 'Weeks'\n      }, {\n        text: '1M',\n        interval: 1,\n        intervalType: 'Months'\n      });\n    } else if ((max - min) / 8.64e+7 >= 1) {\n      defaultPeriods.push({\n        text: '1H',\n        interval: 1,\n        intervalType: 'Hours'\n      }, {\n        text: '12H',\n        interval: 12,\n        intervalType: 'Hours'\n      }, {\n        text: '1D',\n        interval: 1,\n        intervalType: 'Days'\n      });\n    }\n\n    return defaultPeriods;\n  };\n  /**\n   * Text elements added to while export the chart\n   * It details about the seriesTypes, indicatorTypes and Trendlines selected in chart.\n   */\n\n\n  ToolBarSelector.prototype.addExportSettings = function () {\n    var exportElement = this.stockChart.renderer.createGroup({\n      id: this.stockChart.element.id + '_additionalExport',\n      width: this.stockChart.availableSize.width\n    });\n    var titleHeight = measureText(this.stockChart.title, this.stockChart.titleStyle).height;\n    var options = new TextOption(exportElement.id + '_Title', titlePositionX(new Rect(0, 0, this.stockChart.availableSize.width, 0), this.stockChart.titleStyle), 0, 'middle', this.stockChart.title, '', 'text-before-edge');\n    textElement(this.stockChart.renderer, options, this.stockChart.titleStyle, this.stockChart.titleStyle.color, exportElement);\n    var style = {\n      size: '15px',\n      fontWeight: '500',\n      color: null,\n      fontStyle: 'Normal',\n      fontFamily: 'Segoe UI'\n    };\n    var x = measureText('Series: ' + this.selectedSeries, style).width / 2;\n    var y = titleHeight;\n    this.textElementSpan(new TextOption(exportElement.id + '_Series', x, y, 'start', ['Series : ', this.selectedSeries], '', 'text-before-edge'), style, 'black', exportElement);\n    x += measureText('Series: ' + this.selectedSeries + ' Z', style).width;\n\n    if (this.selectedIndicator !== '') {\n      this.textElementSpan(new TextOption(exportElement.id + '_Indicator', x, y, 'start', ['Indicator :', this.selectedIndicator], '', 'text-before-edge'), style, 'black', exportElement);\n      x += measureText('Indicator: ' + this.selectedIndicator + ' Z', style).width;\n    }\n\n    if (this.selectedTrendLine !== '') {\n      this.textElementSpan(new TextOption(exportElement.id + '_TrendLine', x, y, 'start', ['Trendline :', this.selectedTrendLine], '', 'text-before-edge'), style, 'black', exportElement);\n    }\n\n    return exportElement;\n  };\n  /** @private */\n\n\n  ToolBarSelector.prototype.textElementSpan = function (options, font, color, parent, isMinus, redraw, isAnimate, forceAnimate, animateDuration) {\n    if (isMinus === void 0) {\n      isMinus = false;\n    }\n\n    if (forceAnimate === void 0) {\n      forceAnimate = false;\n    }\n\n    var renderer = new SvgRenderer('');\n    var renderOptions = {};\n    var tspanElement;\n    renderOptions = {\n      'id': options.id,\n      'font-style': font.fontStyle,\n      'font-family': font.fontFamily,\n      'font-weight': font.fontWeight,\n      'text-anchor': options.anchor,\n      'x': options.x,\n      'y': options.y,\n      'fill': color,\n      'font-size': font.size,\n      'transform': options.transform,\n      'opacity': font.opacity,\n      'dominant-baseline': options.baseLine\n    };\n    var text = typeof options.text === 'string' ? options.text : isMinus ? options.text[options.text.length - 1] : options.text[0];\n    var htmlObject = renderer.createText(renderOptions, text);\n\n    if (typeof options.text !== 'string' && options.text.length > 1) {\n      for (var i = 1, len = options.text.length; i < len; i++) {\n        options.text[i] = ' ' + options.text[i];\n        tspanElement = renderer.createTSpan({\n          'x': options.x + measureText(text, font).width + 5,\n          'id': options.id,\n          'y': options.y,\n          opacity: 0.5\n        }, options.text[i]);\n        htmlObject.appendChild(tspanElement);\n      }\n    }\n\n    appendChildElement(false, parent, htmlObject, redraw, isAnimate, 'x', 'y', null, null, forceAnimate, false, null, animateDuration);\n    return htmlObject;\n  };\n\n  return ToolBarSelector;\n}();\n\nexport { ToolBarSelector };","map":{"version":3,"names":["titlePositionX","textElement","appendChildElement","getElement","DropDownButton","Button","Rect","TextOption","measureText","SvgRenderer","remove","ToolBarSelector","chart","selectedSeries","selectedIndicator","selectedTrendLine","indicators","secondayIndicators","stockChart","series","type","prototype","initializePeriodSelector","periods","tempPeriods","periodSelector","rootControl","rect","chartAxisLayoutPanel","seriesClipRect","htmlElement","element","id","height","toolbarHeight","appendSelector","thumbSize","width","x","initializeSeriesSelector","initializeIndicatorSelector","initializeTrendlineSelector","exportButton","printButton","resetButton","getDropDownItems","result","seriesType","i","length","push","text","toString","j","replace","exportType","addedSeries","yName","indexOf","enableSolidCandles","index","trendlines","trendLine","animation","enable","enableTooltip","_this","items","select","args","item","tickMark","cartesianChart","initializeChart","stockLegendModule","legendCollections","legendSettings","visible","bounds","legendBounds","renderLegend","appendTo","isProtect","reset","document","getElementById","onclick","indicatorlength","pop","isSingleAxis","rows","splice","axes","rowIndex","tempSeriesType","indicatorElements","resizeTo","zoomChange","refresh","trendlineDropDown","trendlineType","split","toLocaleLowerCase","substr","toUpperCase","trendline","trendlinetriggered","indicatorDropDown","indicatorType","l","indicator","getIndicator","yAxisName","concat","z","createIndicatorAxes","currentSeries","period","dataSource","localData","xName","open","close","high","low","volume","fill","upperLine","color","periodLine","lowerLine","fastPeriod","slowPeriod","macdType","macdPositiveColor","macdNegativeColor","bandColor","len","row","axis","plotOffset","opposedPosition","desiredIntervals","labelFormat","majorGridLines","primaryYAxis","lineStyle","labelPosition","majorTickLines","rangePadding","name","removedIndex","print_1","print","exportChart","stockID","additionalRect","svgHeight","svgObject","getBoundingClientRect","exportModule","insertAdjacentElement","addExportSettings","firstElementChild","setAttribute","style","transform","enableSelector","cartesianChartSize","export","clientHeight","calculateAutoPeriods","defaultPeriods","findRange","seriesXMin","seriesXMax","selected","min","max","interval","intervalType","exportElement","renderer","createGroup","availableSize","titleHeight","title","titleStyle","options","size","fontWeight","fontStyle","fontFamily","y","textElementSpan","font","parent","isMinus","redraw","isAnimate","forceAnimate","animateDuration","renderOptions","tspanElement","anchor","opacity","baseLine","htmlObject","createText","createTSpan","appendChild"],"sources":["C:/Users/shahj/OneDrive/Documents/GitHub/Admin Dashboard/Frontend/node_modules/@syncfusion/ej2-charts/src/stock-chart/renderer/toolbar-selector.js"],"sourcesContent":["import { titlePositionX, textElement, appendChildElement, getElement } from '../../common/utils/helper';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { Rect, TextOption, measureText, SvgRenderer } from '@syncfusion/ej2-svg-base';\nimport { remove } from '@syncfusion/ej2-base';\n/**\n * Period selector for range navigator\n */\n/** @private */\nvar ToolBarSelector = /** @class */ (function () {\n    function ToolBarSelector(chart) {\n        this.selectedSeries = '';\n        this.selectedIndicator = '';\n        this.selectedTrendLine = '';\n        this.indicators = [];\n        this.secondayIndicators = [];\n        this.stockChart = chart;\n        this.selectedSeries = this.stockChart.series[0].type;\n    }\n    ToolBarSelector.prototype.initializePeriodSelector = function () {\n        var periods = this.stockChart.tempPeriods;\n        this.stockChart.periods = periods;\n        this.stockChart.periodSelector.rootControl = this.stockChart;\n        var rect = this.stockChart.chart.chartAxisLayoutPanel.seriesClipRect;\n        var htmlElement = getElement(this.stockChart.element.id + '_Secondary_Element');\n        var height = this.stockChart.toolbarHeight;\n        this.stockChart.periodSelector.appendSelector({ thumbSize: 0, element: htmlElement, width: rect.width, height: height }, rect.x);\n        this.initializeSeriesSelector();\n        this.initializeIndicatorSelector();\n        this.initializeTrendlineSelector();\n        this.exportButton();\n        this.printButton();\n        this.resetButton();\n    };\n    /**\n     * This method returns itemModel for dropdown button\n     */\n    ToolBarSelector.prototype.getDropDownItems = function (type) {\n        var result = [];\n        if (type === this.stockChart.seriesType) {\n            for (var i = 0; i < type.length; i++) {\n                result.push({ text: '&nbsp;&nbsp;&nbsp;' + type[i].toString() });\n            }\n            for (var i = 0; i < this.stockChart.series.length; i++) {\n                for (var j = 0; j < result.length; j++) {\n                    var text = result[j].text.replace('&nbsp;&nbsp;&nbsp;', '');\n                    text = (text === 'OHLC') ? 'HiloOpenClose' : text;\n                    if (text === this.stockChart.series[i].type) {\n                        result[j].text = result[j].text.replace('&nbsp;&nbsp;&nbsp;', '&#10004&nbsp;');\n                    }\n                }\n            }\n        }\n        else if (type === this.stockChart.exportType) {\n            for (var i = 0; i < type.length; i++) {\n                result.push({ text: type[i].toString() });\n            }\n        }\n        else {\n            for (var i = 0; i < type.length; i++) {\n                if (type[i].toString() !== 'Print') {\n                    result.push({ text: '&nbsp;&nbsp;&nbsp;' + type[i].toString() });\n                }\n            }\n        }\n        return result;\n    };\n    /**\n     * This method changes the type of series while selectind series in dropdown button\n     */\n    ToolBarSelector.prototype.addedSeries = function (seriesType) {\n        var series = this.stockChart.series;\n        for (var i = 0; i < series.length; i++) {\n            if (series[i].yName === 'volume') {\n                continue;\n            }\n            series[i].type = (seriesType.indexOf('Candle') > -1 ? 'Candle' :\n                (seriesType.indexOf('OHLC') > -1 ? 'HiloOpenClose' : seriesType));\n            series[i].enableSolidCandles = seriesType === 'Candle';\n            for (var index = 0; index < series[i].trendlines.length; index++) {\n                var trendLine = series[i].trendlines[index];\n                trendLine.animation.enable = false;\n                trendLine.enableTooltip = false;\n            }\n        }\n    };\n    ToolBarSelector.prototype.initializeSeriesSelector = function () {\n        var _this = this;\n        var seriesType = new DropDownButton({\n            items: this.getDropDownItems(this.stockChart.seriesType),\n            select: function (args) {\n                _this.selectedSeries = args.item.text;\n                var text = _this.tickMark(args);\n                _this.addedSeries(text);\n                _this.stockChart.cartesianChart.initializeChart();\n                if (_this.stockChart.stockLegendModule && _this.stockChart.stockLegendModule.legendCollections.length\n                    && _this.stockChart.legendSettings.visible) {\n                    var bounds = _this.stockChart.stockLegendModule.legendBounds;\n                    _this.stockChart.stockLegendModule.renderLegend(_this.stockChart, _this.stockChart.legendSettings, bounds);\n                }\n            }\n        });\n        seriesType.appendTo('#' + this.stockChart.element.id + '_seriesType');\n    };\n    ToolBarSelector.prototype.resetButton = function () {\n        var _this = this;\n        var isProtect = 'isProtectedOnChange';\n        this.stockChart[isProtect] = true;\n        var reset = new Button();\n        reset.appendTo('#' + this.stockChart.element.id + '_reset');\n        document.getElementById(this.stockChart.element.id + '_reset').onclick = function () {\n            var indicatorlength = _this.indicators.length;\n            while (indicatorlength) {\n                _this.stockChart.indicators.pop();\n                indicatorlength--;\n            }\n            _this.indicators = [];\n            _this.secondayIndicators = [];\n            if (!_this.stockChart.isSingleAxis) {\n                if (_this.stockChart.rows.length > 2) {\n                    _this.stockChart.rows.splice(2, _this.stockChart.rows.length - 1);\n                }\n                if (_this.stockChart.axes.length > 2) {\n                    _this.stockChart.axes.splice(1, _this.stockChart.axes.length - 1);\n                    _this.stockChart.axes[0].rowIndex = 1;\n                }\n            }\n            else {\n                _this.stockChart.rows = [{}];\n            }\n            for (var i = 0; i < _this.stockChart.series.length; i++) {\n                if (_this.stockChart.series[i].yName === 'volume') {\n                    continue;\n                }\n                _this.stockChart.series[i].type = _this.stockChart.tempSeriesType[i];\n                if (_this.stockChart.series[i].trendlines.length !== 0) {\n                    _this.stockChart.series[i].trendlines[0].width = 0;\n                }\n            }\n            _this.stockChart.indicatorElements = null;\n            _this.stockChart.resizeTo = null;\n            _this.stockChart.zoomChange = false;\n            _this.stockChart.refresh();\n            _this.stockChart[isProtect] = true;\n        };\n    };\n    ToolBarSelector.prototype.initializeTrendlineSelector = function () {\n        var _this = this;\n        this.trendlineDropDown = new DropDownButton({\n            items: this.stockChart.resizeTo ? this.trendlineDropDown.items :\n                this.getDropDownItems(this.stockChart.trendlineType),\n            select: function (args) {\n                var text = _this.tickMark(args);\n                text = text.split(' ')[0].toLocaleLowerCase() + (text.split(' ')[1] ? text.split(' ')[1] : '');\n                text = text.substr(0, 1).toUpperCase() + text.substr(1);\n                var type = text;\n                _this.selectedTrendLine = _this.selectedTrendLine === '' ? type : _this.selectedTrendLine + ',' + type;\n                if (_this.trendline !== type) {\n                    _this.trendline = type;\n                    for (var i = 0; i < _this.stockChart.series.length; i++) {\n                        if (_this.stockChart.series[i].yName === 'volume') {\n                            continue;\n                        }\n                        if (_this.stockChart.series[0].trendlines.length === 0) {\n                            var trendlines = void 0;\n                            if (_this.stockChart.trendlinetriggered) {\n                                trendlines = [{ type: type, width: 1, enableTooltip: false }];\n                                _this.stockChart.trendlinetriggered = false;\n                            }\n                            _this.stockChart.series[0].trendlines = trendlines;\n                        }\n                        else {\n                            _this.stockChart.series[0].trendlines[0].width = 1;\n                            _this.stockChart.series[0].trendlines[0].type = type;\n                            _this.stockChart.series[0].trendlines[0].animation.enable = _this.stockChart.trendlinetriggered ? true : false;\n                        }\n                    }\n                    _this.stockChart.cartesianChart.initializeChart();\n                }\n                else {\n                    args.item.text = '&nbsp;&nbsp;&nbsp;' + args.item.text.replace('&#10004&nbsp;', '');\n                    _this.stockChart.series[0].trendlines[0].width = 0;\n                    _this.trendline = null;\n                    _this.stockChart.cartesianChart.initializeChart();\n                }\n            }\n        });\n        this.trendlineDropDown.appendTo('#' + this.stockChart.element.id + '_trendType');\n    };\n    ToolBarSelector.prototype.initializeIndicatorSelector = function () {\n        var _this = this;\n        this.indicatorDropDown = new DropDownButton({\n            items: this.stockChart.resizeTo ? this.indicatorDropDown.items :\n                this.getDropDownItems(this.stockChart.indicatorType),\n            select: function (args) {\n                for (var l = 0; l < _this.stockChart.series.length; l++) {\n                    if (_this.stockChart.series[l].trendlines.length !== 0) {\n                        _this.stockChart.series[l].trendlines[0].animation.enable = false;\n                    }\n                }\n                args.item.text = args.item.text.indexOf('&#10004&nbsp;') >= 0 ? args.item.text.substr(args.item.text.indexOf(';') + 1) :\n                    args.item.text;\n                var text = args.item.text.replace('&nbsp;&nbsp;&nbsp;', '');\n                text = text.split(' ')[0].toLocaleLowerCase() + (text.split(' ')[1] ? text.split(' ')[1] : '');\n                text = text.substr(0, 1).toUpperCase() + text.substr(1);\n                var type = text;\n                _this.selectedIndicator = _this.selectedIndicator.indexOf(type) === -1 ? _this.selectedIndicator + ' ' + type :\n                    _this.selectedIndicator.replace(type, '');\n                if (type === 'Tma' || type === 'BollingerBands' || type === 'Sma' || type === 'Ema') {\n                    if (_this.indicators.indexOf(type) === -1) {\n                        args.item.text = '&#10004&nbsp;' + args.item.text.replace('&nbsp;&nbsp;&nbsp;', '');\n                        var indicator = _this.getIndicator(type, _this.stockChart.series[0].yAxisName);\n                        _this.indicators.push(type);\n                        _this.stockChart.indicators = _this.stockChart.indicators.concat(indicator);\n                        _this.stockChart.cartesianChart.initializeChart();\n                    }\n                    else {\n                        args.item.text = '&nbsp;&nbsp;&nbsp;' + args.item.text;\n                        for (var z = 0; z < _this.stockChart.indicators.length; z++) {\n                            if (_this.stockChart.indicators[z].type === type) {\n                                _this.stockChart.indicators.splice(z, 1);\n                            }\n                        }\n                        _this.indicators.splice(_this.indicators.indexOf(type), 1);\n                        _this.stockChart.cartesianChart.initializeChart();\n                    }\n                }\n                else {\n                    _this.createIndicatorAxes(type, args);\n                }\n            }\n        });\n        this.indicatorDropDown.appendTo('#' + this.stockChart.element.id + '_indicatorType');\n    };\n    ToolBarSelector.prototype.getIndicator = function (type, yAxisName) {\n        var currentSeries = this.stockChart.series[0];\n        var indicator = [{\n                type: type, period: 3, yAxisName: yAxisName,\n                dataSource: currentSeries.localData,\n                xName: currentSeries.xName,\n                open: currentSeries.open,\n                close: currentSeries.close,\n                high: currentSeries.high,\n                low: currentSeries.low,\n                volume: currentSeries.volume,\n                fill: type === 'Sma' ? '#32CD32' : '#6063ff',\n                animation: { enable: false }, upperLine: { color: '#FFE200', width: 1 },\n                periodLine: { width: 2 }, lowerLine: { color: '#FAA512', width: 1 },\n                fastPeriod: 8, slowPeriod: 5, macdType: 'Both', width: 1,\n                macdPositiveColor: '#6EC992', macdNegativeColor: '#FF817F',\n                bandColor: 'rgba(245, 203, 35, 0.12)'\n            }];\n        return indicator;\n    };\n    ToolBarSelector.prototype.createIndicatorAxes = function (type, args) {\n        if (this.indicators.indexOf(type) === -1) {\n            args.item.text = '&#10004&nbsp;' + args.item.text.replace('&nbsp;&nbsp;&nbsp;', '');\n            this.indicators.push(type);\n            var len = this.stockChart.rows.length;\n            this.stockChart.rows[this.stockChart.rows.length - 1].height = '15%';\n            var row = [{ height: '' + (100 - len * 15) + 'px' }];\n            if (this.stockChart.rows.length === 1) {\n                this.stockChart.isSingleAxis = true;\n            }\n            this.stockChart.rows = this.stockChart.rows.concat(row);\n            if (!this.stockChart.isSingleAxis) {\n                this.stockChart.axes[0].rowIndex += 1;\n            }\n            else {\n                for (var i = 0; i < this.stockChart.axes.length; i++) {\n                    this.stockChart.axes[i].rowIndex += 1;\n                }\n            }\n            var axis = [{\n                    plotOffset: 10, opposedPosition: true,\n                    rowIndex: (!this.stockChart.isSingleAxis ? this.stockChart.axes.length : 0),\n                    desiredIntervals: 1,\n                    labelFormat: 'n2',\n                    majorGridLines: this.stockChart.primaryYAxis.majorGridLines,\n                    lineStyle: this.stockChart.primaryYAxis.lineStyle,\n                    labelPosition: this.stockChart.primaryYAxis.labelPosition,\n                    majorTickLines: this.stockChart.primaryYAxis.majorTickLines,\n                    rangePadding: 'None', name: type.toString()\n                }];\n            this.stockChart.axes = this.stockChart.axes.concat(axis);\n            this.stockChart.primaryYAxis.rowIndex = (!this.stockChart.isSingleAxis ? 0 : len + 1);\n            var indicator = this.getIndicator(type, type.toString());\n            this.stockChart.indicators = this.stockChart.indicators.concat(indicator);\n            this.stockChart.cartesianChart.initializeChart();\n        }\n        else {\n            args.item.text = '&nbsp;&nbsp;&nbsp;' + args.item.text;\n            for (var i = 0; i < this.stockChart.indicators.length; i++) {\n                if (this.stockChart.indicators[i].type === type) {\n                    this.stockChart.indicators.splice(i, 1);\n                }\n            }\n            this.indicators.splice(this.indicators.indexOf(type), 1);\n            var removedIndex = 0;\n            for (var z = 0; z < this.stockChart.axes.length; z++) {\n                if (this.stockChart.axes[z].name === type) {\n                    removedIndex = this.stockChart.axes[z].rowIndex;\n                    this.stockChart.rows.splice(z, 1);\n                    this.stockChart.axes.splice(z, 1);\n                }\n            }\n            for (var z = 0; z < this.stockChart.axes.length; z++) {\n                if (this.stockChart.axes[z].rowIndex !== 0 && this.stockChart.axes[z].rowIndex > removedIndex) {\n                    this.stockChart.axes[z].rowIndex = this.stockChart.axes[z].rowIndex - 1;\n                }\n            }\n            this.stockChart.cartesianChart.initializeChart();\n        }\n    };\n    ToolBarSelector.prototype.tickMark = function (args) {\n        var text;\n        var items = args.item['parentObj'].items;\n        for (var i = 0; i < items.length; i++) {\n            items[i].text = items[i].text.indexOf('&#10004&nbsp;') >= 0 ?\n                items[i].text.substr(items[i].text.indexOf(';') + 1) :\n                items[i].text;\n            if (!(items[i].text.indexOf('&nbsp;&nbsp;&nbsp;') >= 0)) {\n                items[i].text = '&nbsp;&nbsp;&nbsp;' + items[i].text;\n            }\n        }\n        if (args.item.text.indexOf('&nbsp;&nbsp;&nbsp;') >= 0) {\n            text = args.item.text.replace('&nbsp;&nbsp;&nbsp;', '');\n            args.item.text = args.item.text.replace('&nbsp;&nbsp;&nbsp;', '&#10004&nbsp;');\n        }\n        else {\n            text = args.item.text.replace('&#10004&nbsp;', '');\n        }\n        return text;\n    };\n    ToolBarSelector.prototype.printButton = function () {\n        var _this = this;\n        if (this.stockChart.exportType.indexOf('Print') > -1) {\n            var print_1 = new Button();\n            print_1.appendTo('#' + this.stockChart.element.id + '_print');\n            document.getElementById(this.stockChart.element.id + '_print').onclick = function () {\n                _this.stockChart.chart.print(_this.stockChart.element.id);\n            };\n        }\n    };\n    ToolBarSelector.prototype.exportButton = function () {\n        var _this = this;\n        var exportChart = new DropDownButton({\n            items: this.getDropDownItems(this.stockChart.exportType),\n            select: function (args) {\n                var type = args.item.text;\n                var stockChart = _this.stockChart;\n                var stockID = stockChart.element.id + '_stockChart_';\n                var additionalRect;\n                var svgHeight = stockChart.svgObject.getBoundingClientRect();\n                if (stockChart.chart.exportModule) {\n                    _this.stockChart.svgObject.insertAdjacentElement('afterbegin', _this.addExportSettings());\n                    additionalRect = stockChart.svgObject.firstElementChild.getBoundingClientRect();\n                    _this.stockChart.svgObject.setAttribute('height', (svgHeight.height + additionalRect.height).toString());\n                    getElement(stockID + 'chart').style.transform = 'translateY(' + additionalRect.height + 'px)';\n                    if (stockChart.enableSelector) {\n                        getElement(stockID + 'rangeSelector').setAttribute('transform', \n                        // eslint-disable-next-line @typescript-eslint/indent\n                        'translate(' + 0 + ',' + (stockChart.cartesianChart.cartesianChartSize.height + additionalRect.height) + ')');\n                    }\n                    if (_this.stockChart.legendSettings.visible && _this.stockChart.stockLegendModule) {\n                        getElement(stockChart.element.id + '_chart_legend_g').style.transform = 'translateY(' + additionalRect.height + 'px)';\n                    }\n                    stockChart.chart.exportModule.export(type, 'StockChart', null, [stockChart], null, stockChart.svgObject.clientHeight);\n                    remove(getElement(_this.stockChart.element.id + '_additionalExport'));\n                    getElement(stockID + 'chart').style.transform = 'translateY(0px)';\n                    if (stockChart.enableSelector) {\n                        getElement(stockID + 'rangeSelector').setAttribute('transform', \n                        // eslint-disable-next-line @typescript-eslint/indent\n                        'translate(' + 0 + ',' + (stockChart.cartesianChart.cartesianChartSize.height) + ')');\n                    }\n                    if (_this.stockChart.legendSettings.visible && _this.stockChart.stockLegendModule) {\n                        getElement(stockChart.element.id + '_chart_legend_g').style.transform = 'translateY(0px)';\n                    }\n                    _this.stockChart.svgObject.setAttribute('height', (svgHeight.height).toString());\n                }\n            }\n        });\n        exportChart.appendTo('#' + this.stockChart.element.id + '_export');\n    };\n    ToolBarSelector.prototype.calculateAutoPeriods = function () {\n        var defaultPeriods = [];\n        defaultPeriods = this.findRange(this.stockChart.seriesXMin, this.stockChart.seriesXMax);\n        defaultPeriods.push({ text: 'YTD', selected: true }, { text: 'All' });\n        return defaultPeriods;\n    };\n    ToolBarSelector.prototype.findRange = function (min, max) {\n        var defaultPeriods = [];\n        if (((max - min) / 3.154e+10) >= 1) {\n            defaultPeriods.push({ text: '1M', interval: 1, intervalType: 'Months' }, { text: '3M', interval: 3, intervalType: 'Months' }, { text: '6M', interval: 6, intervalType: 'Months' }, { text: '1Y', interval: 1, intervalType: 'Years' });\n        }\n        else if ((max - min) / 1.577e+10 >= 1) {\n            defaultPeriods.push({ text: '1M', interval: 1, intervalType: 'Months' }, { text: '3M', interval: 3, intervalType: 'Months' }, { text: '6M', interval: 6, intervalType: 'Months' });\n        }\n        else if ((max - min) / 2.628e+9 >= 1) {\n            defaultPeriods.push({ text: '1D', interval: 1, intervalType: 'Days' }, { text: '3W', interval: 3, intervalType: 'Weeks' }, { text: '1M', interval: 1, intervalType: 'Months' });\n        }\n        else if ((max - min) / 8.64e+7 >= 1) {\n            defaultPeriods.push({ text: '1H', interval: 1, intervalType: 'Hours' }, { text: '12H', interval: 12, intervalType: 'Hours' }, { text: '1D', interval: 1, intervalType: 'Days' });\n        }\n        return defaultPeriods;\n    };\n    /**\n     * Text elements added to while export the chart\n     * It details about the seriesTypes, indicatorTypes and Trendlines selected in chart.\n     */\n    ToolBarSelector.prototype.addExportSettings = function () {\n        var exportElement = this.stockChart.renderer.createGroup({\n            id: this.stockChart.element.id + '_additionalExport',\n            width: this.stockChart.availableSize.width\n        });\n        var titleHeight = measureText(this.stockChart.title, this.stockChart.titleStyle).height;\n        var options = new TextOption(exportElement.id + '_Title', titlePositionX(new Rect(0, 0, this.stockChart.availableSize.width, 0), this.stockChart.titleStyle), 0, 'middle', this.stockChart.title, '', 'text-before-edge');\n        textElement(this.stockChart.renderer, options, this.stockChart.titleStyle, this.stockChart.titleStyle.color, exportElement);\n        var style = { size: '15px', fontWeight: '500', color: null, fontStyle: 'Normal', fontFamily: 'Segoe UI' };\n        var x = measureText('Series: ' + this.selectedSeries, style).width / 2;\n        var y = titleHeight;\n        this.textElementSpan(new TextOption(exportElement.id + '_Series', x, y, 'start', ['Series : ', this.selectedSeries], '', 'text-before-edge'), style, 'black', exportElement);\n        x += measureText('Series: ' + this.selectedSeries + ' Z', style).width;\n        if (this.selectedIndicator !== '') {\n            this.textElementSpan(new TextOption(exportElement.id + '_Indicator', x, y, 'start', ['Indicator :', this.selectedIndicator], '', 'text-before-edge'), style, 'black', exportElement);\n            x += measureText('Indicator: ' + this.selectedIndicator + ' Z', style).width;\n        }\n        if (this.selectedTrendLine !== '') {\n            this.textElementSpan(new TextOption(exportElement.id + '_TrendLine', x, y, 'start', ['Trendline :', this.selectedTrendLine], '', 'text-before-edge'), style, 'black', exportElement);\n        }\n        return exportElement;\n    };\n    /** @private */\n    ToolBarSelector.prototype.textElementSpan = function (options, font, color, parent, isMinus, redraw, isAnimate, forceAnimate, animateDuration) {\n        if (isMinus === void 0) { isMinus = false; }\n        if (forceAnimate === void 0) { forceAnimate = false; }\n        var renderer = new SvgRenderer('');\n        var renderOptions = {};\n        var tspanElement;\n        renderOptions = {\n            'id': options.id,\n            'font-style': font.fontStyle,\n            'font-family': font.fontFamily,\n            'font-weight': font.fontWeight,\n            'text-anchor': options.anchor,\n            'x': options.x,\n            'y': options.y,\n            'fill': color,\n            'font-size': font.size,\n            'transform': options.transform,\n            'opacity': font.opacity,\n            'dominant-baseline': options.baseLine\n        };\n        var text = typeof options.text === 'string' ? options.text : isMinus ? options.text[options.text.length - 1] : options.text[0];\n        var htmlObject = renderer.createText(renderOptions, text);\n        if (typeof options.text !== 'string' && options.text.length > 1) {\n            for (var i = 1, len = options.text.length; i < len; i++) {\n                options.text[i] = ' ' + options.text[i];\n                tspanElement = renderer.createTSpan({\n                    'x': options.x + measureText(text, font).width + 5, 'id': options.id,\n                    'y': (options.y), opacity: 0.5\n                }, options.text[i]);\n                htmlObject.appendChild(tspanElement);\n            }\n        }\n        appendChildElement(false, parent, htmlObject, redraw, isAnimate, 'x', 'y', null, null, forceAnimate, false, null, animateDuration);\n        return htmlObject;\n    };\n    return ToolBarSelector;\n}());\nexport { ToolBarSelector };\n"],"mappings":"AAAA,SAASA,cAAT,EAAyBC,WAAzB,EAAsCC,kBAAtC,EAA0DC,UAA1D,QAA4E,2BAA5E;AACA,SAASC,cAAT,QAA+B,8BAA/B;AACA,SAASC,MAAT,QAAuB,yBAAvB;AACA,SAASC,IAAT,EAAeC,UAAf,EAA2BC,WAA3B,EAAwCC,WAAxC,QAA2D,0BAA3D;AACA,SAASC,MAAT,QAAuB,sBAAvB;AACA;AACA;AACA;;AACA;;AACA,IAAIC,eAAe;AAAG;AAAe,YAAY;EAC7C,SAASA,eAAT,CAAyBC,KAAzB,EAAgC;IAC5B,KAAKC,cAAL,GAAsB,EAAtB;IACA,KAAKC,iBAAL,GAAyB,EAAzB;IACA,KAAKC,iBAAL,GAAyB,EAAzB;IACA,KAAKC,UAAL,GAAkB,EAAlB;IACA,KAAKC,kBAAL,GAA0B,EAA1B;IACA,KAAKC,UAAL,GAAkBN,KAAlB;IACA,KAAKC,cAAL,GAAsB,KAAKK,UAAL,CAAgBC,MAAhB,CAAuB,CAAvB,EAA0BC,IAAhD;EACH;;EACDT,eAAe,CAACU,SAAhB,CAA0BC,wBAA1B,GAAqD,YAAY;IAC7D,IAAIC,OAAO,GAAG,KAAKL,UAAL,CAAgBM,WAA9B;IACA,KAAKN,UAAL,CAAgBK,OAAhB,GAA0BA,OAA1B;IACA,KAAKL,UAAL,CAAgBO,cAAhB,CAA+BC,WAA/B,GAA6C,KAAKR,UAAlD;IACA,IAAIS,IAAI,GAAG,KAAKT,UAAL,CAAgBN,KAAhB,CAAsBgB,oBAAtB,CAA2CC,cAAtD;IACA,IAAIC,WAAW,GAAG3B,UAAU,CAAC,KAAKe,UAAL,CAAgBa,OAAhB,CAAwBC,EAAxB,GAA6B,oBAA9B,CAA5B;IACA,IAAIC,MAAM,GAAG,KAAKf,UAAL,CAAgBgB,aAA7B;IACA,KAAKhB,UAAL,CAAgBO,cAAhB,CAA+BU,cAA/B,CAA8C;MAAEC,SAAS,EAAE,CAAb;MAAgBL,OAAO,EAAED,WAAzB;MAAsCO,KAAK,EAAEV,IAAI,CAACU,KAAlD;MAAyDJ,MAAM,EAAEA;IAAjE,CAA9C,EAAyHN,IAAI,CAACW,CAA9H;IACA,KAAKC,wBAAL;IACA,KAAKC,2BAAL;IACA,KAAKC,2BAAL;IACA,KAAKC,YAAL;IACA,KAAKC,WAAL;IACA,KAAKC,WAAL;EACH,CAdD;EAeA;AACJ;AACA;;;EACIjC,eAAe,CAACU,SAAhB,CAA0BwB,gBAA1B,GAA6C,UAAUzB,IAAV,EAAgB;IACzD,IAAI0B,MAAM,GAAG,EAAb;;IACA,IAAI1B,IAAI,KAAK,KAAKF,UAAL,CAAgB6B,UAA7B,EAAyC;MACrC,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG5B,IAAI,CAAC6B,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;QAClCF,MAAM,CAACI,IAAP,CAAY;UAAEC,IAAI,EAAE,uBAAuB/B,IAAI,CAAC4B,CAAD,CAAJ,CAAQI,QAAR;QAA/B,CAAZ;MACH;;MACD,KAAK,IAAIJ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK9B,UAAL,CAAgBC,MAAhB,CAAuB8B,MAA3C,EAAmDD,CAAC,EAApD,EAAwD;QACpD,KAAK,IAAIK,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGP,MAAM,CAACG,MAA3B,EAAmCI,CAAC,EAApC,EAAwC;UACpC,IAAIF,IAAI,GAAGL,MAAM,CAACO,CAAD,CAAN,CAAUF,IAAV,CAAeG,OAAf,CAAuB,oBAAvB,EAA6C,EAA7C,CAAX;UACAH,IAAI,GAAIA,IAAI,KAAK,MAAV,GAAoB,eAApB,GAAsCA,IAA7C;;UACA,IAAIA,IAAI,KAAK,KAAKjC,UAAL,CAAgBC,MAAhB,CAAuB6B,CAAvB,EAA0B5B,IAAvC,EAA6C;YACzC0B,MAAM,CAACO,CAAD,CAAN,CAAUF,IAAV,GAAiBL,MAAM,CAACO,CAAD,CAAN,CAAUF,IAAV,CAAeG,OAAf,CAAuB,oBAAvB,EAA6C,eAA7C,CAAjB;UACH;QACJ;MACJ;IACJ,CAbD,MAcK,IAAIlC,IAAI,KAAK,KAAKF,UAAL,CAAgBqC,UAA7B,EAAyC;MAC1C,KAAK,IAAIP,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG5B,IAAI,CAAC6B,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;QAClCF,MAAM,CAACI,IAAP,CAAY;UAAEC,IAAI,EAAE/B,IAAI,CAAC4B,CAAD,CAAJ,CAAQI,QAAR;QAAR,CAAZ;MACH;IACJ,CAJI,MAKA;MACD,KAAK,IAAIJ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG5B,IAAI,CAAC6B,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;QAClC,IAAI5B,IAAI,CAAC4B,CAAD,CAAJ,CAAQI,QAAR,OAAuB,OAA3B,EAAoC;UAChCN,MAAM,CAACI,IAAP,CAAY;YAAEC,IAAI,EAAE,uBAAuB/B,IAAI,CAAC4B,CAAD,CAAJ,CAAQI,QAAR;UAA/B,CAAZ;QACH;MACJ;IACJ;;IACD,OAAON,MAAP;EACH,CA7BD;EA8BA;AACJ;AACA;;;EACInC,eAAe,CAACU,SAAhB,CAA0BmC,WAA1B,GAAwC,UAAUT,UAAV,EAAsB;IAC1D,IAAI5B,MAAM,GAAG,KAAKD,UAAL,CAAgBC,MAA7B;;IACA,KAAK,IAAI6B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG7B,MAAM,CAAC8B,MAA3B,EAAmCD,CAAC,EAApC,EAAwC;MACpC,IAAI7B,MAAM,CAAC6B,CAAD,CAAN,CAAUS,KAAV,KAAoB,QAAxB,EAAkC;QAC9B;MACH;;MACDtC,MAAM,CAAC6B,CAAD,CAAN,CAAU5B,IAAV,GAAkB2B,UAAU,CAACW,OAAX,CAAmB,QAAnB,IAA+B,CAAC,CAAhC,GAAoC,QAApC,GACbX,UAAU,CAACW,OAAX,CAAmB,MAAnB,IAA6B,CAAC,CAA9B,GAAkC,eAAlC,GAAoDX,UADzD;MAEA5B,MAAM,CAAC6B,CAAD,CAAN,CAAUW,kBAAV,GAA+BZ,UAAU,KAAK,QAA9C;;MACA,KAAK,IAAIa,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGzC,MAAM,CAAC6B,CAAD,CAAN,CAAUa,UAAV,CAAqBZ,MAAjD,EAAyDW,KAAK,EAA9D,EAAkE;QAC9D,IAAIE,SAAS,GAAG3C,MAAM,CAAC6B,CAAD,CAAN,CAAUa,UAAV,CAAqBD,KAArB,CAAhB;QACAE,SAAS,CAACC,SAAV,CAAoBC,MAApB,GAA6B,KAA7B;QACAF,SAAS,CAACG,aAAV,GAA0B,KAA1B;MACH;IACJ;EACJ,CAfD;;EAgBAtD,eAAe,CAACU,SAAhB,CAA0BkB,wBAA1B,GAAqD,YAAY;IAC7D,IAAI2B,KAAK,GAAG,IAAZ;;IACA,IAAInB,UAAU,GAAG,IAAI3C,cAAJ,CAAmB;MAChC+D,KAAK,EAAE,KAAKtB,gBAAL,CAAsB,KAAK3B,UAAL,CAAgB6B,UAAtC,CADyB;MAEhCqB,MAAM,EAAE,UAAUC,IAAV,EAAgB;QACpBH,KAAK,CAACrD,cAAN,GAAuBwD,IAAI,CAACC,IAAL,CAAUnB,IAAjC;;QACA,IAAIA,IAAI,GAAGe,KAAK,CAACK,QAAN,CAAeF,IAAf,CAAX;;QACAH,KAAK,CAACV,WAAN,CAAkBL,IAAlB;;QACAe,KAAK,CAAChD,UAAN,CAAiBsD,cAAjB,CAAgCC,eAAhC;;QACA,IAAIP,KAAK,CAAChD,UAAN,CAAiBwD,iBAAjB,IAAsCR,KAAK,CAAChD,UAAN,CAAiBwD,iBAAjB,CAAmCC,iBAAnC,CAAqD1B,MAA3F,IACGiB,KAAK,CAAChD,UAAN,CAAiB0D,cAAjB,CAAgCC,OADvC,EACgD;UAC5C,IAAIC,MAAM,GAAGZ,KAAK,CAAChD,UAAN,CAAiBwD,iBAAjB,CAAmCK,YAAhD;;UACAb,KAAK,CAAChD,UAAN,CAAiBwD,iBAAjB,CAAmCM,YAAnC,CAAgDd,KAAK,CAAChD,UAAtD,EAAkEgD,KAAK,CAAChD,UAAN,CAAiB0D,cAAnF,EAAmGE,MAAnG;QACH;MACJ;IAZ+B,CAAnB,CAAjB;IAcA/B,UAAU,CAACkC,QAAX,CAAoB,MAAM,KAAK/D,UAAL,CAAgBa,OAAhB,CAAwBC,EAA9B,GAAmC,aAAvD;EACH,CAjBD;;EAkBArB,eAAe,CAACU,SAAhB,CAA0BuB,WAA1B,GAAwC,YAAY;IAChD,IAAIsB,KAAK,GAAG,IAAZ;;IACA,IAAIgB,SAAS,GAAG,qBAAhB;IACA,KAAKhE,UAAL,CAAgBgE,SAAhB,IAA6B,IAA7B;IACA,IAAIC,KAAK,GAAG,IAAI9E,MAAJ,EAAZ;IACA8E,KAAK,CAACF,QAAN,CAAe,MAAM,KAAK/D,UAAL,CAAgBa,OAAhB,CAAwBC,EAA9B,GAAmC,QAAlD;;IACAoD,QAAQ,CAACC,cAAT,CAAwB,KAAKnE,UAAL,CAAgBa,OAAhB,CAAwBC,EAAxB,GAA6B,QAArD,EAA+DsD,OAA/D,GAAyE,YAAY;MACjF,IAAIC,eAAe,GAAGrB,KAAK,CAAClD,UAAN,CAAiBiC,MAAvC;;MACA,OAAOsC,eAAP,EAAwB;QACpBrB,KAAK,CAAChD,UAAN,CAAiBF,UAAjB,CAA4BwE,GAA5B;;QACAD,eAAe;MAClB;;MACDrB,KAAK,CAAClD,UAAN,GAAmB,EAAnB;MACAkD,KAAK,CAACjD,kBAAN,GAA2B,EAA3B;;MACA,IAAI,CAACiD,KAAK,CAAChD,UAAN,CAAiBuE,YAAtB,EAAoC;QAChC,IAAIvB,KAAK,CAAChD,UAAN,CAAiBwE,IAAjB,CAAsBzC,MAAtB,GAA+B,CAAnC,EAAsC;UAClCiB,KAAK,CAAChD,UAAN,CAAiBwE,IAAjB,CAAsBC,MAAtB,CAA6B,CAA7B,EAAgCzB,KAAK,CAAChD,UAAN,CAAiBwE,IAAjB,CAAsBzC,MAAtB,GAA+B,CAA/D;QACH;;QACD,IAAIiB,KAAK,CAAChD,UAAN,CAAiB0E,IAAjB,CAAsB3C,MAAtB,GAA+B,CAAnC,EAAsC;UAClCiB,KAAK,CAAChD,UAAN,CAAiB0E,IAAjB,CAAsBD,MAAtB,CAA6B,CAA7B,EAAgCzB,KAAK,CAAChD,UAAN,CAAiB0E,IAAjB,CAAsB3C,MAAtB,GAA+B,CAA/D;;UACAiB,KAAK,CAAChD,UAAN,CAAiB0E,IAAjB,CAAsB,CAAtB,EAAyBC,QAAzB,GAAoC,CAApC;QACH;MACJ,CARD,MASK;QACD3B,KAAK,CAAChD,UAAN,CAAiBwE,IAAjB,GAAwB,CAAC,EAAD,CAAxB;MACH;;MACD,KAAK,IAAI1C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkB,KAAK,CAAChD,UAAN,CAAiBC,MAAjB,CAAwB8B,MAA5C,EAAoDD,CAAC,EAArD,EAAyD;QACrD,IAAIkB,KAAK,CAAChD,UAAN,CAAiBC,MAAjB,CAAwB6B,CAAxB,EAA2BS,KAA3B,KAAqC,QAAzC,EAAmD;UAC/C;QACH;;QACDS,KAAK,CAAChD,UAAN,CAAiBC,MAAjB,CAAwB6B,CAAxB,EAA2B5B,IAA3B,GAAkC8C,KAAK,CAAChD,UAAN,CAAiB4E,cAAjB,CAAgC9C,CAAhC,CAAlC;;QACA,IAAIkB,KAAK,CAAChD,UAAN,CAAiBC,MAAjB,CAAwB6B,CAAxB,EAA2Ba,UAA3B,CAAsCZ,MAAtC,KAAiD,CAArD,EAAwD;UACpDiB,KAAK,CAAChD,UAAN,CAAiBC,MAAjB,CAAwB6B,CAAxB,EAA2Ba,UAA3B,CAAsC,CAAtC,EAAyCxB,KAAzC,GAAiD,CAAjD;QACH;MACJ;;MACD6B,KAAK,CAAChD,UAAN,CAAiB6E,iBAAjB,GAAqC,IAArC;MACA7B,KAAK,CAAChD,UAAN,CAAiB8E,QAAjB,GAA4B,IAA5B;MACA9B,KAAK,CAAChD,UAAN,CAAiB+E,UAAjB,GAA8B,KAA9B;;MACA/B,KAAK,CAAChD,UAAN,CAAiBgF,OAAjB;;MACAhC,KAAK,CAAChD,UAAN,CAAiBgE,SAAjB,IAA8B,IAA9B;IACH,CAlCD;EAmCH,CAzCD;;EA0CAvE,eAAe,CAACU,SAAhB,CAA0BoB,2BAA1B,GAAwD,YAAY;IAChE,IAAIyB,KAAK,GAAG,IAAZ;;IACA,KAAKiC,iBAAL,GAAyB,IAAI/F,cAAJ,CAAmB;MACxC+D,KAAK,EAAE,KAAKjD,UAAL,CAAgB8E,QAAhB,GAA2B,KAAKG,iBAAL,CAAuBhC,KAAlD,GACH,KAAKtB,gBAAL,CAAsB,KAAK3B,UAAL,CAAgBkF,aAAtC,CAFoC;MAGxChC,MAAM,EAAE,UAAUC,IAAV,EAAgB;QACpB,IAAIlB,IAAI,GAAGe,KAAK,CAACK,QAAN,CAAeF,IAAf,CAAX;;QACAlB,IAAI,GAAGA,IAAI,CAACkD,KAAL,CAAW,GAAX,EAAgB,CAAhB,EAAmBC,iBAAnB,MAA0CnD,IAAI,CAACkD,KAAL,CAAW,GAAX,EAAgB,CAAhB,IAAqBlD,IAAI,CAACkD,KAAL,CAAW,GAAX,EAAgB,CAAhB,CAArB,GAA0C,EAApF,CAAP;QACAlD,IAAI,GAAGA,IAAI,CAACoD,MAAL,CAAY,CAAZ,EAAe,CAAf,EAAkBC,WAAlB,KAAkCrD,IAAI,CAACoD,MAAL,CAAY,CAAZ,CAAzC;QACA,IAAInF,IAAI,GAAG+B,IAAX;QACAe,KAAK,CAACnD,iBAAN,GAA0BmD,KAAK,CAACnD,iBAAN,KAA4B,EAA5B,GAAiCK,IAAjC,GAAwC8C,KAAK,CAACnD,iBAAN,GAA0B,GAA1B,GAAgCK,IAAlG;;QACA,IAAI8C,KAAK,CAACuC,SAAN,KAAoBrF,IAAxB,EAA8B;UAC1B8C,KAAK,CAACuC,SAAN,GAAkBrF,IAAlB;;UACA,KAAK,IAAI4B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkB,KAAK,CAAChD,UAAN,CAAiBC,MAAjB,CAAwB8B,MAA5C,EAAoDD,CAAC,EAArD,EAAyD;YACrD,IAAIkB,KAAK,CAAChD,UAAN,CAAiBC,MAAjB,CAAwB6B,CAAxB,EAA2BS,KAA3B,KAAqC,QAAzC,EAAmD;cAC/C;YACH;;YACD,IAAIS,KAAK,CAAChD,UAAN,CAAiBC,MAAjB,CAAwB,CAAxB,EAA2B0C,UAA3B,CAAsCZ,MAAtC,KAAiD,CAArD,EAAwD;cACpD,IAAIY,UAAU,GAAG,KAAK,CAAtB;;cACA,IAAIK,KAAK,CAAChD,UAAN,CAAiBwF,kBAArB,EAAyC;gBACrC7C,UAAU,GAAG,CAAC;kBAAEzC,IAAI,EAAEA,IAAR;kBAAciB,KAAK,EAAE,CAArB;kBAAwB4B,aAAa,EAAE;gBAAvC,CAAD,CAAb;gBACAC,KAAK,CAAChD,UAAN,CAAiBwF,kBAAjB,GAAsC,KAAtC;cACH;;cACDxC,KAAK,CAAChD,UAAN,CAAiBC,MAAjB,CAAwB,CAAxB,EAA2B0C,UAA3B,GAAwCA,UAAxC;YACH,CAPD,MAQK;cACDK,KAAK,CAAChD,UAAN,CAAiBC,MAAjB,CAAwB,CAAxB,EAA2B0C,UAA3B,CAAsC,CAAtC,EAAyCxB,KAAzC,GAAiD,CAAjD;cACA6B,KAAK,CAAChD,UAAN,CAAiBC,MAAjB,CAAwB,CAAxB,EAA2B0C,UAA3B,CAAsC,CAAtC,EAAyCzC,IAAzC,GAAgDA,IAAhD;cACA8C,KAAK,CAAChD,UAAN,CAAiBC,MAAjB,CAAwB,CAAxB,EAA2B0C,UAA3B,CAAsC,CAAtC,EAAyCE,SAAzC,CAAmDC,MAAnD,GAA4DE,KAAK,CAAChD,UAAN,CAAiBwF,kBAAjB,GAAsC,IAAtC,GAA6C,KAAzG;YACH;UACJ;;UACDxC,KAAK,CAAChD,UAAN,CAAiBsD,cAAjB,CAAgCC,eAAhC;QACH,CArBD,MAsBK;UACDJ,IAAI,CAACC,IAAL,CAAUnB,IAAV,GAAiB,uBAAuBkB,IAAI,CAACC,IAAL,CAAUnB,IAAV,CAAeG,OAAf,CAAuB,eAAvB,EAAwC,EAAxC,CAAxC;UACAY,KAAK,CAAChD,UAAN,CAAiBC,MAAjB,CAAwB,CAAxB,EAA2B0C,UAA3B,CAAsC,CAAtC,EAAyCxB,KAAzC,GAAiD,CAAjD;UACA6B,KAAK,CAACuC,SAAN,GAAkB,IAAlB;;UACAvC,KAAK,CAAChD,UAAN,CAAiBsD,cAAjB,CAAgCC,eAAhC;QACH;MACJ;IArCuC,CAAnB,CAAzB;IAuCA,KAAK0B,iBAAL,CAAuBlB,QAAvB,CAAgC,MAAM,KAAK/D,UAAL,CAAgBa,OAAhB,CAAwBC,EAA9B,GAAmC,YAAnE;EACH,CA1CD;;EA2CArB,eAAe,CAACU,SAAhB,CAA0BmB,2BAA1B,GAAwD,YAAY;IAChE,IAAI0B,KAAK,GAAG,IAAZ;;IACA,KAAKyC,iBAAL,GAAyB,IAAIvG,cAAJ,CAAmB;MACxC+D,KAAK,EAAE,KAAKjD,UAAL,CAAgB8E,QAAhB,GAA2B,KAAKW,iBAAL,CAAuBxC,KAAlD,GACH,KAAKtB,gBAAL,CAAsB,KAAK3B,UAAL,CAAgB0F,aAAtC,CAFoC;MAGxCxC,MAAM,EAAE,UAAUC,IAAV,EAAgB;QACpB,KAAK,IAAIwC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG3C,KAAK,CAAChD,UAAN,CAAiBC,MAAjB,CAAwB8B,MAA5C,EAAoD4D,CAAC,EAArD,EAAyD;UACrD,IAAI3C,KAAK,CAAChD,UAAN,CAAiBC,MAAjB,CAAwB0F,CAAxB,EAA2BhD,UAA3B,CAAsCZ,MAAtC,KAAiD,CAArD,EAAwD;YACpDiB,KAAK,CAAChD,UAAN,CAAiBC,MAAjB,CAAwB0F,CAAxB,EAA2BhD,UAA3B,CAAsC,CAAtC,EAAyCE,SAAzC,CAAmDC,MAAnD,GAA4D,KAA5D;UACH;QACJ;;QACDK,IAAI,CAACC,IAAL,CAAUnB,IAAV,GAAiBkB,IAAI,CAACC,IAAL,CAAUnB,IAAV,CAAeO,OAAf,CAAuB,eAAvB,KAA2C,CAA3C,GAA+CW,IAAI,CAACC,IAAL,CAAUnB,IAAV,CAAeoD,MAAf,CAAsBlC,IAAI,CAACC,IAAL,CAAUnB,IAAV,CAAeO,OAAf,CAAuB,GAAvB,IAA8B,CAApD,CAA/C,GACbW,IAAI,CAACC,IAAL,CAAUnB,IADd;QAEA,IAAIA,IAAI,GAAGkB,IAAI,CAACC,IAAL,CAAUnB,IAAV,CAAeG,OAAf,CAAuB,oBAAvB,EAA6C,EAA7C,CAAX;QACAH,IAAI,GAAGA,IAAI,CAACkD,KAAL,CAAW,GAAX,EAAgB,CAAhB,EAAmBC,iBAAnB,MAA0CnD,IAAI,CAACkD,KAAL,CAAW,GAAX,EAAgB,CAAhB,IAAqBlD,IAAI,CAACkD,KAAL,CAAW,GAAX,EAAgB,CAAhB,CAArB,GAA0C,EAApF,CAAP;QACAlD,IAAI,GAAGA,IAAI,CAACoD,MAAL,CAAY,CAAZ,EAAe,CAAf,EAAkBC,WAAlB,KAAkCrD,IAAI,CAACoD,MAAL,CAAY,CAAZ,CAAzC;QACA,IAAInF,IAAI,GAAG+B,IAAX;QACAe,KAAK,CAACpD,iBAAN,GAA0BoD,KAAK,CAACpD,iBAAN,CAAwB4C,OAAxB,CAAgCtC,IAAhC,MAA0C,CAAC,CAA3C,GAA+C8C,KAAK,CAACpD,iBAAN,GAA0B,GAA1B,GAAgCM,IAA/E,GACtB8C,KAAK,CAACpD,iBAAN,CAAwBwC,OAAxB,CAAgClC,IAAhC,EAAsC,EAAtC,CADJ;;QAEA,IAAIA,IAAI,KAAK,KAAT,IAAkBA,IAAI,KAAK,gBAA3B,IAA+CA,IAAI,KAAK,KAAxD,IAAiEA,IAAI,KAAK,KAA9E,EAAqF;UACjF,IAAI8C,KAAK,CAAClD,UAAN,CAAiB0C,OAAjB,CAAyBtC,IAAzB,MAAmC,CAAC,CAAxC,EAA2C;YACvCiD,IAAI,CAACC,IAAL,CAAUnB,IAAV,GAAiB,kBAAkBkB,IAAI,CAACC,IAAL,CAAUnB,IAAV,CAAeG,OAAf,CAAuB,oBAAvB,EAA6C,EAA7C,CAAnC;;YACA,IAAIwD,SAAS,GAAG5C,KAAK,CAAC6C,YAAN,CAAmB3F,IAAnB,EAAyB8C,KAAK,CAAChD,UAAN,CAAiBC,MAAjB,CAAwB,CAAxB,EAA2B6F,SAApD,CAAhB;;YACA9C,KAAK,CAAClD,UAAN,CAAiBkC,IAAjB,CAAsB9B,IAAtB;;YACA8C,KAAK,CAAChD,UAAN,CAAiBF,UAAjB,GAA8BkD,KAAK,CAAChD,UAAN,CAAiBF,UAAjB,CAA4BiG,MAA5B,CAAmCH,SAAnC,CAA9B;;YACA5C,KAAK,CAAChD,UAAN,CAAiBsD,cAAjB,CAAgCC,eAAhC;UACH,CAND,MAOK;YACDJ,IAAI,CAACC,IAAL,CAAUnB,IAAV,GAAiB,uBAAuBkB,IAAI,CAACC,IAAL,CAAUnB,IAAlD;;YACA,KAAK,IAAI+D,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGhD,KAAK,CAAChD,UAAN,CAAiBF,UAAjB,CAA4BiC,MAAhD,EAAwDiE,CAAC,EAAzD,EAA6D;cACzD,IAAIhD,KAAK,CAAChD,UAAN,CAAiBF,UAAjB,CAA4BkG,CAA5B,EAA+B9F,IAA/B,KAAwCA,IAA5C,EAAkD;gBAC9C8C,KAAK,CAAChD,UAAN,CAAiBF,UAAjB,CAA4B2E,MAA5B,CAAmCuB,CAAnC,EAAsC,CAAtC;cACH;YACJ;;YACDhD,KAAK,CAAClD,UAAN,CAAiB2E,MAAjB,CAAwBzB,KAAK,CAAClD,UAAN,CAAiB0C,OAAjB,CAAyBtC,IAAzB,CAAxB,EAAwD,CAAxD;;YACA8C,KAAK,CAAChD,UAAN,CAAiBsD,cAAjB,CAAgCC,eAAhC;UACH;QACJ,CAlBD,MAmBK;UACDP,KAAK,CAACiD,mBAAN,CAA0B/F,IAA1B,EAAgCiD,IAAhC;QACH;MACJ;IAvCuC,CAAnB,CAAzB;IAyCA,KAAKsC,iBAAL,CAAuB1B,QAAvB,CAAgC,MAAM,KAAK/D,UAAL,CAAgBa,OAAhB,CAAwBC,EAA9B,GAAmC,gBAAnE;EACH,CA5CD;;EA6CArB,eAAe,CAACU,SAAhB,CAA0B0F,YAA1B,GAAyC,UAAU3F,IAAV,EAAgB4F,SAAhB,EAA2B;IAChE,IAAII,aAAa,GAAG,KAAKlG,UAAL,CAAgBC,MAAhB,CAAuB,CAAvB,CAApB;IACA,IAAI2F,SAAS,GAAG,CAAC;MACT1F,IAAI,EAAEA,IADG;MACGiG,MAAM,EAAE,CADX;MACcL,SAAS,EAAEA,SADzB;MAETM,UAAU,EAAEF,aAAa,CAACG,SAFjB;MAGTC,KAAK,EAAEJ,aAAa,CAACI,KAHZ;MAITC,IAAI,EAAEL,aAAa,CAACK,IAJX;MAKTC,KAAK,EAAEN,aAAa,CAACM,KALZ;MAMTC,IAAI,EAAEP,aAAa,CAACO,IANX;MAOTC,GAAG,EAAER,aAAa,CAACQ,GAPV;MAQTC,MAAM,EAAET,aAAa,CAACS,MARb;MASTC,IAAI,EAAE1G,IAAI,KAAK,KAAT,GAAiB,SAAjB,GAA6B,SAT1B;MAUT2C,SAAS,EAAE;QAAEC,MAAM,EAAE;MAAV,CAVF;MAUqB+D,SAAS,EAAE;QAAEC,KAAK,EAAE,SAAT;QAAoB3F,KAAK,EAAE;MAA3B,CAVhC;MAWT4F,UAAU,EAAE;QAAE5F,KAAK,EAAE;MAAT,CAXH;MAWiB6F,SAAS,EAAE;QAAEF,KAAK,EAAE,SAAT;QAAoB3F,KAAK,EAAE;MAA3B,CAX5B;MAYT8F,UAAU,EAAE,CAZH;MAYMC,UAAU,EAAE,CAZlB;MAYqBC,QAAQ,EAAE,MAZ/B;MAYuChG,KAAK,EAAE,CAZ9C;MAaTiG,iBAAiB,EAAE,SAbV;MAaqBC,iBAAiB,EAAE,SAbxC;MAcTC,SAAS,EAAE;IAdF,CAAD,CAAhB;IAgBA,OAAO1B,SAAP;EACH,CAnBD;;EAoBAnG,eAAe,CAACU,SAAhB,CAA0B8F,mBAA1B,GAAgD,UAAU/F,IAAV,EAAgBiD,IAAhB,EAAsB;IAClE,IAAI,KAAKrD,UAAL,CAAgB0C,OAAhB,CAAwBtC,IAAxB,MAAkC,CAAC,CAAvC,EAA0C;MACtCiD,IAAI,CAACC,IAAL,CAAUnB,IAAV,GAAiB,kBAAkBkB,IAAI,CAACC,IAAL,CAAUnB,IAAV,CAAeG,OAAf,CAAuB,oBAAvB,EAA6C,EAA7C,CAAnC;MACA,KAAKtC,UAAL,CAAgBkC,IAAhB,CAAqB9B,IAArB;MACA,IAAIqH,GAAG,GAAG,KAAKvH,UAAL,CAAgBwE,IAAhB,CAAqBzC,MAA/B;MACA,KAAK/B,UAAL,CAAgBwE,IAAhB,CAAqB,KAAKxE,UAAL,CAAgBwE,IAAhB,CAAqBzC,MAArB,GAA8B,CAAnD,EAAsDhB,MAAtD,GAA+D,KAA/D;MACA,IAAIyG,GAAG,GAAG,CAAC;QAAEzG,MAAM,EAAE,MAAM,MAAMwG,GAAG,GAAG,EAAlB,IAAwB;MAAlC,CAAD,CAAV;;MACA,IAAI,KAAKvH,UAAL,CAAgBwE,IAAhB,CAAqBzC,MAArB,KAAgC,CAApC,EAAuC;QACnC,KAAK/B,UAAL,CAAgBuE,YAAhB,GAA+B,IAA/B;MACH;;MACD,KAAKvE,UAAL,CAAgBwE,IAAhB,GAAuB,KAAKxE,UAAL,CAAgBwE,IAAhB,CAAqBuB,MAArB,CAA4ByB,GAA5B,CAAvB;;MACA,IAAI,CAAC,KAAKxH,UAAL,CAAgBuE,YAArB,EAAmC;QAC/B,KAAKvE,UAAL,CAAgB0E,IAAhB,CAAqB,CAArB,EAAwBC,QAAxB,IAAoC,CAApC;MACH,CAFD,MAGK;QACD,KAAK,IAAI7C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK9B,UAAL,CAAgB0E,IAAhB,CAAqB3C,MAAzC,EAAiDD,CAAC,EAAlD,EAAsD;UAClD,KAAK9B,UAAL,CAAgB0E,IAAhB,CAAqB5C,CAArB,EAAwB6C,QAAxB,IAAoC,CAApC;QACH;MACJ;;MACD,IAAI8C,IAAI,GAAG,CAAC;QACJC,UAAU,EAAE,EADR;QACYC,eAAe,EAAE,IAD7B;QAEJhD,QAAQ,EAAG,CAAC,KAAK3E,UAAL,CAAgBuE,YAAjB,GAAgC,KAAKvE,UAAL,CAAgB0E,IAAhB,CAAqB3C,MAArD,GAA8D,CAFrE;QAGJ6F,gBAAgB,EAAE,CAHd;QAIJC,WAAW,EAAE,IAJT;QAKJC,cAAc,EAAE,KAAK9H,UAAL,CAAgB+H,YAAhB,CAA6BD,cALzC;QAMJE,SAAS,EAAE,KAAKhI,UAAL,CAAgB+H,YAAhB,CAA6BC,SANpC;QAOJC,aAAa,EAAE,KAAKjI,UAAL,CAAgB+H,YAAhB,CAA6BE,aAPxC;QAQJC,cAAc,EAAE,KAAKlI,UAAL,CAAgB+H,YAAhB,CAA6BG,cARzC;QASJC,YAAY,EAAE,MATV;QASkBC,IAAI,EAAElI,IAAI,CAACgC,QAAL;MATxB,CAAD,CAAX;MAWA,KAAKlC,UAAL,CAAgB0E,IAAhB,GAAuB,KAAK1E,UAAL,CAAgB0E,IAAhB,CAAqBqB,MAArB,CAA4B0B,IAA5B,CAAvB;MACA,KAAKzH,UAAL,CAAgB+H,YAAhB,CAA6BpD,QAA7B,GAAyC,CAAC,KAAK3E,UAAL,CAAgBuE,YAAjB,GAAgC,CAAhC,GAAoCgD,GAAG,GAAG,CAAnF;MACA,IAAI3B,SAAS,GAAG,KAAKC,YAAL,CAAkB3F,IAAlB,EAAwBA,IAAI,CAACgC,QAAL,EAAxB,CAAhB;MACA,KAAKlC,UAAL,CAAgBF,UAAhB,GAA6B,KAAKE,UAAL,CAAgBF,UAAhB,CAA2BiG,MAA3B,CAAkCH,SAAlC,CAA7B;MACA,KAAK5F,UAAL,CAAgBsD,cAAhB,CAA+BC,eAA/B;IACH,CAlCD,MAmCK;MACDJ,IAAI,CAACC,IAAL,CAAUnB,IAAV,GAAiB,uBAAuBkB,IAAI,CAACC,IAAL,CAAUnB,IAAlD;;MACA,KAAK,IAAIH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK9B,UAAL,CAAgBF,UAAhB,CAA2BiC,MAA/C,EAAuDD,CAAC,EAAxD,EAA4D;QACxD,IAAI,KAAK9B,UAAL,CAAgBF,UAAhB,CAA2BgC,CAA3B,EAA8B5B,IAA9B,KAAuCA,IAA3C,EAAiD;UAC7C,KAAKF,UAAL,CAAgBF,UAAhB,CAA2B2E,MAA3B,CAAkC3C,CAAlC,EAAqC,CAArC;QACH;MACJ;;MACD,KAAKhC,UAAL,CAAgB2E,MAAhB,CAAuB,KAAK3E,UAAL,CAAgB0C,OAAhB,CAAwBtC,IAAxB,CAAvB,EAAsD,CAAtD;MACA,IAAImI,YAAY,GAAG,CAAnB;;MACA,KAAK,IAAIrC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKhG,UAAL,CAAgB0E,IAAhB,CAAqB3C,MAAzC,EAAiDiE,CAAC,EAAlD,EAAsD;QAClD,IAAI,KAAKhG,UAAL,CAAgB0E,IAAhB,CAAqBsB,CAArB,EAAwBoC,IAAxB,KAAiClI,IAArC,EAA2C;UACvCmI,YAAY,GAAG,KAAKrI,UAAL,CAAgB0E,IAAhB,CAAqBsB,CAArB,EAAwBrB,QAAvC;UACA,KAAK3E,UAAL,CAAgBwE,IAAhB,CAAqBC,MAArB,CAA4BuB,CAA5B,EAA+B,CAA/B;UACA,KAAKhG,UAAL,CAAgB0E,IAAhB,CAAqBD,MAArB,CAA4BuB,CAA5B,EAA+B,CAA/B;QACH;MACJ;;MACD,KAAK,IAAIA,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKhG,UAAL,CAAgB0E,IAAhB,CAAqB3C,MAAzC,EAAiDiE,CAAC,EAAlD,EAAsD;QAClD,IAAI,KAAKhG,UAAL,CAAgB0E,IAAhB,CAAqBsB,CAArB,EAAwBrB,QAAxB,KAAqC,CAArC,IAA0C,KAAK3E,UAAL,CAAgB0E,IAAhB,CAAqBsB,CAArB,EAAwBrB,QAAxB,GAAmC0D,YAAjF,EAA+F;UAC3F,KAAKrI,UAAL,CAAgB0E,IAAhB,CAAqBsB,CAArB,EAAwBrB,QAAxB,GAAmC,KAAK3E,UAAL,CAAgB0E,IAAhB,CAAqBsB,CAArB,EAAwBrB,QAAxB,GAAmC,CAAtE;QACH;MACJ;;MACD,KAAK3E,UAAL,CAAgBsD,cAAhB,CAA+BC,eAA/B;IACH;EACJ,CA3DD;;EA4DA9D,eAAe,CAACU,SAAhB,CAA0BkD,QAA1B,GAAqC,UAAUF,IAAV,EAAgB;IACjD,IAAIlB,IAAJ;IACA,IAAIgB,KAAK,GAAGE,IAAI,CAACC,IAAL,CAAU,WAAV,EAAuBH,KAAnC;;IACA,KAAK,IAAInB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGmB,KAAK,CAAClB,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;MACnCmB,KAAK,CAACnB,CAAD,CAAL,CAASG,IAAT,GAAgBgB,KAAK,CAACnB,CAAD,CAAL,CAASG,IAAT,CAAcO,OAAd,CAAsB,eAAtB,KAA0C,CAA1C,GACZS,KAAK,CAACnB,CAAD,CAAL,CAASG,IAAT,CAAcoD,MAAd,CAAqBpC,KAAK,CAACnB,CAAD,CAAL,CAASG,IAAT,CAAcO,OAAd,CAAsB,GAAtB,IAA6B,CAAlD,CADY,GAEZS,KAAK,CAACnB,CAAD,CAAL,CAASG,IAFb;;MAGA,IAAI,EAAEgB,KAAK,CAACnB,CAAD,CAAL,CAASG,IAAT,CAAcO,OAAd,CAAsB,oBAAtB,KAA+C,CAAjD,CAAJ,EAAyD;QACrDS,KAAK,CAACnB,CAAD,CAAL,CAASG,IAAT,GAAgB,uBAAuBgB,KAAK,CAACnB,CAAD,CAAL,CAASG,IAAhD;MACH;IACJ;;IACD,IAAIkB,IAAI,CAACC,IAAL,CAAUnB,IAAV,CAAeO,OAAf,CAAuB,oBAAvB,KAAgD,CAApD,EAAuD;MACnDP,IAAI,GAAGkB,IAAI,CAACC,IAAL,CAAUnB,IAAV,CAAeG,OAAf,CAAuB,oBAAvB,EAA6C,EAA7C,CAAP;MACAe,IAAI,CAACC,IAAL,CAAUnB,IAAV,GAAiBkB,IAAI,CAACC,IAAL,CAAUnB,IAAV,CAAeG,OAAf,CAAuB,oBAAvB,EAA6C,eAA7C,CAAjB;IACH,CAHD,MAIK;MACDH,IAAI,GAAGkB,IAAI,CAACC,IAAL,CAAUnB,IAAV,CAAeG,OAAf,CAAuB,eAAvB,EAAwC,EAAxC,CAAP;IACH;;IACD,OAAOH,IAAP;EACH,CAnBD;;EAoBAxC,eAAe,CAACU,SAAhB,CAA0BsB,WAA1B,GAAwC,YAAY;IAChD,IAAIuB,KAAK,GAAG,IAAZ;;IACA,IAAI,KAAKhD,UAAL,CAAgBqC,UAAhB,CAA2BG,OAA3B,CAAmC,OAAnC,IAA8C,CAAC,CAAnD,EAAsD;MAClD,IAAI8F,OAAO,GAAG,IAAInJ,MAAJ,EAAd;MACAmJ,OAAO,CAACvE,QAAR,CAAiB,MAAM,KAAK/D,UAAL,CAAgBa,OAAhB,CAAwBC,EAA9B,GAAmC,QAApD;;MACAoD,QAAQ,CAACC,cAAT,CAAwB,KAAKnE,UAAL,CAAgBa,OAAhB,CAAwBC,EAAxB,GAA6B,QAArD,EAA+DsD,OAA/D,GAAyE,YAAY;QACjFpB,KAAK,CAAChD,UAAN,CAAiBN,KAAjB,CAAuB6I,KAAvB,CAA6BvF,KAAK,CAAChD,UAAN,CAAiBa,OAAjB,CAAyBC,EAAtD;MACH,CAFD;IAGH;EACJ,CATD;;EAUArB,eAAe,CAACU,SAAhB,CAA0BqB,YAA1B,GAAyC,YAAY;IACjD,IAAIwB,KAAK,GAAG,IAAZ;;IACA,IAAIwF,WAAW,GAAG,IAAItJ,cAAJ,CAAmB;MACjC+D,KAAK,EAAE,KAAKtB,gBAAL,CAAsB,KAAK3B,UAAL,CAAgBqC,UAAtC,CAD0B;MAEjCa,MAAM,EAAE,UAAUC,IAAV,EAAgB;QACpB,IAAIjD,IAAI,GAAGiD,IAAI,CAACC,IAAL,CAAUnB,IAArB;QACA,IAAIjC,UAAU,GAAGgD,KAAK,CAAChD,UAAvB;QACA,IAAIyI,OAAO,GAAGzI,UAAU,CAACa,OAAX,CAAmBC,EAAnB,GAAwB,cAAtC;QACA,IAAI4H,cAAJ;QACA,IAAIC,SAAS,GAAG3I,UAAU,CAAC4I,SAAX,CAAqBC,qBAArB,EAAhB;;QACA,IAAI7I,UAAU,CAACN,KAAX,CAAiBoJ,YAArB,EAAmC;UAC/B9F,KAAK,CAAChD,UAAN,CAAiB4I,SAAjB,CAA2BG,qBAA3B,CAAiD,YAAjD,EAA+D/F,KAAK,CAACgG,iBAAN,EAA/D;;UACAN,cAAc,GAAG1I,UAAU,CAAC4I,SAAX,CAAqBK,iBAArB,CAAuCJ,qBAAvC,EAAjB;;UACA7F,KAAK,CAAChD,UAAN,CAAiB4I,SAAjB,CAA2BM,YAA3B,CAAwC,QAAxC,EAAkD,CAACP,SAAS,CAAC5H,MAAV,GAAmB2H,cAAc,CAAC3H,MAAnC,EAA2CmB,QAA3C,EAAlD;;UACAjD,UAAU,CAACwJ,OAAO,GAAG,OAAX,CAAV,CAA8BU,KAA9B,CAAoCC,SAApC,GAAgD,gBAAgBV,cAAc,CAAC3H,MAA/B,GAAwC,KAAxF;;UACA,IAAIf,UAAU,CAACqJ,cAAf,EAA+B;YAC3BpK,UAAU,CAACwJ,OAAO,GAAG,eAAX,CAAV,CAAsCS,YAAtC,CAAmD,WAAnD,EACA;YACA,eAAe,CAAf,GAAmB,GAAnB,IAA0BlJ,UAAU,CAACsD,cAAX,CAA0BgG,kBAA1B,CAA6CvI,MAA7C,GAAsD2H,cAAc,CAAC3H,MAA/F,IAAyG,GAFzG;UAGH;;UACD,IAAIiC,KAAK,CAAChD,UAAN,CAAiB0D,cAAjB,CAAgCC,OAAhC,IAA2CX,KAAK,CAAChD,UAAN,CAAiBwD,iBAAhE,EAAmF;YAC/EvE,UAAU,CAACe,UAAU,CAACa,OAAX,CAAmBC,EAAnB,GAAwB,iBAAzB,CAAV,CAAsDqI,KAAtD,CAA4DC,SAA5D,GAAwE,gBAAgBV,cAAc,CAAC3H,MAA/B,GAAwC,KAAhH;UACH;;UACDf,UAAU,CAACN,KAAX,CAAiBoJ,YAAjB,CAA8BS,MAA9B,CAAqCrJ,IAArC,EAA2C,YAA3C,EAAyD,IAAzD,EAA+D,CAACF,UAAD,CAA/D,EAA6E,IAA7E,EAAmFA,UAAU,CAAC4I,SAAX,CAAqBY,YAAxG;UACAhK,MAAM,CAACP,UAAU,CAAC+D,KAAK,CAAChD,UAAN,CAAiBa,OAAjB,CAAyBC,EAAzB,GAA8B,mBAA/B,CAAX,CAAN;UACA7B,UAAU,CAACwJ,OAAO,GAAG,OAAX,CAAV,CAA8BU,KAA9B,CAAoCC,SAApC,GAAgD,iBAAhD;;UACA,IAAIpJ,UAAU,CAACqJ,cAAf,EAA+B;YAC3BpK,UAAU,CAACwJ,OAAO,GAAG,eAAX,CAAV,CAAsCS,YAAtC,CAAmD,WAAnD,EACA;YACA,eAAe,CAAf,GAAmB,GAAnB,GAA0BlJ,UAAU,CAACsD,cAAX,CAA0BgG,kBAA1B,CAA6CvI,MAAvE,GAAiF,GAFjF;UAGH;;UACD,IAAIiC,KAAK,CAAChD,UAAN,CAAiB0D,cAAjB,CAAgCC,OAAhC,IAA2CX,KAAK,CAAChD,UAAN,CAAiBwD,iBAAhE,EAAmF;YAC/EvE,UAAU,CAACe,UAAU,CAACa,OAAX,CAAmBC,EAAnB,GAAwB,iBAAzB,CAAV,CAAsDqI,KAAtD,CAA4DC,SAA5D,GAAwE,iBAAxE;UACH;;UACDpG,KAAK,CAAChD,UAAN,CAAiB4I,SAAjB,CAA2BM,YAA3B,CAAwC,QAAxC,EAAmDP,SAAS,CAAC5H,MAAX,CAAmBmB,QAAnB,EAAlD;QACH;MACJ;IAlCgC,CAAnB,CAAlB;IAoCAsG,WAAW,CAACzE,QAAZ,CAAqB,MAAM,KAAK/D,UAAL,CAAgBa,OAAhB,CAAwBC,EAA9B,GAAmC,SAAxD;EACH,CAvCD;;EAwCArB,eAAe,CAACU,SAAhB,CAA0BsJ,oBAA1B,GAAiD,YAAY;IACzD,IAAIC,cAAc,GAAG,EAArB;IACAA,cAAc,GAAG,KAAKC,SAAL,CAAe,KAAK3J,UAAL,CAAgB4J,UAA/B,EAA2C,KAAK5J,UAAL,CAAgB6J,UAA3D,CAAjB;IACAH,cAAc,CAAC1H,IAAf,CAAoB;MAAEC,IAAI,EAAE,KAAR;MAAe6H,QAAQ,EAAE;IAAzB,CAApB,EAAqD;MAAE7H,IAAI,EAAE;IAAR,CAArD;IACA,OAAOyH,cAAP;EACH,CALD;;EAMAjK,eAAe,CAACU,SAAhB,CAA0BwJ,SAA1B,GAAsC,UAAUI,GAAV,EAAeC,GAAf,EAAoB;IACtD,IAAIN,cAAc,GAAG,EAArB;;IACA,IAAK,CAACM,GAAG,GAAGD,GAAP,IAAc,SAAf,IAA6B,CAAjC,EAAoC;MAChCL,cAAc,CAAC1H,IAAf,CAAoB;QAAEC,IAAI,EAAE,IAAR;QAAcgI,QAAQ,EAAE,CAAxB;QAA2BC,YAAY,EAAE;MAAzC,CAApB,EAAyE;QAAEjI,IAAI,EAAE,IAAR;QAAcgI,QAAQ,EAAE,CAAxB;QAA2BC,YAAY,EAAE;MAAzC,CAAzE,EAA8H;QAAEjI,IAAI,EAAE,IAAR;QAAcgI,QAAQ,EAAE,CAAxB;QAA2BC,YAAY,EAAE;MAAzC,CAA9H,EAAmL;QAAEjI,IAAI,EAAE,IAAR;QAAcgI,QAAQ,EAAE,CAAxB;QAA2BC,YAAY,EAAE;MAAzC,CAAnL;IACH,CAFD,MAGK,IAAI,CAACF,GAAG,GAAGD,GAAP,IAAc,SAAd,IAA2B,CAA/B,EAAkC;MACnCL,cAAc,CAAC1H,IAAf,CAAoB;QAAEC,IAAI,EAAE,IAAR;QAAcgI,QAAQ,EAAE,CAAxB;QAA2BC,YAAY,EAAE;MAAzC,CAApB,EAAyE;QAAEjI,IAAI,EAAE,IAAR;QAAcgI,QAAQ,EAAE,CAAxB;QAA2BC,YAAY,EAAE;MAAzC,CAAzE,EAA8H;QAAEjI,IAAI,EAAE,IAAR;QAAcgI,QAAQ,EAAE,CAAxB;QAA2BC,YAAY,EAAE;MAAzC,CAA9H;IACH,CAFI,MAGA,IAAI,CAACF,GAAG,GAAGD,GAAP,IAAc,QAAd,IAA0B,CAA9B,EAAiC;MAClCL,cAAc,CAAC1H,IAAf,CAAoB;QAAEC,IAAI,EAAE,IAAR;QAAcgI,QAAQ,EAAE,CAAxB;QAA2BC,YAAY,EAAE;MAAzC,CAApB,EAAuE;QAAEjI,IAAI,EAAE,IAAR;QAAcgI,QAAQ,EAAE,CAAxB;QAA2BC,YAAY,EAAE;MAAzC,CAAvE,EAA2H;QAAEjI,IAAI,EAAE,IAAR;QAAcgI,QAAQ,EAAE,CAAxB;QAA2BC,YAAY,EAAE;MAAzC,CAA3H;IACH,CAFI,MAGA,IAAI,CAACF,GAAG,GAAGD,GAAP,IAAc,OAAd,IAAyB,CAA7B,EAAgC;MACjCL,cAAc,CAAC1H,IAAf,CAAoB;QAAEC,IAAI,EAAE,IAAR;QAAcgI,QAAQ,EAAE,CAAxB;QAA2BC,YAAY,EAAE;MAAzC,CAApB,EAAwE;QAAEjI,IAAI,EAAE,KAAR;QAAegI,QAAQ,EAAE,EAAzB;QAA6BC,YAAY,EAAE;MAA3C,CAAxE,EAA8H;QAAEjI,IAAI,EAAE,IAAR;QAAcgI,QAAQ,EAAE,CAAxB;QAA2BC,YAAY,EAAE;MAAzC,CAA9H;IACH;;IACD,OAAOR,cAAP;EACH,CAfD;EAgBA;AACJ;AACA;AACA;;;EACIjK,eAAe,CAACU,SAAhB,CAA0B6I,iBAA1B,GAA8C,YAAY;IACtD,IAAImB,aAAa,GAAG,KAAKnK,UAAL,CAAgBoK,QAAhB,CAAyBC,WAAzB,CAAqC;MACrDvJ,EAAE,EAAE,KAAKd,UAAL,CAAgBa,OAAhB,CAAwBC,EAAxB,GAA6B,mBADoB;MAErDK,KAAK,EAAE,KAAKnB,UAAL,CAAgBsK,aAAhB,CAA8BnJ;IAFgB,CAArC,CAApB;IAIA,IAAIoJ,WAAW,GAAGjL,WAAW,CAAC,KAAKU,UAAL,CAAgBwK,KAAjB,EAAwB,KAAKxK,UAAL,CAAgByK,UAAxC,CAAX,CAA+D1J,MAAjF;IACA,IAAI2J,OAAO,GAAG,IAAIrL,UAAJ,CAAe8K,aAAa,CAACrJ,EAAd,GAAmB,QAAlC,EAA4ChC,cAAc,CAAC,IAAIM,IAAJ,CAAS,CAAT,EAAY,CAAZ,EAAe,KAAKY,UAAL,CAAgBsK,aAAhB,CAA8BnJ,KAA7C,EAAoD,CAApD,CAAD,EAAyD,KAAKnB,UAAL,CAAgByK,UAAzE,CAA1D,EAAgJ,CAAhJ,EAAmJ,QAAnJ,EAA6J,KAAKzK,UAAL,CAAgBwK,KAA7K,EAAoL,EAApL,EAAwL,kBAAxL,CAAd;IACAzL,WAAW,CAAC,KAAKiB,UAAL,CAAgBoK,QAAjB,EAA2BM,OAA3B,EAAoC,KAAK1K,UAAL,CAAgByK,UAApD,EAAgE,KAAKzK,UAAL,CAAgByK,UAAhB,CAA2B3D,KAA3F,EAAkGqD,aAAlG,CAAX;IACA,IAAIhB,KAAK,GAAG;MAAEwB,IAAI,EAAE,MAAR;MAAgBC,UAAU,EAAE,KAA5B;MAAmC9D,KAAK,EAAE,IAA1C;MAAgD+D,SAAS,EAAE,QAA3D;MAAqEC,UAAU,EAAE;IAAjF,CAAZ;IACA,IAAI1J,CAAC,GAAG9B,WAAW,CAAC,aAAa,KAAKK,cAAnB,EAAmCwJ,KAAnC,CAAX,CAAqDhI,KAArD,GAA6D,CAArE;IACA,IAAI4J,CAAC,GAAGR,WAAR;IACA,KAAKS,eAAL,CAAqB,IAAI3L,UAAJ,CAAe8K,aAAa,CAACrJ,EAAd,GAAmB,SAAlC,EAA6CM,CAA7C,EAAgD2J,CAAhD,EAAmD,OAAnD,EAA4D,CAAC,WAAD,EAAc,KAAKpL,cAAnB,CAA5D,EAAgG,EAAhG,EAAoG,kBAApG,CAArB,EAA8IwJ,KAA9I,EAAqJ,OAArJ,EAA8JgB,aAA9J;IACA/I,CAAC,IAAI9B,WAAW,CAAC,aAAa,KAAKK,cAAlB,GAAmC,IAApC,EAA0CwJ,KAA1C,CAAX,CAA4DhI,KAAjE;;IACA,IAAI,KAAKvB,iBAAL,KAA2B,EAA/B,EAAmC;MAC/B,KAAKoL,eAAL,CAAqB,IAAI3L,UAAJ,CAAe8K,aAAa,CAACrJ,EAAd,GAAmB,YAAlC,EAAgDM,CAAhD,EAAmD2J,CAAnD,EAAsD,OAAtD,EAA+D,CAAC,aAAD,EAAgB,KAAKnL,iBAArB,CAA/D,EAAwG,EAAxG,EAA4G,kBAA5G,CAArB,EAAsJuJ,KAAtJ,EAA6J,OAA7J,EAAsKgB,aAAtK;MACA/I,CAAC,IAAI9B,WAAW,CAAC,gBAAgB,KAAKM,iBAArB,GAAyC,IAA1C,EAAgDuJ,KAAhD,CAAX,CAAkEhI,KAAvE;IACH;;IACD,IAAI,KAAKtB,iBAAL,KAA2B,EAA/B,EAAmC;MAC/B,KAAKmL,eAAL,CAAqB,IAAI3L,UAAJ,CAAe8K,aAAa,CAACrJ,EAAd,GAAmB,YAAlC,EAAgDM,CAAhD,EAAmD2J,CAAnD,EAAsD,OAAtD,EAA+D,CAAC,aAAD,EAAgB,KAAKlL,iBAArB,CAA/D,EAAwG,EAAxG,EAA4G,kBAA5G,CAArB,EAAsJsJ,KAAtJ,EAA6J,OAA7J,EAAsKgB,aAAtK;IACH;;IACD,OAAOA,aAAP;EACH,CArBD;EAsBA;;;EACA1K,eAAe,CAACU,SAAhB,CAA0B6K,eAA1B,GAA4C,UAAUN,OAAV,EAAmBO,IAAnB,EAAyBnE,KAAzB,EAAgCoE,MAAhC,EAAwCC,OAAxC,EAAiDC,MAAjD,EAAyDC,SAAzD,EAAoEC,YAApE,EAAkFC,eAAlF,EAAmG;IAC3I,IAAIJ,OAAO,KAAK,KAAK,CAArB,EAAwB;MAAEA,OAAO,GAAG,KAAV;IAAkB;;IAC5C,IAAIG,YAAY,KAAK,KAAK,CAA1B,EAA6B;MAAEA,YAAY,GAAG,KAAf;IAAuB;;IACtD,IAAIlB,QAAQ,GAAG,IAAI7K,WAAJ,CAAgB,EAAhB,CAAf;IACA,IAAIiM,aAAa,GAAG,EAApB;IACA,IAAIC,YAAJ;IACAD,aAAa,GAAG;MACZ,MAAMd,OAAO,CAAC5J,EADF;MAEZ,cAAcmK,IAAI,CAACJ,SAFP;MAGZ,eAAeI,IAAI,CAACH,UAHR;MAIZ,eAAeG,IAAI,CAACL,UAJR;MAKZ,eAAeF,OAAO,CAACgB,MALX;MAMZ,KAAKhB,OAAO,CAACtJ,CAND;MAOZ,KAAKsJ,OAAO,CAACK,CAPD;MAQZ,QAAQjE,KARI;MASZ,aAAamE,IAAI,CAACN,IATN;MAUZ,aAAaD,OAAO,CAACtB,SAVT;MAWZ,WAAW6B,IAAI,CAACU,OAXJ;MAYZ,qBAAqBjB,OAAO,CAACkB;IAZjB,CAAhB;IAcA,IAAI3J,IAAI,GAAG,OAAOyI,OAAO,CAACzI,IAAf,KAAwB,QAAxB,GAAmCyI,OAAO,CAACzI,IAA3C,GAAkDkJ,OAAO,GAAGT,OAAO,CAACzI,IAAR,CAAayI,OAAO,CAACzI,IAAR,CAAaF,MAAb,GAAsB,CAAnC,CAAH,GAA2C2I,OAAO,CAACzI,IAAR,CAAa,CAAb,CAA/G;IACA,IAAI4J,UAAU,GAAGzB,QAAQ,CAAC0B,UAAT,CAAoBN,aAApB,EAAmCvJ,IAAnC,CAAjB;;IACA,IAAI,OAAOyI,OAAO,CAACzI,IAAf,KAAwB,QAAxB,IAAoCyI,OAAO,CAACzI,IAAR,CAAaF,MAAb,GAAsB,CAA9D,EAAiE;MAC7D,KAAK,IAAID,CAAC,GAAG,CAAR,EAAWyF,GAAG,GAAGmD,OAAO,CAACzI,IAAR,CAAaF,MAAnC,EAA2CD,CAAC,GAAGyF,GAA/C,EAAoDzF,CAAC,EAArD,EAAyD;QACrD4I,OAAO,CAACzI,IAAR,CAAaH,CAAb,IAAkB,MAAM4I,OAAO,CAACzI,IAAR,CAAaH,CAAb,CAAxB;QACA2J,YAAY,GAAGrB,QAAQ,CAAC2B,WAAT,CAAqB;UAChC,KAAKrB,OAAO,CAACtJ,CAAR,GAAY9B,WAAW,CAAC2C,IAAD,EAAOgJ,IAAP,CAAX,CAAwB9J,KAApC,GAA4C,CADjB;UACoB,MAAMuJ,OAAO,CAAC5J,EADlC;UAEhC,KAAM4J,OAAO,CAACK,CAFkB;UAEdY,OAAO,EAAE;QAFK,CAArB,EAGZjB,OAAO,CAACzI,IAAR,CAAaH,CAAb,CAHY,CAAf;QAIA+J,UAAU,CAACG,WAAX,CAAuBP,YAAvB;MACH;IACJ;;IACDzM,kBAAkB,CAAC,KAAD,EAAQkM,MAAR,EAAgBW,UAAhB,EAA4BT,MAA5B,EAAoCC,SAApC,EAA+C,GAA/C,EAAoD,GAApD,EAAyD,IAAzD,EAA+D,IAA/D,EAAqEC,YAArE,EAAmF,KAAnF,EAA0F,IAA1F,EAAgGC,eAAhG,CAAlB;IACA,OAAOM,UAAP;EACH,CAlCD;;EAmCA,OAAOpM,eAAP;AACH,CA5coC,EAArC;;AA6cA,SAASA,eAAT"},"metadata":{},"sourceType":"module"}