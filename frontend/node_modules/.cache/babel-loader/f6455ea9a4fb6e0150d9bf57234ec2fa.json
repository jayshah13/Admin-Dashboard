{"ast":null,"code":"import { append, addClass, remove, isNullOrUndefined, setStyleAttribute, createElement } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * Virtual Scroll\n */\n\nvar VirtualScroll =\n/** @class */\nfunction () {\n  function VirtualScroll(parent) {\n    this.translateY = 0;\n    this.itemSize = 60;\n    this.bufferCount = 3;\n    this.renderedLength = 0;\n    this.averageRowHeight = 0;\n    this.isScrollHeightNull = true;\n    this.parent = parent;\n    this.addEventListener();\n  }\n\n  VirtualScroll.prototype.addEventListener = function () {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.on(events.virtualScroll, this.virtualScrolling, this);\n  };\n\n  VirtualScroll.prototype.removeEventListener = function () {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.off(events.virtualScroll, this.virtualScrolling);\n  };\n\n  VirtualScroll.prototype.getRenderedCount = function () {\n    this.setItemSize();\n    return Math.ceil(this.parent.element.clientHeight / this.itemSize) + this.bufferCount;\n  };\n\n  VirtualScroll.prototype.setTranslateValue = function () {\n    var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n    var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n    var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n    var timeIndicator = this.parent.element.querySelector('.' + cls.CURRENT_TIMELINE_CLASS);\n    this.renderVirtualTrackHeight(conWrap, resWrap);\n    this.setTranslate(resWrap, conWrap, eventWrap, timeIndicator);\n  };\n\n  VirtualScroll.prototype.renderVirtualTrackHeight = function (contentWrap, resourceWrap) {\n    this.parent.resourceBase.setExpandedResources();\n\n    if (this.isScrollHeightNull) {\n      var wrap = createElement('div', {\n        className: cls.VIRTUAL_TRACK_CLASS\n      });\n      var resWrap = [].slice.call(resourceWrap.querySelectorAll('table td'));\n      var startIndex_1 = parseInt(resWrap[0].getAttribute('data-group-index'), 10);\n      var endIndex_1 = parseInt(resWrap[resWrap.length - 1].getAttribute('data-group-index'), 10);\n      this.parent.resourceBase.renderedResources = this.parent.resourceBase.expandedResources.filter(function (resource) {\n        return resource.groupIndex >= startIndex_1 && resource.groupIndex <= endIndex_1;\n      });\n      this.setItemSize();\n      wrap.style.height = this.parent.resourceBase.expandedResources.length * this.itemSize + 'px';\n      this.isScrollHeightNull = false;\n      var virtual = this.parent.element.querySelector('.' + cls.VIRTUAL_TRACK_CLASS);\n\n      if (!isNullOrUndefined(virtual)) {\n        remove(virtual);\n      }\n\n      contentWrap.appendChild(wrap);\n    }\n  };\n\n  VirtualScroll.prototype.renderVirtualTrack = function (contentWrap) {\n    var wrap = createElement('div', {\n      className: cls.VIRTUAL_TRACK_CLASS\n    });\n    wrap.style.height = this.parent.resourceBase.expandedResources.length * this.itemSize + 'px';\n    contentWrap.appendChild(wrap);\n  };\n\n  VirtualScroll.prototype.updateVirtualScrollHeight = function () {\n    var virtual = this.parent.element.querySelector('.' + cls.VIRTUAL_TRACK_CLASS);\n    var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n    var lastRenderIndex = this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n\n    if (lastRenderIndex !== lastResourceIndex) {\n      var conTable = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n      this.renderedLength = conTable.querySelector('tbody').children.length;\n      virtual.style.height = conTable.offsetHeight + (this.parent.resourceBase.expandedResources.length - this.renderedLength) * conTable.offsetHeight / this.renderedLength + 'px';\n    } else {\n      virtual.style.height = '';\n    }\n\n    this.averageRowHeight = virtual.offsetHeight / this.parent.resourceBase.expandedResources.length;\n  };\n\n  VirtualScroll.prototype.updateVirtualTrackHeight = function (wrap) {\n    var resourceCount = this.parent.resourceBase.renderedResources.length;\n\n    if (resourceCount !== this.getRenderedCount()) {\n      wrap.style.height = this.parent.element.querySelector('.e-content-wrap').clientHeight + 'px';\n      var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n      var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n      var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n      this.translateY = 0;\n      this.setTranslate(resWrap, conWrap, eventWrap);\n    } else {\n      var lastRenderIndex = this.parent.resourceBase.renderedResources[resourceCount - 1].groupIndex;\n      var lastCollIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n      var renderedResCount = resourceCount + (lastCollIndex - lastRenderIndex);\n      renderedResCount = renderedResCount > this.parent.resourceBase.expandedResources.length ? this.parent.resourceBase.expandedResources.length : renderedResCount;\n      wrap.style.height = renderedResCount * this.itemSize + 'px';\n    }\n  };\n\n  VirtualScroll.prototype.setItemSize = function () {\n    this.itemSize = util.getElementHeightFromClass(this.parent.activeView.element, cls.WORK_CELLS_CLASS) || this.itemSize;\n  };\n\n  VirtualScroll.prototype.renderEvents = function () {\n    this.setTabIndex();\n    this.parent.refreshEvents(false);\n    this.parent.notify(events.contentReady, {});\n    this.parent.hideSpinner();\n  };\n\n  VirtualScroll.prototype.virtualScrolling = function () {\n    var _this = this;\n\n    if (this.parent.quickPopup) {\n      this.parent.quickPopup.quickPopupHide();\n      this.parent.quickPopup.morePopup.hide();\n    }\n\n    var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n    var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n    var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n    var timeIndicator = this.parent.element.querySelector('.' + cls.CURRENT_TIMELINE_CLASS);\n    var conTable = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n    this.renderedLength = resWrap.querySelector('tbody').children.length;\n    var firstTDIndex = parseInt(resWrap.querySelector('tbody td').getAttribute('data-group-index'), 10);\n    var scrollHeight = this.parent.rowAutoHeight ? conTable.offsetHeight - conWrap.offsetHeight : this.bufferCount * this.itemSize;\n    addClass([conWrap], 'e-transition');\n    var resCollection = [];\n\n    if (conWrap.scrollTop - this.translateY < 0) {\n      resCollection = this.upScroll(conWrap, firstTDIndex);\n    } else if (conWrap.scrollTop - this.translateY > scrollHeight) {\n      resCollection = this.downScroll(conWrap, firstTDIndex);\n    }\n\n    if (!isNullOrUndefined(resCollection) && resCollection.length > 0) {\n      this.parent.showSpinner();\n      var selectedEle = this.parent.getSelectedElements();\n      this.focusedEle = selectedEle[selectedEle.length - 1] || this.focusedEle;\n      this.updateContent(resWrap, conWrap, eventWrap, resCollection);\n      this.setTranslate(resWrap, conWrap, eventWrap, timeIndicator);\n\n      if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj.action === 'drag') {\n        this.parent.dragAndDropModule.navigationWrapper();\n      }\n\n      window.clearTimeout(this.timeValue);\n      this.timeValue = window.setTimeout(function () {\n        _this.renderEvents();\n      }, 250);\n    }\n  };\n\n  VirtualScroll.prototype.upScroll = function (conWrap, firstTDIndex) {\n    var index = 0;\n    index = ~~(conWrap.scrollTop / this.itemSize) + Math.ceil(conWrap.clientHeight / this.itemSize) - this.renderedLength;\n\n    if (this.parent.rowAutoHeight) {\n      index = index > firstTDIndex ? firstTDIndex - this.bufferCount : index;\n    }\n\n    index = index > 0 ? index : 0;\n    var prevSetCollection = this.getBufferCollection(index, index + this.renderedLength);\n    this.parent.resourceBase.renderedResources = prevSetCollection;\n\n    if (firstTDIndex === 0) {\n      this.translateY = conWrap.scrollTop;\n    } else {\n      var height = this.parent.rowAutoHeight ? this.averageRowHeight : this.itemSize;\n      height = height > 0 ? height : this.itemSize;\n      this.translateY = conWrap.scrollTop - this.bufferCount * height > 0 ? conWrap.scrollTop - this.bufferCount * height : 0;\n    }\n\n    return prevSetCollection;\n  };\n\n  VirtualScroll.prototype.downScroll = function (conWrap, firstTDIndex) {\n    var lastResource = this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n    var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n\n    if (lastResource === lastResourceIndex) {\n      return null;\n    }\n\n    var nextSetResIndex = 0;\n    nextSetResIndex = ~~(conWrap.scrollTop / this.itemSize);\n\n    if (this.parent.rowAutoHeight) {\n      nextSetResIndex = ~~((conWrap.scrollTop - this.translateY) / this.averageRowHeight) + firstTDIndex;\n      nextSetResIndex = nextSetResIndex > firstTDIndex + this.bufferCount ? nextSetResIndex : firstTDIndex + this.bufferCount;\n    }\n\n    var lastIndex = nextSetResIndex + this.renderedLength;\n    lastIndex = lastIndex > this.parent.resourceBase.expandedResources.length ? nextSetResIndex + (this.parent.resourceBase.expandedResources.length - nextSetResIndex) : lastIndex;\n    var nextSetCollection = this.getBufferCollection(lastIndex - this.renderedLength, lastIndex);\n    this.translateY = conWrap.scrollTop;\n    return nextSetCollection;\n  };\n\n  VirtualScroll.prototype.updateContent = function (resWrap, conWrap, eventWrap, resCollection) {\n    var renderedLength = resWrap.querySelector('tbody').children.length;\n\n    if (document.activeElement && document.activeElement.classList.contains(cls.RESOURCE_CELLS_CLASS)) {\n      this.isResourceCell = true;\n      this.parent.element.focus();\n    }\n\n    for (var i = 0; i < renderedLength; i++) {\n      remove(resWrap.querySelector('tbody tr'));\n      remove(conWrap.querySelector('tbody tr'));\n      remove(eventWrap.querySelector('div'));\n    }\n\n    this.parent.resourceBase.renderedResources = resCollection;\n    var resourceRows = this.parent.resourceBase.getContentRows(resCollection, true);\n    var contentRows = this.parent.activeView.getContentRows();\n    var eventRows = this.parent.activeView.getEventRows(resCollection.length);\n    append(resourceRows, resWrap.querySelector('tbody'));\n    append(contentRows, conWrap.querySelector('tbody'));\n    append(eventRows, eventWrap);\n  };\n\n  VirtualScroll.prototype.getBufferCollection = function (startIndex, endIndex) {\n    return this.parent.resourceBase.expandedResources.slice(startIndex, endIndex);\n  };\n\n  VirtualScroll.prototype.setTranslate = function (resWrap, conWrap, eventWrap, timeIndicator) {\n    setStyleAttribute(resWrap.querySelector('table'), {\n      transform: \"translateY(\" + this.translateY + \"px)\"\n    });\n    setStyleAttribute(conWrap.querySelector('table'), {\n      transform: \"translateY(\" + this.translateY + \"px)\"\n    });\n    setStyleAttribute(eventWrap, {\n      transform: \"translateY(\" + this.translateY + \"px)\"\n    });\n\n    if (!isNullOrUndefined(timeIndicator)) {\n      setStyleAttribute(timeIndicator, {\n        transform: \"translateY(\" + this.translateY + \"px)\"\n      });\n    }\n  };\n\n  VirtualScroll.prototype.updateFocusedWorkCell = function () {\n    if (this.focusedEle) {\n      var date = parseInt(this.focusedEle.getAttribute('data-date'), 10);\n      var groupIndex = parseInt(this.focusedEle.getAttribute('data-group-index'), 10);\n      var ele = this.parent.element.querySelector(\".\" + cls.WORK_CELLS_CLASS + \"[data-date=\\\"\" + date + \"\\\"][data-group-index=\\\"\" + groupIndex + \"\\\"]\");\n\n      if (ele) {\n        this.parent.addSelectedClass([ele], ele, true);\n      }\n\n      this.focusedEle = null;\n    }\n  };\n\n  VirtualScroll.prototype.setTabIndex = function () {\n    var resColWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n    var resCells = [].slice.call(this.parent.element.querySelectorAll('.' + cls.RESOURCE_CELLS_CLASS));\n\n    if (resCells && resColWrap) {\n      resCells.forEach(function (element) {\n        if (element.getBoundingClientRect().top >= resColWrap.getBoundingClientRect().top) {\n          element.setAttribute('tabindex', '0');\n        }\n      });\n    }\n\n    var focusResCell = this.parent.element.querySelector(\".\" + cls.RESOURCE_CELLS_CLASS + \"[tabindex=\\\"\" + 0 + \"\\\"]\");\n\n    if (this.isResourceCell && focusResCell) {\n      focusResCell.focus();\n      this.isResourceCell = false;\n    }\n  };\n\n  VirtualScroll.prototype.destroy = function () {\n    this.removeEventListener();\n  };\n\n  return VirtualScroll;\n}();\n\nexport { VirtualScroll };","map":{"version":3,"names":["append","addClass","remove","isNullOrUndefined","setStyleAttribute","createElement","events","cls","util","VirtualScroll","parent","translateY","itemSize","bufferCount","renderedLength","averageRowHeight","isScrollHeightNull","addEventListener","prototype","isDestroyed","on","virtualScroll","virtualScrolling","removeEventListener","off","getRenderedCount","setItemSize","Math","ceil","element","clientHeight","setTranslateValue","resWrap","querySelector","RESOURCE_COLUMN_WRAP_CLASS","conWrap","CONTENT_WRAP_CLASS","eventWrap","EVENT_TABLE_CLASS","timeIndicator","CURRENT_TIMELINE_CLASS","renderVirtualTrackHeight","setTranslate","contentWrap","resourceWrap","resourceBase","setExpandedResources","wrap","className","VIRTUAL_TRACK_CLASS","slice","call","querySelectorAll","startIndex_1","parseInt","getAttribute","endIndex_1","length","renderedResources","expandedResources","filter","resource","groupIndex","style","height","virtual","appendChild","renderVirtualTrack","updateVirtualScrollHeight","lastResourceIndex","lastRenderIndex","conTable","CONTENT_TABLE_CLASS","children","offsetHeight","updateVirtualTrackHeight","resourceCount","lastCollIndex","renderedResCount","getElementHeightFromClass","activeView","WORK_CELLS_CLASS","renderEvents","setTabIndex","refreshEvents","notify","contentReady","hideSpinner","_this","quickPopup","quickPopupHide","morePopup","hide","firstTDIndex","scrollHeight","rowAutoHeight","resCollection","scrollTop","upScroll","downScroll","showSpinner","selectedEle","getSelectedElements","focusedEle","updateContent","dragAndDropModule","actionObj","action","navigationWrapper","window","clearTimeout","timeValue","setTimeout","index","prevSetCollection","getBufferCollection","lastResource","nextSetResIndex","lastIndex","nextSetCollection","document","activeElement","classList","contains","RESOURCE_CELLS_CLASS","isResourceCell","focus","i","resourceRows","getContentRows","contentRows","eventRows","getEventRows","startIndex","endIndex","transform","updateFocusedWorkCell","date","ele","addSelectedClass","resColWrap","resCells","forEach","getBoundingClientRect","top","setAttribute","focusResCell","destroy"],"sources":["C:/Users/shahj/OneDrive/Documents/GitHub/Multifunctional-React-Dashboard/node_modules/@syncfusion/ej2-schedule/src/schedule/actions/virtual-scroll.js"],"sourcesContent":["import { append, addClass, remove, isNullOrUndefined, setStyleAttribute, createElement } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * Virtual Scroll\n */\nvar VirtualScroll = /** @class */ (function () {\n    function VirtualScroll(parent) {\n        this.translateY = 0;\n        this.itemSize = 60;\n        this.bufferCount = 3;\n        this.renderedLength = 0;\n        this.averageRowHeight = 0;\n        this.isScrollHeightNull = true;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    VirtualScroll.prototype.addEventListener = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.virtualScroll, this.virtualScrolling, this);\n    };\n    VirtualScroll.prototype.removeEventListener = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.virtualScroll, this.virtualScrolling);\n    };\n    VirtualScroll.prototype.getRenderedCount = function () {\n        this.setItemSize();\n        return Math.ceil(this.parent.element.clientHeight / this.itemSize) + this.bufferCount;\n    };\n    VirtualScroll.prototype.setTranslateValue = function () {\n        var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n        var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n        var timeIndicator = this.parent.element.querySelector('.' + cls.CURRENT_TIMELINE_CLASS);\n        this.renderVirtualTrackHeight(conWrap, resWrap);\n        this.setTranslate(resWrap, conWrap, eventWrap, timeIndicator);\n    };\n    VirtualScroll.prototype.renderVirtualTrackHeight = function (contentWrap, resourceWrap) {\n        this.parent.resourceBase.setExpandedResources();\n        if (this.isScrollHeightNull) {\n            var wrap = createElement('div', { className: cls.VIRTUAL_TRACK_CLASS });\n            var resWrap = [].slice.call((resourceWrap).querySelectorAll('table td'));\n            var startIndex_1 = parseInt(resWrap[0].getAttribute('data-group-index'), 10);\n            var endIndex_1 = parseInt(resWrap[resWrap.length - 1].getAttribute('data-group-index'), 10);\n            this.parent.resourceBase.renderedResources = this.parent.resourceBase.expandedResources.filter(function (resource) {\n                return (resource.groupIndex >= startIndex_1 && resource.groupIndex <= endIndex_1);\n            });\n            this.setItemSize();\n            wrap.style.height = (this.parent.resourceBase.expandedResources.length * this.itemSize) + 'px';\n            this.isScrollHeightNull = false;\n            var virtual = this.parent.element.querySelector('.' + cls.VIRTUAL_TRACK_CLASS);\n            if (!isNullOrUndefined(virtual)) {\n                remove(virtual);\n            }\n            contentWrap.appendChild(wrap);\n        }\n    };\n    VirtualScroll.prototype.renderVirtualTrack = function (contentWrap) {\n        var wrap = createElement('div', { className: cls.VIRTUAL_TRACK_CLASS });\n        wrap.style.height = (this.parent.resourceBase.expandedResources.length * this.itemSize) + 'px';\n        contentWrap.appendChild(wrap);\n    };\n    VirtualScroll.prototype.updateVirtualScrollHeight = function () {\n        var virtual = this.parent.element.querySelector('.' + cls.VIRTUAL_TRACK_CLASS);\n        var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n        var lastRenderIndex = this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n        if (lastRenderIndex !== lastResourceIndex) {\n            var conTable = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n            this.renderedLength = conTable.querySelector('tbody').children.length;\n            virtual.style.height = (conTable.offsetHeight + (this.parent.resourceBase.expandedResources.length - (this.renderedLength)) *\n                conTable.offsetHeight / this.renderedLength) + 'px';\n        }\n        else {\n            virtual.style.height = '';\n        }\n        this.averageRowHeight = virtual.offsetHeight / this.parent.resourceBase.expandedResources.length;\n    };\n    VirtualScroll.prototype.updateVirtualTrackHeight = function (wrap) {\n        var resourceCount = this.parent.resourceBase.renderedResources.length;\n        if (resourceCount !== this.getRenderedCount()) {\n            wrap.style.height = this.parent.element.querySelector('.e-content-wrap').clientHeight + 'px';\n            var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n            var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n            this.translateY = 0;\n            this.setTranslate(resWrap, conWrap, eventWrap);\n        }\n        else {\n            var lastRenderIndex = this.parent.resourceBase.renderedResources[resourceCount - 1].groupIndex;\n            var lastCollIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n            var renderedResCount = resourceCount + (lastCollIndex - lastRenderIndex);\n            renderedResCount = (renderedResCount > this.parent.resourceBase.expandedResources.length) ?\n                this.parent.resourceBase.expandedResources.length : renderedResCount;\n            wrap.style.height = (renderedResCount * this.itemSize) + 'px';\n        }\n    };\n    VirtualScroll.prototype.setItemSize = function () {\n        this.itemSize = util.getElementHeightFromClass(this.parent.activeView.element, cls.WORK_CELLS_CLASS) || this.itemSize;\n    };\n    VirtualScroll.prototype.renderEvents = function () {\n        this.setTabIndex();\n        this.parent.refreshEvents(false);\n        this.parent.notify(events.contentReady, {});\n        this.parent.hideSpinner();\n    };\n    VirtualScroll.prototype.virtualScrolling = function () {\n        var _this = this;\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide();\n            this.parent.quickPopup.morePopup.hide();\n        }\n        var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n        var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n        var timeIndicator = this.parent.element.querySelector('.' + cls.CURRENT_TIMELINE_CLASS);\n        var conTable = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n        this.renderedLength = resWrap.querySelector('tbody').children.length;\n        var firstTDIndex = parseInt(resWrap.querySelector('tbody td').getAttribute('data-group-index'), 10);\n        var scrollHeight = this.parent.rowAutoHeight ?\n            (conTable.offsetHeight - conWrap.offsetHeight) : this.bufferCount * this.itemSize;\n        addClass([conWrap], 'e-transition');\n        var resCollection = [];\n        if ((conWrap.scrollTop) - this.translateY < 0) {\n            resCollection = this.upScroll(conWrap, firstTDIndex);\n        }\n        else if (conWrap.scrollTop - this.translateY > scrollHeight) {\n            resCollection = this.downScroll(conWrap, firstTDIndex);\n        }\n        if (!isNullOrUndefined(resCollection) && resCollection.length > 0) {\n            this.parent.showSpinner();\n            var selectedEle = this.parent.getSelectedElements();\n            this.focusedEle = selectedEle[selectedEle.length - 1] || this.focusedEle;\n            this.updateContent(resWrap, conWrap, eventWrap, resCollection);\n            this.setTranslate(resWrap, conWrap, eventWrap, timeIndicator);\n            if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj.action === 'drag') {\n                this.parent.dragAndDropModule.navigationWrapper();\n            }\n            window.clearTimeout(this.timeValue);\n            this.timeValue = window.setTimeout(function () { _this.renderEvents(); }, 250);\n        }\n    };\n    VirtualScroll.prototype.upScroll = function (conWrap, firstTDIndex) {\n        var index = 0;\n        index = (~~(conWrap.scrollTop / this.itemSize) + Math.ceil(conWrap.clientHeight / this.itemSize)) - this.renderedLength;\n        if (this.parent.rowAutoHeight) {\n            index = (index > firstTDIndex) ? firstTDIndex - this.bufferCount : index;\n        }\n        index = (index > 0) ? index : 0;\n        var prevSetCollection = this.getBufferCollection(index, index + this.renderedLength);\n        this.parent.resourceBase.renderedResources = prevSetCollection;\n        if (firstTDIndex === 0) {\n            this.translateY = conWrap.scrollTop;\n        }\n        else {\n            var height = (this.parent.rowAutoHeight) ? this.averageRowHeight : this.itemSize;\n            height = (height > 0) ? height : this.itemSize;\n            this.translateY = (conWrap.scrollTop - (this.bufferCount * height) > 0) ?\n                conWrap.scrollTop - (this.bufferCount * height) : 0;\n        }\n        return prevSetCollection;\n    };\n    VirtualScroll.prototype.downScroll = function (conWrap, firstTDIndex) {\n        var lastResource = this.parent.resourceBase.\n            renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n        var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n        if (lastResource === lastResourceIndex) {\n            return null;\n        }\n        var nextSetResIndex = 0;\n        nextSetResIndex = ~~(conWrap.scrollTop / this.itemSize);\n        if (this.parent.rowAutoHeight) {\n            nextSetResIndex = ~~((conWrap.scrollTop - this.translateY) / this.averageRowHeight) + firstTDIndex;\n            nextSetResIndex = (nextSetResIndex > firstTDIndex + this.bufferCount) ? nextSetResIndex : firstTDIndex + this.bufferCount;\n        }\n        var lastIndex = nextSetResIndex + this.renderedLength;\n        lastIndex = (lastIndex > this.parent.resourceBase.expandedResources.length) ?\n            nextSetResIndex + (this.parent.resourceBase.expandedResources.length - nextSetResIndex) : lastIndex;\n        var nextSetCollection = this.getBufferCollection(lastIndex - this.renderedLength, lastIndex);\n        this.translateY = conWrap.scrollTop;\n        return nextSetCollection;\n    };\n    VirtualScroll.prototype.updateContent = function (resWrap, conWrap, eventWrap, resCollection) {\n        var renderedLength = resWrap.querySelector('tbody').children.length;\n        if (document.activeElement && document.activeElement.classList.contains(cls.RESOURCE_CELLS_CLASS)) {\n            this.isResourceCell = true;\n            this.parent.element.focus();\n        }\n        for (var i = 0; i < renderedLength; i++) {\n            remove(resWrap.querySelector('tbody tr'));\n            remove(conWrap.querySelector('tbody tr'));\n            remove(eventWrap.querySelector('div'));\n        }\n        this.parent.resourceBase.renderedResources = resCollection;\n        var resourceRows = this.parent.resourceBase.getContentRows(resCollection, true);\n        var contentRows = this.parent.activeView.getContentRows();\n        var eventRows = this.parent.activeView.getEventRows(resCollection.length);\n        append(resourceRows, resWrap.querySelector('tbody'));\n        append(contentRows, conWrap.querySelector('tbody'));\n        append(eventRows, eventWrap);\n    };\n    VirtualScroll.prototype.getBufferCollection = function (startIndex, endIndex) {\n        return this.parent.resourceBase.expandedResources.slice(startIndex, endIndex);\n    };\n    VirtualScroll.prototype.setTranslate = function (resWrap, conWrap, eventWrap, timeIndicator) {\n        setStyleAttribute(resWrap.querySelector('table'), { transform: \"translateY(\" + this.translateY + \"px)\" });\n        setStyleAttribute(conWrap.querySelector('table'), { transform: \"translateY(\" + this.translateY + \"px)\" });\n        setStyleAttribute(eventWrap, { transform: \"translateY(\" + this.translateY + \"px)\" });\n        if (!isNullOrUndefined(timeIndicator)) {\n            setStyleAttribute(timeIndicator, { transform: \"translateY(\" + this.translateY + \"px)\" });\n        }\n    };\n    VirtualScroll.prototype.updateFocusedWorkCell = function () {\n        if (this.focusedEle) {\n            var date = parseInt(this.focusedEle.getAttribute('data-date'), 10);\n            var groupIndex = parseInt(this.focusedEle.getAttribute('data-group-index'), 10);\n            var ele = this.parent.element.querySelector(\".\" + cls.WORK_CELLS_CLASS + \"[data-date=\\\"\" + date + \"\\\"][data-group-index=\\\"\" + groupIndex + \"\\\"]\");\n            if (ele) {\n                this.parent.addSelectedClass([ele], ele, true);\n            }\n            this.focusedEle = null;\n        }\n    };\n    VirtualScroll.prototype.setTabIndex = function () {\n        var resColWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n        var resCells = [].slice.call(this.parent.element.querySelectorAll('.' + cls.RESOURCE_CELLS_CLASS));\n        if (resCells && resColWrap) {\n            resCells.forEach(function (element) {\n                if (element.getBoundingClientRect().top >= resColWrap.getBoundingClientRect().top) {\n                    element.setAttribute('tabindex', '0');\n                }\n            });\n        }\n        var focusResCell = this.parent.element.querySelector(\".\" + cls.RESOURCE_CELLS_CLASS + \"[tabindex=\\\"\" + 0 + \"\\\"]\");\n        if (this.isResourceCell && focusResCell) {\n            focusResCell.focus();\n            this.isResourceCell = false;\n        }\n    };\n    VirtualScroll.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return VirtualScroll;\n}());\nexport { VirtualScroll };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}