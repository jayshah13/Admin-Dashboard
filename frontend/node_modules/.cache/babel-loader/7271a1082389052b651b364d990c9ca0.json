{"ast":null,"code":"/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { isNullOrUndefined, createElement, remove, closest, addClass, removeClass, extend } from '@syncfusion/ej2-base';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { Calendar } from '@syncfusion/ej2-calendars';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport * as events from '../base/constant';\nimport * as util from '../base/util';\nimport * as cls from '../base/css-constant';\n/**\n * Header module\n */\n\nvar HeaderRenderer =\n/** @class */\nfunction () {\n  function HeaderRenderer(parent) {\n    this.parent = parent;\n    this.l10n = this.parent.localeObj;\n    this.renderHeader();\n    this.addEventListener();\n  }\n\n  HeaderRenderer.prototype.addEventListener = function () {\n    this.parent.on(events.documentClick, this.closeHeaderPopup, this);\n  };\n\n  HeaderRenderer.prototype.removeEventListener = function () {\n    this.parent.off(events.documentClick, this.closeHeaderPopup);\n  };\n\n  HeaderRenderer.prototype.closeHeaderPopup = function (e) {\n    var closestEle = closest(e.event.target, '.e-date-range,.e-header-popup,.e-day,.e-selected');\n    var closestPop = closest(e.event.target, '.e-hor-nav,.e-toolbar-pop');\n    var contentWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n\n    if (this.parent.isAdaptive) {\n      if (!isNullOrUndefined(closestPop) && (closestPop.classList.contains('e-toolbar-pop') || closestPop.classList.contains('e-hor-nav')) && !(closestPop.classList.contains('e-hor-nav') && this.element.querySelector('.e-toolbar-pop').classList.contains(cls.POPUP_OPEN))) {\n        addClass([contentWrap], cls.SCROLL_HIDDEN);\n      } else {\n        removeClass([contentWrap], cls.SCROLL_HIDDEN);\n        var popupEle = this.element.querySelector('.e-toolbar-pop');\n\n        if (!isNullOrUndefined(popupEle)) {\n          var popupObj = popupEle.ej2_instances[0];\n\n          if (popupObj && !(!isNullOrUndefined(closestPop) && closestPop.classList.contains('e-hor-nav') && popupEle.classList.contains(cls.POPUP_OPEN))) {\n            popupObj.hide();\n          }\n        }\n      }\n    }\n\n    if (!isNullOrUndefined(closestEle)) {\n      return;\n    }\n\n    this.hideHeaderPopup();\n  };\n\n  HeaderRenderer.prototype.hideHeaderPopup = function () {\n    if (this.headerPopup) {\n      this.headerPopup.hide();\n    }\n  };\n\n  HeaderRenderer.prototype.renderHeader = function () {\n    this.element = createElement('div', {\n      className: cls.TOOLBAR_CONTAINER\n    });\n    var toolbarEle = createElement('div', {\n      className: cls.HEADER_TOOLBAR\n    });\n    this.element.appendChild(toolbarEle);\n    this.parent.element.insertBefore(this.element, this.parent.element.firstElementChild);\n    this.renderToolbar();\n  };\n\n  HeaderRenderer.prototype.renderToolbar = function () {\n    var _this = this;\n\n    var items = this.getItems();\n    this.parent.trigger(events.actionBegin, {\n      requestType: 'toolbarItemRendering',\n      items: items\n    }, function (args) {\n      _this.toolbarObj = new Toolbar({\n        items: args.items,\n        overflowMode: 'Popup',\n        clicked: _this.toolbarClickHandler.bind(_this),\n        enableRtl: _this.parent.enableRtl,\n        locale: _this.parent.locale\n      });\n\n      _this.toolbarObj.appendTo(_this.parent.element.querySelector('.' + cls.HEADER_TOOLBAR));\n\n      var prevNavEle = _this.toolbarObj.element.querySelector('.e-prev');\n\n      if (prevNavEle) {\n        prevNavEle.firstElementChild.setAttribute('title', _this.l10n.getConstant('previous'));\n      }\n\n      var nextNavEle = _this.toolbarObj.element.querySelector('.e-next');\n\n      if (nextNavEle) {\n        nextNavEle.firstElementChild.setAttribute('title', _this.l10n.getConstant('next'));\n      }\n\n      _this.updateAddIcon();\n\n      _this.updateActiveView();\n\n      _this.parent.trigger(events.actionComplete, {\n        requestType: 'toolBarItemRendered',\n        items: _this.toolbarObj.items\n      });\n    });\n  };\n\n  HeaderRenderer.prototype.updateItems = function () {\n    var _this = this;\n\n    if (this.toolbarObj) {\n      var items = this.getItems();\n      this.parent.trigger(events.actionBegin, {\n        requestType: 'toolbarItemRendering',\n        items: items\n      }, function (args) {\n        _this.toolbarObj.items = args.items;\n\n        _this.toolbarObj.dataBind();\n\n        _this.parent.trigger(events.actionComplete, {\n          requestType: 'toolBarItemRendered',\n          items: _this.toolbarObj.items\n        });\n      });\n    }\n  };\n\n  HeaderRenderer.prototype.getPopUpRelativeElement = function () {\n    if (this.parent.isAdaptive) {\n      return this.toolbarObj.element;\n    }\n\n    return this.element.querySelector('.e-date-range');\n  };\n\n  HeaderRenderer.prototype.setDayOfWeek = function (index) {\n    if (this.headerCalendar) {\n      this.headerCalendar.firstDayOfWeek = index;\n      this.headerCalendar.dataBind();\n    }\n  };\n\n  HeaderRenderer.prototype.setCalendarDate = function (date) {\n    if (this.headerCalendar) {\n      this.headerCalendar.value = date;\n      this.headerCalendar.dataBind();\n    }\n  };\n\n  HeaderRenderer.prototype.setCalendarMinMaxDate = function () {\n    if (this.headerCalendar) {\n      this.headerCalendar.min = this.parent.minDate;\n      this.headerCalendar.max = this.parent.maxDate;\n      this.headerCalendar.dataBind();\n    }\n  };\n\n  HeaderRenderer.prototype.getCalendarView = function () {\n    if (['Month', 'MonthAgenda', 'TimelineMonth'].indexOf(this.parent.currentView) > -1) {\n      return 'Year';\n    } else if (['Year', 'TimelineYear'].indexOf(this.parent.currentView) > -1) {\n      return 'Decade';\n    } else {\n      return 'Month';\n    }\n  };\n\n  HeaderRenderer.prototype.setCalendarView = function () {\n    if (this.headerCalendar) {\n      var calendarView = this.getCalendarView();\n      this.headerCalendar.depth = calendarView;\n      this.headerCalendar.start = calendarView;\n      this.headerCalendar.refresh();\n    }\n  };\n\n  HeaderRenderer.prototype.updateActiveView = function () {\n    var selEle = [].slice.call(this.toolbarObj.element.querySelectorAll('.e-views'));\n    removeClass(selEle, ['e-active-view']);\n\n    if (selEle.length > 0 && selEle[this.parent.viewIndex]) {\n      addClass([selEle[this.parent.viewIndex]], ['e-active-view']);\n    }\n  };\n\n  HeaderRenderer.prototype.updateDateRange = function (text) {\n    var selEle = this.toolbarObj.element.querySelector('.e-date-range');\n\n    if (selEle) {\n      selEle.setAttribute('aria-label', text);\n      selEle.querySelector('.e-tbar-btn-text').innerHTML = text;\n      this.refresh();\n    }\n  };\n\n  HeaderRenderer.prototype.refresh = function () {\n    if (this.toolbarObj) {\n      this.toolbarObj.refreshOverflow();\n    }\n  };\n\n  HeaderRenderer.prototype.updateAddIcon = function () {\n    var addEle = this.toolbarObj.element.querySelector('.e-add');\n\n    if (addEle) {\n      if (!this.parent.eventSettings.allowAdding) {\n        addClass([addEle], cls.HIDDEN_CLASS);\n      } else {\n        removeClass([addEle], cls.HIDDEN_CLASS);\n      }\n    }\n  };\n\n  HeaderRenderer.prototype.getDateRangeText = function () {\n    var dateString = this.parent.globalize.formatDate(this.parent.selectedDate, {\n      format: 'MMMM y',\n      calendar: this.parent.getCalendarMode()\n    });\n    return util.capitalizeFirstWord(dateString, 'single');\n  };\n\n  HeaderRenderer.prototype.getItems = function () {\n    var items = [];\n    items.push({\n      align: 'Left',\n      prefixIcon: 'e-icon-prev',\n      tooltipText: 'Previous',\n      overflow: 'Show',\n      cssClass: 'e-prev',\n      htmlAttributes: {\n        'aria-label': 'previous period',\n        'role': 'navigation'\n      }\n    });\n    items.push({\n      align: 'Left',\n      prefixIcon: 'e-icon-next',\n      tooltipText: 'Next',\n      overflow: 'Show',\n      cssClass: 'e-next',\n      htmlAttributes: {\n        'aria-label': 'next period',\n        'role': 'navigation'\n      }\n    });\n    items.push({\n      align: 'Left',\n      text: this.getDateRangeText(),\n      suffixIcon: 'e-icon-down-arrow',\n      cssClass: 'e-date-range',\n      overflow: 'Show',\n      htmlAttributes: {\n        'aria-atomic': 'true',\n        'aria-live': 'assertive',\n        'aria-label': 'title',\n        'role': 'navigation'\n      }\n    });\n\n    if (this.parent.isAdaptive || this.parent.enableAdaptiveUI) {\n      items.push({\n        align: 'Right',\n        showAlwaysInPopup: this.parent.isAdaptive || this.parent.enableAdaptiveUI,\n        prefixIcon: 'e-icon-add',\n        text: this.l10n.getConstant('newEvent'),\n        cssClass: 'e-add',\n        overflow: 'Show'\n      });\n      items.push({\n        align: 'Right',\n        showAlwaysInPopup: this.parent.isAdaptive || this.parent.enableAdaptiveUI,\n        prefixIcon: 'e-icon-today',\n        text: this.l10n.getConstant('today'),\n        cssClass: 'e-today',\n        overflow: 'Show'\n      });\n    } else {\n      items.push({\n        align: 'Right',\n        showAlwaysInPopup: this.parent.isAdaptive || this.parent.enableAdaptiveUI,\n        prefixIcon: 'e-icon-day',\n        text: this.l10n.getConstant('today'),\n        cssClass: 'e-today',\n        overflow: 'Show'\n      });\n\n      if (this.parent.views.length > 1) {\n        items.push({\n          align: 'Right',\n          type: 'Separator',\n          cssClass: 'e-schedule-seperator'\n        });\n      }\n    }\n\n    if (this.parent.views.length > 1) {\n      for (var _i = 0, _a = this.parent.views; _i < _a.length; _i++) {\n        var item = _a[_i];\n        items.push(this.getItemObject(item));\n      }\n    }\n\n    return items;\n  };\n\n  HeaderRenderer.prototype.getItemObject = function (item) {\n    var viewName;\n    var displayName;\n\n    if (typeof item === 'string') {\n      viewName = item.toLowerCase();\n      displayName = null;\n    } else {\n      viewName = item.option.toLowerCase();\n      displayName = item.displayName;\n    }\n\n    var view;\n    var orientationClass;\n    var isItemInsidePopup = this.parent.isAdaptive || this.parent.enableAdaptiveUI;\n\n    switch (viewName) {\n      case 'day':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: isItemInsidePopup,\n          prefixIcon: 'e-icon-day',\n          text: displayName || this.l10n.getConstant('day'),\n          cssClass: 'e-views e-day'\n        };\n        break;\n\n      case 'week':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: isItemInsidePopup,\n          prefixIcon: 'e-icon-week',\n          text: displayName || this.l10n.getConstant('week'),\n          cssClass: 'e-views e-week'\n        };\n        break;\n\n      case 'workweek':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: isItemInsidePopup,\n          prefixIcon: 'e-icon-workweek',\n          text: displayName || this.l10n.getConstant('workWeek'),\n          cssClass: 'e-views e-work-week'\n        };\n        break;\n\n      case 'month':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: isItemInsidePopup,\n          prefixIcon: 'e-icon-month',\n          text: displayName || this.l10n.getConstant('month'),\n          cssClass: 'e-views e-month'\n        };\n        break;\n\n      case 'year':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: isItemInsidePopup,\n          prefixIcon: 'e-icon-year',\n          text: displayName || this.l10n.getConstant('year'),\n          cssClass: 'e-views e-year'\n        };\n        break;\n\n      case 'agenda':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: isItemInsidePopup,\n          prefixIcon: 'e-icon-agenda',\n          text: displayName || this.l10n.getConstant('agenda'),\n          cssClass: 'e-views e-agenda'\n        };\n        break;\n\n      case 'monthagenda':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: isItemInsidePopup,\n          prefixIcon: 'e-icon-month-agenda',\n          text: displayName || this.l10n.getConstant('monthAgenda'),\n          cssClass: 'e-views e-month-agenda'\n        };\n        break;\n\n      case 'timelineday':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: isItemInsidePopup,\n          prefixIcon: 'e-icon-timeline-day',\n          text: displayName || this.l10n.getConstant('timelineDay'),\n          cssClass: 'e-views e-timeline-day'\n        };\n        break;\n\n      case 'timelineweek':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: isItemInsidePopup,\n          prefixIcon: 'e-icon-timeline-week',\n          text: displayName || this.l10n.getConstant('timelineWeek'),\n          cssClass: 'e-views e-timeline-week'\n        };\n        break;\n\n      case 'timelineworkweek':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: isItemInsidePopup,\n          prefixIcon: 'e-icon-timeline-workweek',\n          text: displayName || this.l10n.getConstant('timelineWorkWeek'),\n          cssClass: 'e-views e-timeline-work-week'\n        };\n        break;\n\n      case 'timelinemonth':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: isItemInsidePopup,\n          prefixIcon: 'e-icon-timeline-month',\n          text: displayName || this.l10n.getConstant('timelineMonth'),\n          cssClass: 'e-views e-timeline-month'\n        };\n        break;\n\n      case 'timelineyear':\n        orientationClass = item.orientation === 'Vertical' ? 'vertical' : 'horizontal';\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: isItemInsidePopup,\n          prefixIcon: 'e-icon-timeline-year-' + orientationClass,\n          text: displayName || this.l10n.getConstant('timelineYear'),\n          cssClass: 'e-views e-timeline-year'\n        };\n        break;\n    }\n\n    return view;\n  };\n\n  HeaderRenderer.prototype.renderHeaderPopup = function () {\n    var headerPopupEle = createElement('div', {\n      className: cls.HEADER_POPUP_CLASS\n    });\n    var headerCalendarEle = createElement('div', {\n      className: cls.HEADER_CALENDAR_CLASS\n    });\n    headerPopupEle.appendChild(headerCalendarEle);\n    this.element.appendChild(headerPopupEle);\n    this.headerPopup = new Popup(headerPopupEle, {\n      actionOnScroll: 'hide',\n      targetType: 'relative',\n      relateTo: this.getPopUpRelativeElement(),\n      position: {\n        X: 'left',\n        Y: 'bottom'\n      },\n      enableRtl: this.parent.enableRtl\n    });\n    var calendarView = this.getCalendarView();\n    var isDisplayDate = this.parent.currentView === 'Month' && !isNullOrUndefined(this.parent.activeViewOptions.displayDate) && !this.hasSelectedDate();\n    this.headerCalendar = new Calendar({\n      value: isDisplayDate ? this.parent.activeViewOptions.displayDate : this.parent.selectedDate,\n      min: this.parent.minDate,\n      max: this.parent.maxDate,\n      firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale,\n      depth: calendarView,\n      start: calendarView,\n      calendarMode: this.parent.calendarMode,\n      change: this.calendarChange.bind(this)\n    });\n    this.setCalendarTimezone();\n    this.headerCalendar.appendTo(headerCalendarEle);\n    this.headerPopup.hide();\n  };\n\n  HeaderRenderer.prototype.calendarChange = function (args) {\n    if (args.value.getTime() !== this.parent.selectedDate.getTime()) {\n      var calendarDate = util.resetTime(new Date(args.value));\n      this.parent.changeDate(calendarDate);\n    }\n\n    this.headerPopup.hide();\n  };\n\n  HeaderRenderer.prototype.setCalendarTimezone = function () {\n    if (this.headerCalendar) {\n      this.headerCalendar.timezone = this.parent.timezone || this.parent.tzModule.getLocalTimezoneName();\n    }\n  };\n\n  HeaderRenderer.prototype.calculateViewIndex = function (args) {\n    var target = closest(args.originalEvent.target, '.e-views');\n    var views = [].slice.call(this.element.querySelectorAll('.e-views'));\n    return views.indexOf(target);\n  };\n\n  HeaderRenderer.prototype.toolbarClickHandler = function (args) {\n    if (!args.item) {\n      return;\n    }\n\n    var strClass = args.item.cssClass.replace('e-views ', '');\n    var data;\n    var isSameTime;\n    var currentTime;\n\n    switch (strClass) {\n      case 'e-date-range':\n        if (!this.headerPopup) {\n          this.renderHeaderPopup();\n        }\n\n        if (this.headerPopup.element.classList.contains(cls.POPUP_OPEN)) {\n          this.headerPopup.hide();\n        } else {\n          this.headerPopup.show();\n        }\n\n        break;\n\n      case 'e-day':\n        this.parent.changeView('Day', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-week':\n        this.parent.changeView('Week', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-work-week':\n        this.parent.changeView('WorkWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-month':\n        this.parent.changeView('Month', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-year':\n        this.parent.changeView('Year', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-agenda':\n        this.parent.changeView('Agenda', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-month-agenda':\n        this.parent.changeView('MonthAgenda', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-timeline-day':\n        this.parent.changeView('TimelineDay', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-timeline-week':\n        this.parent.changeView('TimelineWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-timeline-work-week':\n        this.parent.changeView('TimelineWorkWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-timeline-month':\n        this.parent.changeView('TimelineMonth', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-timeline-year':\n        this.parent.changeView('TimelineYear', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-today':\n        currentTime = util.resetTime(this.parent.getCurrentTime());\n\n        if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda' || !this.parent.isSelectedDate(currentTime) || this.parent.currentView === 'Month' && this.parent.activeViewOptions.displayDate && !this.hasSelectedDate() && util.resetTime(this.parent.activeViewOptions.displayDate) !== currentTime || this.parent.currentView === 'Month' && this.parent.activeViewOptions.numberOfWeeks > 0 && !this.hasSelectedDate() && util.resetTime(util.firstDateOfMonth(this.parent.selectedDate)) !== currentTime) {\n          this.parent.changeDate(currentTime, args.originalEvent);\n        }\n\n        break;\n\n      case 'e-prev':\n        this.parent.changeDate(this.parent.activeView.getNextPreviousDate('previous'), args.originalEvent);\n        break;\n\n      case 'e-next':\n        this.parent.changeDate(this.parent.activeView.getNextPreviousDate('next'), args.originalEvent);\n        break;\n\n      case 'e-add':\n        isSameTime = this.parent.activeCellsData.startTime.getTime() === this.parent.activeCellsData.endTime.getTime();\n\n        if (this.parent.activeCellsData && !isSameTime) {\n          data = this.parent.activeCellsData;\n        } else {\n          var interval = this.parent.activeViewOptions.timeScale.interval;\n          var slotCount = this.parent.activeViewOptions.timeScale.slotCount;\n          var msInterval = interval * util.MS_PER_MINUTE / slotCount;\n          var startTime = new Date(this.parent.selectedDate.getTime());\n          var currentTime_1 = this.parent.getCurrentTime();\n          startTime.setHours(currentTime_1.getHours(), Math.round(startTime.getMinutes() / msInterval) * msInterval, 0);\n          var endTime = new Date(new Date(startTime.getTime()).setMilliseconds(startTime.getMilliseconds() + msInterval));\n          data = {\n            startTime: startTime,\n            endTime: endTime,\n            isAllDay: false\n          };\n        }\n\n        this.parent.eventWindow.openEditor(extend(data, {\n          cancel: false,\n          event: args.originalEvent\n        }), 'Add');\n        break;\n    }\n\n    if (isNullOrUndefined(this.toolbarObj)) {\n      return;\n    }\n\n    var toolbarPopUp = this.toolbarObj.element.querySelector('.e-toolbar-pop');\n\n    if (toolbarPopUp && args.item.type !== 'Input') {\n      toolbarPopUp.ej2_instances[0].hide({\n        name: 'SlideUp',\n        duration: 100\n      });\n    }\n  };\n\n  HeaderRenderer.prototype.hasSelectedDate = function () {\n    var selectedTime = util.resetTime(this.parent.selectedDate).getTime();\n    return selectedTime >= this.parent.activeView.getStartDate().getTime() && selectedTime <= this.parent.activeView.getEndDate().getTime();\n  };\n\n  HeaderRenderer.prototype.getHeaderElement = function () {\n    return this.toolbarObj.element;\n  };\n\n  HeaderRenderer.prototype.updateHeaderItems = function (classType) {\n    var prevNavEle = this.toolbarObj.element.querySelector('.e-prev');\n    var nextNavEle = this.toolbarObj.element.querySelector('.e-next');\n    var dateRangeEle = this.toolbarObj.element.querySelector('.e-date-range');\n\n    if (prevNavEle) {\n      if (classType === 'add') {\n        addClass([prevNavEle], cls.HIDDEN_CLASS);\n      } else {\n        removeClass([prevNavEle], cls.HIDDEN_CLASS);\n      }\n    }\n\n    if (nextNavEle) {\n      if (classType === 'add') {\n        addClass([nextNavEle], cls.HIDDEN_CLASS);\n      } else {\n        removeClass([nextNavEle], cls.HIDDEN_CLASS);\n      }\n    }\n\n    if (dateRangeEle) {\n      if (classType === 'add') {\n        addClass([dateRangeEle], cls.TEXT_ELLIPSIS);\n      } else {\n        removeClass([dateRangeEle], cls.TEXT_ELLIPSIS);\n      }\n    }\n  };\n\n  HeaderRenderer.prototype.previousNextIconHandler = function () {\n    var dates = this.parent.currentView === 'Agenda' ? [this.parent.getCurrentViewDates()[0]] : this.parent.getCurrentViewDates();\n    var prevNavEle = this.toolbarObj.element.querySelector('.' + cls.PREVIOUS_DATE_CLASS);\n    var nextNavEle = this.toolbarObj.element.querySelector('.' + cls.NEXT_DATE_CLASS);\n    var firstDate = new Date(dates[0].getTime());\n    var lastDate = new Date(dates[dates.length - 1].getTime());\n\n    if (this.parent.currentView === 'WorkWeek' || this.parent.currentView === 'TimelineWorkWeek') {\n      firstDate = util.getWeekFirstDate(util.resetTime(this.parent.selectedDate), this.parent.firstDayOfWeek);\n      lastDate = util.addDays(firstDate, 7 * this.parent.activeViewOptions.interval);\n    }\n\n    if (this.parent.currentView === 'Month') {\n      var isCustomMonth = !isNullOrUndefined(this.parent.activeViewOptions.displayDate) || this.parent.activeViewOptions.numberOfWeeks > 0;\n      firstDate = isCustomMonth ? this.parent.activeView.getStartDate() : util.firstDateOfMonth(this.parent.selectedDate);\n      lastDate = isCustomMonth ? this.parent.activeView.getEndDate() : util.lastDateOfMonth(util.addMonths(firstDate, this.parent.activeViewOptions.interval - 1));\n    }\n\n    if (!isNullOrUndefined(prevNavEle)) {\n      this.toolbarObj.enableItems(prevNavEle, firstDate > this.parent.minDate);\n    }\n\n    if (!isNullOrUndefined(nextNavEle)) {\n      this.toolbarObj.enableItems(nextNavEle, lastDate < this.parent.maxDate);\n    }\n\n    this.setCalendarMinMaxDate();\n  };\n\n  HeaderRenderer.prototype.getModuleName = function () {\n    return 'headerbar';\n  };\n\n  HeaderRenderer.prototype.destroy = function () {\n    if (this.headerPopup && !this.headerPopup.isDestroyed) {\n      this.headerPopup.destroy();\n      this.headerPopup = null;\n    }\n\n    if (this.headerCalendar && !this.headerCalendar.isDestroyed) {\n      this.headerCalendar.destroy();\n      this.headerCalendar = null;\n    }\n\n    if (this.toolbarObj && !this.toolbarObj.isDestroyed) {\n      this.toolbarObj.destroy();\n      this.removeEventListener();\n      remove(this.element);\n      this.toolbarObj = null;\n    }\n\n    this.element = null;\n    this.parent = null;\n    this.l10n = null;\n  };\n\n  return HeaderRenderer;\n}();\n\nexport { HeaderRenderer };","map":{"version":3,"names":["isNullOrUndefined","createElement","remove","closest","addClass","removeClass","extend","Toolbar","Calendar","Popup","events","util","cls","HeaderRenderer","parent","l10n","localeObj","renderHeader","addEventListener","prototype","on","documentClick","closeHeaderPopup","removeEventListener","off","e","closestEle","event","target","closestPop","contentWrap","element","querySelector","CONTENT_WRAP_CLASS","isAdaptive","classList","contains","POPUP_OPEN","SCROLL_HIDDEN","popupEle","popupObj","ej2_instances","hide","hideHeaderPopup","headerPopup","className","TOOLBAR_CONTAINER","toolbarEle","HEADER_TOOLBAR","appendChild","insertBefore","firstElementChild","renderToolbar","_this","items","getItems","trigger","actionBegin","requestType","args","toolbarObj","overflowMode","clicked","toolbarClickHandler","bind","enableRtl","locale","appendTo","prevNavEle","setAttribute","getConstant","nextNavEle","updateAddIcon","updateActiveView","actionComplete","updateItems","dataBind","getPopUpRelativeElement","setDayOfWeek","index","headerCalendar","firstDayOfWeek","setCalendarDate","date","value","setCalendarMinMaxDate","min","minDate","max","maxDate","getCalendarView","indexOf","currentView","setCalendarView","calendarView","depth","start","refresh","selEle","slice","call","querySelectorAll","length","viewIndex","updateDateRange","text","innerHTML","refreshOverflow","addEle","eventSettings","allowAdding","HIDDEN_CLASS","getDateRangeText","dateString","globalize","formatDate","selectedDate","format","calendar","getCalendarMode","capitalizeFirstWord","push","align","prefixIcon","tooltipText","overflow","cssClass","htmlAttributes","suffixIcon","enableAdaptiveUI","showAlwaysInPopup","views","type","_i","_a","item","getItemObject","viewName","displayName","toLowerCase","option","view","orientationClass","isItemInsidePopup","orientation","renderHeaderPopup","headerPopupEle","HEADER_POPUP_CLASS","headerCalendarEle","HEADER_CALENDAR_CLASS","actionOnScroll","targetType","relateTo","position","X","Y","isDisplayDate","activeViewOptions","displayDate","hasSelectedDate","calendarMode","change","calendarChange","setCalendarTimezone","getTime","calendarDate","resetTime","Date","changeDate","timezone","tzModule","getLocalTimezoneName","calculateViewIndex","originalEvent","strClass","replace","data","isSameTime","currentTime","show","changeView","undefined","getCurrentTime","isSelectedDate","numberOfWeeks","firstDateOfMonth","activeView","getNextPreviousDate","activeCellsData","startTime","endTime","interval","timeScale","slotCount","msInterval","MS_PER_MINUTE","currentTime_1","setHours","getHours","Math","round","getMinutes","setMilliseconds","getMilliseconds","isAllDay","eventWindow","openEditor","cancel","toolbarPopUp","name","duration","selectedTime","getStartDate","getEndDate","getHeaderElement","updateHeaderItems","classType","dateRangeEle","TEXT_ELLIPSIS","previousNextIconHandler","dates","getCurrentViewDates","PREVIOUS_DATE_CLASS","NEXT_DATE_CLASS","firstDate","lastDate","getWeekFirstDate","addDays","isCustomMonth","lastDateOfMonth","addMonths","enableItems","getModuleName","destroy","isDestroyed"],"sources":["C:/Users/shahj/OneDrive/Documents/GitHub/Multifunctional-React-Dashboard/node_modules/@syncfusion/ej2-schedule/src/schedule/renderer/header-renderer.js"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { isNullOrUndefined, createElement, remove, closest, addClass, removeClass, extend } from '@syncfusion/ej2-base';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { Calendar } from '@syncfusion/ej2-calendars';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport * as events from '../base/constant';\nimport * as util from '../base/util';\nimport * as cls from '../base/css-constant';\n/**\n * Header module\n */\nvar HeaderRenderer = /** @class */ (function () {\n    function HeaderRenderer(parent) {\n        this.parent = parent;\n        this.l10n = this.parent.localeObj;\n        this.renderHeader();\n        this.addEventListener();\n    }\n    HeaderRenderer.prototype.addEventListener = function () {\n        this.parent.on(events.documentClick, this.closeHeaderPopup, this);\n    };\n    HeaderRenderer.prototype.removeEventListener = function () {\n        this.parent.off(events.documentClick, this.closeHeaderPopup);\n    };\n    HeaderRenderer.prototype.closeHeaderPopup = function (e) {\n        var closestEle = closest(e.event.target, '.e-date-range,.e-header-popup,.e-day,.e-selected');\n        var closestPop = closest(e.event.target, '.e-hor-nav,.e-toolbar-pop');\n        var contentWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        if (this.parent.isAdaptive) {\n            if (!isNullOrUndefined(closestPop) && (closestPop.classList.contains('e-toolbar-pop') ||\n                closestPop.classList.contains('e-hor-nav')) && !(closestPop.classList.contains('e-hor-nav') &&\n                this.element.querySelector('.e-toolbar-pop').classList.contains(cls.POPUP_OPEN))) {\n                addClass([contentWrap], cls.SCROLL_HIDDEN);\n            }\n            else {\n                removeClass([contentWrap], cls.SCROLL_HIDDEN);\n                var popupEle = this.element.querySelector('.e-toolbar-pop');\n                if (!isNullOrUndefined(popupEle)) {\n                    var popupObj = popupEle.ej2_instances[0];\n                    if (popupObj && !(!isNullOrUndefined(closestPop) && closestPop.classList.contains('e-hor-nav') &&\n                        popupEle.classList.contains(cls.POPUP_OPEN))) {\n                        popupObj.hide();\n                    }\n                }\n            }\n        }\n        if (!isNullOrUndefined(closestEle)) {\n            return;\n        }\n        this.hideHeaderPopup();\n    };\n    HeaderRenderer.prototype.hideHeaderPopup = function () {\n        if (this.headerPopup) {\n            this.headerPopup.hide();\n        }\n    };\n    HeaderRenderer.prototype.renderHeader = function () {\n        this.element = createElement('div', { className: cls.TOOLBAR_CONTAINER });\n        var toolbarEle = createElement('div', { className: cls.HEADER_TOOLBAR });\n        this.element.appendChild(toolbarEle);\n        this.parent.element.insertBefore(this.element, this.parent.element.firstElementChild);\n        this.renderToolbar();\n    };\n    HeaderRenderer.prototype.renderToolbar = function () {\n        var _this = this;\n        var items = this.getItems();\n        this.parent.trigger(events.actionBegin, { requestType: 'toolbarItemRendering', items: items }, function (args) {\n            _this.toolbarObj = new Toolbar({\n                items: args.items,\n                overflowMode: 'Popup',\n                clicked: _this.toolbarClickHandler.bind(_this),\n                enableRtl: _this.parent.enableRtl,\n                locale: _this.parent.locale\n            });\n            _this.toolbarObj.appendTo(_this.parent.element.querySelector('.' + cls.HEADER_TOOLBAR));\n            var prevNavEle = _this.toolbarObj.element.querySelector('.e-prev');\n            if (prevNavEle) {\n                prevNavEle.firstElementChild.setAttribute('title', _this.l10n.getConstant('previous'));\n            }\n            var nextNavEle = _this.toolbarObj.element.querySelector('.e-next');\n            if (nextNavEle) {\n                nextNavEle.firstElementChild.setAttribute('title', _this.l10n.getConstant('next'));\n            }\n            _this.updateAddIcon();\n            _this.updateActiveView();\n            _this.parent.trigger(events.actionComplete, { requestType: 'toolBarItemRendered', items: _this.toolbarObj.items });\n        });\n    };\n    HeaderRenderer.prototype.updateItems = function () {\n        var _this = this;\n        if (this.toolbarObj) {\n            var items = this.getItems();\n            this.parent.trigger(events.actionBegin, { requestType: 'toolbarItemRendering', items: items }, function (args) {\n                _this.toolbarObj.items = args.items;\n                _this.toolbarObj.dataBind();\n                _this.parent.trigger(events.actionComplete, { requestType: 'toolBarItemRendered', items: _this.toolbarObj.items });\n            });\n        }\n    };\n    HeaderRenderer.prototype.getPopUpRelativeElement = function () {\n        if (this.parent.isAdaptive) {\n            return this.toolbarObj.element;\n        }\n        return this.element.querySelector('.e-date-range');\n    };\n    HeaderRenderer.prototype.setDayOfWeek = function (index) {\n        if (this.headerCalendar) {\n            this.headerCalendar.firstDayOfWeek = index;\n            this.headerCalendar.dataBind();\n        }\n    };\n    HeaderRenderer.prototype.setCalendarDate = function (date) {\n        if (this.headerCalendar) {\n            this.headerCalendar.value = date;\n            this.headerCalendar.dataBind();\n        }\n    };\n    HeaderRenderer.prototype.setCalendarMinMaxDate = function () {\n        if (this.headerCalendar) {\n            this.headerCalendar.min = this.parent.minDate;\n            this.headerCalendar.max = this.parent.maxDate;\n            this.headerCalendar.dataBind();\n        }\n    };\n    HeaderRenderer.prototype.getCalendarView = function () {\n        if (['Month', 'MonthAgenda', 'TimelineMonth'].indexOf(this.parent.currentView) > -1) {\n            return 'Year';\n        }\n        else if (['Year', 'TimelineYear'].indexOf(this.parent.currentView) > -1) {\n            return 'Decade';\n        }\n        else {\n            return 'Month';\n        }\n    };\n    HeaderRenderer.prototype.setCalendarView = function () {\n        if (this.headerCalendar) {\n            var calendarView = this.getCalendarView();\n            this.headerCalendar.depth = calendarView;\n            this.headerCalendar.start = calendarView;\n            this.headerCalendar.refresh();\n        }\n    };\n    HeaderRenderer.prototype.updateActiveView = function () {\n        var selEle = [].slice.call(this.toolbarObj.element.querySelectorAll('.e-views'));\n        removeClass(selEle, ['e-active-view']);\n        if (selEle.length > 0 && selEle[this.parent.viewIndex]) {\n            addClass([selEle[this.parent.viewIndex]], ['e-active-view']);\n        }\n    };\n    HeaderRenderer.prototype.updateDateRange = function (text) {\n        var selEle = this.toolbarObj.element.querySelector('.e-date-range');\n        if (selEle) {\n            selEle.setAttribute('aria-label', text);\n            selEle.querySelector('.e-tbar-btn-text').innerHTML = text;\n            this.refresh();\n        }\n    };\n    HeaderRenderer.prototype.refresh = function () {\n        if (this.toolbarObj) {\n            this.toolbarObj.refreshOverflow();\n        }\n    };\n    HeaderRenderer.prototype.updateAddIcon = function () {\n        var addEle = this.toolbarObj.element.querySelector('.e-add');\n        if (addEle) {\n            if (!this.parent.eventSettings.allowAdding) {\n                addClass([addEle], cls.HIDDEN_CLASS);\n            }\n            else {\n                removeClass([addEle], cls.HIDDEN_CLASS);\n            }\n        }\n    };\n    HeaderRenderer.prototype.getDateRangeText = function () {\n        var dateString = this.parent.globalize.formatDate(this.parent.selectedDate, {\n            format: 'MMMM y', calendar: this.parent.getCalendarMode()\n        });\n        return util.capitalizeFirstWord(dateString, 'single');\n    };\n    HeaderRenderer.prototype.getItems = function () {\n        var items = [];\n        items.push({\n            align: 'Left', prefixIcon: 'e-icon-prev', tooltipText: 'Previous', overflow: 'Show',\n            cssClass: 'e-prev', htmlAttributes: { 'aria-label': 'previous period', 'role': 'navigation' }\n        });\n        items.push({\n            align: 'Left', prefixIcon: 'e-icon-next', tooltipText: 'Next', overflow: 'Show',\n            cssClass: 'e-next', htmlAttributes: { 'aria-label': 'next period', 'role': 'navigation' }\n        });\n        items.push({\n            align: 'Left', text: this.getDateRangeText(), suffixIcon: 'e-icon-down-arrow', cssClass: 'e-date-range',\n            overflow: 'Show',\n            htmlAttributes: { 'aria-atomic': 'true', 'aria-live': 'assertive', 'aria-label': 'title', 'role': 'navigation' }\n        });\n        if (this.parent.isAdaptive || this.parent.enableAdaptiveUI) {\n            items.push({\n                align: 'Right', showAlwaysInPopup: (this.parent.isAdaptive || this.parent.enableAdaptiveUI), prefixIcon: 'e-icon-add',\n                text: this.l10n.getConstant('newEvent'), cssClass: 'e-add', overflow: 'Show'\n            });\n            items.push({\n                align: 'Right', showAlwaysInPopup: (this.parent.isAdaptive || this.parent.enableAdaptiveUI), prefixIcon: 'e-icon-today',\n                text: this.l10n.getConstant('today'), cssClass: 'e-today', overflow: 'Show'\n            });\n        }\n        else {\n            items.push({\n                align: 'Right', showAlwaysInPopup: (this.parent.isAdaptive || this.parent.enableAdaptiveUI), prefixIcon: 'e-icon-day',\n                text: this.l10n.getConstant('today'), cssClass: 'e-today', overflow: 'Show'\n            });\n            if (this.parent.views.length > 1) {\n                items.push({ align: 'Right', type: 'Separator', cssClass: 'e-schedule-seperator' });\n            }\n        }\n        if (this.parent.views.length > 1) {\n            for (var _i = 0, _a = this.parent.views; _i < _a.length; _i++) {\n                var item = _a[_i];\n                items.push(this.getItemObject(item));\n            }\n        }\n        return items;\n    };\n    HeaderRenderer.prototype.getItemObject = function (item) {\n        var viewName;\n        var displayName;\n        if (typeof (item) === 'string') {\n            viewName = item.toLowerCase();\n            displayName = null;\n        }\n        else {\n            viewName = item.option.toLowerCase();\n            displayName = item.displayName;\n        }\n        var view;\n        var orientationClass;\n        var isItemInsidePopup = this.parent.isAdaptive || this.parent.enableAdaptiveUI;\n        switch (viewName) {\n            case 'day':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-day',\n                    text: displayName || this.l10n.getConstant('day'), cssClass: 'e-views e-day'\n                };\n                break;\n            case 'week':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-week',\n                    text: displayName || this.l10n.getConstant('week'), cssClass: 'e-views e-week'\n                };\n                break;\n            case 'workweek':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-workweek',\n                    text: displayName || this.l10n.getConstant('workWeek'), cssClass: 'e-views e-work-week'\n                };\n                break;\n            case 'month':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-month',\n                    text: displayName || this.l10n.getConstant('month'), cssClass: 'e-views e-month'\n                };\n                break;\n            case 'year':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-year',\n                    text: displayName || this.l10n.getConstant('year'), cssClass: 'e-views e-year'\n                };\n                break;\n            case 'agenda':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-agenda',\n                    text: displayName || this.l10n.getConstant('agenda'), cssClass: 'e-views e-agenda'\n                };\n                break;\n            case 'monthagenda':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-month-agenda',\n                    text: displayName || this.l10n.getConstant('monthAgenda'), cssClass: 'e-views e-month-agenda'\n                };\n                break;\n            case 'timelineday':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-timeline-day',\n                    text: displayName || this.l10n.getConstant('timelineDay'), cssClass: 'e-views e-timeline-day'\n                };\n                break;\n            case 'timelineweek':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-timeline-week',\n                    text: displayName || this.l10n.getConstant('timelineWeek'), cssClass: 'e-views e-timeline-week'\n                };\n                break;\n            case 'timelineworkweek':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-timeline-workweek',\n                    text: displayName || this.l10n.getConstant('timelineWorkWeek'), cssClass: 'e-views e-timeline-work-week'\n                };\n                break;\n            case 'timelinemonth':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-timeline-month',\n                    text: displayName || this.l10n.getConstant('timelineMonth'), cssClass: 'e-views e-timeline-month'\n                };\n                break;\n            case 'timelineyear':\n                orientationClass = (item.orientation === 'Vertical') ? 'vertical' : 'horizontal';\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-timeline-year-' + orientationClass,\n                    text: displayName || this.l10n.getConstant('timelineYear'), cssClass: 'e-views e-timeline-year'\n                };\n                break;\n        }\n        return view;\n    };\n    HeaderRenderer.prototype.renderHeaderPopup = function () {\n        var headerPopupEle = createElement('div', { className: cls.HEADER_POPUP_CLASS });\n        var headerCalendarEle = createElement('div', { className: cls.HEADER_CALENDAR_CLASS });\n        headerPopupEle.appendChild(headerCalendarEle);\n        this.element.appendChild(headerPopupEle);\n        this.headerPopup = new Popup(headerPopupEle, {\n            actionOnScroll: 'hide',\n            targetType: 'relative',\n            relateTo: this.getPopUpRelativeElement(),\n            position: { X: 'left', Y: 'bottom' },\n            enableRtl: this.parent.enableRtl\n        });\n        var calendarView = this.getCalendarView();\n        var isDisplayDate = this.parent.currentView === 'Month' &&\n            !isNullOrUndefined(this.parent.activeViewOptions.displayDate) && !this.hasSelectedDate();\n        this.headerCalendar = new Calendar({\n            value: isDisplayDate ? this.parent.activeViewOptions.displayDate : this.parent.selectedDate,\n            min: this.parent.minDate,\n            max: this.parent.maxDate,\n            firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            depth: calendarView,\n            start: calendarView,\n            calendarMode: this.parent.calendarMode,\n            change: this.calendarChange.bind(this)\n        });\n        this.setCalendarTimezone();\n        this.headerCalendar.appendTo(headerCalendarEle);\n        this.headerPopup.hide();\n    };\n    HeaderRenderer.prototype.calendarChange = function (args) {\n        if (args.value.getTime() !== this.parent.selectedDate.getTime()) {\n            var calendarDate = util.resetTime(new Date(args.value));\n            this.parent.changeDate(calendarDate);\n        }\n        this.headerPopup.hide();\n    };\n    HeaderRenderer.prototype.setCalendarTimezone = function () {\n        if (this.headerCalendar) {\n            this.headerCalendar.timezone = this.parent.timezone || this.parent.tzModule.getLocalTimezoneName();\n        }\n    };\n    HeaderRenderer.prototype.calculateViewIndex = function (args) {\n        var target = closest(args.originalEvent.target, '.e-views');\n        var views = [].slice.call(this.element.querySelectorAll('.e-views'));\n        return views.indexOf(target);\n    };\n    HeaderRenderer.prototype.toolbarClickHandler = function (args) {\n        if (!args.item) {\n            return;\n        }\n        var strClass = args.item.cssClass.replace('e-views ', '');\n        var data;\n        var isSameTime;\n        var currentTime;\n        switch (strClass) {\n            case 'e-date-range':\n                if (!this.headerPopup) {\n                    this.renderHeaderPopup();\n                }\n                if (this.headerPopup.element.classList.contains(cls.POPUP_OPEN)) {\n                    this.headerPopup.hide();\n                }\n                else {\n                    this.headerPopup.show();\n                }\n                break;\n            case 'e-day':\n                this.parent.changeView('Day', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-week':\n                this.parent.changeView('Week', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-work-week':\n                this.parent.changeView('WorkWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-month':\n                this.parent.changeView('Month', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-year':\n                this.parent.changeView('Year', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-agenda':\n                this.parent.changeView('Agenda', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-month-agenda':\n                this.parent.changeView('MonthAgenda', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-timeline-day':\n                this.parent.changeView('TimelineDay', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-timeline-week':\n                this.parent.changeView('TimelineWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-timeline-work-week':\n                this.parent.changeView('TimelineWorkWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-timeline-month':\n                this.parent.changeView('TimelineMonth', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-timeline-year':\n                this.parent.changeView('TimelineYear', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-today':\n                currentTime = util.resetTime(this.parent.getCurrentTime());\n                if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda' || !this.parent.isSelectedDate(currentTime) ||\n                    this.parent.currentView === 'Month' && this.parent.activeViewOptions.displayDate && !this.hasSelectedDate() &&\n                        util.resetTime(this.parent.activeViewOptions.displayDate) !== currentTime || this.parent.currentView === 'Month' &&\n                    this.parent.activeViewOptions.numberOfWeeks > 0 && !this.hasSelectedDate()\n                    && util.resetTime(util.firstDateOfMonth(this.parent.selectedDate)) !== currentTime) {\n                    this.parent.changeDate(currentTime, args.originalEvent);\n                }\n                break;\n            case 'e-prev':\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('previous'), args.originalEvent);\n                break;\n            case 'e-next':\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('next'), args.originalEvent);\n                break;\n            case 'e-add':\n                isSameTime = this.parent.activeCellsData.startTime.getTime() === this.parent.activeCellsData.endTime.getTime();\n                if (this.parent.activeCellsData && !isSameTime) {\n                    data = this.parent.activeCellsData;\n                }\n                else {\n                    var interval = this.parent.activeViewOptions.timeScale.interval;\n                    var slotCount = this.parent.activeViewOptions.timeScale.slotCount;\n                    var msInterval = (interval * util.MS_PER_MINUTE) / slotCount;\n                    var startTime = new Date(this.parent.selectedDate.getTime());\n                    var currentTime_1 = this.parent.getCurrentTime();\n                    startTime.setHours(currentTime_1.getHours(), (Math.round(startTime.getMinutes() / msInterval) * msInterval), 0);\n                    var endTime = new Date(new Date(startTime.getTime()).setMilliseconds(startTime.getMilliseconds() + msInterval));\n                    data = { startTime: startTime, endTime: endTime, isAllDay: false };\n                }\n                this.parent.eventWindow.openEditor(extend(data, { cancel: false, event: args.originalEvent }), 'Add');\n                break;\n        }\n        if (isNullOrUndefined(this.toolbarObj)) {\n            return;\n        }\n        var toolbarPopUp = this.toolbarObj.element.querySelector('.e-toolbar-pop');\n        if (toolbarPopUp && args.item.type !== 'Input') {\n            toolbarPopUp.ej2_instances[0].hide({ name: 'SlideUp', duration: 100 });\n        }\n    };\n    HeaderRenderer.prototype.hasSelectedDate = function () {\n        var selectedTime = util.resetTime(this.parent.selectedDate).getTime();\n        return selectedTime >= this.parent.activeView.getStartDate().getTime() &&\n            selectedTime <= this.parent.activeView.getEndDate().getTime();\n    };\n    HeaderRenderer.prototype.getHeaderElement = function () {\n        return this.toolbarObj.element;\n    };\n    HeaderRenderer.prototype.updateHeaderItems = function (classType) {\n        var prevNavEle = this.toolbarObj.element.querySelector('.e-prev');\n        var nextNavEle = this.toolbarObj.element.querySelector('.e-next');\n        var dateRangeEle = this.toolbarObj.element.querySelector('.e-date-range');\n        if (prevNavEle) {\n            if (classType === 'add') {\n                addClass([prevNavEle], cls.HIDDEN_CLASS);\n            }\n            else {\n                removeClass([prevNavEle], cls.HIDDEN_CLASS);\n            }\n        }\n        if (nextNavEle) {\n            if (classType === 'add') {\n                addClass([nextNavEle], cls.HIDDEN_CLASS);\n            }\n            else {\n                removeClass([nextNavEle], cls.HIDDEN_CLASS);\n            }\n        }\n        if (dateRangeEle) {\n            if (classType === 'add') {\n                addClass([dateRangeEle], cls.TEXT_ELLIPSIS);\n            }\n            else {\n                removeClass([dateRangeEle], cls.TEXT_ELLIPSIS);\n            }\n        }\n    };\n    HeaderRenderer.prototype.previousNextIconHandler = function () {\n        var dates = (this.parent.currentView === 'Agenda' ?\n            [this.parent.getCurrentViewDates()[0]] : this.parent.getCurrentViewDates());\n        var prevNavEle = this.toolbarObj.element.querySelector('.' + cls.PREVIOUS_DATE_CLASS);\n        var nextNavEle = this.toolbarObj.element.querySelector('.' + cls.NEXT_DATE_CLASS);\n        var firstDate = new Date(dates[0].getTime());\n        var lastDate = new Date(dates[dates.length - 1].getTime());\n        if (this.parent.currentView === 'WorkWeek' || this.parent.currentView === 'TimelineWorkWeek') {\n            firstDate = util.getWeekFirstDate(util.resetTime(this.parent.selectedDate), this.parent.firstDayOfWeek);\n            lastDate = util.addDays(firstDate, 7 * this.parent.activeViewOptions.interval);\n        }\n        if (this.parent.currentView === 'Month') {\n            var isCustomMonth = !isNullOrUndefined(this.parent.activeViewOptions.displayDate) ||\n                this.parent.activeViewOptions.numberOfWeeks > 0;\n            firstDate = isCustomMonth ? this.parent.activeView.getStartDate() : util.firstDateOfMonth(this.parent.selectedDate);\n            lastDate = isCustomMonth ? this.parent.activeView.getEndDate() :\n                util.lastDateOfMonth(util.addMonths(firstDate, this.parent.activeViewOptions.interval - 1));\n        }\n        if (!isNullOrUndefined(prevNavEle)) {\n            this.toolbarObj.enableItems(prevNavEle, firstDate > this.parent.minDate);\n        }\n        if (!isNullOrUndefined(nextNavEle)) {\n            this.toolbarObj.enableItems(nextNavEle, lastDate < this.parent.maxDate);\n        }\n        this.setCalendarMinMaxDate();\n    };\n    HeaderRenderer.prototype.getModuleName = function () {\n        return 'headerbar';\n    };\n    HeaderRenderer.prototype.destroy = function () {\n        if (this.headerPopup && !this.headerPopup.isDestroyed) {\n            this.headerPopup.destroy();\n            this.headerPopup = null;\n        }\n        if (this.headerCalendar && !this.headerCalendar.isDestroyed) {\n            this.headerCalendar.destroy();\n            this.headerCalendar = null;\n        }\n        if (this.toolbarObj && !this.toolbarObj.isDestroyed) {\n            this.toolbarObj.destroy();\n            this.removeEventListener();\n            remove(this.element);\n            this.toolbarObj = null;\n        }\n        this.element = null;\n        this.parent = null;\n        this.l10n = null;\n    };\n    return HeaderRenderer;\n}());\nexport { HeaderRenderer };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}