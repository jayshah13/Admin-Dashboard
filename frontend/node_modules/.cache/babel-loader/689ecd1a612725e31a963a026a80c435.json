{"ast":null,"code":"import * as events from '../base/constant';\nimport { detach, isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * XhtmlValidation module called when set enableXhtml as true\n */\n\nvar XhtmlValidation =\n/** @class */\nfunction () {\n  function XhtmlValidation(parent) {\n    this.parent = parent;\n    this.addEventListener();\n  }\n\n  XhtmlValidation.prototype.addEventListener = function () {\n    this.parent.on(events.xhtmlValidation, this.enableXhtmlValidation, this);\n    this.parent.on(events.destroy, this.removeEventListener, this);\n  };\n\n  XhtmlValidation.prototype.removeEventListener = function () {\n    this.parent.off(events.xhtmlValidation, this.enableXhtmlValidation);\n    this.parent.off(events.destroy, this.removeEventListener);\n  };\n\n  XhtmlValidation.prototype.enableXhtmlValidation = function () {\n    if (this.parent.enableXhtml) {\n      if (isNullOrUndefined(this.parent.inputElement)) {\n        this.currentElement = this.parent.element;\n      } else {\n        this.currentElement = this.parent.inputElement;\n      }\n\n      this.clean(this.currentElement);\n      this.AddRootElement();\n      this.ImageTags();\n      this.removeTags();\n      this.RemoveUnsupported();\n      this.currentElement.innerHTML = this.selfEncloseValidation(this.currentElement.innerHTML, this.currentElement.innerText === \"\\n\" ? this.currentElement.innerText.length : this.currentElement.innerText.trim().length);\n      this.parent.setProperties({\n        value: this.currentElement.innerHTML\n      }, true);\n    }\n  };\n  /**\n   * @param {string} currentValue - specifies the string value.\n   * @param {number} valueLength - specifies the length of the current value.\n   * @returns {void}\n    */\n\n\n  XhtmlValidation.prototype.selfEncloseValidation = function (currentValue, valueLength) {\n    if (valueLength === 0 && currentValue.indexOf('table') < 0 && currentValue.indexOf('img') < 0) {\n      var arrayValue = currentValue.split('&nbsp;');\n      arrayValue[arrayValue.length - 1] = '&#8203;' + arrayValue[arrayValue.length - 1];\n      currentValue = arrayValue.join('');\n    }\n\n    currentValue = currentValue.replace(/<br>/g, '<br/>').replace(/<hr>/g, '<hr/>').replace(/ /g, ' ');\n    var valueTemp;\n    var valueDupe = [];\n    var valueOriginal = [];\n    var imgRegexp = [/<img(.*?)>/gi, /<area(.*?)>/gi, /<base(.*?)>/gi, /<col (.*?)>/gi, /<embed(.*?)>/gi, /<input(.*?)>/gi, /<link(.*?)>/gi, /<meta(.*?)>/gi, /<param(.*?)>/gi, /<source(.*?)>/gi, /<track(.*?)>/gi, /<wbr(.*?)>/gi];\n\n    for (var j = 0; j < imgRegexp.length; j++) {\n      valueTemp = imgRegexp[j].exec(currentValue);\n\n      while (valueTemp !== null) {\n        valueDupe.push(valueTemp[0].toString());\n        valueTemp = imgRegexp[j].exec(currentValue);\n      }\n\n      valueOriginal = valueDupe.slice(0);\n\n      for (var i = 0; i < valueDupe.length; i++) {\n        if (valueDupe[i].indexOf('/') === -1 || valueDupe[i].lastIndexOf('/') !== valueDupe[i].length - 2) {\n          valueDupe[i] = valueDupe[i].substr(0, valueDupe[i].length - 1) + ' /' + valueDupe[i].substr(valueDupe[i].length - 1, valueDupe[i].length);\n        }\n      }\n\n      for (var g = 0; g <= valueDupe.length - 1; g++) {\n        currentValue = currentValue.replace(valueOriginal[g], valueDupe[g]);\n      }\n    }\n\n    return currentValue;\n  };\n\n  XhtmlValidation.prototype.AddRootElement = function () {\n    if (this.currentElement.childNodes.length === 1 && this.currentElement.firstChild.nodeName !== 'DIV' || this.currentElement.childNodes.length > 1) {\n      var parentEle = this.parent.createElement('div');\n\n      while (this.currentElement.childNodes.length > 0) {\n        parentEle.appendChild(this.currentElement.childNodes[0]);\n      }\n\n      this.currentElement.appendChild(parentEle);\n    }\n  };\n\n  XhtmlValidation.prototype.clean = function (node) {\n    for (var n = 0; n < node.childNodes.length; n++) {\n      var child = node.childNodes[n];\n\n      if (child.nodeType === 8 || child.nodeName === 'V:IMAGE') {\n        node.removeChild(child);\n        n--;\n      } else if (child.nodeType === 1) {\n        this.clean(child);\n      }\n    }\n\n    return this.currentElement.innerHTML;\n  };\n\n  XhtmlValidation.prototype.ImageTags = function () {\n    var imgNodes = this.currentElement.querySelectorAll('IMG');\n\n    for (var i = imgNodes.length - 1; i >= 0; i--) {\n      if (!imgNodes[i].hasAttribute('alt')) {\n        var img = imgNodes[i];\n        img.setAttribute('alt', '');\n      }\n    }\n  };\n\n  XhtmlValidation.prototype.removeTags = function () {\n    var removeAttribute = [['br', 'ul'], ['br', 'ol'], ['table', 'span'], ['div', 'span'], ['p', 'span']];\n\n    for (var i = 0; i < removeAttribute.length; i++) {\n      this.RemoveElementNode(removeAttribute[i][0], removeAttribute[i][1]);\n    }\n  };\n\n  XhtmlValidation.prototype.RemoveElementNode = function (rmvNode, parentNode) {\n    var parentArray = this.currentElement.querySelectorAll(parentNode);\n\n    for (var i = 0; i < parentArray.length; i++) {\n      var rmvArray = parentArray[i].querySelectorAll(rmvNode);\n\n      for (var j = rmvArray.length; j > 0; j--) {\n        detach(rmvArray[j - 1]);\n      }\n    }\n  };\n\n  XhtmlValidation.prototype.RemoveUnsupported = function () {\n    var underlineEle = this.currentElement.querySelectorAll('u');\n\n    for (var i = underlineEle.length - 1; i >= 0; i--) {\n      var spanEle = this.parent.createElement('span');\n      spanEle.style.textDecoration = 'underline';\n      spanEle.innerHTML = underlineEle[i].innerHTML;\n      underlineEle[i].parentNode.insertBefore(spanEle, underlineEle[i]);\n      detach(underlineEle[i]);\n    }\n\n    var strongEle = this.currentElement.querySelectorAll('strong');\n\n    for (var i = strongEle.length - 1; i >= 0; i--) {\n      var boldEle = this.parent.createElement('b');\n      boldEle.innerHTML = strongEle[i].innerHTML;\n      strongEle[i].parentNode.insertBefore(boldEle, strongEle[i]);\n      detach(strongEle[i]);\n    }\n\n    var attrArray = ['language', 'role', 'target', 'contenteditable', 'cellspacing', 'cellpadding', 'border', 'valign', 'colspan'];\n\n    for (var i = 0; i <= attrArray.length; i++) {\n      this.RemoveAttributeByName(attrArray[i]);\n    }\n  };\n\n  XhtmlValidation.prototype.RemoveAttributeByName = function (attrName) {\n    if (this.currentElement.firstChild !== null) {\n      if (this.currentElement.firstChild.nodeType !== 3) {\n        for (var i = 0; i < this.currentElement.childNodes.length; i++) {\n          var ele = this.currentElement.childNodes[i];\n\n          if (ele.nodeType !== 3 && ele.nodeName !== 'TABLE' && ele.nodeName !== 'TBODY' && ele.nodeName !== 'THEAD' && ele.nodeName !== 'TH' && ele.nodeName !== 'TR' && ele.nodeName !== 'TD') {\n            if (ele.hasAttribute(attrName)) {\n              ele.removeAttribute(attrName);\n            }\n\n            if (ele.hasChildNodes()) {\n              for (var j = 0; j < ele.childNodes.length; j++) {\n                var childEle = ele.childNodes[j];\n\n                if (childEle.nodeType !== 3 && childEle.nodeName !== 'TABLE' && childEle.nodeName !== 'TBODY' && childEle.nodeName !== 'THEAD' && childEle.nodeName !== 'TH' && childEle.nodeName !== 'TR' && childEle.nodeName !== 'TD' && childEle.hasAttribute(attrName)) {\n                  childEle.removeAttribute(attrName);\n                }\n\n                if (childEle.hasChildNodes()) {\n                  for (var k = 0; k < childEle.childNodes.length; k++) {\n                    if (childEle.childNodes[k].nodeType !== 3 && childEle.childNodes[k].nodeName !== 'TABLE' && childEle.childNodes[k].nodeName !== 'TBODY' && childEle.childNodes[k].nodeName !== 'THEAD' && childEle.childNodes[k].nodeName !== 'TH' && childEle.childNodes[k].nodeName !== 'TR' && childEle.childNodes[k].nodeName !== 'TD' && childEle.childNodes[k].hasAttribute(attrName)) {\n                      childEle.childNodes[k].removeAttribute(attrName);\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  };\n\n  return XhtmlValidation;\n}();\n\nexport { XhtmlValidation };","map":{"version":3,"names":["events","detach","isNullOrUndefined","XhtmlValidation","parent","addEventListener","prototype","on","xhtmlValidation","enableXhtmlValidation","destroy","removeEventListener","off","enableXhtml","inputElement","currentElement","element","clean","AddRootElement","ImageTags","removeTags","RemoveUnsupported","innerHTML","selfEncloseValidation","innerText","length","trim","setProperties","value","currentValue","valueLength","indexOf","arrayValue","split","join","replace","valueTemp","valueDupe","valueOriginal","imgRegexp","j","exec","push","toString","slice","i","lastIndexOf","substr","g","childNodes","firstChild","nodeName","parentEle","createElement","appendChild","node","n","child","nodeType","removeChild","imgNodes","querySelectorAll","hasAttribute","img","setAttribute","removeAttribute","RemoveElementNode","rmvNode","parentNode","parentArray","rmvArray","underlineEle","spanEle","style","textDecoration","insertBefore","strongEle","boldEle","attrArray","RemoveAttributeByName","attrName","ele","hasChildNodes","childEle","k"],"sources":["C:/Users/shahj/OneDrive/Documents/GitHub/Multifunctional-React-Dashboard/node_modules/@syncfusion/ej2-richtexteditor/src/rich-text-editor/actions/xhtml-validation.js"],"sourcesContent":["import * as events from '../base/constant';\nimport { detach, isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * XhtmlValidation module called when set enableXhtml as true\n */\nvar XhtmlValidation = /** @class */ (function () {\n    function XhtmlValidation(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    XhtmlValidation.prototype.addEventListener = function () {\n        this.parent.on(events.xhtmlValidation, this.enableXhtmlValidation, this);\n        this.parent.on(events.destroy, this.removeEventListener, this);\n    };\n    XhtmlValidation.prototype.removeEventListener = function () {\n        this.parent.off(events.xhtmlValidation, this.enableXhtmlValidation);\n        this.parent.off(events.destroy, this.removeEventListener);\n    };\n    XhtmlValidation.prototype.enableXhtmlValidation = function () {\n        if (this.parent.enableXhtml) {\n            if (isNullOrUndefined(this.parent.inputElement)) {\n                this.currentElement = this.parent.element;\n            }\n            else {\n                this.currentElement = this.parent.inputElement;\n            }\n            this.clean(this.currentElement);\n            this.AddRootElement();\n            this.ImageTags();\n            this.removeTags();\n            this.RemoveUnsupported();\n            this.currentElement.innerHTML = this.selfEncloseValidation(this.currentElement.innerHTML, this.currentElement.innerText === \"\\n\" ?\n                this.currentElement.innerText.length : this.currentElement.innerText.trim().length);\n            this.parent.setProperties({ value: this.currentElement.innerHTML }, true);\n        }\n    };\n    /**\n     * @param {string} currentValue - specifies the string value.\n     * @param {number} valueLength - specifies the length of the current value.\n     * @returns {void}\n\n     */\n    XhtmlValidation.prototype.selfEncloseValidation = function (currentValue, valueLength) {\n        if (valueLength === 0 && currentValue.indexOf('table') < 0 && currentValue.indexOf('img') < 0) {\n            var arrayValue = currentValue.split('&nbsp;');\n            arrayValue[arrayValue.length - 1] = '&#8203;' + arrayValue[arrayValue.length - 1];\n            currentValue = arrayValue.join('');\n        }\n        currentValue = currentValue.replace(/<br>/g, '<br/>').replace(/<hr>/g, '<hr/>').replace(/ /g, ' ');\n        var valueTemp;\n        var valueDupe = [];\n        var valueOriginal = [];\n        var imgRegexp = [/<img(.*?)>/gi, /<area(.*?)>/gi, /<base(.*?)>/gi, /<col (.*?)>/gi, /<embed(.*?)>/gi,\n            /<input(.*?)>/gi, /<link(.*?)>/gi, /<meta(.*?)>/gi, /<param(.*?)>/gi, /<source(.*?)>/gi,\n            /<track(.*?)>/gi, /<wbr(.*?)>/gi];\n        for (var j = 0; j < imgRegexp.length; j++) {\n            valueTemp = imgRegexp[j].exec(currentValue);\n            while ((valueTemp) !== null) {\n                valueDupe.push(valueTemp[0].toString());\n                valueTemp = imgRegexp[j].exec(currentValue);\n            }\n            valueOriginal = valueDupe.slice(0);\n            for (var i = 0; i < valueDupe.length; i++) {\n                if (valueDupe[i].indexOf('/') === -1 || valueDupe[i].lastIndexOf('/') !== valueDupe[i].length - 2) {\n                    valueDupe[i] = valueDupe[i].substr(0, valueDupe[i].length - 1) + ' /' +\n                        valueDupe[i].substr(valueDupe[i].length - 1, valueDupe[i].length);\n                }\n            }\n            for (var g = 0; g <= valueDupe.length - 1; g++) {\n                currentValue = currentValue.replace(valueOriginal[g], valueDupe[g]);\n            }\n        }\n        return currentValue;\n    };\n    XhtmlValidation.prototype.AddRootElement = function () {\n        if ((this.currentElement.childNodes.length === 1 && this.currentElement.firstChild.nodeName !== 'DIV') ||\n            this.currentElement.childNodes.length > 1) {\n            var parentEle = this.parent.createElement('div');\n            while (this.currentElement.childNodes.length > 0) {\n                parentEle.appendChild(this.currentElement.childNodes[0]);\n            }\n            this.currentElement.appendChild(parentEle);\n        }\n    };\n    XhtmlValidation.prototype.clean = function (node) {\n        for (var n = 0; n < node.childNodes.length; n++) {\n            var child = node.childNodes[n];\n            if (child.nodeType === 8 || child.nodeName === 'V:IMAGE') {\n                node.removeChild(child);\n                n--;\n            }\n            else if (child.nodeType === 1) {\n                this.clean(child);\n            }\n        }\n        return this.currentElement.innerHTML;\n    };\n    XhtmlValidation.prototype.ImageTags = function () {\n        var imgNodes = this.currentElement.querySelectorAll('IMG');\n        for (var i = imgNodes.length - 1; i >= 0; i--) {\n            if (!imgNodes[i].hasAttribute('alt')) {\n                var img = imgNodes[i];\n                img.setAttribute('alt', '');\n            }\n        }\n    };\n    XhtmlValidation.prototype.removeTags = function () {\n        var removeAttribute = [['br', 'ul'], ['br', 'ol'], ['table', 'span'], ['div', 'span'], ['p', 'span']];\n        for (var i = 0; i < removeAttribute.length; i++) {\n            this.RemoveElementNode(removeAttribute[i][0], removeAttribute[i][1]);\n        }\n    };\n    XhtmlValidation.prototype.RemoveElementNode = function (rmvNode, parentNode) {\n        var parentArray = this.currentElement.querySelectorAll(parentNode);\n        for (var i = 0; i < parentArray.length; i++) {\n            var rmvArray = parentArray[i].querySelectorAll(rmvNode);\n            for (var j = rmvArray.length; j > 0; j--) {\n                detach(rmvArray[j - 1]);\n            }\n        }\n    };\n    XhtmlValidation.prototype.RemoveUnsupported = function () {\n        var underlineEle = this.currentElement.querySelectorAll('u');\n        for (var i = underlineEle.length - 1; i >= 0; i--) {\n            var spanEle = this.parent.createElement('span');\n            spanEle.style.textDecoration = 'underline';\n            spanEle.innerHTML = underlineEle[i].innerHTML;\n            underlineEle[i].parentNode.insertBefore(spanEle, underlineEle[i]);\n            detach(underlineEle[i]);\n        }\n        var strongEle = this.currentElement.querySelectorAll('strong');\n        for (var i = strongEle.length - 1; i >= 0; i--) {\n            var boldEle = this.parent.createElement('b');\n            boldEle.innerHTML = strongEle[i].innerHTML;\n            strongEle[i].parentNode.insertBefore(boldEle, strongEle[i]);\n            detach(strongEle[i]);\n        }\n        var attrArray = ['language', 'role', 'target', 'contenteditable', 'cellspacing',\n            'cellpadding', 'border', 'valign', 'colspan'];\n        for (var i = 0; i <= attrArray.length; i++) {\n            this.RemoveAttributeByName(attrArray[i]);\n        }\n    };\n    XhtmlValidation.prototype.RemoveAttributeByName = function (attrName) {\n        if (this.currentElement.firstChild !== null) {\n            if (this.currentElement.firstChild.nodeType !== 3) {\n                for (var i = 0; i < this.currentElement.childNodes.length; i++) {\n                    var ele = this.currentElement.childNodes[i];\n                    if (ele.nodeType !== 3 && ele.nodeName !== 'TABLE' && ele.nodeName !== 'TBODY' && ele.nodeName !== 'THEAD' &&\n                        ele.nodeName !== 'TH' && ele.nodeName !== 'TR' && ele.nodeName !== 'TD') {\n                        if (ele.hasAttribute(attrName)) {\n                            ele.removeAttribute(attrName);\n                        }\n                        if (ele.hasChildNodes()) {\n                            for (var j = 0; j < ele.childNodes.length; j++) {\n                                var childEle = ele.childNodes[j];\n                                if (childEle.nodeType !== 3 && childEle.nodeName !== 'TABLE' && childEle.nodeName !== 'TBODY' &&\n                                    childEle.nodeName !== 'THEAD' && childEle.nodeName !== 'TH' && childEle.nodeName !== 'TR' &&\n                                    childEle.nodeName !== 'TD' && childEle.hasAttribute(attrName)) {\n                                    childEle.removeAttribute(attrName);\n                                }\n                                if (childEle.hasChildNodes()) {\n                                    for (var k = 0; k < childEle.childNodes.length; k++) {\n                                        if (childEle.childNodes[k].nodeType !== 3 && childEle.childNodes[k].nodeName !== 'TABLE' &&\n                                            childEle.childNodes[k].nodeName !== 'TBODY' && childEle.childNodes[k].nodeName !== 'THEAD' &&\n                                            childEle.childNodes[k].nodeName !== 'TH' && childEle.childNodes[k].nodeName !== 'TR'\n                                            && childEle.childNodes[k].nodeName !== 'TD'\n                                            && childEle.childNodes[k].hasAttribute(attrName)) {\n                                            childEle.childNodes[k].removeAttribute(attrName);\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    return XhtmlValidation;\n}());\nexport { XhtmlValidation };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}