{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n\nimport { append, createElement, formatUnit, EventHandler, addClass, remove, extend, Browser, isNullOrUndefined, removeClass, closest, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { MobileLayout } from './mobile-layout';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Kanban layout rendering module\n *\n */\n\nvar LayoutRender =\n/** @class */\nfunction (_super) {\n  __extends(LayoutRender, _super);\n\n  function LayoutRender(parent) {\n    var _this = _super.call(this, parent) || this;\n\n    _this.kanbanRows = [];\n    _this.parent = parent;\n    _this.columnKeys = [];\n    _this.swimlaneIndex = 0;\n    _this.swimlaneData = {};\n    _this.scrollLeft = 0;\n    _this.frozenOrder = 0;\n\n    _this.parent.on(events.dataReady, _this.initRender, _this);\n\n    _this.parent.on(events.contentReady, _this.scrollUiUpdate, _this);\n\n    return _this;\n  }\n\n  LayoutRender.prototype.initRender = function () {\n    if (this.parent.columns.length === 0) {\n      return;\n    }\n\n    this.columnData = this.getColumnCards();\n    this.kanbanRows = this.getRows();\n    this.swimlaneData = this.getSwimlaneCards();\n\n    if (this.parent.isAdaptive) {\n      var parent_1 = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n\n      if (parent_1) {\n        this.scrollLeft = parent_1.scrollLeft;\n      }\n    }\n\n    this.destroy();\n    this.parent.on(events.dataReady, this.initRender, this);\n    this.parent.on(events.contentReady, this.scrollUiUpdate, this);\n\n    if (this.parent.isAdaptive && this.parent.swimlaneSettings.keyField && this.parent.kanbanData.length !== 0) {\n      this.renderSwimlaneHeader();\n    }\n\n    var header = createElement('div', {\n      className: cls.HEADER_CLASS\n    });\n    this.parent.element.appendChild(header);\n    this.renderHeader(header);\n    this.renderContent();\n    this.renderCards();\n    this.renderValidation();\n    this.parent.renderTemplates();\n    this.parent.notify(events.contentReady, {});\n    this.wireEvents();\n\n    if (this.parent.isInitialRender) {\n      this.parent.isInitialRender = false;\n    }\n  };\n\n  LayoutRender.prototype.renderHeader = function (header) {\n    var headerWrap = createElement('div', {\n      className: this.parent.swimlaneSettings.keyField ? cls.SWIMLANE_CLASS : ''\n    });\n    header.appendChild(headerWrap);\n    var headerTable = createElement('table', {\n      className: cls.TABLE_CLASS + ' ' + cls.HEADER_TABLE_CLASS,\n      attrs: {\n        'role': 'presentation'\n      }\n    });\n    headerWrap.appendChild(headerTable);\n    this.renderColGroup(headerTable);\n    var tableHead = createElement('thead');\n    headerTable.appendChild(tableHead);\n\n    if (this.parent.stackedHeaders.length > 0) {\n      tableHead.appendChild(this.createStackedRow(this.parent.stackedHeaders));\n    }\n\n    var tr = createElement('tr', {\n      className: cls.HEADER_ROW_CLASS\n    });\n    tableHead.appendChild(tr);\n\n    var _loop_1 = function (column) {\n      if (this_1.isColumnVisible(column)) {\n        var index = this_1.parent.actionModule.columnToggleArray.indexOf(column.keyField.toString());\n        var th_1 = createElement('th', {\n          className: index === -1 ? cls.HEADER_CELLS_CLASS : cls.HEADER_CELLS_CLASS + ' ' + cls.COLLAPSED_CLASS,\n          attrs: {\n            'data-role': 'kanban-column',\n            'data-key': column.keyField.toString()\n          }\n        });\n        var classList = [];\n\n        if (column.allowToggle) {\n          classList.push(cls.HEADER_ROW_TOGGLE_CLASS);\n\n          if (!column.isExpanded) {\n            classList.push(cls.COLLAPSED_CLASS);\n          }\n        }\n\n        addClass([th_1], classList);\n        var headerWrapper = createElement('div', {\n          className: cls.HEADER_WRAP_CLASS\n        });\n        th_1.appendChild(headerWrapper);\n        var noOfCard = this_1.columnData[column.keyField].length;\n        var headerTitle = createElement('div', {\n          className: cls.HEADER_TITLE_CLASS\n        });\n        headerWrapper.appendChild(headerTitle);\n\n        if (column.template) {\n          var templateArgs = {\n            keyField: column.keyField,\n            headerText: column.headerText,\n            minCount: column.minCount,\n            maxCount: column.maxCount,\n            allowToggle: column.allowToggle,\n            isExpanded: column.isExpanded,\n            showItemCount: column.showItemCount,\n            count: noOfCard\n          };\n          addClass([th_1], cls.TEMPLATE_CLASS);\n          var templateId = this_1.parent.element.id + '_columnTemplate';\n          var templateHeader = this_1.parent.templateParser(column.template)(templateArgs, this_1.parent, 'columnTemplate', templateId, false);\n          append(templateHeader, headerTitle);\n        } else {\n          var header_1 = createElement('div', {\n            className: cls.HEADER_TEXT_CLASS,\n            innerHTML: column.headerText\n          });\n          headerTitle.appendChild(header_1);\n\n          if (column.showItemCount) {\n            var itemCount = createElement('div', {\n              className: cls.CARD_ITEM_COUNT_CLASS,\n              innerHTML: '- ' + noOfCard.toString() + ' ' + this_1.parent.localeObj.getConstant('items')\n            });\n            headerTitle.appendChild(itemCount);\n          }\n        }\n\n        if (column.allowToggle) {\n          var isExpand = column.isExpanded && index === -1 ? true : false;\n          var name_1 = isExpand ? cls.COLUMN_EXPAND_CLASS : cls.COLUMN_COLLAPSE_CLASS;\n          var icon = createElement('div', {\n            className: cls.HEADER_ICON_CLASS + ' ' + cls.ICON_CLASS + ' ' + name_1,\n            attrs: {\n              'tabindex': '0'\n            }\n          });\n          icon.setAttribute('aria-label', isExpand ? column.keyField + ' Expand' : column.keyField + ' Collapse');\n          th_1.setAttribute('aria-expanded', isExpand.toString());\n          headerWrapper.appendChild(icon);\n        }\n\n        var dataObj = [{\n          keyField: column.keyField,\n          textField: column.headerText,\n          count: noOfCard\n        }];\n        var args = {\n          data: dataObj,\n          element: tr,\n          cancel: false,\n          requestType: 'headerRow'\n        };\n        this_1.parent.trigger(events.queryCellInfo, args, function (columnArgs) {\n          if (!columnArgs.cancel) {\n            tr.appendChild(th_1);\n          }\n        });\n      }\n    };\n\n    var this_1 = this;\n\n    for (var _i = 0, _a = this.parent.columns; _i < _a.length; _i++) {\n      var column = _a[_i];\n\n      _loop_1(column);\n    }\n  };\n\n  LayoutRender.prototype.renderContent = function () {\n    var content = createElement('div', {\n      className: cls.CONTENT_CLASS\n    });\n    this.parent.element.appendChild(content);\n    var contentWrap = createElement('div', {\n      className: this.parent.swimlaneSettings.keyField ? cls.SWIMLANE_CLASS : ''\n    });\n    content.appendChild(contentWrap);\n    var contentTable = createElement('table', {\n      className: cls.TABLE_CLASS + ' ' + cls.CONTENT_TABLE_CLASS,\n      attrs: {\n        'role': 'presentation'\n      }\n    });\n    contentWrap.appendChild(contentTable);\n    this.renderColGroup(contentTable);\n    var tBody = createElement('tbody');\n    contentTable.appendChild(tBody);\n    var className;\n    var isCollaspsed = false;\n    this.swimlaneRow = this.kanbanRows;\n    this.initializeSwimlaneTree();\n\n    for (var _i = 0, _a = this.swimlaneRow; _i < _a.length; _i++) {\n      var row = _a[_i];\n\n      if (this.parent.swimlaneSettings.keyField && this.parent.swimlaneToggleArray.length !== 0) {\n        var index = this.parent.swimlaneToggleArray.indexOf(row.keyField);\n        isCollaspsed = index !== -1;\n      }\n\n      if (this.parent.swimlaneSettings.keyField && !this.parent.isAdaptive) {\n        this.renderSwimlaneRow(tBody, row, isCollaspsed);\n      }\n\n      this.renderSingleContent(tBody, row, isCollaspsed);\n    }\n  };\n\n  LayoutRender.prototype.renderSingleContent = function (tBody, row, isCollaspsed) {\n    var className = isCollaspsed ? cls.CONTENT_ROW_CLASS + ' ' + cls.COLLAPSED_CLASS : cls.CONTENT_ROW_CLASS;\n    var tr = createElement('tr', {\n      className: className,\n      attrs: {\n        'aria-expanded': 'true'\n      }\n    });\n\n    for (var _i = 0, _a = this.parent.columns; _i < _a.length; _i++) {\n      var column = _a[_i];\n\n      if (this.isColumnVisible(column)) {\n        var index = this.parent.actionModule.columnToggleArray.indexOf(column.keyField.toString());\n        var className_1 = index === -1 ? cls.CONTENT_CELLS_CLASS : cls.CONTENT_CELLS_CLASS + ' ' + cls.COLLAPSED_CLASS;\n        var dragClass = (column.allowDrag ? ' ' + cls.DRAG_CLASS : '') + (column.allowDrop ? ' ' + cls.DROP_CLASS + ' ' + cls.DROPPABLE_CLASS : '');\n        var td = createElement('td', {\n          className: className_1 + dragClass,\n          attrs: {\n            'data-role': 'kanban-column',\n            'data-key': column.keyField.toString(),\n            'aria-expanded': 'true',\n            'tabindex': '0',\n            'role': 'navigation'\n          }\n        });\n\n        if (column.allowToggle && !column.isExpanded || index !== -1) {\n          addClass([td], cls.COLLAPSED_CLASS);\n          var text = (column.showItemCount ? '[' + this.getColumnData(column.keyField, this.swimlaneData[row.keyField]).length + '] ' : '') + column.headerText;\n          td.appendChild(createElement('div', {\n            className: cls.COLLAPSE_HEADER_TEXT_CLASS,\n            innerHTML: text\n          }));\n          td.setAttribute('aria-expanded', 'false');\n        }\n\n        if (column.showAddButton) {\n          var button = createElement('div', {\n            className: cls.SHOW_ADD_BUTTON,\n            attrs: {\n              'tabindex': '-1'\n            }\n          });\n          button.appendChild(createElement('div', {\n            className: cls.SHOW_ADD_ICON + ' ' + cls.ICON_CLASS\n          }));\n          td.appendChild(button);\n        }\n\n        tr.appendChild(td);\n      }\n    }\n\n    var dataObj = [{\n      keyField: row.keyField,\n      textField: row.textField,\n      count: row.count\n    }];\n    var args = {\n      data: dataObj,\n      element: tr,\n      cancel: false,\n      requestType: 'contentRow'\n    };\n    this.parent.trigger(events.queryCellInfo, args, function (columnArgs) {\n      if (!columnArgs.cancel) {\n        if (tBody.classList.contains('e-swimlane-row')) {\n          tBody.insertAdjacentElement('beforebegin', tr);\n        } else {\n          tBody.appendChild(tr);\n        }\n      }\n    });\n  };\n\n  LayoutRender.prototype.initializeSwimlaneTree = function () {\n    if (this.parent.swimlaneSettings.keyField && this.parent.isAdaptive && this.parent.kanbanData.length !== 0) {\n      this.swimlaneRow = [this.kanbanRows[this.swimlaneIndex]];\n      this.renderSwimlaneTree();\n      this.parent.element.querySelector('.' + cls.TOOLBAR_SWIMLANE_NAME_CLASS).innerHTML = this.swimlaneRow[0].textField;\n    }\n  };\n\n  LayoutRender.prototype.renderSwimlaneRow = function (tBody, row, isCollapsed) {\n    var name = cls.CONTENT_ROW_CLASS + ' ' + cls.SWIMLANE_ROW_CLASS;\n    var className = isCollapsed ? ' ' + cls.COLLAPSED_CLASS : '';\n    var tr = createElement('tr', {\n      className: name + className,\n      attrs: {\n        'data-key': row.keyField,\n        'aria-expanded': (!isCollapsed).toString()\n      }\n    });\n    var col = this.parent.columns.length - this.parent.actionModule.hideColumnKeys.length;\n    var td = createElement('td', {\n      className: cls.CONTENT_CELLS_CLASS,\n      attrs: {\n        'data-role': 'kanban-column',\n        'colspan': col.toString()\n      }\n    });\n    var swimlaneHeader = createElement('div', {\n      className: cls.SWIMLANE_HEADER_CLASS\n    });\n    td.appendChild(swimlaneHeader);\n    var iconClass = isCollapsed ? cls.SWIMLANE_ROW_COLLAPSE_CLASS : cls.SWIMLANE_ROW_EXPAND_CLASS;\n    var iconDiv = createElement('div', {\n      className: cls.ICON_CLASS + ' ' + iconClass,\n      attrs: {\n        'tabindex': '0',\n        'aria-label': isCollapsed ? row.keyField + ' Collapse' : row.keyField + ' Expand'\n      }\n    });\n    swimlaneHeader.appendChild(iconDiv);\n    var headerWrap = createElement('div', {\n      className: cls.HEADER_WRAP_CLASS\n    });\n    swimlaneHeader.appendChild(headerWrap);\n    var cardCount = this.swimlaneData[row.keyField].length;\n\n    if (this.parent.swimlaneSettings.template) {\n      var templateArgs = extend({}, row, {\n        count: cardCount\n      }, true);\n      addClass([td], cls.TEMPLATE_CLASS);\n      var templateId = this.parent.element.id + '_swimlaneTemplate';\n      var swimlaneTemplate = this.parent.templateParser(this.parent.swimlaneSettings.template)(templateArgs, this.parent, 'swimlaneTemplate', templateId, false);\n      append(swimlaneTemplate, headerWrap);\n    } else {\n      headerWrap.appendChild(createElement('div', {\n        className: cls.SWIMLANE_ROW_TEXT_CLASS,\n        innerHTML: row.textField,\n        attrs: {\n          'data-role': row.textField\n        }\n      }));\n    }\n\n    if (this.parent.swimlaneSettings.showItemCount) {\n      swimlaneHeader.appendChild(createElement('div', {\n        className: cls.CARD_ITEM_COUNT_CLASS,\n        innerHTML: \"- \" + cardCount.toString() + \" \" + this.parent.localeObj.getConstant('items')\n      }));\n    }\n\n    tr.appendChild(td);\n    var dataObj = [{\n      keyField: row.keyField,\n      textField: row.textField,\n      count: row.count\n    }];\n    var args = {\n      data: dataObj,\n      element: tr,\n      cancel: false,\n      requestType: 'swimlaneRow'\n    };\n    this.parent.trigger(events.queryCellInfo, args, function (columnArgs) {\n      if (!columnArgs.cancel) {\n        if (tBody.classList.contains('e-swimlane-row')) {\n          tBody.insertAdjacentElement('beforebegin', tr);\n        } else {\n          tBody.appendChild(tr);\n        }\n      }\n    });\n  };\n\n  LayoutRender.prototype.renderCards = function () {\n    var _this = this;\n\n    var rows = this.swimlaneRow;\n    var cardRows = [].slice.call(this.parent.element.querySelectorAll('.e-content-row:not(.e-swimlane-row)'));\n    var swimlaneRows = [].slice.call(this.parent.element.querySelectorAll('.e-content-row.e-swimlane-row'));\n    var removeTrs = [];\n    cardRows.forEach(function (tr, index) {\n      var dataCount = 0;\n\n      var _loop_2 = function (column) {\n        if (_this.isColumnVisible(column)) {\n          var columnData = _this.parent.swimlaneSettings.keyField ? _this.getColumnData(column.keyField, _this.swimlaneData[rows[index].keyField]) : _this.columnData[column.keyField];\n          dataCount += columnData.length;\n          var columnWrapper = tr.querySelector('[data-key=\"' + column.keyField + '\"]');\n          var cardWrapper_1 = createElement('div', {\n            className: cls.CARD_WRAPPER_CLASS,\n            attrs: {\n              'role': 'listbox'\n            }\n          });\n          columnWrapper.appendChild(cardWrapper_1);\n\n          if (columnData.length > 0) {\n            var _loop_3 = function (data) {\n              var cardText = data[_this.parent.cardSettings.headerField];\n\n              var cardIndex = _this.parent.actionModule.selectionArray.indexOf(cardText);\n\n              var cardElement = _this.renderCard(data);\n\n              if (cardIndex !== -1) {\n                cardElement.setAttribute('aria-selected', 'true');\n                addClass([cardElement], cls.CARD_SELECTION_CLASS);\n              }\n\n              var args = {\n                data: data,\n                element: cardElement,\n                cancel: false\n              };\n\n              _this.parent.trigger(events.cardRendered, args, function (cardArgs) {\n                if (!cardArgs.cancel) {\n                  cardWrapper_1.appendChild(cardElement);\n                }\n              });\n            };\n\n            for (var _i = 0, _a = columnData; _i < _a.length; _i++) {\n              var data = _a[_i];\n\n              _loop_3(data);\n            }\n          } else {\n            cardWrapper_1.appendChild(_this.renderEmptyCard());\n          }\n        }\n      };\n\n      for (var _i = 0, _a = _this.parent.columns; _i < _a.length; _i++) {\n        var column = _a[_i];\n\n        _loop_2(column);\n      }\n\n      if (dataCount === 0) {\n        removeTrs.push(tr);\n\n        if (swimlaneRows.length > 0) {\n          removeTrs.push(swimlaneRows[index]);\n        }\n      }\n    });\n\n    if (!this.parent.swimlaneSettings.showEmptyRow && this.parent.kanbanData.length === 0 && !this.parent.showEmptyColumn) {\n      removeTrs.forEach(function (tr) {\n        return remove(tr);\n      });\n    }\n  };\n\n  LayoutRender.prototype.renderCard = function (data) {\n    var cardElement = createElement('div', {\n      className: cls.CARD_CLASS,\n      attrs: {\n        'data-id': data[this.parent.cardSettings.headerField],\n        'data-key': data[this.parent.keyField],\n        'aria-selected': 'false',\n        'tabindex': '-1',\n        'role': 'option'\n      }\n    });\n\n    if (this.parent.cardSettings.template) {\n      addClass([cardElement], cls.TEMPLATE_CLASS);\n      var templateId = this.parent.element.id + '_cardTemplate';\n      var cardTemplate = this.parent.templateParser(this.parent.cardSettings.template)(data, this.parent, 'cardTemplate', templateId, false);\n      append(cardTemplate, cardElement);\n    } else {\n      var tooltipClass = this.parent.enableTooltip ? ' ' + cls.TOOLTIP_TEXT_CLASS : '';\n\n      if (this.parent.cardSettings.showHeader) {\n        var cardHeader = createElement('div', {\n          className: cls.CARD_HEADER_CLASS\n        });\n        var cardCaption = createElement('div', {\n          className: cls.CARD_HEADER_TEXT_CLASS\n        });\n        var cardText = createElement('div', {\n          className: cls.CARD_HEADER_TITLE_CLASS + tooltipClass,\n          innerHTML: data[this.parent.cardSettings.headerField] || ''\n        });\n        cardHeader.appendChild(cardCaption);\n        cardCaption.appendChild(cardText);\n        cardElement.appendChild(cardHeader);\n      }\n\n      var cardContent = createElement('div', {\n        className: cls.CARD_CONTENT_CLASS + tooltipClass,\n        innerHTML: data[this.parent.cardSettings.contentField] || ''\n      });\n      cardElement.appendChild(cardContent);\n\n      if (this.parent.cardSettings.tagsField && data[this.parent.cardSettings.tagsField]) {\n        var cardTags = createElement('div', {\n          className: cls.CARD_TAGS_CLASS\n        });\n        var tags = data[this.parent.cardSettings.tagsField].toString().split(',');\n\n        for (var _i = 0, tags_1 = tags; _i < tags_1.length; _i++) {\n          var tag = tags_1[_i];\n          cardTags.appendChild(createElement('div', {\n            className: cls.CARD_TAG_CLASS + ' ' + cls.CARD_LABEL_CLASS,\n            innerHTML: tag\n          }));\n        }\n\n        cardElement.appendChild(cardTags);\n      }\n\n      if (this.parent.cardSettings.grabberField && data[this.parent.cardSettings.grabberField]) {\n        addClass([cardElement], cls.CARD_COLOR_CLASS);\n        cardElement.style.borderLeftColor = data[this.parent.cardSettings.grabberField];\n      }\n\n      if (this.parent.cardSettings.footerCssField) {\n        var cardFields = createElement('div', {\n          className: cls.CARD_FOOTER_CLASS\n        });\n        var keys = data[this.parent.cardSettings.footerCssField].split(',');\n\n        for (var _a = 0, keys_1 = keys; _a < keys_1.length; _a++) {\n          var key = keys_1[_a];\n          cardFields.appendChild(createElement('div', {\n            className: key.trim() + ' ' + cls.CARD_FOOTER_CSS_CLASS\n          }));\n        }\n\n        cardElement.appendChild(cardFields);\n      }\n    }\n\n    return cardElement;\n  };\n\n  LayoutRender.prototype.renderEmptyCard = function () {\n    var emptyCard = createElement('span', {\n      className: cls.EMPTY_CARD_CLASS,\n      innerHTML: this.parent.localeObj.getConstant('noCard')\n    });\n    return emptyCard;\n  };\n\n  LayoutRender.prototype.renderColGroup = function (table) {\n    var _this = this;\n\n    var colGroup = createElement('colgroup');\n    this.parent.columns.forEach(function (column) {\n      if (_this.isColumnVisible(column)) {\n        var index = _this.parent.actionModule.columnToggleArray.indexOf(column.keyField.toString());\n\n        var isToggle = column.allowToggle && !column.isExpanded;\n        var className = index === -1 ? isToggle ? cls.COLLAPSED_CLASS : '' : cls.COLLAPSED_CLASS;\n        var col = createElement('col', {\n          className: className,\n          attrs: {\n            'data-key': column.keyField.toString()\n          },\n          styles: _this.parent.isAdaptive ? 'width: ' + (isToggle ? formatUnit(events.toggleWidth) : formatUnit(_this.getWidth())) : ''\n        });\n        colGroup.appendChild(col);\n      }\n    });\n    table.appendChild(colGroup);\n  };\n\n  LayoutRender.prototype.getRows = function () {\n    var _this = this;\n\n    var kanbanRows = [];\n\n    if (this.parent.swimlaneSettings.keyField) {\n      this.parent.kanbanData.map(function (obj) {\n        if (!_this.parent.swimlaneSettings.showEmptyRow) {\n          if (isNullOrUndefined(obj[_this.parent.keyField]) || obj[_this.parent.keyField] === '' || obj[_this.parent.keyField] && _this.columnKeys.indexOf(obj[_this.parent.keyField].toString()) === -1) {\n            return;\n          }\n        }\n\n        var textField = obj[_this.parent.swimlaneSettings.textField] || obj[_this.parent.swimlaneSettings.keyField];\n        var keyField = obj[_this.parent.swimlaneSettings.keyField];\n\n        if (!obj[_this.parent.swimlaneSettings.keyField]) {\n          if (_this.parent.swimlaneSettings.showUnassignedRow) {\n            textField = _this.parent.localeObj.getConstant('unassigned');\n            keyField = '';\n          } else {\n            return;\n          }\n        }\n\n        kanbanRows.push({\n          keyField: keyField,\n          textField: textField\n        });\n      });\n      kanbanRows = kanbanRows.filter(function (item, index, arr) {\n        return index === arr.map(function (item) {\n          return item.keyField;\n        }).indexOf(item.keyField);\n      });\n      kanbanRows = this.swimlaneSorting(kanbanRows);\n      kanbanRows.forEach(function (row) {\n        row.count = _this.parent.kanbanData.filter(function (obj) {\n          return _this.columnKeys.indexOf(obj[_this.parent.keyField]) > -1 && obj[_this.parent.swimlaneSettings.keyField] === row.keyField;\n        }).length;\n      });\n\n      if (kanbanRows.length === 0) {\n        kanbanRows.push({\n          keyField: '',\n          textField: ''\n        });\n      }\n    } else {\n      kanbanRows.push({\n        keyField: '',\n        textField: ''\n      });\n    }\n\n    return kanbanRows;\n  };\n\n  LayoutRender.prototype.swimlaneSorting = function (rows) {\n    if (this.parent.swimlaneSettings.sortComparer) {\n      rows = this.parent.swimlaneSettings.sortComparer.call(this.parent, rows);\n    } else {\n      rows.sort(function (a, b) {\n        return a.textField.localeCompare(b.textField, undefined, {\n          numeric: true\n        });\n      });\n\n      if (this.parent.swimlaneSettings.sortDirection === 'Descending') {\n        rows.reverse();\n      }\n    }\n\n    return rows;\n  };\n\n  LayoutRender.prototype.createStackedRow = function (rows) {\n    var tr = createElement('tr', {\n      className: cls.HEADER_ROW_CLASS + ' ' + cls.STACKED_HEADER_ROW_CLASS\n    });\n    var stackedHeaders = [];\n    this.parent.columns.forEach(function (column) {\n      var headerText = '';\n\n      for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n        var row = rows_1[_i];\n\n        if (row.keyFields.indexOf(column.keyField.toString()) !== -1) {\n          headerText = row.text;\n        }\n      }\n\n      stackedHeaders.push(headerText);\n    });\n\n    for (var h = 0; h < stackedHeaders.length; h++) {\n      var colSpan = 1;\n\n      for (var j = h + 1; j < stackedHeaders.length; j++) {\n        if (stackedHeaders[h] !== '' && stackedHeaders[j] !== '' && stackedHeaders[h] === stackedHeaders[j]) {\n          colSpan++;\n        } else {\n          break;\n        }\n      }\n\n      var div = createElement('div', {\n        className: cls.HEADER_TEXT_CLASS,\n        innerHTML: stackedHeaders[h]\n      });\n      var th = createElement('th', {\n        className: cls.HEADER_CELLS_CLASS + ' ' + cls.STACKED_HEADER_CELL_CLASS,\n        attrs: {\n          'colspan': colSpan.toString()\n        }\n      });\n      tr.appendChild(th).appendChild(div);\n      h += colSpan - 1;\n    }\n\n    return tr;\n  };\n\n  LayoutRender.prototype.scrollUiUpdate = function () {\n    var _this = this;\n\n    var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n    var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n    var height = this.parent.element.offsetHeight - header.offsetHeight;\n\n    if (this.parent.isAdaptive) {\n      height = window.innerHeight - (header.offsetHeight + events.bottomSpace);\n      var swimlaneToolbar = this.parent.element.querySelector('.' + cls.SWIMLANE_HEADER_CLASS);\n\n      if (swimlaneToolbar) {\n        height -= swimlaneToolbar.offsetHeight;\n      }\n\n      var cardWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_CELLS_CLASS));\n      cardWrappers.forEach(function (cell) {\n        var cardWrapper = cell.querySelector('.' + cls.CARD_WRAPPER_CLASS);\n\n        if (!cardWrapper.classList.contains(cls.MULTI_CARD_WRAPPER_CLASS)) {\n          cardWrapper.style.height = formatUnit(height);\n          EventHandler.add(cell, 'touchmove', _this.onAdaptiveScroll, _this);\n        }\n      });\n    }\n\n    if (this.parent.height !== 'auto' && this.parent.height !== '100%') {\n      content.style.height = formatUnit(height);\n    }\n\n    [].slice.call(header.children).forEach(function (node) {\n      var paddingValue = 0;\n\n      if (content.offsetWidth - content.clientWidth > 0) {\n        paddingValue = 17;\n\n        if (content.offsetHeight - content.clientHeight > 0) {\n          node.style.width = formatUnit(content.clientWidth);\n        }\n      }\n\n      if (_this.parent.enableRtl) {\n        node.style.paddingLeft = formatUnit(paddingValue);\n      } else {\n        node.style.paddingRight = formatUnit(paddingValue);\n      }\n    });\n    this.updateScrollPosition();\n  };\n\n  LayoutRender.prototype.onContentScroll = function (e) {\n    var target = e.target;\n    var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n    [].slice.call(header.children).forEach(function (node) {\n      node.scrollLeft = target.scrollLeft;\n    });\n    this.parent.scrollPosition.content = {\n      left: target.scrollLeft,\n      top: target.scrollTop\n    };\n\n    if (!isNullOrUndefined(this.parent.swimlaneSettings.keyField) && this.parent.swimlaneSettings.enableFrozenRows) {\n      this.frozenRows(e);\n    }\n  };\n\n  LayoutRender.prototype.addFrozenSwimlaneDataKey = function (currentElem) {\n    var frozenKey = currentElem.getAttribute('data-key');\n\n    if (!isNullOrUndefined(frozenKey)) {\n      this.frozenSwimlaneRow.setAttribute('data-key', frozenKey);\n    }\n  };\n\n  LayoutRender.prototype.frozenRows = function (e) {\n    var firstSwimlane = this.parent.element.querySelector('.' + cls.SWIMLANE_ROW_CLASS);\n    var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n    var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n\n    if (isNullOrUndefined(this.frozenSwimlaneRow)) {\n      this.frozenSwimlaneRow = createElement('div', {\n        className: cls.FROZEN_SWIMLANE_ROW_CLASS\n      });\n      var frozenRow = createElement('div', {\n        className: cls.FROZEN_ROW_CLASS\n      });\n      this.frozenSwimlaneRow.appendChild(frozenRow);\n      this.parent.element.insertBefore(this.frozenSwimlaneRow, this.parent.element.firstElementChild);\n      frozenRow.appendChild(firstSwimlane.querySelector('.' + cls.SWIMLANE_HEADER_CLASS).cloneNode(true));\n      this.addFrozenSwimlaneDataKey(firstSwimlane);\n      setStyleAttribute(this.frozenSwimlaneRow, {\n        height: formatUnit(firstSwimlane.getBoundingClientRect().height),\n        width: formatUnit(content.querySelector('.e-swimlane').getBoundingClientRect().width),\n        top: formatUnit(header.getBoundingClientRect().height.toString())\n      });\n      setStyleAttribute(header, {\n        position: 'relative',\n        top: formatUnit(-this.frozenSwimlaneRow.getBoundingClientRect().height)\n      });\n      setStyleAttribute(content, {\n        position: 'relative',\n        top: formatUnit(-this.frozenSwimlaneRow.getBoundingClientRect().height)\n      });\n    } else {\n      var swimlaneRows = [].slice.call(this.parent.element.querySelectorAll('.' + cls.SWIMLANE_ROW_CLASS));\n      var curSwim = swimlaneRows[this.frozenOrder];\n      var prevSwim = swimlaneRows[this.frozenOrder - 1];\n      var nextSwim = swimlaneRows[this.frozenOrder + 1];\n      var curSwimHeight = void 0;\n      var prevSwimHeight = void 0;\n      var nextSwimHeight = void 0;\n\n      if (curSwim) {\n        curSwimHeight = curSwim.getBoundingClientRect().top + curSwim.getBoundingClientRect().height;\n      }\n\n      if (prevSwim) {\n        prevSwimHeight = prevSwim.getBoundingClientRect().top + prevSwim.getBoundingClientRect().height;\n      }\n\n      if (nextSwim) {\n        nextSwimHeight = nextSwim.getBoundingClientRect().top + nextSwim.getBoundingClientRect().height;\n      }\n\n      var frozenSwimHeight = content.getBoundingClientRect().top + this.frozenSwimlaneRow.getBoundingClientRect().height;\n      var frozenRowsElement = this.frozenSwimlaneRow.querySelector('.' + cls.FROZEN_ROW_CLASS);\n\n      if (nextSwimHeight && frozenSwimHeight >= nextSwimHeight && this.frozenOrder < swimlaneRows.length - 1) {\n        if (frozenRowsElement) {\n          remove(frozenRowsElement.querySelector('.' + cls.SWIMLANE_HEADER_CLASS));\n          frozenRowsElement.appendChild(nextSwim.querySelector('.' + cls.SWIMLANE_HEADER_CLASS).cloneNode(true));\n          this.addFrozenSwimlaneDataKey(nextSwim);\n        }\n\n        ++this.frozenOrder;\n      } else if (prevSwimHeight && frozenSwimHeight < curSwimHeight && frozenSwimHeight > prevSwimHeight && this.frozenOrder > 0) {\n        if (frozenRowsElement) {\n          remove(frozenRowsElement.querySelector('.' + cls.SWIMLANE_HEADER_CLASS));\n          frozenRowsElement.appendChild(prevSwim.querySelector('.' + cls.SWIMLANE_HEADER_CLASS).cloneNode(true));\n          this.addFrozenSwimlaneDataKey(prevSwim);\n        }\n\n        --this.frozenOrder;\n      }\n    }\n\n    if (e && e.target.scrollTop == 0) {\n      this.removeFrozenRows();\n    }\n  };\n\n  LayoutRender.prototype.removeFrozenRows = function () {\n    remove(this.frozenSwimlaneRow);\n    this.frozenSwimlaneRow = null;\n    var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n    var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n    setStyleAttribute(header, {\n      position: '',\n      top: ''\n    });\n    setStyleAttribute(content, {\n      position: '',\n      top: ''\n    });\n    this.parent.scrollPosition.content = {\n      left: this.parent.scrollPosition.content.left,\n      top: 0\n    };\n    content.scrollTop = 0;\n    this.frozenOrder = 0;\n  };\n\n  LayoutRender.prototype.onColumnScroll = function (e) {\n    var target = e.target;\n\n    if (target.offsetParent) {\n      var columnKey = target.offsetParent.getAttribute('data-key');\n      this.parent.scrollPosition.column[columnKey] = {\n        left: target.scrollLeft,\n        top: target.scrollTop\n      };\n    }\n  };\n\n  LayoutRender.prototype.onAdaptiveScroll = function (e) {\n    if (this.parent.touchModule.tabHold && !this.parent.touchModule.mobilePopup) {\n      e.preventDefault();\n    }\n  };\n  /**\n   * Check column is visible or not.\n   *\n   * @param {ColumnsModel} column - specifies the column.\n   * @returns {boolean}\n   * @private\n   * @hidden\n   */\n\n\n  LayoutRender.prototype.isColumnVisible = function (column) {\n    var _this = this;\n\n    var isVisible = false;\n    var isNumeric = typeof column.keyField === 'number';\n\n    if (isNumeric) {\n      isVisible = this.parent.actionModule.hideColumnKeys.indexOf(column.keyField.toString()) === -1;\n    } else {\n      column.keyField.split(',').forEach(function (key) {\n        isVisible = _this.parent.actionModule.hideColumnKeys.indexOf(key) === -1;\n      });\n    }\n\n    return isVisible;\n  };\n\n  LayoutRender.prototype.renderLimits = function (column, target) {\n    var limits = createElement('div', {\n      className: cls.LIMITS_CLASS\n    });\n\n    if (column.minCount) {\n      limits.appendChild(createElement('div', {\n        className: cls.MIN_COUNT_CLASS,\n        innerHTML: this.parent.localeObj.getConstant('min') + ': ' + column.minCount.toString()\n      }));\n    }\n\n    if (column.maxCount) {\n      limits.appendChild(createElement('div', {\n        className: cls.MAX_COUNT_CLASS,\n        innerHTML: this.parent.localeObj.getConstant('max') + ': ' + column.maxCount.toString()\n      }));\n    }\n\n    if (limits.childElementCount > 0) {\n      if (target.querySelector('.' + cls.CARD_WRAPPER_CLASS)) {\n        target.insertBefore(limits, target.firstElementChild);\n      } else {\n        target.appendChild(limits);\n      }\n    }\n  };\n\n  LayoutRender.prototype.renderValidation = function () {\n    var _this = this;\n\n    this.parent.columns.forEach(function (column) {\n      if (!column.minCount && !column.maxCount) {\n        return;\n      }\n\n      var cardData = _this.columnData[column.keyField];\n      var keySelector = \"[data-key=\\\"\" + column.keyField + \"\\\"]\";\n\n      var headerCell = _this.parent.element.querySelector(\".\" + (cls.HEADER_CELLS_CLASS + keySelector));\n\n      var rowCells = [].slice.call(_this.parent.element.querySelectorAll(\".\" + (cls.CONTENT_CELLS_CLASS + keySelector)));\n\n      if (_this.parent.constraintType === 'Swimlane' && _this.parent.swimlaneSettings.keyField) {\n        _this.swimlaneRow.forEach(function (row, index) {\n          _this.renderLimits(column, rowCells[index]);\n\n          var rowCards = cardData.filter(function (card) {\n            return card[_this.parent.swimlaneSettings.keyField] === row.keyField;\n          });\n\n          var colorClass = _this.getValidationClass(column, rowCards.length);\n\n          if (colorClass) {\n            addClass([rowCells[index]], colorClass);\n          }\n        });\n      } else {\n        _this.renderLimits(column, headerCell);\n\n        var colorClass = _this.getValidationClass(column, cardData.length);\n\n        if (colorClass) {\n          addClass(rowCells.concat(headerCell), colorClass);\n        }\n      }\n    });\n  };\n\n  LayoutRender.prototype.getValidationClass = function (column, count) {\n    var colorClass;\n\n    if (column.maxCount && count > column.maxCount) {\n      colorClass = cls.MAX_COLOR_CLASS;\n    } else if (column.minCount && count < column.minCount) {\n      colorClass = cls.MIN_COLOR_CLASS;\n    }\n\n    return colorClass;\n  };\n\n  LayoutRender.prototype.refreshValidation = function () {\n    var validations = [].slice.call(this.parent.element.querySelectorAll('.' + cls.LIMITS_CLASS));\n    validations.forEach(function (node) {\n      remove(node);\n    });\n    var minClass = [].slice.call(this.parent.element.querySelectorAll('.' + cls.MIN_COLOR_CLASS));\n    removeClass(minClass, cls.MIN_COLOR_CLASS);\n    var maxClass = [].slice.call(this.parent.element.querySelectorAll('.' + cls.MAX_COLOR_CLASS));\n    removeClass(maxClass, cls.MAX_COLOR_CLASS);\n    this.renderValidation();\n  };\n\n  LayoutRender.prototype.getColumnData = function (columnValue, dataSource) {\n    var _this = this;\n\n    if (dataSource === void 0) {\n      dataSource = this.parent.kanbanData;\n    }\n\n    var cardData = [];\n    var isNumeric = typeof columnValue === 'number';\n\n    if (isNumeric) {\n      var keyData = dataSource.filter(function (cardObj) {\n        return cardObj[_this.parent.keyField] === columnValue;\n      });\n      cardData = cardData.concat(keyData);\n    } else {\n      var columnKeys = columnValue.split(',');\n\n      var _loop_4 = function (key) {\n        var keyData = dataSource.filter(function (cardObj) {\n          return cardObj[_this.parent.keyField] === key.trim();\n        });\n        cardData = cardData.concat(keyData);\n      };\n\n      for (var _i = 0, columnKeys_1 = columnKeys; _i < columnKeys_1.length; _i++) {\n        var key = columnKeys_1[_i];\n\n        _loop_4(key);\n      }\n    }\n\n    this.sortCategory(cardData);\n    return cardData;\n  };\n\n  LayoutRender.prototype.sortCategory = function (cardData) {\n    var key = this.parent.cardSettings.headerField;\n    var direction = this.parent.sortSettings.direction;\n\n    switch (this.parent.sortSettings.sortBy) {\n      case 'DataSourceOrder':\n        this.sortOrder(key, direction, cardData);\n        break;\n\n      case 'Custom':\n      case 'Index':\n        if (this.parent.sortSettings.field) {\n          key = this.parent.sortSettings.field;\n        }\n\n        this.sortOrder(key, direction, cardData);\n        break;\n    }\n\n    return cardData;\n  };\n\n  LayoutRender.prototype.sortOrder = function (key, direction, cardData) {\n    var isNumeric = true;\n\n    if (this.parent.kanbanData.length > 0) {\n      isNumeric = typeof this.parent.kanbanData[0][key] === 'number';\n    }\n\n    if (!isNumeric && this.parent.sortSettings.sortBy === 'Index') {\n      return cardData;\n    }\n\n    var first;\n    var second;\n    cardData = cardData.sort(function (firstData, secondData) {\n      if (!isNumeric) {\n        first = firstData[key].toLowerCase();\n        second = secondData[key].toLowerCase();\n      } else {\n        first = firstData[key];\n        second = secondData[key];\n      }\n\n      return first > second ? 1 : second > first ? -1 : 0;\n    });\n\n    if (direction === 'Descending') {\n      cardData.reverse();\n    }\n\n    return cardData;\n  };\n\n  LayoutRender.prototype.documentClick = function (args) {\n    if (args.target.classList.contains(cls.SWIMLANE_OVERLAY_CLASS) && this.parent.element.querySelector('.' + cls.SWIMLANE_RESOURCE_CLASS).classList.contains('e-popup-open')) {\n      this.treePopup.hide();\n      removeClass([this.popupOverlay], 'e-enable');\n    }\n\n    if (closest(args.target, \".\" + cls.ROOT_CLASS)) {\n      return;\n    }\n\n    var cards = [].slice.call(this.parent.element.querySelectorAll(\".\" + cls.CARD_CLASS + \".\" + cls.CARD_SELECTION_CLASS));\n    removeClass(cards, cls.CARD_SELECTION_CLASS);\n    this.disableAttributeSelection(cards);\n  };\n\n  LayoutRender.prototype.disableAttributeSelection = function (cards) {\n    if (cards instanceof Element) {\n      cards.setAttribute('aria-selected', 'false');\n    } else {\n      cards.forEach(function (card) {\n        card.setAttribute('aria-selected', 'false');\n      });\n    }\n  };\n\n  LayoutRender.prototype.getColumnCards = function (data) {\n    var _this = this;\n\n    var columnData = {};\n    this.columnKeys = [];\n    this.parent.columns.forEach(function (column) {\n      var isNumeric = typeof column.keyField === 'number';\n\n      if (isNumeric) {\n        _this.columnKeys = _this.columnKeys.concat(column.keyField.toString());\n      } else {\n        _this.columnKeys = _this.columnKeys.concat(column.keyField.split(',').map(function (e) {\n          return e.trim();\n        }));\n      }\n\n      var cardData = _this.getColumnData(column.keyField, data);\n\n      columnData[column.keyField] = cardData;\n    });\n    return columnData;\n  };\n\n  LayoutRender.prototype.getSwimlaneCards = function () {\n    var _this = this;\n\n    var swimlaneData = {};\n\n    if (this.parent.swimlaneSettings.keyField) {\n      this.kanbanRows.forEach(function (row) {\n        return swimlaneData[row.keyField] = _this.parent.kanbanData.filter(function (obj) {\n          return !isNullOrUndefined(obj[_this.parent.keyField]) && _this.columnKeys.indexOf(obj[_this.parent.keyField].toString()) > -1 && (!obj[_this.parent.swimlaneSettings.keyField] && _this.parent.swimlaneSettings.showUnassignedRow ? '' : obj[_this.parent.swimlaneSettings.keyField]) === row.keyField;\n        });\n      });\n    }\n\n    return swimlaneData;\n  };\n\n  LayoutRender.prototype.refreshHeaders = function () {\n    var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n    [].slice.call(header.children).forEach(function (child) {\n      return remove(child);\n    });\n    this.renderHeader(header);\n  };\n\n  LayoutRender.prototype.refreshCards = function () {\n    this.parent.resetTemplates(['cardTemplate']);\n    var cards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_WRAPPER_CLASS));\n    cards.forEach(function (card) {\n      return remove(card);\n    });\n    this.renderCards();\n    this.wireDragEvent();\n    this.parent.renderTemplates();\n  };\n\n  LayoutRender.prototype.refresh = function () {\n    var _this = this;\n\n    var isColumnTemplateRefreshed = false;\n    this.parent.columns.forEach(function (column) {\n      if (column.showItemCount) {\n        if (column && column.template && !isColumnTemplateRefreshed) {\n          _this.refreshHeaders();\n\n          isColumnTemplateRefreshed = true;\n        }\n\n        var countSelector = \".\" + cls.HEADER_CELLS_CLASS + \"[data-key=\\\"\" + column.keyField + \"\\\"] .\" + cls.CARD_ITEM_COUNT_CLASS;\n\n        var itemCount = _this.parent.element.querySelector(countSelector);\n\n        if (itemCount) {\n          var isNumeric = typeof column.keyField === 'number';\n          var cardLength = 0;\n\n          if (isNumeric) {\n            cardLength = [].slice.call(_this.parent.element.querySelectorAll('.' + cls.CARD_CLASS + '[data-key=\\\"' + column.keyField + '\\\"]')).length;\n          } else {\n            var keys = column.keyField.split(',');\n\n            for (var _i = 0, keys_2 = keys; _i < keys_2.length; _i++) {\n              var key = keys_2[_i];\n              var cards = [].slice.call(_this.parent.element.querySelectorAll('.' + cls.CARD_CLASS + '[data-key=\\\"' + key.trim() + '\\\"]'));\n              cardLength = cards.length + cardLength;\n            }\n          }\n\n          itemCount.innerHTML = '- ' + cardLength + ' ' + _this.parent.localeObj.getConstant('items');\n        }\n      }\n    });\n\n    if (this.parent.swimlaneSettings.keyField) {\n      var swimlaneRows = [].slice.call(this.parent.element.querySelectorAll(\".\" + cls.SWIMLANE_ROW_CLASS));\n      swimlaneRows.forEach(function (swimlane) {\n        var swimlaneKey = swimlane.getAttribute('data-key');\n        var itemCount = swimlane.querySelector(\".\" + cls.CARD_ITEM_COUNT_CLASS);\n\n        if (itemCount && swimlaneKey) {\n          var cards = [].slice.call(swimlane.nextElementSibling.querySelectorAll('.' + cls.CARD_CLASS));\n          itemCount.innerHTML = '- ' + cards.length + ' ' + _this.parent.localeObj.getConstant('items');\n        }\n      });\n    }\n\n    this.refreshValidation();\n  };\n\n  LayoutRender.prototype.updateScrollPosition = function () {\n    var _this = this;\n\n    var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n\n    if (content) {\n      content.scrollTo(this.parent.scrollPosition.content.left, this.parent.scrollPosition.content.top);\n    }\n\n    var cardWrapper = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_WRAPPER_CLASS));\n    cardWrapper.forEach(function (wrapper) {\n      if (wrapper.offsetParent) {\n        var scrollData = _this.parent.scrollPosition.column[wrapper.offsetParent.getAttribute('data-key')];\n\n        if (scrollData) {\n          wrapper.scrollTo(scrollData.left, scrollData.top);\n        }\n      }\n    });\n  };\n\n  LayoutRender.prototype.renderCardBasedOnIndex = function (data, index) {\n    var _this = this;\n\n    var key = data[this.parent.keyField];\n    var cardRow = this.parent.element.querySelector('.e-content-row:not(.e-swimlane-row)');\n\n    if (this.parent.swimlaneSettings.keyField && !this.parent.isAdaptive) {\n      var rowSelector = \".e-content-row.e-swimlane-row[data-key=\\\"\" + data[this.parent.swimlaneSettings.keyField] + \"\\\"]\";\n\n      if (this.parent.element.querySelector(rowSelector)) {\n        cardRow = this.parent.element.querySelector(rowSelector).nextElementSibling;\n      } else {\n        var columnIndex = this.columnKeys.indexOf(key);\n\n        if (columnIndex !== -1 && this.parent.actionModule.hideColumnKeys.indexOf(key) === -1) {\n          var index_1 = this.kanbanRows.findIndex(function (rowData) {\n            return rowData['keyField'] === data[_this.parent.swimlaneSettings.keyField];\n          });\n          var swim = [].slice.call(this.parent.element.querySelectorAll('.e-swimlane-row'));\n          var swimRow = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS + ' tbody');\n\n          if (swim[index_1]) {\n            swimRow = swim[index_1];\n          }\n\n          this.renderSwimlaneRow(swimRow, this.kanbanRows[index_1], false);\n          this.renderSingleContent(swimRow, this.kanbanRows[index_1], false);\n        }\n\n        cardRow = this.parent.element.querySelector(rowSelector).nextElementSibling;\n        [].slice.call(cardRow.children).forEach(function (cell) {\n          var cardWrapper = createElement('div', {\n            className: cls.CARD_WRAPPER_CLASS\n          });\n          cell.appendChild(cardWrapper);\n          cardWrapper.appendChild(_this.renderEmptyCard());\n        });\n      }\n    }\n\n    if (this.parent.sortSettings.sortBy !== 'Index') {\n      var field_1 = this.parent.cardSettings.headerField;\n\n      if (this.parent.sortSettings.sortBy === 'Custom') {\n        field_1 = this.parent.sortSettings.field;\n      }\n\n      if (isNullOrUndefined(this.parent.swimlaneSettings.keyField)) {\n        index = this.getColumnData(key, this.parent.kanbanData).findIndex(function (colData) {\n          return colData[field_1] === data[field_1];\n        });\n      } else {\n        var swimlaneDatas = this.parent.getSwimlaneData(data[this.parent.swimlaneSettings.keyField]);\n        index = this.getColumnData(key, swimlaneDatas).findIndex(function (colData) {\n          return colData[field_1] === data[field_1];\n        });\n      }\n    } else if (this.parent.sortSettings.sortBy === 'Index' && this.parent.sortSettings.field && this.parent.sortSettings.direction === 'Ascending') {\n      index = data[this.parent.sortSettings.field] - 1;\n    }\n\n    if (cardRow) {\n      var td = [].slice.call(cardRow.children).filter(function (e) {\n        return e.getAttribute('data-key').replace(/\\s/g, '').split(',').indexOf(key.toString().replace(/\\s/g, '')) !== -1;\n      })[0];\n      var cardWrapper_2 = td.querySelector('.' + cls.CARD_WRAPPER_CLASS);\n      var emptyCard = cardWrapper_2.querySelector('.' + cls.EMPTY_CARD_CLASS);\n\n      if (emptyCard) {\n        remove(emptyCard);\n      }\n\n      var cardElement_1 = this.renderCard(data);\n\n      if (this.parent.allowDragAndDrop && td.classList.contains(cls.DRAG_CLASS)) {\n        this.parent.dragAndDropModule.wireDragEvents(cardElement_1);\n        addClass([cardElement_1], cls.DROPPABLE_CLASS);\n      }\n\n      var args = {\n        data: data,\n        element: cardElement_1,\n        cancel: false\n      };\n      this.parent.trigger(events.cardRendered, args, function (cardArgs) {\n        if (!cardArgs.cancel) {\n          if (isNullOrUndefined(index) || cardWrapper_2.children.length === 0) {\n            cardWrapper_2.appendChild(cardElement_1);\n          } else {\n            cardWrapper_2.insertBefore(cardElement_1, cardWrapper_2.childNodes[index]);\n          }\n        }\n      });\n    }\n  };\n\n  LayoutRender.prototype.removeCard = function (data) {\n    var cardKey = data[this.parent.cardSettings.headerField];\n    var cardElement = this.parent.element.querySelector(\".\" + cls.CARD_CLASS + \"[data-id=\\\"\" + cardKey + \"\\\"]\");\n    this.isSelectedCard = cardElement.classList.contains(cls.CARD_SELECTION_CLASS) ? true : false;\n    var cardContainer = cardElement.parentElement;\n\n    if (cardElement) {\n      remove(cardElement);\n    }\n\n    if (cardContainer.querySelectorAll('.' + cls.CARD_CLASS + ':not(.' + cls.CLONED_CARD_CLASS + ')').length === 0) {\n      cardContainer.appendChild(this.renderEmptyCard());\n    }\n  };\n\n  LayoutRender.prototype.wireEvents = function () {\n    var _this = this;\n\n    EventHandler.add(this.parent.element, 'click', this.parent.actionModule.clickHandler, this.parent.actionModule);\n    EventHandler.add(this.parent.element, 'dblclick', this.parent.actionModule.doubleClickHandler, this.parent.actionModule);\n    EventHandler.add(document, Browser.touchStartEvent, this.documentClick, this);\n    var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n    EventHandler.add(content, 'scroll', this.onContentScroll, this);\n    var cardWrapper = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_WRAPPER_CLASS));\n    cardWrapper.forEach(function (wrapper) {\n      if (_this.parent.isInitialRender && wrapper.offsetParent) {\n        _this.parent.scrollPosition.column[wrapper.offsetParent.getAttribute('data-key')] = {\n          left: 0,\n          top: 0\n        };\n      }\n\n      EventHandler.add(wrapper, 'scroll', _this.onColumnScroll, _this);\n    });\n\n    if (this.parent.isAdaptive) {\n      this.parent.touchModule.wireTouchEvents();\n      content.scrollLeft = this.scrollLeft;\n    }\n\n    this.wireDragEvent();\n  };\n\n  LayoutRender.prototype.unWireEvents = function () {\n    var _this = this;\n\n    EventHandler.remove(this.parent.element, 'click', this.parent.actionModule.clickHandler);\n    EventHandler.remove(this.parent.element, 'dblclick', this.parent.actionModule.doubleClickHandler);\n    EventHandler.remove(document, Browser.touchStartEvent, this.documentClick);\n    var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n\n    if (content) {\n      EventHandler.remove(content, 'scroll', this.onContentScroll);\n\n      if (this.parent.allowDragAndDrop) {\n        this.unWireDragEvent();\n      }\n    }\n\n    var cardWrapper = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_WRAPPER_CLASS));\n    cardWrapper.forEach(function (wrapper) {\n      EventHandler.remove(wrapper, 'scroll', _this.onColumnScroll);\n    });\n\n    if (this.parent.isAdaptive) {\n      this.parent.touchModule.unWireTouchEvents();\n    }\n  };\n\n  LayoutRender.prototype.wireDragEvent = function () {\n    var _this = this;\n\n    if (this.parent.allowDragAndDrop) {\n      var cards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_CELLS_CLASS + '.' + cls.DRAG_CLASS + ' .' + cls.CARD_CLASS));\n      addClass(cards, cls.DROPPABLE_CLASS);\n      cards.forEach(function (card) {\n        return _this.parent.dragAndDropModule.wireDragEvents(card);\n      });\n    }\n  };\n\n  LayoutRender.prototype.unWireDragEvent = function () {\n    var _this = this;\n\n    var cards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_CELLS_CLASS + '.' + cls.DRAG_CLASS + ' .' + cls.CARD_CLASS));\n    removeClass(cards, cls.DROPPABLE_CLASS);\n    cards.forEach(function (card) {\n      return _this.parent.dragAndDropModule.unWireDragEvents(card);\n    });\n  };\n\n  LayoutRender.prototype.destroy = function () {\n    this.parent.resetTemplates();\n    this.parent.off(events.dataReady, this.initRender);\n    this.parent.off(events.contentReady, this.scrollUiUpdate);\n    this.unWireEvents();\n    var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n\n    if (header) {\n      remove(header);\n    }\n\n    var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n\n    if (content) {\n      remove(content);\n    }\n\n    if (this.treeViewObj) {\n      this.treeViewObj.destroy();\n      this.treeViewObj = null;\n    }\n\n    if (this.treePopup) {\n      this.treePopup.destroy();\n      this.treePopup = null;\n    }\n\n    var swimlaneToolBarEle = this.parent.element.querySelector('.' + cls.SWIMLANE_HEADER_CLASS);\n\n    if (swimlaneToolBarEle) {\n      remove(swimlaneToolBarEle);\n    }\n\n    var swimlaneContent = this.parent.element.querySelector('.' + cls.SWIMLANE_CONTENT_CLASS);\n\n    if (swimlaneContent) {\n      remove(swimlaneContent);\n    }\n  };\n\n  return LayoutRender;\n}(MobileLayout);\n\nexport { LayoutRender };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","append","createElement","formatUnit","EventHandler","addClass","remove","extend","Browser","isNullOrUndefined","removeClass","closest","setStyleAttribute","MobileLayout","events","cls","LayoutRender","_super","parent","_this","call","kanbanRows","columnKeys","swimlaneIndex","swimlaneData","scrollLeft","frozenOrder","on","dataReady","initRender","contentReady","scrollUiUpdate","columns","length","columnData","getColumnCards","getRows","getSwimlaneCards","isAdaptive","parent_1","element","querySelector","CONTENT_CLASS","destroy","swimlaneSettings","keyField","kanbanData","renderSwimlaneHeader","header","className","HEADER_CLASS","appendChild","renderHeader","renderContent","renderCards","renderValidation","renderTemplates","notify","wireEvents","isInitialRender","headerWrap","SWIMLANE_CLASS","headerTable","TABLE_CLASS","HEADER_TABLE_CLASS","attrs","renderColGroup","tableHead","stackedHeaders","createStackedRow","tr","HEADER_ROW_CLASS","_loop_1","column","this_1","isColumnVisible","index","actionModule","columnToggleArray","indexOf","toString","th_1","HEADER_CELLS_CLASS","COLLAPSED_CLASS","classList","allowToggle","push","HEADER_ROW_TOGGLE_CLASS","isExpanded","headerWrapper","HEADER_WRAP_CLASS","noOfCard","headerTitle","HEADER_TITLE_CLASS","template","templateArgs","headerText","minCount","maxCount","showItemCount","count","TEMPLATE_CLASS","templateId","id","templateHeader","templateParser","header_1","HEADER_TEXT_CLASS","innerHTML","itemCount","CARD_ITEM_COUNT_CLASS","localeObj","getConstant","isExpand","name_1","COLUMN_EXPAND_CLASS","COLUMN_COLLAPSE_CLASS","icon","HEADER_ICON_CLASS","ICON_CLASS","setAttribute","dataObj","textField","args","data","cancel","requestType","trigger","queryCellInfo","columnArgs","_i","_a","content","contentWrap","contentTable","CONTENT_TABLE_CLASS","tBody","isCollaspsed","swimlaneRow","initializeSwimlaneTree","row","swimlaneToggleArray","renderSwimlaneRow","renderSingleContent","CONTENT_ROW_CLASS","className_1","CONTENT_CELLS_CLASS","dragClass","allowDrag","DRAG_CLASS","allowDrop","DROP_CLASS","DROPPABLE_CLASS","td","text","getColumnData","COLLAPSE_HEADER_TEXT_CLASS","showAddButton","button","SHOW_ADD_BUTTON","SHOW_ADD_ICON","contains","insertAdjacentElement","renderSwimlaneTree","TOOLBAR_SWIMLANE_NAME_CLASS","isCollapsed","name","SWIMLANE_ROW_CLASS","col","hideColumnKeys","swimlaneHeader","SWIMLANE_HEADER_CLASS","iconClass","SWIMLANE_ROW_COLLAPSE_CLASS","SWIMLANE_ROW_EXPAND_CLASS","iconDiv","cardCount","swimlaneTemplate","SWIMLANE_ROW_TEXT_CLASS","rows","cardRows","slice","querySelectorAll","swimlaneRows","removeTrs","forEach","dataCount","_loop_2","columnWrapper","cardWrapper_1","CARD_WRAPPER_CLASS","_loop_3","cardText","cardSettings","headerField","cardIndex","selectionArray","cardElement","renderCard","CARD_SELECTION_CLASS","cardRendered","cardArgs","renderEmptyCard","showEmptyRow","showEmptyColumn","CARD_CLASS","cardTemplate","tooltipClass","enableTooltip","TOOLTIP_TEXT_CLASS","showHeader","cardHeader","CARD_HEADER_CLASS","cardCaption","CARD_HEADER_TEXT_CLASS","CARD_HEADER_TITLE_CLASS","cardContent","CARD_CONTENT_CLASS","contentField","tagsField","cardTags","CARD_TAGS_CLASS","tags","split","tags_1","tag","CARD_TAG_CLASS","CARD_LABEL_CLASS","grabberField","CARD_COLOR_CLASS","style","borderLeftColor","footerCssField","cardFields","CARD_FOOTER_CLASS","keys","keys_1","key","trim","CARD_FOOTER_CSS_CLASS","emptyCard","EMPTY_CARD_CLASS","table","colGroup","isToggle","styles","toggleWidth","getWidth","map","obj","showUnassignedRow","filter","item","arr","swimlaneSorting","sortComparer","sort","a","localeCompare","undefined","numeric","sortDirection","reverse","STACKED_HEADER_ROW_CLASS","rows_1","keyFields","h","colSpan","j","div","th","STACKED_HEADER_CELL_CLASS","height","offsetHeight","window","innerHeight","bottomSpace","swimlaneToolbar","cardWrappers","cell","cardWrapper","MULTI_CARD_WRAPPER_CLASS","add","onAdaptiveScroll","children","node","paddingValue","offsetWidth","clientWidth","clientHeight","width","enableRtl","paddingLeft","paddingRight","updateScrollPosition","onContentScroll","e","target","scrollPosition","left","top","scrollTop","enableFrozenRows","frozenRows","addFrozenSwimlaneDataKey","currentElem","frozenKey","getAttribute","frozenSwimlaneRow","firstSwimlane","FROZEN_SWIMLANE_ROW_CLASS","frozenRow","FROZEN_ROW_CLASS","insertBefore","firstElementChild","cloneNode","getBoundingClientRect","position","curSwim","prevSwim","nextSwim","curSwimHeight","prevSwimHeight","nextSwimHeight","frozenSwimHeight","frozenRowsElement","removeFrozenRows","onColumnScroll","offsetParent","columnKey","touchModule","tabHold","mobilePopup","preventDefault","isVisible","isNumeric","renderLimits","limits","LIMITS_CLASS","MIN_COUNT_CLASS","MAX_COUNT_CLASS","childElementCount","cardData","keySelector","headerCell","rowCells","constraintType","rowCards","card","colorClass","getValidationClass","concat","MAX_COLOR_CLASS","MIN_COLOR_CLASS","refreshValidation","validations","minClass","maxClass","columnValue","dataSource","keyData","cardObj","_loop_4","columnKeys_1","sortCategory","direction","sortSettings","sortBy","sortOrder","field","first","second","firstData","secondData","toLowerCase","documentClick","SWIMLANE_OVERLAY_CLASS","SWIMLANE_RESOURCE_CLASS","treePopup","hide","popupOverlay","ROOT_CLASS","cards","disableAttributeSelection","Element","refreshHeaders","child","refreshCards","resetTemplates","wireDragEvent","refresh","isColumnTemplateRefreshed","countSelector","cardLength","keys_2","swimlane","swimlaneKey","nextElementSibling","scrollTo","wrapper","scrollData","renderCardBasedOnIndex","cardRow","rowSelector","columnIndex","index_1","findIndex","rowData","swim","swimRow","field_1","colData","swimlaneDatas","getSwimlaneData","replace","cardWrapper_2","cardElement_1","allowDragAndDrop","dragAndDropModule","wireDragEvents","childNodes","removeCard","cardKey","isSelectedCard","cardContainer","parentElement","CLONED_CARD_CLASS","clickHandler","doubleClickHandler","document","touchStartEvent","wireTouchEvents","unWireEvents","unWireDragEvent","unWireTouchEvents","unWireDragEvents","off","treeViewObj","swimlaneToolBarEle","swimlaneContent","SWIMLANE_CONTENT_CLASS"],"sources":["C:/Users/shahj/OneDrive/Documents/GitHub/Admin-Dashboard/frontend/node_modules/@syncfusion/ej2-kanban/src/kanban/base/layout-render.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { append, createElement, formatUnit, EventHandler, addClass, remove, extend, Browser, isNullOrUndefined, removeClass, closest, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { MobileLayout } from './mobile-layout';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Kanban layout rendering module\n *\n */\nvar LayoutRender = /** @class */ (function (_super) {\n    __extends(LayoutRender, _super);\n    function LayoutRender(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.kanbanRows = [];\n        _this.parent = parent;\n        _this.columnKeys = [];\n        _this.swimlaneIndex = 0;\n        _this.swimlaneData = {};\n        _this.scrollLeft = 0;\n        _this.frozenOrder = 0;\n        _this.parent.on(events.dataReady, _this.initRender, _this);\n        _this.parent.on(events.contentReady, _this.scrollUiUpdate, _this);\n        return _this;\n    }\n    LayoutRender.prototype.initRender = function () {\n        if (this.parent.columns.length === 0) {\n            return;\n        }\n        this.columnData = this.getColumnCards();\n        this.kanbanRows = this.getRows();\n        this.swimlaneData = this.getSwimlaneCards();\n        if (this.parent.isAdaptive) {\n            var parent_1 = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n            if (parent_1) {\n                this.scrollLeft = parent_1.scrollLeft;\n            }\n        }\n        this.destroy();\n        this.parent.on(events.dataReady, this.initRender, this);\n        this.parent.on(events.contentReady, this.scrollUiUpdate, this);\n        if (this.parent.isAdaptive && this.parent.swimlaneSettings.keyField && this.parent.kanbanData.length !== 0) {\n            this.renderSwimlaneHeader();\n        }\n        var header = createElement('div', { className: cls.HEADER_CLASS });\n        this.parent.element.appendChild(header);\n        this.renderHeader(header);\n        this.renderContent();\n        this.renderCards();\n        this.renderValidation();\n        this.parent.renderTemplates();\n        this.parent.notify(events.contentReady, {});\n        this.wireEvents();\n        if (this.parent.isInitialRender) {\n            this.parent.isInitialRender = false;\n        }\n    };\n    LayoutRender.prototype.renderHeader = function (header) {\n        var headerWrap = createElement('div', { className: this.parent.swimlaneSettings.keyField ? cls.SWIMLANE_CLASS : '' });\n        header.appendChild(headerWrap);\n        var headerTable = createElement('table', {\n            className: cls.TABLE_CLASS + ' ' + cls.HEADER_TABLE_CLASS,\n            attrs: { 'role': 'presentation' }\n        });\n        headerWrap.appendChild(headerTable);\n        this.renderColGroup(headerTable);\n        var tableHead = createElement('thead');\n        headerTable.appendChild(tableHead);\n        if (this.parent.stackedHeaders.length > 0) {\n            tableHead.appendChild(this.createStackedRow(this.parent.stackedHeaders));\n        }\n        var tr = createElement('tr', { className: cls.HEADER_ROW_CLASS });\n        tableHead.appendChild(tr);\n        var _loop_1 = function (column) {\n            if (this_1.isColumnVisible(column)) {\n                var index = this_1.parent.actionModule.columnToggleArray.indexOf(column.keyField.toString());\n                var th_1 = createElement('th', {\n                    className: index === -1 ? cls.HEADER_CELLS_CLASS : cls.HEADER_CELLS_CLASS + ' ' + cls.COLLAPSED_CLASS,\n                    attrs: { 'data-role': 'kanban-column', 'data-key': column.keyField.toString() }\n                });\n                var classList = [];\n                if (column.allowToggle) {\n                    classList.push(cls.HEADER_ROW_TOGGLE_CLASS);\n                    if (!column.isExpanded) {\n                        classList.push(cls.COLLAPSED_CLASS);\n                    }\n                }\n                addClass([th_1], classList);\n                var headerWrapper = createElement('div', { className: cls.HEADER_WRAP_CLASS });\n                th_1.appendChild(headerWrapper);\n                var noOfCard = this_1.columnData[column.keyField].length;\n                var headerTitle = createElement('div', { className: cls.HEADER_TITLE_CLASS });\n                headerWrapper.appendChild(headerTitle);\n                if (column.template) {\n                    var templateArgs = {\n                        keyField: column.keyField, headerText: column.headerText, minCount: column.minCount, maxCount: column.maxCount,\n                        allowToggle: column.allowToggle, isExpanded: column.isExpanded, showItemCount: column.showItemCount, count: noOfCard\n                    };\n                    addClass([th_1], cls.TEMPLATE_CLASS);\n                    var templateId = this_1.parent.element.id + '_columnTemplate';\n                    var templateHeader = this_1.parent.templateParser(column.template)(templateArgs, this_1.parent, 'columnTemplate', templateId, false);\n                    append(templateHeader, headerTitle);\n                }\n                else {\n                    var header_1 = createElement('div', { className: cls.HEADER_TEXT_CLASS, innerHTML: column.headerText });\n                    headerTitle.appendChild(header_1);\n                    if (column.showItemCount) {\n                        var itemCount = createElement('div', {\n                            className: cls.CARD_ITEM_COUNT_CLASS,\n                            innerHTML: '- ' + noOfCard.toString() + ' ' + this_1.parent.localeObj.getConstant('items')\n                        });\n                        headerTitle.appendChild(itemCount);\n                    }\n                }\n                if (column.allowToggle) {\n                    var isExpand = (column.isExpanded && index === -1) ? true : false;\n                    var name_1 = (isExpand) ? cls.COLUMN_EXPAND_CLASS : cls.COLUMN_COLLAPSE_CLASS;\n                    var icon = createElement('div', {\n                        className: cls.HEADER_ICON_CLASS + ' ' + cls.ICON_CLASS + ' ' + name_1,\n                        attrs: { 'tabindex': '0' }\n                    });\n                    icon.setAttribute('aria-label', isExpand ? column.keyField + ' Expand' : column.keyField + ' Collapse');\n                    th_1.setAttribute('aria-expanded', isExpand.toString());\n                    headerWrapper.appendChild(icon);\n                }\n                var dataObj = [{ keyField: column.keyField, textField: column.headerText, count: noOfCard }];\n                var args = { data: dataObj, element: tr, cancel: false, requestType: 'headerRow' };\n                this_1.parent.trigger(events.queryCellInfo, args, function (columnArgs) {\n                    if (!columnArgs.cancel) {\n                        tr.appendChild(th_1);\n                    }\n                });\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, _a = this.parent.columns; _i < _a.length; _i++) {\n            var column = _a[_i];\n            _loop_1(column);\n        }\n    };\n    LayoutRender.prototype.renderContent = function () {\n        var content = createElement('div', { className: cls.CONTENT_CLASS });\n        this.parent.element.appendChild(content);\n        var contentWrap = createElement('div', { className: this.parent.swimlaneSettings.keyField ? cls.SWIMLANE_CLASS : '' });\n        content.appendChild(contentWrap);\n        var contentTable = createElement('table', {\n            className: cls.TABLE_CLASS + ' ' + cls.CONTENT_TABLE_CLASS,\n            attrs: { 'role': 'presentation' }\n        });\n        contentWrap.appendChild(contentTable);\n        this.renderColGroup(contentTable);\n        var tBody = createElement('tbody');\n        contentTable.appendChild(tBody);\n        var className;\n        var isCollaspsed = false;\n        this.swimlaneRow = this.kanbanRows;\n        this.initializeSwimlaneTree();\n        for (var _i = 0, _a = this.swimlaneRow; _i < _a.length; _i++) {\n            var row = _a[_i];\n            if (this.parent.swimlaneSettings.keyField && this.parent.swimlaneToggleArray.length !== 0) {\n                var index = this.parent.swimlaneToggleArray.indexOf(row.keyField);\n                isCollaspsed = index !== -1;\n            }\n            if (this.parent.swimlaneSettings.keyField && !this.parent.isAdaptive) {\n                this.renderSwimlaneRow(tBody, row, isCollaspsed);\n            }\n            this.renderSingleContent(tBody, row, isCollaspsed);\n        }\n    };\n    LayoutRender.prototype.renderSingleContent = function (tBody, row, isCollaspsed) {\n        var className = isCollaspsed ? cls.CONTENT_ROW_CLASS + ' ' + cls.COLLAPSED_CLASS : cls.CONTENT_ROW_CLASS;\n        var tr = createElement('tr', { className: className, attrs: { 'aria-expanded': 'true' } });\n        for (var _i = 0, _a = this.parent.columns; _i < _a.length; _i++) {\n            var column = _a[_i];\n            if (this.isColumnVisible(column)) {\n                var index = this.parent.actionModule.columnToggleArray.indexOf(column.keyField.toString());\n                var className_1 = index === -1 ? cls.CONTENT_CELLS_CLASS : cls.CONTENT_CELLS_CLASS + ' ' + cls.COLLAPSED_CLASS;\n                var dragClass = (column.allowDrag ? ' ' + cls.DRAG_CLASS : '') + (column.allowDrop ? ' ' + cls.DROP_CLASS\n                    + ' ' + cls.DROPPABLE_CLASS : '');\n                var td = createElement('td', {\n                    className: className_1 + dragClass,\n                    attrs: { 'data-role': 'kanban-column', 'data-key': column.keyField.toString(), 'aria-expanded': 'true',\n                        'tabindex': '0', 'role': 'navigation' }\n                });\n                if (column.allowToggle && !column.isExpanded || index !== -1) {\n                    addClass([td], cls.COLLAPSED_CLASS);\n                    var text = (column.showItemCount ? '[' +\n                        this.getColumnData(column.keyField, this.swimlaneData[row.keyField]).length + '] ' : '') + column.headerText;\n                    td.appendChild(createElement('div', { className: cls.COLLAPSE_HEADER_TEXT_CLASS, innerHTML: text }));\n                    td.setAttribute('aria-expanded', 'false');\n                }\n                if (column.showAddButton) {\n                    var button = createElement('div', { className: cls.SHOW_ADD_BUTTON, attrs: { 'tabindex': '-1' } });\n                    button.appendChild(createElement('div', { className: cls.SHOW_ADD_ICON + ' ' + cls.ICON_CLASS }));\n                    td.appendChild(button);\n                }\n                tr.appendChild(td);\n            }\n        }\n        var dataObj = [{ keyField: row.keyField, textField: row.textField, count: row.count }];\n        var args = { data: dataObj, element: tr, cancel: false, requestType: 'contentRow' };\n        this.parent.trigger(events.queryCellInfo, args, function (columnArgs) {\n            if (!columnArgs.cancel) {\n                if (tBody.classList.contains('e-swimlane-row')) {\n                    tBody.insertAdjacentElement('beforebegin', tr);\n                }\n                else {\n                    tBody.appendChild(tr);\n                }\n            }\n        });\n    };\n    LayoutRender.prototype.initializeSwimlaneTree = function () {\n        if (this.parent.swimlaneSettings.keyField && this.parent.isAdaptive && this.parent.kanbanData.length !== 0) {\n            this.swimlaneRow = [this.kanbanRows[this.swimlaneIndex]];\n            this.renderSwimlaneTree();\n            this.parent.element.querySelector('.' + cls.TOOLBAR_SWIMLANE_NAME_CLASS).innerHTML = this.swimlaneRow[0].textField;\n        }\n    };\n    LayoutRender.prototype.renderSwimlaneRow = function (tBody, row, isCollapsed) {\n        var name = cls.CONTENT_ROW_CLASS + ' ' + cls.SWIMLANE_ROW_CLASS;\n        var className = isCollapsed ? ' ' + cls.COLLAPSED_CLASS : '';\n        var tr = createElement('tr', {\n            className: name + className, attrs: { 'data-key': row.keyField, 'aria-expanded': (!isCollapsed).toString() }\n        });\n        var col = this.parent.columns.length - this.parent.actionModule.hideColumnKeys.length;\n        var td = createElement('td', {\n            className: cls.CONTENT_CELLS_CLASS, attrs: { 'data-role': 'kanban-column', 'colspan': col.toString() }\n        });\n        var swimlaneHeader = createElement('div', { className: cls.SWIMLANE_HEADER_CLASS });\n        td.appendChild(swimlaneHeader);\n        var iconClass = isCollapsed ? cls.SWIMLANE_ROW_COLLAPSE_CLASS : cls.SWIMLANE_ROW_EXPAND_CLASS;\n        var iconDiv = createElement('div', {\n            className: cls.ICON_CLASS + ' ' + iconClass, attrs: {\n                'tabindex': '0',\n                'aria-label': isCollapsed ? row.keyField + ' Collapse' : row.keyField + ' Expand'\n            }\n        });\n        swimlaneHeader.appendChild(iconDiv);\n        var headerWrap = createElement('div', { className: cls.HEADER_WRAP_CLASS });\n        swimlaneHeader.appendChild(headerWrap);\n        var cardCount = this.swimlaneData[row.keyField].length;\n        if (this.parent.swimlaneSettings.template) {\n            var templateArgs = extend({}, row, { count: cardCount }, true);\n            addClass([td], cls.TEMPLATE_CLASS);\n            var templateId = this.parent.element.id + '_swimlaneTemplate';\n            var swimlaneTemplate = this.parent.templateParser(this.parent.swimlaneSettings.template)(templateArgs, this.parent, 'swimlaneTemplate', templateId, false);\n            append(swimlaneTemplate, headerWrap);\n        }\n        else {\n            headerWrap.appendChild(createElement('div', {\n                className: cls.SWIMLANE_ROW_TEXT_CLASS,\n                innerHTML: row.textField,\n                attrs: { 'data-role': row.textField }\n            }));\n        }\n        if (this.parent.swimlaneSettings.showItemCount) {\n            swimlaneHeader.appendChild(createElement('div', {\n                className: cls.CARD_ITEM_COUNT_CLASS,\n                innerHTML: \"- \" + cardCount.toString() + \" \" + this.parent.localeObj.getConstant('items')\n            }));\n        }\n        tr.appendChild(td);\n        var dataObj = [{ keyField: row.keyField, textField: row.textField, count: row.count }];\n        var args = { data: dataObj, element: tr, cancel: false, requestType: 'swimlaneRow' };\n        this.parent.trigger(events.queryCellInfo, args, function (columnArgs) {\n            if (!columnArgs.cancel) {\n                if (tBody.classList.contains('e-swimlane-row')) {\n                    tBody.insertAdjacentElement('beforebegin', tr);\n                }\n                else {\n                    tBody.appendChild(tr);\n                }\n            }\n        });\n    };\n    LayoutRender.prototype.renderCards = function () {\n        var _this = this;\n        var rows = this.swimlaneRow;\n        var cardRows = [].slice.call(this.parent.element.querySelectorAll('.e-content-row:not(.e-swimlane-row)'));\n        var swimlaneRows = [].slice.call(this.parent.element.querySelectorAll('.e-content-row.e-swimlane-row'));\n        var removeTrs = [];\n        cardRows.forEach(function (tr, index) {\n            var dataCount = 0;\n            var _loop_2 = function (column) {\n                if (_this.isColumnVisible(column)) {\n                    var columnData = _this.parent.swimlaneSettings.keyField ?\n                        _this.getColumnData(column.keyField, _this.swimlaneData[rows[index].keyField]) : _this.columnData[column.keyField];\n                    dataCount += columnData.length;\n                    var columnWrapper = tr.querySelector('[data-key=\"' + column.keyField + '\"]');\n                    var cardWrapper_1 = createElement('div', {\n                        className: cls.CARD_WRAPPER_CLASS, attrs: { 'role': 'listbox' }\n                    });\n                    columnWrapper.appendChild(cardWrapper_1);\n                    if (columnData.length > 0) {\n                        var _loop_3 = function (data) {\n                            var cardText = data[_this.parent.cardSettings.headerField];\n                            var cardIndex = _this.parent.actionModule.selectionArray.indexOf(cardText);\n                            var cardElement = _this.renderCard(data);\n                            if (cardIndex !== -1) {\n                                cardElement.setAttribute('aria-selected', 'true');\n                                addClass([cardElement], cls.CARD_SELECTION_CLASS);\n                            }\n                            var args = { data: data, element: cardElement, cancel: false };\n                            _this.parent.trigger(events.cardRendered, args, function (cardArgs) {\n                                if (!cardArgs.cancel) {\n                                    cardWrapper_1.appendChild(cardElement);\n                                }\n                            });\n                        };\n                        for (var _i = 0, _a = columnData; _i < _a.length; _i++) {\n                            var data = _a[_i];\n                            _loop_3(data);\n                        }\n                    }\n                    else {\n                        cardWrapper_1.appendChild(_this.renderEmptyCard());\n                    }\n                }\n            };\n            for (var _i = 0, _a = _this.parent.columns; _i < _a.length; _i++) {\n                var column = _a[_i];\n                _loop_2(column);\n            }\n            if (dataCount === 0) {\n                removeTrs.push(tr);\n                if (swimlaneRows.length > 0) {\n                    removeTrs.push(swimlaneRows[index]);\n                }\n            }\n        });\n        if (!this.parent.swimlaneSettings.showEmptyRow && (this.parent.kanbanData.length === 0 && !this.parent.showEmptyColumn)) {\n            removeTrs.forEach(function (tr) { return remove(tr); });\n        }\n    };\n    LayoutRender.prototype.renderCard = function (data) {\n        var cardElement = createElement('div', {\n            className: cls.CARD_CLASS,\n            attrs: {\n                'data-id': data[this.parent.cardSettings.headerField], 'data-key': data[this.parent.keyField],\n                'aria-selected': 'false', 'tabindex': '-1', 'role': 'option'\n            }\n        });\n        if (this.parent.cardSettings.template) {\n            addClass([cardElement], cls.TEMPLATE_CLASS);\n            var templateId = this.parent.element.id + '_cardTemplate';\n            var cardTemplate = this.parent.templateParser(this.parent.cardSettings.template)(data, this.parent, 'cardTemplate', templateId, false);\n            append(cardTemplate, cardElement);\n        }\n        else {\n            var tooltipClass = this.parent.enableTooltip ? ' ' + cls.TOOLTIP_TEXT_CLASS : '';\n            if (this.parent.cardSettings.showHeader) {\n                var cardHeader = createElement('div', { className: cls.CARD_HEADER_CLASS });\n                var cardCaption = createElement('div', { className: cls.CARD_HEADER_TEXT_CLASS });\n                var cardText = createElement('div', {\n                    className: cls.CARD_HEADER_TITLE_CLASS + tooltipClass,\n                    innerHTML: data[this.parent.cardSettings.headerField] || ''\n                });\n                cardHeader.appendChild(cardCaption);\n                cardCaption.appendChild(cardText);\n                cardElement.appendChild(cardHeader);\n            }\n            var cardContent = createElement('div', {\n                className: cls.CARD_CONTENT_CLASS + tooltipClass,\n                innerHTML: data[this.parent.cardSettings.contentField] || ''\n            });\n            cardElement.appendChild(cardContent);\n            if (this.parent.cardSettings.tagsField && data[this.parent.cardSettings.tagsField]) {\n                var cardTags = createElement('div', { className: cls.CARD_TAGS_CLASS });\n                var tags = data[this.parent.cardSettings.tagsField].toString().split(',');\n                for (var _i = 0, tags_1 = tags; _i < tags_1.length; _i++) {\n                    var tag = tags_1[_i];\n                    cardTags.appendChild(createElement('div', {\n                        className: cls.CARD_TAG_CLASS + ' ' + cls.CARD_LABEL_CLASS, innerHTML: tag\n                    }));\n                }\n                cardElement.appendChild(cardTags);\n            }\n            if (this.parent.cardSettings.grabberField && data[this.parent.cardSettings.grabberField]) {\n                addClass([cardElement], cls.CARD_COLOR_CLASS);\n                cardElement.style.borderLeftColor = data[this.parent.cardSettings.grabberField];\n            }\n            if (this.parent.cardSettings.footerCssField) {\n                var cardFields = createElement('div', { className: cls.CARD_FOOTER_CLASS });\n                var keys = data[this.parent.cardSettings.footerCssField].split(',');\n                for (var _a = 0, keys_1 = keys; _a < keys_1.length; _a++) {\n                    var key = keys_1[_a];\n                    cardFields.appendChild(createElement('div', {\n                        className: key.trim() + ' ' + cls.CARD_FOOTER_CSS_CLASS\n                    }));\n                }\n                cardElement.appendChild(cardFields);\n            }\n        }\n        return cardElement;\n    };\n    LayoutRender.prototype.renderEmptyCard = function () {\n        var emptyCard = createElement('span', {\n            className: cls.EMPTY_CARD_CLASS,\n            innerHTML: this.parent.localeObj.getConstant('noCard')\n        });\n        return emptyCard;\n    };\n    LayoutRender.prototype.renderColGroup = function (table) {\n        var _this = this;\n        var colGroup = createElement('colgroup');\n        this.parent.columns.forEach(function (column) {\n            if (_this.isColumnVisible(column)) {\n                var index = _this.parent.actionModule.columnToggleArray.indexOf(column.keyField.toString());\n                var isToggle = column.allowToggle && !column.isExpanded;\n                var className = index === -1 ? (isToggle ? cls.COLLAPSED_CLASS : '') : cls.COLLAPSED_CLASS;\n                var col = createElement('col', {\n                    className: className,\n                    attrs: { 'data-key': column.keyField.toString() },\n                    styles: _this.parent.isAdaptive ? 'width: ' +\n                        (isToggle ? formatUnit(events.toggleWidth) : formatUnit(_this.getWidth())) : ''\n                });\n                colGroup.appendChild(col);\n            }\n        });\n        table.appendChild(colGroup);\n    };\n    LayoutRender.prototype.getRows = function () {\n        var _this = this;\n        var kanbanRows = [];\n        if (this.parent.swimlaneSettings.keyField) {\n            this.parent.kanbanData.map(function (obj) {\n                if (!_this.parent.swimlaneSettings.showEmptyRow) {\n                    if ((isNullOrUndefined(obj[_this.parent.keyField])) || (obj[_this.parent.keyField] === '') ||\n                        (obj[_this.parent.keyField] && _this.columnKeys.indexOf(obj[_this.parent.keyField].toString()) === -1)) {\n                        return;\n                    }\n                }\n                var textField = obj[_this.parent.swimlaneSettings.textField] || obj[_this.parent.swimlaneSettings.keyField];\n                var keyField = obj[_this.parent.swimlaneSettings.keyField];\n                if (!obj[_this.parent.swimlaneSettings.keyField]) {\n                    if (_this.parent.swimlaneSettings.showUnassignedRow) {\n                        textField = _this.parent.localeObj.getConstant('unassigned');\n                        keyField = '';\n                    }\n                    else {\n                        return;\n                    }\n                }\n                kanbanRows.push({ keyField: keyField, textField: textField });\n            });\n            kanbanRows = kanbanRows.filter(function (item, index, arr) {\n                return index === arr.map(function (item) { return item.keyField; }).indexOf(item.keyField);\n            });\n            kanbanRows = this.swimlaneSorting(kanbanRows);\n            kanbanRows.forEach(function (row) {\n                row.count = _this.parent.kanbanData.filter(function (obj) {\n                    return _this.columnKeys.indexOf(obj[_this.parent.keyField]) > -1 &&\n                        obj[_this.parent.swimlaneSettings.keyField] === row.keyField;\n                }).length;\n            });\n            if (kanbanRows.length === 0) {\n                kanbanRows.push({ keyField: '', textField: '' });\n            }\n        }\n        else {\n            kanbanRows.push({ keyField: '', textField: '' });\n        }\n        return kanbanRows;\n    };\n    LayoutRender.prototype.swimlaneSorting = function (rows) {\n        if (this.parent.swimlaneSettings.sortComparer) {\n            rows = this.parent.swimlaneSettings.sortComparer.call(this.parent, rows);\n        }\n        else {\n            rows.sort(function (a, b) { return a.textField.localeCompare(b.textField, undefined, { numeric: true }); });\n            if (this.parent.swimlaneSettings.sortDirection === 'Descending') {\n                rows.reverse();\n            }\n        }\n        return rows;\n    };\n    LayoutRender.prototype.createStackedRow = function (rows) {\n        var tr = createElement('tr', { className: cls.HEADER_ROW_CLASS + ' ' + cls.STACKED_HEADER_ROW_CLASS });\n        var stackedHeaders = [];\n        this.parent.columns.forEach(function (column) {\n            var headerText = '';\n            for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n                var row = rows_1[_i];\n                if (row.keyFields.indexOf(column.keyField.toString()) !== -1) {\n                    headerText = row.text;\n                }\n            }\n            stackedHeaders.push(headerText);\n        });\n        for (var h = 0; h < stackedHeaders.length; h++) {\n            var colSpan = 1;\n            for (var j = h + 1; j < stackedHeaders.length; j++) {\n                if ((stackedHeaders[h] !== '') && (stackedHeaders[j] !== '') && stackedHeaders[h] === stackedHeaders[j]) {\n                    colSpan++;\n                }\n                else {\n                    break;\n                }\n            }\n            var div = createElement('div', { className: cls.HEADER_TEXT_CLASS, innerHTML: stackedHeaders[h] });\n            var th = createElement('th', {\n                className: cls.HEADER_CELLS_CLASS + ' ' + cls.STACKED_HEADER_CELL_CLASS,\n                attrs: { 'colspan': colSpan.toString() }\n            });\n            tr.appendChild(th).appendChild(div);\n            h += colSpan - 1;\n        }\n        return tr;\n    };\n    LayoutRender.prototype.scrollUiUpdate = function () {\n        var _this = this;\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        var height = this.parent.element.offsetHeight - header.offsetHeight;\n        if (this.parent.isAdaptive) {\n            height = window.innerHeight - (header.offsetHeight + events.bottomSpace);\n            var swimlaneToolbar = this.parent.element.querySelector('.' + cls.SWIMLANE_HEADER_CLASS);\n            if (swimlaneToolbar) {\n                height -= swimlaneToolbar.offsetHeight;\n            }\n            var cardWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_CELLS_CLASS));\n            cardWrappers.forEach(function (cell) {\n                var cardWrapper = cell.querySelector('.' + cls.CARD_WRAPPER_CLASS);\n                if (!cardWrapper.classList.contains(cls.MULTI_CARD_WRAPPER_CLASS)) {\n                    cardWrapper.style.height = formatUnit(height);\n                    EventHandler.add(cell, 'touchmove', _this.onAdaptiveScroll, _this);\n                }\n            });\n        }\n        if (this.parent.height !== 'auto' && this.parent.height !== '100%') {\n            content.style.height = formatUnit(height);\n        }\n        [].slice.call(header.children).forEach(function (node) {\n            var paddingValue = 0;\n            if ((content.offsetWidth - content.clientWidth) > 0) {\n                paddingValue = 17;\n                if ((content.offsetHeight - content.clientHeight) > 0) {\n                    node.style.width = formatUnit(content.clientWidth);\n                }\n            }\n            if (_this.parent.enableRtl) {\n                node.style.paddingLeft = formatUnit(paddingValue);\n            }\n            else {\n                node.style.paddingRight = formatUnit(paddingValue);\n            }\n        });\n        this.updateScrollPosition();\n    };\n    LayoutRender.prototype.onContentScroll = function (e) {\n        var target = e.target;\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        [].slice.call(header.children).forEach(function (node) { node.scrollLeft = target.scrollLeft; });\n        this.parent.scrollPosition.content = { left: target.scrollLeft, top: target.scrollTop };\n        if (!isNullOrUndefined(this.parent.swimlaneSettings.keyField) && this.parent.swimlaneSettings.enableFrozenRows) {\n            this.frozenRows(e);\n        }\n    };\n    LayoutRender.prototype.addFrozenSwimlaneDataKey = function (currentElem) {\n        var frozenKey = currentElem.getAttribute('data-key');\n        if (!isNullOrUndefined(frozenKey)) {\n            this.frozenSwimlaneRow.setAttribute('data-key', frozenKey);\n        }\n    };\n    LayoutRender.prototype.frozenRows = function (e) {\n        var firstSwimlane = this.parent.element.querySelector('.' + cls.SWIMLANE_ROW_CLASS);\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        if (isNullOrUndefined(this.frozenSwimlaneRow)) {\n            this.frozenSwimlaneRow = createElement('div', { className: cls.FROZEN_SWIMLANE_ROW_CLASS });\n            var frozenRow = createElement('div', { className: cls.FROZEN_ROW_CLASS });\n            this.frozenSwimlaneRow.appendChild(frozenRow);\n            this.parent.element.insertBefore(this.frozenSwimlaneRow, this.parent.element.firstElementChild);\n            frozenRow.appendChild(firstSwimlane.querySelector('.' + cls.SWIMLANE_HEADER_CLASS).cloneNode(true));\n            this.addFrozenSwimlaneDataKey(firstSwimlane);\n            setStyleAttribute(this.frozenSwimlaneRow, { height: formatUnit(firstSwimlane.getBoundingClientRect().height),\n                width: formatUnit(content.querySelector('.e-swimlane').getBoundingClientRect().width),\n                top: formatUnit(header.getBoundingClientRect().height.toString())\n            });\n            setStyleAttribute(header, { position: 'relative', top: formatUnit((-this.frozenSwimlaneRow.getBoundingClientRect().height)) });\n            setStyleAttribute(content, { position: 'relative', top: formatUnit((-this.frozenSwimlaneRow.getBoundingClientRect().height)) });\n        }\n        else {\n            var swimlaneRows = [].slice.call(this.parent.element.querySelectorAll('.' + cls.SWIMLANE_ROW_CLASS));\n            var curSwim = swimlaneRows[this.frozenOrder];\n            var prevSwim = swimlaneRows[this.frozenOrder - 1];\n            var nextSwim = swimlaneRows[this.frozenOrder + 1];\n            var curSwimHeight = void 0;\n            var prevSwimHeight = void 0;\n            var nextSwimHeight = void 0;\n            if (curSwim) {\n                curSwimHeight = curSwim.getBoundingClientRect().top + curSwim.getBoundingClientRect().height;\n            }\n            if (prevSwim) {\n                prevSwimHeight = prevSwim.getBoundingClientRect().top + prevSwim.getBoundingClientRect().height;\n            }\n            if (nextSwim) {\n                nextSwimHeight = nextSwim.getBoundingClientRect().top + nextSwim.getBoundingClientRect().height;\n            }\n            var frozenSwimHeight = content.getBoundingClientRect().top + this.frozenSwimlaneRow.getBoundingClientRect().height;\n            var frozenRowsElement = this.frozenSwimlaneRow.querySelector('.' + cls.FROZEN_ROW_CLASS);\n            if (nextSwimHeight && frozenSwimHeight >= nextSwimHeight && this.frozenOrder < swimlaneRows.length - 1) {\n                if (frozenRowsElement) {\n                    remove(frozenRowsElement.querySelector('.' + cls.SWIMLANE_HEADER_CLASS));\n                    frozenRowsElement.appendChild(nextSwim.querySelector('.' + cls.SWIMLANE_HEADER_CLASS).cloneNode(true));\n                    this.addFrozenSwimlaneDataKey(nextSwim);\n                }\n                ++this.frozenOrder;\n            }\n            else if (prevSwimHeight && frozenSwimHeight < curSwimHeight && frozenSwimHeight > prevSwimHeight && this.frozenOrder > 0) {\n                if (frozenRowsElement) {\n                    remove(frozenRowsElement.querySelector('.' + cls.SWIMLANE_HEADER_CLASS));\n                    frozenRowsElement.appendChild(prevSwim.querySelector('.' + cls.SWIMLANE_HEADER_CLASS).cloneNode(true));\n                    this.addFrozenSwimlaneDataKey(prevSwim);\n                }\n                --this.frozenOrder;\n            }\n        }\n        if (e && e.target.scrollTop == 0) {\n            this.removeFrozenRows();\n        }\n    };\n    LayoutRender.prototype.removeFrozenRows = function () {\n        remove(this.frozenSwimlaneRow);\n        this.frozenSwimlaneRow = null;\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        setStyleAttribute(header, { position: '', top: '' });\n        setStyleAttribute(content, { position: '', top: '' });\n        this.parent.scrollPosition.content = { left: this.parent.scrollPosition.content.left, top: 0 };\n        content.scrollTop = 0;\n        this.frozenOrder = 0;\n    };\n    LayoutRender.prototype.onColumnScroll = function (e) {\n        var target = e.target;\n        if (target.offsetParent) {\n            var columnKey = target.offsetParent.getAttribute('data-key');\n            this.parent.scrollPosition.column[columnKey] = { left: target.scrollLeft, top: target.scrollTop };\n        }\n    };\n    LayoutRender.prototype.onAdaptiveScroll = function (e) {\n        if (this.parent.touchModule.tabHold && !this.parent.touchModule.mobilePopup) {\n            e.preventDefault();\n        }\n    };\n    /**\n     * Check column is visible or not.\n     *\n     * @param {ColumnsModel} column - specifies the column.\n     * @returns {boolean}\n     * @private\n     * @hidden\n     */\n    LayoutRender.prototype.isColumnVisible = function (column) {\n        var _this = this;\n        var isVisible = false;\n        var isNumeric = typeof column.keyField === 'number';\n        if (isNumeric) {\n            isVisible = this.parent.actionModule.hideColumnKeys.indexOf(column.keyField.toString()) === -1;\n        }\n        else {\n            column.keyField.split(',').forEach(function (key) { isVisible = _this.parent.actionModule.hideColumnKeys.indexOf(key) === -1; });\n        }\n        return isVisible;\n    };\n    LayoutRender.prototype.renderLimits = function (column, target) {\n        var limits = createElement('div', { className: cls.LIMITS_CLASS });\n        if (column.minCount) {\n            limits.appendChild(createElement('div', {\n                className: cls.MIN_COUNT_CLASS,\n                innerHTML: this.parent.localeObj.getConstant('min') + ': ' + column.minCount.toString()\n            }));\n        }\n        if (column.maxCount) {\n            limits.appendChild(createElement('div', {\n                className: cls.MAX_COUNT_CLASS,\n                innerHTML: this.parent.localeObj.getConstant('max') + ': ' + column.maxCount.toString()\n            }));\n        }\n        if (limits.childElementCount > 0) {\n            if (target.querySelector('.' + cls.CARD_WRAPPER_CLASS)) {\n                target.insertBefore(limits, target.firstElementChild);\n            }\n            else {\n                target.appendChild(limits);\n            }\n        }\n    };\n    LayoutRender.prototype.renderValidation = function () {\n        var _this = this;\n        this.parent.columns.forEach(function (column) {\n            if (!column.minCount && !column.maxCount) {\n                return;\n            }\n            var cardData = _this.columnData[column.keyField];\n            var keySelector = \"[data-key=\\\"\" + column.keyField + \"\\\"]\";\n            var headerCell = _this.parent.element.querySelector(\".\" + (cls.HEADER_CELLS_CLASS + keySelector));\n            var rowCells = [].slice.call(_this.parent.element.querySelectorAll(\".\" + (cls.CONTENT_CELLS_CLASS + keySelector)));\n            if (_this.parent.constraintType === 'Swimlane' && _this.parent.swimlaneSettings.keyField) {\n                _this.swimlaneRow.forEach(function (row, index) {\n                    _this.renderLimits(column, rowCells[index]);\n                    var rowCards = cardData.filter(function (card) {\n                        return card[_this.parent.swimlaneSettings.keyField] === row.keyField;\n                    });\n                    var colorClass = _this.getValidationClass(column, rowCards.length);\n                    if (colorClass) {\n                        addClass([rowCells[index]], colorClass);\n                    }\n                });\n            }\n            else {\n                _this.renderLimits(column, headerCell);\n                var colorClass = _this.getValidationClass(column, cardData.length);\n                if (colorClass) {\n                    addClass(rowCells.concat(headerCell), colorClass);\n                }\n            }\n        });\n    };\n    LayoutRender.prototype.getValidationClass = function (column, count) {\n        var colorClass;\n        if (column.maxCount && count > column.maxCount) {\n            colorClass = cls.MAX_COLOR_CLASS;\n        }\n        else if (column.minCount && count < column.minCount) {\n            colorClass = cls.MIN_COLOR_CLASS;\n        }\n        return colorClass;\n    };\n    LayoutRender.prototype.refreshValidation = function () {\n        var validations = [].slice.call(this.parent.element.querySelectorAll('.' + cls.LIMITS_CLASS));\n        validations.forEach(function (node) { remove(node); });\n        var minClass = [].slice.call(this.parent.element.querySelectorAll('.' + cls.MIN_COLOR_CLASS));\n        removeClass(minClass, cls.MIN_COLOR_CLASS);\n        var maxClass = [].slice.call(this.parent.element.querySelectorAll('.' + cls.MAX_COLOR_CLASS));\n        removeClass(maxClass, cls.MAX_COLOR_CLASS);\n        this.renderValidation();\n    };\n    LayoutRender.prototype.getColumnData = function (columnValue, dataSource) {\n        var _this = this;\n        if (dataSource === void 0) { dataSource = this.parent.kanbanData; }\n        var cardData = [];\n        var isNumeric = typeof columnValue === 'number';\n        if (isNumeric) {\n            var keyData = dataSource.filter(function (cardObj) {\n                return cardObj[_this.parent.keyField] === columnValue;\n            });\n            cardData = cardData.concat(keyData);\n        }\n        else {\n            var columnKeys = columnValue.split(',');\n            var _loop_4 = function (key) {\n                var keyData = dataSource.filter(function (cardObj) {\n                    return cardObj[_this.parent.keyField] === key.trim();\n                });\n                cardData = cardData.concat(keyData);\n            };\n            for (var _i = 0, columnKeys_1 = columnKeys; _i < columnKeys_1.length; _i++) {\n                var key = columnKeys_1[_i];\n                _loop_4(key);\n            }\n        }\n        this.sortCategory(cardData);\n        return cardData;\n    };\n    LayoutRender.prototype.sortCategory = function (cardData) {\n        var key = this.parent.cardSettings.headerField;\n        var direction = this.parent.sortSettings.direction;\n        switch (this.parent.sortSettings.sortBy) {\n            case 'DataSourceOrder':\n                this.sortOrder(key, direction, cardData);\n                break;\n            case 'Custom':\n            case 'Index':\n                if (this.parent.sortSettings.field) {\n                    key = this.parent.sortSettings.field;\n                }\n                this.sortOrder(key, direction, cardData);\n                break;\n        }\n        return cardData;\n    };\n    LayoutRender.prototype.sortOrder = function (key, direction, cardData) {\n        var isNumeric = true;\n        if (this.parent.kanbanData.length > 0) {\n            isNumeric = typeof (this.parent.kanbanData[0])[key] === 'number';\n        }\n        if (!isNumeric && this.parent.sortSettings.sortBy === 'Index') {\n            return cardData;\n        }\n        var first;\n        var second;\n        cardData = cardData.sort(function (firstData, secondData) {\n            if (!isNumeric) {\n                first = firstData[key].toLowerCase();\n                second = secondData[key].toLowerCase();\n            }\n            else {\n                first = firstData[key];\n                second = secondData[key];\n            }\n            return (first > second) ? 1 : ((second > first) ? -1 : 0);\n        });\n        if (direction === 'Descending') {\n            cardData.reverse();\n        }\n        return cardData;\n    };\n    LayoutRender.prototype.documentClick = function (args) {\n        if (args.target.classList.contains(cls.SWIMLANE_OVERLAY_CLASS) &&\n            this.parent.element.querySelector('.' + cls.SWIMLANE_RESOURCE_CLASS).classList.contains('e-popup-open')) {\n            this.treePopup.hide();\n            removeClass([this.popupOverlay], 'e-enable');\n        }\n        if (closest(args.target, \".\" + cls.ROOT_CLASS)) {\n            return;\n        }\n        var cards = [].slice.call(this.parent.element.querySelectorAll(\".\" + cls.CARD_CLASS + \".\" + cls.CARD_SELECTION_CLASS));\n        removeClass(cards, cls.CARD_SELECTION_CLASS);\n        this.disableAttributeSelection(cards);\n    };\n    LayoutRender.prototype.disableAttributeSelection = function (cards) {\n        if (cards instanceof Element) {\n            cards.setAttribute('aria-selected', 'false');\n        }\n        else {\n            cards.forEach(function (card) { card.setAttribute('aria-selected', 'false'); });\n        }\n    };\n    LayoutRender.prototype.getColumnCards = function (data) {\n        var _this = this;\n        var columnData = {};\n        this.columnKeys = [];\n        this.parent.columns.forEach(function (column) {\n            var isNumeric = typeof column.keyField === 'number';\n            if (isNumeric) {\n                _this.columnKeys = _this.columnKeys.concat(column.keyField.toString());\n            }\n            else {\n                _this.columnKeys = _this.columnKeys.concat(column.keyField.split(',').map(function (e) { return e.trim(); }));\n            }\n            var cardData = _this.getColumnData(column.keyField, data);\n            columnData[column.keyField] = cardData;\n        });\n        return columnData;\n    };\n    LayoutRender.prototype.getSwimlaneCards = function () {\n        var _this = this;\n        var swimlaneData = {};\n        if (this.parent.swimlaneSettings.keyField) {\n            this.kanbanRows.forEach(function (row) {\n                return swimlaneData[row.keyField] = _this.parent.kanbanData.filter(function (obj) {\n                    return !isNullOrUndefined(obj[_this.parent.keyField]) && _this.columnKeys.indexOf(obj[_this.parent.keyField].toString()) > -1 &&\n                        ((!obj[_this.parent.swimlaneSettings.keyField] && _this.parent.swimlaneSettings.showUnassignedRow) ?\n                            '' : obj[_this.parent.swimlaneSettings.keyField]) === row.keyField;\n                });\n            });\n        }\n        return swimlaneData;\n    };\n    LayoutRender.prototype.refreshHeaders = function () {\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        [].slice.call(header.children).forEach(function (child) { return remove(child); });\n        this.renderHeader(header);\n    };\n    LayoutRender.prototype.refreshCards = function () {\n        this.parent.resetTemplates(['cardTemplate']);\n        var cards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_WRAPPER_CLASS));\n        cards.forEach(function (card) { return remove(card); });\n        this.renderCards();\n        this.wireDragEvent();\n        this.parent.renderTemplates();\n    };\n    LayoutRender.prototype.refresh = function () {\n        var _this = this;\n        var isColumnTemplateRefreshed = false;\n        this.parent.columns.forEach(function (column) {\n            if (column.showItemCount) {\n                if (column && column.template && !isColumnTemplateRefreshed) {\n                    _this.refreshHeaders();\n                    isColumnTemplateRefreshed = true;\n                }\n                var countSelector = \".\" + cls.HEADER_CELLS_CLASS + \"[data-key=\\\"\" + column.keyField + \"\\\"] .\" + cls.CARD_ITEM_COUNT_CLASS;\n                var itemCount = _this.parent.element.querySelector(countSelector);\n                if (itemCount) {\n                    var isNumeric = typeof column.keyField === 'number';\n                    var cardLength = 0;\n                    if (isNumeric) {\n                        cardLength = ([].slice.call(_this.parent.element.querySelectorAll('.' + cls.CARD_CLASS + '[data-key=\\\"' + column.keyField + '\\\"]'))).length;\n                    }\n                    else {\n                        var keys = column.keyField.split(',');\n                        for (var _i = 0, keys_2 = keys; _i < keys_2.length; _i++) {\n                            var key = keys_2[_i];\n                            var cards = [].slice.call(_this.parent.element.querySelectorAll('.' + cls.CARD_CLASS + '[data-key=\\\"' + key.trim() + '\\\"]'));\n                            cardLength = cards.length + cardLength;\n                        }\n                    }\n                    itemCount.innerHTML = '- ' + cardLength + ' ' + _this.parent.localeObj.getConstant('items');\n                }\n            }\n        });\n        if (this.parent.swimlaneSettings.keyField) {\n            var swimlaneRows = [].slice.call(this.parent.element.querySelectorAll(\".\" + cls.SWIMLANE_ROW_CLASS));\n            swimlaneRows.forEach(function (swimlane) {\n                var swimlaneKey = swimlane.getAttribute('data-key');\n                var itemCount = swimlane.querySelector(\".\" + cls.CARD_ITEM_COUNT_CLASS);\n                if (itemCount && swimlaneKey) {\n                    var cards = [].slice.call(swimlane.nextElementSibling.querySelectorAll('.' + cls.CARD_CLASS));\n                    itemCount.innerHTML = '- ' + cards.length + ' ' + _this.parent.localeObj.getConstant('items');\n                }\n            });\n        }\n        this.refreshValidation();\n    };\n    LayoutRender.prototype.updateScrollPosition = function () {\n        var _this = this;\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        if (content) {\n            content.scrollTo(this.parent.scrollPosition.content.left, this.parent.scrollPosition.content.top);\n        }\n        var cardWrapper = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_WRAPPER_CLASS));\n        cardWrapper.forEach(function (wrapper) {\n            if (wrapper.offsetParent) {\n                var scrollData = _this.parent.scrollPosition.column[wrapper.offsetParent.getAttribute('data-key')];\n                if (scrollData) {\n                    wrapper.scrollTo(scrollData.left, scrollData.top);\n                }\n            }\n        });\n    };\n    LayoutRender.prototype.renderCardBasedOnIndex = function (data, index) {\n        var _this = this;\n        var key = data[this.parent.keyField];\n        var cardRow = this.parent.element.querySelector('.e-content-row:not(.e-swimlane-row)');\n        if (this.parent.swimlaneSettings.keyField && !this.parent.isAdaptive) {\n            var rowSelector = \".e-content-row.e-swimlane-row[data-key=\\\"\" + data[this.parent.swimlaneSettings.keyField] + \"\\\"]\";\n            if (this.parent.element.querySelector(rowSelector)) {\n                cardRow = this.parent.element.querySelector(rowSelector).nextElementSibling;\n            }\n            else {\n                var columnIndex = this.columnKeys.indexOf(key);\n                if (columnIndex !== -1 && this.parent.actionModule.hideColumnKeys.indexOf(key) === -1) {\n                    var index_1 = this.kanbanRows.findIndex(function (rowData) { return rowData['keyField'] === data[_this.parent.swimlaneSettings.keyField]; });\n                    var swim = [].slice.call(this.parent.element.querySelectorAll('.e-swimlane-row'));\n                    var swimRow = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS + ' tbody');\n                    if (swim[index_1]) {\n                        swimRow = swim[index_1];\n                    }\n                    this.renderSwimlaneRow(swimRow, this.kanbanRows[index_1], false);\n                    this.renderSingleContent(swimRow, this.kanbanRows[index_1], false);\n                }\n                cardRow = this.parent.element.querySelector(rowSelector).nextElementSibling;\n                [].slice.call(cardRow.children).forEach(function (cell) {\n                    var cardWrapper = createElement('div', { className: cls.CARD_WRAPPER_CLASS });\n                    cell.appendChild(cardWrapper);\n                    cardWrapper.appendChild(_this.renderEmptyCard());\n                });\n            }\n        }\n        if (this.parent.sortSettings.sortBy !== 'Index') {\n            var field_1 = this.parent.cardSettings.headerField;\n            if (this.parent.sortSettings.sortBy === 'Custom') {\n                field_1 = this.parent.sortSettings.field;\n            }\n            if (isNullOrUndefined(this.parent.swimlaneSettings.keyField)) {\n                index = this.getColumnData(key, this.parent.kanbanData).findIndex(function (colData) {\n                    return colData[field_1] === data[field_1];\n                });\n            }\n            else {\n                var swimlaneDatas = this.parent.getSwimlaneData(data[this.parent.swimlaneSettings.keyField]);\n                index = this.getColumnData(key, swimlaneDatas).findIndex(function (colData) { return colData[field_1] === data[field_1]; });\n            }\n        }\n        else if (this.parent.sortSettings.sortBy === 'Index' &&\n            this.parent.sortSettings.field && this.parent.sortSettings.direction === 'Ascending') {\n            index = data[this.parent.sortSettings.field] - 1;\n        }\n        if (cardRow) {\n            var td = [].slice.call(cardRow.children).filter(function (e) {\n                return e.getAttribute('data-key').replace(/\\s/g, '').split(',').indexOf(key.toString().replace(/\\s/g, '')) !== -1;\n            })[0];\n            var cardWrapper_2 = td.querySelector('.' + cls.CARD_WRAPPER_CLASS);\n            var emptyCard = cardWrapper_2.querySelector('.' + cls.EMPTY_CARD_CLASS);\n            if (emptyCard) {\n                remove(emptyCard);\n            }\n            var cardElement_1 = this.renderCard(data);\n            if (this.parent.allowDragAndDrop && td.classList.contains(cls.DRAG_CLASS)) {\n                this.parent.dragAndDropModule.wireDragEvents(cardElement_1);\n                addClass([cardElement_1], cls.DROPPABLE_CLASS);\n            }\n            var args = { data: data, element: cardElement_1, cancel: false };\n            this.parent.trigger(events.cardRendered, args, function (cardArgs) {\n                if (!cardArgs.cancel) {\n                    if (isNullOrUndefined(index) || cardWrapper_2.children.length === 0) {\n                        cardWrapper_2.appendChild(cardElement_1);\n                    }\n                    else {\n                        cardWrapper_2.insertBefore(cardElement_1, cardWrapper_2.childNodes[index]);\n                    }\n                }\n            });\n        }\n    };\n    LayoutRender.prototype.removeCard = function (data) {\n        var cardKey = data[this.parent.cardSettings.headerField];\n        var cardElement = this.parent.element.querySelector(\".\" + cls.CARD_CLASS + \"[data-id=\\\"\" + cardKey + \"\\\"]\");\n        this.isSelectedCard = cardElement.classList.contains(cls.CARD_SELECTION_CLASS) ? true : false;\n        var cardContainer = cardElement.parentElement;\n        if (cardElement) {\n            remove(cardElement);\n        }\n        if (cardContainer.querySelectorAll('.' + cls.CARD_CLASS + ':not(.' + cls.CLONED_CARD_CLASS + ')').length === 0) {\n            cardContainer.appendChild(this.renderEmptyCard());\n        }\n    };\n    LayoutRender.prototype.wireEvents = function () {\n        var _this = this;\n        EventHandler.add(this.parent.element, 'click', this.parent.actionModule.clickHandler, this.parent.actionModule);\n        EventHandler.add(this.parent.element, 'dblclick', this.parent.actionModule.doubleClickHandler, this.parent.actionModule);\n        EventHandler.add(document, Browser.touchStartEvent, this.documentClick, this);\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        EventHandler.add(content, 'scroll', this.onContentScroll, this);\n        var cardWrapper = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_WRAPPER_CLASS));\n        cardWrapper.forEach(function (wrapper) {\n            if (_this.parent.isInitialRender && wrapper.offsetParent) {\n                _this.parent.scrollPosition.column[wrapper.offsetParent.getAttribute('data-key')] = { left: 0, top: 0 };\n            }\n            EventHandler.add(wrapper, 'scroll', _this.onColumnScroll, _this);\n        });\n        if (this.parent.isAdaptive) {\n            this.parent.touchModule.wireTouchEvents();\n            content.scrollLeft = this.scrollLeft;\n        }\n        this.wireDragEvent();\n    };\n    LayoutRender.prototype.unWireEvents = function () {\n        var _this = this;\n        EventHandler.remove(this.parent.element, 'click', this.parent.actionModule.clickHandler);\n        EventHandler.remove(this.parent.element, 'dblclick', this.parent.actionModule.doubleClickHandler);\n        EventHandler.remove(document, Browser.touchStartEvent, this.documentClick);\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        if (content) {\n            EventHandler.remove(content, 'scroll', this.onContentScroll);\n            if (this.parent.allowDragAndDrop) {\n                this.unWireDragEvent();\n            }\n        }\n        var cardWrapper = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_WRAPPER_CLASS));\n        cardWrapper.forEach(function (wrapper) { EventHandler.remove(wrapper, 'scroll', _this.onColumnScroll); });\n        if (this.parent.isAdaptive) {\n            this.parent.touchModule.unWireTouchEvents();\n        }\n    };\n    LayoutRender.prototype.wireDragEvent = function () {\n        var _this = this;\n        if (this.parent.allowDragAndDrop) {\n            var cards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_CELLS_CLASS\n                + '.' + cls.DRAG_CLASS + ' .' + cls.CARD_CLASS));\n            addClass(cards, cls.DROPPABLE_CLASS);\n            cards.forEach(function (card) { return _this.parent.dragAndDropModule.wireDragEvents(card); });\n        }\n    };\n    LayoutRender.prototype.unWireDragEvent = function () {\n        var _this = this;\n        var cards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_CELLS_CLASS\n            + '.' + cls.DRAG_CLASS + ' .' + cls.CARD_CLASS));\n        removeClass(cards, cls.DROPPABLE_CLASS);\n        cards.forEach(function (card) { return _this.parent.dragAndDropModule.unWireDragEvents(card); });\n    };\n    LayoutRender.prototype.destroy = function () {\n        this.parent.resetTemplates();\n        this.parent.off(events.dataReady, this.initRender);\n        this.parent.off(events.contentReady, this.scrollUiUpdate);\n        this.unWireEvents();\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        if (header) {\n            remove(header);\n        }\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        if (content) {\n            remove(content);\n        }\n        if (this.treeViewObj) {\n            this.treeViewObj.destroy();\n            this.treeViewObj = null;\n        }\n        if (this.treePopup) {\n            this.treePopup.destroy();\n            this.treePopup = null;\n        }\n        var swimlaneToolBarEle = this.parent.element.querySelector('.' + cls.SWIMLANE_HEADER_CLASS);\n        if (swimlaneToolBarEle) {\n            remove(swimlaneToolBarEle);\n        }\n        var swimlaneContent = this.parent.element.querySelector('.' + cls.SWIMLANE_CONTENT_CLASS);\n        if (swimlaneContent) {\n            remove(swimlaneContent);\n        }\n    };\n    return LayoutRender;\n}(MobileLayout));\nexport { LayoutRender };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}