{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n\nimport { addClass, append, createElement, extend, remove, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, EventHandler } from '@syncfusion/ej2-base';\nimport { TimelineEvent } from './timeline-view';\nimport * as util from '../base/util';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\nvar EVENT_GAP = 2;\n/**\n * Year view events render\n */\n\nvar YearEvent =\n/** @class */\nfunction (_super) {\n  __extends(YearEvent, _super);\n\n  function YearEvent(parent) {\n    var _this = _super.call(this, parent, 'day') || this;\n\n    _this.isResource = false;\n    return _this;\n  }\n\n  YearEvent.prototype.renderAppointments = function () {\n    if (this.parent.dragAndDropModule) {\n      this.parent.dragAndDropModule.setDragArea();\n    }\n\n    this.fields = this.parent.eventFields;\n    var elementSelector = this.parent.currentView === 'Year' ? '.' + cls.APPOINTMENT_CLASS : '.' + cls.APPOINTMENT_WRAPPER_CLASS + ',.' + cls.MORE_INDICATOR_CLASS;\n    var eventWrappers = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n\n    for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {\n      var wrapper = eventWrappers_1[_i];\n      remove(wrapper);\n    }\n\n    this.renderedEvents = [];\n\n    if (this.parent.currentView === 'Year') {\n      this.yearViewEvents();\n    } else {\n      this.removeCellHeight();\n\n      if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n        this.isResource = true;\n        this.timelineResourceEvents();\n      } else {\n        this.timelineYearViewEvents();\n      }\n    }\n\n    this.parent.renderTemplates();\n    this.parent.notify(events.contentReady, {});\n  };\n\n  YearEvent.prototype.yearViewEvents = function () {\n    var months = this.getMonths();\n\n    for (var _i = 0, months_1 = months; _i < months_1.length; _i++) {\n      var month = months_1[_i];\n      var queryString = \".e-month-calendar:nth-child(\" + (months.indexOf(month) + 1) + \") td.e-work-cells\";\n      var workCells = [].slice.call(this.parent.element.querySelectorAll(queryString));\n      var monthDate = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n      var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n      var monthEnd = this.parent.calendarUtil.getMonthEndDate(new Date(monthDate.getTime()));\n      var startDate = util.getWeekFirstDate(monthStart, this.parent.firstDayOfWeek);\n      var endDate = util.addDays(util.getWeekLastDate(monthEnd, this.parent.firstDayOfWeek), 1);\n\n      for (var index = 0; startDate.getTime() < endDate.getTime(); index++) {\n        var start = util.resetTime(new Date(startDate.getTime()));\n        var end = util.addDays(new Date(start.getTime()), 1);\n        var filterEvents = this.parent.eventBase.filterEvents(start, end);\n\n        if (filterEvents.length > 0) {\n          var workCell = workCells[index];\n\n          if (workCell) {\n            workCell.appendChild(createElement('div', {\n              className: cls.APPOINTMENT_CLASS\n            }));\n          }\n        }\n\n        startDate = util.addDays(new Date(startDate.getTime()), 1);\n      }\n    }\n  };\n\n  YearEvent.prototype.timelineYearViewEvents = function () {\n    var workCell = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\n    this.cellWidth = workCell.offsetWidth;\n    this.cellHeader = util.getOuterHeight(workCell.querySelector('.' + cls.DATE_HEADER_CLASS));\n    var eventTable = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n    this.eventHeight = util.getElementHeightFromClass(eventTable, cls.APPOINTMENT_CLASS);\n    var wrapperCollection = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n    var months = this.getMonths();\n\n    for (var row = 0; row < months.length; row++) {\n      var wrapper = wrapperCollection[row];\n      var td = row + 1;\n      var eventWrapper = createElement('div', {\n        className: cls.APPOINTMENT_WRAPPER_CLASS\n      });\n      wrapper.appendChild(eventWrapper);\n      var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[row], 1);\n      var monthEnd = new Date(monthStart.getFullYear(), monthStart.getMonth() + 1, 0);\n      var dayIndex = monthStart.getDay();\n      var isSpannedCollection = [];\n\n      if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n        this.renderedEvents = [];\n      }\n\n      while (monthStart.getTime() <= monthEnd.getTime()) {\n        var leftValue = void 0;\n        var rightValue = void 0;\n\n        if (this.parent.activeViewOptions.orientation === 'Vertical') {\n          var wrapper_1 = wrapperCollection[dayIndex];\n          td = dayIndex + 1;\n          var eventWrapper_1 = wrapper_1.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n\n          if (!eventWrapper_1) {\n            eventWrapper_1 = createElement('div', {\n              className: cls.APPOINTMENT_WRAPPER_CLASS\n            });\n            wrapper_1.appendChild(eventWrapper_1);\n          }\n\n          if (this.parent.enableRtl) {\n            rightValue = row * this.cellWidth;\n          } else {\n            leftValue = row * this.cellWidth;\n          }\n        } else {\n          if (this.parent.enableRtl) {\n            rightValue = (dayIndex + monthStart.getDate() - 1) * this.cellWidth;\n          } else {\n            leftValue = (dayIndex + monthStart.getDate() - 1) * this.cellWidth;\n          }\n        }\n\n        var rowTd = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + td + \") td\");\n        this.cellHeight = rowTd.offsetHeight;\n        var dayStart = util.resetTime(new Date(monthStart.getTime()));\n        var dayEnd = util.addDays(new Date(dayStart.getTime()), 1);\n        var resource = void 0;\n\n        if (this.parent.uiStateValues.isGroupAdaptive) {\n          resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n        }\n\n        var dayEvents = this.parent.eventBase.filterEvents(dayStart, dayEnd, undefined, resource);\n        dayEvents = this.parent.eventBase.sortByDateTime(dayEvents);\n\n        var _loop_1 = function (index, count) {\n          var eventData = extend({}, dayEvents[index], null, true);\n          this_1.updateSpannedEvents(eventData, dayStart, dayEnd);\n          var overlapIndex = this_1.getIndex(dayStart);\n          eventData.Index = overlapIndex;\n          var availedHeight = this_1.cellHeader + this_1.eventHeight * (overlapIndex + 1) + EVENT_GAP + this_1.moreIndicatorHeight;\n          var appArea = this_1.cellHeight - this_1.cellHeader - this_1.moreIndicatorHeight;\n          var renderedAppCount = Math.floor(appArea / (this_1.eventHeight + EVENT_GAP));\n          var moreIndicatorCount = count - renderedAppCount <= 0 ? 1 : count - renderedAppCount;\n\n          if (this_1.parent.activeViewOptions.orientation === 'Horizontal') {\n            var isRendered = this_1.renderedEvents.filter(function (eventObj) {\n              return eventObj.Guid === eventData.Guid;\n            });\n            var isSpanned = isSpannedCollection.filter(function (eventObj) {\n              return eventObj.Guid === eventData.Guid;\n            });\n\n            if (isRendered.length > 0 && isRendered[0].MoreIndicator || isSpanned.length > 0 && isSpanned[0].MoreIndicator) {\n              var moreIndex = this_1.parent.activeViewOptions.orientation === 'Horizontal' ? row : dayIndex;\n              this_1.renderMoreIndicator(eventWrapper, moreIndicatorCount, dayStart, moreIndex, leftValue, rightValue);\n              return \"continue\";\n            } else if (isRendered.length > 0 || isSpanned.length > 0) {\n              return \"continue\";\n            }\n          }\n\n          var isRowAutoHeight = this_1.parent.rowAutoHeight && this_1.parent.activeViewOptions.orientation === 'Horizontal';\n\n          if (isRowAutoHeight || this_1.cellHeight > availedHeight) {\n            this_1.renderEvent(eventWrapper, eventData, row, leftValue, rightValue, monthStart, dayIndex);\n            this_1.updateCellHeight(rowTd, availedHeight);\n            isSpannedCollection.push(eventData);\n          } else {\n            var moreIndex = this_1.parent.activeViewOptions.orientation === 'Horizontal' ? row : dayIndex;\n            this_1.renderMoreIndicator(eventWrapper, moreIndicatorCount, dayStart, moreIndex, leftValue, rightValue);\n\n            if (this_1.parent.activeViewOptions.orientation === 'Horizontal') {\n              eventData.MoreIndicator = true;\n              this_1.renderedEvents.push(eventData);\n              isSpannedCollection.push(eventData);\n            }\n          }\n        };\n\n        var this_1 = this;\n\n        for (var index = 0, count = dayEvents.length; index < count; index++) {\n          _loop_1(index, count);\n        }\n\n        monthStart = util.addDays(new Date(monthStart.getTime()), 1);\n\n        if (this.parent.activeViewOptions.orientation === 'Vertical') {\n          dayIndex++;\n          this.renderedEvents = [];\n        }\n      }\n    }\n  };\n\n  YearEvent.prototype.updateSpannedEvents = function (eventObj, dayStart, dayEnd) {\n    var isLeftRightResize = this.isResource && this.parent.activeViewOptions.orientation === 'Vertical' || !this.isResource && this.parent.activeViewOptions.orientation === 'Horizontal';\n    var data = {\n      isLeft: true,\n      isRight: true,\n      isBottom: true,\n      isTop: true\n    };\n\n    if (dayStart.getTime() <= eventObj[this.fields.startTime].getTime()) {\n      if (isLeftRightResize) {\n        data.isLeft = false;\n      } else {\n        data.isTop = false;\n      }\n    }\n\n    if (dayEnd.getTime() >= eventObj[this.fields.endTime].getTime() || isLeftRightResize && !this.isResource && util.addDays(dayEnd, -1).getMonth() === eventObj[this.fields.endTime].getMonth()) {\n      if (isLeftRightResize) {\n        data.isRight = false;\n      } else {\n        data.isBottom = false;\n      }\n    }\n\n    eventObj.data = data;\n  };\n\n  YearEvent.prototype.timelineResourceEvents = function () {\n    var workCell = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\n    this.cellWidth = workCell.offsetWidth;\n    this.cellHeader = 0;\n    var eventTable = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n    this.eventHeight = util.getElementHeightFromClass(eventTable, cls.APPOINTMENT_CLASS);\n    var wrapperCollection = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n    var resources = this.parent.uiStateValues.isGroupAdaptive ? [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] : this.parent.resourceBase.lastResourceLevel;\n    var months = this.getMonths();\n\n    if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n      for (var month = 0; month < months.length; month++) {\n        var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[month], 1);\n\n        for (var i = 0, len = resources.length; i < len; i++) {\n          this.renderedEvents = [];\n          this.renderResourceEvent(wrapperCollection[month], resources[i], month, i, monthStart);\n        }\n      }\n    } else {\n      for (var i = 0, len = resources.length; i < len; i++) {\n        this.renderedEvents = [];\n\n        for (var month = 0; month < months.length; month++) {\n          var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[month], 1);\n          this.renderResourceEvent(wrapperCollection[i], resources[i], month, i, monthStart);\n        }\n      }\n    }\n  };\n\n  YearEvent.prototype.renderResourceEvent = function (wrapper, resource, month, index, monthStart) {\n    var eventWrapper = createElement('div', {\n      className: cls.APPOINTMENT_WRAPPER_CLASS\n    });\n    wrapper.appendChild(eventWrapper);\n    var monthEnd = util.addDays(util.lastDateOfMonth(new Date(monthStart.getTime())), 1);\n    var eventDatas = this.parent.eventBase.filterEvents(monthStart, monthEnd, undefined, resource);\n    var rowIndex = this.parent.activeViewOptions.orientation === 'Vertical' ? index : month;\n    var td = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + (rowIndex + 1) + \") td\");\n    this.cellHeight = td.offsetHeight;\n    this.groupOrder = resource.groupOrder;\n\n    for (var a = 0; a < eventDatas.length; a++) {\n      var data = eventDatas[a];\n      var overlapIndex = void 0;\n      var eventData = extend({}, data, null, true);\n\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        var eventObj = this.isSpannedEvent(eventData, monthStart);\n        overlapIndex = this.getIndex(eventObj[this.fields.startTime]);\n        eventData.Index = overlapIndex;\n      } else {\n        overlapIndex = this.getIndex(eventData[this.fields.startTime]);\n        eventData.Index = overlapIndex;\n      }\n\n      var availedHeight = this.cellHeader + this.eventHeight * (a + 1) + EVENT_GAP + this.moreIndicatorHeight;\n      var leftValue = this.parent.activeViewOptions.orientation === 'Vertical' ? month * this.cellWidth : index * this.cellWidth;\n\n      if (this.parent.rowAutoHeight || this.cellHeight > availedHeight) {\n        this.renderEvent(eventWrapper, eventData, month, leftValue, leftValue, monthStart, index);\n        this.updateCellHeight(td, availedHeight);\n      } else {\n        var moreIndex = this.parent.activeViewOptions.orientation === 'Horizontal' ? month : index;\n        this.renderMoreIndicator(eventWrapper, eventDatas.length - a, monthStart, moreIndex, leftValue, leftValue, index);\n\n        if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n          for (var i = index; i < eventDatas.length; i++) {\n            this.renderedEvents.push(extend({}, eventDatas[i], {\n              Index: overlapIndex + i\n            }, true));\n          }\n        }\n\n        break;\n      }\n    }\n  }; // eslint-disable-next-line max-len\n\n\n  YearEvent.prototype.renderEvent = function (wrapper, eventData, row, left, right, monthDate, rowIndex) {\n    var _this = this;\n\n    var eventObj = this.isSpannedEvent(eventData, monthDate);\n    var wrap = this.createEventElement(eventObj);\n    var width;\n    var index;\n\n    if (eventObj.isSpanned.count === 1) {\n      var endTime = util.addDays(eventObj[this.fields.endTime], -1);\n      eventObj[this.fields.endTime] = endTime > eventObj[this.fields.startTime] ? endTime : eventObj[this.fields.endTime];\n    }\n\n    if (eventObj[this.fields.startTime] > eventObj[this.fields.endTime]) {\n      return;\n    }\n\n    if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n      index = row + 1;\n\n      if (eventObj[this.fields.startTime].getTime() === eventObj[this.fields.endTime].getTime()) {\n        eventObj.isSpanned.count = 1;\n      }\n\n      width = eventObj.isSpanned.count * this.cellWidth;\n    } else {\n      index = rowIndex + 1;\n      width = this.cellWidth;\n    }\n\n    var rowTd = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + index + \") td\");\n    var top = rowTd.offsetTop + this.cellHeader + this.eventHeight * eventObj.Index + EVENT_GAP;\n    setStyleAttribute(wrap, {\n      'width': width + 'px',\n      'height': this.eventHeight + 'px',\n      'left': left + 'px',\n      'right': right + 'px',\n      'top': top + 'px'\n    });\n    var args = {\n      data: eventObj,\n      element: wrap,\n      cancel: false,\n      type: 'event'\n    };\n    this.parent.trigger(events.eventRendered, args, function (eventArgs) {\n      if (!eventArgs.cancel) {\n        wrapper.appendChild(wrap);\n\n        _this.wireAppointmentEvents(wrap, eventObj);\n\n        if (_this.parent.activeViewOptions.group.resources.length > 0) {\n          _this.renderedEvents.push(extend({}, eventObj, null, true));\n        } else if (_this.parent.activeViewOptions.orientation === 'Vertical') {\n          _this.renderedEvents.push(extend({}, eventObj, null, true));\n        } else if ((eventObj.isSpanned.isRight || eventObj.isSpanned.isLeft) && _this.parent.activeViewOptions.orientation === 'Horizontal' || !eventObj.isSpanned.isRight) {\n          _this.renderedEvents.push(extend({}, eventObj, null, true));\n        }\n      }\n    });\n  }; // eslint-disable-next-line max-len\n\n\n  YearEvent.prototype.renderMoreIndicator = function (wrapper, count, startDate, row, left, right, index) {\n    if (this.parent.activeViewOptions.group.resources.length === 0 && wrapper.querySelector('[data-start-date=\"' + startDate.getTime() + '\"]')) {\n      return;\n    }\n\n    var endDate;\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      endDate = util.addDays(util.lastDateOfMonth(new Date(startDate.getTime())), 1);\n    } else {\n      endDate = util.addDays(new Date(startDate.getTime()), 1);\n    }\n\n    var moreIndicator = this.getMoreIndicatorElement(count, startDate, endDate);\n    var rowTr = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + (row + 1) + \")\");\n    var top = rowTr.offsetTop + (this.cellHeight - this.moreIndicatorHeight);\n    left = Math.floor(left / this.cellWidth) * this.cellWidth;\n    right = Math.floor(right / this.cellWidth) * this.cellWidth;\n    setStyleAttribute(moreIndicator, {\n      'width': this.cellWidth + 'px',\n      'left': left + 'px',\n      'right': right + 'px',\n      'top': top + 'px'\n    });\n\n    if (!isNullOrUndefined(index)) {\n      moreIndicator.setAttribute('data-group-index', index.toString());\n    }\n\n    wrapper.appendChild(moreIndicator);\n    EventHandler.add(moreIndicator, 'click', this.moreIndicatorClick, this);\n  };\n\n  YearEvent.prototype.createEventElement = function (record) {\n    var eventSubject = record[this.fields.subject] || this.parent.eventSettings.fields.subject.default || this.parent.localeObj.getConstant('addTitle');\n    var eventWrapper = createElement('div', {\n      className: cls.APPOINTMENT_CLASS,\n      attrs: {\n        'data-id': 'Appointment_' + record[this.fields.id],\n        'data-guid': record.Guid,\n        'role': 'button',\n        'tabindex': '0',\n        'aria-readonly': this.parent.eventBase.getReadonlyAttribute(record),\n        'aria-selected': 'false',\n        'aria-grabbed': 'true',\n        'aria-label': this.parent.getAnnouncementString(record)\n      }\n    });\n\n    if (this.cssClass) {\n      addClass([eventWrapper], this.cssClass);\n    }\n\n    if (record[this.fields.isReadonly]) {\n      addClass([eventWrapper], cls.READ_ONLY);\n    }\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      var resIndex = this.getGroupIndexFromEvent(record);\n      eventWrapper.setAttribute('data-group-index', resIndex.toString());\n    }\n\n    var templateElement = [];\n    var eventObj = extend({}, record, null, true);\n\n    if (this.parent.activeViewOptions.eventTemplate) {\n      var templateId = this.parent.element.id + '_' + this.parent.activeViewOptions.eventTemplateName + 'eventTemplate';\n      templateElement = this.parent.getAppointmentTemplate()(eventObj, this.parent, 'eventTemplate', templateId, false);\n    } else {\n      var locationEle = record[this.fields.location] || this.parent.eventSettings.fields.location.default || '';\n      var subjectEle = createElement('div', {\n        className: cls.SUBJECT_CLASS,\n        innerHTML: eventSubject + (locationEle ? ';&nbsp' + locationEle : '')\n      });\n      var startTimeEle = createElement('div', {\n        className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n        innerHTML: this.parent.getTimeString(eventObj[this.fields.startTime])\n      });\n      var endTimeEle = createElement('div', {\n        className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n        innerHTML: this.parent.getTimeString(eventObj[this.fields.endTime])\n      });\n      addClass([subjectEle], 'e-text-center');\n\n      if (record[this.fields.isAllDay]) {\n        templateElement = [subjectEle];\n      } else if (!eventObj.isLeft && !eventObj.isRight) {\n        templateElement = [startTimeEle, subjectEle, endTimeEle];\n      } else {\n        if (!eventObj.isLeft) {\n          templateElement.push(startTimeEle);\n        }\n\n        templateElement.push(subjectEle);\n\n        if (!eventObj.isRight) {\n          templateElement.push(endTimeEle);\n        }\n      }\n    }\n\n    var appointmentDetails = createElement('div', {\n      className: cls.APPOINTMENT_DETAILS\n    });\n    append(templateElement, appointmentDetails);\n    eventWrapper.appendChild(appointmentDetails);\n    this.renderResizeHandler(eventWrapper, record.data, record[this.fields.isReadonly]);\n    this.applyResourceColor(eventWrapper, eventObj, 'backgroundColor', this.groupOrder);\n    return eventWrapper;\n  };\n\n  YearEvent.prototype.isSpannedEvent = function (eventObj, monthDate) {\n    var monthStart = new Date(monthDate.getFullYear(), monthDate.getMonth(), 1);\n    var monthEnd = util.addDays(new Date(monthDate.getFullYear(), monthDate.getMonth() + 1, 0), 1);\n    var eventData = extend({}, eventObj, null, true);\n    var eventStart = eventData[this.fields.startTime];\n    var eventEnd = eventData[this.fields.endTime];\n    var isSpanned = {\n      isLeft: false,\n      isRight: false,\n      count: 1\n    };\n\n    if (this.isResource) {\n      this.updateSpannedEvents(eventObj, monthStart, monthEnd);\n    }\n\n    if (eventStart.getTime() < monthStart.getTime()) {\n      eventData[this.fields.startTime] = monthStart;\n      isSpanned.isLeft = true;\n    }\n\n    if (eventEnd.getTime() > monthEnd.getTime()) {\n      eventData[this.fields.endTime] = monthEnd;\n      isSpanned.isRight = true;\n    }\n\n    if (this.parent.activeViewOptions.group.resources.length === 0) {\n      var end = util.resetTime(eventData[this.fields.endTime]).getTime();\n      var start = util.resetTime(eventData[this.fields.startTime]).getTime();\n\n      if (eventObj[this.fields.isAllDay] && end === eventObj[this.fields.endTime].getTime() || isSpanned.isRight) {\n        end = util.addDays(new Date(end), -1).getTime();\n      }\n\n      isSpanned.count = Math.ceil((end - start) / util.MS_PER_DAY) + 1;\n    }\n\n    eventData.isSpanned = isSpanned;\n\n    if (util.resetTime(eventStart).getTime() < util.resetTime(this.parent.minDate).getTime()) {\n      eventData[this.fields.startTime] = this.parent.minDate;\n    }\n\n    if (util.resetTime(eventEnd).getTime() > util.resetTime(this.parent.maxDate).getTime()) {\n      eventData[this.fields.endTime] = this.parent.maxDate;\n    }\n\n    return eventData;\n  };\n\n  YearEvent.prototype.getOverlapEvents = function (date, appointments) {\n    var appointmentsList = [];\n    var dateStart;\n    var dateEnd;\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(date.getTime()));\n      var monthEnd = util.addDays(this.parent.calendarUtil.getMonthEndDate(new Date(date.getTime())), -1);\n      dateStart = util.resetTime(new Date(monthStart.getTime())).getTime();\n      dateEnd = util.resetTime(new Date(monthEnd.getTime())).getTime();\n    } else {\n      if (this.parent.rowAutoHeight) {\n        dateStart = util.resetTime(new Date(date.getTime())).getTime();\n        dateEnd = util.addDays(util.resetTime(new Date(date.getTime())), 1).getTime();\n      } else {\n        dateStart = dateEnd = util.resetTime(new Date(date.getTime())).getTime();\n      }\n    }\n\n    for (var _i = 0, appointments_1 = appointments; _i < appointments_1.length; _i++) {\n      var app = appointments_1[_i];\n      var appStart = new Date(app[this.fields.startTime].getTime());\n      var appEnd = new Date(app[this.fields.endTime].getTime());\n\n      if (this.parent.activeViewOptions.orientation === 'Vertical' && this.parent.activeViewOptions.group.resources.length > 0) {\n        if (util.resetTime(appStart).getTime() >= dateStart && util.resetTime(appEnd).getTime() <= dateEnd) {\n          appointmentsList.push(app);\n        }\n      } else {\n        var timeCondition = app[this.fields.isAllDay] ? util.resetTime(appEnd).getTime() > dateStart : util.resetTime(appEnd).getTime() >= dateStart;\n\n        if (util.resetTime(appStart).getTime() <= dateStart && timeCondition || util.resetTime(appStart).getTime() >= dateStart && util.resetTime(appEnd).getTime() <= dateEnd) {\n          appointmentsList.push(app);\n        }\n      }\n    }\n\n    return appointmentsList;\n  };\n\n  YearEvent.prototype.getMonths = function () {\n    var _this = this; // eslint-disable-next-line prefer-spread\n\n\n    return Array.apply(null, {\n      length: this.parent.monthsCount\n    }).map(function (value, index) {\n      return _this.parent.firstMonthOfYear + index;\n    });\n  };\n\n  YearEvent.prototype.removeCellHeight = function () {\n    var elementSelector = \".\" + cls.MONTH_HEADER_WRAPPER + \" tbody tr,.\" + cls.RESOURCE_COLUMN_TABLE_CLASS + \" tbody tr,.\" + cls.CONTENT_TABLE_CLASS + \" tbody tr\";\n    var rows = [].slice.call(this.element.querySelectorAll(elementSelector));\n\n    for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n      var row = rows_1[_i];\n      row.firstElementChild.style.height = '';\n    }\n  };\n\n  YearEvent.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n\n    this.parent = null;\n  };\n\n  return YearEvent;\n}(TimelineEvent);\n\nexport { YearEvent };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","addClass","append","createElement","extend","remove","isNullOrUndefined","setStyleAttribute","EventHandler","TimelineEvent","util","events","cls","EVENT_GAP","YearEvent","_super","parent","_this","call","isResource","renderAppointments","dragAndDropModule","setDragArea","fields","eventFields","elementSelector","currentView","APPOINTMENT_CLASS","APPOINTMENT_WRAPPER_CLASS","MORE_INDICATOR_CLASS","eventWrappers","slice","element","querySelectorAll","_i","eventWrappers_1","length","wrapper","renderedEvents","yearViewEvents","removeCellHeight","activeViewOptions","group","resources","uiStateValues","isGroupAdaptive","timelineResourceEvents","timelineYearViewEvents","renderTemplates","notify","contentReady","months","getMonths","months_1","month","queryString","indexOf","workCells","monthDate","Date","selectedDate","getFullYear","monthStart","calendarUtil","getMonthStartDate","getTime","monthEnd","getMonthEndDate","startDate","getWeekFirstDate","firstDayOfWeek","endDate","addDays","getWeekLastDate","index","start","resetTime","end","filterEvents","eventBase","workCell","appendChild","className","querySelector","WORK_CELLS_CLASS","cellWidth","offsetWidth","cellHeader","getOuterHeight","DATE_HEADER_CLASS","eventTable","EVENT_TABLE_CLASS","eventHeight","getElementHeightFromClass","wrapperCollection","APPOINTMENT_CONTAINER_CLASS","row","td","eventWrapper","getMonth","dayIndex","getDay","isSpannedCollection","orientation","leftValue","rightValue","wrapper_1","eventWrapper_1","enableRtl","getDate","rowTd","cellHeight","offsetHeight","dayStart","dayEnd","resource","resourceBase","lastResourceLevel","groupIndex","dayEvents","undefined","sortByDateTime","_loop_1","count","eventData","this_1","updateSpannedEvents","overlapIndex","getIndex","Index","availedHeight","moreIndicatorHeight","appArea","renderedAppCount","Math","floor","moreIndicatorCount","isRendered","filter","eventObj","Guid","isSpanned","MoreIndicator","moreIndex","renderMoreIndicator","isRowAutoHeight","rowAutoHeight","renderEvent","updateCellHeight","push","isLeftRightResize","data","isLeft","isRight","isBottom","isTop","startTime","endTime","i","len","renderResourceEvent","lastDateOfMonth","eventDatas","rowIndex","groupOrder","a","isSpannedEvent","left","right","wrap","createEventElement","width","top","offsetTop","args","cancel","type","trigger","eventRendered","eventArgs","wireAppointmentEvents","moreIndicator","getMoreIndicatorElement","rowTr","setAttribute","toString","add","moreIndicatorClick","record","eventSubject","subject","eventSettings","default","localeObj","getConstant","attrs","id","getReadonlyAttribute","getAnnouncementString","cssClass","isReadonly","READ_ONLY","resIndex","getGroupIndexFromEvent","templateElement","eventTemplate","templateId","eventTemplateName","getAppointmentTemplate","locationEle","location","subjectEle","SUBJECT_CLASS","innerHTML","startTimeEle","APPOINTMENT_TIME","isAdaptive","DISABLE_CLASS","getTimeString","endTimeEle","isAllDay","appointmentDetails","APPOINTMENT_DETAILS","renderResizeHandler","applyResourceColor","eventStart","eventEnd","ceil","MS_PER_DAY","minDate","maxDate","getOverlapEvents","date","appointments","appointmentsList","dateStart","dateEnd","appointments_1","app","appStart","appEnd","timeCondition","apply","monthsCount","map","value","firstMonthOfYear","MONTH_HEADER_WRAPPER","RESOURCE_COLUMN_TABLE_CLASS","CONTENT_TABLE_CLASS","rows","rows_1","firstElementChild","style","height","destroy"],"sources":["C:/Users/shahj/OneDrive/Documents/GitHub/Multifunctional-React-Dashboard/node_modules/@syncfusion/ej2-schedule/src/schedule/event-renderer/year.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { addClass, append, createElement, extend, remove, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, EventHandler } from '@syncfusion/ej2-base';\nimport { TimelineEvent } from './timeline-view';\nimport * as util from '../base/util';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\nvar EVENT_GAP = 2;\n/**\n * Year view events render\n */\nvar YearEvent = /** @class */ (function (_super) {\n    __extends(YearEvent, _super);\n    function YearEvent(parent) {\n        var _this = _super.call(this, parent, 'day') || this;\n        _this.isResource = false;\n        return _this;\n    }\n    YearEvent.prototype.renderAppointments = function () {\n        if (this.parent.dragAndDropModule) {\n            this.parent.dragAndDropModule.setDragArea();\n        }\n        this.fields = this.parent.eventFields;\n        var elementSelector = (this.parent.currentView === 'Year') ? '.' + cls.APPOINTMENT_CLASS :\n            '.' + cls.APPOINTMENT_WRAPPER_CLASS + ',.' + cls.MORE_INDICATOR_CLASS;\n        var eventWrappers = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n        for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {\n            var wrapper = eventWrappers_1[_i];\n            remove(wrapper);\n        }\n        this.renderedEvents = [];\n        if (this.parent.currentView === 'Year') {\n            this.yearViewEvents();\n        }\n        else {\n            this.removeCellHeight();\n            if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n                this.isResource = true;\n                this.timelineResourceEvents();\n            }\n            else {\n                this.timelineYearViewEvents();\n            }\n        }\n        this.parent.renderTemplates();\n        this.parent.notify(events.contentReady, {});\n    };\n    YearEvent.prototype.yearViewEvents = function () {\n        var months = this.getMonths();\n        for (var _i = 0, months_1 = months; _i < months_1.length; _i++) {\n            var month = months_1[_i];\n            var queryString = \".e-month-calendar:nth-child(\" + (months.indexOf(month) + 1) + \") td.e-work-cells\";\n            var workCells = [].slice.call(this.parent.element.querySelectorAll(queryString));\n            var monthDate = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n            var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n            var monthEnd = this.parent.calendarUtil.getMonthEndDate(new Date(monthDate.getTime()));\n            var startDate = util.getWeekFirstDate(monthStart, this.parent.firstDayOfWeek);\n            var endDate = util.addDays(util.getWeekLastDate(monthEnd, this.parent.firstDayOfWeek), 1);\n            for (var index = 0; startDate.getTime() < endDate.getTime(); index++) {\n                var start = util.resetTime(new Date(startDate.getTime()));\n                var end = util.addDays(new Date(start.getTime()), 1);\n                var filterEvents = this.parent.eventBase.filterEvents(start, end);\n                if (filterEvents.length > 0) {\n                    var workCell = workCells[index];\n                    if (workCell) {\n                        workCell.appendChild(createElement('div', { className: cls.APPOINTMENT_CLASS }));\n                    }\n                }\n                startDate = util.addDays(new Date(startDate.getTime()), 1);\n            }\n        }\n    };\n    YearEvent.prototype.timelineYearViewEvents = function () {\n        var workCell = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\n        this.cellWidth = workCell.offsetWidth;\n        this.cellHeader = util.getOuterHeight(workCell.querySelector('.' + cls.DATE_HEADER_CLASS));\n        var eventTable = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n        this.eventHeight = util.getElementHeightFromClass(eventTable, cls.APPOINTMENT_CLASS);\n        var wrapperCollection = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n        var months = this.getMonths();\n        for (var row = 0; row < months.length; row++) {\n            var wrapper = wrapperCollection[row];\n            var td = row + 1;\n            var eventWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n            wrapper.appendChild(eventWrapper);\n            var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[row], 1);\n            var monthEnd = new Date(monthStart.getFullYear(), monthStart.getMonth() + 1, 0);\n            var dayIndex = monthStart.getDay();\n            var isSpannedCollection = [];\n            if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                this.renderedEvents = [];\n            }\n            while (monthStart.getTime() <= monthEnd.getTime()) {\n                var leftValue = void 0;\n                var rightValue = void 0;\n                if (this.parent.activeViewOptions.orientation === 'Vertical') {\n                    var wrapper_1 = wrapperCollection[dayIndex];\n                    td = dayIndex + 1;\n                    var eventWrapper_1 = wrapper_1.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n                    if (!eventWrapper_1) {\n                        eventWrapper_1 = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n                        wrapper_1.appendChild(eventWrapper_1);\n                    }\n                    if (this.parent.enableRtl) {\n                        rightValue = row * this.cellWidth;\n                    }\n                    else {\n                        leftValue = row * this.cellWidth;\n                    }\n                }\n                else {\n                    if (this.parent.enableRtl) {\n                        rightValue = ((dayIndex + monthStart.getDate()) - 1) * this.cellWidth;\n                    }\n                    else {\n                        leftValue = ((dayIndex + monthStart.getDate()) - 1) * this.cellWidth;\n                    }\n                }\n                var rowTd = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + td + \") td\");\n                this.cellHeight = rowTd.offsetHeight;\n                var dayStart = util.resetTime(new Date(monthStart.getTime()));\n                var dayEnd = util.addDays(new Date(dayStart.getTime()), 1);\n                var resource = void 0;\n                if (this.parent.uiStateValues.isGroupAdaptive) {\n                    resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n                }\n                var dayEvents = this.parent.eventBase.filterEvents(dayStart, dayEnd, undefined, resource);\n                dayEvents = this.parent.eventBase.sortByDateTime(dayEvents);\n                var _loop_1 = function (index, count) {\n                    var eventData = extend({}, dayEvents[index], null, true);\n                    this_1.updateSpannedEvents(eventData, dayStart, dayEnd);\n                    var overlapIndex = this_1.getIndex(dayStart);\n                    eventData.Index = overlapIndex;\n                    var availedHeight = this_1.cellHeader + (this_1.eventHeight * (overlapIndex + 1)) + EVENT_GAP +\n                        this_1.moreIndicatorHeight;\n                    var appArea = this_1.cellHeight - this_1.cellHeader - this_1.moreIndicatorHeight;\n                    var renderedAppCount = Math.floor(appArea / (this_1.eventHeight + EVENT_GAP));\n                    var moreIndicatorCount = (count - renderedAppCount) <= 0 ? 1 : (count - renderedAppCount);\n                    if (this_1.parent.activeViewOptions.orientation === 'Horizontal') {\n                        var isRendered = this_1.renderedEvents.filter(function (eventObj) {\n                            return eventObj.Guid === eventData.Guid;\n                        });\n                        var isSpanned = isSpannedCollection.filter(function (eventObj) {\n                            return eventObj.Guid === eventData.Guid;\n                        });\n                        if (isRendered.length > 0 && isRendered[0].MoreIndicator || isSpanned.length > 0 && isSpanned[0].MoreIndicator) {\n                            var moreIndex = this_1.parent.activeViewOptions.orientation === 'Horizontal' ? row : dayIndex;\n                            this_1.renderMoreIndicator(eventWrapper, moreIndicatorCount, dayStart, moreIndex, leftValue, rightValue);\n                            return \"continue\";\n                        }\n                        else if (isRendered.length > 0 || isSpanned.length > 0) {\n                            return \"continue\";\n                        }\n                    }\n                    var isRowAutoHeight = this_1.parent.rowAutoHeight && this_1.parent.activeViewOptions.orientation === 'Horizontal';\n                    if (isRowAutoHeight || this_1.cellHeight > availedHeight) {\n                        this_1.renderEvent(eventWrapper, eventData, row, leftValue, rightValue, monthStart, dayIndex);\n                        this_1.updateCellHeight(rowTd, availedHeight);\n                        isSpannedCollection.push(eventData);\n                    }\n                    else {\n                        var moreIndex = this_1.parent.activeViewOptions.orientation === 'Horizontal' ? row : dayIndex;\n                        this_1.renderMoreIndicator(eventWrapper, moreIndicatorCount, dayStart, moreIndex, leftValue, rightValue);\n                        if (this_1.parent.activeViewOptions.orientation === 'Horizontal') {\n                            eventData.MoreIndicator = true;\n                            this_1.renderedEvents.push(eventData);\n                            isSpannedCollection.push(eventData);\n                        }\n                    }\n                };\n                var this_1 = this;\n                for (var index = 0, count = dayEvents.length; index < count; index++) {\n                    _loop_1(index, count);\n                }\n                monthStart = util.addDays(new Date(monthStart.getTime()), 1);\n                if (this.parent.activeViewOptions.orientation === 'Vertical') {\n                    dayIndex++;\n                    this.renderedEvents = [];\n                }\n            }\n        }\n    };\n    YearEvent.prototype.updateSpannedEvents = function (eventObj, dayStart, dayEnd) {\n        var isLeftRightResize = (this.isResource && this.parent.activeViewOptions.orientation === 'Vertical') ||\n            (!this.isResource && this.parent.activeViewOptions.orientation === 'Horizontal');\n        var data = { isLeft: true, isRight: true, isBottom: true, isTop: true };\n        if (dayStart.getTime() <= eventObj[this.fields.startTime].getTime()) {\n            if (isLeftRightResize) {\n                data.isLeft = false;\n            }\n            else {\n                data.isTop = false;\n            }\n        }\n        if ((dayEnd.getTime() >= eventObj[this.fields.endTime].getTime()) || (isLeftRightResize && !this.isResource &&\n            util.addDays(dayEnd, -1).getMonth() === eventObj[this.fields.endTime].getMonth())) {\n            if (isLeftRightResize) {\n                data.isRight = false;\n            }\n            else {\n                data.isBottom = false;\n            }\n        }\n        eventObj.data = data;\n    };\n    YearEvent.prototype.timelineResourceEvents = function () {\n        var workCell = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\n        this.cellWidth = workCell.offsetWidth;\n        this.cellHeader = 0;\n        var eventTable = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n        this.eventHeight = util.getElementHeightFromClass(eventTable, cls.APPOINTMENT_CLASS);\n        var wrapperCollection = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n        var resources = this.parent.uiStateValues.isGroupAdaptive ?\n            [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] : this.parent.resourceBase.lastResourceLevel;\n        var months = this.getMonths();\n        if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n            for (var month = 0; month < months.length; month++) {\n                var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[month], 1);\n                for (var i = 0, len = resources.length; i < len; i++) {\n                    this.renderedEvents = [];\n                    this.renderResourceEvent(wrapperCollection[month], resources[i], month, i, monthStart);\n                }\n            }\n        }\n        else {\n            for (var i = 0, len = resources.length; i < len; i++) {\n                this.renderedEvents = [];\n                for (var month = 0; month < months.length; month++) {\n                    var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[month], 1);\n                    this.renderResourceEvent(wrapperCollection[i], resources[i], month, i, monthStart);\n                }\n            }\n        }\n    };\n    YearEvent.prototype.renderResourceEvent = function (wrapper, resource, month, index, monthStart) {\n        var eventWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n        wrapper.appendChild(eventWrapper);\n        var monthEnd = util.addDays(util.lastDateOfMonth(new Date(monthStart.getTime())), 1);\n        var eventDatas = this.parent.eventBase.filterEvents(monthStart, monthEnd, undefined, resource);\n        var rowIndex = this.parent.activeViewOptions.orientation === 'Vertical' ? index : month;\n        var td = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + (rowIndex + 1) + \") td\");\n        this.cellHeight = td.offsetHeight;\n        this.groupOrder = resource.groupOrder;\n        for (var a = 0; a < eventDatas.length; a++) {\n            var data = eventDatas[a];\n            var overlapIndex = void 0;\n            var eventData = extend({}, data, null, true);\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                var eventObj = this.isSpannedEvent(eventData, monthStart);\n                overlapIndex = this.getIndex(eventObj[this.fields.startTime]);\n                eventData.Index = overlapIndex;\n            }\n            else {\n                overlapIndex = this.getIndex(eventData[this.fields.startTime]);\n                eventData.Index = overlapIndex;\n            }\n            var availedHeight = this.cellHeader + (this.eventHeight * (a + 1)) + EVENT_GAP + this.moreIndicatorHeight;\n            var leftValue = (this.parent.activeViewOptions.orientation === 'Vertical') ?\n                month * this.cellWidth : index * this.cellWidth;\n            if (this.parent.rowAutoHeight || this.cellHeight > availedHeight) {\n                this.renderEvent(eventWrapper, eventData, month, leftValue, leftValue, monthStart, index);\n                this.updateCellHeight(td, availedHeight);\n            }\n            else {\n                var moreIndex = this.parent.activeViewOptions.orientation === 'Horizontal' ? month : index;\n                this.renderMoreIndicator(eventWrapper, eventDatas.length - a, monthStart, moreIndex, leftValue, leftValue, index);\n                if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                    for (var i = index; i < eventDatas.length; i++) {\n                        this.renderedEvents.push(extend({}, eventDatas[i], { Index: overlapIndex + i }, true));\n                    }\n                }\n                break;\n            }\n        }\n    };\n    // eslint-disable-next-line max-len\n    YearEvent.prototype.renderEvent = function (wrapper, eventData, row, left, right, monthDate, rowIndex) {\n        var _this = this;\n        var eventObj = this.isSpannedEvent(eventData, monthDate);\n        var wrap = this.createEventElement(eventObj);\n        var width;\n        var index;\n        if (eventObj.isSpanned.count === 1) {\n            var endTime = util.addDays(eventObj[this.fields.endTime], -1);\n            eventObj[this.fields.endTime] = (endTime > eventObj[this.fields.startTime]) ? endTime : eventObj[this.fields.endTime];\n        }\n        if (eventObj[this.fields.startTime] > eventObj[this.fields.endTime]) {\n            return;\n        }\n        if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n            index = row + 1;\n            if (eventObj[this.fields.startTime].getTime() === eventObj[this.fields.endTime].getTime()) {\n                eventObj.isSpanned.count = 1;\n            }\n            width = eventObj.isSpanned.count * this.cellWidth;\n        }\n        else {\n            index = rowIndex + 1;\n            width = this.cellWidth;\n        }\n        var rowTd = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + index + \") td\");\n        var top = rowTd.offsetTop + this.cellHeader + (this.eventHeight * eventObj.Index) + EVENT_GAP;\n        setStyleAttribute(wrap, {\n            'width': width + 'px', 'height': this.eventHeight + 'px', 'left': left + 'px', 'right': right + 'px', 'top': top + 'px'\n        });\n        var args = { data: eventObj, element: wrap, cancel: false, type: 'event' };\n        this.parent.trigger(events.eventRendered, args, function (eventArgs) {\n            if (!eventArgs.cancel) {\n                wrapper.appendChild(wrap);\n                _this.wireAppointmentEvents(wrap, eventObj);\n                if (_this.parent.activeViewOptions.group.resources.length > 0) {\n                    _this.renderedEvents.push(extend({}, eventObj, null, true));\n                }\n                else if (_this.parent.activeViewOptions.orientation === 'Vertical') {\n                    _this.renderedEvents.push(extend({}, eventObj, null, true));\n                }\n                else if ((eventObj.isSpanned.isRight || eventObj.isSpanned.isLeft) && _this.parent.activeViewOptions.orientation === 'Horizontal'\n                    || !eventObj.isSpanned.isRight) {\n                    _this.renderedEvents.push(extend({}, eventObj, null, true));\n                }\n            }\n        });\n    };\n    // eslint-disable-next-line max-len\n    YearEvent.prototype.renderMoreIndicator = function (wrapper, count, startDate, row, left, right, index) {\n        if (this.parent.activeViewOptions.group.resources.length === 0 && wrapper.querySelector('[data-start-date=\"' + startDate.getTime() + '\"]')) {\n            return;\n        }\n        var endDate;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            endDate = util.addDays(util.lastDateOfMonth(new Date(startDate.getTime())), 1);\n        }\n        else {\n            endDate = util.addDays(new Date(startDate.getTime()), 1);\n        }\n        var moreIndicator = this.getMoreIndicatorElement(count, startDate, endDate);\n        var rowTr = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + (row + 1) + \")\");\n        var top = rowTr.offsetTop + (this.cellHeight - this.moreIndicatorHeight);\n        left = (Math.floor(left / this.cellWidth) * this.cellWidth);\n        right = (Math.floor(right / this.cellWidth) * this.cellWidth);\n        setStyleAttribute(moreIndicator, { 'width': this.cellWidth + 'px', 'left': left + 'px', 'right': right + 'px', 'top': top + 'px' });\n        if (!isNullOrUndefined(index)) {\n            moreIndicator.setAttribute('data-group-index', index.toString());\n        }\n        wrapper.appendChild(moreIndicator);\n        EventHandler.add(moreIndicator, 'click', this.moreIndicatorClick, this);\n    };\n    YearEvent.prototype.createEventElement = function (record) {\n        var eventSubject = (record[this.fields.subject] || this.parent.eventSettings.fields.subject.default\n            || this.parent.localeObj.getConstant('addTitle'));\n        var eventWrapper = createElement('div', {\n            className: cls.APPOINTMENT_CLASS,\n            attrs: {\n                'data-id': 'Appointment_' + record[this.fields.id],\n                'data-guid': record.Guid,\n                'role': 'button', 'tabindex': '0',\n                'aria-readonly': this.parent.eventBase.getReadonlyAttribute(record), 'aria-selected': 'false', 'aria-grabbed': 'true',\n                'aria-label': this.parent.getAnnouncementString(record)\n            }\n        });\n        if (this.cssClass) {\n            addClass([eventWrapper], this.cssClass);\n        }\n        if (record[this.fields.isReadonly]) {\n            addClass([eventWrapper], cls.READ_ONLY);\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var resIndex = this.getGroupIndexFromEvent(record);\n            eventWrapper.setAttribute('data-group-index', resIndex.toString());\n        }\n        var templateElement = [];\n        var eventObj = extend({}, record, null, true);\n        if (this.parent.activeViewOptions.eventTemplate) {\n            var templateId = this.parent.element.id + '_' + this.parent.activeViewOptions.eventTemplateName + 'eventTemplate';\n            templateElement = this.parent.getAppointmentTemplate()(eventObj, this.parent, 'eventTemplate', templateId, false);\n        }\n        else {\n            var locationEle = (record[this.fields.location] || this.parent.eventSettings.fields.location.default || '');\n            var subjectEle = createElement('div', {\n                className: cls.SUBJECT_CLASS,\n                innerHTML: (eventSubject + (locationEle ? ';&nbsp' + locationEle : ''))\n            });\n            var startTimeEle = createElement('div', {\n                className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                innerHTML: this.parent.getTimeString(eventObj[this.fields.startTime])\n            });\n            var endTimeEle = createElement('div', {\n                className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                innerHTML: this.parent.getTimeString(eventObj[this.fields.endTime])\n            });\n            addClass([subjectEle], 'e-text-center');\n            if (record[this.fields.isAllDay]) {\n                templateElement = [subjectEle];\n            }\n            else if (!eventObj.isLeft && !eventObj.isRight) {\n                templateElement = [startTimeEle, subjectEle, endTimeEle];\n            }\n            else {\n                if (!eventObj.isLeft) {\n                    templateElement.push(startTimeEle);\n                }\n                templateElement.push(subjectEle);\n                if (!eventObj.isRight) {\n                    templateElement.push(endTimeEle);\n                }\n            }\n        }\n        var appointmentDetails = createElement('div', { className: cls.APPOINTMENT_DETAILS });\n        append(templateElement, appointmentDetails);\n        eventWrapper.appendChild(appointmentDetails);\n        this.renderResizeHandler(eventWrapper, record.data, record[this.fields.isReadonly]);\n        this.applyResourceColor(eventWrapper, eventObj, 'backgroundColor', this.groupOrder);\n        return eventWrapper;\n    };\n    YearEvent.prototype.isSpannedEvent = function (eventObj, monthDate) {\n        var monthStart = new Date(monthDate.getFullYear(), monthDate.getMonth(), 1);\n        var monthEnd = util.addDays(new Date(monthDate.getFullYear(), monthDate.getMonth() + 1, 0), 1);\n        var eventData = extend({}, eventObj, null, true);\n        var eventStart = eventData[this.fields.startTime];\n        var eventEnd = eventData[this.fields.endTime];\n        var isSpanned = { isLeft: false, isRight: false, count: 1 };\n        if (this.isResource) {\n            this.updateSpannedEvents(eventObj, monthStart, monthEnd);\n        }\n        if (eventStart.getTime() < monthStart.getTime()) {\n            eventData[this.fields.startTime] = monthStart;\n            isSpanned.isLeft = true;\n        }\n        if (eventEnd.getTime() > monthEnd.getTime()) {\n            eventData[this.fields.endTime] = monthEnd;\n            isSpanned.isRight = true;\n        }\n        if (this.parent.activeViewOptions.group.resources.length === 0) {\n            var end = util.resetTime(eventData[this.fields.endTime]).getTime();\n            var start = util.resetTime(eventData[this.fields.startTime]).getTime();\n            if (eventObj[this.fields.isAllDay] && end === eventObj[this.fields.endTime].getTime() || isSpanned.isRight) {\n                end = util.addDays(new Date(end), -1).getTime();\n            }\n            isSpanned.count = Math.ceil((end - start) / util.MS_PER_DAY) + 1;\n        }\n        eventData.isSpanned = isSpanned;\n        if (util.resetTime(eventStart).getTime() < util.resetTime(this.parent.minDate).getTime()) {\n            eventData[this.fields.startTime] = this.parent.minDate;\n        }\n        if (util.resetTime(eventEnd).getTime() > util.resetTime(this.parent.maxDate).getTime()) {\n            eventData[this.fields.endTime] = this.parent.maxDate;\n        }\n        return eventData;\n    };\n    YearEvent.prototype.getOverlapEvents = function (date, appointments) {\n        var appointmentsList = [];\n        var dateStart;\n        var dateEnd;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(date.getTime()));\n            var monthEnd = util.addDays(this.parent.calendarUtil.getMonthEndDate(new Date(date.getTime())), -1);\n            dateStart = util.resetTime(new Date(monthStart.getTime())).getTime();\n            dateEnd = util.resetTime(new Date(monthEnd.getTime())).getTime();\n        }\n        else {\n            if (this.parent.rowAutoHeight) {\n                dateStart = util.resetTime(new Date(date.getTime())).getTime();\n                dateEnd = util.addDays(util.resetTime(new Date(date.getTime())), 1).getTime();\n            }\n            else {\n                dateStart = dateEnd = util.resetTime(new Date(date.getTime())).getTime();\n            }\n        }\n        for (var _i = 0, appointments_1 = appointments; _i < appointments_1.length; _i++) {\n            var app = appointments_1[_i];\n            var appStart = new Date(app[this.fields.startTime].getTime());\n            var appEnd = new Date(app[this.fields.endTime].getTime());\n            if (this.parent.activeViewOptions.orientation === 'Vertical' &&\n                this.parent.activeViewOptions.group.resources.length > 0) {\n                if ((util.resetTime(appStart).getTime() >= dateStart) && (util.resetTime(appEnd).getTime() <= dateEnd)) {\n                    appointmentsList.push(app);\n                }\n            }\n            else {\n                var timeCondition = app[this.fields.isAllDay] ? util.resetTime(appEnd).getTime() > dateStart :\n                    util.resetTime(appEnd).getTime() >= dateStart;\n                if (((util.resetTime(appStart).getTime() <= dateStart) && (timeCondition)) ||\n                    (util.resetTime(appStart).getTime() >= dateStart) && (util.resetTime(appEnd).getTime() <= dateEnd)) {\n                    appointmentsList.push(app);\n                }\n            }\n        }\n        return appointmentsList;\n    };\n    YearEvent.prototype.getMonths = function () {\n        var _this = this;\n        // eslint-disable-next-line prefer-spread\n        return Array.apply(null, { length: this.parent.monthsCount }).map(function (value, index) {\n            return _this.parent.firstMonthOfYear + index;\n        });\n    };\n    YearEvent.prototype.removeCellHeight = function () {\n        var elementSelector = \".\" + cls.MONTH_HEADER_WRAPPER + \" tbody tr,.\" + cls.RESOURCE_COLUMN_TABLE_CLASS + \" tbody tr,.\" + cls.CONTENT_TABLE_CLASS + \" tbody tr\";\n        var rows = [].slice.call(this.element.querySelectorAll(elementSelector));\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            row.firstElementChild.style.height = '';\n        }\n    };\n    YearEvent.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.parent = null;\n    };\n    return YearEvent;\n}(TimelineEvent));\nexport { YearEvent };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}