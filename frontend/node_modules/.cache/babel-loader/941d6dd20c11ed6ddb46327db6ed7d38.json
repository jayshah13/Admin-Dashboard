{"ast":null,"code":"import { detach, closest, Browser, isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, EventHandler, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport * as classes from '../base/classes';\nimport { dispatchEvent, parseHtml, hasClass } from '../base/util';\n/**\n * `Table` module is used to handle table actions.\n */\n\nvar Table =\n/** @class */\nfunction () {\n  function Table(parent, serviceLocator) {\n    this.ensureInsideTableList = true;\n    this.pageX = null;\n    this.pageY = null;\n    this.moveEle = null;\n    this.parent = parent;\n    this.rteID = parent.element.id;\n    this.l10n = serviceLocator.getService('rteLocale');\n    this.rendererFactory = serviceLocator.getService('rendererFactory');\n    this.dialogRenderObj = serviceLocator.getService('dialogRenderObject');\n    this.addEventListener();\n  }\n\n  Table.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.on(events.createTable, this.renderDlgContent, this);\n    this.parent.on(events.initialEnd, this.afterRender, this);\n    this.parent.on(events.dynamicModule, this.afterRender, this);\n    this.parent.on(events.showTableDialog, this.showDialog, this);\n    this.parent.on(events.closeTableDialog, this.closeDialog, this);\n    this.parent.on(events.docClick, this.docClick, this);\n    this.parent.on(events.editAreaClick, this.editAreaClickHandler, this);\n    this.parent.on(events.clearDialogObj, this.clearDialogObj, this);\n    this.parent.on(events.tableToolbarAction, this.onToolbarAction, this);\n    this.parent.on(events.dropDownSelect, this.dropdownSelect, this);\n    this.parent.on(events.keyDown, this.keyDown, this);\n    this.parent.on(events.mouseUp, this.selectionTable, this);\n    this.parent.on(events.destroy, this.destroy, this);\n  };\n\n  Table.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.off(events.createTable, this.renderDlgContent);\n    this.parent.off(events.initialEnd, this.afterRender);\n    this.parent.off(events.dynamicModule, this.afterRender);\n    this.parent.off(events.docClick, this.docClick);\n    this.parent.off(events.showTableDialog, this.showDialog);\n    this.parent.off(events.closeTableDialog, this.closeDialog);\n    this.parent.off(events.editAreaClick, this.editAreaClickHandler);\n    this.parent.off(events.clearDialogObj, this.clearDialogObj);\n    this.parent.off(events.tableToolbarAction, this.onToolbarAction);\n    this.parent.off(events.dropDownSelect, this.dropdownSelect);\n    this.parent.off(events.mouseDown, this.cellSelect);\n    this.parent.off(events.tableColorPickerChanged, this.setBGColor);\n    this.parent.off(events.keyDown, this.keyDown);\n    this.parent.off(events.mouseUp, this.selectionTable);\n    this.parent.off(events.destroy, this.destroy);\n  };\n\n  Table.prototype.selectionTable = function (e) {\n    var target = e.args.target;\n\n    if (Browser.info.name === 'mozilla' && !isNOU(closest(target, 'table')) && closest(target, 'table').tagName === 'TABLE') {\n      this.parent.contentModule.getEditPanel().setAttribute('contenteditable', 'true');\n    }\n  };\n\n  Table.prototype.afterRender = function () {\n    if (isNullOrUndefined(this.contentModule)) {\n      this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n      this.parent.on(events.tableColorPickerChanged, this.setBGColor, this);\n      this.parent.on(events.mouseDown, this.cellSelect, this);\n\n      if (this.parent.tableSettings.resize) {\n        EventHandler.add(this.parent.contentModule.getEditPanel(), Browser.touchStartEvent, this.resizeStart, this);\n      }\n\n      if (!Browser.isDevice && this.parent.tableSettings.resize) {\n        EventHandler.add(this.contentModule.getEditPanel(), 'mouseover', this.resizeHelper, this);\n      }\n    }\n  };\n\n  Table.prototype.dropdownSelect = function (e) {\n    var item = e.item;\n\n    if (!document.body.contains(document.body.querySelector('.e-rte-quick-toolbar')) || item.command !== 'Table') {\n      return;\n    }\n\n    var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n    var args = {\n      args: e,\n      selection: this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument()),\n      selectParent: this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range)\n    };\n\n    switch (item.subCommand) {\n      case 'InsertRowBefore':\n      case 'InsertRowAfter':\n        this.addRow(args.selection, e);\n        break;\n\n      case 'InsertColumnLeft':\n      case 'InsertColumnRight':\n        this.addColumn(args.selection, e);\n        break;\n\n      case 'DeleteColumn':\n      case 'DeleteRow':\n        this.removeRowColumn(args.selection, e);\n        break;\n\n      case 'AlignTop':\n      case 'AlignMiddle':\n      case 'AlignBottom':\n        this.verticalAlign(args, e);\n        break;\n\n      case 'Dashed':\n      case 'Alternate':\n      case 'Custom':\n        this.tableStyles(args, item.subCommand);\n        break;\n\n      case 'Merge':\n      case 'VerticalSplit':\n      case 'HorizontalSplit':\n        this.UpdateCells(args.selection, e);\n        break;\n    }\n  };\n\n  Table.prototype.UpdateCells = function (selectCell, e) {\n    this.parent.formatter.process(this.parent, e, e, {\n      selection: selectCell,\n      subCommand: e.item.subCommand\n    });\n    this.hideTableQuickToolbar();\n  };\n\n  Table.prototype.keyDown = function (e) {\n    var event = e.args; // eslint-disable-next-line\n\n    var proxy = this;\n\n    switch (event.action) {\n      case 'escape':\n        break;\n\n      case 'insert-table':\n        this.openDialog(true, e);\n        event.preventDefault();\n        break;\n    }\n\n    if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection) && this.contentModule && event.code !== 'KeyK') {\n      var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n      var selection = this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument());\n      var ele = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range)[0];\n      ele = ele && ele.tagName !== 'TD' && ele.tagName !== 'TH' ? ele.parentElement : ele;\n\n      if (event.keyCode === 8 || event.keyCode === 46 || event.ctrlKey && event.keyCode === 88) {\n        if (ele && ele.tagName === 'TBODY') {\n          event.preventDefault();\n          proxy.removeTable(selection, event, true);\n        } else if (ele && ele.querySelectorAll('table').length > 0) {\n          this.removeResizeElement();\n        }\n      }\n\n      if (ele && ele.tagName !== 'TD' && ele.tagName !== 'TH') {\n        var closestTd = closest(ele, 'td');\n        ele = !isNullOrUndefined(closestTd) && this.parent.inputElement.contains(closestTd) ? closestTd : ele;\n      }\n\n      if (ele && (ele.tagName === 'TD' || ele.tagName === 'TH')) {\n        switch (event.keyCode) {\n          case 9:\n          case 37:\n          case 39:\n            proxy.tabSelection(event, selection, ele);\n            break;\n\n          case 40:\n          case 38:\n            proxy.tableArrowNavigation(event, selection, ele);\n            break;\n        }\n      }\n    }\n  };\n\n  Table.prototype.openDialog = function (isInternal, e) {\n    if (!isInternal) {\n      this.parent.contentModule.getEditPanel().focus();\n    }\n\n    if (this.parent.editorMode === 'HTML') {\n      var docElement = this.parent.contentModule.getDocument();\n      var range = this.parent.formatter.editorManager.nodeSelection.getRange(docElement);\n      var selection = this.parent.formatter.editorManager.nodeSelection.save(range, docElement);\n      var args = {\n        originalEvent: e ? e.args : {\n          action: 'insert-table'\n        },\n        item: {\n          command: 'Table',\n          subCommand: 'CreateTable'\n        }\n      };\n      this.insertTableDialog({\n        self: this,\n        args: args,\n        selection: selection\n      });\n    }\n  };\n\n  Table.prototype.showDialog = function () {\n    this.openDialog(false);\n  };\n\n  Table.prototype.closeDialog = function () {\n    if (this.editdlgObj) {\n      this.editdlgObj.hide({\n        returnValue: true\n      });\n    }\n  };\n\n  Table.prototype.onToolbarAction = function (args) {\n    var item = args.args.item;\n\n    switch (item.subCommand) {\n      case 'TableHeader':\n        this.tableHeader(args.selection, args.args);\n        break;\n\n      case 'TableRemove':\n        this.removeTable(args.selection, args.args);\n        break;\n\n      case 'TableEditProperties':\n        this.editTable(args);\n        break;\n    }\n  };\n\n  Table.prototype.verticalAlign = function (args, e) {\n    var tdEle = closest(args.selectParent[0], 'td') || closest(args.selectParent[0], 'th');\n\n    if (tdEle) {\n      this.parent.formatter.process(this.parent, e, e, {\n        tableCell: tdEle,\n        subCommand: e.item.subCommand\n      });\n    }\n  };\n\n  Table.prototype.tableStyles = function (args, command) {\n    var table = closest(args.selectParent[0], 'table');\n\n    if (command === 'Dashed') {\n      /* eslint-disable */\n      this.parent.element.classList.contains(classes.CLS_TB_DASH_BOR) ? this.parent.element.classList.remove(classes.CLS_TB_DASH_BOR) : this.parent.element.classList.add(classes.CLS_TB_DASH_BOR);\n      table.classList.contains(classes.CLS_TB_DASH_BOR) ? table.classList.remove(classes.CLS_TB_DASH_BOR) : table.classList.add(classes.CLS_TB_DASH_BOR);\n    }\n\n    if (command === 'Alternate') {\n      this.parent.element.classList.contains(classes.CLS_TB_ALT_BOR) ? this.parent.element.classList.remove(classes.CLS_TB_ALT_BOR) : this.parent.element.classList.add(classes.CLS_TB_ALT_BOR);\n      table.classList.contains(classes.CLS_TB_ALT_BOR) ? table.classList.remove(classes.CLS_TB_ALT_BOR) : table.classList.add(classes.CLS_TB_ALT_BOR);\n      /* eslint-enable */\n    }\n\n    if (args.args && args.args.item.cssClass) {\n      var classList = args.args.item.cssClass.split(' ');\n\n      for (var i = 0; i < classList.length; i++) {\n        if (table.classList.contains(classList[i])) {\n          table.classList.remove(classList[i]);\n        } else {\n          table.classList.add(classList[i]);\n        }\n      }\n    }\n\n    this.parent.formatter.saveData();\n    this.parent.formatter.editorManager.nodeSelection.restore();\n  };\n\n  Table.prototype.insideList = function (range) {\n    var blockNodes = this.parent.formatter.editorManager.domNode.blockNodes();\n    var nodes = [];\n\n    for (var i = 0; i < blockNodes.length; i++) {\n      if (blockNodes[i].parentNode.tagName === 'LI') {\n        nodes.push(blockNodes[i].parentNode);\n      } else if (blockNodes[i].tagName === 'LI' && blockNodes[i].childNodes[0].tagName !== 'P' && blockNodes[i].childNodes[0].tagName !== 'OL' && blockNodes[i].childNodes[0].tagName !== 'UL') {\n        nodes.push(blockNodes[i]);\n      }\n    }\n\n    if (nodes.length > 1 || nodes.length && range.startOffset === 0 && range.endOffset === 0) {\n      this.ensureInsideTableList = true;\n      return true;\n    } else {\n      this.ensureInsideTableList = false;\n      return false;\n    }\n  };\n\n  Table.prototype.tabSelection = function (event, selection, ele) {\n    var insideList = this.insideList(selection.range);\n\n    if ((event.keyCode === 37 || event.keyCode === 39) && selection.range.startContainer.nodeType === 3 || insideList) {\n      return;\n    }\n\n    event.preventDefault();\n    ele.classList.remove(classes.CLS_TABLE_SEL);\n\n    if (!event.shiftKey && event.keyCode !== 37) {\n      var nextElement = !isNullOrUndefined(ele.nextSibling) ? ele.nextSibling : !isNullOrUndefined(closest(ele, 'tr').nextSibling) ? closest(ele, 'tr').nextSibling.childNodes[0] : !isNullOrUndefined(closest(ele, 'table').nextSibling) ? closest(ele, 'table').nextSibling.nodeName.toLowerCase() === 'td' ? closest(ele, 'table').nextSibling : ele : ele;\n\n      if (ele === nextElement && ele.nodeName === 'TH') {\n        nextElement = closest(ele, 'table').rows[1].cells[0];\n      }\n\n      if (event.keyCode === 39 && ele === nextElement) {\n        nextElement = closest(ele, 'table').nextSibling;\n      }\n\n      if (nextElement) {\n        // eslint-disable-next-line\n        nextElement.textContent.trim() !== '' && closest(nextElement, 'td') ? selection.setSelectionNode(this.contentModule.getDocument(), nextElement) : selection.setSelectionText(this.contentModule.getDocument(), nextElement, nextElement, 0, 0);\n      }\n\n      if (ele === nextElement && event.keyCode !== 39 && nextElement) {\n        ele.classList.add(classes.CLS_TABLE_SEL);\n        this.addRow(selection, event, true);\n        ele.classList.remove(classes.CLS_TABLE_SEL);\n        nextElement = nextElement.parentElement.nextSibling.firstChild; // eslint-disable-next-line\n\n        nextElement.textContent.trim() !== '' && closest(nextElement, 'td') ? selection.setSelectionNode(this.contentModule.getDocument(), nextElement) : selection.setSelectionText(this.contentModule.getDocument(), nextElement, nextElement, 0, 0);\n      }\n    } else {\n      var prevElement = !isNullOrUndefined(ele.previousSibling) ? ele.previousSibling : !isNullOrUndefined(closest(ele, 'tr').previousSibling) ? closest(ele, 'tr').previousSibling.childNodes[closest(ele, 'tr').previousSibling.childNodes.length - 1] : !isNullOrUndefined(closest(ele, 'table').previousSibling) ? closest(ele, 'table').previousSibling.nodeName.toLowerCase() === 'td' ? closest(ele, 'table').previousSibling : ele : ele;\n\n      if (ele === prevElement && ele.cellIndex === 0 && closest(ele, 'table').tHead) {\n        var clsTble = closest(ele, 'table');\n        prevElement = clsTble.rows[0].cells[clsTble.rows[0].cells.length - 1];\n      }\n\n      if (event.keyCode === 37 && ele === prevElement) {\n        prevElement = closest(ele, 'table').previousSibling;\n      }\n\n      if (prevElement) {\n        // eslint-disable-next-line\n        prevElement.textContent.trim() !== '' && closest(prevElement, 'td') ? selection.setSelectionNode(this.contentModule.getDocument(), prevElement) : selection.setSelectionText(this.contentModule.getDocument(), prevElement, prevElement, 0, 0);\n      }\n    }\n  };\n\n  Table.prototype.tableArrowNavigation = function (event, selection, ele) {\n    var selText = selection.range.startContainer;\n\n    if (event.keyCode === 40 && selText.nodeType === 3 && (selText.nextSibling && selText.nextSibling.nodeName === 'BR' || selText.parentNode && selText.parentNode.nodeName !== 'TD') || event.keyCode === 38 && selText.nodeType === 3 && (selText.previousSibling && selText.previousSibling.nodeName === 'BR' || selText.parentNode && selText.parentNode.nodeName !== 'TD')) {\n      return;\n    }\n\n    event.preventDefault();\n    ele.classList.remove(classes.CLS_TABLE_SEL);\n\n    if (event.keyCode === 40) {\n      ele = !isNullOrUndefined(closest(ele, 'tr').nextElementSibling) ? closest(ele, 'tr').nextElementSibling.children[ele.cellIndex] : closest(ele, 'table').tHead && ele.nodeName === 'TH' ? closest(ele, 'table').rows[1].cells[ele.cellIndex] : !isNullOrUndefined(closest(ele, 'table').nextSibling) ? closest(ele, 'table').nextSibling : ele;\n    } else {\n      ele = !isNullOrUndefined(closest(ele, 'tr').previousElementSibling) ? closest(ele, 'tr').previousElementSibling.children[ele.cellIndex] : closest(ele, 'table').tHead && ele.nodeName !== 'TH' ? closest(ele, 'table').tHead.rows[0].cells[ele.cellIndex] : !isNullOrUndefined(closest(ele, 'table').previousSibling) ? closest(ele, 'table').previousSibling : ele;\n    }\n\n    if (ele) {\n      selection.setSelectionText(this.contentModule.getDocument(), ele, ele, 0, 0);\n    }\n  };\n\n  Table.prototype.setBGColor = function (args) {\n    var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument()); // eslint-disable-next-line\n\n    var selection = this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument()); // eslint-disable-next-line\n\n    var selectedCells = this.curTable.querySelectorAll('.e-cell-select');\n\n    for (var i = 0; i < selectedCells.length; i++) {\n      selectedCells[i].style.backgroundColor = args.item.value;\n    }\n\n    this.parent.formatter.saveData();\n  };\n\n  Table.prototype.hideTableQuickToolbar = function () {\n    if (this.quickToolObj && this.quickToolObj.tableQTBar && document.body.contains(this.quickToolObj.tableQTBar.element)) {\n      this.quickToolObj.tableQTBar.hidePopup();\n    }\n  };\n\n  Table.prototype.tableHeader = function (selection, e) {\n    this.parent.formatter.process(this.parent, e, e.originalEvent, {\n      selection: selection,\n      subCommand: e.item.subCommand\n    });\n  };\n\n  Table.prototype.editAreaClickHandler = function (e) {\n    if (this.parent.readonly || !isNOU(closest(e.args.target, '.e-img-caption'))) {\n      return;\n    }\n\n    var args = e.args;\n    var showOnRightClick = this.parent.quickToolbarSettings.showOnRightClick;\n\n    if (args.which === 2 || showOnRightClick && args.which === 1 || !showOnRightClick && args.which === 3) {\n      return;\n    }\n\n    if (this.parent.editorMode === 'HTML' && this.parent.quickToolbarModule && this.parent.quickToolbarModule.tableQTBar) {\n      this.quickToolObj = this.parent.quickToolbarModule;\n      var target = args.target;\n      this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n      var isPopupOpen = this.quickToolObj.tableQTBar.element.classList.contains('e-rte-pop');\n\n      if (isPopupOpen) {\n        return;\n      }\n\n      var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());\n      var closestTable = closest(target, 'table');\n      var startNode = this.parent.getRange().startContainer.parentElement;\n      var endNode = this.parent.getRange().endContainer.parentElement;\n\n      if (target && target.nodeName !== 'A' && target.nodeName !== 'IMG' && startNode === endNode && (target.nodeName === 'TD' || target.nodeName === 'TH' || target.nodeName === 'TABLE' || closestTable && this.parent.contentModule.getEditPanel().contains(closestTable)) && !(range.startContainer.nodeType === 3 && !range.collapsed)) {\n        var range_1 = this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());\n        this.parent.formatter.editorManager.nodeSelection.save(range_1, this.contentModule.getDocument());\n        this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n        var pageY = this.parent.iframeSettings.enable ? window.pageYOffset + this.parent.element.getBoundingClientRect().top + args.clientY : args.pageY;\n        this.quickToolObj.tableQTBar.showPopup(args.pageX, pageY, target);\n        this.parent.formatter.editorManager.nodeSelection.restore();\n      } else {\n        this.hideTableQuickToolbar();\n      }\n    }\n  };\n\n  Table.prototype.tableCellSelect = function (e) {\n    var target = e.target;\n    var row = Array.prototype.slice.call(target.parentElement.parentElement.children).indexOf(target.parentElement);\n    var col = Array.prototype.slice.call(target.parentElement.children).indexOf(target);\n    var list = this.dlgDiv.querySelectorAll('.e-rte-tablecell');\n    Array.prototype.forEach.call(list, function (item) {\n      var parentIndex = Array.prototype.slice.call(item.parentElement.parentElement.children).indexOf(item.parentElement);\n      var cellIndex = Array.prototype.slice.call(item.parentElement.children).indexOf(item);\n      removeClass([item], 'e-active');\n\n      if (parentIndex <= row && cellIndex <= col) {\n        addClass([item], 'e-active');\n      }\n    });\n    this.tblHeader.innerHTML = col + 1 + 'x' + (row + 1);\n  }; // eslint-disable-next-line\n\n\n  Table.prototype.tableMouseUp = function (e) {\n    EventHandler.remove(this.curTable, 'mousemove', this.tableMove);\n  }; // eslint-disable-next-line\n\n\n  Table.prototype.tableCellLeave = function (e) {\n    removeClass(this.dlgDiv.querySelectorAll('.e-rte-tablecell'), 'e-active');\n    addClass([this.dlgDiv.querySelector('.e-rte-tablecell')], 'e-active');\n    this.tblHeader.innerHTML = 1 + 'x' + 1;\n  };\n\n  Table.prototype.tableCellClick = function (e) {\n    var target = e.target;\n    var row = Array.prototype.slice.call(target.parentElement.parentElement.children).indexOf(target.parentElement) + 1;\n    var col = Array.prototype.slice.call(target.parentElement.children).indexOf(target) + 1;\n    this.self.tableInsert(row, col, e, this);\n  };\n\n  Table.prototype.tableInsert = function (row, col, e, selectionObj) {\n    var proxy = selectionObj.self ? selectionObj.self : this;\n    var startContainer = selectionObj.selection.range.startContainer;\n\n    if (startContainer.nodeName === 'P' && startContainer.textContent.trim() === '' && !(startContainer.childNodes.length > 0)) {\n      startContainer.innerHTML = '<br />';\n    }\n\n    var parentNode = startContainer.parentNode;\n\n    if (proxy.parent.editorMode === 'HTML' && (proxy.parent.iframeSettings.enable && !hasClass(parentNode.ownerDocument.querySelector('body'), 'e-lib') || // eslint-disable-next-line\n    !proxy.parent.iframeSettings.enable && isNOU(closest(parentNode, '[id=' + \"'\" + proxy.contentModule.getPanel().id + \"'\" + ']')))) {\n      proxy.contentModule.getEditPanel().focus();\n      var range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.contentModule.getDocument());\n      selectionObj.selection = proxy.parent.formatter.editorManager.nodeSelection.save(range, proxy.contentModule.getDocument());\n    }\n\n    var value = {\n      rows: row,\n      columns: col,\n      width: {\n        minWidth: proxy.parent.tableSettings.minWidth,\n        maxWidth: proxy.parent.tableSettings.maxWidth,\n        width: proxy.parent.tableSettings.width\n      },\n      selection: selectionObj.selection\n    };\n\n    if (proxy.popupObj) {\n      proxy.popupObj.hide();\n    }\n\n    if (proxy.editdlgObj) {\n      proxy.editdlgObj.hide();\n    }\n\n    proxy.parent.formatter.process(proxy.parent, selectionObj.args, selectionObj.args.originalEvent, value);\n    proxy.contentModule.getEditPanel().focus();\n    proxy.parent.on(events.mouseDown, proxy.cellSelect, proxy);\n  };\n\n  Table.prototype.cellSelect = function (e) {\n    var target = e.args.target;\n    var tdNode = closest(target, 'td,th');\n    target = target.nodeName !== 'TD' && tdNode && this.parent.contentModule.getEditPanel().contains(tdNode) ? tdNode : target;\n    removeClass(this.contentModule.getEditPanel().querySelectorAll('table td, table th'), classes.CLS_TABLE_SEL);\n\n    if (target && (target.tagName === 'TD' || target.tagName === 'TH')) {\n      addClass([target], classes.CLS_TABLE_SEL);\n      this.activeCell = target;\n      this.curTable = this.curTable ? this.curTable : closest(target, 'table');\n      EventHandler.add(this.curTable, 'mousemove', this.tableMove, this);\n      EventHandler.add(this.curTable, 'mouseup', this.tableMouseUp, this);\n      this.removeResizeElement();\n\n      if (this.helper && this.contentModule.getEditPanel().contains(this.helper)) {\n        detach(this.helper);\n      }\n    }\n\n    if (Browser.info.name === 'mozilla' && !isNOU(closest(target, 'table')) && closest(target, 'table').tagName === 'TABLE') {\n      this.parent.contentModule.getEditPanel().setAttribute('contenteditable', 'false');\n    }\n  };\n\n  Table.prototype.tableMove = function (event) {\n    this.parent.formatter.editorManager.observer.notify('TABLE_MOVE', {\n      event: event,\n      selectNode: [this.activeCell]\n    });\n  };\n\n  Table.prototype.resizeHelper = function (e) {\n    if (this.parent.readonly) {\n      return;\n    }\n\n    var target = e.target || e.targetTouches[0].target;\n    var closestTable = closest(target, 'table.e-rte-table');\n\n    if (!isNOU(this.curTable) && !isNOU(closestTable) && closestTable !== this.curTable) {\n      this.removeResizeElement();\n      this.removeHelper(e);\n      this.cancelResizeAction();\n    }\n\n    if (target.nodeName === 'TABLE' || target.nodeName === 'TD' || target.nodeName === 'TH') {\n      this.curTable = closestTable && this.parent.contentModule.getEditPanel().contains(closestTable) && (target.nodeName === 'TD' || target.nodeName === 'TH') ? closestTable : target;\n      this.removeResizeElement();\n      this.tableResizeEleCreation(this.curTable, e);\n    }\n  };\n\n  Table.prototype.tableResizeEleCreation = function (table, e) {\n    this.parent.preventDefaultResize(e);\n    var columns = Array.prototype.slice.call(table.rows[this.calMaxCol(table)].cells, 1);\n    var rows = [];\n\n    for (var i = 0; i < table.rows.length; i++) {\n      rows.push(Array.prototype.slice.call(table.rows[i].cells, 0, 1)[0]);\n    }\n\n    var height = parseInt(getComputedStyle(table).height, 10);\n    var width = parseInt(getComputedStyle(table).width, 10);\n    var pos = this.calcPos(table);\n\n    for (var i = 0; columns.length > i; i++) {\n      var colReEle = this.parent.createElement('span', {\n        attrs: {\n          'data-col': (i + 1).toString(),\n          'unselectable': 'on',\n          'contenteditable': 'false'\n        }\n      });\n      colReEle.classList.add(classes.CLS_RTE_TABLE_RESIZE, classes.CLS_TB_COL_RES);\n      colReEle.style.cssText = 'height: ' + height + 'px; width: 4px; top: ' + pos.top + 'px; left:' + (pos.left + this.calcPos(columns[i]).left) + 'px;';\n      this.contentModule.getEditPanel().appendChild(colReEle);\n    }\n\n    for (var i = 0; rows.length > i; i++) {\n      var rowReEle = this.parent.createElement('span', {\n        attrs: {\n          'data-row': i.toString(),\n          'unselectable': 'on',\n          'contenteditable': 'false'\n        }\n      });\n      rowReEle.classList.add(classes.CLS_RTE_TABLE_RESIZE, classes.CLS_TB_ROW_RES);\n      var rowPosLeft = !isNOU(table.getAttribute('cellspacing')) || table.getAttribute('cellspacing') !== '' ? 0 : this.calcPos(rows[i]).left;\n      rowReEle.style.cssText = 'width: ' + width + 'px; height: 4px; top: ' + (this.calcPos(rows[i]).top + pos.top + rows[i].offsetHeight - 2) + 'px; left:' + (rowPosLeft + pos.left) + 'px;';\n      this.contentModule.getEditPanel().appendChild(rowReEle);\n    }\n\n    var tableReBox = this.parent.createElement('span', {\n      className: classes.CLS_TB_BOX_RES,\n      attrs: {\n        'data-col': columns.length.toString(),\n        'unselectable': 'on',\n        'contenteditable': 'false'\n      }\n    });\n    tableReBox.style.cssText = 'top: ' + (pos.top + height - 4) + 'px; left:' + (pos.left + width - 4) + 'px;';\n\n    if (Browser.isDevice) {\n      tableReBox.classList.add('e-rmob');\n    }\n\n    this.contentModule.getEditPanel().appendChild(tableReBox);\n  };\n\n  Table.prototype.removeResizeElement = function () {\n    var item = this.parent.contentModule.getEditPanel().querySelectorAll('.e-column-resize, .e-row-resize, .e-table-box');\n\n    if (item.length > 0) {\n      for (var i = 0; i < item.length; i++) {\n        detach(item[i]);\n      }\n    }\n  };\n\n  Table.prototype.calcPos = function (elem) {\n    var parentOffset = {\n      top: 0,\n      left: 0\n    }; // eslint-disable-next-line\n\n    var offset = elem.getBoundingClientRect();\n    var doc = elem.ownerDocument;\n    var offsetParent = elem.offsetParent || doc.documentElement;\n\n    while (offsetParent && (offsetParent === doc.body || offsetParent === doc.documentElement) && offsetParent.style.position === 'static') {\n      offsetParent = offsetParent.parentNode;\n    }\n\n    if (offsetParent.nodeName === 'TD' && elem.nodeName === 'TABLE') {\n      offsetParent = closest(offsetParent, '.e-rte-content');\n    }\n\n    if (offsetParent && offsetParent !== elem && offsetParent.nodeType === 1) {\n      // eslint-disable-next-line\n      parentOffset = offsetParent.getBoundingClientRect();\n    }\n\n    return {\n      top: elem.offsetTop,\n      left: elem.offsetLeft\n    };\n  };\n\n  Table.prototype.getPointX = function (e) {\n    if (e.touches && e.touches.length) {\n      return e.touches[0].pageX;\n    } else {\n      return e.pageX;\n    }\n  };\n\n  Table.prototype.getPointY = function (e) {\n    if (e.touches && e.touches.length) {\n      return e.touches[0].pageY;\n    } else {\n      return e.pageY;\n    }\n  };\n\n  Table.prototype.resizeStart = function (e) {\n    var _this = this;\n\n    if (this.parent.readonly) {\n      return;\n    }\n\n    if (Browser.isDevice) {\n      this.resizeHelper(e);\n    }\n\n    var target = e.target;\n\n    if (target.classList.contains(classes.CLS_TB_COL_RES) || target.classList.contains(classes.CLS_TB_ROW_RES) || target.classList.contains(classes.CLS_TB_BOX_RES)) {\n      e.preventDefault();\n      this.parent.preventDefaultResize(e);\n      removeClass(this.curTable.querySelectorAll('td,th'), classes.CLS_TABLE_SEL);\n      this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n      this.pageX = this.getPointX(e);\n      this.pageY = this.getPointY(e);\n      this.resizeBtnInit();\n      this.hideTableQuickToolbar();\n\n      if (target.classList.contains(classes.CLS_TB_COL_RES)) {\n        this.resizeBtnStat.column = true;\n        this.columnEle = this.curTable.rows[this.calMaxCol(this.curTable)].cells[parseInt(target.getAttribute('data-col'), 10)];\n        this.colIndex = this.columnEle.cellIndex;\n        this.moveEle = e.target;\n        this.appendHelper();\n      }\n\n      if (target.classList.contains(classes.CLS_TB_ROW_RES)) {\n        this.rowEle = this.curTable.rows[parseInt(target.getAttribute('data-row'), 10)];\n        this.resizeBtnStat.row = true;\n        this.appendHelper();\n      }\n\n      if (target.classList.contains(classes.CLS_TB_BOX_RES)) {\n        this.resizeBtnStat.tableBox = true;\n      }\n\n      if (Browser.isDevice && this.helper && !this.helper.classList.contains('e-reicon')) {\n        this.helper.classList.add('e-reicon');\n        EventHandler.add(document, Browser.touchStartEvent, this.removeHelper, this);\n        EventHandler.add(this.helper, Browser.touchStartEvent, this.resizeStart, this);\n      } else {\n        var args = {\n          event: e,\n          requestType: 'Table'\n        };\n        this.parent.trigger(events.resizeStart, args, function (resizeStartArgs) {\n          if (resizeStartArgs.cancel) {\n            _this.cancelResizeAction();\n          }\n        });\n      }\n\n      EventHandler.add(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing, this);\n      EventHandler.add(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd, this);\n    }\n  };\n\n  Table.prototype.removeHelper = function (e) {\n    var cls = e.target.classList;\n\n    if (!cls.contains('e-reicon') && this.helper) {\n      EventHandler.remove(document, Browser.touchStartEvent, this.removeHelper);\n      EventHandler.remove(this.helper, Browser.touchStartEvent, this.resizeStart);\n\n      if (this.helper && this.contentModule.getEditPanel().contains(this.helper)) {\n        detach(this.helper);\n      }\n\n      this.pageX = null;\n      this.helper = null;\n    }\n  };\n\n  Table.prototype.appendHelper = function () {\n    this.helper = this.parent.createElement('div', {\n      className: 'e-table-rhelper'\n    });\n\n    if (Browser.isDevice) {\n      this.helper.classList.add('e-reicon');\n    }\n\n    this.contentModule.getEditPanel().appendChild(this.helper);\n    this.setHelperHeight();\n  };\n\n  Table.prototype.setHelperHeight = function () {\n    var pos = this.calcPos(this.curTable);\n\n    if (this.resizeBtnStat.column) {\n      this.helper.classList.add('e-column-helper');\n      this.helper.style.cssText = 'height: ' + getComputedStyle(this.curTable).height + '; top: ' + pos.top + 'px; left:' + (pos.left + this.calcPos(this.columnEle).left - 1) + 'px;';\n    } else {\n      this.helper.classList.add('e-row-helper');\n      this.helper.style.cssText = 'width: ' + getComputedStyle(this.curTable).width + '; top: ' + (this.calcPos(this.rowEle).top + pos.top + this.rowEle.offsetHeight) + 'px; left:' + (this.calcPos(this.rowEle).left + pos.left) + 'px;';\n    }\n  };\n\n  Table.prototype.updateHelper = function () {\n    var pos = this.calcPos(this.curTable);\n\n    if (this.resizeBtnStat.column) {\n      var left = pos.left + this.calcPos(this.columnEle).left - 1;\n      this.helper.style.left = left + 'px';\n    } else {\n      var top_1 = this.calcPos(this.rowEle).top + pos.top + this.rowEle.offsetHeight;\n      this.helper.style.top = top_1 + 'px';\n    }\n  };\n\n  Table.prototype.calMaxCol = function (element) {\n    var max = 0;\n    var maxRowIndex;\n\n    for (var i = 0; i < element.rows.length; i++) {\n      if (max < element.rows[i].cells.length) {\n        maxRowIndex = i;\n        max = element.rows[i].cells.length;\n      }\n    }\n\n    return maxRowIndex;\n  };\n\n  Table.prototype.resizing = function (e) {\n    var _this = this;\n\n    var pageX = this.getPointX(e);\n    var pageY = this.getPointY(e);\n    var mouseX = this.parent.enableRtl ? -(pageX - this.pageX) : pageX - this.pageX;\n    var mouseY = this.parent.enableRtl ? -(pageY - this.pageY) : pageY - this.pageY;\n    this.pageX = pageX;\n    this.pageY = pageY;\n    var args = {\n      event: e,\n      requestType: 'table'\n    };\n    this.parent.trigger(events.onResize, args, function (resizingArgs) {\n      if (resizingArgs.cancel) {\n        _this.cancelResizeAction();\n      } else {\n        var tableReBox = _this.contentModule.getEditPanel().querySelector('.e-table-box');\n\n        var tableWidth = parseInt(getComputedStyle(_this.curTable).width, 10);\n        var tableHeight = parseInt(getComputedStyle(_this.curTable).height, 10);\n        var paddingSize = +getComputedStyle(_this.contentModule.getEditPanel()).paddingRight.match(/\\d/g).join('');\n        var rteWidth = _this.contentModule.getEditPanel().offsetWidth - paddingSize * 2;\n\n        if (_this.resizeBtnStat.column) {\n          var cellColl = _this.curTable.rows[_this.calMaxCol(_this.curTable)].cells;\n\n          var width = parseFloat(_this.columnEle.offsetWidth.toString());\n          var actualwid = width - mouseX;\n          var totalwid = parseFloat(_this.columnEle.offsetWidth.toString()) + parseFloat(cellColl[_this.colIndex - 1].offsetWidth.toString());\n\n          for (var i = 0; i < _this.curTable.rows.length; i++) {\n            if (totalwid - actualwid > 20 && actualwid > 20) {\n              var leftColumnWidth = totalwid - actualwid;\n              var rightColWidth = actualwid;\n\n              if (!isNOU(_this.curTable.rows[i].cells[_this.colIndex - 1])) {\n                _this.curTable.rows[i].cells[_this.colIndex - 1].style.width = _this.convertPixelToPercentage(leftColumnWidth, tableWidth) + '%';\n              }\n\n              if (!isNOU(_this.curTable.rows[i].cells[_this.colIndex])) {\n                _this.curTable.rows[i].cells[_this.colIndex].style.width = _this.convertPixelToPercentage(rightColWidth, tableWidth) + '%';\n              }\n            }\n          }\n\n          _this.updateHelper();\n        } else if (_this.resizeBtnStat.row) {\n          _this.parent.preventDefaultResize(e);\n\n          var height = parseFloat(_this.rowEle.clientHeight.toString()) + mouseY;\n\n          if (height > 20) {\n            _this.rowEle.style.height = height + 'px';\n          }\n\n          _this.curTable.style.height = '';\n\n          if (!isNOU(tableReBox)) {\n            tableReBox.style.cssText = 'top: ' + (_this.calcPos(_this.curTable).top + tableHeight - 4) + 'px; left:' + (_this.calcPos(_this.curTable).left + tableWidth - 4) + 'px;';\n          }\n\n          _this.updateHelper();\n        } else if (_this.resizeBtnStat.tableBox) {\n          if (!Browser.isDevice) {\n            EventHandler.remove(_this.contentModule.getEditPanel(), 'mouseover', _this.resizeHelper);\n          }\n\n          var widthType = _this.curTable.style.width.indexOf('%') > -1;\n          _this.curTable.style.width = widthType ? _this.convertPixelToPercentage(tableWidth + mouseX, rteWidth) + '%' : tableWidth + mouseX + 'px';\n          _this.curTable.style.height = tableHeight + mouseY + 'px';\n          tableReBox.classList.add('e-rbox-select');\n          tableReBox.style.cssText = 'top: ' + (_this.calcPos(_this.curTable).top + tableHeight - 4) + 'px; left:' + (_this.calcPos(_this.curTable).left + tableWidth - 4) + 'px;';\n        }\n      }\n    });\n  };\n\n  Table.prototype.convertPixelToPercentage = function (value, offsetValue) {\n    return value / offsetValue * 100;\n  };\n\n  Table.prototype.cancelResizeAction = function () {\n    EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n    EventHandler.remove(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd);\n    this.removeResizeElement();\n  };\n\n  Table.prototype.resizeEnd = function (e) {\n    this.resizeBtnInit();\n    EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n    EventHandler.remove(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd);\n\n    if (this.contentModule.getEditPanel().querySelector('.e-table-box') && this.contentModule.getEditPanel().contains(this.contentModule.getEditPanel().querySelector('.e-table-box'))) {\n      if (!Browser.isDevice) {\n        EventHandler.add(this.contentModule.getEditPanel(), 'mouseover', this.resizeHelper, this);\n      }\n\n      this.removeResizeElement();\n\n      if (this.helper && this.contentModule.getEditPanel().contains(this.helper)) {\n        detach(this.helper);\n        this.helper = null;\n      }\n\n      this.pageX = null;\n      this.pageY = null;\n      this.moveEle = null;\n    }\n\n    var args = {\n      event: e,\n      requestType: 'table'\n    };\n    this.parent.trigger(events.resizeStop, args);\n    this.parent.formatter.saveData();\n  };\n\n  Table.prototype.resizeBtnInit = function () {\n    return this.resizeBtnStat = {\n      column: false,\n      row: false,\n      tableBox: false\n    };\n  };\n\n  Table.prototype.addRow = function (selectCell, e, tabkey) {\n    var cmd;\n\n    if (tabkey) {\n      cmd = {\n        item: {\n          command: 'Table',\n          subCommand: 'InsertRowAfter'\n        }\n      };\n    }\n\n    var value = {\n      selection: selectCell,\n      subCommand: tabkey ? cmd.item.subCommand : e.item.subCommand\n    };\n    this.parent.formatter.process(this.parent, tabkey ? cmd : e, e, value);\n  };\n\n  Table.prototype.addColumn = function (selectCell, e) {\n    this.parent.formatter.process(this.parent, e, e, {\n      selection: selectCell,\n      width: this.parent.tableSettings.width,\n      subCommand: e.item.subCommand\n    });\n  };\n\n  Table.prototype.removeRowColumn = function (selectCell, e) {\n    this.parent.formatter.process(this.parent, e, e, {\n      selection: selectCell,\n      subCommand: e.item.subCommand\n    });\n    this.hideTableQuickToolbar();\n  };\n\n  Table.prototype.removeTable = function (selection, args, delKey) {\n    var cmd;\n\n    if (delKey) {\n      cmd = {\n        item: {\n          command: 'Table',\n          subCommand: 'TableRemove'\n        }\n      };\n    }\n\n    var value = {\n      selection: selection,\n      subCommand: delKey ? cmd.item.subCommand : args.item.subCommand\n    };\n    this.parent.formatter.process(this.parent, delKey ? cmd : args, args.originalEvent, value);\n    this.contentModule.getEditPanel().focus();\n    this.removeResizeElement();\n    this.hideTableQuickToolbar();\n  };\n\n  Table.prototype.renderDlgContent = function (args) {\n    var _this = this;\n\n    if (Browser.isDevice || this.parent.inlineMode.enable) {\n      this.insertTableDialog(args);\n      return;\n    }\n\n    if (this.popupObj) {\n      this.popupObj.hide();\n      return;\n    }\n\n    this.hideTableQuickToolbar();\n    var header = '1X1';\n    var insertbtn = this.l10n.getConstant('inserttablebtn');\n    this.dlgDiv = this.parent.createElement('div', {\n      className: 'e-rte-table-popup',\n      id: this.rteID + '_table'\n    });\n    this.tblHeader = this.parent.createElement('div', {\n      className: 'e-rte-popup-header'\n    });\n    this.tblHeader.innerHTML = header;\n    this.dlgDiv.appendChild(this.tblHeader);\n    var tableDiv = this.parent.createElement('div', {\n      className: 'e-rte-table-span'\n    });\n    this.drawTable(tableDiv, args);\n    this.dlgDiv.appendChild(tableDiv);\n    this.dlgDiv.appendChild(this.parent.createElement('span', {\n      className: 'e-span-border'\n    }));\n    var btnEle = this.parent.createElement('button', {\n      className: 'e-insert-table-btn',\n      id: this.rteID + '_insertTable',\n      attrs: {\n        type: 'button',\n        tabindex: '0'\n      }\n    });\n\n    if (!isNOU(this.parent.getToolbarElement().querySelector('.e-expended-nav'))) {\n      this.parent.getToolbarElement().querySelector('.e-expended-nav').setAttribute('tabindex', '1');\n    }\n\n    this.dlgDiv.appendChild(btnEle);\n    var button = new Button({\n      iconCss: 'e-icons e-create-table',\n      content: insertbtn,\n      cssClass: 'e-flat',\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale\n    });\n    button.isStringTemplate = true;\n    button.appendTo(btnEle);\n    EventHandler.add(btnEle, 'click', this.insertTableDialog, {\n      self: this,\n      args: args.args,\n      selection: args.selection\n    });\n    this.parent.getToolbar().appendChild(this.dlgDiv);\n    var target = args.args.originalEvent.target;\n    target = target.classList.contains('e-toolbar-item') ? target.firstChild : target.parentElement;\n    this.popupObj = new Popup(this.dlgDiv, {\n      targetType: 'relative',\n      relateTo: target,\n      collision: {\n        X: 'fit',\n        Y: 'none'\n      },\n      offsetY: 8,\n      viewPortElement: this.parent.element,\n      position: {\n        X: 'left',\n        Y: 'bottom'\n      },\n      enableRtl: this.parent.enableRtl,\n      zIndex: 10001,\n      // eslint-disable-next-line\n      close: function (event) {\n        _this.parent.isBlur = false;\n\n        _this.popupObj.destroy();\n\n        detach(_this.popupObj.element);\n        _this.popupObj = null;\n      }\n    });\n    addClass([this.popupObj.element], 'e-popup-open');\n    this.popupObj.refreshPosition(target);\n  };\n\n  Table.prototype.docClick = function (e) {\n    var target = e.args.target; // eslint-disable-next-line\n\n    if (target && target.classList && (this.popupObj && !closest(target, '[id=' + \"'\" + this.popupObj.element.id + \"'\" + ']') || this.editdlgObj && !closest(target, '#' + this.editdlgObj.element.id)) && !target.classList.contains('e-create-table') && target.offsetParent && !target.offsetParent.classList.contains('e-rte-backgroundcolor-dropdown')) {\n      if (this.popupObj) {\n        this.popupObj.hide();\n      }\n\n      if (this.editdlgObj) {\n        this.editdlgObj.hide();\n      }\n\n      this.parent.isBlur = true;\n      dispatchEvent(this.parent.element, 'focusout');\n    }\n\n    var closestEle = closest(target, 'td');\n    var isExist = closestEle && this.parent.contentModule.getEditPanel().contains(closestEle) ? true : false;\n\n    if (target && target.tagName !== 'TD' && target.tagName !== 'TH' && !isExist && closest(target, '.e-rte-quick-popup') === null && target.offsetParent && !target.offsetParent.classList.contains('e-quick-dropdown') && !target.offsetParent.classList.contains('e-rte-backgroundcolor-dropdown') && !closest(target, '.e-rte-dropdown-popup') && !closest(target, '.e-rte-elements')) {\n      removeClass(this.parent.element.querySelectorAll('table td'), classes.CLS_TABLE_SEL);\n\n      if (!Browser.isIE) {\n        this.hideTableQuickToolbar();\n      }\n    }\n\n    if (target && target.classList && !target.classList.contains(classes.CLS_TB_COL_RES) && !target.classList.contains(classes.CLS_TB_ROW_RES) && !target.classList.contains(classes.CLS_TB_BOX_RES)) {\n      this.removeResizeElement();\n    }\n  };\n\n  Table.prototype.drawTable = function (tableDiv, args) {\n    var rowDiv;\n    var tableCell;\n\n    for (var row = 0; row < 3; row++) {\n      rowDiv = this.parent.createElement('div', {\n        className: 'e-rte-table-row',\n        attrs: {\n          'data-column': '' + row\n        }\n      });\n\n      for (var col = 0; col < 10; col++) {\n        var display = row > 2 ? 'none' : 'inline-block';\n        tableCell = this.parent.createElement('div', {\n          className: 'e-rte-tablecell e-default',\n          attrs: {\n            'data-cell': '' + col\n          }\n        });\n        rowDiv.appendChild(tableCell);\n        tableCell.style.display = display;\n\n        if (col === 0 && row === 0) {\n          addClass([tableCell], 'e-active');\n        }\n\n        EventHandler.add(tableCell, 'mousemove', this.tableCellSelect, this);\n        EventHandler.add(rowDiv, 'mouseleave', this.tableCellLeave, this);\n        EventHandler.add(tableCell, 'mouseup', this.tableCellClick, {\n          self: this,\n          args: args.args,\n          selection: args.selection\n        });\n      }\n\n      tableDiv.appendChild(rowDiv);\n    }\n  };\n\n  Table.prototype.editTable = function (args) {\n    var _this = this;\n\n    this.createDialog(args);\n    var editContent = this.tableDlgContent(args);\n    var update = this.l10n.getConstant('dialogUpdate');\n    var cancel = this.l10n.getConstant('dialogCancel');\n    var editHeader = this.l10n.getConstant('tableEditHeader');\n    this.editdlgObj.setProperties({\n      height: 'initial',\n      width: '290px',\n      content: editContent,\n      header: editHeader,\n      buttons: [{\n        click: this.applyProperties.bind(this, args),\n        buttonModel: {\n          content: update,\n          cssClass: 'e-flat e-size-update',\n          isPrimary: true\n        }\n      }, {\n        click: function (e) {\n          _this.cancelDialog(e);\n        },\n        buttonModel: {\n          cssClass: 'e-flat e-cancel',\n          content: cancel\n        }\n      }]\n    });\n    this.editdlgObj.element.style.maxHeight = 'none';\n    this.editdlgObj.content.querySelector('input').focus();\n    this.hideTableQuickToolbar();\n  };\n\n  Table.prototype.insertTableDialog = function (args) {\n    var proxy = this.self ? this.self : this;\n\n    if (proxy.popupObj) {\n      proxy.popupObj.hide();\n    }\n\n    proxy.createDialog(args);\n    var dlgContent = proxy.tableCellDlgContent();\n    var insert = proxy.l10n.getConstant('dialogInsert');\n    var cancel = proxy.l10n.getConstant('dialogCancel');\n\n    if (isNullOrUndefined(proxy.editdlgObj)) {\n      return;\n    }\n\n    proxy.editdlgObj.setProperties({\n      height: 'initial',\n      width: '290px',\n      content: dlgContent,\n      buttons: [{\n        click: proxy.customTable.bind(this, args),\n        buttonModel: {\n          content: insert,\n          cssClass: 'e-flat e-insert-table',\n          isPrimary: true\n        }\n      }, {\n        click: function (e) {\n          proxy.cancelDialog(e);\n        },\n        buttonModel: {\n          cssClass: 'e-flat e-cancel',\n          content: cancel\n        }\n      }]\n    });\n    proxy.editdlgObj.element.style.maxHeight = 'none';\n    proxy.editdlgObj.content.querySelector('input').focus();\n  };\n\n  Table.prototype.tableCellDlgContent = function () {\n    var tableColumn = this.l10n.getConstant('columns');\n    var tableRow = this.l10n.getConstant('rows');\n    var tableWrap = this.parent.createElement('div', {\n      className: 'e-cell-wrap'\n    });\n    var content = '<div class=\"e-rte-field\"><input type=\"text\" ' + ' data-role =\"none\" id=\"tableColumn\" class=\"e-table-column\"/></div>' + '<div class=\"e-rte-field\"><input type=\"text\" data-role =\"none\" id=\"tableRow\" class=\"e-table-row\" /></div>';\n    var contentElem = parseHtml(content);\n    tableWrap.appendChild(contentElem);\n    this.columnTextBox = new NumericTextBox({\n      format: 'n0',\n      min: 1,\n      value: 3,\n      placeholder: tableColumn,\n      floatLabelType: 'Auto',\n      max: 50,\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale\n    });\n    this.columnTextBox.isStringTemplate = true;\n    this.columnTextBox.appendTo(tableWrap.querySelector('#tableColumn'));\n    this.rowTextBox = new NumericTextBox({\n      format: 'n0',\n      min: 1,\n      value: 3,\n      placeholder: tableRow,\n      floatLabelType: 'Auto',\n      max: 50,\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale\n    });\n    this.rowTextBox.isStringTemplate = true;\n    this.rowTextBox.appendTo(tableWrap.querySelector('#tableRow'));\n    return tableWrap;\n  };\n\n  Table.prototype.clearDialogObj = function () {\n    if (this.editdlgObj) {\n      this.editdlgObj.destroy();\n      detach(this.editdlgObj.element);\n      this.editdlgObj = null;\n    }\n  }; // eslint-disable-next-line\n\n\n  Table.prototype.createDialog = function (args) {\n    var _this = this;\n\n    if (this.editdlgObj) {\n      this.editdlgObj.hide({\n        returnValue: true\n      });\n      return;\n    }\n\n    var tableDialog = this.parent.createElement('div', {\n      className: 'e-rte-edit-table',\n      id: this.rteID + '_tabledialog'\n    });\n    this.parent.element.appendChild(tableDialog);\n    var insert = this.l10n.getConstant('dialogInsert');\n    var cancel = this.l10n.getConstant('dialogCancel');\n    var header = this.l10n.getConstant('tabledialogHeader');\n    var dialogModel = {\n      header: header,\n      cssClass: classes.CLS_RTE_ELEMENTS,\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale,\n      showCloseIcon: true,\n      closeOnEscape: true,\n      width: Browser.isDevice ? '290px' : '340px',\n      height: 'initial',\n      position: {\n        X: 'center',\n        Y: Browser.isDevice ? 'center' : 'top'\n      },\n      isModal: Browser.isDevice,\n      buttons: [{\n        buttonModel: {\n          content: insert,\n          cssClass: 'e-flat e-insert-table',\n          isPrimary: true\n        }\n      }, {\n        click: function (e) {\n          _this.cancelDialog(e);\n        },\n        buttonModel: {\n          cssClass: 'e-flat e-cancel',\n          content: cancel\n        }\n      }],\n      target: Browser.isDevice ? document.body : this.parent.element,\n      animationSettings: {\n        effect: 'None'\n      },\n      close: function (event) {\n        _this.parent.isBlur = false;\n\n        _this.editdlgObj.destroy();\n\n        detach(_this.editdlgObj.element);\n\n        _this.dialogRenderObj.close(event);\n\n        _this.editdlgObj = null;\n      }\n    };\n    this.editdlgObj = this.dialogRenderObj.render(dialogModel);\n    this.editdlgObj.appendTo(tableDialog);\n\n    if (this.quickToolObj && this.quickToolObj.inlineQTBar && document.body.contains(this.quickToolObj.inlineQTBar.element)) {\n      this.quickToolObj.inlineQTBar.hidePopup();\n    }\n  };\n\n  Table.prototype.customTable = function (args, e) {\n    var proxy = this.self ? this.self : this;\n\n    if (proxy.rowTextBox.value && proxy.columnTextBox.value) {\n      var argument = Browser.isDevice || !isNullOrUndefined(args.args) && !isNullOrUndefined(args.args.originalEvent) && args.args.originalEvent.action === 'insert-table' || proxy.parent.inlineMode.enable ? args : this;\n      proxy.tableInsert(proxy.rowTextBox.value, proxy.columnTextBox.value, e, argument);\n    }\n  }; // eslint-disable-next-line\n\n\n  Table.prototype.cancelDialog = function (e) {\n    this.parent.isBlur = false;\n    this.editdlgObj.hide({\n      returnValue: true\n    });\n  }; // eslint-disable-next-line\n\n\n  Table.prototype.applyProperties = function (args, e) {\n    var dialogEle = this.editdlgObj.element;\n    var table = closest(args.selectNode[0], 'table');\n    table.style.width = dialogEle.querySelector('.e-table-width').value + 'px';\n\n    if (dialogEle.querySelector('.e-cell-padding').value !== '') {\n      var tdElm = table.querySelectorAll('td');\n\n      for (var i = 0; i < tdElm.length; i++) {\n        var padVal = '';\n\n        if (tdElm[i].style.padding === '') {\n          padVal = tdElm[i].getAttribute('style') + ' padding:' + dialogEle.querySelector('.e-cell-padding').value + 'px;';\n        } else {\n          tdElm[i].style.padding = dialogEle.querySelector('.e-cell-padding').value + 'px';\n          padVal = tdElm[i].getAttribute('style');\n        }\n\n        tdElm[i].setAttribute('style', padVal);\n      }\n    }\n\n    table.cellSpacing = dialogEle.querySelector('.e-cell-spacing').value;\n\n    if (!isNOU(table.cellSpacing) || table.cellSpacing !== '0') {\n      addClass([table], classes.CLS_TABLE_BORDER);\n    } else {\n      removeClass([table], classes.CLS_TABLE_BORDER);\n    }\n\n    this.parent.formatter.saveData();\n    this.editdlgObj.hide({\n      returnValue: true\n    });\n  };\n\n  Table.prototype.tableDlgContent = function (e) {\n    var selectNode = e.selectParent[0];\n    var tableWidth = this.l10n.getConstant('tableWidth');\n    var cellPadding = this.l10n.getConstant('cellpadding');\n    var cellSpacing = this.l10n.getConstant('cellspacing');\n    var tableWrap = this.parent.createElement('div', {\n      className: 'e-table-sizewrap'\n    });\n    var widthVal = closest(selectNode, 'table').getClientRects()[0].width;\n    var padVal = closest(selectNode, 'td').style.padding;\n    var brdSpcVal = closest(selectNode, 'table').getAttribute('cellspacing');\n    var content = '<div class=\"e-rte-field\"><input type=\"text\" data-role =\"none\" id=\"tableWidth\" class=\"e-table-width\" ' + ' /></div>' + '<div class=\"e-rte-field\"><input type=\"text\" data-role =\"none\" id=\"cellPadding\" class=\"e-cell-padding\" />' + ' </div><div class=\"e-rte-field\"><input type=\"text\" data-role =\"none\" id=\"cellSpacing\" class=\"e-cell-spacing\" /></div>';\n    var contentElem = parseHtml(content);\n    tableWrap.appendChild(contentElem);\n    var widthNum = new NumericTextBox({\n      format: 'n0',\n      min: 0,\n      value: widthVal,\n      placeholder: tableWidth,\n      floatLabelType: 'Auto',\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale\n    });\n    widthNum.isStringTemplate = true;\n    widthNum.appendTo(tableWrap.querySelector('#tableWidth'));\n    var padding = new NumericTextBox({\n      format: 'n0',\n      min: 0,\n      // eslint-disable-next-line\n      value: padVal !== '' ? parseInt(padVal, null) : 0,\n      placeholder: cellPadding,\n      floatLabelType: 'Auto',\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale\n    });\n    padding.isStringTemplate = true;\n    padding.appendTo(tableWrap.querySelector('#cellPadding'));\n    var spacing = new NumericTextBox({\n      format: 'n0',\n      min: 0,\n      // eslint-disable-next-line\n      value: brdSpcVal !== '' && !isNOU(brdSpcVal) ? parseInt(brdSpcVal, null) : 0,\n      placeholder: cellSpacing,\n      floatLabelType: 'Auto',\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale\n    });\n    spacing.isStringTemplate = true;\n    spacing.appendTo(tableWrap.querySelector('#cellSpacing'));\n    return tableWrap;\n  };\n  /**\n   * Destroys the ToolBar.\n   *\n   * @function destroy\n   * @returns {void}\n   * @hidden\n    */\n\n\n  Table.prototype.destroy = function () {\n    this.removeEventListener();\n  };\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {void}\n   */\n\n\n  Table.prototype.getModuleName = function () {\n    return 'table';\n  };\n\n  return Table;\n}();\n\nexport { Table };","map":{"version":3,"names":["detach","closest","Browser","isNullOrUndefined","isNOU","EventHandler","addClass","removeClass","Popup","Button","events","RenderType","NumericTextBox","classes","dispatchEvent","parseHtml","hasClass","Table","parent","serviceLocator","ensureInsideTableList","pageX","pageY","moveEle","rteID","element","id","l10n","getService","rendererFactory","dialogRenderObj","addEventListener","prototype","isDestroyed","on","createTable","renderDlgContent","initialEnd","afterRender","dynamicModule","showTableDialog","showDialog","closeTableDialog","closeDialog","docClick","editAreaClick","editAreaClickHandler","clearDialogObj","tableToolbarAction","onToolbarAction","dropDownSelect","dropdownSelect","keyDown","mouseUp","selectionTable","destroy","removeEventListener","off","mouseDown","cellSelect","tableColorPickerChanged","setBGColor","e","target","args","info","name","tagName","contentModule","getEditPanel","setAttribute","getRenderer","Content","tableSettings","resize","add","touchStartEvent","resizeStart","isDevice","resizeHelper","item","document","body","contains","querySelector","command","range","formatter","editorManager","nodeSelection","getRange","getDocument","selection","save","selectParent","getParentNodeCollection","subCommand","addRow","addColumn","removeRowColumn","verticalAlign","tableStyles","UpdateCells","selectCell","process","hideTableQuickToolbar","event","proxy","action","openDialog","preventDefault","code","ele","parentElement","keyCode","ctrlKey","removeTable","querySelectorAll","length","removeResizeElement","closestTd","inputElement","tabSelection","tableArrowNavigation","isInternal","focus","editorMode","docElement","originalEvent","insertTableDialog","self","editdlgObj","hide","returnValue","tableHeader","editTable","tdEle","tableCell","table","classList","CLS_TB_DASH_BOR","remove","CLS_TB_ALT_BOR","cssClass","split","i","saveData","restore","insideList","blockNodes","domNode","nodes","parentNode","push","childNodes","startOffset","endOffset","startContainer","nodeType","CLS_TABLE_SEL","shiftKey","nextElement","nextSibling","nodeName","toLowerCase","rows","cells","textContent","trim","setSelectionNode","setSelectionText","firstChild","prevElement","previousSibling","cellIndex","tHead","clsTble","selText","nextElementSibling","children","previousElementSibling","selectedCells","curTable","style","backgroundColor","value","quickToolObj","tableQTBar","hidePopup","readonly","showOnRightClick","quickToolbarSettings","which","quickToolbarModule","isPopupOpen","closestTable","startNode","endNode","endContainer","collapsed","range_1","Clear","iframeSettings","enable","window","pageYOffset","getBoundingClientRect","top","clientY","showPopup","tableCellSelect","row","Array","slice","call","indexOf","col","list","dlgDiv","forEach","parentIndex","tblHeader","innerHTML","tableMouseUp","tableMove","tableCellLeave","tableCellClick","tableInsert","selectionObj","ownerDocument","getPanel","columns","width","minWidth","maxWidth","popupObj","tdNode","activeCell","helper","observer","notify","selectNode","targetTouches","removeHelper","cancelResizeAction","tableResizeEleCreation","preventDefaultResize","calMaxCol","height","parseInt","getComputedStyle","pos","calcPos","colReEle","createElement","attrs","toString","CLS_RTE_TABLE_RESIZE","CLS_TB_COL_RES","cssText","left","appendChild","rowReEle","CLS_TB_ROW_RES","rowPosLeft","getAttribute","offsetHeight","tableReBox","className","CLS_TB_BOX_RES","elem","parentOffset","offset","doc","offsetParent","documentElement","position","offsetTop","offsetLeft","getPointX","touches","getPointY","_this","resizeBtnInit","resizeBtnStat","column","columnEle","colIndex","appendHelper","rowEle","tableBox","requestType","trigger","resizeStartArgs","cancel","touchMoveEvent","resizing","touchEndEvent","resizeEnd","cls","setHelperHeight","updateHelper","top_1","max","maxRowIndex","mouseX","enableRtl","mouseY","onResize","resizingArgs","tableWidth","tableHeight","paddingSize","paddingRight","match","join","rteWidth","offsetWidth","cellColl","parseFloat","actualwid","totalwid","leftColumnWidth","rightColWidth","convertPixelToPercentage","clientHeight","widthType","offsetValue","resizeStop","tabkey","cmd","delKey","inlineMode","header","insertbtn","getConstant","tableDiv","drawTable","btnEle","type","tabindex","getToolbarElement","button","iconCss","content","locale","isStringTemplate","appendTo","getToolbar","targetType","relateTo","collision","X","Y","offsetY","viewPortElement","zIndex","close","isBlur","refreshPosition","closestEle","isExist","isIE","rowDiv","display","createDialog","editContent","tableDlgContent","update","editHeader","setProperties","buttons","click","applyProperties","bind","buttonModel","isPrimary","cancelDialog","maxHeight","dlgContent","tableCellDlgContent","insert","customTable","tableColumn","tableRow","tableWrap","contentElem","columnTextBox","format","min","placeholder","floatLabelType","rowTextBox","tableDialog","dialogModel","CLS_RTE_ELEMENTS","showCloseIcon","closeOnEscape","isModal","animationSettings","effect","render","inlineQTBar","argument","dialogEle","tdElm","padVal","padding","cellSpacing","CLS_TABLE_BORDER","cellPadding","widthVal","getClientRects","brdSpcVal","widthNum","spacing","getModuleName"],"sources":["C:/Users/shahj/OneDrive/Documents/GitHub/Multifunctional-React-Dashboard/node_modules/@syncfusion/ej2-richtexteditor/src/rich-text-editor/renderer/table-module.js"],"sourcesContent":["import { detach, closest, Browser, isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, EventHandler, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport * as classes from '../base/classes';\nimport { dispatchEvent, parseHtml, hasClass } from '../base/util';\n/**\n * `Table` module is used to handle table actions.\n */\nvar Table = /** @class */ (function () {\n    function Table(parent, serviceLocator) {\n        this.ensureInsideTableList = true;\n        this.pageX = null;\n        this.pageY = null;\n        this.moveEle = null;\n        this.parent = parent;\n        this.rteID = parent.element.id;\n        this.l10n = serviceLocator.getService('rteLocale');\n        this.rendererFactory = serviceLocator.getService('rendererFactory');\n        this.dialogRenderObj = serviceLocator.getService('dialogRenderObject');\n        this.addEventListener();\n    }\n    Table.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.createTable, this.renderDlgContent, this);\n        this.parent.on(events.initialEnd, this.afterRender, this);\n        this.parent.on(events.dynamicModule, this.afterRender, this);\n        this.parent.on(events.showTableDialog, this.showDialog, this);\n        this.parent.on(events.closeTableDialog, this.closeDialog, this);\n        this.parent.on(events.docClick, this.docClick, this);\n        this.parent.on(events.editAreaClick, this.editAreaClickHandler, this);\n        this.parent.on(events.clearDialogObj, this.clearDialogObj, this);\n        this.parent.on(events.tableToolbarAction, this.onToolbarAction, this);\n        this.parent.on(events.dropDownSelect, this.dropdownSelect, this);\n        this.parent.on(events.keyDown, this.keyDown, this);\n        this.parent.on(events.mouseUp, this.selectionTable, this);\n        this.parent.on(events.destroy, this.destroy, this);\n    };\n    Table.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.createTable, this.renderDlgContent);\n        this.parent.off(events.initialEnd, this.afterRender);\n        this.parent.off(events.dynamicModule, this.afterRender);\n        this.parent.off(events.docClick, this.docClick);\n        this.parent.off(events.showTableDialog, this.showDialog);\n        this.parent.off(events.closeTableDialog, this.closeDialog);\n        this.parent.off(events.editAreaClick, this.editAreaClickHandler);\n        this.parent.off(events.clearDialogObj, this.clearDialogObj);\n        this.parent.off(events.tableToolbarAction, this.onToolbarAction);\n        this.parent.off(events.dropDownSelect, this.dropdownSelect);\n        this.parent.off(events.mouseDown, this.cellSelect);\n        this.parent.off(events.tableColorPickerChanged, this.setBGColor);\n        this.parent.off(events.keyDown, this.keyDown);\n        this.parent.off(events.mouseUp, this.selectionTable);\n        this.parent.off(events.destroy, this.destroy);\n    };\n    Table.prototype.selectionTable = function (e) {\n        var target = e.args.target;\n        if (Browser.info.name === 'mozilla' && !isNOU(closest(target, 'table')) && closest(target, 'table').tagName === 'TABLE') {\n            this.parent.contentModule.getEditPanel().setAttribute('contenteditable', 'true');\n        }\n    };\n    Table.prototype.afterRender = function () {\n        if (isNullOrUndefined(this.contentModule)) {\n            this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n            this.parent.on(events.tableColorPickerChanged, this.setBGColor, this);\n            this.parent.on(events.mouseDown, this.cellSelect, this);\n            if (this.parent.tableSettings.resize) {\n                EventHandler.add(this.parent.contentModule.getEditPanel(), Browser.touchStartEvent, this.resizeStart, this);\n            }\n            if (!Browser.isDevice && this.parent.tableSettings.resize) {\n                EventHandler.add(this.contentModule.getEditPanel(), 'mouseover', this.resizeHelper, this);\n            }\n        }\n    };\n    Table.prototype.dropdownSelect = function (e) {\n        var item = e.item;\n        if (!document.body.contains(document.body.querySelector('.e-rte-quick-toolbar')) || item.command !== 'Table') {\n            return;\n        }\n        var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n        var args = {\n            args: e,\n            selection: this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument()),\n            selectParent: this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range)\n        };\n        switch (item.subCommand) {\n            case 'InsertRowBefore':\n            case 'InsertRowAfter':\n                this.addRow(args.selection, e);\n                break;\n            case 'InsertColumnLeft':\n            case 'InsertColumnRight':\n                this.addColumn(args.selection, e);\n                break;\n            case 'DeleteColumn':\n            case 'DeleteRow':\n                this.removeRowColumn(args.selection, e);\n                break;\n            case 'AlignTop':\n            case 'AlignMiddle':\n            case 'AlignBottom':\n                this.verticalAlign(args, e);\n                break;\n            case 'Dashed':\n            case 'Alternate':\n            case 'Custom':\n                this.tableStyles(args, item.subCommand);\n                break;\n            case 'Merge':\n            case 'VerticalSplit':\n            case 'HorizontalSplit':\n                this.UpdateCells(args.selection, e);\n                break;\n        }\n    };\n    Table.prototype.UpdateCells = function (selectCell, e) {\n        this.parent.formatter.process(this.parent, e, e, { selection: selectCell, subCommand: e.item.subCommand });\n        this.hideTableQuickToolbar();\n    };\n    Table.prototype.keyDown = function (e) {\n        var event = e.args;\n        // eslint-disable-next-line\n        var proxy = this;\n        switch (event.action) {\n            case 'escape':\n                break;\n            case 'insert-table':\n                this.openDialog(true, e);\n                event.preventDefault();\n                break;\n        }\n        if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection) && this.contentModule\n            && event.code !== 'KeyK') {\n            var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            var selection = this.parent.formatter.editorManager.\n                nodeSelection.save(range, this.contentModule.getDocument());\n            var ele = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range)[0];\n            ele = (ele && ele.tagName !== 'TD' && ele.tagName !== 'TH') ? ele.parentElement : ele;\n            if ((event.keyCode === 8 || event.keyCode === 46) ||\n                (event.ctrlKey && event.keyCode === 88)) {\n                if (ele && ele.tagName === 'TBODY') {\n                    event.preventDefault();\n                    proxy.removeTable(selection, event, true);\n                }\n                else if (ele && ele.querySelectorAll('table').length > 0) {\n                    this.removeResizeElement();\n                }\n            }\n            if (ele && ele.tagName !== 'TD' && ele.tagName !== 'TH') {\n                var closestTd = closest(ele, 'td');\n                ele = !isNullOrUndefined(closestTd) && this.parent.inputElement.contains(closestTd) ? closestTd : ele;\n            }\n            if (ele && (ele.tagName === 'TD' || ele.tagName === 'TH')) {\n                switch (event.keyCode) {\n                    case 9:\n                    case 37:\n                    case 39:\n                        proxy.tabSelection(event, selection, ele);\n                        break;\n                    case 40:\n                    case 38:\n                        proxy.tableArrowNavigation(event, selection, ele);\n                        break;\n                }\n            }\n        }\n    };\n    Table.prototype.openDialog = function (isInternal, e) {\n        if (!isInternal) {\n            this.parent.contentModule.getEditPanel().focus();\n        }\n        if (this.parent.editorMode === 'HTML') {\n            var docElement = this.parent.contentModule.getDocument();\n            var range = this.parent.formatter.editorManager.nodeSelection.getRange(docElement);\n            var selection = this.parent.formatter.editorManager.nodeSelection.save(range, docElement);\n            var args = {\n                originalEvent: e ? e.args : { action: 'insert-table' },\n                item: {\n                    command: 'Table',\n                    subCommand: 'CreateTable'\n                }\n            };\n            this.insertTableDialog({ self: this, args: args, selection: selection });\n        }\n    };\n    Table.prototype.showDialog = function () {\n        this.openDialog(false);\n    };\n    Table.prototype.closeDialog = function () {\n        if (this.editdlgObj) {\n            this.editdlgObj.hide({ returnValue: true });\n        }\n    };\n    Table.prototype.onToolbarAction = function (args) {\n        var item = args.args.item;\n        switch (item.subCommand) {\n            case 'TableHeader':\n                this.tableHeader(args.selection, args.args);\n                break;\n            case 'TableRemove':\n                this.removeTable(args.selection, args.args);\n                break;\n            case 'TableEditProperties':\n                this.editTable(args);\n                break;\n        }\n    };\n    Table.prototype.verticalAlign = function (args, e) {\n        var tdEle = closest(args.selectParent[0], 'td') || closest(args.selectParent[0], 'th');\n        if (tdEle) {\n            this.parent.formatter.process(this.parent, e, e, { tableCell: tdEle, subCommand: e.item.subCommand });\n        }\n    };\n    Table.prototype.tableStyles = function (args, command) {\n        var table = closest(args.selectParent[0], 'table');\n        if (command === 'Dashed') {\n            /* eslint-disable */\n            (this.parent.element.classList.contains(classes.CLS_TB_DASH_BOR)) ?\n                this.parent.element.classList.remove(classes.CLS_TB_DASH_BOR) : this.parent.element.classList.add(classes.CLS_TB_DASH_BOR);\n            (table.classList.contains(classes.CLS_TB_DASH_BOR)) ? table.classList.remove(classes.CLS_TB_DASH_BOR) :\n                table.classList.add(classes.CLS_TB_DASH_BOR);\n        }\n        if (command === 'Alternate') {\n            (this.parent.element.classList.contains(classes.CLS_TB_ALT_BOR)) ?\n                this.parent.element.classList.remove(classes.CLS_TB_ALT_BOR) : this.parent.element.classList.add(classes.CLS_TB_ALT_BOR);\n            (table.classList.contains(classes.CLS_TB_ALT_BOR)) ? table.classList.remove(classes.CLS_TB_ALT_BOR) :\n                table.classList.add(classes.CLS_TB_ALT_BOR);\n            /* eslint-enable */\n        }\n        if (args.args && args.args.item.cssClass) {\n            var classList = args.args.item.cssClass.split(' ');\n            for (var i = 0; i < classList.length; i++) {\n                if (table.classList.contains(classList[i])) {\n                    table.classList.remove(classList[i]);\n                }\n                else {\n                    table.classList.add(classList[i]);\n                }\n            }\n        }\n        this.parent.formatter.saveData();\n        this.parent.formatter.editorManager.nodeSelection.restore();\n    };\n    Table.prototype.insideList = function (range) {\n        var blockNodes = this.parent.formatter.editorManager.domNode.blockNodes();\n        var nodes = [];\n        for (var i = 0; i < blockNodes.length; i++) {\n            if (blockNodes[i].parentNode.tagName === 'LI') {\n                nodes.push(blockNodes[i].parentNode);\n            }\n            else if (blockNodes[i].tagName === 'LI' && blockNodes[i].childNodes[0].tagName !== 'P' &&\n                (blockNodes[i].childNodes[0].tagName !== 'OL' &&\n                    blockNodes[i].childNodes[0].tagName !== 'UL')) {\n                nodes.push(blockNodes[i]);\n            }\n        }\n        if (nodes.length > 1 || nodes.length && ((range.startOffset === 0 && range.endOffset === 0))) {\n            this.ensureInsideTableList = true;\n            return true;\n        }\n        else {\n            this.ensureInsideTableList = false;\n            return false;\n        }\n    };\n    Table.prototype.tabSelection = function (event, selection, ele) {\n        var insideList = this.insideList(selection.range);\n        if ((event.keyCode === 37 || event.keyCode === 39) && selection.range.startContainer.nodeType === 3 ||\n            insideList) {\n            return;\n        }\n        event.preventDefault();\n        ele.classList.remove(classes.CLS_TABLE_SEL);\n        if (!event.shiftKey && event.keyCode !== 37) {\n            var nextElement = (!isNullOrUndefined(ele.nextSibling)) ? ele.nextSibling :\n                (!isNullOrUndefined(closest(ele, 'tr').nextSibling) ? closest(ele, 'tr').nextSibling.childNodes[0] :\n                    (!isNullOrUndefined(closest(ele, 'table').nextSibling)) ?\n                        (closest(ele, 'table').nextSibling.nodeName.toLowerCase() === 'td') ?\n                            closest(ele, 'table').nextSibling : ele : ele);\n            if (ele === nextElement && ele.nodeName === 'TH') {\n                nextElement = closest(ele, 'table').rows[1].cells[0];\n            }\n            if (event.keyCode === 39 && ele === nextElement) {\n                nextElement = closest(ele, 'table').nextSibling;\n            }\n            if (nextElement) {\n                // eslint-disable-next-line\n                (nextElement.textContent.trim() !== '' && closest(nextElement, 'td')) ?\n                    selection.setSelectionNode(this.contentModule.getDocument(), nextElement) :\n                    selection.setSelectionText(this.contentModule.getDocument(), nextElement, nextElement, 0, 0);\n            }\n            if (ele === nextElement && event.keyCode !== 39 && nextElement) {\n                ele.classList.add(classes.CLS_TABLE_SEL);\n                this.addRow(selection, event, true);\n                ele.classList.remove(classes.CLS_TABLE_SEL);\n                nextElement = nextElement.parentElement.nextSibling.firstChild;\n                // eslint-disable-next-line\n                (nextElement.textContent.trim() !== '' && closest(nextElement, 'td')) ?\n                    selection.setSelectionNode(this.contentModule.getDocument(), nextElement) :\n                    selection.setSelectionText(this.contentModule.getDocument(), nextElement, nextElement, 0, 0);\n            }\n        }\n        else {\n            var prevElement = (!isNullOrUndefined(ele.previousSibling)) ? ele.previousSibling :\n                (!isNullOrUndefined(closest(ele, 'tr').previousSibling) ?\n                    closest(ele, 'tr').previousSibling.childNodes[closest(ele, 'tr').previousSibling.childNodes.length - 1] :\n                    (!isNullOrUndefined(closest(ele, 'table').previousSibling)) ?\n                        (closest(ele, 'table').previousSibling.nodeName.toLowerCase() === 'td') ? closest(ele, 'table').previousSibling :\n                            ele : ele);\n            if (ele === prevElement && ele.cellIndex === 0 &&\n                closest(ele, 'table').tHead) {\n                var clsTble = closest(ele, 'table');\n                prevElement = clsTble.rows[0].cells[clsTble.rows[0].cells.length - 1];\n            }\n            if (event.keyCode === 37 && ele === prevElement) {\n                prevElement = closest(ele, 'table').previousSibling;\n            }\n            if (prevElement) {\n                // eslint-disable-next-line\n                (prevElement.textContent.trim() !== '' && closest(prevElement, 'td')) ?\n                    selection.setSelectionNode(this.contentModule.getDocument(), prevElement) :\n                    selection.setSelectionText(this.contentModule.getDocument(), prevElement, prevElement, 0, 0);\n            }\n        }\n    };\n    Table.prototype.tableArrowNavigation = function (event, selection, ele) {\n        var selText = selection.range.startContainer;\n        if ((event.keyCode === 40 && selText.nodeType === 3 && (selText.nextSibling && selText.nextSibling.nodeName === 'BR' ||\n            selText.parentNode && selText.parentNode.nodeName !== 'TD')) ||\n            (event.keyCode === 38 && selText.nodeType === 3 && (selText.previousSibling && selText.previousSibling.nodeName === 'BR' ||\n                selText.parentNode && selText.parentNode.nodeName !== 'TD'))) {\n            return;\n        }\n        event.preventDefault();\n        ele.classList.remove(classes.CLS_TABLE_SEL);\n        if (event.keyCode === 40) {\n            ele = (!isNullOrUndefined(closest(ele, 'tr').nextElementSibling)) ?\n                closest(ele, 'tr').nextElementSibling.children[ele.cellIndex] :\n                (closest(ele, 'table').tHead && ele.nodeName === 'TH') ?\n                    closest(ele, 'table').rows[1].cells[ele.cellIndex] :\n                    (!isNullOrUndefined(closest(ele, 'table').nextSibling)) ? closest(ele, 'table').nextSibling :\n                        ele;\n        }\n        else {\n            ele = (!isNullOrUndefined(closest(ele, 'tr').previousElementSibling)) ?\n                closest(ele, 'tr').previousElementSibling.children[ele.cellIndex] :\n                (closest(ele, 'table').tHead && ele.nodeName !== 'TH') ?\n                    closest(ele, 'table').tHead.rows[0].cells[ele.cellIndex] :\n                    (!isNullOrUndefined(closest(ele, 'table').previousSibling)) ? closest(ele, 'table').previousSibling :\n                        ele;\n        }\n        if (ele) {\n            selection.setSelectionText(this.contentModule.getDocument(), ele, ele, 0, 0);\n        }\n    };\n    Table.prototype.setBGColor = function (args) {\n        var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());\n        // eslint-disable-next-line\n        var selection = this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument());\n        // eslint-disable-next-line\n        var selectedCells = this.curTable.querySelectorAll('.e-cell-select');\n        for (var i = 0; i < selectedCells.length; i++) {\n            selectedCells[i].style.backgroundColor = args.item.value;\n        }\n        this.parent.formatter.saveData();\n    };\n    Table.prototype.hideTableQuickToolbar = function () {\n        if (this.quickToolObj && this.quickToolObj.tableQTBar && document.body.contains(this.quickToolObj.tableQTBar.element)) {\n            this.quickToolObj.tableQTBar.hidePopup();\n        }\n    };\n    Table.prototype.tableHeader = function (selection, e) {\n        this.parent.formatter.process(this.parent, e, e.originalEvent, { selection: selection, subCommand: e.item.subCommand });\n    };\n    Table.prototype.editAreaClickHandler = function (e) {\n        if (this.parent.readonly || !isNOU(closest(e.args.target, '.e-img-caption'))) {\n            return;\n        }\n        var args = e.args;\n        var showOnRightClick = this.parent.quickToolbarSettings.showOnRightClick;\n        if (args.which === 2 || (showOnRightClick && args.which === 1) || (!showOnRightClick && args.which === 3)) {\n            return;\n        }\n        if (this.parent.editorMode === 'HTML' && this.parent.quickToolbarModule && this.parent.quickToolbarModule.tableQTBar) {\n            this.quickToolObj = this.parent.quickToolbarModule;\n            var target = args.target;\n            this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n            var isPopupOpen = this.quickToolObj.tableQTBar.element.classList.contains('e-rte-pop');\n            if (isPopupOpen) {\n                return;\n            }\n            var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());\n            var closestTable = closest(target, 'table');\n            var startNode = this.parent.getRange().startContainer.parentElement;\n            var endNode = this.parent.getRange().endContainer.parentElement;\n            if (target && target.nodeName !== 'A' && target.nodeName !== 'IMG' && startNode === endNode && (target.nodeName === 'TD' || target.nodeName === 'TH' ||\n                target.nodeName === 'TABLE' || (closestTable && this.parent.contentModule.getEditPanel().contains(closestTable)))\n                && !(range.startContainer.nodeType === 3 && !range.collapsed)) {\n                var range_1 = this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());\n                this.parent.formatter.editorManager.nodeSelection.save(range_1, this.contentModule.getDocument());\n                this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n                var pageY = (this.parent.iframeSettings.enable) ? window.pageYOffset +\n                    this.parent.element.getBoundingClientRect().top + args.clientY : args.pageY;\n                this.quickToolObj.tableQTBar.showPopup(args.pageX, pageY, target);\n                this.parent.formatter.editorManager.nodeSelection.restore();\n            }\n            else {\n                this.hideTableQuickToolbar();\n            }\n        }\n    };\n    Table.prototype.tableCellSelect = function (e) {\n        var target = e.target;\n        var row = Array.prototype.slice.call(target.parentElement.parentElement.children).indexOf(target.parentElement);\n        var col = Array.prototype.slice.call(target.parentElement.children).indexOf(target);\n        var list = this.dlgDiv.querySelectorAll('.e-rte-tablecell');\n        Array.prototype.forEach.call(list, function (item) {\n            var parentIndex = Array.prototype.slice.call(item.parentElement.parentElement.children).indexOf(item.parentElement);\n            var cellIndex = Array.prototype.slice.call(item.parentElement.children).indexOf(item);\n            removeClass([item], 'e-active');\n            if (parentIndex <= row && cellIndex <= col) {\n                addClass([item], 'e-active');\n            }\n        });\n        this.tblHeader.innerHTML = (col + 1) + 'x' + (row + 1);\n    };\n    // eslint-disable-next-line\n    Table.prototype.tableMouseUp = function (e) {\n        EventHandler.remove(this.curTable, 'mousemove', this.tableMove);\n    };\n    // eslint-disable-next-line\n    Table.prototype.tableCellLeave = function (e) {\n        removeClass(this.dlgDiv.querySelectorAll('.e-rte-tablecell'), 'e-active');\n        addClass([this.dlgDiv.querySelector('.e-rte-tablecell')], 'e-active');\n        this.tblHeader.innerHTML = 1 + 'x' + 1;\n    };\n    Table.prototype.tableCellClick = function (e) {\n        var target = e.target;\n        var row = Array.prototype.slice.call(target.parentElement.parentElement.children).indexOf(target.parentElement) + 1;\n        var col = Array.prototype.slice.call(target.parentElement.children).indexOf(target) + 1;\n        this.self.tableInsert(row, col, e, this);\n    };\n    Table.prototype.tableInsert = function (row, col, e, selectionObj) {\n        var proxy = (selectionObj.self) ? selectionObj.self : this;\n        var startContainer = selectionObj.selection.range.startContainer;\n        if (startContainer.nodeName === 'P' && startContainer.textContent.trim() === '' && !(startContainer.childNodes.length > 0)) {\n            startContainer.innerHTML = '<br />';\n        }\n        var parentNode = startContainer.parentNode;\n        if (proxy.parent.editorMode === 'HTML' &&\n            ((proxy.parent.iframeSettings.enable && !hasClass(parentNode.ownerDocument.querySelector('body'), 'e-lib')) ||\n                // eslint-disable-next-line\n                (!proxy.parent.iframeSettings.enable && isNOU(closest(parentNode, '[id=' + \"'\" + proxy.contentModule.getPanel().id + \"'\" + ']'))))) {\n            proxy.contentModule.getEditPanel().focus();\n            var range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.contentModule.getDocument());\n            selectionObj.selection = proxy.parent.formatter.editorManager.nodeSelection.save(range, proxy.contentModule.getDocument());\n        }\n        var value = {\n            rows: row, columns: col, width: {\n                minWidth: proxy.parent.tableSettings.minWidth,\n                maxWidth: proxy.parent.tableSettings.maxWidth,\n                width: proxy.parent.tableSettings.width\n            },\n            selection: selectionObj.selection\n        };\n        if (proxy.popupObj) {\n            proxy.popupObj.hide();\n        }\n        if (proxy.editdlgObj) {\n            proxy.editdlgObj.hide();\n        }\n        proxy.parent.formatter.process(proxy.parent, selectionObj.args, selectionObj.args.originalEvent, value);\n        proxy.contentModule.getEditPanel().focus();\n        proxy.parent.on(events.mouseDown, proxy.cellSelect, proxy);\n    };\n    Table.prototype.cellSelect = function (e) {\n        var target = e.args.target;\n        var tdNode = closest(target, 'td,th');\n        target = (target.nodeName !== 'TD' && tdNode && this.parent.contentModule.getEditPanel().contains(tdNode)) ?\n            tdNode : target;\n        removeClass(this.contentModule.getEditPanel().querySelectorAll('table td, table th'), classes.CLS_TABLE_SEL);\n        if (target && (target.tagName === 'TD' || target.tagName === 'TH')) {\n            addClass([target], classes.CLS_TABLE_SEL);\n            this.activeCell = target;\n            this.curTable = (this.curTable) ? this.curTable : closest(target, 'table');\n            EventHandler.add(this.curTable, 'mousemove', this.tableMove, this);\n            EventHandler.add(this.curTable, 'mouseup', this.tableMouseUp, this);\n            this.removeResizeElement();\n            if (this.helper && this.contentModule.getEditPanel().contains(this.helper)) {\n                detach(this.helper);\n            }\n        }\n        if (Browser.info.name === 'mozilla' && !isNOU(closest(target, 'table')) &&\n            closest(target, 'table').tagName === 'TABLE') {\n            this.parent.contentModule.getEditPanel().setAttribute('contenteditable', 'false');\n        }\n    };\n    Table.prototype.tableMove = function (event) {\n        this.parent.formatter.editorManager.observer.notify('TABLE_MOVE', { event: event, selectNode: [this.activeCell] });\n    };\n    Table.prototype.resizeHelper = function (e) {\n        if (this.parent.readonly) {\n            return;\n        }\n        var target = e.target || e.targetTouches[0].target;\n        var closestTable = closest(target, 'table.e-rte-table');\n        if (!isNOU(this.curTable) && !isNOU(closestTable) && closestTable !== this.curTable) {\n            this.removeResizeElement();\n            this.removeHelper(e);\n            this.cancelResizeAction();\n        }\n        if (target.nodeName === 'TABLE' || target.nodeName === 'TD' || target.nodeName === 'TH') {\n            this.curTable = (closestTable && this.parent.contentModule.getEditPanel().contains(closestTable))\n                && (target.nodeName === 'TD' || target.nodeName === 'TH') ?\n                closestTable : target;\n            this.removeResizeElement();\n            this.tableResizeEleCreation(this.curTable, e);\n        }\n    };\n    Table.prototype.tableResizeEleCreation = function (table, e) {\n        this.parent.preventDefaultResize(e);\n        var columns = Array.prototype.slice.call(table.rows[this.calMaxCol(table)].cells, 1);\n        var rows = [];\n        for (var i = 0; i < table.rows.length; i++) {\n            rows.push(Array.prototype.slice.call(table.rows[i].cells, 0, 1)[0]);\n        }\n        var height = parseInt(getComputedStyle(table).height, 10);\n        var width = parseInt(getComputedStyle(table).width, 10);\n        var pos = this.calcPos(table);\n        for (var i = 0; columns.length > i; i++) {\n            var colReEle = this.parent.createElement('span', {\n                attrs: {\n                    'data-col': (i + 1).toString(), 'unselectable': 'on', 'contenteditable': 'false'\n                }\n            });\n            colReEle.classList.add(classes.CLS_RTE_TABLE_RESIZE, classes.CLS_TB_COL_RES);\n            colReEle.style.cssText = 'height: ' + height + 'px; width: 4px; top: ' + pos.top +\n                'px; left:' + (pos.left + this.calcPos(columns[i]).left) + 'px;';\n            this.contentModule.getEditPanel().appendChild(colReEle);\n        }\n        for (var i = 0; rows.length > i; i++) {\n            var rowReEle = this.parent.createElement('span', {\n                attrs: {\n                    'data-row': (i).toString(), 'unselectable': 'on', 'contenteditable': 'false'\n                }\n            });\n            rowReEle.classList.add(classes.CLS_RTE_TABLE_RESIZE, classes.CLS_TB_ROW_RES);\n            var rowPosLeft = !isNOU(table.getAttribute('cellspacing')) || table.getAttribute('cellspacing') !== '' ?\n                0 : this.calcPos(rows[i]).left;\n            rowReEle.style.cssText = 'width: ' + width + 'px; height: 4px; top: ' +\n                (this.calcPos(rows[i]).top + pos.top + rows[i].offsetHeight - 2) +\n                'px; left:' + (rowPosLeft + pos.left) + 'px;';\n            this.contentModule.getEditPanel().appendChild(rowReEle);\n        }\n        var tableReBox = this.parent.createElement('span', {\n            className: classes.CLS_TB_BOX_RES, attrs: {\n                'data-col': columns.length.toString(), 'unselectable': 'on', 'contenteditable': 'false'\n            }\n        });\n        tableReBox.style.cssText = 'top: ' + (pos.top + height - 4) +\n            'px; left:' + (pos.left + width - 4) + 'px;';\n        if (Browser.isDevice) {\n            tableReBox.classList.add('e-rmob');\n        }\n        this.contentModule.getEditPanel().appendChild(tableReBox);\n    };\n    Table.prototype.removeResizeElement = function () {\n        var item = this.parent.contentModule.getEditPanel().\n            querySelectorAll('.e-column-resize, .e-row-resize, .e-table-box');\n        if (item.length > 0) {\n            for (var i = 0; i < item.length; i++) {\n                detach(item[i]);\n            }\n        }\n    };\n    Table.prototype.calcPos = function (elem) {\n        var parentOffset = {\n            top: 0,\n            left: 0\n        };\n        // eslint-disable-next-line\n        var offset = elem.getBoundingClientRect();\n        var doc = elem.ownerDocument;\n        var offsetParent = elem.offsetParent || doc.documentElement;\n        while (offsetParent &&\n            (offsetParent === doc.body || offsetParent === doc.documentElement) &&\n            offsetParent.style.position === 'static') {\n            offsetParent = offsetParent.parentNode;\n        }\n        if (offsetParent.nodeName === 'TD' && elem.nodeName === 'TABLE') {\n            offsetParent = closest(offsetParent, '.e-rte-content');\n        }\n        if (offsetParent && offsetParent !== elem && offsetParent.nodeType === 1) {\n            // eslint-disable-next-line\n            parentOffset = offsetParent.getBoundingClientRect();\n        }\n        return {\n            top: elem.offsetTop,\n            left: elem.offsetLeft\n        };\n    };\n    Table.prototype.getPointX = function (e) {\n        if (e.touches && e.touches.length) {\n            return e.touches[0].pageX;\n        }\n        else {\n            return e.pageX;\n        }\n    };\n    Table.prototype.getPointY = function (e) {\n        if (e.touches && e.touches.length) {\n            return e.touches[0].pageY;\n        }\n        else {\n            return e.pageY;\n        }\n    };\n    Table.prototype.resizeStart = function (e) {\n        var _this = this;\n        if (this.parent.readonly) {\n            return;\n        }\n        if (Browser.isDevice) {\n            this.resizeHelper(e);\n        }\n        var target = e.target;\n        if (target.classList.contains(classes.CLS_TB_COL_RES) ||\n            target.classList.contains(classes.CLS_TB_ROW_RES) ||\n            target.classList.contains(classes.CLS_TB_BOX_RES)) {\n            e.preventDefault();\n            this.parent.preventDefaultResize(e);\n            removeClass(this.curTable.querySelectorAll('td,th'), classes.CLS_TABLE_SEL);\n            this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n            this.pageX = this.getPointX(e);\n            this.pageY = this.getPointY(e);\n            this.resizeBtnInit();\n            this.hideTableQuickToolbar();\n            if (target.classList.contains(classes.CLS_TB_COL_RES)) {\n                this.resizeBtnStat.column = true;\n                this.columnEle = this.curTable.rows[this.calMaxCol(this.curTable)].cells[parseInt(target.getAttribute('data-col'), 10)];\n                this.colIndex = this.columnEle.cellIndex;\n                this.moveEle = e.target;\n                this.appendHelper();\n            }\n            if (target.classList.contains(classes.CLS_TB_ROW_RES)) {\n                this.rowEle = this.curTable.rows[parseInt(target.getAttribute('data-row'), 10)];\n                this.resizeBtnStat.row = true;\n                this.appendHelper();\n            }\n            if (target.classList.contains(classes.CLS_TB_BOX_RES)) {\n                this.resizeBtnStat.tableBox = true;\n            }\n            if (Browser.isDevice && this.helper && !this.helper.classList.contains('e-reicon')) {\n                this.helper.classList.add('e-reicon');\n                EventHandler.add(document, Browser.touchStartEvent, this.removeHelper, this);\n                EventHandler.add(this.helper, Browser.touchStartEvent, this.resizeStart, this);\n            }\n            else {\n                var args = { event: e, requestType: 'Table' };\n                this.parent.trigger(events.resizeStart, args, function (resizeStartArgs) {\n                    if (resizeStartArgs.cancel) {\n                        _this.cancelResizeAction();\n                    }\n                });\n            }\n            EventHandler.add(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing, this);\n            EventHandler.add(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd, this);\n        }\n    };\n    Table.prototype.removeHelper = function (e) {\n        var cls = e.target.classList;\n        if (!(cls.contains('e-reicon')) && this.helper) {\n            EventHandler.remove(document, Browser.touchStartEvent, this.removeHelper);\n            EventHandler.remove(this.helper, Browser.touchStartEvent, this.resizeStart);\n            if (this.helper && this.contentModule.getEditPanel().contains(this.helper)) {\n                detach(this.helper);\n            }\n            this.pageX = null;\n            this.helper = null;\n        }\n    };\n    Table.prototype.appendHelper = function () {\n        this.helper = this.parent.createElement('div', {\n            className: 'e-table-rhelper'\n        });\n        if (Browser.isDevice) {\n            this.helper.classList.add('e-reicon');\n        }\n        this.contentModule.getEditPanel().appendChild(this.helper);\n        this.setHelperHeight();\n    };\n    Table.prototype.setHelperHeight = function () {\n        var pos = this.calcPos(this.curTable);\n        if (this.resizeBtnStat.column) {\n            this.helper.classList.add('e-column-helper');\n            this.helper.style.cssText = 'height: ' + getComputedStyle(this.curTable).height + '; top: ' +\n                pos.top + 'px; left:' + (pos.left + this.calcPos(this.columnEle).left - 1) + 'px;';\n        }\n        else {\n            this.helper.classList.add('e-row-helper');\n            this.helper.style.cssText = 'width: ' + getComputedStyle(this.curTable).width + '; top: ' +\n                (this.calcPos(this.rowEle).top + pos.top + this.rowEle.offsetHeight) +\n                'px; left:' + (this.calcPos(this.rowEle).left + pos.left) + 'px;';\n        }\n    };\n    Table.prototype.updateHelper = function () {\n        var pos = this.calcPos(this.curTable);\n        if (this.resizeBtnStat.column) {\n            var left = pos.left + this.calcPos(this.columnEle).left - 1;\n            this.helper.style.left = left + 'px';\n        }\n        else {\n            var top_1 = this.calcPos(this.rowEle).top + pos.top + this.rowEle.offsetHeight;\n            this.helper.style.top = top_1 + 'px';\n        }\n    };\n    Table.prototype.calMaxCol = function (element) {\n        var max = 0;\n        var maxRowIndex;\n        for (var i = 0; i < element.rows.length; i++) {\n            if (max < element.rows[i].cells.length) {\n                maxRowIndex = i;\n                max = element.rows[i].cells.length;\n            }\n        }\n        return maxRowIndex;\n    };\n    Table.prototype.resizing = function (e) {\n        var _this = this;\n        var pageX = this.getPointX(e);\n        var pageY = this.getPointY(e);\n        var mouseX = (this.parent.enableRtl) ? -(pageX - this.pageX) : (pageX - this.pageX);\n        var mouseY = (this.parent.enableRtl) ? -(pageY - this.pageY) : (pageY - this.pageY);\n        this.pageX = pageX;\n        this.pageY = pageY;\n        var args = { event: e, requestType: 'table' };\n        this.parent.trigger(events.onResize, args, function (resizingArgs) {\n            if (resizingArgs.cancel) {\n                _this.cancelResizeAction();\n            }\n            else {\n                var tableReBox = _this.contentModule.getEditPanel().querySelector('.e-table-box');\n                var tableWidth = parseInt(getComputedStyle(_this.curTable).width, 10);\n                var tableHeight = parseInt(getComputedStyle(_this.curTable).height, 10);\n                var paddingSize = +getComputedStyle(_this.contentModule.getEditPanel()).paddingRight.match(/\\d/g).join('');\n                var rteWidth = _this.contentModule.getEditPanel().offsetWidth - paddingSize * 2;\n                if (_this.resizeBtnStat.column) {\n                    var cellColl = _this.curTable.rows[_this.calMaxCol(_this.curTable)].cells;\n                    var width = parseFloat(_this.columnEle.offsetWidth.toString());\n                    var actualwid = width - mouseX;\n                    var totalwid = parseFloat(_this.columnEle.offsetWidth.toString()) +\n                        parseFloat(cellColl[_this.colIndex - 1].offsetWidth.toString());\n                    for (var i = 0; i < _this.curTable.rows.length; i++) {\n                        if ((totalwid - actualwid) > 20 && actualwid > 20) {\n                            var leftColumnWidth = totalwid - actualwid;\n                            var rightColWidth = actualwid;\n                            if (!isNOU(_this.curTable.rows[i].cells[_this.colIndex - 1])) {\n                                _this.curTable.rows[i].cells[_this.colIndex - 1].style.width =\n                                    _this.convertPixelToPercentage(leftColumnWidth, tableWidth) + '%';\n                            }\n                            if (!isNOU(_this.curTable.rows[i].cells[_this.colIndex])) {\n                                _this.curTable.rows[i].cells[_this.colIndex].style.width =\n                                    _this.convertPixelToPercentage(rightColWidth, tableWidth) + '%';\n                            }\n                        }\n                    }\n                    _this.updateHelper();\n                }\n                else if (_this.resizeBtnStat.row) {\n                    _this.parent.preventDefaultResize(e);\n                    var height = parseFloat(_this.rowEle.clientHeight.toString()) + mouseY;\n                    if (height > 20) {\n                        _this.rowEle.style.height = height + 'px';\n                    }\n                    _this.curTable.style.height = '';\n                    if (!isNOU(tableReBox)) {\n                        tableReBox.style.cssText = 'top: ' + (_this.calcPos(_this.curTable).top + tableHeight - 4) +\n                            'px; left:' + (_this.calcPos(_this.curTable).left + tableWidth - 4) + 'px;';\n                    }\n                    _this.updateHelper();\n                }\n                else if (_this.resizeBtnStat.tableBox) {\n                    if (!Browser.isDevice) {\n                        EventHandler.remove(_this.contentModule.getEditPanel(), 'mouseover', _this.resizeHelper);\n                    }\n                    var widthType = _this.curTable.style.width.indexOf('%') > -1;\n                    _this.curTable.style.width = widthType ? _this.convertPixelToPercentage(tableWidth + mouseX, rteWidth) + '%'\n                        : tableWidth + mouseX + 'px';\n                    _this.curTable.style.height = tableHeight + mouseY + 'px';\n                    tableReBox.classList.add('e-rbox-select');\n                    tableReBox.style.cssText = 'top: ' + (_this.calcPos(_this.curTable).top + tableHeight - 4) +\n                        'px; left:' + (_this.calcPos(_this.curTable).left + tableWidth - 4) + 'px;';\n                }\n            }\n        });\n    };\n    Table.prototype.convertPixelToPercentage = function (value, offsetValue) {\n        return (value / offsetValue) * 100;\n    };\n    Table.prototype.cancelResizeAction = function () {\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd);\n        this.removeResizeElement();\n    };\n    Table.prototype.resizeEnd = function (e) {\n        this.resizeBtnInit();\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd);\n        if (this.contentModule.getEditPanel().querySelector('.e-table-box') &&\n            this.contentModule.getEditPanel().contains(this.contentModule.getEditPanel().querySelector('.e-table-box'))) {\n            if (!Browser.isDevice) {\n                EventHandler.add(this.contentModule.getEditPanel(), 'mouseover', this.resizeHelper, this);\n            }\n            this.removeResizeElement();\n            if (this.helper && this.contentModule.getEditPanel().contains(this.helper)) {\n                detach(this.helper);\n                this.helper = null;\n            }\n            this.pageX = null;\n            this.pageY = null;\n            this.moveEle = null;\n        }\n        var args = { event: e, requestType: 'table' };\n        this.parent.trigger(events.resizeStop, args);\n        this.parent.formatter.saveData();\n    };\n    Table.prototype.resizeBtnInit = function () {\n        return this.resizeBtnStat = { column: false, row: false, tableBox: false };\n    };\n    Table.prototype.addRow = function (selectCell, e, tabkey) {\n        var cmd;\n        if (tabkey) {\n            cmd = {\n                item: { command: 'Table', subCommand: 'InsertRowAfter' }\n            };\n        }\n        var value = {\n            selection: selectCell,\n            subCommand: (tabkey) ? cmd.item.subCommand : e.item.subCommand\n        };\n        this.parent.formatter.process(this.parent, (tabkey) ? cmd : e, e, value);\n    };\n    Table.prototype.addColumn = function (selectCell, e) {\n        this.parent.formatter.process(this.parent, e, e, { selection: selectCell, width: this.parent.tableSettings.width, subCommand: e.item.subCommand });\n    };\n    Table.prototype.removeRowColumn = function (selectCell, e) {\n        this.parent.formatter.process(this.parent, e, e, { selection: selectCell, subCommand: e.item.subCommand });\n        this.hideTableQuickToolbar();\n    };\n    Table.prototype.removeTable = function (selection, args, delKey) {\n        var cmd;\n        if (delKey) {\n            cmd = { item: { command: 'Table', subCommand: 'TableRemove' } };\n        }\n        var value = {\n            selection: selection,\n            subCommand: (delKey) ? cmd.item.subCommand : args.item.subCommand\n        };\n        this.parent.formatter.process(this.parent, (delKey) ? cmd : args, args.originalEvent, value);\n        this.contentModule.getEditPanel().focus();\n        this.removeResizeElement();\n        this.hideTableQuickToolbar();\n    };\n    Table.prototype.renderDlgContent = function (args) {\n        var _this = this;\n        if (Browser.isDevice || this.parent.inlineMode.enable) {\n            this.insertTableDialog(args);\n            return;\n        }\n        if (this.popupObj) {\n            this.popupObj.hide();\n            return;\n        }\n        this.hideTableQuickToolbar();\n        var header = '1X1';\n        var insertbtn = this.l10n.getConstant('inserttablebtn');\n        this.dlgDiv = this.parent.createElement('div', { className: 'e-rte-table-popup', id: this.rteID + '_table' });\n        this.tblHeader = this.parent.createElement('div', { className: 'e-rte-popup-header' });\n        this.tblHeader.innerHTML = header;\n        this.dlgDiv.appendChild(this.tblHeader);\n        var tableDiv = this.parent.createElement('div', { className: 'e-rte-table-span' });\n        this.drawTable(tableDiv, args);\n        this.dlgDiv.appendChild(tableDiv);\n        this.dlgDiv.appendChild(this.parent.createElement('span', { className: 'e-span-border' }));\n        var btnEle = this.parent.createElement('button', {\n            className: 'e-insert-table-btn', id: this.rteID + '_insertTable',\n            attrs: { type: 'button', tabindex: '0' }\n        });\n        if (!isNOU(this.parent.getToolbarElement().querySelector('.e-expended-nav'))) {\n            this.parent.getToolbarElement().querySelector('.e-expended-nav').setAttribute('tabindex', '1');\n        }\n        this.dlgDiv.appendChild(btnEle);\n        var button = new Button({\n            iconCss: 'e-icons e-create-table', content: insertbtn, cssClass: 'e-flat',\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        button.isStringTemplate = true;\n        button.appendTo(btnEle);\n        EventHandler.add(btnEle, 'click', this.insertTableDialog, { self: this, args: args.args, selection: args.selection });\n        this.parent.getToolbar().appendChild(this.dlgDiv);\n        var target = args.args.originalEvent.target;\n        target = target.classList.contains('e-toolbar-item') ? target.firstChild : target.parentElement;\n        this.popupObj = new Popup(this.dlgDiv, {\n            targetType: 'relative',\n            relateTo: target,\n            collision: { X: 'fit', Y: 'none' },\n            offsetY: 8,\n            viewPortElement: this.parent.element,\n            position: { X: 'left', Y: 'bottom' },\n            enableRtl: this.parent.enableRtl,\n            zIndex: 10001,\n            // eslint-disable-next-line\n            close: function (event) {\n                _this.parent.isBlur = false;\n                _this.popupObj.destroy();\n                detach(_this.popupObj.element);\n                _this.popupObj = null;\n            }\n        });\n        addClass([this.popupObj.element], 'e-popup-open');\n        this.popupObj.refreshPosition(target);\n    };\n    Table.prototype.docClick = function (e) {\n        var target = e.args.target;\n        // eslint-disable-next-line\n        if (target && target.classList && ((this.popupObj && !closest(target, '[id=' + \"'\" + this.popupObj.element.id + \"'\" + ']') ||\n            (this.editdlgObj && !closest(target, '#' + this.editdlgObj.element.id)))) && !target.classList.contains('e-create-table') &&\n            target.offsetParent && !target.offsetParent.classList.contains('e-rte-backgroundcolor-dropdown')) {\n            if (this.popupObj) {\n                this.popupObj.hide();\n            }\n            if (this.editdlgObj) {\n                this.editdlgObj.hide();\n            }\n            this.parent.isBlur = true;\n            dispatchEvent(this.parent.element, 'focusout');\n        }\n        var closestEle = closest(target, 'td');\n        var isExist = closestEle && this.parent.contentModule.getEditPanel().contains(closestEle) ? true : false;\n        if (target && target.tagName !== 'TD' && target.tagName !== 'TH' && !isExist &&\n            closest(target, '.e-rte-quick-popup') === null && target.offsetParent &&\n            !target.offsetParent.classList.contains('e-quick-dropdown') &&\n            !target.offsetParent.classList.contains('e-rte-backgroundcolor-dropdown') && !closest(target, '.e-rte-dropdown-popup')\n            && !closest(target, '.e-rte-elements')) {\n            removeClass(this.parent.element.querySelectorAll('table td'), classes.CLS_TABLE_SEL);\n            if (!Browser.isIE) {\n                this.hideTableQuickToolbar();\n            }\n        }\n        if (target && target.classList && !target.classList.contains(classes.CLS_TB_COL_RES) &&\n            !target.classList.contains(classes.CLS_TB_ROW_RES) && !target.classList.contains(classes.CLS_TB_BOX_RES)) {\n            this.removeResizeElement();\n        }\n    };\n    Table.prototype.drawTable = function (tableDiv, args) {\n        var rowDiv;\n        var tableCell;\n        for (var row = 0; row < 3; row++) {\n            rowDiv = this.parent.createElement('div', { className: 'e-rte-table-row', attrs: { 'data-column': '' + row } });\n            for (var col = 0; col < 10; col++) {\n                var display = (row > 2) ? 'none' : 'inline-block';\n                tableCell = this.parent.createElement('div', { className: 'e-rte-tablecell e-default', attrs: { 'data-cell': '' + col } });\n                rowDiv.appendChild(tableCell);\n                tableCell.style.display = display;\n                if (col === 0 && row === 0) {\n                    addClass([tableCell], 'e-active');\n                }\n                EventHandler.add(tableCell, 'mousemove', this.tableCellSelect, this);\n                EventHandler.add(rowDiv, 'mouseleave', this.tableCellLeave, this);\n                EventHandler.add(tableCell, 'mouseup', this.tableCellClick, { self: this, args: args.args, selection: args.selection });\n            }\n            tableDiv.appendChild(rowDiv);\n        }\n    };\n    Table.prototype.editTable = function (args) {\n        var _this = this;\n        this.createDialog(args);\n        var editContent = this.tableDlgContent(args);\n        var update = this.l10n.getConstant('dialogUpdate');\n        var cancel = this.l10n.getConstant('dialogCancel');\n        var editHeader = this.l10n.getConstant('tableEditHeader');\n        this.editdlgObj.setProperties({\n            height: 'initial', width: '290px', content: editContent, header: editHeader,\n            buttons: [{\n                    click: this.applyProperties.bind(this, args),\n                    buttonModel: { content: update, cssClass: 'e-flat e-size-update', isPrimary: true }\n                },\n                {\n                    click: function (e) {\n                        _this.cancelDialog(e);\n                    },\n                    buttonModel: { cssClass: 'e-flat e-cancel', content: cancel }\n                }]\n        });\n        this.editdlgObj.element.style.maxHeight = 'none';\n        this.editdlgObj.content.querySelector('input').focus();\n        this.hideTableQuickToolbar();\n    };\n    Table.prototype.insertTableDialog = function (args) {\n        var proxy = (this.self) ? this.self : this;\n        if (proxy.popupObj) {\n            proxy.popupObj.hide();\n        }\n        proxy.createDialog(args);\n        var dlgContent = proxy.tableCellDlgContent();\n        var insert = proxy.l10n.getConstant('dialogInsert');\n        var cancel = proxy.l10n.getConstant('dialogCancel');\n        if (isNullOrUndefined(proxy.editdlgObj)) {\n            return;\n        }\n        proxy.editdlgObj.setProperties({\n            height: 'initial', width: '290px', content: dlgContent,\n            buttons: [{\n                    click: proxy.customTable.bind(this, args),\n                    buttonModel: { content: insert, cssClass: 'e-flat e-insert-table', isPrimary: true }\n                },\n                {\n                    click: function (e) {\n                        proxy.cancelDialog(e);\n                    },\n                    buttonModel: { cssClass: 'e-flat e-cancel', content: cancel }\n                }]\n        });\n        proxy.editdlgObj.element.style.maxHeight = 'none';\n        proxy.editdlgObj.content.querySelector('input').focus();\n    };\n    Table.prototype.tableCellDlgContent = function () {\n        var tableColumn = this.l10n.getConstant('columns');\n        var tableRow = this.l10n.getConstant('rows');\n        var tableWrap = this.parent.createElement('div', { className: 'e-cell-wrap' });\n        var content = '<div class=\"e-rte-field\"><input type=\"text\" '\n            + ' data-role =\"none\" id=\"tableColumn\" class=\"e-table-column\"/></div>'\n            + '<div class=\"e-rte-field\"><input type=\"text\" data-role =\"none\" id=\"tableRow\" class=\"e-table-row\" /></div>';\n        var contentElem = parseHtml(content);\n        tableWrap.appendChild(contentElem);\n        this.columnTextBox = new NumericTextBox({\n            format: 'n0',\n            min: 1,\n            value: 3,\n            placeholder: tableColumn,\n            floatLabelType: 'Auto',\n            max: 50,\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        this.columnTextBox.isStringTemplate = true;\n        this.columnTextBox.appendTo(tableWrap.querySelector('#tableColumn'));\n        this.rowTextBox = new NumericTextBox({\n            format: 'n0',\n            min: 1,\n            value: 3,\n            placeholder: tableRow,\n            floatLabelType: 'Auto',\n            max: 50,\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        this.rowTextBox.isStringTemplate = true;\n        this.rowTextBox.appendTo(tableWrap.querySelector('#tableRow'));\n        return tableWrap;\n    };\n    Table.prototype.clearDialogObj = function () {\n        if (this.editdlgObj) {\n            this.editdlgObj.destroy();\n            detach(this.editdlgObj.element);\n            this.editdlgObj = null;\n        }\n    };\n    // eslint-disable-next-line\n    Table.prototype.createDialog = function (args) {\n        var _this = this;\n        if (this.editdlgObj) {\n            this.editdlgObj.hide({ returnValue: true });\n            return;\n        }\n        var tableDialog = this.parent.createElement('div', {\n            className: 'e-rte-edit-table', id: this.rteID + '_tabledialog'\n        });\n        this.parent.element.appendChild(tableDialog);\n        var insert = this.l10n.getConstant('dialogInsert');\n        var cancel = this.l10n.getConstant('dialogCancel');\n        var header = this.l10n.getConstant('tabledialogHeader');\n        var dialogModel = {\n            header: header,\n            cssClass: classes.CLS_RTE_ELEMENTS,\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            showCloseIcon: true, closeOnEscape: true, width: (Browser.isDevice) ? '290px' : '340px', height: 'initial',\n            position: { X: 'center', Y: (Browser.isDevice) ? 'center' : 'top' },\n            isModal: Browser.isDevice,\n            buttons: [{\n                    buttonModel: { content: insert, cssClass: 'e-flat e-insert-table', isPrimary: true }\n                },\n                {\n                    click: function (e) {\n                        _this.cancelDialog(e);\n                    },\n                    buttonModel: { cssClass: 'e-flat e-cancel', content: cancel }\n                }],\n            target: (Browser.isDevice) ? document.body : this.parent.element,\n            animationSettings: { effect: 'None' },\n            close: function (event) {\n                _this.parent.isBlur = false;\n                _this.editdlgObj.destroy();\n                detach(_this.editdlgObj.element);\n                _this.dialogRenderObj.close(event);\n                _this.editdlgObj = null;\n            }\n        };\n        this.editdlgObj = this.dialogRenderObj.render(dialogModel);\n        this.editdlgObj.appendTo(tableDialog);\n        if (this.quickToolObj && this.quickToolObj.inlineQTBar && document.body.contains(this.quickToolObj.inlineQTBar.element)) {\n            this.quickToolObj.inlineQTBar.hidePopup();\n        }\n    };\n    Table.prototype.customTable = function (args, e) {\n        var proxy = (this.self) ? this.self : this;\n        if (proxy.rowTextBox.value && proxy.columnTextBox.value) {\n            var argument = ((Browser.isDevice || (!isNullOrUndefined(args.args)\n                && !isNullOrUndefined(args.args.originalEvent) &&\n                args.args.originalEvent.action === 'insert-table')\n                || proxy.parent.inlineMode.enable) ? args : this);\n            proxy.tableInsert(proxy.rowTextBox.value, proxy.columnTextBox.value, e, argument);\n        }\n    };\n    // eslint-disable-next-line\n    Table.prototype.cancelDialog = function (e) {\n        this.parent.isBlur = false;\n        this.editdlgObj.hide({ returnValue: true });\n    };\n    // eslint-disable-next-line\n    Table.prototype.applyProperties = function (args, e) {\n        var dialogEle = this.editdlgObj.element;\n        var table = closest(args.selectNode[0], 'table');\n        table.style.width = dialogEle.querySelector('.e-table-width').value + 'px';\n        if (dialogEle.querySelector('.e-cell-padding').value !== '') {\n            var tdElm = table.querySelectorAll('td');\n            for (var i = 0; i < tdElm.length; i++) {\n                var padVal = '';\n                if (tdElm[i].style.padding === '') {\n                    padVal = tdElm[i].getAttribute('style') + ' padding:' +\n                        dialogEle.querySelector('.e-cell-padding').value + 'px;';\n                }\n                else {\n                    tdElm[i].style.padding = dialogEle.querySelector('.e-cell-padding').value + 'px';\n                    padVal = tdElm[i].getAttribute('style');\n                }\n                tdElm[i].setAttribute('style', padVal);\n            }\n        }\n        table.cellSpacing = dialogEle.querySelector('.e-cell-spacing').value;\n        if (!isNOU(table.cellSpacing) || table.cellSpacing !== '0') {\n            addClass([table], classes.CLS_TABLE_BORDER);\n        }\n        else {\n            removeClass([table], classes.CLS_TABLE_BORDER);\n        }\n        this.parent.formatter.saveData();\n        this.editdlgObj.hide({ returnValue: true });\n    };\n    Table.prototype.tableDlgContent = function (e) {\n        var selectNode = e.selectParent[0];\n        var tableWidth = this.l10n.getConstant('tableWidth');\n        var cellPadding = this.l10n.getConstant('cellpadding');\n        var cellSpacing = this.l10n.getConstant('cellspacing');\n        var tableWrap = this.parent.createElement('div', { className: 'e-table-sizewrap' });\n        var widthVal = closest(selectNode, 'table').getClientRects()[0].width;\n        var padVal = closest(selectNode, 'td').style.padding;\n        var brdSpcVal = closest(selectNode, 'table').getAttribute('cellspacing');\n        var content = '<div class=\"e-rte-field\"><input type=\"text\" data-role =\"none\" id=\"tableWidth\" class=\"e-table-width\" '\n            + ' /></div>' + '<div class=\"e-rte-field\"><input type=\"text\" data-role =\"none\" id=\"cellPadding\" class=\"e-cell-padding\" />'\n            + ' </div><div class=\"e-rte-field\"><input type=\"text\" data-role =\"none\" id=\"cellSpacing\" class=\"e-cell-spacing\" /></div>';\n        var contentElem = parseHtml(content);\n        tableWrap.appendChild(contentElem);\n        var widthNum = new NumericTextBox({\n            format: 'n0',\n            min: 0,\n            value: widthVal,\n            placeholder: tableWidth,\n            floatLabelType: 'Auto',\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        widthNum.isStringTemplate = true;\n        widthNum.appendTo(tableWrap.querySelector('#tableWidth'));\n        var padding = new NumericTextBox({\n            format: 'n0',\n            min: 0,\n            // eslint-disable-next-line\n            value: padVal !== '' ? parseInt(padVal, null) : 0,\n            placeholder: cellPadding,\n            floatLabelType: 'Auto',\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        padding.isStringTemplate = true;\n        padding.appendTo(tableWrap.querySelector('#cellPadding'));\n        var spacing = new NumericTextBox({\n            format: 'n0',\n            min: 0,\n            // eslint-disable-next-line\n            value: brdSpcVal !== '' && !isNOU(brdSpcVal) ? parseInt(brdSpcVal, null) : 0,\n            placeholder: cellSpacing,\n            floatLabelType: 'Auto',\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        spacing.isStringTemplate = true;\n        spacing.appendTo(tableWrap.querySelector('#cellSpacing'));\n        return tableWrap;\n    };\n    /**\n     * Destroys the ToolBar.\n     *\n     * @function destroy\n     * @returns {void}\n     * @hidden\n\n     */\n    Table.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {void}\n     */\n    Table.prototype.getModuleName = function () {\n        return 'table';\n    };\n    return Table;\n}());\nexport { Table };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}